import{D as We,L as Fe,S as ee,i as te,s as le,e as I,t as C,k as T,c as D,a as E,h as N,d,m as R,b as S,g,G as y,M as ne,N as F,l as q,O as Je,P as ve,Q as ue,R as ke,T as we,U as ye,V as Ie,W as Qe,v as re,X as Me,Y as Ge,Z as $,K as k,_ as fe,$ as De,j as ce,a0 as Xe,a1 as Ce,n as X,o as L,p as Y,q as P,a2 as Ye,a3 as oe,F as Ne,w as Q,x,y as M,a4 as _e,H as Pe,I as Ee,J as Se,B as G,a5 as Le,a6 as Ze}from"../chunks/vendor-fa7435e7.js";import{_ as ie}from"../chunks/preload-helper-c6bb0bca.js";const Te=We(null);const ze=()=>{const s=Fe("__svelte__");return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:s.navigating.subscribe}},session:s.session,updated:s.updated}},$e={subscribe(s){return ze().page.subscribe(s)}};function Re(s,e,t){const l=s.slice();return l[5]=e[t].handle,l[6]=e[t].pubKey,l}function Ae(s){let e,t,l,n,r,o,i,a,p;return{c(){e=I("h1"),t=C("Add Contact Details"),l=T(),n=I("label"),r=C("Handle:"),o=T(),i=I("input"),this.h()},l(c){e=D(c,"H1",{});var u=E(e);t=N(u,"Add Contact Details"),u.forEach(d),l=R(c),n=D(c,"LABEL",{for:!0});var b=E(n);r=N(b,"Handle:"),b.forEach(d),o=R(c),i=D(c,"INPUT",{id:!0,class:!0}),this.h()},h(){S(n,"for","handle"),S(i,"id","handle"),S(i,"class","svelte-1jwthxq")},m(c,u){g(c,e,u),y(e,t),g(c,l,u),g(c,n,u),y(n,r),g(c,o,u),g(c,i,u),ne(i,s[5]),a||(p=F(i,"input",s[17]),a=!0)},p(c,u){u&32&&i.value!==c[5]&&ne(i,c[5])},d(c){c&&d(e),c&&d(l),c&&d(n),c&&d(o),c&&d(i),a=!1,p()}}}function xe(s){let e,t,l;return{c(){e=C("No "),t=C(se),l=C(" yet.")},l(n){e=N(n,"No "),t=N(n,se),l=N(n," yet.")},m(n,r){g(n,e,r),g(n,t,r),g(n,l,r)},p:k,d(n){n&&d(e),n&&d(t),n&&d(l)}}}function et(s){let e,t,l={ctx:s,current:null,token:null,hasCatch:!1,pending:nt,then:lt,catch:tt,value:7};return fe(t=s[7],l),{c(){e=q(),l.block.c()},l(n){e=q(),l.block.l(n)},m(n,r){g(n,e,r),l.block.m(n,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e},p(n,r){s=n,l.ctx=s,r&128&&t!==(t=s[7])&&fe(t,l)||De(l,s,r)},d(n){n&&d(e),l.block.d(n),l.token=null,l=null}}}function tt(s){return{c:k,l:k,m:k,p:k,d:k}}function lt(s){let e,t=s[7],l=[];for(let n=0;n<t.length;n+=1)l[n]=je(Re(s,t,n));return{c(){e=I("ul");for(let n=0;n<l.length;n+=1)l[n].c()},l(n){e=D(n,"UL",{});var r=E(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(d)},m(n,r){g(n,e,r);for(let o=0;o<l.length;o+=1)l[o].m(e,null)},p(n,r){if(r&128){t=n[7];let o;for(o=0;o<t.length;o+=1){const i=Re(n,t,o);l[o]?l[o].p(i,r):(l[o]=je(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(n){n&&d(e),Xe(l,n)}}}function je(s){let e,t=s[5]+"",l,n,r=s[6]+"",o;return{c(){e=I("li"),l=C(t),n=T(),o=C(r)},l(i){e=D(i,"LI",{});var a=E(e);l=N(a,t),n=R(a),o=N(a,r),a.forEach(d)},m(i,a){g(i,e,a),y(e,l),y(e,n),y(e,o)},p(i,a){a&128&&t!==(t=i[5]+"")&&ce(l,t),a&128&&r!==(r=i[6]+"")&&ce(o,r)},d(i){i&&d(e)}}}function nt(s){let e;return{c(){e=C("Decrypting...")},l(t){e=N(t,"Decrypting...")},m(t,l){g(t,e,l)},p:k,d(t){t&&d(e)}}}function ot(s){let e,t,l,n,r,o,i,a,p,c,u,b,h,f,_,m,v,V,O,w,j,U,Z,H,B=s[3]&&Ae(s);function pe(A,K){return A[2]&&A[7]?et:xe}let z=pe(s),W=z(s);return{c(){e=I("div"),t=I("div"),l=I("h1"),n=C(se),r=T(),o=I("div"),i=I("input"),a=T(),p=I("div"),c=I("input"),u=T(),B&&B.c(),b=T(),h=I("div"),f=I("label"),_=T(),m=I("button"),v=C("Save"),w=T(),W.c(),j=q(),this.h()},l(A){e=D(A,"DIV",{});var K=E(e);t=D(K,"DIV",{class:!0});var J=E(t);l=D(J,"H1",{class:!0});var be=E(l);n=N(be,se),be.forEach(d),r=R(J),o=D(J,"DIV",{class:!0});var he=E(o);i=D(he,"INPUT",{placeholder:!0,class:!0}),he.forEach(d),a=R(J),p=D(J,"DIV",{class:!0});var me=E(p);c=D(me,"INPUT",{class:!0}),me.forEach(d),u=R(J),B&&B.l(J),b=R(J),h=D(J,"DIV",{class:!0});var ae=E(h);f=D(ae,"LABEL",{for:!0});var qe=E(f);qe.forEach(d),_=R(ae),m=D(ae,"BUTTON",{});var ge=E(m);v=N(ge,"Save"),ge.forEach(d),ae.forEach(d),J.forEach(d),K.forEach(d),w=R(A),W.l(A),j=q(),this.h()},h(){S(l,"class","tag"),S(i,"placeholder","publicKey friends contacts"),i.disabled=!0,S(i,"class","svelte-1jwthxq"),S(o,"class","tag keywords"),S(c,"class","svelte-1jwthxq"),S(p,"class","item svelte-1jwthxq"),S(f,"for","preview"),m.disabled=V=!s[5]||!s[6]||s[4],S(h,"class","submit"),S(t,"class","data-entry svelte-1jwthxq")},m(A,K){g(A,e,K),y(e,t),y(t,l),y(l,n),y(t,r),y(t,o),y(o,i),ne(i,s[0]),y(t,a),y(t,p),y(p,c),s[15](c),ne(c,s[6]),y(t,u),B&&B.m(t,null),y(t,b),y(t,h),y(h,f),y(h,_),y(h,m),y(m,v),g(A,w,K),W.m(A,K),g(A,j,K),U=!0,Z||(H=[F(i,"input",s[14]),F(c,"input",s[16]),F(c,"input",s[9]),F(c,"change",s[9]),F(c,"focus",s[9]),F(m,"click",Je(s[8]))],Z=!0)},p(A,[K]){s=A,K&1&&i.value!==s[0]&&ne(i,s[0]),K&64&&c.value!==s[6]&&ne(c,s[6]),s[3]?B?B.p(s,K):(B=Ae(s),B.c(),B.m(t,b)):B&&(B.d(1),B=null),(!U||K&112&&V!==(V=!s[5]||!s[6]||s[4]))&&(m.disabled=V),z===(z=pe(s))&&W?W.p(s,K):(W.d(1),W=z(s),W&&(W.c(),W.m(j.parentNode,j)))},i(A){U||(ve(()=>{O||(O=ue(e,we,{delay:100,duration:400,easing:ke},!0)),O.run(1)}),U=!0)},o(A){O||(O=ue(e,we,{delay:100,duration:400,easing:ke},!1)),O.run(0),U=!1},d(A){A&&d(e),s[15](null),B&&B.d(),A&&O&&O.end(),A&&d(w),W.d(A),A&&d(j),Z=!1,ye(H)}}}const de=32,se="Contacts";function st(s,e,t){let l;Ie(s,$e,H=>t(18,l=H));let{getTagNode:n}=e,{decrypt:r}=e,{rootCID:o}=e;const i=Qe();let a,p,c,u,b,h,f=[],_;re(async()=>{l.url.searchParams.has("add")&&(t(6,c=l.url.searchParams.get("add")),u.focus())});async function m(){t(2,b=await n(se)),t(7,f=await r(b))}function v(){m(),t(4,_=!1),t(5,p=""),t(6,c="")}async function V(){if(!p||!c)return;const H=[...f,{handle:p,pubKey:c}];t(4,_=!0),i("handleSubmit",{tag:se,data:{value:H,schema:a}})}function O(){if(!c)return;if(Me.toByteArray(c).length===de){t(3,h=!0);return}try{if(Ge.decode(c).length===de){t(3,h=!0);return}}catch{}if((z=>new Uint8Array(z.match(/.{1,2}/g).map(W=>parseInt(W,16))))(c).length===de){t(3,h=!0);return}}function w(){a=this.value,t(0,a)}function j(H){$[H?"unshift":"push"](()=>{u=H,t(1,u)})}function U(){c=this.value,t(6,c)}function Z(){p=this.value,t(5,p)}return s.$$set=H=>{"getTagNode"in H&&t(10,n=H.getTagNode),"decrypt"in H&&t(11,r=H.decrypt),"rootCID"in H&&t(12,o=H.rootCID)},s.$$.update=()=>{s.$$.dirty&4096&&o&&m()},[a,u,b,h,_,p,c,f,V,O,n,r,o,v,w,j,U,Z]}class rt extends ee{constructor(e){super();te(this,e,st,ot,le,{getTagNode:10,decrypt:11,rootCID:12,onSubmitted:13})}get onSubmitted(){return this.$$.ctx[13]}}function He(s){let e,t,l,n,r,o;return{c(){e=C("\u2714\uFE0F IPLD Data Saved to: "),t=I("a"),l=C(s[0]),r=T(),o=I("br"),this.h()},l(i){e=N(i,"\u2714\uFE0F IPLD Data Saved to: "),t=D(i,"A",{href:!0,target:!0});var a=E(t);l=N(a,s[0]),a.forEach(d),r=R(i),o=D(i,"BR",{}),this.h()},h(){S(t,"href",n="https://dweb.link/api/v0/dag/get?arg="+s[0]),S(t,"target","_blank")},m(i,a){g(i,e,a),g(i,t,a),y(t,l),g(i,r,a),g(i,o,a)},p(i,a){a&1&&ce(l,i[0]),a&1&&n!==(n="https://dweb.link/api/v0/dag/get?arg="+i[0])&&S(t,"href",n)},d(i){i&&d(e),i&&d(t),i&&d(r),i&&d(o)}}}function it(s){let e,t=s[0]&&He(s);return{c(){t&&t.c(),e=q()},l(l){t&&t.l(l),e=q()},m(l,n){t&&t.m(l,n),g(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=He(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:k,o:k,d(l){t&&t.d(l),l&&d(e)}}}function at(s,e,t){let{rootCID:l}=e;return s.$$set=n=>{"rootCID"in n&&t(0,l=n.rootCID)},[l]}class ut extends ee{constructor(e){super();te(this,e,at,it,le,{rootCID:0})}}function ft(s){let e;return{c(){e=C("Connect with the Wallet to save encrypted messages.")},l(t){e=N(t,"Connect with the Wallet to save encrypted messages.")},m(t,l){g(t,e,l)},p:k,i:k,o:k,d(t){t&&d(e)}}}function ct(s){let e,t,l,n,r,o,i;t=new ut({props:{rootCID:s[0]}});function a(b){s[14](b)}let p={getTagNode:s[6],decrypt:s[4],rootCID:s[0]};s[3]!==void 0&&(p.onSubmitted=s[3]),n=new rt({props:p}),$.push(()=>oe(n,"onSubmitted",a)),n.$on("handleSubmit",s[5]);const c=s[13].default,u=Ne(c,s,s[12],null);return{c(){e=I("div"),Q(t.$$.fragment),l=T(),Q(n.$$.fragment),o=T(),u&&u.c(),this.h()},l(b){e=D(b,"DIV",{class:!0});var h=E(e);x(t.$$.fragment,h),l=R(h),x(n.$$.fragment,h),h.forEach(d),o=R(b),u&&u.l(b),this.h()},h(){S(e,"class","")},m(b,h){g(b,e,h),M(t,e,null),y(e,l),M(n,e,null),g(b,o,h),u&&u.m(b,h),i=!0},p(b,h){const f={};h&1&&(f.rootCID=b[0]),t.$set(f);const _={};h&1&&(_.rootCID=b[0]),!r&&h&8&&(r=!0,_.onSubmitted=b[3],_e(()=>r=!1)),n.$set(_),u&&u.p&&(!i||h&4096)&&Pe(u,c,b,b[12],i?Se(c,b[12],h,null):Ee(b[12]),null)},i(b){i||(P(t.$$.fragment,b),P(n.$$.fragment,b),P(u,b),i=!0)},o(b){L(t.$$.fragment,b),L(n.$$.fragment,b),L(u,b),i=!1},d(b){b&&d(e),G(t),G(n),b&&d(o),u&&u.d(b)}}}function _t(s){let e,t,l,n,r,o,i;const a=[ct,ft],p=[];function c(u,b){return u[1]&&u[2]?0:1}return r=c(s),o=p[r]=a[r](s),{c(){e=I("script"),t=C("global = globalThis; // for solana web3 repo"),l=T(),n=I("div"),o.c(),this.h()},l(u){const b=Ce('[data-svelte="svelte-1yyo2jl"]',document.head);e=D(b,"SCRIPT",{});var h=E(e);t=N(h,"global = globalThis; // for solana web3 repo"),h.forEach(d),b.forEach(d),l=R(u),n=D(u,"DIV",{class:!0});var f=E(n);o.l(f),f.forEach(d),this.h()},h(){S(n,"class","main svelte-460y2v")},m(u,b){y(document.head,e),y(e,t),g(u,l,b),g(u,n,b),p[r].m(n,null),i=!0},p(u,[b]){let h=r;r=c(u),r===h?p[r].p(u,b):(X(),L(p[h],1,1,()=>{p[h]=null}),Y(),o=p[r],o?o.p(u,b):(o=p[r]=a[r](u),o.c()),P(o,1),o.m(n,null))},i(u){i||(P(o),i=!0)},o(u){L(o),i=!1},d(u){d(e),u&&d(l),u&&d(n),p[r].d()}}}const Be="__ROOT_CID__";function pt(s,e,t){let l;Ie(s,Te,w=>t(16,l=w));let{$$slots:n={},$$scope:r}=e,{rootCID:o}=e,{proxcryptor:i}=e,{ipfsNode:a}=e,{CID:p}=e,c=!1,u,b,h,f,_=()=>{};re(async()=>{const{ImmortalDB:w}=await ie(()=>import("../chunks/index-17ddc90e.js"),[]),{DagJoseCryptor:j}=await ie(()=>import("../chunks/dagjosecryptor-fcca8126.js"),["chunks/dagjosecryptor-fcca8126.js","chunks/vendor-fa7435e7.js"]);b=async()=>{if(await a,o)return!0;let U=await w.get(Be);return U?(t(0,o=p.asCID(U)||p.parse(U)),!0):(t(0,o=!1),!0)},t(2,c=await b()),t(11,f=async()=>{await a,t(10,h=new j(a,i,o))}),t(9,u=async()=>{t(0,o=h.rootCID),w.set(Be,o.toString())})});let m=async w=>await h.selfDecrypt(w);const v=async function(w){let j=w.detail.tag||null,U=w.detail.data.schema||"",Z=w.detail.data.value||null;!j||!Z||(await h.put(Z,j,U),t(10,h),_())};Ye(Te,l=async(w,j)=>{await h.setTagReKeys(w,j),t(10,h)},l);async function V(w){if(!(!o||!a||!w))try{const j=(await a.dag.get(o,{path:`/${w}`,localResolve:!0})).value;return(await a.dag.get(j,{localResolve:!0})).value}catch{console.warn(`${w} no DAG data`)}}function O(w){_=w,t(3,_)}return s.$$set=w=>{"rootCID"in w&&t(0,o=w.rootCID),"proxcryptor"in w&&t(1,i=w.proxcryptor),"ipfsNode"in w&&t(7,a=w.ipfsNode),"CID"in w&&t(8,p=w.CID),"$$scope"in w&&t(12,r=w.$$scope)},s.$$.update=()=>{s.$$.dirty&2050&&i&&f&&f(),s.$$.dirty&1536&&h&&h.rootCID&&u&&u()},[o,i,c,_,m,v,V,a,p,u,h,f,r,n,O]}class dt extends ee{constructor(e){super();te(this,e,pt,_t,le,{rootCID:0,proxcryptor:1,ipfsNode:7,CID:8})}}function bt(s){let e,t,l,n,r,o,i,a,p,c,u,b,h;return{c(){e=I("span"),t=C("[QR Code]"),l=T(),n=I("br"),r=T(),o=I("canvas"),p=T(),c=I("br"),this.h()},l(f){e=D(f,"SPAN",{class:!0});var _=E(e);t=N(_,"[QR Code]"),_.forEach(d),l=R(f),n=D(f,"BR",{}),r=R(f),o=D(f,"CANVAS",{width:!0,height:!0,class:!0}),E(o).forEach(d),p=R(f),c=D(f,"BR",{}),this.h()},h(){S(e,"class","svelte-s2soft"),o.hidden=i=!s[1],S(o,"width",32),S(o,"height",32),S(o,"class","svelte-s2soft")},m(f,_){g(f,e,_),y(e,t),g(f,l,_),g(f,n,_),g(f,r,_),g(f,o,_),s[6](o),g(f,p,_),g(f,c,_),u=!0,b||(h=[F(e,"mouseover",s[4]),F(o,"mousemove",s[5])],b=!0)},p(f,[_]){(!u||_&2&&i!==(i=!f[1]))&&(o.hidden=i)},i(f){u||(ve(()=>{a||(a=ue(o,Le,{},!0)),a.run(1)}),u=!0)},o(f){a||(a=ue(o,Le,{},!1)),a.run(0),u=!1},d(f){f&&d(e),f&&d(l),f&&d(n),f&&d(r),f&&d(o),s[6](null),f&&a&&a.end(),f&&d(p),f&&d(c),b=!1,ye(h)}}}function ht(s,e,t){let{value:l}=e,n,r=!1;async function o(){Ze.toCanvas(n,l),t(1,r=!0)}const i=()=>{o()},a=()=>{t(1,r=!1)};function p(c){$[c?"unshift":"push"](()=>{n=c,t(0,n)})}return s.$$set=c=>{"value"in c&&t(3,l=c.value)},[n,r,o,l,i,a,p]}class mt extends ee{constructor(e){super();te(this,e,ht,bt,le,{value:3})}}const Ve=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],Oe=new Array(256);for(let s=0;s<256;s++)Oe[s]=`${Ve[s>>>4&15]}${Ve[s&15]}`;function gt(s){let e="";for(let t=0,l=s.length;t<l;t++)e+=Oe[s[t]];return e}function Ue(s){let e,t,l,n,r,o,i;function a(f){s[12](f)}var p=s[2];function c(f){let _={opts:f[8]};return f[1]!==void 0&&(_.hypnsNode=f[1]),{props:_}}p&&(e=new p(c(s)),$.push(()=>oe(e,"hypnsNode",a)));const u=[kt,vt],b=[];function h(f,_){return f[1]?1:0}return r=h(s),o=b[r]=u[r](s),{c(){e&&Q(e.$$.fragment),l=T(),n=I("div"),o.c(),this.h()},l(f){e&&x(e.$$.fragment,f),l=R(f),n=D(f,"DIV",{class:!0});var _=E(n);o.l(_),_.forEach(d),this.h()},h(){S(n,"class","main svelte-52klll")},m(f,_){e&&M(e,f,_),g(f,l,_),g(f,n,_),b[r].m(n,null),i=!0},p(f,_){const m={};if(!t&&_&2&&(t=!0,m.hypnsNode=f[1],_e(()=>t=!1)),p!==(p=f[2])){if(e){X();const V=e;L(V.$$.fragment,1,0,()=>{G(V,1)}),Y()}p?(e=new p(c(f)),$.push(()=>oe(e,"hypnsNode",a)),Q(e.$$.fragment),P(e.$$.fragment,1),M(e,l.parentNode,l)):e=null}else p&&e.$set(m);let v=r;r=h(f),r===v?b[r].p(f,_):(X(),L(b[v],1,1,()=>{b[v]=null}),Y(),o=b[r],o?o.p(f,_):(o=b[r]=u[r](f),o.c()),P(o,1),o.m(n,null))},i(f){i||(e&&P(e.$$.fragment,f),P(o),i=!0)},o(f){e&&L(e.$$.fragment,f),L(o),i=!1},d(f){e&&G(e,f),f&&d(l),f&&d(n),b[r].d()}}}function vt(s){let e=(s[3]?"Last Saved Root: "+s[3]:"Connect to Pin to PiperNet")+"",t,l,n,r,o,i;const a=[It,yt,wt],p=[];function c(u,b){return u[4]?u[5]?1:2:0}return n=c(s),r=p[n]=a[n](s),{c(){t=C(e),l=T(),r.c(),o=q()},l(u){t=N(u,e),l=R(u),r.l(u),o=q()},m(u,b){g(u,t,b),g(u,l,b),p[n].m(u,b),g(u,o,b),i=!0},p(u,b){(!i||b&8)&&e!==(e=(u[3]?"Last Saved Root: "+u[3]:"Connect to Pin to PiperNet")+"")&&ce(t,e);let h=n;n=c(u),n===h?p[n].p(u,b):(X(),L(p[h],1,1,()=>{p[h]=null}),Y(),r=p[n],r?r.p(u,b):(r=p[n]=a[n](u),r.c()),P(r,1),r.m(o.parentNode,o))},i(u){i||(P(r),i=!0)},o(u){L(r),i=!1},d(u){u&&d(t),u&&d(l),p[n].d(u),u&&d(o)}}}function kt(s){let e;return{c(){e=C("Loading Hypns...")},l(t){e=N(t,"Loading Hypns...")},m(t,l){g(t,e,l)},p:k,i:k,o:k,d(t){t&&d(e)}}}function wt(s){let e;return{c(){e=C("Sign message to write to PiperNet...")},l(t){e=N(t,"Sign message to write to PiperNet...")},m(t,l){g(t,e,l)},p:k,i:k,o:k,d(t){t&&d(e)}}}function yt(s){let e,t,l,n={ctx:s,current:null,token:null,hasCatch:!1,pending:Et,then:Ct,catch:Dt,blocks:[,,,]};return fe(t=s[5],n),{c(){e=q(),n.block.c()},l(r){e=q(),n.block.l(r)},m(r,o){g(r,e,o),n.block.m(r,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e,l=!0},p(r,o){s=r,n.ctx=s,o&32&&t!==(t=s[5])&&fe(t,n)||De(n,s,o)},i(r){l||(P(n.block),l=!0)},o(r){for(let o=0;o<3;o+=1){const i=n.blocks[o];L(i)}l=!1},d(r){r&&d(e),n.block.d(r),n.token=null,n=null}}}function It(s){let e,t,l,n;return{c(){e=I("button"),t=C("Pin to PiperNet"),this.h()},l(r){e=D(r,"BUTTON",{class:!0});var o=E(e);t=N(o,"Pin to PiperNet"),o.forEach(d),this.h()},h(){S(e,"class","svelte-52klll")},m(r,o){g(r,e,o),y(e,t),l||(n=F(e,"click",s[9]),l=!0)},p:k,i:k,o:k,d(r){r&&d(e),l=!1,n()}}}function Dt(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Ct(s){let e,t,l,n,r,o,i,a,p,c,u;function b(_,m){return m&9&&(n=null),n==null&&(n=_[3]===_[0].toV1().toString()),n?Pt:Nt}let h=b(s,-1),f=h(s);return c=new mt({props:{value:`${location.origin}/?contactid=${s[7]}`}}),{c(){e=I("h3"),t=C("\u2714\uFE0F Connected to PiperNet"),l=T(),f.c(),r=C(`\r
\r
					\r
					Connect with others: [`),o=I("a"),i=C("Link"),p=C("] "),Q(c.$$.fragment),this.h()},l(_){e=D(_,"H3",{});var m=E(e);t=N(m,"\u2714\uFE0F Connected to PiperNet"),m.forEach(d),l=R(_),f.l(_),r=N(_,`\r
\r
					\r
					Connect with others: [`),o=D(_,"A",{href:!0});var v=E(o);i=N(v,"Link"),v.forEach(d),p=N(_,"] "),x(c.$$.fragment,_),this.h()},h(){S(o,"href",a=""+(location.origin+"/?add="+s[7]))},m(_,m){g(_,e,m),y(e,t),g(_,l,m),f.m(_,m),g(_,r,m),g(_,o,m),y(o,i),g(_,p,m),M(c,_,m),u=!0},p(_,m){h===(h=b(_,m))&&f?f.p(_,m):(f.d(1),f=h(_),f&&(f.c(),f.m(r.parentNode,r))),(!u||m&128&&a!==(a=""+(location.origin+"/?add="+_[7])))&&S(o,"href",a);const v={};m&128&&(v.value=`${location.origin}/?contactid=${_[7]}`),c.$set(v)},i(_){u||(P(c.$$.fragment,_),u=!0)},o(_){L(c.$$.fragment,_),u=!1},d(_){_&&d(e),_&&d(l),f.d(_),_&&d(r),_&&d(o),_&&d(p),G(c,_)}}}function Nt(s){let e,t,l,n,r,o,i,a;return{c(){e=I("h3"),t=C("\u26A0\uFE0F PiperNet needs updating"),l=T(),n=I("button"),r=C("Publish Latest"),this.h()},l(p){e=D(p,"H3",{});var c=E(e);t=N(c,"\u26A0\uFE0F PiperNet needs updating"),c.forEach(d),l=R(p),n=D(p,"BUTTON",{class:!0});var u=E(n);r=N(u,"Publish Latest"),u.forEach(d),this.h()},h(){n.disabled=o=!s[0]||!s[6],S(n,"class","svelte-52klll")},m(p,c){g(p,e,c),y(e,t),g(p,l,c),g(p,n,c),y(n,r),i||(a=F(n,"click",s[10]),i=!0)},p(p,c){c&65&&o!==(o=!p[0]||!p[6])&&(n.disabled=o)},d(p){p&&d(e),p&&d(l),p&&d(n),i=!1,a()}}}function Pt(s){let e,t;return{c(){e=I("h3"),t=C("\u2714\uFE0F PiperNet up to date")},l(l){e=D(l,"H3",{});var n=E(e);t=N(n,"\u2714\uFE0F PiperNet up to date"),n.forEach(d)},m(l,n){g(l,e,n),y(e,t)},p:k,d(l){l&&d(e)}}}function Et(s){let e;return{c(){e=C("Loading instance...")},l(t){e=N(t,"Loading instance...")},m(t,l){g(t,e,l)},p:k,i:k,o:k,d(t){t&&d(e)}}}function St(s){let e,t,l=s[2]&&Ue(s);return{c(){l&&l.c(),e=q()},l(n){l&&l.l(n),e=q()},m(n,r){l&&l.m(n,r),g(n,e,r),t=!0},p(n,[r]){n[2]?l?(l.p(n,r),r&4&&P(l,1)):(l=Ue(n),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(X(),L(l,1,1,()=>{l=null}),Y())},i(n){t||(P(l),t=!0)},o(n){L(l),t=!1},d(n){l&&l.d(n),n&&d(e)}}}function Lt(s,e,t){let{rootCID:l}=e,{wallet:n}=e,r,o,i,a,p,c,u,b={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe","wss://geut-webrtc-signal-v3.glitch.me","wss://geut-webrtc-signal-v3.herokuapp.com"]}};re(async()=>{ie(()=>import("../chunks/index-127ece89.js"),[]).then(v=>{t(2,r=v.default)})});async function h(){const v=await n.proxcryptor.getPublicKey();t(7,u=gt(v))}async function f(){t(4,a=await o.open({keypair:{publicKey:u},wallet:n})),console.log({hypnsInstance:a}),t(5,p=await a.ready()),console.log({instanceReady:p}),t(6,c=()=>{a.publish({ipld:l.toV1().toString()})}),a.on("update",v=>{t(3,i=v.ipld)})}async function _(){c()}function m(v){o=v,t(1,o)}return s.$$set=v=>{"rootCID"in v&&t(0,l=v.rootCID),"wallet"in v&&t(11,n=v.wallet)},s.$$.update=()=>{s.$$.dirty&2050&&n&&o&&h()},[l,o,r,i,a,p,c,u,b,f,_,n,m]}class Tt extends ee{constructor(e){super();te(this,e,Lt,St,le,{rootCID:0,wallet:11})}}function Rt(s){let e,t;return{c(){e=C("Loading Web3 Wallet..."),t=I("br")},l(l){e=N(l,"Loading Web3 Wallet..."),t=D(l,"BR",{})},m(l,n){g(l,e,n),g(l,t,n)},p:k,i:k,o:k,d(l){l&&d(e),l&&d(t)}}}function At(s){let e,t,l,n;function r(a){s[6](a)}var o=s[4];function i(a){let p={inputUrl:Ot};return a[0]!==void 0&&(p.wallet=a[0]),{props:p}}return o&&(e=new o(i(s)),$.push(()=>oe(e,"wallet",r))),{c(){e&&Q(e.$$.fragment),l=q()},l(a){e&&x(e.$$.fragment,a),l=q()},m(a,p){e&&M(e,a,p),g(a,l,p),n=!0},p(a,p){const c={};if(!t&&p&1&&(t=!0,c.wallet=a[0],_e(()=>t=!1)),o!==(o=a[4])){if(e){X();const u=e;L(u.$$.fragment,1,0,()=>{G(u,1)}),Y()}o?(e=new o(i(a)),$.push(()=>oe(e,"wallet",r)),Q(e.$$.fragment),P(e.$$.fragment,1),M(e,l.parentNode,l)):e=null}else o&&e.$set(c)},i(a){n||(e&&P(e.$$.fragment,a),n=!0)},o(a){e&&L(e.$$.fragment,a),n=!1},d(a){a&&d(l),e&&G(e,a)}}}function jt(s){let e,t;return{c(){e=C("Loading IPFS..."),t=I("br")},l(l){e=N(l,"Loading IPFS..."),t=D(l,"BR",{})},m(l,n){g(l,e,n),g(l,t,n)},p:k,i:k,o:k,d(l){l&&d(e),l&&d(t)}}}function Ht(s){let e,t,l;function n(o){s[7](o)}let r={proxcryptor:s[0].proxcryptor,ipfsNode:s[2],CID:s[3],$$slots:{default:[Bt]},$$scope:{ctx:s}};return s[1]!==void 0&&(r.rootCID=s[1]),e=new dt({props:r}),$.push(()=>oe(e,"rootCID",n)),{c(){Q(e.$$.fragment)},l(o){x(e.$$.fragment,o)},m(o,i){M(e,o,i),l=!0},p(o,i){const a={};i&1&&(a.proxcryptor=o[0].proxcryptor),i&4&&(a.ipfsNode=o[2]),i&8&&(a.CID=o[3]),i&256&&(a.$$scope={dirty:i,ctx:o}),!t&&i&2&&(t=!0,a.rootCID=o[1],_e(()=>t=!1)),e.$set(a)},i(o){l||(P(e.$$.fragment,o),l=!0)},o(o){L(e.$$.fragment,o),l=!1},d(o){G(e,o)}}}function Bt(s){let e;const t=s[5].default,l=Ne(t,s,s[8],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,r){l&&l.m(n,r),e=!0},p(n,r){l&&l.p&&(!e||r&256)&&Pe(l,t,n,n[8],e?Se(t,n[8],r,null):Ee(n[8]),null)},i(n){e||(P(l,n),e=!0)},o(n){L(l,n),e=!1},d(n){l&&l.d(n)}}}function Ke(s){let e,t;return e=new Tt({props:{wallet:s[0],rootCID:s[1]}}),{c(){Q(e.$$.fragment)},l(l){x(e.$$.fragment,l)},m(l,n){M(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.wallet=l[0]),n&2&&(r.rootCID=l[1]),e.$set(r)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){G(e,l)}}}function Vt(s){let e,t,l,n,r,o,i,a;const p=[At,Rt],c=[];function u(m,v){return m[4]?0:1}t=u(s),l=c[t]=p[t](s);const b=[Ht,jt],h=[];function f(m,v){return m[0]&&m[2]&&m[3]?0:1}r=f(s),o=h[r]=b[r](s);let _=s[1]&&Ke(s);return{c(){e=I("div"),l.c(),n=T(),o.c(),i=T(),_&&_.c(),this.h()},l(m){e=D(m,"DIV",{class:!0});var v=E(e);l.l(v),n=R(v),o.l(v),i=R(v),_&&_.l(v),v.forEach(d),this.h()},h(){S(e,"class","")},m(m,v){g(m,e,v),c[t].m(e,null),y(e,n),h[r].m(e,null),y(e,i),_&&_.m(e,null),a=!0},p(m,[v]){let V=t;t=u(m),t===V?c[t].p(m,v):(X(),L(c[V],1,1,()=>{c[V]=null}),Y(),l=c[t],l?l.p(m,v):(l=c[t]=p[t](m),l.c()),P(l,1),l.m(e,n));let O=r;r=f(m),r===O?h[r].p(m,v):(X(),L(h[O],1,1,()=>{h[O]=null}),Y(),o=h[r],o?o.p(m,v):(o=h[r]=b[r](m),o.c()),P(o,1),o.m(e,i)),m[1]?_?(_.p(m,v),v&2&&P(_,1)):(_=Ke(m),_.c(),P(_,1),_.m(e,null)):_&&(X(),L(_,1,1,()=>{_=null}),Y())},i(m){a||(P(l),P(o),P(_),a=!0)},o(m){L(l),L(o),L(_),a=!1},d(m){m&&d(e),c[t].d(),h[r].d(),_&&_.d()}}}let Ot="https://peerpiper.github.io/iframe-wallet-engine/";function Ut(s,e,t){let{$$slots:l={},$$scope:n}=e,{wallet:r}=e,{rootCID:o}=e,i,a,p,c,u=Date.now();re(async()=>{r||f(),i||_();async function f(){t(4,{Web3WalletMenu:c}=await ie(()=>import("../chunks/index-2d698221.js"),["chunks/index-2d698221.js","assets/index-ccfb2056.css","chunks/vendor-fa7435e7.js"]),c)}async function _(){const v=(await ie(()=>import("../chunks/ipfs-core-7ce8034c.js"),[])).default;t(3,a=v.CID),t(2,i=await v.create({})),console.log(`Loaded in ${(Date.now()-u)/1e3}s`,{ipfsNode:i}),p=(await i.id()).id,console.info("NodeId",p)}return()=>i.stop()});function b(f){r=f,t(0,r)}function h(f){o=f,t(1,o)}return s.$$set=f=>{"wallet"in f&&t(0,r=f.wallet),"rootCID"in f&&t(1,o=f.rootCID),"$$scope"in f&&t(8,n=f.$$scope)},[r,o,i,a,c,l,b,h,n]}class Kt extends ee{constructor(e){super();te(this,e,Ut,Vt,le,{wallet:0,rootCID:1})}}function qt(s){let e,t,l,n,r;return n=new Kt({}),{c(){e=I("script"),t=C("global = globalThis; // for solana web3 repo"),l=T(),Q(n.$$.fragment)},l(o){const i=Ce('[data-svelte="svelte-1yyo2jl"]',document.head);e=D(i,"SCRIPT",{});var a=E(e);t=N(a,"global = globalThis; // for solana web3 repo"),a.forEach(d),i.forEach(d),l=R(o),x(n.$$.fragment,o)},m(o,i){y(document.head,e),y(e,t),g(o,l,i),M(n,o,i),r=!0},p:k,i(o){r||(P(n.$$.fragment,o),r=!0)},o(o){L(n.$$.fragment,o),r=!1},d(o){d(e),o&&d(l),G(n,o)}}}function Wt(s){return re(async()=>{}),[]}class Qt extends ee{constructor(e){super();te(this,e,Wt,qt,le,{})}}export{Qt as default};
