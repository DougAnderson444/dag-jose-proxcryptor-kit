import{D as We,L as Fe,S as $,i as x,s as ee,e as w,t as C,k as T,c as k,a as R,h as N,d as p,m as L,b as S,g as v,J as g,M as le,N as M,l as K,O as Qe,P as ve,Q as ue,R as ye,T as ge,U as we,V as ke,W as qe,v as oe,X as Je,Y as ze,Z as te,K as A,_ as Ie,$ as Me,j as re,a0 as Ge,a1 as De,n as G,o as P,p as X,q as D,a2 as Xe,F as Ce,w as Q,x as Y,y as q,G as Ne,H as Ee,I as Se,B as J,a3 as Pe,a4 as Ye,a5 as _e,a6 as ie}from"../chunks/vendor-bbed5e12.js";import{_ as ae}from"../chunks/preload-helper-c6bb0bca.js";const Re=We(null);const Ze=()=>{const o=Fe("__svelte__");return{page:{subscribe:o.page.subscribe},navigating:{subscribe:o.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:o.navigating.subscribe}},session:o.session,updated:o.updated}},$e={subscribe(o){return Ze().page.subscribe(o)}};function Te(o,e,t){const l=o.slice();return l[5]=e[t].handle,l[6]=e[t].pubKey,l}function Le(o){let e,t,l,n,a,s,i,r,u;return{c(){e=w("h1"),t=C("Add Contact Details"),l=T(),n=w("label"),a=C("Handle:"),s=T(),i=w("input"),this.h()},l(c){e=k(c,"H1",{});var _=R(e);t=N(_,"Add Contact Details"),_.forEach(p),l=L(c),n=k(c,"LABEL",{for:!0});var m=R(n);a=N(m,"Handle:"),m.forEach(p),s=L(c),i=k(c,"INPUT",{id:!0,class:!0}),this.h()},h(){S(n,"for","handle"),S(i,"id","handle"),S(i,"class","svelte-5dz0cf")},m(c,_){v(c,e,_),g(e,t),v(c,l,_),v(c,n,_),g(n,a),v(c,s,_),v(c,i,_),le(i,o[5]),r||(u=M(i,"input",o[17]),r=!0)},p(c,_){_&32&&i.value!==c[5]&&le(i,c[5])},d(c){c&&p(e),c&&p(l),c&&p(n),c&&p(s),c&&p(i),r=!1,u()}}}function xe(o){let e,t,l;return{c(){e=C("No "),t=C(ne),l=C(" yet.")},l(n){e=N(n,"No "),t=N(n,ne),l=N(n," yet.")},m(n,a){v(n,e,a),v(n,t,a),v(n,l,a)},p:A,d(n){n&&p(e),n&&p(t),n&&p(l)}}}function et(o){let e,t,l={ctx:o,current:null,token:null,hasCatch:!1,pending:nt,then:lt,catch:tt,value:7};return Ie(t=o[7],l),{c(){e=K(),l.block.c()},l(n){e=K(),l.block.l(n)},m(n,a){v(n,e,a),l.block.m(n,l.anchor=a),l.mount=()=>e.parentNode,l.anchor=e},p(n,a){o=n,l.ctx=o,a&128&&t!==(t=o[7])&&Ie(t,l)||Me(l,o,a)},d(n){n&&p(e),l.block.d(n),l.token=null,l=null}}}function tt(o){return{c:A,l:A,m:A,p:A,d:A}}function lt(o){let e,t=o[7],l=[];for(let n=0;n<t.length;n+=1)l[n]=Ae(Te(o,t,n));return{c(){e=w("ul");for(let n=0;n<l.length;n+=1)l[n].c()},l(n){e=k(n,"UL",{});var a=R(e);for(let s=0;s<l.length;s+=1)l[s].l(a);a.forEach(p)},m(n,a){v(n,e,a);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(n,a){if(a&128){t=n[7];let s;for(s=0;s<t.length;s+=1){const i=Te(n,t,s);l[s]?l[s].p(i,a):(l[s]=Ae(i),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&p(e),Ge(l,n)}}}function Ae(o){let e,t=o[5]+"",l,n,a=o[6]+"",s;return{c(){e=w("li"),l=C(t),n=T(),s=C(a)},l(i){e=k(i,"LI",{});var r=R(e);l=N(r,t),n=L(r),s=N(r,a),r.forEach(p)},m(i,r){v(i,e,r),g(e,l),g(e,n),g(e,s)},p(i,r){r&128&&t!==(t=i[5]+"")&&re(l,t),r&128&&a!==(a=i[6]+"")&&re(s,a)},d(i){i&&p(e)}}}function nt(o){let e;return{c(){e=C("Decrypting...")},l(t){e=N(t,"Decrypting...")},m(t,l){v(t,e,l)},p:A,d(t){t&&p(e)}}}function st(o){let e,t,l,n,a,s,i,r,u,c,_,m,d,f,b,h,I,y,E,j,W,Z,se,B,V=o[3]&&Le(o);function ce(H,O){return H[2]&&H[7]?et:xe}let z=ce(o),U=z(o);return{c(){e=w("div"),t=w("div"),l=w("h1"),n=C(ne),a=T(),s=w("div"),i=w("input"),r=T(),u=w("div"),c=w("input"),_=T(),V&&V.c(),m=T(),d=w("div"),f=w("label"),b=T(),h=w("button"),I=C("Save"),j=T(),U.c(),W=K(),this.h()},l(H){e=k(H,"DIV",{});var O=R(e);t=k(O,"DIV",{class:!0});var F=R(t);l=k(F,"H1",{class:!0});var de=R(l);n=N(de,ne),de.forEach(p),a=L(F),s=k(F,"DIV",{class:!0});var be=R(s);i=k(be,"INPUT",{placeholder:!0,class:!0}),be.forEach(p),r=L(F),u=k(F,"DIV",{class:!0});var he=R(u);c=k(he,"INPUT",{class:!0}),he.forEach(p),_=L(F),V&&V.l(F),m=L(F),d=k(F,"DIV",{class:!0});var fe=R(d);f=k(fe,"LABEL",{for:!0});var Ue=R(f);Ue.forEach(p),b=L(fe),h=k(fe,"BUTTON",{});var me=R(h);I=N(me,"Save"),me.forEach(p),fe.forEach(p),F.forEach(p),O.forEach(p),j=L(H),U.l(H),W=K(),this.h()},h(){S(l,"class","tag"),S(i,"placeholder","publicKey friends contacts"),i.disabled=!0,S(i,"class","svelte-5dz0cf"),S(s,"class","tag keywords"),S(c,"class","svelte-5dz0cf"),S(u,"class","item svelte-5dz0cf"),S(f,"for","preview"),h.disabled=y=!o[5]||!o[6]||o[4],S(d,"class","submit"),S(t,"class","data-entry svelte-5dz0cf")},m(H,O){v(H,e,O),g(e,t),g(t,l),g(l,n),g(t,a),g(t,s),g(s,i),le(i,o[0]),g(t,r),g(t,u),g(u,c),o[15](c),le(c,o[6]),g(t,_),V&&V.m(t,null),g(t,m),g(t,d),g(d,f),g(d,b),g(d,h),g(h,I),v(H,j,O),U.m(H,O),v(H,W,O),Z=!0,se||(B=[M(i,"input",o[14]),M(c,"input",o[16]),M(c,"input",o[9]),M(c,"focus",o[9]),M(h,"click",Qe(o[8]))],se=!0)},p(H,[O]){o=H,O&1&&i.value!==o[0]&&le(i,o[0]),O&64&&c.value!==o[6]&&le(c,o[6]),o[3]?V?V.p(o,O):(V=Le(o),V.c(),V.m(t,m)):V&&(V.d(1),V=null),(!Z||O&112&&y!==(y=!o[5]||!o[6]||o[4]))&&(h.disabled=y),z===(z=ce(o))&&U?U.p(o,O):(U.d(1),U=z(o),U&&(U.c(),U.m(W.parentNode,W)))},i(H){Z||(ve(()=>{E||(E=ue(e,ge,{delay:100,duration:400,easing:ye},!0)),E.run(1)}),Z=!0)},o(H){E||(E=ue(e,ge,{delay:100,duration:400,easing:ye},!1)),E.run(0),Z=!1},d(H){H&&p(e),o[15](null),V&&V.d(),H&&E&&E.end(),H&&p(j),U.d(H),H&&p(W),se=!1,we(B)}}}const pe=32,ne="Contacts";function ot(o,e,t){let l;ke(o,$e,B=>t(18,l=B));let{getTagNode:n}=e,{decrypt:a}=e,{rootCID:s}=e;const i=qe();let r,u,c,_,m,d,f=[],b;oe(async()=>{l.url.searchParams.has("add")&&(t(6,c=l.url.searchParams.get("add")),_.focus())});async function h(){t(2,m=await n(ne)),t(7,f=await a(m))}async function I(){h(),t(4,b=!1),t(5,u=""),t(6,c="")}async function y(){if(!u||!c)return;const B=[...f,{handle:u,pubKey:c}];t(4,b=!0),i("handleSubmit",{tag:ne,data:{value:B,schema:r}})}function E(){if(!c)return;if(Je.toByteArray(c).length===pe){t(3,d=!0);return}try{if(ze.decode(c).length===pe){t(3,d=!0);return}}catch{}if((z=>new Uint8Array(z.match(/.{1,2}/g).map(U=>parseInt(U,16))))(c).length===pe){t(3,d=!0);return}}function j(){r=this.value,t(0,r)}function W(B){te[B?"unshift":"push"](()=>{_=B,t(1,_)})}function Z(){c=this.value,t(6,c)}function se(){u=this.value,t(5,u)}return o.$$set=B=>{"getTagNode"in B&&t(10,n=B.getTagNode),"decrypt"in B&&t(11,a=B.decrypt),"rootCID"in B&&t(12,s=B.rootCID)},o.$$.update=()=>{o.$$.dirty&4096&&s&&h()},[r,_,m,d,b,u,c,f,y,E,n,a,s,I,j,W,Z,se]}class rt extends ${constructor(e){super();x(this,e,ot,st,ee,{getTagNode:10,decrypt:11,rootCID:12,onSubmitted:13})}get onSubmitted(){return this.$$.ctx[13]}}function He(o){let e,t,l,n,a,s;return{c(){e=C("\u2714\uFE0F IPLD Data Saved to: "),t=w("a"),l=C(o[0]),a=T(),s=w("br"),this.h()},l(i){e=N(i,"\u2714\uFE0F IPLD Data Saved to: "),t=k(i,"A",{href:!0,target:!0});var r=R(t);l=N(r,o[0]),r.forEach(p),a=L(i),s=k(i,"BR",{}),this.h()},h(){S(t,"href",n="https://dweb.link/api/v0/dag/get?arg="+o[0]),S(t,"target","_blank")},m(i,r){v(i,e,r),v(i,t,r),g(t,l),v(i,a,r),v(i,s,r)},p(i,r){r&1&&re(l,i[0]),r&1&&n!==(n="https://dweb.link/api/v0/dag/get?arg="+i[0])&&S(t,"href",n)},d(i){i&&p(e),i&&p(t),i&&p(a),i&&p(s)}}}function it(o){let e,t=o[0]&&He(o);return{c(){t&&t.c(),e=K()},l(l){t&&t.l(l),e=K()},m(l,n){t&&t.m(l,n),v(l,e,n)},p(l,[n]){l[0]?t?t.p(l,n):(t=He(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:A,o:A,d(l){t&&t.d(l),l&&p(e)}}}function at(o,e,t){let{rootCID:l}=e;return o.$$set=n=>{"rootCID"in n&&t(0,l=n.rootCID)},[l]}class ft extends ${constructor(e){super();x(this,e,at,it,ee,{rootCID:0})}}function ut(o){let e;return{c(){e=C("Connect with the Wallet to save encrypted messages.")},l(t){e=N(t,"Connect with the Wallet to save encrypted messages.")},m(t,l){v(t,e,l)},p:A,i:A,o:A,d(t){t&&p(e)}}}function ct(o){let e,t,l,n,a,s;t=new ft({props:{rootCID:o[0]}}),n=new rt({props:{getTagNode:o[5],decrypt:o[3],rootCID:o[0]}}),n.$on("handleSubmit",o[4]);const i=o[12].default,r=Ce(i,o,o[11],null);return{c(){e=w("div"),Q(t.$$.fragment),l=T(),Q(n.$$.fragment),a=T(),r&&r.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var c=R(e);Y(t.$$.fragment,c),l=L(c),Y(n.$$.fragment,c),c.forEach(p),a=L(u),r&&r.l(u),this.h()},h(){S(e,"class","blog")},m(u,c){v(u,e,c),q(t,e,null),g(e,l),q(n,e,null),v(u,a,c),r&&r.m(u,c),s=!0},p(u,c){const _={};c&1&&(_.rootCID=u[0]),t.$set(_);const m={};c&1&&(m.rootCID=u[0]),n.$set(m),r&&r.p&&(!s||c&2048)&&Ne(r,i,u,u[11],s?Se(i,u[11],c,null):Ee(u[11]),null)},i(u){s||(D(t.$$.fragment,u),D(n.$$.fragment,u),D(r,u),s=!0)},o(u){P(t.$$.fragment,u),P(n.$$.fragment,u),P(r,u),s=!1},d(u){u&&p(e),J(t),J(n),u&&p(a),r&&r.d(u)}}}function _t(o){let e,t,l,n,a,s,i;const r=[ct,ut],u=[];function c(_,m){return _[1]&&_[2]?0:1}return a=c(o),s=u[a]=r[a](o),{c(){e=w("script"),t=C("global = globalThis; // for solana web3 repo"),l=T(),n=w("div"),s.c(),this.h()},l(_){const m=De('[data-svelte="svelte-1yyo2jl"]',document.head);e=k(m,"SCRIPT",{});var d=R(e);t=N(d,"global = globalThis; // for solana web3 repo"),d.forEach(p),m.forEach(p),l=L(_),n=k(_,"DIV",{class:!0});var f=R(n);s.l(f),f.forEach(p),this.h()},h(){S(n,"class","main svelte-1or3b6t")},m(_,m){g(document.head,e),g(e,t),v(_,l,m),v(_,n,m),u[a].m(n,null),i=!0},p(_,[m]){let d=a;a=c(_),a===d?u[a].p(_,m):(G(),P(u[d],1,1,()=>{u[d]=null}),X(),s=u[a],s?s.p(_,m):(s=u[a]=r[a](_),s.c()),D(s,1),s.m(n,null))},i(_){i||(D(s),i=!0)},o(_){P(s),i=!1},d(_){p(e),_&&p(l),_&&p(n),u[a].d()}}}const je="__ROOT_CID__";function pt(o,e,t){let l;ke(o,Re,y=>t(14,l=y));let{$$slots:n={},$$scope:a}=e,{rootCID:s}=e,{proxcryptor:i}=e,{ipfsNode:r}=e,{CID:u}=e,c=!1,_,m,d,f;oe(async()=>{const{ImmortalDB:y}=await ae(()=>import("../chunks/index-17ddc90e.js"),[]),{DagJoseCryptor:E}=await ae(()=>import("../chunks/dagjosecryptor-98c83f78.js"),["chunks/dagjosecryptor-98c83f78.js","chunks/vendor-bbed5e12.js"]);m=async()=>{if(await r,s)return!0;let j=await y.get(je);return j?(t(0,s=u.asCID(j)||u.parse(j)),!0):(t(0,s=!1),!0)},t(2,c=await m()),t(10,f=async()=>{await r,t(9,d=new E(r,i,s))}),t(8,_=async()=>{t(0,s=d.rootCID),y.set(je,s.toString())})});let b=async y=>await d.selfDecrypt(y);const h=async function(y){let E=y.detail.tag||null,j=y.detail.data.schema||"",W=y.detail.data.value||null;!E||!W||(await d.put(W,E,j),t(9,d))};Xe(Re,l=async(y,E)=>{await d.setTagReKeys(y,E),t(9,d)},l);async function I(y){if(!(!s||!r||!y))try{const E=(await r.dag.get(s,{path:`/${y}`,localResolve:!0})).value;return(await r.dag.get(E,{localResolve:!0})).value}catch{console.warn(`${y} no DAG data`)}}return o.$$set=y=>{"rootCID"in y&&t(0,s=y.rootCID),"proxcryptor"in y&&t(1,i=y.proxcryptor),"ipfsNode"in y&&t(6,r=y.ipfsNode),"CID"in y&&t(7,u=y.CID),"$$scope"in y&&t(11,a=y.$$scope)},o.$$.update=()=>{o.$$.dirty&1026&&i&&f&&f(),o.$$.dirty&768&&d&&d.rootCID&&_&&_()},[s,i,c,b,h,I,r,u,_,d,f,a,n]}class dt extends ${constructor(e){super();x(this,e,pt,_t,ee,{rootCID:0,proxcryptor:1,ipfsNode:6,CID:7})}}function bt(o){let e,t,l,n,a,s,i,r,u,c,_,m,d;return{c(){e=w("span"),t=C("[QR Code]"),l=T(),n=w("br"),a=T(),s=w("canvas"),u=T(),c=w("br"),this.h()},l(f){e=k(f,"SPAN",{class:!0});var b=R(e);t=N(b,"[QR Code]"),b.forEach(p),l=L(f),n=k(f,"BR",{}),a=L(f),s=k(f,"CANVAS",{width:!0,height:!0,class:!0}),R(s).forEach(p),u=L(f),c=k(f,"BR",{}),this.h()},h(){S(e,"class","svelte-s2soft"),s.hidden=i=!o[1],S(s,"width",32),S(s,"height",32),S(s,"class","svelte-s2soft")},m(f,b){v(f,e,b),g(e,t),v(f,l,b),v(f,n,b),v(f,a,b),v(f,s,b),o[6](s),v(f,u,b),v(f,c,b),_=!0,m||(d=[M(e,"mouseover",o[4]),M(s,"mousemove",o[5])],m=!0)},p(f,[b]){(!_||b&2&&i!==(i=!f[1]))&&(s.hidden=i)},i(f){_||(ve(()=>{r||(r=ue(s,Pe,{},!0)),r.run(1)}),_=!0)},o(f){r||(r=ue(s,Pe,{},!1)),r.run(0),_=!1},d(f){f&&p(e),f&&p(l),f&&p(n),f&&p(a),f&&p(s),o[6](null),f&&r&&r.end(),f&&p(u),f&&p(c),m=!1,we(d)}}}function ht(o,e,t){let{value:l}=e,n,a=!1;async function s(){Ye.toCanvas(n,l),t(1,a=!0)}const i=()=>{s()},r=()=>{t(1,a=!1)};function u(c){te[c?"unshift":"push"](()=>{n=c,t(0,n)})}return o.$$set=c=>{"value"in c&&t(3,l=c.value)},[n,a,s,l,i,r,u]}class mt extends ${constructor(e){super();x(this,e,ht,bt,ee,{value:3})}}const Be=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],Ve=new Array(256);for(let o=0;o<256;o++)Ve[o]=`${Be[o>>>4&15]}${Be[o&15]}`;function vt(o){let e="";for(let t=0,l=o.length;t<l;t++)e+=Ve[o[t]];return e}function Oe(o){let e,t,l,n,a,s,i;function r(f){o[8](f)}var u=o[1];function c(f){let b={opts:f[4]};return f[0]!==void 0&&(b.hypnsNode=f[0]),{props:b}}u&&(e=new u(c(o)),te.push(()=>ie(e,"hypnsNode",r)));const _=[gt,yt],m=[];function d(f,b){return f[0]?1:0}return a=d(o),s=m[a]=_[a](o),{c(){e&&Q(e.$$.fragment),l=T(),n=w("div"),s.c(),this.h()},l(f){e&&Y(e.$$.fragment,f),l=L(f),n=k(f,"DIV",{class:!0});var b=R(n);s.l(b),b.forEach(p),this.h()},h(){S(n,"class","enclosure svelte-f9vtd1")},m(f,b){e&&q(e,f,b),v(f,l,b),v(f,n,b),m[a].m(n,null),i=!0},p(f,b){const h={};if(!t&&b&1&&(t=!0,h.hypnsNode=f[0],_e(()=>t=!1)),u!==(u=f[1])){if(e){G();const y=e;P(y.$$.fragment,1,0,()=>{J(y,1)}),X()}u?(e=new u(c(f)),te.push(()=>ie(e,"hypnsNode",r)),Q(e.$$.fragment),D(e.$$.fragment,1),q(e,l.parentNode,l)):e=null}else u&&e.$set(h);let I=a;a=d(f),a===I?m[a].p(f,b):(G(),P(m[I],1,1,()=>{m[I]=null}),X(),s=m[a],s?s.p(f,b):(s=m[a]=_[a](f),s.c()),D(s,1),s.m(n,null))},i(f){i||(e&&D(e.$$.fragment,f),D(s),i=!0)},o(f){e&&P(e.$$.fragment,f),P(s),i=!1},d(f){e&&J(e,f),f&&p(l),f&&p(n),m[a].d()}}}function yt(o){let e,t=(o[2]&&"Last Saved Root: "+o[2])+"",l,n,a,s,i=o[3]&&Ke(o);return{c(){e=w("p"),l=C(t),n=T(),i&&i.c(),a=K()},l(r){e=k(r,"P",{});var u=R(e);l=N(u,t),u.forEach(p),n=L(r),i&&i.l(r),a=K()},m(r,u){v(r,e,u),g(e,l),v(r,n,u),i&&i.m(r,u),v(r,a,u),s=!0},p(r,u){(!s||u&4)&&t!==(t=(r[2]&&"Last Saved Root: "+r[2])+"")&&re(l,t),r[3]?i?(i.p(r,u),u&8&&D(i,1)):(i=Ke(r),i.c(),D(i,1),i.m(a.parentNode,a)):i&&(G(),P(i,1,1,()=>{i=null}),X())},i(r){s||(D(i),s=!0)},o(r){P(i),s=!1},d(r){r&&p(e),r&&p(n),i&&i.d(r),r&&p(a)}}}function gt(o){let e;return{c(){e=C("Loading Hypns...")},l(t){e=N(t,"Loading Hypns...")},m(t,l){v(t,e,l)},p:A,i:A,o:A,d(t){t&&p(e)}}}function Ke(o){let e,t,l,n,a=location.host+"",s,i,r,u,c,_,m;return _=new mt({props:{value:`${location.host}/?contactid=${o[3]}`}}),{c(){e=w("h3"),t=C("\u2714\uFE0F Connected to PiperNet @"),l=C(`\r
				\r
				QR Code to\r
				`),n=w("a"),s=C(a),i=C("/?contactid="),r=C(o[3]),c=T(),Q(_.$$.fragment),this.h()},l(d){e=k(d,"H3",{});var f=R(e);t=N(f,"\u2714\uFE0F Connected to PiperNet @"),f.forEach(p),l=N(d,`\r
				\r
				QR Code to\r
				`),n=k(d,"A",{href:!0});var b=R(n);s=N(b,a),i=N(b,"/?contactid="),r=N(b,o[3]),b.forEach(p),c=L(d),Y(_.$$.fragment,d),this.h()},h(){S(n,"href",u=""+(location.host+"/?contactid="+o[3]))},m(d,f){v(d,e,f),g(e,t),v(d,l,f),v(d,n,f),g(n,s),g(n,i),g(n,r),v(d,c,f),q(_,d,f),m=!0},p(d,f){(!m||f&8)&&re(r,d[3]),(!m||f&8&&u!==(u=""+(location.host+"/?contactid="+d[3])))&&S(n,"href",u);const b={};f&8&&(b.value=`${location.host}/?contactid=${d[3]}`),_.$set(b)},i(d){m||(D(_.$$.fragment,d),m=!0)},o(d){P(_.$$.fragment,d),m=!1},d(d){d&&p(e),d&&p(l),d&&p(n),d&&p(c),J(_,d)}}}function wt(o){let e,t,l=o[1]&&Oe(o);return{c(){l&&l.c(),e=K()},l(n){l&&l.l(n),e=K()},m(n,a){l&&l.m(n,a),v(n,e,a),t=!0},p(n,[a]){n[1]?l?(l.p(n,a),a&2&&D(l,1)):(l=Oe(n),l.c(),D(l,1),l.m(e.parentNode,e)):l&&(G(),P(l,1,1,()=>{l=null}),X())},i(n){t||(D(l),t=!0)},o(n){P(l),t=!1},d(n){l&&l.d(n),n&&p(e)}}}function kt(o,e,t){let{rootCID:l}=e,{wallet:n}=e,a,s,i,r,u,c,_={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe","wss://geut-webrtc-signal-v3.glitch.me","wss://geut-webrtc-signal-v3.herokuapp.com"]}};oe(async()=>{ae(()=>import("../chunks/index-bb5a237a.js"),[]).then(b=>{t(1,a=b.default)})});async function m(){const b=await n.proxcryptor.getPublicKey();t(3,c=vt(b)),d()}async function d(){r=await s.open({keypair:{publicKey:c},wallet:n}),await r.ready(),t(7,u=()=>{r.publish({ipld:l.toV1().toString()})}),r.on("update",b=>{t(2,i=b.ipld)})}function f(b){s=b,t(0,s)}return o.$$set=b=>{"rootCID"in b&&t(5,l=b.rootCID),"wallet"in b&&t(6,n=b.wallet)},o.$$.update=()=>{o.$$.dirty&65&&n&&s&&m(),o.$$.dirty&160&&l&&u&&u()},[s,a,i,c,_,l,n,u,f]}class It extends ${constructor(e){super();x(this,e,kt,wt,ee,{rootCID:5,wallet:6})}}function Dt(o){let e,t;return{c(){e=C("Loading Web3 Wallet..."),t=w("br")},l(l){e=N(l,"Loading Web3 Wallet..."),t=k(l,"BR",{})},m(l,n){v(l,e,n),v(l,t,n)},p:A,i:A,o:A,d(l){l&&p(e),l&&p(t)}}}function Ct(o){let e,t,l,n;function a(r){o[6](r)}var s=o[4];function i(r){let u={inputUrl:Rt};return r[0]!==void 0&&(u.wallet=r[0]),{props:u}}return s&&(e=new s(i(o)),te.push(()=>ie(e,"wallet",a))),{c(){e&&Q(e.$$.fragment),l=K()},l(r){e&&Y(e.$$.fragment,r),l=K()},m(r,u){e&&q(e,r,u),v(r,l,u),n=!0},p(r,u){const c={};if(!t&&u&1&&(t=!0,c.wallet=r[0],_e(()=>t=!1)),s!==(s=r[4])){if(e){G();const _=e;P(_.$$.fragment,1,0,()=>{J(_,1)}),X()}s?(e=new s(i(r)),te.push(()=>ie(e,"wallet",a)),Q(e.$$.fragment),D(e.$$.fragment,1),q(e,l.parentNode,l)):e=null}else s&&e.$set(c)},i(r){n||(e&&D(e.$$.fragment,r),n=!0)},o(r){e&&P(e.$$.fragment,r),n=!1},d(r){r&&p(l),e&&J(e,r)}}}function Nt(o){let e,t;return{c(){e=C("Loading IPFS..."),t=w("br")},l(l){e=N(l,"Loading IPFS..."),t=k(l,"BR",{})},m(l,n){v(l,e,n),v(l,t,n)},p:A,i:A,o:A,d(l){l&&p(e),l&&p(t)}}}function Et(o){let e,t,l;function n(s){o[7](s)}let a={proxcryptor:o[0].proxcryptor,ipfsNode:o[2],CID:o[3],$$slots:{default:[St]},$$scope:{ctx:o}};return o[1]!==void 0&&(a.rootCID=o[1]),e=new dt({props:a}),te.push(()=>ie(e,"rootCID",n)),{c(){Q(e.$$.fragment)},l(s){Y(e.$$.fragment,s)},m(s,i){q(e,s,i),l=!0},p(s,i){const r={};i&1&&(r.proxcryptor=s[0].proxcryptor),i&4&&(r.ipfsNode=s[2]),i&8&&(r.CID=s[3]),i&256&&(r.$$scope={dirty:i,ctx:s}),!t&&i&2&&(t=!0,r.rootCID=s[1],_e(()=>t=!1)),e.$set(r)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),l=!1},d(s){J(e,s)}}}function St(o){let e;const t=o[5].default,l=Ce(t,o,o[8],null);return{c(){l&&l.c()},l(n){l&&l.l(n)},m(n,a){l&&l.m(n,a),e=!0},p(n,a){l&&l.p&&(!e||a&256)&&Ne(l,t,n,n[8],e?Se(t,n[8],a,null):Ee(n[8]),null)},i(n){e||(D(l,n),e=!0)},o(n){P(l,n),e=!1},d(n){l&&l.d(n)}}}function Pt(o){let e,t,l,n,a,s,i,r,u;e=new It({props:{wallet:o[0],rootCID:o[1]}});const c=[Ct,Dt],_=[];function m(h,I){return h[4]?0:1}l=m(o),n=_[l]=c[l](o);const d=[Et,Nt],f=[];function b(h,I){return h[0]&&h[2]&&h[3]?0:1}return s=b(o),i=f[s]=d[s](o),{c(){Q(e.$$.fragment),t=T(),n.c(),a=T(),i.c(),r=K()},l(h){Y(e.$$.fragment,h),t=L(h),n.l(h),a=L(h),i.l(h),r=K()},m(h,I){q(e,h,I),v(h,t,I),_[l].m(h,I),v(h,a,I),f[s].m(h,I),v(h,r,I),u=!0},p(h,[I]){const y={};I&1&&(y.wallet=h[0]),I&2&&(y.rootCID=h[1]),e.$set(y);let E=l;l=m(h),l===E?_[l].p(h,I):(G(),P(_[E],1,1,()=>{_[E]=null}),X(),n=_[l],n?n.p(h,I):(n=_[l]=c[l](h),n.c()),D(n,1),n.m(a.parentNode,a));let j=s;s=b(h),s===j?f[s].p(h,I):(G(),P(f[j],1,1,()=>{f[j]=null}),X(),i=f[s],i?i.p(h,I):(i=f[s]=d[s](h),i.c()),D(i,1),i.m(r.parentNode,r))},i(h){u||(D(e.$$.fragment,h),D(n),D(i),u=!0)},o(h){P(e.$$.fragment,h),P(n),P(i),u=!1},d(h){J(e,h),h&&p(t),_[l].d(h),h&&p(a),f[s].d(h),h&&p(r)}}}let Rt="https://peerpiper.github.io/iframe-wallet-engine/";function Tt(o,e,t){let{$$slots:l={},$$scope:n}=e,{wallet:a}=e,{rootCID:s}=e,i,r,u,c,_=Date.now();oe(async()=>{a||f(),i||b();async function f(){t(4,{Web3WalletMenu:c}=await ae(()=>import("../chunks/index-62fae110.js"),["chunks/index-62fae110.js","assets/index-ecc7e899.css","chunks/vendor-bbed5e12.js"]),c)}async function b(){const I=(await ae(()=>import("../chunks/ipfs-core-7ce8034c.js"),[])).default;t(3,r=I.CID),t(2,i=await I.create({})),console.log(`Loaded in ${(Date.now()-_)/1e3}s`,{ipfsNode:i}),u=(await i.id()).id,console.info("NodeId",u)}return()=>i.stop()});function m(f){a=f,t(0,a)}function d(f){s=f,t(1,s)}return o.$$set=f=>{"wallet"in f&&t(0,a=f.wallet),"rootCID"in f&&t(1,s=f.rootCID),"$$scope"in f&&t(8,n=f.$$scope)},[a,s,i,r,c,l,m,d,n]}class Lt extends ${constructor(e){super();x(this,e,Tt,Pt,ee,{wallet:0,rootCID:1})}}function At(o){let e,t,l,n,a;return n=new Lt({}),{c(){e=w("script"),t=C("global = globalThis; // for solana web3 repo"),l=T(),Q(n.$$.fragment)},l(s){const i=De('[data-svelte="svelte-1yyo2jl"]',document.head);e=k(i,"SCRIPT",{});var r=R(e);t=N(r,"global = globalThis; // for solana web3 repo"),r.forEach(p),i.forEach(p),l=L(s),Y(n.$$.fragment,s)},m(s,i){g(document.head,e),g(e,t),v(s,l,i),q(n,s,i),a=!0},p:A,i(s){a||(D(n.$$.fragment,s),a=!0)},o(s){P(n.$$.fragment,s),a=!1},d(s){p(e),s&&p(l),J(n,s)}}}function Ht(o){return oe(async()=>{}),[]}class Vt extends ${constructor(e){super();x(this,e,Ht,At,ee,{})}}export{Vt as default};
