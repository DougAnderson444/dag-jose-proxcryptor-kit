var er=Object.defineProperty,tr=Object.defineProperties;var rr=Object.getOwnPropertyDescriptors;var Lt=Object.getOwnPropertySymbols;var Xt=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var Zt=(e,o,r)=>o in e?er(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r,Re=(e,o)=>{for(var r in o||(o={}))Xt.call(o,r)&&Zt(e,r,o[r]);if(Lt)for(var r of Lt(o))Qt.call(o,r)&&Zt(e,r,o[r]);return e},$e=(e,o)=>tr(e,rr(o));var Dt=(e,o)=>{var r={};for(var t in e)Xt.call(e,t)&&o.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&Lt)for(var t of Lt(e))o.indexOf(t)<0&&Qt.call(e,t)&&(r[t]=e[t]);return r};var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__markAsModule=e=>__defProp(e,"__esModule",{value:!0}),__require=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(o,r)=>(typeof require!="undefined"?require:o)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),__esm=(e,o)=>function(){return e&&(o=(0,e[__getOwnPropNames(e)[0]])(e=0)),o},__commonJS=(e,o)=>function(){return o||(0,e[__getOwnPropNames(e)[0]])((o={exports:{}}).exports,o),o.exports},__export=(e,o)=>{for(var r in o)__defProp(e,r,{get:o[r],enumerable:!0})},__reExport=(e,o,r,t)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of __getOwnPropNames(o))!__hasOwnProp.call(e,n)&&(r||n!=="default")&&__defProp(e,n,{get:()=>o[n],enumerable:!(t=__getOwnPropDesc(o,n))||t.enumerable});return e},__toESM=(e,o)=>__reExport(__markAsModule(__defProp(e!=null?__create(__getProtoOf(e)):{},"default",!o&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),__toCommonJS=(e=>(o,r)=>e&&e.get(o)||(r=__reExport(__markAsModule({}),o,1),e&&e.set(o,r),r))(typeof WeakMap!="undefined"?new WeakMap:0),require_base64_js=__commonJS({"node_modules/base64-js/index.js"(e){init_node_globals(),e.byteLength=f,e.toByteArray=c,e.fromByteArray=g;var o=[],r=[],t=typeof Uint8Array!="undefined"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(s=0,u=n.length;s<u;++s)o[s]=n[s],r[n.charCodeAt(s)]=s;var s,u;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function l(p){var _=p.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=p.indexOf("=");m===-1&&(m=_);var v=m===_?0:4-m%4;return[m,v]}function f(p){var _=l(p),m=_[0],v=_[1];return(m+v)*3/4-v}function a(p,_,m){return(_+m)*3/4-m}function c(p){var _,m=l(p),v=m[0],w=m[1],y=new t(a(p,v,w)),b=0,T=w>0?v-4:v,R;for(R=0;R<T;R+=4)_=r[p.charCodeAt(R)]<<18|r[p.charCodeAt(R+1)]<<12|r[p.charCodeAt(R+2)]<<6|r[p.charCodeAt(R+3)],y[b++]=_>>16&255,y[b++]=_>>8&255,y[b++]=_&255;return w===2&&(_=r[p.charCodeAt(R)]<<2|r[p.charCodeAt(R+1)]>>4,y[b++]=_&255),w===1&&(_=r[p.charCodeAt(R)]<<10|r[p.charCodeAt(R+1)]<<4|r[p.charCodeAt(R+2)]>>2,y[b++]=_>>8&255,y[b++]=_&255),y}function d(p){return o[p>>18&63]+o[p>>12&63]+o[p>>6&63]+o[p&63]}function h(p,_,m){for(var v,w=[],y=_;y<m;y+=3)v=(p[y]<<16&16711680)+(p[y+1]<<8&65280)+(p[y+2]&255),w.push(d(v));return w.join("")}function g(p){for(var _,m=p.length,v=m%3,w=[],y=16383,b=0,T=m-v;b<T;b+=y)w.push(h(p,b,b+y>T?T:b+y));return v===1?(_=p[m-1],w.push(o[_>>2]+o[_<<4&63]+"==")):v===2&&(_=(p[m-2]<<8)+p[m-1],w.push(o[_>>10]+o[_>>4&63]+o[_<<2&63]+"=")),w.join("")}}}),require_ieee754=__commonJS({"node_modules/ieee754/index.js"(e){init_node_globals(),e.read=function(o,r,t,n,s){var u,l,f=s*8-n-1,a=(1<<f)-1,c=a>>1,d=-7,h=t?s-1:0,g=t?-1:1,p=o[r+h];for(h+=g,u=p&(1<<-d)-1,p>>=-d,d+=f;d>0;u=u*256+o[r+h],h+=g,d-=8);for(l=u&(1<<-d)-1,u>>=-d,d+=n;d>0;l=l*256+o[r+h],h+=g,d-=8);if(u===0)u=1-c;else{if(u===a)return l?NaN:(p?-1:1)*(1/0);l=l+Math.pow(2,n),u=u-c}return(p?-1:1)*l*Math.pow(2,u-n)},e.write=function(o,r,t,n,s,u){var l,f,a,c=u*8-s-1,d=(1<<c)-1,h=d>>1,g=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:u-1,_=n?1:-1,m=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(f=isNaN(r)?1:0,l=d):(l=Math.floor(Math.log(r)/Math.LN2),r*(a=Math.pow(2,-l))<1&&(l--,a*=2),l+h>=1?r+=g/a:r+=g*Math.pow(2,1-h),r*a>=2&&(l++,a/=2),l+h>=d?(f=0,l=d):l+h>=1?(f=(r*a-1)*Math.pow(2,s),l=l+h):(f=r*Math.pow(2,h-1)*Math.pow(2,s),l=0));s>=8;o[t+p]=f&255,p+=_,f/=256,s-=8);for(l=l<<s|f,c+=s;c>0;o[t+p]=l&255,p+=_,l/=256,c-=8);o[t+p-_]|=m*128}}}),require_buffer=__commonJS({"node_modules/buffer/index.js"(e){init_node_globals();var o=require_base64_js(),r=require_ieee754(),t=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=w,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,l.TYPED_ARRAY_SUPPORT=s(),!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const W=new Uint8Array(1),q={foo:function(){return 42}};return Object.setPrototypeOf(q,Uint8Array.prototype),Object.setPrototypeOf(W,q),W.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function u(W){if(W>n)throw new RangeError('The value "'+W+'" is invalid for option "size"');const q=new Uint8Array(W);return Object.setPrototypeOf(q,l.prototype),q}function l(W,q,M){if(typeof W=="number"){if(typeof q=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(W)}return f(W,q,M)}l.poolSize=8192;function f(W,q,M){if(typeof W=="string")return h(W,q);if(ArrayBuffer.isView(W))return p(W);if(W==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W);if(Te(W,ArrayBuffer)||W&&Te(W.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Te(W,SharedArrayBuffer)||W&&Te(W.buffer,SharedArrayBuffer)))return _(W,q,M);if(typeof W=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ie=W.valueOf&&W.valueOf();if(ie!=null&&ie!==W)return l.from(ie,q,M);const ve=m(W);if(ve)return ve;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof W[Symbol.toPrimitive]=="function")return l.from(W[Symbol.toPrimitive]("string"),q,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof W)}l.from=function(W,q,M){return f(W,q,M)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function a(W){if(typeof W!="number")throw new TypeError('"size" argument must be of type number');if(W<0)throw new RangeError('The value "'+W+'" is invalid for option "size"')}function c(W,q,M){return a(W),W<=0?u(W):q!==void 0?typeof M=="string"?u(W).fill(q,M):u(W).fill(q):u(W)}l.alloc=function(W,q,M){return c(W,q,M)};function d(W){return a(W),u(W<0?0:v(W)|0)}l.allocUnsafe=function(W){return d(W)},l.allocUnsafeSlow=function(W){return d(W)};function h(W,q){if((typeof q!="string"||q==="")&&(q="utf8"),!l.isEncoding(q))throw new TypeError("Unknown encoding: "+q);const M=y(W,q)|0;let ie=u(M);const ve=ie.write(W,q);return ve!==M&&(ie=ie.slice(0,ve)),ie}function g(W){const q=W.length<0?0:v(W.length)|0,M=u(q);for(let ie=0;ie<q;ie+=1)M[ie]=W[ie]&255;return M}function p(W){if(Te(W,Uint8Array)){const q=new Uint8Array(W);return _(q.buffer,q.byteOffset,q.byteLength)}return g(W)}function _(W,q,M){if(q<0||W.byteLength<q)throw new RangeError('"offset" is outside of buffer bounds');if(W.byteLength<q+(M||0))throw new RangeError('"length" is outside of buffer bounds');let ie;return q===void 0&&M===void 0?ie=new Uint8Array(W):M===void 0?ie=new Uint8Array(W,q):ie=new Uint8Array(W,q,M),Object.setPrototypeOf(ie,l.prototype),ie}function m(W){if(l.isBuffer(W)){const q=v(W.length)|0,M=u(q);return M.length===0||W.copy(M,0,0,q),M}if(W.length!==void 0)return typeof W.length!="number"||De(W.length)?u(0):g(W);if(W.type==="Buffer"&&Array.isArray(W.data))return g(W.data)}function v(W){if(W>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return W|0}function w(W){return+W!=W&&(W=0),l.alloc(+W)}l.isBuffer=function(q){return q!=null&&q._isBuffer===!0&&q!==l.prototype},l.compare=function(q,M){if(Te(q,Uint8Array)&&(q=l.from(q,q.offset,q.byteLength)),Te(M,Uint8Array)&&(M=l.from(M,M.offset,M.byteLength)),!l.isBuffer(q)||!l.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===M)return 0;let ie=q.length,ve=M.length;for(let D=0,z=Math.min(ie,ve);D<z;++D)if(q[D]!==M[D]){ie=q[D],ve=M[D];break}return ie<ve?-1:ve<ie?1:0},l.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(q,M){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(q.length===0)return l.alloc(0);let ie;if(M===void 0)for(M=0,ie=0;ie<q.length;++ie)M+=q[ie].length;const ve=l.allocUnsafe(M);let D=0;for(ie=0;ie<q.length;++ie){let z=q[ie];if(Te(z,Uint8Array))D+z.length>ve.length?(l.isBuffer(z)||(z=l.from(z)),z.copy(ve,D)):Uint8Array.prototype.set.call(ve,z,D);else if(l.isBuffer(z))z.copy(ve,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=z.length}return ve};function y(W,q){if(l.isBuffer(W))return W.length;if(ArrayBuffer.isView(W)||Te(W,ArrayBuffer))return W.byteLength;if(typeof W!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof W);const M=W.length,ie=arguments.length>2&&arguments[2]===!0;if(!ie&&M===0)return 0;let ve=!1;for(;;)switch(q){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return G(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M*2;case"hex":return M>>>1;case"base64":return he(W).length;default:if(ve)return ie?-1:G(W).length;q=(""+q).toLowerCase(),ve=!0}}l.byteLength=y;function b(W,q,M){let ie=!1;if((q===void 0||q<0)&&(q=0),q>this.length||((M===void 0||M>this.length)&&(M=this.length),M<=0)||(M>>>=0,q>>>=0,M<=q))return"";for(W||(W="utf8");;)switch(W){case"hex":return re(this,q,M);case"utf8":case"utf-8":return k(this,q,M);case"ascii":return U(this,q,M);case"latin1":case"binary":return L(this,q,M);case"base64":return O(this,q,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,q,M);default:if(ie)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),ie=!0}}l.prototype._isBuffer=!0;function T(W,q,M){const ie=W[q];W[q]=W[M],W[M]=ie}l.prototype.swap16=function(){const q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let M=0;M<q;M+=2)T(this,M,M+1);return this},l.prototype.swap32=function(){const q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let M=0;M<q;M+=4)T(this,M,M+3),T(this,M+1,M+2);return this},l.prototype.swap64=function(){const q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let M=0;M<q;M+=8)T(this,M,M+7),T(this,M+1,M+6),T(this,M+2,M+5),T(this,M+3,M+4);return this},l.prototype.toString=function(){const q=this.length;return q===0?"":arguments.length===0?k(this,0,q):b.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(q){if(!l.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q?!0:l.compare(this,q)===0},l.prototype.inspect=function(){let q="";const M=e.INSPECT_MAX_BYTES;return q=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(q+=" ... "),"<Buffer "+q+">"},t&&(l.prototype[t]=l.prototype.inspect),l.prototype.compare=function(q,M,ie,ve,D){if(Te(q,Uint8Array)&&(q=l.from(q,q.offset,q.byteLength)),!l.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(M===void 0&&(M=0),ie===void 0&&(ie=q?q.length:0),ve===void 0&&(ve=0),D===void 0&&(D=this.length),M<0||ie>q.length||ve<0||D>this.length)throw new RangeError("out of range index");if(ve>=D&&M>=ie)return 0;if(ve>=D)return-1;if(M>=ie)return 1;if(M>>>=0,ie>>>=0,ve>>>=0,D>>>=0,this===q)return 0;let z=D-ve,de=ie-M;const be=Math.min(z,de),le=this.slice(ve,D),ye=q.slice(M,ie);for(let J=0;J<be;++J)if(le[J]!==ye[J]){z=le[J],de=ye[J];break}return z<de?-1:de<z?1:0};function R(W,q,M,ie,ve){if(W.length===0)return-1;if(typeof M=="string"?(ie=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),M=+M,De(M)&&(M=ve?0:W.length-1),M<0&&(M=W.length+M),M>=W.length){if(ve)return-1;M=W.length-1}else if(M<0)if(ve)M=0;else return-1;if(typeof q=="string"&&(q=l.from(q,ie)),l.isBuffer(q))return q.length===0?-1:S(W,q,M,ie,ve);if(typeof q=="number")return q=q&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(W,q,M):Uint8Array.prototype.lastIndexOf.call(W,q,M):S(W,[q],M,ie,ve);throw new TypeError("val must be string, number or Buffer")}function S(W,q,M,ie,ve){let D=1,z=W.length,de=q.length;if(ie!==void 0&&(ie=String(ie).toLowerCase(),ie==="ucs2"||ie==="ucs-2"||ie==="utf16le"||ie==="utf-16le")){if(W.length<2||q.length<2)return-1;D=2,z/=2,de/=2,M/=2}function be(ye,J){return D===1?ye[J]:ye.readUInt16BE(J*D)}let le;if(ve){let ye=-1;for(le=M;le<z;le++)if(be(W,le)===be(q,ye===-1?0:le-ye)){if(ye===-1&&(ye=le),le-ye+1===de)return ye*D}else ye!==-1&&(le-=le-ye),ye=-1}else for(M+de>z&&(M=z-de),le=M;le>=0;le--){let ye=!0;for(let J=0;J<de;J++)if(be(W,le+J)!==be(q,J)){ye=!1;break}if(ye)return le}return-1}l.prototype.includes=function(q,M,ie){return this.indexOf(q,M,ie)!==-1},l.prototype.indexOf=function(q,M,ie){return R(this,q,M,ie,!0)},l.prototype.lastIndexOf=function(q,M,ie){return R(this,q,M,ie,!1)};function E(W,q,M,ie){M=Number(M)||0;const ve=W.length-M;ie?(ie=Number(ie),ie>ve&&(ie=ve)):ie=ve;const D=q.length;ie>D/2&&(ie=D/2);let z;for(z=0;z<ie;++z){const de=parseInt(q.substr(z*2,2),16);if(De(de))return z;W[M+z]=de}return z}function A(W,q,M,ie){return we(G(q,W.length-M),W,M,ie)}function C(W,q,M,ie){return we(X(q),W,M,ie)}function I(W,q,M,ie){return we(he(q),W,M,ie)}function P(W,q,M,ie){return we(H(q,W.length-M),W,M,ie)}l.prototype.write=function(q,M,ie,ve){if(M===void 0)ve="utf8",ie=this.length,M=0;else if(ie===void 0&&typeof M=="string")ve=M,ie=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(ie)?(ie=ie>>>0,ve===void 0&&(ve="utf8")):(ve=ie,ie=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-M;if((ie===void 0||ie>D)&&(ie=D),q.length>0&&(ie<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");ve||(ve="utf8");let z=!1;for(;;)switch(ve){case"hex":return E(this,q,M,ie);case"utf8":case"utf-8":return A(this,q,M,ie);case"ascii":case"latin1":case"binary":return C(this,q,M,ie);case"base64":return I(this,q,M,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,q,M,ie);default:if(z)throw new TypeError("Unknown encoding: "+ve);ve=(""+ve).toLowerCase(),z=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(W,q,M){return q===0&&M===W.length?o.fromByteArray(W):o.fromByteArray(W.slice(q,M))}function k(W,q,M){M=Math.min(W.length,M);const ie=[];let ve=q;for(;ve<M;){const D=W[ve];let z=null,de=D>239?4:D>223?3:D>191?2:1;if(ve+de<=M){let be,le,ye,J;switch(de){case 1:D<128&&(z=D);break;case 2:be=W[ve+1],(be&192)==128&&(J=(D&31)<<6|be&63,J>127&&(z=J));break;case 3:be=W[ve+1],le=W[ve+2],(be&192)==128&&(le&192)==128&&(J=(D&15)<<12|(be&63)<<6|le&63,J>2047&&(J<55296||J>57343)&&(z=J));break;case 4:be=W[ve+1],le=W[ve+2],ye=W[ve+3],(be&192)==128&&(le&192)==128&&(ye&192)==128&&(J=(D&15)<<18|(be&63)<<12|(le&63)<<6|ye&63,J>65535&&J<1114112&&(z=J))}}z===null?(z=65533,de=1):z>65535&&(z-=65536,ie.push(z>>>10&1023|55296),z=56320|z&1023),ie.push(z),ve+=de}return K(ie)}var N=4096;function K(W){const q=W.length;if(q<=N)return String.fromCharCode.apply(String,W);let M="",ie=0;for(;ie<q;)M+=String.fromCharCode.apply(String,W.slice(ie,ie+=N));return M}function U(W,q,M){let ie="";M=Math.min(W.length,M);for(let ve=q;ve<M;++ve)ie+=String.fromCharCode(W[ve]&127);return ie}function L(W,q,M){let ie="";M=Math.min(W.length,M);for(let ve=q;ve<M;++ve)ie+=String.fromCharCode(W[ve]);return ie}function re(W,q,M){const ie=W.length;(!q||q<0)&&(q=0),(!M||M<0||M>ie)&&(M=ie);let ve="";for(let D=q;D<M;++D)ve+=Me[W[D]];return ve}function Z(W,q,M){const ie=W.slice(q,M);let ve="";for(let D=0;D<ie.length-1;D+=2)ve+=String.fromCharCode(ie[D]+ie[D+1]*256);return ve}l.prototype.slice=function(q,M){const ie=this.length;q=~~q,M=M===void 0?ie:~~M,q<0?(q+=ie,q<0&&(q=0)):q>ie&&(q=ie),M<0?(M+=ie,M<0&&(M=0)):M>ie&&(M=ie),M<q&&(M=q);const ve=this.subarray(q,M);return Object.setPrototypeOf(ve,l.prototype),ve};function V(W,q,M){if(W%1!=0||W<0)throw new RangeError("offset is not uint");if(W+q>M)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(q,M,ie){q=q>>>0,M=M>>>0,ie||V(q,M,this.length);let ve=this[q],D=1,z=0;for(;++z<M&&(D*=256);)ve+=this[q+z]*D;return ve},l.prototype.readUintBE=l.prototype.readUIntBE=function(q,M,ie){q=q>>>0,M=M>>>0,ie||V(q,M,this.length);let ve=this[q+--M],D=1;for(;M>0&&(D*=256);)ve+=this[q+--M]*D;return ve},l.prototype.readUint8=l.prototype.readUInt8=function(q,M){return q=q>>>0,M||V(q,1,this.length),this[q]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(q,M){return q=q>>>0,M||V(q,2,this.length),this[q]|this[q+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(q,M){return q=q>>>0,M||V(q,2,this.length),this[q]<<8|this[q+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(q,M){return q=q>>>0,M||V(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+this[q+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(q,M){return q=q>>>0,M||V(q,4,this.length),this[q]*16777216+(this[q+1]<<16|this[q+2]<<8|this[q+3])},l.prototype.readBigUInt64LE=Be(function(q){q=q>>>0,F(q,"offset");const M=this[q],ie=this[q+7];(M===void 0||ie===void 0)&&j(q,this.length-8);const ve=M+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24,D=this[++q]+this[++q]*2**8+this[++q]*2**16+ie*2**24;return BigInt(ve)+(BigInt(D)<<BigInt(32))}),l.prototype.readBigUInt64BE=Be(function(q){q=q>>>0,F(q,"offset");const M=this[q],ie=this[q+7];(M===void 0||ie===void 0)&&j(q,this.length-8);const ve=M*2**24+this[++q]*2**16+this[++q]*2**8+this[++q],D=this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ie;return(BigInt(ve)<<BigInt(32))+BigInt(D)}),l.prototype.readIntLE=function(q,M,ie){q=q>>>0,M=M>>>0,ie||V(q,M,this.length);let ve=this[q],D=1,z=0;for(;++z<M&&(D*=256);)ve+=this[q+z]*D;return D*=128,ve>=D&&(ve-=Math.pow(2,8*M)),ve},l.prototype.readIntBE=function(q,M,ie){q=q>>>0,M=M>>>0,ie||V(q,M,this.length);let ve=M,D=1,z=this[q+--ve];for(;ve>0&&(D*=256);)z+=this[q+--ve]*D;return D*=128,z>=D&&(z-=Math.pow(2,8*M)),z},l.prototype.readInt8=function(q,M){return q=q>>>0,M||V(q,1,this.length),this[q]&128?(255-this[q]+1)*-1:this[q]},l.prototype.readInt16LE=function(q,M){q=q>>>0,M||V(q,2,this.length);const ie=this[q]|this[q+1]<<8;return ie&32768?ie|4294901760:ie},l.prototype.readInt16BE=function(q,M){q=q>>>0,M||V(q,2,this.length);const ie=this[q+1]|this[q]<<8;return ie&32768?ie|4294901760:ie},l.prototype.readInt32LE=function(q,M){return q=q>>>0,M||V(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},l.prototype.readInt32BE=function(q,M){return q=q>>>0,M||V(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},l.prototype.readBigInt64LE=Be(function(q){q=q>>>0,F(q,"offset");const M=this[q],ie=this[q+7];(M===void 0||ie===void 0)&&j(q,this.length-8);const ve=this[q+4]+this[q+5]*2**8+this[q+6]*2**16+(ie<<24);return(BigInt(ve)<<BigInt(32))+BigInt(M+this[++q]*2**8+this[++q]*2**16+this[++q]*2**24)}),l.prototype.readBigInt64BE=Be(function(q){q=q>>>0,F(q,"offset");const M=this[q],ie=this[q+7];(M===void 0||ie===void 0)&&j(q,this.length-8);const ve=(M<<24)+this[++q]*2**16+this[++q]*2**8+this[++q];return(BigInt(ve)<<BigInt(32))+BigInt(this[++q]*2**24+this[++q]*2**16+this[++q]*2**8+ie)}),l.prototype.readFloatLE=function(q,M){return q=q>>>0,M||V(q,4,this.length),r.read(this,q,!0,23,4)},l.prototype.readFloatBE=function(q,M){return q=q>>>0,M||V(q,4,this.length),r.read(this,q,!1,23,4)},l.prototype.readDoubleLE=function(q,M){return q=q>>>0,M||V(q,8,this.length),r.read(this,q,!0,52,8)},l.prototype.readDoubleBE=function(q,M){return q=q>>>0,M||V(q,8,this.length),r.read(this,q,!1,52,8)};function ee(W,q,M,ie,ve,D){if(!l.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(q>ve||q<D)throw new RangeError('"value" argument is out of bounds');if(M+ie>W.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(q,M,ie,ve){if(q=+q,M=M>>>0,ie=ie>>>0,!ve){const de=Math.pow(2,8*ie)-1;ee(this,q,M,ie,de,0)}let D=1,z=0;for(this[M]=q&255;++z<ie&&(D*=256);)this[M+z]=q/D&255;return M+ie},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(q,M,ie,ve){if(q=+q,M=M>>>0,ie=ie>>>0,!ve){const de=Math.pow(2,8*ie)-1;ee(this,q,M,ie,de,0)}let D=ie-1,z=1;for(this[M+D]=q&255;--D>=0&&(z*=256);)this[M+D]=q/z&255;return M+ie},l.prototype.writeUint8=l.prototype.writeUInt8=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,1,255,0),this[M]=q&255,M+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,2,65535,0),this[M]=q&255,this[M+1]=q>>>8,M+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,2,65535,0),this[M]=q>>>8,this[M+1]=q&255,M+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,4,4294967295,0),this[M+3]=q>>>24,this[M+2]=q>>>16,this[M+1]=q>>>8,this[M]=q&255,M+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,4,4294967295,0),this[M]=q>>>24,this[M+1]=q>>>16,this[M+2]=q>>>8,this[M+3]=q&255,M+4};function fe(W,q,M,ie,ve){se(q,ie,ve,W,M,7);let D=Number(q&BigInt(4294967295));W[M++]=D,D=D>>8,W[M++]=D,D=D>>8,W[M++]=D,D=D>>8,W[M++]=D;let z=Number(q>>BigInt(32)&BigInt(4294967295));return W[M++]=z,z=z>>8,W[M++]=z,z=z>>8,W[M++]=z,z=z>>8,W[M++]=z,M}function _e(W,q,M,ie,ve){se(q,ie,ve,W,M,7);let D=Number(q&BigInt(4294967295));W[M+7]=D,D=D>>8,W[M+6]=D,D=D>>8,W[M+5]=D,D=D>>8,W[M+4]=D;let z=Number(q>>BigInt(32)&BigInt(4294967295));return W[M+3]=z,z=z>>8,W[M+2]=z,z=z>>8,W[M+1]=z,z=z>>8,W[M]=z,M+8}l.prototype.writeBigUInt64LE=Be(function(q,M=0){return fe(this,q,M,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Be(function(q,M=0){return _e(this,q,M,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(q,M,ie,ve){if(q=+q,M=M>>>0,!ve){const be=Math.pow(2,8*ie-1);ee(this,q,M,ie,be-1,-be)}let D=0,z=1,de=0;for(this[M]=q&255;++D<ie&&(z*=256);)q<0&&de===0&&this[M+D-1]!==0&&(de=1),this[M+D]=(q/z>>0)-de&255;return M+ie},l.prototype.writeIntBE=function(q,M,ie,ve){if(q=+q,M=M>>>0,!ve){const be=Math.pow(2,8*ie-1);ee(this,q,M,ie,be-1,-be)}let D=ie-1,z=1,de=0;for(this[M+D]=q&255;--D>=0&&(z*=256);)q<0&&de===0&&this[M+D+1]!==0&&(de=1),this[M+D]=(q/z>>0)-de&255;return M+ie},l.prototype.writeInt8=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,1,127,-128),q<0&&(q=255+q+1),this[M]=q&255,M+1},l.prototype.writeInt16LE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,2,32767,-32768),this[M]=q&255,this[M+1]=q>>>8,M+2},l.prototype.writeInt16BE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,2,32767,-32768),this[M]=q>>>8,this[M+1]=q&255,M+2},l.prototype.writeInt32LE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,4,2147483647,-2147483648),this[M]=q&255,this[M+1]=q>>>8,this[M+2]=q>>>16,this[M+3]=q>>>24,M+4},l.prototype.writeInt32BE=function(q,M,ie){return q=+q,M=M>>>0,ie||ee(this,q,M,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[M]=q>>>24,this[M+1]=q>>>16,this[M+2]=q>>>8,this[M+3]=q&255,M+4},l.prototype.writeBigInt64LE=Be(function(q,M=0){return fe(this,q,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Be(function(q,M=0){return _e(this,q,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ce(W,q,M,ie,ve,D){if(M+ie>W.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function Ee(W,q,M,ie,ve){return q=+q,M=M>>>0,ve||ce(W,q,M,4),r.write(W,q,M,ie,23,4),M+4}l.prototype.writeFloatLE=function(q,M,ie){return Ee(this,q,M,!0,ie)},l.prototype.writeFloatBE=function(q,M,ie){return Ee(this,q,M,!1,ie)};function Ie(W,q,M,ie,ve){return q=+q,M=M>>>0,ve||ce(W,q,M,8),r.write(W,q,M,ie,52,8),M+8}l.prototype.writeDoubleLE=function(q,M,ie){return Ie(this,q,M,!0,ie)},l.prototype.writeDoubleBE=function(q,M,ie){return Ie(this,q,M,!1,ie)},l.prototype.copy=function(q,M,ie,ve){if(!l.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ie||(ie=0),!ve&&ve!==0&&(ve=this.length),M>=q.length&&(M=q.length),M||(M=0),ve>0&&ve<ie&&(ve=ie),ve===ie||q.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(ie<0||ie>=this.length)throw new RangeError("Index out of range");if(ve<0)throw new RangeError("sourceEnd out of bounds");ve>this.length&&(ve=this.length),q.length-M<ve-ie&&(ve=q.length-M+ie);const D=ve-ie;return this===q&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(M,ie,ve):Uint8Array.prototype.set.call(q,this.subarray(ie,ve),M),D},l.prototype.fill=function(q,M,ie,ve){if(typeof q=="string"){if(typeof M=="string"?(ve=M,M=0,ie=this.length):typeof ie=="string"&&(ve=ie,ie=this.length),ve!==void 0&&typeof ve!="string")throw new TypeError("encoding must be a string");if(typeof ve=="string"&&!l.isEncoding(ve))throw new TypeError("Unknown encoding: "+ve);if(q.length===1){const z=q.charCodeAt(0);(ve==="utf8"&&z<128||ve==="latin1")&&(q=z)}}else typeof q=="number"?q=q&255:typeof q=="boolean"&&(q=Number(q));if(M<0||this.length<M||this.length<ie)throw new RangeError("Out of range index");if(ie<=M)return this;M=M>>>0,ie=ie===void 0?this.length:ie>>>0,q||(q=0);let D;if(typeof q=="number")for(D=M;D<ie;++D)this[D]=q;else{const z=l.isBuffer(q)?q:l.from(q,ve),de=z.length;if(de===0)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(D=0;D<ie-M;++D)this[D+M]=z[D%de]}return this};var ue={};function pe(W,q,M){ue[W]=class extends M{constructor(){super();Object.defineProperty(this,"message",{value:q.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${W}]`,this.stack,delete this.name}get code(){return W}set code(ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ve,writable:!0})}toString(){return`${this.name} [${W}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(W){return W?`${W} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(W,q){return`The "${W}" argument must be of type number. Received type ${typeof q}`},TypeError),pe("ERR_OUT_OF_RANGE",function(W,q,M){let ie=`The value of "${W}" is out of range.`,ve=M;return Number.isInteger(M)&&Math.abs(M)>2**32?ve=Ae(String(M)):typeof M=="bigint"&&(ve=String(M),(M>BigInt(2)**BigInt(32)||M<-(BigInt(2)**BigInt(32)))&&(ve=Ae(ve)),ve+="n"),ie+=` It must be ${q}. Received ${ve}`,ie},RangeError);function Ae(W){let q="",M=W.length;const ie=W[0]==="-"?1:0;for(;M>=ie+4;M-=3)q=`_${W.slice(M-3,M)}${q}`;return`${W.slice(0,M)}${q}`}function Y(W,q,M){F(q,"offset"),(W[q]===void 0||W[q+M]===void 0)&&j(q,W.length-(M+1))}function se(W,q,M,ie,ve,D){if(W>M||W<q){const z=typeof q=="bigint"?"n":"";let de;throw D>3?q===0||q===BigInt(0)?de=`>= 0${z} and < 2${z} ** ${(D+1)*8}${z}`:de=`>= -(2${z} ** ${(D+1)*8-1}${z}) and < 2 ** ${(D+1)*8-1}${z}`:de=`>= ${q}${z} and <= ${M}${z}`,new ue.ERR_OUT_OF_RANGE("value",de,W)}Y(ie,ve,D)}function F(W,q){if(typeof W!="number")throw new ue.ERR_INVALID_ARG_TYPE(q,"number",W)}function j(W,q,M){throw Math.floor(W)!==W?(F(W,M),new ue.ERR_OUT_OF_RANGE(M||"offset","an integer",W)):q<0?new ue.ERR_BUFFER_OUT_OF_BOUNDS:new ue.ERR_OUT_OF_RANGE(M||"offset",`>= ${M?1:0} and <= ${q}`,W)}var B=/[^+/0-9A-Za-z-_]/g;function $(W){if(W=W.split("=")[0],W=W.trim().replace(B,""),W.length<2)return"";for(;W.length%4!=0;)W=W+"=";return W}function G(W,q){q=q||1/0;let M;const ie=W.length;let ve=null;const D=[];for(let z=0;z<ie;++z){if(M=W.charCodeAt(z),M>55295&&M<57344){if(!ve){if(M>56319){(q-=3)>-1&&D.push(239,191,189);continue}else if(z+1===ie){(q-=3)>-1&&D.push(239,191,189);continue}ve=M;continue}if(M<56320){(q-=3)>-1&&D.push(239,191,189),ve=M;continue}M=(ve-55296<<10|M-56320)+65536}else ve&&(q-=3)>-1&&D.push(239,191,189);if(ve=null,M<128){if((q-=1)<0)break;D.push(M)}else if(M<2048){if((q-=2)<0)break;D.push(M>>6|192,M&63|128)}else if(M<65536){if((q-=3)<0)break;D.push(M>>12|224,M>>6&63|128,M&63|128)}else if(M<1114112){if((q-=4)<0)break;D.push(M>>18|240,M>>12&63|128,M>>6&63|128,M&63|128)}else throw new Error("Invalid code point")}return D}function X(W){const q=[];for(let M=0;M<W.length;++M)q.push(W.charCodeAt(M)&255);return q}function H(W,q){let M,ie,ve;const D=[];for(let z=0;z<W.length&&!((q-=2)<0);++z)M=W.charCodeAt(z),ie=M>>8,ve=M%256,D.push(ve),D.push(ie);return D}function he(W){return o.toByteArray($(W))}function we(W,q,M,ie){let ve;for(ve=0;ve<ie&&!(ve+M>=q.length||ve>=W.length);++ve)q[ve+M]=W[ve];return ve}function Te(W,q){return W instanceof q||W!=null&&W.constructor!=null&&W.constructor.name!=null&&W.constructor.name===q.name}function De(W){return W!==W}var Me=function(){const W="0123456789abcdef",q=new Array(256);for(let M=0;M<16;++M){const ie=M*16;for(let ve=0;ve<16;++ve)q[ie+ve]=W[M]+W[ve]}return q}();function Be(W){return typeof BigInt=="undefined"?Le:W}function Le(){throw new Error("BigInt not supported")}}}),require_browser=__commonJS({"node_modules/process/browser.js"(e,o){init_node_globals();var r=o.exports={},t,n;function s(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=s}catch{t=s}try{typeof clearTimeout=="function"?n=clearTimeout:n=u}catch{n=u}})();function l(v){if(t===setTimeout)return setTimeout(v,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(v,0);try{return t(v,0)}catch{try{return t.call(null,v,0)}catch{return t.call(this,v,0)}}}function f(v){if(n===clearTimeout)return clearTimeout(v);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(v);try{return n(v)}catch{try{return n.call(null,v)}catch{return n.call(this,v)}}}var a=[],c=!1,d,h=-1;function g(){!c||!d||(c=!1,d.length?a=d.concat(a):h=-1,a.length&&p())}function p(){if(!c){var v=l(g);c=!0;for(var w=a.length;w;){for(d=a,a=[];++h<w;)d&&d[h].run();h=-1,w=a.length}d=null,c=!1,f(v)}}r.nextTick=function(v){var w=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)w[y-1]=arguments[y];a.push(new _(v,w)),a.length===1&&!c&&l(p)};function _(v,w){this.fun=v,this.array=w}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function m(){}r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(v){return[]},r.binding=function(v){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(v){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}}),Buffer,process,global,init_node_globals=__esm({"src/node-globals.js"(){Buffer=require_buffer().Buffer,process=require_browser(),global=typeof global!="undefined"?global:typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:{},globalThis&&globalThis.process&&globalThis.process.env}}),require_is_plain_obj=__commonJS({"node_modules/is-plain-obj/index.js"(e,o){init_node_globals(),o.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;const t=Object.getPrototypeOf(r);return t===null||t===Object.prototype}}}),require_merge_options=__commonJS({"node_modules/merge-options/index.js"(e,o){init_node_globals();var r=require_is_plain_obj(),{hasOwnProperty:t}=Object.prototype,{propertyIsEnumerable:n}=Object,s=(_,m,v)=>Object.defineProperty(_,m,{value:v,writable:!0,enumerable:!0,configurable:!0}),u=e,l={concatArrays:!1,ignoreUndefined:!1},f=_=>{const m=[];for(const v in _)t.call(_,v)&&m.push(v);if(Object.getOwnPropertySymbols){const v=Object.getOwnPropertySymbols(_);for(const w of v)n.call(_,w)&&m.push(w)}return m};function a(_){return Array.isArray(_)?c(_):r(_)?d(_):_}function c(_){const m=_.slice(0,0);return f(_).forEach(v=>{s(m,v,a(_[v]))}),m}function d(_){const m=Object.getPrototypeOf(_)===null?Object.create(null):{};return f(_).forEach(v=>{s(m,v,a(_[v]))}),m}var h=(_,m,v,w)=>(v.forEach(y=>{typeof m[y]=="undefined"&&w.ignoreUndefined||(y in _&&_[y]!==Object.getPrototypeOf(_)?s(_,y,p(_[y],m[y],w)):s(_,y,a(m[y])))}),_),g=(_,m,v)=>{let w=_.slice(0,0),y=0;return[_,m].forEach(b=>{const T=[];for(let R=0;R<b.length;R++)!t.call(b,R)||(T.push(String(R)),b===_?s(w,y++,b[R]):s(w,y++,a(b[R])));w=h(w,b,f(b).filter(R=>!T.includes(R)),v)}),w};function p(_,m,v){return v.concatArrays&&Array.isArray(_)&&Array.isArray(m)?g(_,m,v):!r(m)||!r(_)?a(m):h(_,m,f(m),v)}o.exports=function(..._){const m=p(a(l),this!==u&&this||{},l);let v={_:{}};for(const w of _)if(w!==void 0){if(!r(w))throw new TypeError("`"+w+"` is not an Option Object");v=p(v,{_:w},m)}return v._}}}),require_is_electron=__commonJS({"node_modules/is-electron/index.js"(e,o){init_node_globals();function r(){return typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&!!process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}o.exports=r}}),require_env=__commonJS({"node_modules/ipfs-utils/src/env.js"(e,o){init_node_globals();var r=require_is_electron(),t=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,n=r(),s=t&&!n,u=n&&!t,l=n&&t,f=typeof __require=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!n,a=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,c=typeof process!="undefined"&&typeof process.env!="undefined"&&!1,d=typeof navigator!="undefined"&&navigator.product==="ReactNative";o.exports={isTest:c,isElectron:n,isElectronMain:u,isElectronRenderer:l,isNode:f,isBrowser:s,isWebWorker:a,isEnvWithDom:t,isReactNative:d}}}),require_ms=__commonJS({"node_modules/ms/index.js"(e,o){init_node_globals();var r=1e3,t=r*60,n=t*60,s=n*24,u=s*7,l=s*365.25;o.exports=function(h,g){g=g||{};var p=typeof h;if(p==="string"&&h.length>0)return f(h);if(p==="number"&&isFinite(h))return g.long?c(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function f(h){if(h=String(h),!(h.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(!!g){var p=parseFloat(g[1]),_=(g[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return p*l;case"weeks":case"week":case"w":return p*u;case"days":case"day":case"d":return p*s;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*t;case"seconds":case"second":case"secs":case"sec":case"s":return p*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(h){var g=Math.abs(h);return g>=s?Math.round(h/s)+"d":g>=n?Math.round(h/n)+"h":g>=t?Math.round(h/t)+"m":g>=r?Math.round(h/r)+"s":h+"ms"}function c(h){var g=Math.abs(h);return g>=s?d(h,g,s,"day"):g>=n?d(h,g,n,"hour"):g>=t?d(h,g,t,"minute"):g>=r?d(h,g,r,"second"):h+" ms"}function d(h,g,p,_){var m=g>=p*1.5;return Math.round(h/p)+" "+_+(m?"s":"")}}}),require_common=__commonJS({"node_modules/debug/src/common.js"(e,o){init_node_globals();function r(t){s.debug=s,s.default=s,s.coerce=d,s.disable=f,s.enable=l,s.enabled=a,s.humanize=require_ms(),s.destroy=h,Object.keys(t).forEach(g=>{s[g]=t[g]}),s.names=[],s.skips=[],s.formatters={};function n(g){let p=0;for(let _=0;_<g.length;_++)p=(p<<5)-p+g.charCodeAt(_),p|=0;return s.colors[Math.abs(p)%s.colors.length]}s.selectColor=n;function s(g){let p,_=null,m,v;function w(...y){if(!w.enabled)return;const b=w,T=Number(new Date),R=T-(p||T);b.diff=R,b.prev=p,b.curr=T,p=T,y[0]=s.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let S=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(A,C)=>{if(A==="%%")return"%";S++;const I=s.formatters[C];if(typeof I=="function"){const P=y[S];A=I.call(b,P),y.splice(S,1),S--}return A}),s.formatArgs.call(b,y),(b.log||s.log).apply(b,y)}return w.namespace=g,w.useColors=s.useColors(),w.color=s.selectColor(g),w.extend=u,w.destroy=s.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(m!==s.namespaces&&(m=s.namespaces,v=s.enabled(g)),v),set:y=>{_=y}}),typeof s.init=="function"&&s.init(w),w}function u(g,p){const _=s(this.namespace+(typeof p=="undefined"?":":p)+g);return _.log=this.log,_}function l(g){s.save(g),s.namespaces=g,s.names=[],s.skips=[];let p;const _=(typeof g=="string"?g:"").split(/[\s,]+/),m=_.length;for(p=0;p<m;p++)!_[p]||(g=_[p].replace(/\*/g,".*?"),g[0]==="-"?s.skips.push(new RegExp("^"+g.substr(1)+"$")):s.names.push(new RegExp("^"+g+"$")))}function f(){const g=[...s.names.map(c),...s.skips.map(c).map(p=>"-"+p)].join(",");return s.enable(""),g}function a(g){if(g[g.length-1]==="*")return!0;let p,_;for(p=0,_=s.skips.length;p<_;p++)if(s.skips[p].test(g))return!1;for(p=0,_=s.names.length;p<_;p++)if(s.names[p].test(g))return!0;return!1}function c(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function d(g){return g instanceof Error?g.stack||g.message:g}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}o.exports=r}}),require_browser2=__commonJS({"node_modules/debug/src/browser.js"(e,o){init_node_globals(),e.formatArgs=t,e.save=n,e.load=s,e.useColors=r,e.storage=u(),e.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;const a="color: "+this.color;f.splice(1,0,a,"color: inherit");let c=0,d=0;f[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(c++,h==="%c"&&(d=c))}),f.splice(d,0,a)}e.log=console.debug||console.log||(()=>{});function n(f){try{f?e.storage.setItem("debug",f):e.storage.removeItem("debug")}catch{}}function s(){let f;try{f=e.storage.getItem("debug")}catch{}return!f&&typeof process!="undefined"&&"env"in process&&(f={}.DEBUG),f}function u(){try{return localStorage}catch{}}o.exports=require_common()(e);var{formatters:l}=o.exports;l.j=function(f){try{return JSON.stringify(f)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}}}}),require_err_code=__commonJS({"node_modules/err-code/index.js"(e,o){init_node_globals();function r(n,s){for(const u in s)Object.defineProperty(n,u,{value:s[u],enumerable:!0,configurable:!0});return n}function t(n,s,u){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof s=="object"&&(u=s,s=""),s&&(u.code=s);try{return r(n,u)}catch{u.message=n.message,u.stack=n.stack;const f=function(){};return f.prototype=Object.create(Object.getPrototypeOf(n)),r(new f,u)}}o.exports=t}}),require_aspromise=__commonJS({"node_modules/@protobufjs/aspromise/index.js"(e,o){init_node_globals(),o.exports=r;function r(t,n){for(var s=new Array(arguments.length-1),u=0,l=2,f=!0;l<arguments.length;)s[u++]=arguments[l++];return new Promise(function(c,d){s[u]=function(g){if(f)if(f=!1,g)d(g);else{for(var p=new Array(arguments.length-1),_=0;_<p.length;)p[_++]=arguments[_];c.apply(null,p)}};try{t.apply(n||null,s)}catch(h){f&&(f=!1,d(h))}})}}}),require_base64=__commonJS({"node_modules/@protobufjs/base64/index.js"(e){init_node_globals();var o=e;o.length=function(l){var f=l.length;if(!f)return 0;for(var a=0;--f%4>1&&l.charAt(f)==="=";)++a;return Math.ceil(l.length*3)/4-a};var r=new Array(64),t=new Array(123);for(n=0;n<64;)t[r[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;var n;o.encode=function(l,f,a){for(var c=null,d=[],h=0,g=0,p;f<a;){var _=l[f++];switch(g){case 0:d[h++]=r[_>>2],p=(_&3)<<4,g=1;break;case 1:d[h++]=r[p|_>>4],p=(_&15)<<2,g=2;break;case 2:d[h++]=r[p|_>>6],d[h++]=r[_&63],g=0;break}h>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,d)),h=0)}return g&&(d[h++]=r[p],d[h++]=61,g===1&&(d[h++]=61)),c?(h&&c.push(String.fromCharCode.apply(String,d.slice(0,h))),c.join("")):String.fromCharCode.apply(String,d.slice(0,h))};var s="invalid encoding";o.decode=function(l,f,a){for(var c=a,d=0,h,g=0;g<l.length;){var p=l.charCodeAt(g++);if(p===61&&d>1)break;if((p=t[p])===void 0)throw Error(s);switch(d){case 0:h=p,d=1;break;case 1:f[a++]=h<<2|(p&48)>>4,h=p,d=2;break;case 2:f[a++]=(h&15)<<4|(p&60)>>2,h=p,d=3;break;case 3:f[a++]=(h&3)<<6|p,d=0;break}}if(d===1)throw Error(s);return a-c},o.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}}}),require_eventemitter=__commonJS({"node_modules/@protobufjs/eventemitter/index.js"(e,o){init_node_globals(),o.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,s,u){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:s,ctx:u||this}),this},r.prototype.off=function(n,s){if(n===void 0)this._listeners={};else if(s===void 0)this._listeners[n]=[];else for(var u=this._listeners[n],l=0;l<u.length;)u[l].fn===s?u.splice(l,1):++l;return this},r.prototype.emit=function(n){var s=this._listeners[n];if(s){for(var u=[],l=1;l<arguments.length;)u.push(arguments[l++]);for(l=0;l<s.length;)s[l].fn.apply(s[l++].ctx,u)}return this}}}),require_float=__commonJS({"node_modules/@protobufjs/float/index.js"(e,o){init_node_globals(),o.exports=r(r);function r(l){return typeof Float32Array!="undefined"?function(){var f=new Float32Array([-0]),a=new Uint8Array(f.buffer),c=a[3]===128;function d(_,m,v){f[0]=_,m[v]=a[0],m[v+1]=a[1],m[v+2]=a[2],m[v+3]=a[3]}function h(_,m,v){f[0]=_,m[v]=a[3],m[v+1]=a[2],m[v+2]=a[1],m[v+3]=a[0]}l.writeFloatLE=c?d:h,l.writeFloatBE=c?h:d;function g(_,m){return a[0]=_[m],a[1]=_[m+1],a[2]=_[m+2],a[3]=_[m+3],f[0]}function p(_,m){return a[3]=_[m],a[2]=_[m+1],a[1]=_[m+2],a[0]=_[m+3],f[0]}l.readFloatLE=c?g:p,l.readFloatBE=c?p:g}():function(){function f(c,d,h,g){var p=d<0?1:0;if(p&&(d=-d),d===0)c(1/d>0?0:2147483648,h,g);else if(isNaN(d))c(2143289344,h,g);else if(d>34028234663852886e22)c((p<<31|2139095040)>>>0,h,g);else if(d<11754943508222875e-54)c((p<<31|Math.round(d/1401298464324817e-60))>>>0,h,g);else{var _=Math.floor(Math.log(d)/Math.LN2),m=Math.round(d*Math.pow(2,-_)*8388608)&8388607;c((p<<31|_+127<<23|m)>>>0,h,g)}}l.writeFloatLE=f.bind(null,t),l.writeFloatBE=f.bind(null,n);function a(c,d,h){var g=c(d,h),p=(g>>31)*2+1,_=g>>>23&255,m=g&8388607;return _===255?m?NaN:p*(1/0):_===0?p*1401298464324817e-60*m:p*Math.pow(2,_-150)*(m+8388608)}l.readFloatLE=a.bind(null,s),l.readFloatBE=a.bind(null,u)}(),typeof Float64Array!="undefined"?function(){var f=new Float64Array([-0]),a=new Uint8Array(f.buffer),c=a[7]===128;function d(_,m,v){f[0]=_,m[v]=a[0],m[v+1]=a[1],m[v+2]=a[2],m[v+3]=a[3],m[v+4]=a[4],m[v+5]=a[5],m[v+6]=a[6],m[v+7]=a[7]}function h(_,m,v){f[0]=_,m[v]=a[7],m[v+1]=a[6],m[v+2]=a[5],m[v+3]=a[4],m[v+4]=a[3],m[v+5]=a[2],m[v+6]=a[1],m[v+7]=a[0]}l.writeDoubleLE=c?d:h,l.writeDoubleBE=c?h:d;function g(_,m){return a[0]=_[m],a[1]=_[m+1],a[2]=_[m+2],a[3]=_[m+3],a[4]=_[m+4],a[5]=_[m+5],a[6]=_[m+6],a[7]=_[m+7],f[0]}function p(_,m){return a[7]=_[m],a[6]=_[m+1],a[5]=_[m+2],a[4]=_[m+3],a[3]=_[m+4],a[2]=_[m+5],a[1]=_[m+6],a[0]=_[m+7],f[0]}l.readDoubleLE=c?g:p,l.readDoubleBE=c?p:g}():function(){function f(c,d,h,g,p,_){var m=g<0?1:0;if(m&&(g=-g),g===0)c(0,p,_+d),c(1/g>0?0:2147483648,p,_+h);else if(isNaN(g))c(0,p,_+d),c(2146959360,p,_+h);else if(g>17976931348623157e292)c(0,p,_+d),c((m<<31|2146435072)>>>0,p,_+h);else{var v;if(g<22250738585072014e-324)v=g/5e-324,c(v>>>0,p,_+d),c((m<<31|v/4294967296)>>>0,p,_+h);else{var w=Math.floor(Math.log(g)/Math.LN2);w===1024&&(w=1023),v=g*Math.pow(2,-w),c(v*4503599627370496>>>0,p,_+d),c((m<<31|w+1023<<20|v*1048576&1048575)>>>0,p,_+h)}}}l.writeDoubleLE=f.bind(null,t,0,4),l.writeDoubleBE=f.bind(null,n,4,0);function a(c,d,h,g,p){var _=c(g,p+d),m=c(g,p+h),v=(m>>31)*2+1,w=m>>>20&2047,y=4294967296*(m&1048575)+_;return w===2047?y?NaN:v*(1/0):w===0?v*5e-324*y:v*Math.pow(2,w-1075)*(y+4503599627370496)}l.readDoubleLE=a.bind(null,s,0,4),l.readDoubleBE=a.bind(null,u,4,0)}(),l}function t(l,f,a){f[a]=l&255,f[a+1]=l>>>8&255,f[a+2]=l>>>16&255,f[a+3]=l>>>24}function n(l,f,a){f[a]=l>>>24,f[a+1]=l>>>16&255,f[a+2]=l>>>8&255,f[a+3]=l&255}function s(l,f){return(l[f]|l[f+1]<<8|l[f+2]<<16|l[f+3]<<24)>>>0}function u(l,f){return(l[f]<<24|l[f+1]<<16|l[f+2]<<8|l[f+3])>>>0}}}),require_inquire=__commonJS({"node_modules/@protobufjs/inquire/index.js"(exports,module){init_node_globals(),module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}}),require_utf8=__commonJS({"node_modules/@protobufjs/utf8/index.js"(e){init_node_globals();var o=e;o.length=function(t){for(var n=0,s=0,u=0;u<t.length;++u)s=t.charCodeAt(u),s<128?n+=1:s<2048?n+=2:(s&64512)==55296&&(t.charCodeAt(u+1)&64512)==56320?(++u,n+=4):n+=3;return n},o.read=function(t,n,s){var u=s-n;if(u<1)return"";for(var l=null,f=[],a=0,c;n<s;)c=t[n++],c<128?f[a++]=c:c>191&&c<224?f[a++]=(c&31)<<6|t[n++]&63:c>239&&c<365?(c=((c&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,f[a++]=55296+(c>>10),f[a++]=56320+(c&1023)):f[a++]=(c&15)<<12|(t[n++]&63)<<6|t[n++]&63,a>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,f)),a=0);return l?(a&&l.push(String.fromCharCode.apply(String,f.slice(0,a))),l.join("")):String.fromCharCode.apply(String,f.slice(0,a))},o.write=function(t,n,s){for(var u=s,l,f,a=0;a<t.length;++a)l=t.charCodeAt(a),l<128?n[s++]=l:l<2048?(n[s++]=l>>6|192,n[s++]=l&63|128):(l&64512)==55296&&((f=t.charCodeAt(a+1))&64512)==56320?(l=65536+((l&1023)<<10)+(f&1023),++a,n[s++]=l>>18|240,n[s++]=l>>12&63|128,n[s++]=l>>6&63|128,n[s++]=l&63|128):(n[s++]=l>>12|224,n[s++]=l>>6&63|128,n[s++]=l&63|128);return s-u}}}),require_pool=__commonJS({"node_modules/@protobufjs/pool/index.js"(e,o){init_node_globals(),o.exports=r;function r(t,n,s){var u=s||8192,l=u>>>1,f=null,a=u;return function(d){if(d<1||d>l)return t(d);a+d>u&&(f=t(u),a=0);var h=n.call(f,a,a+=d);return a&7&&(a=(a|7)+1),h}}}}),require_longbits=__commonJS({"node_modules/protobufjs/src/util/longbits.js"(e,o){init_node_globals(),o.exports=t;var r=require_minimal();function t(l,f){this.lo=l>>>0,this.hi=f>>>0}var n=t.zero=new t(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var s=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(f){if(f===0)return n;var a=f<0;a&&(f=-f);var c=f>>>0,d=(f-c)/4294967296>>>0;return a&&(d=~d>>>0,c=~c>>>0,++c>4294967295&&(c=0,++d>4294967295&&(d=0))),new t(c,d)},t.from=function(f){if(typeof f=="number")return t.fromNumber(f);if(r.isString(f))if(r.Long)f=r.Long.fromString(f);else return t.fromNumber(parseInt(f,10));return f.low||f.high?new t(f.low>>>0,f.high>>>0):n},t.prototype.toNumber=function(f){if(!f&&this.hi>>>31){var a=~this.lo+1>>>0,c=~this.hi>>>0;return a||(c=c+1>>>0),-(a+c*4294967296)}return this.lo+this.hi*4294967296},t.prototype.toLong=function(f){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(f)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(f)}};var u=String.prototype.charCodeAt;t.fromHash=function(f){return f===s?n:new t((u.call(f,0)|u.call(f,1)<<8|u.call(f,2)<<16|u.call(f,3)<<24)>>>0,(u.call(f,4)|u.call(f,5)<<8|u.call(f,6)<<16|u.call(f,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var f=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^f)>>>0,this.lo=(this.lo<<1^f)>>>0,this},t.prototype.zzDecode=function(){var f=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^f)>>>0,this.hi=(this.hi>>>1^f)>>>0,this},t.prototype.length=function(){var f=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?a===0?f<16384?f<128?1:2:f<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:c<128?9:10}}}),require_minimal=__commonJS({"node_modules/protobufjs/src/util/minimal.js"(e){init_node_globals();var o=e;o.asPromise=require_aspromise(),o.base64=require_base64(),o.EventEmitter=require_eventemitter(),o.float=require_float(),o.inquire=require_inquire(),o.utf8=require_utf8(),o.pool=require_pool(),o.LongBits=require_longbits(),o.isNode=Boolean(typeof global!="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node),o.global=o.isNode&&global||typeof window!="undefined"&&window||typeof self!="undefined"&&self||e,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},o.isString=function(s){return typeof s=="string"||s instanceof String},o.isObject=function(s){return s&&typeof s=="object"},o.isset=o.isSet=function(s,u){var l=s[u];return l!=null&&s.hasOwnProperty(u)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},o.Buffer=function(){try{var n=o.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(s){return typeof s=="number"?o.Buffer?o._Buffer_allocUnsafe(s):new o.Array(s):o.Buffer?o._Buffer_from(s):typeof Uint8Array=="undefined"?s:new Uint8Array(s)},o.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(s){return s?o.LongBits.from(s).toHash():o.LongBits.zeroHash},o.longFromHash=function(s,u){var l=o.LongBits.fromHash(s);return o.Long?o.Long.fromBits(l.lo,l.hi,u):l.toNumber(Boolean(u))};function r(n,s,u){for(var l=Object.keys(s),f=0;f<l.length;++f)(n[l[f]]===void 0||!u)&&(n[l[f]]=s[l[f]]);return n}o.merge=r,o.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function t(n){function s(u,l){if(!(this instanceof s))return new s(u,l);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),l&&r(this,l)}return(s.prototype=Object.create(Error.prototype)).constructor=s,Object.defineProperty(s.prototype,"name",{get:function(){return n}}),s.prototype.toString=function(){return this.name+": "+this.message},s}o.newError=t,o.ProtocolError=t("ProtocolError"),o.oneOfGetter=function(s){for(var u={},l=0;l<s.length;++l)u[s[l]]=1;return function(){for(var f=Object.keys(this),a=f.length-1;a>-1;--a)if(u[f[a]]===1&&this[f[a]]!==void 0&&this[f[a]]!==null)return f[a]}},o.oneOfSetter=function(s){return function(u){for(var l=0;l<s.length;++l)s[l]!==u&&delete this[s[l]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var n=o.Buffer;if(!n){o._Buffer_from=o._Buffer_allocUnsafe=null;return}o._Buffer_from=n.from!==Uint8Array.from&&n.from||function(u,l){return new n(u,l)},o._Buffer_allocUnsafe=n.allocUnsafe||function(u){return new n(u)}}}}),require_writer=__commonJS({"node_modules/protobufjs/src/writer.js"(e,o){init_node_globals(),o.exports=c;var r=require_minimal(),t,n=r.LongBits,s=r.base64,u=r.utf8;function l(w,y,b){this.fn=w,this.len=y,this.next=void 0,this.val=b}function f(){}function a(w){this.head=w.head,this.tail=w.tail,this.len=w.len,this.next=w.states}function c(){this.len=0,this.head=new l(f,0,0),this.tail=this.head,this.states=null}var d=function(){return r.Buffer?function(){return(c.create=function(){return new t})()}:function(){return new c}};c.create=d(),c.alloc=function(y){return new r.Array(y)},r.Array!==Array&&(c.alloc=r.pool(c.alloc,r.Array.prototype.subarray)),c.prototype._push=function(y,b,T){return this.tail=this.tail.next=new l(y,b,T),this.len+=b,this};function h(w,y,b){y[b]=w&255}function g(w,y,b){for(;w>127;)y[b++]=w&127|128,w>>>=7;y[b]=w}function p(w,y){this.len=w,this.next=void 0,this.val=y}p.prototype=Object.create(l.prototype),p.prototype.fn=g,c.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new p((y=y>>>0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},c.prototype.int32=function(y){return y<0?this._push(_,10,n.fromNumber(y)):this.uint32(y)},c.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)};function _(w,y,b){for(;w.hi;)y[b++]=w.lo&127|128,w.lo=(w.lo>>>7|w.hi<<25)>>>0,w.hi>>>=7;for(;w.lo>127;)y[b++]=w.lo&127|128,w.lo=w.lo>>>7;y[b++]=w.lo}c.prototype.uint64=function(y){var b=n.from(y);return this._push(_,b.length(),b)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(y){var b=n.from(y).zzEncode();return this._push(_,b.length(),b)},c.prototype.bool=function(y){return this._push(h,1,y?1:0)};function m(w,y,b){y[b]=w&255,y[b+1]=w>>>8&255,y[b+2]=w>>>16&255,y[b+3]=w>>>24}c.prototype.fixed32=function(y){return this._push(m,4,y>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(y){var b=n.from(y);return this._push(m,4,b.lo)._push(m,4,b.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(y){return this._push(r.float.writeFloatLE,4,y)},c.prototype.double=function(y){return this._push(r.float.writeDoubleLE,8,y)};var v=r.Array.prototype.set?function(y,b,T){b.set(y,T)}:function(y,b,T){for(var R=0;R<y.length;++R)b[T+R]=y[R]};c.prototype.bytes=function(y){var b=y.length>>>0;if(!b)return this._push(h,1,0);if(r.isString(y)){var T=c.alloc(b=s.length(y));s.decode(y,T,0),y=T}return this.uint32(b)._push(v,b,y)},c.prototype.string=function(y){var b=u.length(y);return b?this.uint32(b)._push(u.write,b,y):this._push(h,1,0)},c.prototype.fork=function(){return this.states=new a(this),this.head=this.tail=new l(f,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(f,0,0),this.len=0),this},c.prototype.ldelim=function(){var y=this.head,b=this.tail,T=this.len;return this.reset().uint32(T),T&&(this.tail.next=y.next,this.tail=b,this.len+=T),this},c.prototype.finish=function(){for(var y=this.head.next,b=this.constructor.alloc(this.len),T=0;y;)y.fn(y.val,b,T),T+=y.len,y=y.next;return b},c._configure=function(w){t=w,c.create=d(),t._configure()}}}),require_writer_buffer=__commonJS({"node_modules/protobufjs/src/writer_buffer.js"(e,o){init_node_globals(),o.exports=n;var r=require_writer();(n.prototype=Object.create(r.prototype)).constructor=n;var t=require_minimal();function n(){r.call(this)}n._configure=function(){n.alloc=t._Buffer_allocUnsafe,n.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&t.Buffer.prototype.set.name==="set"?function(l,f,a){f.set(l,a)}:function(l,f,a){if(l.copy)l.copy(f,a,0,l.length);else for(var c=0;c<l.length;)f[a++]=l[c++]}},n.prototype.bytes=function(l){t.isString(l)&&(l=t._Buffer_from(l,"base64"));var f=l.length>>>0;return this.uint32(f),f&&this._push(n.writeBytesBuffer,f,l),this};function s(u,l,f){u.length<40?t.utf8.write(u,l,f):l.utf8Write?l.utf8Write(u,f):l.write(u,f)}n.prototype.string=function(l){var f=t.Buffer.byteLength(l);return this.uint32(f),f&&this._push(s,f,l),this},n._configure()}}),require_reader=__commonJS({"node_modules/protobufjs/src/reader.js"(e,o){init_node_globals(),o.exports=l;var r=require_minimal(),t,n=r.LongBits,s=r.utf8;function u(g,p){return RangeError("index out of range: "+g.pos+" + "+(p||1)+" > "+g.len)}function l(g){this.buf=g,this.pos=0,this.len=g.length}var f=typeof Uint8Array!="undefined"?function(p){if(p instanceof Uint8Array||Array.isArray(p))return new l(p);throw Error("illegal buffer")}:function(p){if(Array.isArray(p))return new l(p);throw Error("illegal buffer")},a=function(){return r.Buffer?function(_){return(l.create=function(v){return r.Buffer.isBuffer(v)?new t(v):f(v)})(_)}:f};l.create=a(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=function(){var p=4294967295;return function(){if(p=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(p=(p|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return p}}(),l.prototype.int32=function(){return this.uint32()|0},l.prototype.sint32=function(){var p=this.uint32();return p>>>1^-(p&1)|0};function c(){var g=new n(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(g.lo=(g.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return g;if(g.lo=(g.lo|(this.buf[this.pos]&127)<<28)>>>0,g.hi=(g.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return g;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw u(this);if(g.lo=(g.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return g}return g.lo=(g.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,g}if(this.len-this.pos>4){for(;p<5;++p)if(g.hi=(g.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return g}else for(;p<5;++p){if(this.pos>=this.len)throw u(this);if(g.hi=(g.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return g}throw Error("invalid varint encoding")}l.prototype.bool=function(){return this.uint32()!==0};function d(g,p){return(g[p-4]|g[p-3]<<8|g[p-2]<<16|g[p-1]<<24)>>>0}l.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return d(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return d(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw u(this,8);return new n(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}l.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var p=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,p},l.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var p=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,p},l.prototype.bytes=function(){var p=this.uint32(),_=this.pos,m=this.pos+p;if(m>this.len)throw u(this,p);return this.pos+=p,Array.isArray(this.buf)?this.buf.slice(_,m):_===m?new this.buf.constructor(0):this._slice.call(this.buf,_,m)},l.prototype.string=function(){var p=this.bytes();return s.read(p,0,p.length)},l.prototype.skip=function(p){if(typeof p=="number"){if(this.pos+p>this.len)throw u(this,p);this.pos+=p}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},l.prototype.skipType=function(g){switch(g){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(g=this.uint32()&7)!=4;)this.skipType(g);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+g+" at offset "+this.pos)}return this},l._configure=function(g){t=g,l.create=a(),t._configure();var p=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return c.call(this)[p](!1)},uint64:function(){return c.call(this)[p](!0)},sint64:function(){return c.call(this).zzDecode()[p](!1)},fixed64:function(){return h.call(this)[p](!0)},sfixed64:function(){return h.call(this)[p](!1)}})}}}),require_reader_buffer=__commonJS({"node_modules/protobufjs/src/reader_buffer.js"(e,o){init_node_globals(),o.exports=n;var r=require_reader();(n.prototype=Object.create(r.prototype)).constructor=n;var t=require_minimal();function n(s){r.call(this,s)}n._configure=function(){t.Buffer&&(n.prototype._slice=t.Buffer.prototype.slice)},n.prototype.string=function(){var u=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+u,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+u,this.len))},n._configure()}}),require_service=__commonJS({"node_modules/protobufjs/src/rpc/service.js"(e,o){init_node_globals(),o.exports=t;var r=require_minimal();(t.prototype=Object.create(r.EventEmitter.prototype)).constructor=t;function t(n,s,u){if(typeof n!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(u)}t.prototype.rpcCall=function n(s,u,l,f,a){if(!f)throw TypeError("request must be specified");var c=this;if(!a)return r.asPromise(n,c,s,u,l,f);if(!c.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return c.rpcImpl(s,u[c.requestDelimited?"encodeDelimited":"encode"](f).finish(),function(h,g){if(h)return c.emit("error",h,s),a(h);if(g===null){c.end(!0);return}if(!(g instanceof l))try{g=l[c.responseDelimited?"decodeDelimited":"decode"](g)}catch(p){return c.emit("error",p,s),a(p)}return c.emit("data",g,s),a(null,g)})}catch(d){c.emit("error",d,s),setTimeout(function(){a(d)},0);return}},t.prototype.end=function(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}}),require_rpc=__commonJS({"node_modules/protobufjs/src/rpc.js"(e){init_node_globals();var o=e;o.Service=require_service()}}),require_roots=__commonJS({"node_modules/protobufjs/src/roots.js"(e,o){init_node_globals(),o.exports={}}}),require_index_minimal=__commonJS({"node_modules/protobufjs/src/index-minimal.js"(e){init_node_globals();var o=e;o.build="minimal",o.Writer=require_writer(),o.BufferWriter=require_writer_buffer(),o.Reader=require_reader(),o.BufferReader=require_reader_buffer(),o.util=require_minimal(),o.rpc=require_rpc(),o.roots=require_roots(),o.configure=r;function r(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}r()}}),require_minimal2=__commonJS({"node_modules/protobufjs/minimal.js"(e,o){init_node_globals(),o.exports=require_index_minimal()}}),import_minimal,$Reader,$Writer,$util,$root,Data,init_unixfs=__esm({"node_modules/ipfs-unixfs/esm/src/unixfs.js"(){init_node_globals(),import_minimal=__toESM(require_minimal2(),1),$Reader=import_minimal.default.Reader,$Writer=import_minimal.default.Writer,$util=import_minimal.default.util,$root=import_minimal.default.roots["ipfs-unixfs"]||(import_minimal.default.roots["ipfs-unixfs"]={}),Data=$root.Data=(()=>{function e(o){if(this.blocksizes=[],o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.Type=0,e.prototype.Data=$util.newBuffer([]),e.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=$util.emptyArray,e.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(r,t){if(t||(t=$Writer.create()),t.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&t.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&t.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var n=0;n<r.blocksizes.length;++n)t.uint32(32).uint64(r.blocksizes[n]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&t.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&t.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&t.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&$root.UnixTime.encode(r.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(r,t){r instanceof $Reader||(r=$Reader.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root.Data;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(u&7)==2)for(var l=r.uint32()+r.pos;r.pos<l;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=$root.UnixTime.decode(r,r.uint32());break;default:r.skipType(u&7);break}}if(!s.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:s});return s},e.fromObject=function(r){if(r instanceof $root.Data)return r;var t=new $root.Data;switch(r.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?$util.base64.decode(r.Data,t.Data=$util.newBuffer($util.base64.length(r.Data)),0):r.Data.length&&(t.Data=r.Data)),r.filesize!=null&&($util.Long?(t.filesize=$util.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?t.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?t.filesize=r.filesize:typeof r.filesize=="object"&&(t.filesize=new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var n=0;n<r.blocksizes.length;++n)$util.Long?(t.blocksizes[n]=$util.Long.fromValue(r.blocksizes[n])).unsigned=!0:typeof r.blocksizes[n]=="string"?t.blocksizes[n]=parseInt(r.blocksizes[n],10):typeof r.blocksizes[n]=="number"?t.blocksizes[n]=r.blocksizes[n]:typeof r.blocksizes[n]=="object"&&(t.blocksizes[n]=new $util.LongBits(r.blocksizes[n].low>>>0,r.blocksizes[n].high>>>0).toNumber(!0))}if(r.hashType!=null&&($util.Long?(t.hashType=$util.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?t.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?t.hashType=r.hashType:typeof r.hashType=="object"&&(t.hashType=new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&($util.Long?(t.fanout=$util.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?t.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?t.fanout=r.fanout:typeof r.fanout=="object"&&(t.fanout=new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(t.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");t.mtime=$root.UnixTime.fromObject(r.mtime)}return t},e.toObject=function(r,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocksizes=[]),t.defaults){if(n.Type=t.enums===String?"Raw":0,t.bytes===String?n.Data="":(n.Data=[],t.bytes!==Array&&(n.Data=$util.newBuffer(n.Data))),$util.Long){var s=new $util.Long(0,0,!0);n.filesize=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.filesize=t.longs===String?"0":0;if($util.Long){var s=new $util.Long(0,0,!0);n.hashType=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.hashType=t.longs===String?"0":0;if($util.Long){var s=new $util.Long(0,0,!0);n.fanout=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.fanout=t.longs===String?"0":0;n.mode=0,n.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(n.Type=t.enums===String?$root.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(n.Data=t.bytes===String?$util.base64.encode(r.Data,0,r.Data.length):t.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?n.filesize=t.longs===String?String(r.filesize):r.filesize:n.filesize=t.longs===String?$util.Long.prototype.toString.call(r.filesize):t.longs===Number?new $util.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){n.blocksizes=[];for(var u=0;u<r.blocksizes.length;++u)typeof r.blocksizes[u]=="number"?n.blocksizes[u]=t.longs===String?String(r.blocksizes[u]):r.blocksizes[u]:n.blocksizes[u]=t.longs===String?$util.Long.prototype.toString.call(r.blocksizes[u]):t.longs===Number?new $util.LongBits(r.blocksizes[u].low>>>0,r.blocksizes[u].high>>>0).toNumber(!0):r.blocksizes[u]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?n.hashType=t.longs===String?String(r.hashType):r.hashType:n.hashType=t.longs===String?$util.Long.prototype.toString.call(r.hashType):t.longs===Number?new $util.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?n.fanout=t.longs===String?String(r.fanout):r.fanout:n.fanout=t.longs===String?$util.Long.prototype.toString.call(r.fanout):t.longs===Number?new $util.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(n.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(n.mtime=$root.UnixTime.toObject(r.mtime,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.default.util.toJSONOptions)},e.DataType=function(){const o={},r=Object.create(o);return r[o[0]="Raw"]=0,r[o[1]="Directory"]=1,r[o[2]="File"]=2,r[o[3]="Metadata"]=3,r[o[4]="Symlink"]=4,r[o[5]="HAMTShard"]=5,r}(),e})(),$root.UnixTime=(()=>{function e(o){if(o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(r,t){return t||(t=$Writer.create()),t.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&t.uint32(21).fixed32(r.FractionalNanoseconds),t},e.decode=function(r,t){r instanceof $Reader||(r=$Reader.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root.UnixTime;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(u&7);break}}if(!s.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:s});return s},e.fromObject=function(r){if(r instanceof $root.UnixTime)return r;var t=new $root.UnixTime;return r.Seconds!=null&&($util.Long?(t.Seconds=$util.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?t.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?t.Seconds=r.Seconds:typeof r.Seconds=="object"&&(t.Seconds=new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(t.FractionalNanoseconds=r.FractionalNanoseconds>>>0),t},e.toObject=function(r,t){t||(t={});var n={};if(t.defaults){if($util.Long){var s=new $util.Long(0,0,!1);n.Seconds=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.Seconds=t.longs===String?"0":0;n.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?n.Seconds=t.longs===String?String(r.Seconds):r.Seconds:n.Seconds=t.longs===String?$util.Long.prototype.toString.call(r.Seconds):t.longs===Number?new $util.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(n.FractionalNanoseconds=r.FractionalNanoseconds),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.default.util.toJSONOptions)},e})(),$root.Metadata=(()=>{function e(o){if(o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.MimeType="",e.encode=function(r,t){return t||(t=$Writer.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&t.uint32(10).string(r.MimeType),t},e.decode=function(r,t){r instanceof $Reader||(r=$Reader.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root.Metadata;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root.Metadata)return r;var t=new $root.Metadata;return r.MimeType!=null&&(t.MimeType=String(r.MimeType)),t},e.toObject=function(r,t){t||(t={});var n={};return t.defaults&&(n.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(n.MimeType=r.MimeType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal.default.util.toJSONOptions)},e})()}}),src_exports={};__export(src_exports,{UnixFS:()=>UnixFS,parseMode:()=>parseMode,parseMtime:()=>parseMtime});function parseMode(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function parseMtime(e){if(e==null)return;let o;if(e.secs!=null&&(o={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(o={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(o={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);o={secs:t,nsecs:(r-t*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(o,"secs")){if(o!=null&&o.nsecs!=null&&(o.nsecs<0||o.nsecs>999999999))throw(0,import_err_code.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return o}}var import_err_code,PBData,types,dirTypes,DEFAULT_FILE_MODE,DEFAULT_DIRECTORY_MODE,UnixFS,init_src=__esm({"node_modules/ipfs-unixfs/esm/src/index.js"(){init_node_globals(),import_err_code=__toESM(require_err_code(),1),init_unixfs(),PBData=Data,types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],dirTypes=["directory","hamt-sharded-directory"],DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8),UnixFS=class{static unmarshal(e){const o=PBData.decode(e),r=PBData.toObject(o,{defaults:!1,arrays:!0,longs:Number,objects:!1}),t=new UnixFS({type:types[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:void 0});return t._originalMode=r.mode||0,t}constructor(e={type:"file"}){const{type:o,data:r,blockSizes:t,hashType:n,fanout:s,mtime:u,mode:l}=e;if(o&&!types.includes(o))throw(0,import_err_code.default)(new Error("Type: "+o+" is not valid"),"ERR_INVALID_TYPE");this.type=o||"file",this.data=r,this.hashType=n,this.fanout=s,this.blockSizes=t||[],this._originalMode=0,this.mode=parseMode(l),u&&(this.mtime=parseMtime(u),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const o=parseMode(e);o!==void 0&&(this._mode=o)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&dirTypes.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach(o=>{e+=o}),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=PBData.DataType.Raw;break;case"directory":e=PBData.DataType.Directory;break;case"file":e=PBData.DataType.File;break;case"metadata":e=PBData.DataType.Metadata;break;case"symlink":e=PBData.DataType.Symlink;break;case"hamt-sharded-directory":e=PBData.DataType.HAMTShard;break;default:throw(0,import_err_code.default)(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let o=this.data;(!this.data||!this.data.length)&&(o=void 0);let r;this.mode!=null&&(r=this._originalMode&4294963200|(parseMode(this.mode)||0),r===DEFAULT_FILE_MODE&&!this.isDirectory()&&(r=void 0),r===DEFAULT_DIRECTORY_MODE&&this.isDirectory()&&(r=void 0));let t;if(this.mtime!=null){const s=parseMtime(this.mtime);s&&(t={Seconds:s.secs,FractionalNanoseconds:s.nsecs},t.FractionalNanoseconds===0&&delete t.FractionalNanoseconds)}const n={Type:e,Data:o,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:r,mtime:t};return PBData.encode(n).finish()}}}});function encode(e,o,r){o=o||[],r=r||0;for(var t=r;e>=INT;)o[r++]=e&255|MSB,e/=128;for(;e&MSBALL;)o[r++]=e&255|MSB,e>>>=7;return o[r]=e|0,encode.bytes=r-t+1,o}function read(e,o){var r=0,o=o||0,t=0,n=o,s,u=e.length;do{if(n>=u)throw read.bytes=0,new RangeError("Could not decode varint");s=e[n++],r+=t<28?(s&REST$1)<<t:(s&REST$1)*Math.pow(2,t),t+=7}while(s>=MSB$1);return read.bytes=n-o,r}var encode_1,MSB,REST,MSBALL,INT,decode,MSB$1,REST$1,N1,N2,N3,N4,N5,N6,N7,N8,N9,length,varint,_brrp_varint,varint_default,init_varint=__esm({"node_modules/multiformats/esm/vendor/varint.js"(){init_node_globals(),encode_1=encode,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31),decode=read,MSB$1=128,REST$1=127,N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint={encode:encode_1,decode,encodingLength:length},_brrp_varint=varint,varint_default=_brrp_varint}}),varint_exports={};__export(varint_exports,{decode:()=>decode2,encodeTo:()=>encodeTo,encodingLength:()=>encodingLength});var decode2,encodeTo,encodingLength,init_varint2=__esm({"node_modules/multiformats/esm/src/varint.js"(){init_node_globals(),init_varint(),decode2=e=>[varint_default.decode(e),varint_default.decode.bytes],encodeTo=(e,o,r=0)=>(varint_default.encode(e,o,r),o),encodingLength=e=>varint_default.encodingLength(e)}}),bytes_exports={};__export(bytes_exports,{coerce:()=>coerce,empty:()=>empty,equals:()=>equals,fromHex:()=>fromHex,fromString:()=>fromString,isBinary:()=>isBinary,toHex:()=>toHex,toString:()=>toString});var empty,toHex,fromHex,equals,coerce,isBinary,fromString,toString,init_bytes=__esm({"node_modules/multiformats/esm/src/bytes.js"(){init_node_globals(),empty=new Uint8Array(0),toHex=e=>e.reduce((o,r)=>o+r.toString(16).padStart(2,"0"),""),fromHex=e=>{const o=e.match(/../g);return o?new Uint8Array(o.map(r=>parseInt(r,16))):empty},equals=(e,o)=>{if(e===o)return!0;if(e.byteLength!==o.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==o[r])return!1;return!0},coerce=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),fromString=e=>new TextEncoder().encode(e),toString=e=>new TextDecoder().decode(e)}}),digest_exports={};__export(digest_exports,{Digest:()=>Digest,create:()=>create,decode:()=>decode3,equals:()=>equals2});var create,decode3,equals2,Digest,init_digest=__esm({"node_modules/multiformats/esm/src/hashes/digest.js"(){init_node_globals(),init_bytes(),init_varint2(),create=(e,o)=>{const r=o.byteLength,t=encodingLength(e),n=t+encodingLength(r),s=new Uint8Array(n+r);return encodeTo(e,s,0),encodeTo(r,s,t),s.set(o,n),new Digest(e,r,o,s)},decode3=e=>{const o=coerce(e),[r,t]=decode2(o),[n,s]=decode2(o.subarray(t)),u=o.subarray(t+s);if(u.byteLength!==n)throw new Error("Incorrect length");return new Digest(r,n,u,o)},equals2=(e,o)=>e===o?!0:e.code===o.code&&e.size===o.size&&equals(e.bytes,o.bytes),Digest=class{constructor(e,o,r,t){this.code=e,this.size=o,this.digest=r,this.bytes=t}}}});function base(e,o){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),t=0;t<r.length;t++)r[t]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),u=s.charCodeAt(0);if(r[u]!==255)throw new TypeError(s+" is ambiguous");r[u]=n}var l=e.length,f=e.charAt(0),a=Math.log(l)/Math.log(256),c=Math.log(256)/Math.log(l);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var _=0,m=0,v=0,w=p.length;v!==w&&p[v]===0;)v++,_++;for(var y=(w-v)*c+1>>>0,b=new Uint8Array(y);v!==w;){for(var T=p[v],R=0,S=y-1;(T!==0||R<m)&&S!==-1;S--,R++)T+=256*b[S]>>>0,b[S]=T%l>>>0,T=T/l>>>0;if(T!==0)throw new Error("Non-zero carry");m=R,v++}for(var E=y-m;E!==y&&b[E]===0;)E++;for(var A=f.repeat(_);E<y;++E)A+=e.charAt(b[E]);return A}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var _=0;if(p[_]!==" "){for(var m=0,v=0;p[_]===f;)m++,_++;for(var w=(p.length-_)*a+1>>>0,y=new Uint8Array(w);p[_];){var b=r[p.charCodeAt(_)];if(b===255)return;for(var T=0,R=w-1;(b!==0||T<v)&&R!==-1;R--,T++)b+=l*y[R]>>>0,y[R]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");v=T,_++}if(p[_]!==" "){for(var S=w-v;S!==w&&y[S]===0;)S++;for(var E=new Uint8Array(m+(w-S)),A=m;S!==w;)E[A++]=y[S++];return E}}}function g(p){var _=h(p);if(_)return _;throw new Error(`Non-${o} character`)}return{encode:d,decodeUnsafe:h,decode:g}}var src,_brrp__multiformats_scope_baseX,base_x_default,init_base_x=__esm({"node_modules/multiformats/esm/vendor/base-x.js"(){init_node_globals(),src=base,_brrp__multiformats_scope_baseX=src,base_x_default=_brrp__multiformats_scope_baseX}}),Encoder,Decoder,ComposedDecoder,or,Codec,from,baseX,decode4,encode2,rfc4648,init_base=__esm({"node_modules/multiformats/esm/src/bases/base.js"(){init_node_globals(),init_base_x(),init_bytes(),Encoder=class{constructor(e,o,r){this.name=e,this.prefix=o,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder=class{constructor(e,o,r){this.name=e,this.prefix=o,this.baseDecode=r}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}},ComposedDecoder=class{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const o=e[0],r=this.decoders[o];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},or=(e,o)=>new ComposedDecoder(Re(Re({},e.decoders||{[e.prefix]:e}),o.decoders||{[o.prefix]:o})),Codec=class{constructor(e,o,r,t){this.name=e,this.prefix=o,this.baseEncode=r,this.baseDecode=t,this.encoder=new Encoder(e,o,r),this.decoder=new Decoder(e,o,t)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},from=({name:e,prefix:o,encode:r,decode:t})=>new Codec(e,o,r,t),baseX=({prefix:e,name:o,alphabet:r})=>{const{encode:t,decode:n}=base_x_default(r,o);return from({prefix:e,name:o,encode:t,decode:s=>coerce(n(s))})},decode4=(e,o,r,t)=>{const n={};for(let c=0;c<o.length;++c)n[o[c]]=c;let s=e.length;for(;e[s-1]==="=";)--s;const u=new Uint8Array(s*r/8|0);let l=0,f=0,a=0;for(let c=0;c<s;++c){const d=n[e[c]];if(d===void 0)throw new SyntaxError(`Non-${t} character`);f=f<<r|d,l+=r,l>=8&&(l-=8,u[a++]=255&f>>l)}if(l>=r||255&f<<8-l)throw new SyntaxError("Unexpected end of data");return u},encode2=(e,o,r)=>{const t=o[o.length-1]==="=",n=(1<<r)-1;let s="",u=0,l=0;for(let f=0;f<e.length;++f)for(l=l<<8|e[f],u+=8;u>r;)u-=r,s+=o[n&l>>u];if(u&&(s+=o[n&l<<r-u]),t)for(;s.length*r&7;)s+="=";return s},rfc4648=({name:e,prefix:o,bitsPerChar:r,alphabet:t})=>from({prefix:o,name:e,encode(n){return encode2(n,t,r)},decode(n){return decode4(n,t,r,e)}})}}),base58_exports={};__export(base58_exports,{base58btc:()=>base58btc,base58flickr:()=>base58flickr});var base58btc,base58flickr,init_base58=__esm({"node_modules/multiformats/esm/src/bases/base58.js"(){init_node_globals(),init_base(),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}}),base32_exports={};__export(base32_exports,{base32:()=>base32,base32hex:()=>base32hex,base32hexpad:()=>base32hexpad,base32hexpadupper:()=>base32hexpadupper,base32hexupper:()=>base32hexupper,base32pad:()=>base32pad,base32padupper:()=>base32padupper,base32upper:()=>base32upper,base32z:()=>base32z});var base32,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z,init_base32=__esm({"node_modules/multiformats/esm/src/bases/base32.js"(){init_node_globals(),init_base(),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}}),cid_exports={};__export(cid_exports,{CID:()=>CID});var CID,parseCIDtoBytes,toStringV0,toStringV1,DAG_PB_CODE,SHA_256_CODE,encodeCID,cidSymbol,readonly,hidden,version,deprecate,IS_CID_DEPRECATION,init_cid=__esm({"node_modules/multiformats/esm/src/cid.js"(){init_node_globals(),init_varint2(),init_digest(),init_base58(),init_base32(),init_bytes(),CID=class{constructor(e,o,r,t){this.code=o,this.version=e,this.multihash=r,this.bytes=t,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly,version:readonly,multihash:readonly,bytes:readonly,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:o}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(o.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(o)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:o}=this.multihash,r=create(e,o);return CID.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals2(this.multihash,e.multihash)}toString(e){const{bytes:o,version:r,_baseCache:t}=this;switch(r){case 0:return toStringV0(o,t,e||base58btc.encoder);default:return toStringV1(o,t,e||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID)return e;if(e!=null&&e.asCID===e){const{version:o,code:r,multihash:t,bytes:n}=e;return new CID(o,r,t,n||encodeCID(o,r,t.bytes))}else if(e!=null&&e[cidSymbol]===!0){const{version:o,multihash:r,code:t}=e,n=decode3(r);return CID.create(o,t,n)}else return null}static create(e,o,r){if(typeof o!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(o!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,o,r,r.bytes)}case 1:{const t=encodeCID(e,o,r.bytes);return new CID(e,o,r,t)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,o){return CID.create(1,e,o)}static decode(e){const[o,r]=CID.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return o}static decodeFirst(e){const o=CID.inspectBytes(e),r=o.size-o.multihashSize,t=coerce(e.subarray(r,r+o.multihashSize));if(t.byteLength!==o.multihashSize)throw new Error("Incorrect length");const n=t.subarray(o.multihashSize-o.digestSize),s=new Digest(o.multihashCode,o.digestSize,n,t);return[o.version===0?CID.createV0(s):CID.createV1(o.codec,s),e.subarray(o.size)]}static inspectBytes(e){let o=0;const r=()=>{const[c,d]=decode2(e.subarray(o));return o+=d,c};let t=r(),n=DAG_PB_CODE;if(t===18?(t=0,o=0):t===1&&(n=r()),t!==0&&t!==1)throw new RangeError(`Invalid CID version ${t}`);const s=o,u=r(),l=r(),f=o+l,a=f-s;return{version:t,codec:n,multihashCode:u,digestSize:l,multihashSize:a,size:f}}static parse(e,o){const[r,t]=parseCIDtoBytes(e,o),n=CID.decode(t);return n._baseCache.set(r,e),n}},parseCIDtoBytes=(e,o)=>{switch(e[0]){case"Q":{const r=o||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{const r=o||base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{const r=o||base32;return[base32.prefix,r.decode(e)]}default:{if(o==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],o.decode(e)]}}},toStringV0=(e,o,r)=>{const{prefix:t}=r;if(t!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const n=o.get(t);if(n==null){const s=r.encode(e).slice(1);return o.set(t,s),s}else return n},toStringV1=(e,o,r)=>{const{prefix:t}=r,n=o.get(t);if(n==null){const s=r.encode(e);return o.set(t,s),s}else return n},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(e,o,r)=>{const t=encodingLength(e),n=t+encodingLength(o),s=new Uint8Array(n+r.byteLength);return encodeTo(e,s,0),encodeTo(o,s,t),s.set(r,n),s},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(e,o)=>{if(e.test(version))console.warn(o);else throw new Error(o)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}});function decodeVarint(e,o){let r=0;for(let t=0;;t+=7){if(t>=64)throw new Error("protobuf: varint overflow");if(o>=e.length)throw new Error("protobuf: unexpected end of data");const n=e[o++];if(r+=t<28?(n&127)<<t:(n&127)*2**t,n<128)break}return[r,o]}function decodeBytes(e,o){let r;[r,o]=decodeVarint(e,o);const t=o+r;if(r<0||t<0)throw new Error("protobuf: invalid length");if(t>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(o,t),t]}function decodeKey(e,o){let r;return[r,o]=decodeVarint(e,o),[r&7,r>>3,o]}function decodeLink(e){const o={},r=e.length;let t=0;for(;t<r;){let n,s;if([n,s,t]=decodeKey(e,t),s===1){if(o.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(o.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(o.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[o.Hash,t]=decodeBytes(e,t)}else if(s===2){if(o.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(n!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(o.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let u;[u,t]=decodeBytes(e,t),o.Name=textDecoder.decode(u)}else if(s===3){if(o.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(n!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[o.Tsize,t]=decodeVarint(e,t)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(t>r)throw new Error("protobuf: (PBLink) unexpected end of data");return o}function decodeNode(e){const o=e.length;let r=0,t,n=!1,s;for(;r<o;){let l,f;if([l,f,r]=decodeKey(e,r),l!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${l}`);if(f===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=decodeBytes(e,r),t&&(n=!0)}else if(f===2){if(n)throw new Error("protobuf: (PBNode) duplicate Links section");t||(t=[]);let a;[a,r]=decodeBytes(e,r),t.push(decodeLink(a))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${f}`)}if(r>o)throw new Error("protobuf: (PBNode) unexpected end of data");const u={};return s&&(u.Data=s),u.Links=t||[],u}var textDecoder,init_pb_decode=__esm({"node_modules/@ipld/dag-pb/esm/src/pb-decode.js"(){init_node_globals(),textDecoder=new TextDecoder}});function encodeLink(e,o){let r=o.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=encodeVarint(o,r,e.Tsize)-1,o[r]=24}if(typeof e.Name=="string"){const t=textEncoder.encode(e.Name);r-=t.length,o.set(t,r),r=encodeVarint(o,r,t.length)-1,o[r]=18}return e.Hash&&(r-=e.Hash.length,o.set(e.Hash,r),r=encodeVarint(o,r,e.Hash.length)-1,o[r]=10),o.length-r}function encodeNode(e){const o=sizeNode(e),r=new Uint8Array(o);let t=o;if(e.Data&&(t-=e.Data.length,r.set(e.Data,t),t=encodeVarint(r,t,e.Data.length)-1,r[t]=10),e.Links)for(let n=e.Links.length-1;n>=0;n--){const s=encodeLink(e.Links[n],r.subarray(0,t));t-=s,t=encodeVarint(r,t,s)-1,r[t]=18}return r}function sizeLink(e){let o=0;if(e.Hash){const r=e.Hash.length;o+=1+r+sov(r)}if(typeof e.Name=="string"){const r=textEncoder.encode(e.Name).length;o+=1+r+sov(r)}return typeof e.Tsize=="number"&&(o+=1+sov(e.Tsize)),o}function sizeNode(e){let o=0;if(e.Data){const r=e.Data.length;o+=1+r+sov(r)}if(e.Links)for(const r of e.Links){const t=sizeLink(r);o+=1+t+sov(t)}return o}function encodeVarint(e,o,r){o-=sov(r);const t=o;for(;r>=maxUInt32;)e[o++]=r&127|128,r/=128;for(;r>=128;)e[o++]=r&127|128,r>>>=7;return e[o]=r,t}function sov(e){return e%2==0&&e++,Math.floor((len64(e)+6)/7)}function len64(e){let o=0;return e>=maxInt32&&(e=Math.floor(e/maxInt32),o=32),e>=1<<16&&(e>>>=16,o+=16),e>=1<<8&&(e>>>=8,o+=8),o+len8tab[e]}var textEncoder,maxInt32,maxUInt32,len8tab,init_pb_encode=__esm({"node_modules/@ipld/dag-pb/esm/src/pb-encode.js"(){init_node_globals(),textEncoder=new TextEncoder,maxInt32=2**32,maxUInt32=2**31,len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8]}});function linkComparator(e,o){if(e===o)return 0;const r=e.Name?textEncoder2.encode(e.Name):[],t=o.Name?textEncoder2.encode(o.Name):[];let n=r.length,s=t.length;for(let u=0,l=Math.min(n,s);u<l;++u)if(r[u]!==t[u]){n=r[u],s=t[u];break}return n<s?-1:s<n?1:0}function hasOnlyProperties(e,o){return!Object.keys(e).some(r=>!o.includes(r))}function asLink(e){if(typeof e.asCID=="object"){const r=CID.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const o={};if(e.Hash){let r=CID.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=CID.decode(e.Hash)))}catch(t){throw new TypeError(`Invalid DAG-PB form: ${t.message}`)}r&&(o.Hash=r)}if(!o.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(o.Name=e.Name),typeof e.Tsize=="number"&&(o.Tsize=e.Tsize),o}function prepare(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const o={};if(e.Data!==void 0)if(typeof e.Data=="string")o.Data=textEncoder2.encode(e.Data);else if(e.Data instanceof Uint8Array)o.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))o.Links=e.Links.map(asLink),o.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else o.Links=[];return o}function validate(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(e,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let o=0;o<e.Links.length;o++){const r=e.Links[o];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(r,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(o>0&&linkComparator(r,e.Links[o-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(e,o=[]){return prepare({Data:e,Links:o})}function createLink(e,o,r){return asLink({Hash:r,Name:e,Tsize:o})}var pbNodeProperties,pbLinkProperties,textEncoder2,init_util=__esm({"node_modules/@ipld/dag-pb/esm/src/util.js"(){init_node_globals(),init_cid(),pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder2=new TextEncoder}}),src_exports2={};__export(src_exports2,{code:()=>code,createLink:()=>createLink,createNode:()=>createNode,decode:()=>decode5,encode:()=>encode3,name:()=>name,prepare:()=>prepare,validate:()=>validate});function encode3(e){validate(e);const o={};return e.Links&&(o.Links=e.Links.map(r=>{const t={};return r.Hash&&(t.Hash=r.Hash.bytes),r.Name!==void 0&&(t.Name=r.Name),r.Tsize!==void 0&&(t.Tsize=r.Tsize),t})),e.Data&&(o.Data=e.Data),encodeNode(o)}function decode5(e){const o=decodeNode(e),r={};return o.Data&&(r.Data=o.Data),o.Links&&(r.Links=o.Links.map(t=>{const n={};try{n.Hash=CID.decode(t.Hash)}catch{}if(!n.Hash)throw new Error("Invalid Hash field found in link, expected CID");return t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r}var name,code,init_src2=__esm({"node_modules/@ipld/dag-pb/esm/src/index.js"(){init_node_globals(),init_cid(),init_pb_decode(),init_pb_encode(),init_util(),name="dag-pb",code=112}});function is(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const o=typeof e;if(typeofs.includes(o))return o;if(o==="function")return"Function";if(Array.isArray(e))return"Array";if(isBuffer(e))return"Buffer";const r=getObjectType(e);return r||"Object"}function isBuffer(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function getObjectType(e){const o=Object.prototype.toString.call(e).slice(8,-1);if(objectTypeNames.includes(o))return o}var typeofs,objectTypeNames,init_is=__esm({"node_modules/cborg/esm/lib/is.js"(){init_node_globals(),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]}}),Type,Token,init_token=__esm({"node_modules/cborg/esm/lib/token.js"(){init_node_globals(),Type=class{constructor(e,o,r){this.major=e,this.majorEncoded=e<<5,this.name=o,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}},Type.uint=new Type(0,"uint",!0),Type.negint=new Type(1,"negint",!0),Type.bytes=new Type(2,"bytes",!0),Type.string=new Type(3,"string",!0),Type.array=new Type(4,"array",!1),Type.map=new Type(5,"map",!1),Type.tag=new Type(6,"tag",!1),Type.float=new Type(7,"float",!0),Type.false=new Type(7,"false",!0),Type.true=new Type(7,"true",!0),Type.null=new Type(7,"null",!0),Type.undefined=new Type(7,"undefined",!0),Type.break=new Type(7,"break",!0),Token=class{constructor(e,o,r){this.type=e,this.value=o,this.encodedLength=r,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}}}});function isBuffer2(e){return useBuffer&&globalThis.Buffer.isBuffer(e)}function asU8A(e){return e instanceof Uint8Array?isBuffer2(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}function compare(e,o){if(isBuffer2(e)&&isBuffer2(o))return e.compare(o);for(let r=0;r<e.length;r++)if(e[r]!==o[r])return e[r]<o[r]?-1:1;return 0}function utf8ToBytes(e,o=1/0){let r;const t=e.length;let n=null;const s=[];for(let u=0;u<t;++u){if(r=e.charCodeAt(u),r>55295&&r<57344){if(!n){if(r>56319){(o-=3)>-1&&s.push(239,191,189);continue}else if(u+1===t){(o-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(o-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(o-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((o-=1)<0)break;s.push(r)}else if(r<2048){if((o-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((o-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((o-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function utf8Slice(e,o,r){const t=[];for(;o<r;){const n=e[o];let s=null,u=n>239?4:n>223?3:n>191?2:1;if(o+u<=r){let l,f,a,c;switch(u){case 1:n<128&&(s=n);break;case 2:l=e[o+1],(l&192)==128&&(c=(n&31)<<6|l&63,c>127&&(s=c));break;case 3:l=e[o+1],f=e[o+2],(l&192)==128&&(f&192)==128&&(c=(n&15)<<12|(l&63)<<6|f&63,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:l=e[o+1],f=e[o+2],a=e[o+3],(l&192)==128&&(f&192)==128&&(a&192)==128&&(c=(n&15)<<18|(l&63)<<12|(f&63)<<6|a&63,c>65535&&c<1114112&&(s=c))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,t.push(s>>>10&1023|55296),s=56320|s&1023),t.push(s),o+=u}return decodeCodePointsArray(t)}function decodeCodePointsArray(e){const o=e.length;if(o<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);let r="",t=0;for(;t<o;)r+=String.fromCharCode.apply(String,e.slice(t,t+=MAX_ARGUMENTS_LENGTH));return r}var useBuffer,textDecoder2,textEncoder3,toString2,fromString2,fromArray,slice,concat,alloc,MAX_ARGUMENTS_LENGTH,init_byte_utils=__esm({"node_modules/cborg/esm/lib/byte-utils.js"(){init_node_globals(),useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder2=new TextDecoder,textEncoder3=new TextEncoder,toString2=useBuffer?(e,o,r)=>r-o>64?globalThis.Buffer.from(e.subarray(o,r)).toString("utf8"):utf8Slice(e,o,r):(e,o,r)=>r-o>64?textDecoder2.decode(e.subarray(o,r)):utf8Slice(e,o,r),fromString2=useBuffer?e=>e.length>64?globalThis.Buffer.from(e):utf8ToBytes(e):e=>e.length>64?textEncoder3.encode(e):utf8ToBytes(e),fromArray=e=>Uint8Array.from(e),slice=useBuffer?(e,o,r)=>isBuffer2(e)?new Uint8Array(e.subarray(o,r)):e.slice(o,r):(e,o,r)=>e.slice(o,r),concat=useBuffer?(e,o)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),asU8A(globalThis.Buffer.concat(e,o))):(e,o)=>{const r=new Uint8Array(o);let t=0;for(let n of e)t+n.length>r.length&&(n=n.subarray(0,r.length-t)),r.set(n,t),t+=n.length;return r},alloc=useBuffer?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e),MAX_ARGUMENTS_LENGTH=4096}}),defaultChunkSize,Bl,init_bl=__esm({"node_modules/cborg/esm/lib/bl.js"(){init_node_globals(),init_byte_utils(),defaultChunkSize=256,Bl=class{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let o=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const t=o.length-(this.maxCursor-this.cursor)-1;o.set(e,t)}else{if(o){const t=o.length-(this.maxCursor-this.cursor)-1;t<o.length&&(this.chunks[this.chunks.length-1]=o.subarray(0,t),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(o=alloc(this.chunkSize),this.chunks.push(o),this.maxCursor+=o.length,this._initReuseChunk===null&&(this._initReuseChunk=o),o.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let o;if(this.chunks.length===1){const r=this.chunks[0];e&&this.cursor>r.length/2?(o=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):o=slice(r,0,this.cursor)}else o=concat(this.chunks,this.cursor);return e&&this.reset(),o}}}});function assertEnoughData(e,o,r){if(e.length-o<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}var decodeErrPrefix,encodeErrPrefix,uintMinorPrefixBytes,init_common=__esm({"node_modules/cborg/esm/lib/common.js"(){init_node_globals(),decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:",uintMinorPrefixBytes=[],uintMinorPrefixBytes[23]=1,uintMinorPrefixBytes[24]=2,uintMinorPrefixBytes[25]=3,uintMinorPrefixBytes[26]=5,uintMinorPrefixBytes[27]=9}});function readUint8(e,o,r){assertEnoughData(e,o,1);const t=e[o];if(r.strict===!0&&t<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return t}function readUint16(e,o,r){assertEnoughData(e,o,2);const t=e[o]<<8|e[o+1];if(r.strict===!0&&t<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return t}function readUint32(e,o,r){assertEnoughData(e,o,4);const t=e[o]*16777216+(e[o+1]<<16)+(e[o+2]<<8)+e[o+3];if(r.strict===!0&&t<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return t}function readUint64(e,o,r){assertEnoughData(e,o,8);const t=e[o]*16777216+(e[o+1]<<16)+(e[o+2]<<8)+e[o+3],n=e[o+4]*16777216+(e[o+5]<<16)+(e[o+6]<<8)+e[o+7],s=(BigInt(t)<<BigInt(32))+BigInt(n);if(r.strict===!0&&s<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(e,o,r,t){return new Token(Type.uint,readUint8(e,o+1,t),2)}function decodeUint16(e,o,r,t){return new Token(Type.uint,readUint16(e,o+1,t),3)}function decodeUint32(e,o,r,t){return new Token(Type.uint,readUint32(e,o+1,t),5)}function decodeUint64(e,o,r,t){return new Token(Type.uint,readUint64(e,o+1,t),9)}function encodeUint(e,o){return encodeUintValue(e,0,o.value)}function encodeUintValue(e,o,r){if(r<uintBoundaries[0]){const t=Number(r);e.push([o|t])}else if(r<uintBoundaries[1]){const t=Number(r);e.push([o|24,t])}else if(r<uintBoundaries[2]){const t=Number(r);e.push([o|25,t>>>8,t&255])}else if(r<uintBoundaries[3]){const t=Number(r);e.push([o|26,t>>>24&255,t>>>16&255,t>>>8&255,t&255])}else{const t=BigInt(r);if(t<uintBoundaries[4]){const n=[o|27,0,0,0,0,0,0,0];let s=Number(t&BigInt(4294967295)),u=Number(t>>BigInt(32)&BigInt(4294967295));n[8]=s&255,s=s>>8,n[7]=s&255,s=s>>8,n[6]=s&255,s=s>>8,n[5]=s&255,n[4]=u&255,u=u>>8,n[3]=u&255,u=u>>8,n[2]=u&255,u=u>>8,n[1]=u&255,e.push(n)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}var uintBoundaries,init_uint=__esm({"node_modules/cborg/esm/lib/0uint.js"(){init_node_globals(),init_token(),init_common(),uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")],encodeUint.encodedSize=function(o){return encodeUintValue.encodedSize(o.value)},encodeUintValue.encodedSize=function(o){return o<uintBoundaries[0]?1:o<uintBoundaries[1]?2:o<uintBoundaries[2]?3:o<uintBoundaries[3]?5:9},encodeUint.compareTokens=function(o,r){return o.value<r.value?-1:o.value>r.value?1:0}}});function decodeNegint8(e,o,r,t){return new Token(Type.negint,-1-readUint8(e,o+1,t),2)}function decodeNegint16(e,o,r,t){return new Token(Type.negint,-1-readUint16(e,o+1,t),3)}function decodeNegint32(e,o,r,t){return new Token(Type.negint,-1-readUint32(e,o+1,t),5)}function decodeNegint64(e,o,r,t){const n=readUint64(e,o+1,t);if(typeof n!="bigint"){const s=-1-n;if(s>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,s,9)}if(t.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(n),9)}function encodeNegint(e,o){const r=o.value,t=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;encodeUintValue(e,o.type.majorEncoded,t)}var neg1b,pos1b,init_negint=__esm({"node_modules/cborg/esm/lib/1negint.js"(){init_node_globals(),init_token(),init_uint(),init_common(),neg1b=BigInt(-1),pos1b=BigInt(1),encodeNegint.encodedSize=function(o){const r=o.value,t=typeof r=="bigint"?r*neg1b-pos1b:r*-1-1;return t<uintBoundaries[0]?1:t<uintBoundaries[1]?2:t<uintBoundaries[2]?3:t<uintBoundaries[3]?5:9},encodeNegint.compareTokens=function(o,r){return o.value<r.value?1:o.value>r.value?-1:0}}});function toToken(e,o,r,t){assertEnoughData(e,o,r+t);const n=slice(e,o+r,o+r+t);return new Token(Type.bytes,n,r+t)}function decodeBytesCompact(e,o,r,t){return toToken(e,o,1,r)}function decodeBytes8(e,o,r,t){return toToken(e,o,2,readUint8(e,o+1,t))}function decodeBytes16(e,o,r,t){return toToken(e,o,3,readUint16(e,o+1,t))}function decodeBytes32(e,o,r,t){return toToken(e,o,5,readUint32(e,o+1,t))}function decodeBytes64(e,o,r,t){const n=readUint64(e,o+1,t);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken(e,o,9,n)}function tokenBytes(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===Type.string?fromString2(e.value):e.value),e.encodedBytes}function encodeBytes(e,o){const r=tokenBytes(o);encodeUintValue(e,o.type.majorEncoded,r.length),e.push(r)}function compareBytes(e,o){return e.length<o.length?-1:e.length>o.length?1:compare(e,o)}var init_bytes2=__esm({"node_modules/cborg/esm/lib/2bytes.js"(){init_node_globals(),init_token(),init_common(),init_uint(),init_byte_utils(),encodeBytes.encodedSize=function(o){const r=tokenBytes(o);return encodeUintValue.encodedSize(r.length)+r.length},encodeBytes.compareTokens=function(o,r){return compareBytes(tokenBytes(o),tokenBytes(r))}}});function toToken2(e,o,r,t){const n=r+t;return assertEnoughData(e,o,n),new Token(Type.string,toString2(e,o+r,o+n),n)}function decodeStringCompact(e,o,r,t){return toToken2(e,o,1,r)}function decodeString8(e,o,r,t){return toToken2(e,o,2,readUint8(e,o+1,t))}function decodeString16(e,o,r,t){return toToken2(e,o,3,readUint16(e,o+1,t))}function decodeString32(e,o,r,t){return toToken2(e,o,5,readUint32(e,o+1,t))}function decodeString64(e,o,r,t){const n=readUint64(e,o+1,t);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken2(e,o,9,n)}var encodeString,init_string=__esm({"node_modules/cborg/esm/lib/3string.js"(){init_node_globals(),init_token(),init_common(),init_uint(),init_bytes2(),init_byte_utils(),encodeString=encodeBytes}});function toToken3(e,o,r,t){return new Token(Type.array,t,r)}function decodeArrayCompact(e,o,r,t){return toToken3(e,o,1,r)}function decodeArray8(e,o,r,t){return toToken3(e,o,2,readUint8(e,o+1,t))}function decodeArray16(e,o,r,t){return toToken3(e,o,3,readUint16(e,o+1,t))}function decodeArray32(e,o,r,t){return toToken3(e,o,5,readUint32(e,o+1,t))}function decodeArray64(e,o,r,t){const n=readUint64(e,o+1,t);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken3(e,o,9,n)}function decodeArrayIndefinite(e,o,r,t){if(t.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken3(e,o,1,1/0)}function encodeArray(e,o){encodeUintValue(e,Type.array.majorEncoded,o.value)}var init_array=__esm({"node_modules/cborg/esm/lib/4array.js"(){init_node_globals(),init_token(),init_uint(),init_common(),encodeArray.compareTokens=encodeUint.compareTokens}});function toToken4(e,o,r,t){return new Token(Type.map,t,r)}function decodeMapCompact(e,o,r,t){return toToken4(e,o,1,r)}function decodeMap8(e,o,r,t){return toToken4(e,o,2,readUint8(e,o+1,t))}function decodeMap16(e,o,r,t){return toToken4(e,o,3,readUint16(e,o+1,t))}function decodeMap32(e,o,r,t){return toToken4(e,o,5,readUint32(e,o+1,t))}function decodeMap64(e,o,r,t){const n=readUint64(e,o+1,t);if(typeof n=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken4(e,o,9,n)}function decodeMapIndefinite(e,o,r,t){if(t.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken4(e,o,1,1/0)}function encodeMap(e,o){encodeUintValue(e,Type.map.majorEncoded,o.value)}var init_map=__esm({"node_modules/cborg/esm/lib/5map.js"(){init_node_globals(),init_token(),init_uint(),init_common(),encodeMap.compareTokens=encodeUint.compareTokens}});function decodeTagCompact(e,o,r,t){return new Token(Type.tag,r,1)}function decodeTag8(e,o,r,t){return new Token(Type.tag,readUint8(e,o+1,t),2)}function decodeTag16(e,o,r,t){return new Token(Type.tag,readUint16(e,o+1,t),3)}function decodeTag32(e,o,r,t){return new Token(Type.tag,readUint32(e,o+1,t),5)}function decodeTag64(e,o,r,t){return new Token(Type.tag,readUint64(e,o+1,t),9)}function encodeTag(e,o){encodeUintValue(e,Type.tag.majorEncoded,o.value)}var init_tag=__esm({"node_modules/cborg/esm/lib/6tag.js"(){init_node_globals(),init_token(),init_uint(),encodeTag.compareTokens=encodeUint.compareTokens}});function decodeUndefined(e,o,r,t){if(t.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return t.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(e,o,r,t){if(t.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(e,o,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,e,o)}function decodeFloat16(e,o,r,t){return createToken(readFloat16(e,o+1),3,t)}function decodeFloat32(e,o,r,t){return createToken(readFloat32(e,o+1),5,t)}function decodeFloat64(e,o,r,t){return createToken(readFloat64(e,o+1),9,t)}function encodeFloat(e,o,r){const t=o.value;if(t===!1)e.push([Type.float.majorEncoded|MINOR_FALSE]);else if(t===!0)e.push([Type.float.majorEncoded|MINOR_TRUE]);else if(t===null)e.push([Type.float.majorEncoded|MINOR_NULL]);else if(t===void 0)e.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let n,s=!1;(!r||r.float64!==!0)&&(encodeFloat16(t),n=readFloat16(ui8a,1),t===n||Number.isNaN(t)?(ui8a[0]=249,e.push(ui8a.slice(0,3)),s=!0):(encodeFloat32(t),n=readFloat32(ui8a,1),t===n&&(ui8a[0]=250,e.push(ui8a.slice(0,5)),s=!0))),s||(encodeFloat64(t),n=readFloat64(ui8a,1),ui8a[0]=251,e.push(ui8a.slice(0,9)))}}function encodeFloat16(e){if(e===1/0)dataView.setUint16(0,31744,!1);else if(e===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(e))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,e);const o=dataView.getUint32(0),r=(o&2139095040)>>23,t=o&8388607;if(r===255)dataView.setUint16(0,31744,!1);else if(r===0)dataView.setUint16(0,(e&2147483648)>>16|t>>13,!1);else{const n=r-127;n<-24?dataView.setUint16(0,0):n<-14?dataView.setUint16(0,(o&2147483648)>>16|1<<24+n,!1):dataView.setUint16(0,(o&2147483648)>>16|n+15<<10|t>>13,!1)}}}function readFloat16(e,o){if(e.length-o<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(e[o]<<8)+e[o+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const t=r>>10&31,n=r&1023;let s;return t===0?s=n*2**-24:t!==31?s=(n+1024)*2**(t-25):s=n===0?1/0:NaN,r&32768?-s:s}function encodeFloat32(e){dataView.setFloat32(0,e,!1)}function readFloat32(e,o){if(e.length-o<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(e.byteOffset||0)+o;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(e){dataView.setFloat64(0,e,!1)}function readFloat64(e,o){if(e.length-o<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(e.byteOffset||0)+o;return new DataView(e.buffer,r,8).getFloat64(0,!1)}var MINOR_FALSE,MINOR_TRUE,MINOR_NULL,MINOR_UNDEFINED,buffer,dataView,ui8a,init_float=__esm({"node_modules/cborg/esm/lib/7float.js"(){init_node_globals(),init_token(),init_common(),init_uint(),MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23,encodeFloat.encodedSize=function(o,r){const t=o.value;if(t===!1||t===!0||t===null||t===void 0)return 1;let n;if(!r||r.float64!==!0){if(encodeFloat16(t),n=readFloat16(ui8a,1),t===n||Number.isNaN(t))return 3;if(encodeFloat32(t),n=readFloat32(ui8a,1),t===n)return 5}return 9},buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0),encodeFloat.compareTokens=encodeUint.compareTokens}});function invalidMinor(e,o,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${e[o]>>>5}`)}function errorer(e){return()=>{throw new Error(`${decodeErrPrefix} ${e}`)}}function quickEncodeToken(e){switch(e.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return e.value.length?void 0:fromArray([64]);case Type.string:return e.value===""?fromArray([96]):void 0;case Type.array:return e.value===0?fromArray([128]):void 0;case Type.map:return e.value===0?fromArray([160]):void 0;case Type.uint:return e.value<24?fromArray([Number(e.value)]):void 0;case Type.negint:if(e.value>=-24)return fromArray([31-Number(e.value)])}}var jump,quick,init_jump=__esm({"node_modules/cborg/esm/lib/jump.js"(){init_node_globals(),init_token(),init_uint(),init_negint(),init_bytes2(),init_string(),init_array(),init_map(),init_tag(),init_float(),init_common(),init_byte_utils(),jump=[];for(let e=0;e<=23;e++)jump[e]=invalidMinor;jump[24]=decodeUint8,jump[25]=decodeUint16,jump[26]=decodeUint32,jump[27]=decodeUint64,jump[28]=invalidMinor,jump[29]=invalidMinor,jump[30]=invalidMinor,jump[31]=invalidMinor;for(let e=32;e<=55;e++)jump[e]=invalidMinor;jump[56]=decodeNegint8,jump[57]=decodeNegint16,jump[58]=decodeNegint32,jump[59]=decodeNegint64,jump[60]=invalidMinor,jump[61]=invalidMinor,jump[62]=invalidMinor,jump[63]=invalidMinor;for(let e=64;e<=87;e++)jump[e]=decodeBytesCompact;jump[88]=decodeBytes8,jump[89]=decodeBytes16,jump[90]=decodeBytes32,jump[91]=decodeBytes64,jump[92]=invalidMinor,jump[93]=invalidMinor,jump[94]=invalidMinor,jump[95]=errorer("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)jump[e]=decodeStringCompact;jump[120]=decodeString8,jump[121]=decodeString16,jump[122]=decodeString32,jump[123]=decodeString64,jump[124]=invalidMinor,jump[125]=invalidMinor,jump[126]=invalidMinor,jump[127]=errorer("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)jump[e]=decodeArrayCompact;jump[152]=decodeArray8,jump[153]=decodeArray16,jump[154]=decodeArray32,jump[155]=decodeArray64,jump[156]=invalidMinor,jump[157]=invalidMinor,jump[158]=invalidMinor,jump[159]=decodeArrayIndefinite;for(let e=160;e<=183;e++)jump[e]=decodeMapCompact;jump[184]=decodeMap8,jump[185]=decodeMap16,jump[186]=decodeMap32,jump[187]=decodeMap64,jump[188]=invalidMinor,jump[189]=invalidMinor,jump[190]=invalidMinor,jump[191]=decodeMapIndefinite;for(let e=192;e<=215;e++)jump[e]=decodeTagCompact;jump[216]=decodeTag8,jump[217]=decodeTag16,jump[218]=decodeTag32,jump[219]=decodeTag64,jump[220]=invalidMinor,jump[221]=invalidMinor,jump[222]=invalidMinor,jump[223]=invalidMinor;for(let e=224;e<=243;e++)jump[e]=errorer("simple values are not supported");jump[244]=invalidMinor,jump[245]=invalidMinor,jump[246]=invalidMinor,jump[247]=decodeUndefined,jump[248]=errorer("simple values are not supported"),jump[249]=decodeFloat16,jump[250]=decodeFloat32,jump[251]=decodeFloat64,jump[252]=invalidMinor,jump[253]=invalidMinor,jump[254]=invalidMinor,jump[255]=decodeBreak,quick=[];for(let e=0;e<24;e++)quick[e]=new Token(Type.uint,e,1);for(let e=-1;e>=-24;e--)quick[31-e]=new Token(Type.negint,e,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1),quick[96]=new Token(Type.string,"",1),quick[128]=new Token(Type.array,0,1),quick[160]=new Token(Type.map,0,1),quick[244]=new Token(Type.false,!1,1),quick[245]=new Token(Type.true,!0,1),quick[246]=new Token(Type.null,null,1)}});function objectToTokens(e,o={},r){const t=is(e),n=o&&o.typeEncoders&&o.typeEncoders[t]||typeEncoders[t];if(typeof n=="function"){const u=n(e,t,o,r);if(u!=null)return u}const s=typeEncoders[t];if(!s)throw new Error(`${encodeErrPrefix} unsupported type: ${t}`);return s(e,t,o,r)}function sortMapEntries(e,o){o.mapSorter&&e.sort(o.mapSorter)}function mapSorter(e,o){const r=Array.isArray(e[0])?e[0][0]:e[0],t=Array.isArray(o[0])?o[0][0]:o[0];if(r.type!==t.type)return r.type.compare(t.type);const n=r.type.major,s=cborEncoders[n].compareTokens(r,t);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function tokensToEncoded(e,o,r,t){if(Array.isArray(o))for(const n of o)tokensToEncoded(e,n,r,t);else r[o.type.major](e,o,t)}function encodeCustom(e,o,r){const t=objectToTokens(e,r);if(!Array.isArray(t)&&r.quickEncodeToken){const n=r.quickEncodeToken(t);if(n)return n;const s=o[t.type.major];if(s.encodedSize){const u=s.encodedSize(t,r),l=new Bl(u);if(s(l,t,r),l.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${t} was wrong`);return asU8A(l.chunks[0])}}return tokensToEncoded(buf,t,o,r),buf.toBytes(!0)}function encode4(e,o){return o=Object.assign({},defaultEncodeOptions,o),encodeCustom(e,cborEncoders,o)}var defaultEncodeOptions,cborEncoders,buf,Ref,simpleTokens,typeEncoders,init_encode=__esm({"node_modules/cborg/esm/lib/encode.js"(){init_node_globals(),init_is(),init_token(),init_bl(),init_common(),init_jump(),init_byte_utils(),init_uint(),init_negint(),init_bytes2(),init_string(),init_array(),init_map(),init_tag(),init_float(),defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken},cborEncoders=[],cborEncoders[Type.uint.major]=encodeUint,cborEncoders[Type.negint.major]=encodeNegint,cborEncoders[Type.bytes.major]=encodeBytes,cborEncoders[Type.string.major]=encodeString,cborEncoders[Type.array.major]=encodeArray,cborEncoders[Type.map.major]=encodeMap,cborEncoders[Type.tag.major]=encodeTag,cborEncoders[Type.float.major]=encodeFloat,buf=new Bl,Ref=class{constructor(e,o){this.obj=e,this.parent=o}includes(e){let o=this;do if(o.obj===e)return!0;while(o=o.parent);return!1}static createCheck(e,o){if(e&&e.includes(o))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(o,e)}},simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(e,o,r,t){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new Token(Type.float,e):e>=0?new Token(Type.uint,e):new Token(Type.negint,e)},bigint(e,o,r,t){return e>=BigInt(0)?new Token(Type.uint,e):new Token(Type.negint,e)},Uint8Array(e,o,r,t){return new Token(Type.bytes,e)},string(e,o,r,t){return new Token(Type.string,e)},boolean(e,o,r,t){return e?simpleTokens.true:simpleTokens.false},null(e,o,r,t){return simpleTokens.null},undefined(e,o,r,t){return simpleTokens.undefined},ArrayBuffer(e,o,r,t){return new Token(Type.bytes,new Uint8Array(e))},DataView(e,o,r,t){return new Token(Type.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,o,r,t){if(!e.length)return r.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;t=Ref.createCheck(t,e);const n=[];let s=0;for(const u of e)n[s++]=objectToTokens(u,r,t);return r.addBreakTokens?[new Token(Type.array,e.length),n,new Token(Type.break)]:[new Token(Type.array,e.length),n]},Object(e,o,r,t){const n=o!=="Object",s=n?e.keys():Object.keys(e),u=n?e.size:s.length;if(!u)return r.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;t=Ref.createCheck(t,e);const l=[];let f=0;for(const a of s)l[f++]=[objectToTokens(a,r,t),objectToTokens(n?e.get(a):e[a],r,t)];return sortMapEntries(l,r),r.addBreakTokens?[new Token(Type.map,u),l,new Token(Type.break)]:[new Token(Type.map,u),l]}},typeEncoders.Map=typeEncoders.Object,typeEncoders.Buffer=typeEncoders.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${e}Array`]=typeEncoders.DataView}});function tokenToArray(e,o,r){const t=[];for(let n=0;n<e.value;n++){const s=tokensToObject(o,r);if(s===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(s===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${n}, expected ${e.value})`);t[n]=s}return t}function tokenToMap(e,o,r){const t=r.useMaps===!0,n=t?void 0:{},s=t?new Map:void 0;for(let u=0;u<e.value;u++){const l=tokensToObject(o,r);if(l===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(l===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no key], expected ${e.value})`);if(t!==!0&&typeof l!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof l})`);const f=tokensToObject(o,r);if(f===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no value], expected ${e.value})`);t?s.set(l,f):n[l]=f}return t?s:n}function tokensToObject(e,o){if(e.done())return DONE;const r=e.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,e,o);if(r.type===Type.map)return tokenToMap(r,e,o);if(r.type===Type.tag){if(o.tags&&typeof o.tags[r.value]=="function"){const t=tokensToObject(e,o);return o.tags[r.value](t)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode6(e,o){if(!(e instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);o=Object.assign({},defaultDecodeOptions,o);const r=o.tokenizer||new Tokeniser(e,o),t=tokensToObject(r,o);if(t===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(t===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return t}var defaultDecodeOptions,Tokeniser,DONE,BREAK,init_decode=__esm({"node_modules/cborg/esm/lib/decode.js"(){init_node_globals(),init_common(),init_token(),init_jump(),defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Tokeniser=class{constructor(e,o={}){this.pos=0,this.data=e,this.options=o}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let o=quick[e];if(o===void 0){const r=jump[e];if(!r)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const t=e&31;o=r(this.data,this.pos,t,this.options)}return this.pos+=o.encodedLength,o}},DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK")}}),init_cborg=__esm({"node_modules/cborg/esm/cborg.js"(){init_node_globals(),init_encode(),init_decode(),init_token()}}),esm_exports={};__export(esm_exports,{code:()=>code2,decode:()=>decode7,encode:()=>encode5,name:()=>name2});function cidEncoder(e){if(e.asCID!==e)return null;const o=CID.asCID(e);if(!o)return null;const r=new Uint8Array(o.bytes.byteLength+1);return r.set(o.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,r)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function cidDecoder(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(e.subarray(1))}var CID_CBOR_TAG,encodeOptions,decodeOptions,name2,code2,encode5,decode7,init_esm=__esm({"node_modules/ipfs-core/node_modules/@ipld/dag-cbor/esm/index.js"(){init_node_globals(),init_cborg(),init_cid(),CID_CBOR_TAG=42,encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}},decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]},decodeOptions.tags[CID_CBOR_TAG]=cidDecoder,name2="dag-cbor",code2=113,encode5=e=>encode4(e,encodeOptions),decode7=e=>decode6(e,decodeOptions)}}),hasher_exports={};__export(hasher_exports,{Hasher:()=>Hasher,from:()=>from2});var from2,Hasher,init_hasher=__esm({"node_modules/multiformats/esm/src/hashes/hasher.js"(){init_node_globals(),init_digest(),from2=({name:e,code:o,encode:r})=>new Hasher(e,o,r),Hasher=class{constructor(e,o,r){this.name=e,this.code=o,this.encode=r}digest(e){if(e instanceof Uint8Array){const o=this.encode(e);return o instanceof Uint8Array?create(this.code,o):o.then(r=>create(this.code,r))}else throw Error("Unknown type, must be binary type")}}}}),init_src3=__esm({"node_modules/multiformats/esm/src/index.js"(){init_node_globals(),init_cid(),init_varint2(),init_bytes(),init_hasher(),init_digest()}}),base64_exports={};__export(base64_exports,{base64:()=>base64,base64pad:()=>base64pad,base64url:()=>base64url,base64urlpad:()=>base64urlpad});var base64,base64pad,base64url,base64urlpad,init_base64=__esm({"node_modules/multiformats/esm/src/bases/base64.js"(){init_node_globals(),init_base(),base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}});function mapSorter2(e,o){if(Array.isArray(e[0])||Array.isArray(o[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const r=e[0],t=o[0];if(r.type!==Type.string||t.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(r<t)return-1;if(r>t)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}function encode6(e,o){return o=Object.assign({},defaultEncodeOptions2,o),encodeCustom(e,new JSONEncoder,o)}var JSONEncoder,defaultEncodeOptions2,init_encode2=__esm({"node_modules/cborg/esm/lib/json/encode.js"(){init_node_globals(),init_token(),init_encode(),init_common(),init_byte_utils(),JSONEncoder=class extends Array{constructor(){super();this.inRecursive=[]}prefix(e){const o=this.inRecursive[this.inRecursive.length-1];o&&(o.type===Type.array&&(o.elements++,o.elements!==1&&e.push([44])),o.type===Type.map&&(o.elements++,o.elements!==1&&(o.elements%2==1?e.push([44]):e.push([58]))))}[Type.uint.major](e,o){this.prefix(e);const r=String(o.value),t=[];for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);e.push(t)}[Type.negint.major](e,o){this[Type.uint.major](e,o)}[Type.bytes.major](e,o){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,o){this.prefix(e);const r=fromString2(JSON.stringify(o.value));e.push(r.length>32?asU8A(r):r)}[Type.array.major](e,o){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,o){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,o){}[Type.float.major](e,o){if(o.type.name==="break"){const s=this.inRecursive.pop();if(s){if(s.type===Type.array)e.push([93]);else if(s.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(o.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),o.type.name==="true"){e.push([116,114,117,101]);return}else if(o.type.name==="false"){e.push([102,97,108,115,101]);return}else if(o.type.name==="null"){e.push([110,117,108,108]);return}const r=String(o.value),t=[];let n=!1;for(let s=0;s<r.length;s++)t[s]=r.charCodeAt(s),!n&&(t[s]===46||t[s]===101||t[s]===69)&&(n=!0);n||(t.push(46),t.push(48)),e.push(t)}},defaultEncodeOptions2={addBreakTokens:!0,mapSorter:mapSorter2}}});function decode8(e,o){return o=Object.assign({tokenizer:new Tokenizer(e,o)},o),decode6(e,o)}var Tokenizer,init_decode2=__esm({"node_modules/cborg/esm/lib/json/decode.js"(){init_node_globals(),init_decode(),init_token(),init_byte_utils(),init_common(),Tokenizer=class{constructor(e,o={}){this.pos=0,this.data=e,this.options=o,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let o=0;o<e.length;o++)if(this.data[this.pos++]!==e[o])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let o=!1,r=!1;const t=u=>{for(;!this.done();){const l=this.ch();if(u.includes(l))this.pos++;else break}};if(this.ch()===45&&(o=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,r=!0;else return new Token(Type.uint,0,this.pos-e);if(t([48,49,50,51,52,53,54,55,56,57]),o&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(r)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);r=!0,this.pos++,t([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(r=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,t([48,49,50,51,52,53,54,55,56,57]));const n=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(n);return r?new Token(Type.float,s,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(s)?new Token(s>=0?Type.uint:Type.negint,s,this.pos-e):new Token(s>=0?Type.uint:Type.negint,BigInt(n),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let n=this.pos,s=0;n<this.data.length&&s<65536;n++,s++){const u=this.data[n];if(u===92||u<32||u>=128)break;if(u===34){const l=String.fromCharCode.apply(null,this.data.subarray(this.pos,n));return this.pos=n+1,new Token(Type.string,l,s)}}const e=this.pos,o=[],r=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let n=0;for(let s=0;s<4;s++){let u=this.ch();if(u>=48&&u<=57)u-=48;else if(u>=97&&u<=102)u=u-97+10;else if(u>=65&&u<=70)u=u-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);n=n*16+u,this.pos++}return n},t=()=>{const n=this.ch();let s=null,u=n>239?4:n>223?3:n>191?2:1;if(this.pos+u>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let l,f,a,c;switch(u){case 1:n<128&&(s=n);break;case 2:l=this.data[this.pos+1],(l&192)==128&&(c=(n&31)<<6|l&63,c>127&&(s=c));break;case 3:l=this.data[this.pos+1],f=this.data[this.pos+2],(l&192)==128&&(f&192)==128&&(c=(n&15)<<12|(l&63)<<6|f&63,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:l=this.data[this.pos+1],f=this.data[this.pos+2],a=this.data[this.pos+3],(l&192)==128&&(f&192)==128&&(a&192)==128&&(c=(n&15)<<18|(l&63)<<12|(f&63)<<6|a&63,c>65535&&c<1114112&&(s=c))}s===null?(s=65533,u=1):s>65535&&(s-=65536,o.push(s>>>10&1023|55296),s=56320|s&1023),o.push(s),this.pos+=u};for(;!this.done();){const n=this.ch();let s;switch(n){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:o.push(s);break;case 98:o.push(8);break;case 116:o.push(9);break;case 110:o.push(10);break;case 102:o.push(12);break;case 114:o.push(13);break;case 117:o.push(r());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(o),this.pos-e);default:if(n<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);n<128?(o.push(n),this.pos++):t()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}}}),init_json=__esm({"node_modules/cborg/esm/lib/json/json.js"(){init_node_globals(),init_encode2(),init_decode2()}}),esm_exports2={};__export(esm_exports2,{code:()=>code3,decode:()=>decode9,encode:()=>encode7,name:()=>name3});function cidEncoder2(e){if(e.asCID!==e)return null;const o=CID.asCID(e);if(!o)return null;const r=o.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1)]}function bytesEncoder(e){const o=base64.encode(e).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,o,o.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder2(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var encodeOptions2,DagJsonTokenizer,decodeOptions2,name3,code3,encode7,decode9,init_esm2=__esm({"node_modules/@ipld/dag-json/esm/index.js"(){init_node_globals(),init_src3(),init_base64(),init_cborg(),init_json(),encodeOptions2={typeEncoders:{Object:cidEncoder2,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder2,number:numberEncoder2}},DagJsonTokenizer=class extends Tokenizer{constructor(e,o){super(e,o);this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const o=this._next();if(o.type===Type.string&&o.value==="/"){const r=this._next();if(r.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new Token(Type.tag,42,0)}if(r.type===Type.map){const t=this._next();if(t.type===Type.string&&t.value==="bytes"){const n=this._next();if(n.type===Type.string){for(let u=0;u<2;u++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const s=base64.decode(`m${n.value}`);return new Token(Type.bytes,s,n.value.length)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}this.tokenBuffer.push(r)}this.tokenBuffer.push(o)}return e}},decodeOptions2={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]},decodeOptions2.tags[42]=CID.parse,name3="dag-json",code3=297,encode7=e=>encode6(e,encodeOptions2),decode9=e=>{const o=Object.assign(decodeOptions2,{tokenizer:new DagJsonTokenizer(e,decodeOptions2)});return decode8(e,o)}}}),require_utils=__commonJS({"node_modules/dag-jose/lib/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.fromBase64url=e.toBase64url=void 0;var o=(init_base64(),__toCommonJS(base64_exports));function r(n){return o.base64url.encode(n).slice(1)}e.toBase64url=r;function t(n){return o.base64url.decode(`u${n}`)}e.fromBase64url=t}}),require_signing=__commonJS({"node_modules/dag-jose/lib/signing.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils(),r=(init_cid(),__toCommonJS(cid_exports));function t(f){const[a,c,d]=f;return{payload:c,signatures:[{protected:a,signature:d}],link:r.CID.decode(o.fromBase64url(c))}}function n(f){const a={signature:o.fromBase64url(f.signature)};return f.header&&(a.header=f.header),f.protected&&(a.protected=o.fromBase64url(f.protected)),a}function s(f){const a=o.fromBase64url(f.payload);try{r.CID.decode(a)}catch{throw new Error("Not a valid DagJWS")}return{payload:a,signatures:f.signatures.map(n)}}function u(f){const a={signature:o.toBase64url(f.signature)};return f.header&&(a.header=f.header),f.protected&&(a.protected=o.toBase64url(f.protected)),a}function l(f){const a={payload:o.toBase64url(f.payload),signatures:f.signatures.map(u)};return a.link=r.CID.decode(new Uint8Array(f.payload)),a}e.default={fromSplit:t,encode:s,decode:l}}}),require_encryption=__commonJS({"node_modules/dag-jose/lib/encryption.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils();function r(l){const[f,a,c,d,h]=l,g={ciphertext:d,iv:c,protected:f,tag:h};return a&&(g.recipients=[{encrypted_key:a}]),g}function t(l){const f={};return l.encrypted_key&&(f.encrypted_key=o.fromBase64url(l.encrypted_key)),l.header&&(f.header=l.header),f}function n(l){const f={ciphertext:o.fromBase64url(l.ciphertext),protected:o.fromBase64url(l.protected),iv:o.fromBase64url(l.iv),tag:o.fromBase64url(l.tag)};return l.aad&&(f.aad=o.fromBase64url(l.aad)),l.recipients&&(f.recipients=l.recipients.map(t)),l.unprotected&&(f.unprotected=l.unprotected),f}function s(l){const f={};return l.encrypted_key&&(f.encrypted_key=o.toBase64url(l.encrypted_key)),l.header&&(f.header=l.header),f}function u(l){const f={ciphertext:o.toBase64url(l.ciphertext),protected:o.toBase64url(l.protected),iv:o.toBase64url(l.iv),tag:o.toBase64url(l.tag)};return l.aad&&(f.aad=o.toBase64url(l.aad)),l.recipients&&(f.recipients=l.recipients.map(s)),l.unprotected&&(f.unprotected=l.unprotected),f}e.default={fromSplit:r,decode:u,encode:n}}}),esm_exports3={};__export(esm_exports3,{code:()=>code4,decode:()=>decode10,encode:()=>encode8,name:()=>name4});function cidEncoder3(e){if(e.asCID!==e)return null;const o=CID.asCID(e);if(!o)return null;const r=new Uint8Array(o.bytes.byteLength+1);return r.set(o.bytes,1),[new Token(Type.tag,CID_CBOR_TAG2),new Token(Type.bytes,r)]}function undefinedEncoder3(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder3(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function cidDecoder2(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(e.subarray(1))}var CID_CBOR_TAG2,encodeOptions3,decodeOptions3,name4,code4,encode8,decode10,init_esm3=__esm({"node_modules/@ipld/dag-cbor/esm/index.js"(){init_node_globals(),init_cborg(),init_cid(),CID_CBOR_TAG2=42,encodeOptions3={float64:!0,typeEncoders:{Object:cidEncoder3,undefined:undefinedEncoder3,number:numberEncoder3}},decodeOptions3={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]},decodeOptions3.tags[CID_CBOR_TAG2]=cidDecoder2,name4="dag-cbor",code4=113,encode8=e=>encode4(e,encodeOptions3),decode10=e=>decode6(e,decodeOptions3)}}),require_lib=__commonJS({"node_modules/dag-jose/lib/index.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(_,m,v,w){w===void 0&&(w=v),Object.defineProperty(_,w,{enumerable:!0,get:function(){return m[v]}})}:function(_,m,v,w){w===void 0&&(w=v),_[w]=m[v]}),r=e&&e.__setModuleDefault||(Object.create?function(_,m){Object.defineProperty(_,"default",{enumerable:!0,value:m})}:function(_,m){_.default=m}),t=e&&e.__importStar||function(_){if(_&&_.__esModule)return _;var m={};if(_!=null)for(var v in _)v!=="default"&&Object.prototype.hasOwnProperty.call(_,v)&&o(m,_,v);return r(m,_),m},n=e&&e.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=e.toGeneral=e.code=e.name=void 0;var s=n(require_signing()),u=n(require_encryption()),l=t((init_esm3(),__toCommonJS(esm_exports3)));e.name="dag-jose",e.code=133;function f(_){return"payload"in _&&typeof _.payload=="string"&&"signatures"in _&&Array.isArray(_.signatures)}function a(_){return"payload"in _&&_.payload instanceof Uint8Array&&"signatures"in _&&Array.isArray(_.signatures)}function c(_){return"ciphertext"in _&&_.ciphertext instanceof Uint8Array&&"iv"in _&&_.iv instanceof Uint8Array&&"protected"in _&&_.protected instanceof Uint8Array&&"tag"in _&&_.tag instanceof Uint8Array}function d(_){return"ciphertext"in _&&typeof _.ciphertext=="string"&&"iv"in _&&typeof _.iv=="string"&&"protected"in _&&typeof _.protected=="string"&&"tag"in _&&typeof _.tag=="string"}function h(_){if(typeof _=="string"){const m=_.split(".");if(m.length===3)return s.default.fromSplit(m);if(m.length===5)return u.default.fromSplit(m);throw new Error("Not a valid JOSE string")}if(f(_)||d(_))return _;throw new Error("Not a valid unencoded JOSE object")}e.toGeneral=h;function g(_){typeof _=="string"&&(_=h(_));let m;if(f(_))m=s.default.encode(_);else if(d(_))m=u.default.encode(_);else throw new Error("Not a valid JOSE object");return new Uint8Array(l.encode(m))}e.encode=g;function p(_){let m;try{m=l.decode(_)}catch{throw new Error("Not a valid DAG-JOSE object")}if(a(m))return s.default.decode(m);if(c(m))return u.default.decode(m);throw new Error("Not a valid DAG-JOSE object")}e.decode=p}}),identity_exports={};__export(identity_exports,{identity:()=>identity});var code5,name5,encode9,digest,identity,init_identity=__esm({"node_modules/multiformats/esm/src/hashes/identity.js"(){init_node_globals(),init_bytes(),init_digest(),code5=0,name5="identity",encode9=coerce,digest=e=>create(code5,encode9(e)),identity={code:code5,name:name5,encode:encode9,digest}}}),identity_exports2={};__export(identity_exports2,{identity:()=>identity2});var identity2,init_identity2=__esm({"node_modules/multiformats/esm/src/bases/identity.js"(){init_node_globals(),init_base(),init_bytes(),identity2=from({prefix:"\0",name:"identity",encode:e=>toString(e),decode:e=>fromString(e)})}}),base2_exports={};__export(base2_exports,{base2:()=>base2});var base2,init_base2=__esm({"node_modules/multiformats/esm/src/bases/base2.js"(){init_node_globals(),init_base(),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}}),base8_exports={};__export(base8_exports,{base8:()=>base8});var base8,init_base8=__esm({"node_modules/multiformats/esm/src/bases/base8.js"(){init_node_globals(),init_base(),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}}),base10_exports={};__export(base10_exports,{base10:()=>base10});var base10,init_base10=__esm({"node_modules/multiformats/esm/src/bases/base10.js"(){init_node_globals(),init_base(),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"})}}),base16_exports={};__export(base16_exports,{base16:()=>base16,base16upper:()=>base16upper});var base16,base16upper,init_base16=__esm({"node_modules/multiformats/esm/src/bases/base16.js"(){init_node_globals(),init_base(),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}}),base36_exports={};__export(base36_exports,{base36:()=>base36,base36upper:()=>base36upper});var base36,base36upper,init_base36=__esm({"node_modules/multiformats/esm/src/bases/base36.js"(){init_node_globals(),init_base(),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}}),sha2_browser_exports={};__export(sha2_browser_exports,{sha256:()=>sha256,sha512:()=>sha512});var sha,sha256,sha512,init_sha2_browser=__esm({"node_modules/multiformats/esm/src/hashes/sha2-browser.js"(){init_node_globals(),init_hasher(),sha=e=>async o=>new Uint8Array(await crypto.subtle.digest(e,o)),sha256=from2({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from2({name:"sha2-512",code:19,encode:sha("SHA-512")})}}),raw_exports={};__export(raw_exports,{code:()=>code6,decode:()=>decode11,encode:()=>encode10,name:()=>name6});var name6,code6,encode10,decode11,init_raw=__esm({"node_modules/multiformats/esm/src/codecs/raw.js"(){init_node_globals(),init_bytes(),name6="raw",code6=85,encode10=e=>coerce(e),decode11=e=>coerce(e)}}),json_exports2={};__export(json_exports2,{code:()=>code7,decode:()=>decode12,encode:()=>encode11,name:()=>name7});var textEncoder4,textDecoder3,name7,code7,encode11,decode12,init_json2=__esm({"node_modules/multiformats/esm/src/codecs/json.js"(){init_node_globals(),textEncoder4=new TextEncoder,textDecoder3=new TextDecoder,name7="json",code7=512,encode11=e=>textEncoder4.encode(JSON.stringify(e)),decode12=e=>JSON.parse(textDecoder3.decode(e))}}),basics_exports={};__export(basics_exports,{CID:()=>CID,bases:()=>bases,bytes:()=>bytes_exports,codecs:()=>codecs,digest:()=>digest_exports,hasher:()=>hasher_exports,hashes:()=>hashes,varint:()=>varint_exports});var bases,hashes,codecs,init_basics=__esm({"node_modules/multiformats/esm/src/basics.js"(){init_node_globals(),init_identity2(),init_base2(),init_base8(),init_base10(),init_base16(),init_base32(),init_base36(),init_base58(),init_base64(),init_sha2_browser(),init_identity(),init_raw(),init_json2(),init_src3(),bases=Re(Re(Re(Re(Re(Re(Re(Re(Re({},identity_exports2),base2_exports),base8_exports),base10_exports),base16_exports),base32_exports),base36_exports),base58_exports),base64_exports),hashes=Re(Re({},sha2_browser_exports),identity_exports),codecs={raw:raw_exports,json:json_exports2}}}),init_assets_browser_exports={};__export(init_assets_browser_exports,{initAssets:()=>initAssets});function initAssets(){}var init_init_assets_browser=__esm({"node_modules/ipfs-core-config/esm/src/init-assets.browser.js"(){init_node_globals()}}),require_errors=__commonJS({"node_modules/ipfs-core/cjs/src/errors.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=class extends Error{constructor(f="not initialized"){super(f);this.name="NotInitializedError",this.code=o.code}};o.code="ERR_NOT_INITIALIZED";var r=class extends Error{constructor(f="cannot initialize an initializing node"){super(f);this.name="AlreadyInitializingError",this.code=t.code}};r.code="ERR_ALREADY_INITIALIZING";var t=class extends Error{constructor(f="cannot re-initialize an initialized node"){super(f);this.name="AlreadyInitializedError",this.code=t.code}};t.code="ERR_ALREADY_INITIALIZED";var n=class extends Error{constructor(f="not started"){super(f);this.name="NotStartedError",this.code=n.code}};n.code="ERR_NOT_STARTED";var s=class extends Error{constructor(f="cannot start, already startin"){super(f);this.name="AlreadyStartingError",this.code=s.code}};s.code="ERR_ALREADY_STARTING";var u=class extends Error{constructor(f="cannot start, already started"){super(f);this.name="AlreadyStartedError",this.code=u.code}};u.code="ERR_ALREADY_STARTED";var l=class extends Error{constructor(f="not enabled"){super(f);this.name="NotEnabledError",this.code=l.code}};l.code="ERR_NOT_ENABLED",e.AlreadyInitializedError=t,e.AlreadyInitializingError=r,e.AlreadyStartedError=u,e.AlreadyStartingError=s,e.NotEnabledError=l,e.NotInitializedError=o,e.NotStartedError=n}});function createCodec(e,o,r,t){return{name:e,prefix:o,encoder:{name:e,prefix:o,encode:r},decoder:{decode:t}}}var string,ascii,BASES,bases_default,init_bases=__esm({"node_modules/uint8arrays/esm/src/util/bases.js"(){init_node_globals(),init_basics(),string=createCodec("utf8","u",e=>{const o=new TextDecoder("utf8");return"u"+o.decode(e)},e=>new TextEncoder().encode(e.substring(1))),ascii=createCodec("ascii","a",e=>{let o="a";for(let r=0;r<e.length;r++)o+=String.fromCharCode(e[r]);return o},e=>{e=e.substring(1);const o=new Uint8Array(e.length);for(let r=0;r<e.length;r++)o[r]=e.charCodeAt(r);return o}),BASES=Re({utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii},bases),bases_default=BASES}}),from_string_exports={};__export(from_string_exports,{fromString:()=>fromString3});function fromString3(e,o="utf8"){const r=bases_default[o];if(!r)throw new Error(`Unsupported encoding "${o}"`);return r.decoder.decode(`${r.prefix}${e}`)}var init_from_string=__esm({"node_modules/uint8arrays/esm/src/from-string.js"(){init_node_globals(),init_bases()}}),require_ip_regex=__commonJS({"node_modules/ip-regex/index.js"(e,o){init_node_globals();var r="[a-fA-F\\d:]",t=d=>d&&d.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",u=`
(?:
(?:${s}:){7}(?:${s}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${s}:){6}(?:${n}|:${s}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${s}:){5}(?::${n}|(?::${s}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${s}:){4}(?:(?::${s}){0,1}:${n}|(?::${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${s}:){3}(?:(?::${s}){0,2}:${n}|(?::${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${s}:){2}(?:(?::${s}){0,3}:${n}|(?::${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${s}:){1}(?:(?::${s}){0,4}:${n}|(?::${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${s}){0,5}:${n}|(?::${s}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),l=new RegExp(`(?:^${n}$)|(?:^${u}$)`),f=new RegExp(`^${n}$`),a=new RegExp(`^${u}$`),c=d=>d&&d.exact?l:new RegExp(`(?:${t(d)}${n}${t(d)})|(?:${t(d)}${u}${t(d)})`,"g");c.v4=d=>d&&d.exact?f:new RegExp(`${t(d)}${n}${t(d)}`,"g"),c.v6=d=>d&&d.exact?a:new RegExp(`${t(d)}${u}${t(d)}`,"g"),o.exports=c}}),require_is_ip=__commonJS({"node_modules/is-ip/index.js"(e,o){init_node_globals();var r=require_ip_regex(),t=n=>r({exact:!0}).test(n);t.v4=n=>r.v4({exact:!0}).test(n),t.v6=n=>r.v6({exact:!0}).test(n),t.version=n=>t(n)?t.v4(n)?4:6:void 0,o.exports=t}}),to_string_exports={};__export(to_string_exports,{toString:()=>toString3});function toString3(e,o="utf8"){const r=bases_default[o];if(!r)throw new Error(`Unsupported encoding "${o}"`);return r.encoder.encode(e).substring(1)}var init_to_string=__esm({"node_modules/uint8arrays/esm/src/to-string.js"(){init_node_globals(),init_bases()}}),require_ip=__commonJS({"node_modules/multiaddr/src/ip.js"(e,o){init_node_globals();var r=require_is_ip(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),n=r,s=r.v4,u=r.v6,l=function(a,c,d){d=~~d;let h;if(s(a))h=c||new Uint8Array(d+4),a.split(/\./g).map(function(g){h[d++]=parseInt(g,10)&255});else if(u(a)){const g=a.split(":",8);let p;for(p=0;p<g.length;p++){const _=s(g[p]);let m;_&&(m=l(g[p]),g[p]=t(m.slice(0,2),"base16")),m&&++p<8&&g.splice(p,0,t(m.slice(2,4),"base16"))}if(g[0]==="")for(;g.length<8;)g.unshift("0");else if(g[g.length-1]==="")for(;g.length<8;)g.push("0");else if(g.length<8){for(p=0;p<g.length&&g[p]!=="";p++);const _=[p,"1"];for(p=9-g.length;p>0;p--)_.push("0");g.splice.apply(g,_)}for(h=c||new Uint8Array(d+16),p=0;p<g.length;p++){const _=parseInt(g[p],16);h[d++]=_>>8&255,h[d++]=_&255}}if(!h)throw Error("Invalid ip address: "+a);return h},f=function(a,c,d){c=~~c,d=d||a.length-c;const h=[];let g;const p=new DataView(a.buffer);if(d===4){for(let _=0;_<d;_++)h.push(a[c+_]);g=h.join(".")}else if(d===16){for(let _=0;_<d;_+=2)h.push(p.getUint16(c+_).toString(16));g=h.join(":"),g=g.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),g=g.replace(/:{3,4}/,"::")}return g};o.exports={isIP:n,isV4:s,isV6:u,toBytes:l,toString:f}}}),require_protocols_table=__commonJS({"node_modules/multiaddr/src/protocols-table.js"(e,o){init_node_globals();function r(s){if(typeof s=="number"){if(r.codes[s])return r.codes[s];throw new Error("no protocol with code: "+s)}else if(typeof s=="string"){if(r.names[s])return r.names[s];throw new Error("no protocol with name: "+s)}throw new Error("invalid protocol id type: "+s)}var t=-1;r.lengthPrefixedVarSize=t,r.V=t,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,t,"ip6zone"],[53,t,"dns","resolvable"],[54,t,"dns4","resolvable"],[55,t,"dns6","resolvable"],[56,t,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,t,"unix",!1,"path"],[421,t,"ipfs"],[421,t,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,t,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,t,"memory"]],r.names={},r.codes={},r.table.map(s=>{const u=n.apply(null,s);return r.codes[u.code]=u,r.names[u.name]=u,null}),r.object=n;function n(s,u,l,f,a){return{code:s,size:u,name:l,resolvable:Boolean(f),path:Boolean(a)}}o.exports=r}}),require_encode=__commonJS({"node_modules/varint/encode.js"(e,o){init_node_globals(),o.exports=u;var r=128,t=127,n=~t,s=Math.pow(2,31);function u(l,f,a){if(Number.MAX_SAFE_INTEGER&&l>Number.MAX_SAFE_INTEGER)throw u.bytes=0,new RangeError("Could not encode varint");f=f||[],a=a||0;for(var c=a;l>=s;)f[a++]=l&255|r,l/=128;for(;l&n;)f[a++]=l&255|r,l>>>=7;return f[a]=l|0,u.bytes=a-c+1,f}}}),require_decode=__commonJS({"node_modules/varint/decode.js"(e,o){init_node_globals(),o.exports=n;var r=128,t=127;function n(s,u){var l=0,u=u||0,f=0,a=u,c,d=s.length;do{if(a>=d||f>49)throw n.bytes=0,new RangeError("Could not decode varint");c=s[a++],l+=f<28?(c&t)<<f:(c&t)*Math.pow(2,f),f+=7}while(c>=r);return n.bytes=a-u,l}}}),require_length=__commonJS({"node_modules/varint/length.js"(e,o){init_node_globals();var r=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),s=Math.pow(2,28),u=Math.pow(2,35),l=Math.pow(2,42),f=Math.pow(2,49),a=Math.pow(2,56),c=Math.pow(2,63);o.exports=function(d){return d<r?1:d<t?2:d<n?3:d<s?4:d<u?5:d<l?6:d<f?7:d<a?8:d<c?9:10}}}),require_varint=__commonJS({"node_modules/varint/index.js"(e,o){init_node_globals(),o.exports={encode:require_encode(),decode:require_decode(),encodingLength:require_length()}}}),concat_exports={};__export(concat_exports,{concat:()=>concat2});function concat2(e,o){o||(o=e.reduce((n,s)=>n+s.length,0));const r=new Uint8Array(o);let t=0;for(const n of e)r.set(n,t),t+=n.length;return r}var init_concat=__esm({"node_modules/uint8arrays/esm/src/concat.js"(){init_node_globals()}}),require_convert=__commonJS({"node_modules/multiaddr/src/convert.js"(e,o){init_node_globals();var r=require_ip(),t=require_protocols_table(),{CID:n}=(init_cid(),__toCommonJS(cid_exports)),{base32:s}=(init_base32(),__toCommonJS(base32_exports)),{base58btc:u}=(init_base58(),__toCommonJS(base58_exports)),l=(init_digest(),__toCommonJS(digest_exports)),f=require_varint(),{toString:a}=(init_to_string(),__toCommonJS(to_string_exports)),{fromString:c}=(init_from_string(),__toCommonJS(from_string_exports)),{concat:d}=(init_concat(),__toCommonJS(concat_exports));o.exports=h;function h(E,A){return A instanceof Uint8Array?h.toString(E,A):h.toBytes(E,A)}h.toString=function(A,C){switch(t(A).code){case 4:case 41:return p(C);case 6:case 273:case 33:case 132:return m(C).toString();case 53:case 54:case 55:case 56:case 400:case 777:return w(C);case 421:return b(C);case 444:return S(C);case 445:return S(C);default:return a(C,"base16")}},h.toBytes=function(A,C){switch(t(A).code){case 4:return g(C);case 41:return g(C);case 6:case 273:case 33:case 132:return _(parseInt(C,10));case 53:case 54:case 55:case 56:case 400:case 777:return v(C);case 421:return y(C);case 444:return T(C);case 445:return R(C);default:return c(C,"base16")}};function g(E){if(!r.isIP(E))throw new Error("invalid ip address");return r.toBytes(E)}function p(E){const A=r.toString(E);if(!A||!r.isIP(A))throw new Error("invalid ip address");return A}function _(E){const A=new ArrayBuffer(2);return new DataView(A).setUint16(0,E),new Uint8Array(A)}function m(E){return new DataView(E.buffer).getUint16(E.byteOffset)}function v(E){const A=c(E),C=Uint8Array.from(f.encode(A.length));return d([C,A],C.length+A.length)}function w(E){const A=f.decode(E);if(E=E.slice(f.decode.bytes),E.length!==A)throw new Error("inconsistent lengths");return a(E)}function y(E){let A;E[0]==="Q"||E[0]==="1"?A=l.decode(u.decode(`z${E}`)).bytes:A=n.parse(E).multihash.bytes;const C=Uint8Array.from(f.encode(A.length));return d([C,A],C.length+A.length)}function b(E){const A=f.decode(E),C=E.slice(f.decode.bytes);if(C.length!==A)throw new Error("inconsistent lengths");return a(C,"base58btc")}function T(E){const A=E.split(":");if(A.length!==2)throw new Error("failed to parse onion addr: "+A+" does not contain a port number");if(A[0].length!==16)throw new Error("failed to parse onion addr: "+A[0]+" not a Tor onion address.");const C=s.decode("b"+A[0]),I=parseInt(A[1],10);if(I<1||I>65536)throw new Error("Port number is not in range(1, 65536)");const P=_(I);return d([C,P],C.length+P.length)}function R(E){const A=E.split(":");if(A.length!==2)throw new Error("failed to parse onion addr: "+A+" does not contain a port number");if(A[0].length!==56)throw new Error("failed to parse onion addr: "+A[0]+" not a Tor onion3 address.");const C=s.decode("b"+A[0]),I=parseInt(A[1],10);if(I<1||I>65536)throw new Error("Port number is not in range(1, 65536)");const P=_(I);return d([C,P],C.length+P.length)}function S(E){const A=E.slice(0,E.length-2),C=E.slice(E.length-2),I=a(A,"base32"),P=m(C);return I+":"+P}}}),require_codec=__commonJS({"node_modules/multiaddr/src/codec.js"(e,o){init_node_globals();var r=require_convert(),t=require_protocols_table(),n=require_varint(),{concat:s}=(init_concat(),__toCommonJS(concat_exports)),{toString:u}=(init_to_string(),__toCommonJS(to_string_exports));o.exports={stringToStringTuples:l,stringTuplesToString:f,tuplesToStringTuples:c,stringTuplesToTuples:a,bytesToTuples:g,tuplesToBytes:d,bytesToString:p,stringToBytes:_,fromString:m,fromBytes:v,validateBytes:w,isValidBytes:y,cleanPath:b,ParseError:T,protoFromTuple:R,sizeForAddr:h};function l(S){const E=[],A=S.split("/").slice(1);if(A.length===1&&A[0]==="")return[];for(let C=0;C<A.length;C++){const I=A[C],P=t(I);if(P.size===0){E.push([I]);continue}if(C++,C>=A.length)throw T("invalid address: "+S);if(P.path){E.push([I,b(A.slice(C).join("/"))]);break}E.push([I,A[C]])}return E}function f(S){const E=[];return S.map(A=>{const C=R(A);return E.push(C.name),A.length>1&&E.push(A[1]),null}),b(E.join("/"))}function a(S){return S.map(E=>{Array.isArray(E)||(E=[E]);const A=R(E);return E.length>1?[A.code,r.toBytes(A.code,E[1])]:[A.code]})}function c(S){return S.map(E=>{const A=R(E);return E[1]?[A.code,r.toString(A.code,E[1])]:[A.code]})}function d(S){return v(s(S.map(E=>{const A=R(E);let C=Uint8Array.from(n.encode(A.code));return E.length>1&&(C=s([C,E[1]])),C})))}function h(S,E){return S.size>0?S.size/8:S.size===0?0:n.decode(E)+n.decode.bytes}function g(S){const E=[];let A=0;for(;A<S.length;){const C=n.decode(S,A),I=n.decode.bytes,P=t(C),O=h(P,S.slice(A+I));if(O===0){E.push([C]),A+=I;continue}const k=S.slice(A+I,A+I+O);if(A+=O+I,A>S.length)throw T("Invalid address Uint8Array: "+u(S,"base16"));E.push([C,k])}return E}function p(S){const E=g(S),A=c(E);return f(A)}function _(S){S=b(S);const E=l(S),A=a(E);return d(A)}function m(S){return _(S)}function v(S){const E=w(S);if(E)throw E;return Uint8Array.from(S)}function w(S){try{g(S)}catch(E){return E}}function y(S){return w(S)===void 0}function b(S){return"/"+S.trim().split("/").filter(E=>E).join("/")}function T(S){return new Error("Error parsing address: "+S)}function R(S){return t(S[0])}}}),equals_exports={};__export(equals_exports,{equals:()=>equals3});function equals3(e,o){if(e===o)return!0;if(e.byteLength!==o.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==o[r])return!1;return!0}var init_equals=__esm({"node_modules/uint8arrays/esm/src/equals.js"(){init_node_globals()}}),require_src=__commonJS({"node_modules/multiaddr/src/index.js"(e,o){init_node_globals();var r=require_codec(),t=require_protocols_table(),n=require_varint(),{CID:s}=(init_cid(),__toCommonJS(cid_exports)),{base58btc:u}=(init_base58(),__toCommonJS(base58_exports)),l=require_err_code(),f=Symbol.for("nodejs.util.inspect.custom"),{toString:a}=(init_to_string(),__toCommonJS(to_string_exports)),{equals:c}=(init_equals(),__toCommonJS(equals_exports)),d=new Map,h=Symbol.for("@multiformats/js-multiaddr/multiaddr"),g=class{constructor(_){if(_==null&&(_=""),Object.defineProperty(this,h,{value:!0}),_ instanceof Uint8Array)this.bytes=r.fromBytes(_);else if(typeof _=="string"){if(_.length>0&&_.charAt(0)!=="/")throw new Error(`multiaddr "${_}" must start with a "/"`);this.bytes=r.fromString(_)}else if(g.isMultiaddr(_))this.bytes=r.fromBytes(_.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const _={},m=this.toString().split("/");return _.family=m[1]==="ip4"?4:6,_.host=m[2],_.transport=m[3],_.port=parseInt(m[4]),_}protos(){return this.protoCodes().map(_=>Object.assign({},t(_)))}protoCodes(){const _=[],m=this.bytes;let v=0;for(;v<m.length;){const w=n.decode(m,v),y=n.decode.bytes,b=t(w);v+=r.sizeForAddr(b,m.slice(v+y))+y,_.push(w)}return _}protoNames(){return this.protos().map(_=>_.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){const _=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(_)}encapsulate(_){return _=new g(_),new g(this.toString()+_.toString())}decapsulate(_){const m=_.toString(),v=this.toString(),w=v.lastIndexOf(m);if(w<0)throw new Error("Address "+this+" does not contain subaddress: "+_);return new g(v.slice(0,w))}decapsulateCode(_){const m=this.tuples();for(let v=m.length-1;v>=0;v--)if(m[v][0]===_)return new g(r.tuplesToBytes(m.slice(0,v)));return this}getPeerId(){try{const m=this.stringTuples().filter(v=>v[0]===t.names.ipfs.code).pop();if(m&&m[1]){const v=m[1];return v[0]==="Q"||v[0]==="1"?a(u.decode(`z${v}`),"base58btc"):a(s.parse(v).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let _=null;try{_=this.stringTuples().filter(m=>!!t(m[0]).path)[0][1],_||(_=null)}catch{_=null}return _}equals(_){return c(this.bytes,_.bytes)}async resolve(){const _=this.protos().find(w=>w.resolvable);if(!_)return[this];const m=d.get(_.name);if(!m)throw l(new Error(`no available resolver for ${_.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await m(this)).map(w=>new g(w))}nodeAddress(){const _=this.protoCodes(),m=this.protoNames(),v=this.toString().split("/").slice(1);if(v.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(_[0]!==4&&_[0]!==41&&_[0]!==54&&_[0]!==55)throw new Error(`no protocol with name: "'${m[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(v[2]!=="tcp"&&v[2]!=="udp")throw new Error(`no protocol with name: "'${m[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:_[0]===41||_[0]===55?6:4,address:v[1],port:parseInt(v[3])}}isThinWaistAddress(_){const m=(_||this).protos();return!(m.length!==2||m[0].code!==4&&m[0].code!==41||m[1].code!==6&&m[1].code!==273)}static fromNodeAddress(_,m){if(!_)throw new Error("requires node address object");if(!m)throw new Error("requires transport protocol");let v;switch(_.family){case 4:v="ip4";break;case 6:v="ip6";break;default:throw Error(`Invalid addr family. Got '${_.family}' instead of 4 or 6`)}return new g("/"+[v,_.address,m,_.port].join("/"))}static isName(_){return g.isMultiaddr(_)?_.protos().some(m=>m.resolvable):!1}static isMultiaddr(_){return _ instanceof g||Boolean(_&&_[h])}[f](){return"<Multiaddr "+a(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+a(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};g.protocols=t,g.resolvers=d;function p(_){return new g(_)}o.exports={Multiaddr:g,multiaddr:p,protocols:t,resolvers:d}}}),require_src2=__commonJS({"node_modules/mafmt/src/index.js"(e,o){init_node_globals();var{Multiaddr:r}=require_src(),t=O("dns4"),n=O("dns6"),s=O("dnsaddr"),u=P(O("dns"),s,t,n),l=P(O("ip4"),O("ip6")),f=P(I(l,O("tcp")),I(u,O("tcp"))),a=I(l,O("udp")),c=I(a,O("utp")),d=I(a,O("quic")),h=P(I(f,O("ws")),I(u,O("ws"))),g=P(I(f,O("wss")),I(u,O("wss"))),p=P(I(f,O("http")),I(l,O("http")),I(u,O("http"))),_=P(I(f,O("https")),I(l,O("https")),I(u,O("https"))),m=P(I(h,O("p2p-webrtc-star"),O("p2p")),I(g,O("p2p-webrtc-star"),O("p2p")),I(h,O("p2p-webrtc-star")),I(g,O("p2p-webrtc-star"))),v=P(I(h,O("p2p-websocket-star"),O("p2p")),I(g,O("p2p-websocket-star"),O("p2p")),I(h,O("p2p-websocket-star")),I(g,O("p2p-websocket-star"))),w=P(I(p,O("p2p-webrtc-direct"),O("p2p")),I(_,O("p2p-webrtc-direct"),O("p2p")),I(p,O("p2p-webrtc-direct")),I(_,O("p2p-webrtc-direct"))),y=P(h,g,p,_,m,w,f,c,d,u),b=P(I(y,O("p2p-stardust"),O("p2p")),I(y,O("p2p-stardust"))),T=P(I(y,O("p2p")),m,w,O("p2p")),R=P(I(T,O("p2p-circuit"),T),I(T,O("p2p-circuit")),I(O("p2p-circuit"),T),I(y,O("p2p-circuit")),I(O("p2p-circuit"),y),O("p2p-circuit")),S=()=>P(I(R,S),R),E=S(),A=P(I(E,T,E),I(T,E),I(E,T),E,T);o.exports={DNS:u,DNS4:t,DNS6:n,DNSADDR:s,IP:l,TCP:f,UDP:a,QUIC:d,UTP:c,HTTP:p,HTTPS:_,WebSockets:h,WebSocketsSecure:g,WebSocketStar:v,WebRTCStar:m,WebRTCDirect:w,Reliable:y,Stardust:b,Circuit:E,P2P:A,IPFS:A};function C(k){function N(K){if(!r.isMultiaddr(K))try{K=new r(K)}catch{return!1}const U=k(K.protoNames());return U===null?!1:U===!0||U===!1?U:U.length===0}return N}function I(...k){function N(K){if(K.length<k.length)return null;let U=K;return k.some(L=>(U=typeof L=="function"?L().partialMatch(K):L.partialMatch(K),Array.isArray(U)&&(K=U),U===null)),U}return{toString:function(){return"{ "+k.join(" ")+" }"},input:k,matches:C(N),partialMatch:N}}function P(...k){function N(U){let L=null;return k.some(re=>{const Z=typeof re=="function"?re().partialMatch(U):re.partialMatch(U);return Z?(L=Z,!0):!1}),L}return{toString:function(){return"{ "+k.join(" ")+" }"},input:k,matches:C(N),partialMatch:N}}function O(k){const N=k;function K(L){let re;if(typeof L=="string"||L instanceof Uint8Array)try{re=new r(L)}catch{return!1}else re=L;const Z=re.protoNames();return Z.length===1&&Z[0]===N}function U(L){return L.length===0?null:L[0]===N?L.slice(1):null}return{toString:function(){return N},matches:K,partialMatch:U}}}}),require_url_browser=__commonJS({"node_modules/iso-url/src/url-browser.js"(e,o){init_node_globals();var r=typeof navigator!="undefined"&&navigator.product==="ReactNative";function t(){return r?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var n=self.URL,s=t(),u=class{constructor(f="",a=s){this.super=new n(f,a),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(f){this.super.hash=f}set host(f){this.super.host=f}set hostname(f){this.super.hostname=f}set href(f){this.super.href=f}set password(f){this.super.password=f}set pathname(f){this.super.pathname=f}set port(f){this.super.port=f}set protocol(f){this.super.protocol=f}set search(f){this.super.search=f}set username(f){this.super.username=f}static createObjectURL(f){return n.createObjectURL(f)}static revokeObjectURL(f){n.revokeObjectURL(f)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function l(f){if(typeof f=="string")return new n(f).toString();if(!(f instanceof n)){const a=f.username&&f.password?`${f.username}:${f.password}@`:"",c=f.auth?f.auth+"@":"",d=f.port?":"+f.port:"",h=f.protocol?f.protocol+"//":"",g=f.host||"",p=f.hostname||"",_=f.search||(f.query?"?"+f.query:""),m=f.hash||"",v=f.pathname||"",w=f.path||v+_;return`${h}${a||c}${g||p+d}${w}${m}`}}o.exports={URLWithLegacySupport:u,URLSearchParams:self.URLSearchParams,defaultBase:s,format:l}}}),require_relative=__commonJS({"node_modules/iso-url/src/relative.js"(e,o){init_node_globals();var{URLWithLegacySupport:r,format:t}=require_url_browser();o.exports=(n,s={},u={},l)=>{let f=s.protocol?s.protocol.replace(":",""):"http";f=(u[f]||l||f)+":";let a;try{a=new r(n)}catch{a={}}const c=Object.assign({},s,{protocol:f||a.protocol,host:s.host||a.host});return new r(n,t(c)).toString()}}}),require_iso_url=__commonJS({"node_modules/iso-url/index.js"(e,o){init_node_globals();var{URLWithLegacySupport:r,format:t,URLSearchParams:n,defaultBase:s}=require_url_browser(),u=require_relative();o.exports={URL:r,URLSearchParams:n,format:t,relative:u,defaultBase:s}}}),require_src3=__commonJS({"node_modules/is-ipfs/src/index.js"(e,o){init_node_globals();var{base58btc:r}=(init_base58(),__toCommonJS(base58_exports)),{base32:t}=(init_base32(),__toCommonJS(base32_exports)),n=(init_digest(),__toCommonJS(digest_exports)),{Multiaddr:s}=require_src(),u=require_src2(),{CID:l}=(init_cid(),__toCommonJS(cid_exports)),{URL:f}=require_iso_url(),{toString:a}=(init_to_string(),__toCommonJS(to_string_exports)),c=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,d=/^\/(ip[fn]s)\/([^/?#]+)/,h=1,g=2,p=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,_=1,m=2,v=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function w(L){const re=C(L);try{n.decode(r.decode("z"+re))}catch{return!1}return!0}function y(L){try{t.decode(L)}catch{return!1}return!0}function b(L){try{return typeof L=="string"?Boolean(l.parse(L)):L instanceof Uint8Array?Boolean(l.decode(L)):Boolean(l.asCID(L))}catch{return!1}}function T(L){if(!L)return!1;if(s.isMultiaddr(L))return!0;try{return new s(L),!0}catch{return!1}}function R(L){return T(L)&&u.P2P.matches(L)}function S(L,re,Z=h,V=g){const ee=C(L);if(!ee)return!1;const fe=ee.match(re);if(!fe||fe[Z]!=="ipfs")return!1;let _e=fe[V];return _e&&re===p&&(_e=_e.toLowerCase()),b(_e)}function E(L,re,Z=h,V=g){const ee=C(L);if(!ee)return!1;const fe=ee.match(re);if(!fe||fe[Z]!=="ipns")return!1;let _e=fe[V];if(_e&&re===p){if(_e=_e.toLowerCase(),b(_e))return!0;try{!_e.includes(".")&&_e.includes("-")&&(_e=_e.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:ce}=new f(`http://${_e}`);return v.test(ce)}catch{return!1}}return!0}function A(L){return typeof L=="string"}function C(L){return L instanceof Uint8Array?a(L,"base58btc"):A(L)?L:!1}var I=L=>S(L,p,m,_),P=L=>E(L,p,m,_),O=L=>I(L)||P(L),k=L=>S(L,c)||I(L),N=L=>E(L,c)||P(L),K=L=>k(L)||N(L)||O(L),U=L=>S(L,d)||E(L,d);o.exports={multihash:w,multiaddr:T,peerMultiaddr:R,cid:b,base32cid:L=>y(L)&&b(L),ipfsSubdomain:I,ipnsSubdomain:P,subdomain:O,subdomainGatewayPattern:p,ipfsUrl:k,ipnsUrl:N,url:K,pathGatewayPattern:c,ipfsPath:L=>S(L,d),ipnsPath:L=>E(L,d),path:U,pathPattern:d,urlOrPath:L=>K(L)||U(L),cidPath:L=>A(L)&&!b(L)&&S(`/ipfs/${L}`,d)}}}),urlAlphabet,init_url_alphabet=__esm({"node_modules/nanoid/url-alphabet/index.js"(){init_node_globals(),urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}}),index_prod_exports={};__export(index_prod_exports,{customAlphabet:()=>customAlphabet,customRandom:()=>customRandom,nanoid:()=>nanoid,random:()=>random,urlAlphabet:()=>urlAlphabet});var random,customRandom,customAlphabet,nanoid,init_index_prod=__esm({"node_modules/nanoid/index.prod.js"(){init_node_globals(),init_url_alphabet(),random=e=>crypto.getRandomValues(new Uint8Array(e)),customRandom=(e,o,r)=>{let t=(2<<Math.log(e.length-1)/Math.LN2)-1,n=-~(1.6*t*o/e.length);return()=>{let s="";for(;;){let u=r(n),l=n;for(;l--;)if(s+=e[u[l]&t]||"",s.length===o)return s}}},customAlphabet=(e,o)=>customRandom(e,o,random),nanoid=(e=21)=>{let o="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let t=r[e]&63;t<36?o+=t.toString(36):t<62?o+=(t-26).toString(36).toUpperCase():t<63?o+="_":o+="-"}return o}}}),key_exports={};__export(key_exports,{Key:()=>Key});function namespaceType(e){const o=e.split(":");return o.length<2?"":o.slice(0,-1).join(":")}function namespaceValue(e){const o=e.split(":");return o[o.length-1]}function flatten(e){return[].concat(...e)}var pathSepS,pathSepB,pathSep,Key,init_key=__esm({"node_modules/interface-datastore/esm/src/key.js"(){init_node_globals(),init_index_prod(),init_to_string(),init_from_string(),pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0],Key=class{constructor(e,o){if(typeof e=="string")this._buf=fromString3(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(o==null&&(o=!0),o&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString3(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):e.uint8Array?new Key(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const o=this.list(),r=e.list();for(let t=0;t<o.length;t++){if(r.length<t+1)return!1;const n=o[t],s=r[t];if(n<s)return!0;if(n>s)return!1}return o.length<r.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(o=>o.namespaces()))])}}}}),require_time_browser=__commonJS({"node_modules/retimer/time-browser.js"(e,o){init_node_globals(),o.exports=function(){return Date.now()}}}),require_retimer=__commonJS({"node_modules/retimer/retimer.js"(e,o){init_node_globals();var r=require_time_browser(),t=class{constructor(s,u,l){const f=this;this._started=r(),this._rescheduled=0,this._scheduled=u,this._args=l,this._triggered=!1,this._timerWrapper=()=>{f._rescheduled>0?(f._scheduled=f._rescheduled-(r()-f._started),f._schedule(f._scheduled)):(f._triggered=!0,s.apply(null,f._args))},this._timer=setTimeout(this._timerWrapper,u)}reschedule(s){s||(s=this._scheduled);const u=r();u+s-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(s)):this._triggered?this._schedule(s):(this._started=u,this._rescheduled=s)}_schedule(s){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=s,this._timer=setTimeout(this._timerWrapper,s)}clear(){clearTimeout(this._timer)}};function n(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let s;if(arguments.length>0){s=new Array(arguments.length-2);for(var u=0;u<s.length;u++)s[u]=arguments[u+2]}return new t(arguments[0],arguments[1],s)}o.exports=n}}),require_timeout_abort_controller=__commonJS({"node_modules/timeout-abort-controller/index.js"(e,o){init_node_globals();var{AbortController:r}=globalThis,t=require_retimer(),n=class extends r{constructor(s){super();this._ms=s,this._timer=t(()=>this.abort(),s),Object.setPrototypeOf(this,n.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=t(()=>this.abort(),this._ms)}};o.exports={TimeoutController:n}}}),require_any_signal=__commonJS({"node_modules/any-signal/index.js"(e,o){init_node_globals();var{AbortController:r}=globalThis;function t(n){const s=new r;function u(){s.abort();for(const l of n)!l||!l.removeEventListener||l.removeEventListener("abort",u)}for(const l of n)if(!(!l||!l.addEventListener)){if(l.aborted){u();break}l.addEventListener("abort",u)}return s.signal}o.exports=t,o.exports.anySignal=t}});function parse(e="",o="ms"){var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(durationRE,function(t,n,s){s=unitRatio(s),s&&(r=(r||0)+parseFloat(n,10)*s)}),r&&r/(unitRatio(o)||1)}function unitRatio(e){return parse[e]||parse[e.toLowerCase().replace(/s$/,"")]}var durationRE,parse_duration_default,init_parse_duration=__esm({"node_modules/parse-duration/index.mjs"(){init_node_globals(),durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig,parse.nanosecond=parse.ns=1/1e6,parse.\u00B5s=parse.\u03BCs=parse.us=parse.microsecond=1/1e3,parse.millisecond=parse.ms=parse[""]=1,parse.second=parse.sec=parse.s=parse.ms*1e3,parse.minute=parse.min=parse.m=parse.s*60,parse.hour=parse.hr=parse.h=parse.m*60,parse.day=parse.d=parse.h*24,parse.week=parse.wk=parse.w=parse.d*7,parse.month=parse.b=parse.d*(365.25/12),parse.year=parse.yr=parse.y=parse.d*365.25,parse_duration_default=parse}}),TimeoutError,init_errors=__esm({"node_modules/ipfs-core-utils/esm/src/errors.js"(){init_node_globals(),TimeoutError=class extends Error{constructor(e="request timed out"){super(e);this.name="TimeoutError",this.code=TimeoutError.code}},TimeoutError.code="ERR_TIMEOUT"}}),with_timeout_option_exports={};__export(with_timeout_option_exports,{withTimeoutOption:()=>withTimeoutOption});function withTimeoutOption(e,o){return(...r)=>{const t=r[o==null?r.length-1:o];if(!t||!t.timeout)return e(...r);const n=typeof t.timeout=="string"?parse_duration_default(t.timeout):t.timeout,s=new import_timeout_abort_controller.TimeoutController(n);t.signal=(0,import_any_signal.anySignal)([t.signal,s.signal]);const u=e(...r),l=new Promise((c,d)=>{s.signal.addEventListener("abort",()=>{d(new TimeoutError)})}),f=Date.now(),a=()=>{if(s.signal.aborted)throw new TimeoutError;if(Date.now()-f>n)throw s.abort(),new TimeoutError};return u[Symbol.asyncIterator]?async function*(){const c=u[Symbol.asyncIterator]();try{for(;;){const{value:d,done:h}=await Promise.race([c.next(),l]);if(h)break;a(),yield d}}catch(d){throw a(),d}finally{s.clear(),c.return&&c.return()}}():(async()=>{try{const c=await Promise.race([u,l]);return a(),c}catch(c){throw a(),c}finally{s.clear()}})()}}var import_timeout_abort_controller,import_any_signal,init_with_timeout_option=__esm({"node_modules/ipfs-core-utils/esm/src/with-timeout-option.js"(){init_node_globals(),import_timeout_abort_controller=__toESM(require_timeout_abort_controller(),1),import_any_signal=__toESM(require_any_signal(),1),init_parse_duration(),init_errors()}}),to_cid_and_path_exports={};__export(to_cid_and_path_exports,{toCidAndPath:()=>toCidAndPath});function toCidAndPath(e){if(e instanceof Uint8Array)try{e=CID.decode(e)}catch(n){throw(0,import_err_code2.default)(n,"ERR_INVALID_CID")}let o=CID.asCID(e);if(o)return{cid:o,path:void 0};e=e.toString(),e.startsWith(IPFS_PREFIX)&&(e=e.substring(IPFS_PREFIX.length));const r=e.split("/");let t;try{o=CID.parse(r.shift()||"")}catch(n){throw(0,import_err_code2.default)(n,"ERR_INVALID_CID")}return r.length&&(t=`/${r.join("/")}`),{cid:o,path:t}}var import_err_code2,IPFS_PREFIX,init_to_cid_and_path=__esm({"node_modules/ipfs-core-utils/esm/src/to-cid-and-path.js"(){init_node_globals(),init_cid(),import_err_code2=__toESM(require_err_code(),1),IPFS_PREFIX="/ipfs/"}}),require_utils2=__commonJS({"node_modules/ipfs-core/cjs/src/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src3(),r=(init_cid(),__toCommonJS(cid_exports)),t=(init_key(),__toCommonJS(key_exports)),n=require_err_code(),s=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),u=(init_to_cid_and_path(),__toCommonJS(to_cid_and_path_exports)),l=(init_src2(),__toCommonJS(src_exports2));function f(E){return E&&typeof E=="object"&&"default"in E?E:{default:E}}function a(E){if(E&&E.__esModule)return E;var A=Object.create(null);return E&&Object.keys(E).forEach(function(C){if(C!=="default"){var I=Object.getOwnPropertyDescriptor(E,C);Object.defineProperty(A,C,I.get?I:{enumerable:!0,get:function(){return E[C]}})}}),A.default=E,Object.freeze(A)}var c=f(o),d=f(n),h=a(l),g="ERR_BAD_PATH",p="This command must be run in online mode. Try running 'ipfs daemon' first.",_=new t.Key("/local/filesroot"),m=262144,v=174,w=E=>{if(r.CID.asCID(E))return`/ipfs/${E}`;const C=E.toString();try{return`/ipfs/${r.CID.parse(C)}`}catch{}if(c.default.path(C))return C;throw d.default(new Error(`invalid path: ${E}`),g)},y=E=>E instanceof Uint8Array?r.CID.decode(E).toString():(E=E.toString(),E.indexOf("/ipfs/")===0&&(E=E.substring("/ipfs/".length)),E.charAt(E.length-1)==="/"&&(E=E.substring(0,E.length-1)),E),b=async function(E,A,C,I={}){const{cid:P,path:O}=u.toCidAndPath(C);O&&(I.path=O);let k=P,N=I.path||"";if(N.startsWith("/")&&(N=N.substring(1)),I.path)try{for await(const{value:K,remainderPath:U}of S(P,I.path,A,E,{signal:I.signal})){if(!r.CID.asCID(K))break;N=U,k=K}}catch(K){throw K.message.startsWith("Object has no property")&&(K.message=`no link named "${N.split("/")[0]}" under ${k}`,K.code="ERR_NO_LINK"),K}return{cid:k,remainderPath:N||""}},T=E=>{if(E.type!=="file"&&E.type!=="directory"&&E.type!=="raw")throw new Error(`Unknown node type '${E.type}'`);const A={cid:E.cid,path:E.path,name:E.name,size:E.size,type:"file"};return E.type==="directory"&&(A.type="dir"),E.type==="file"&&(A.size=E.unixfs.fileSize()),(E.type==="file"||E.type==="directory")&&(A.mode=E.unixfs.mode,E.unixfs.mtime!==void 0&&(A.mtime=E.unixfs.mtime)),A},R=s.withTimeoutOption(async(E,A)=>await E),S=async function*(E,A,C,I,P){const O=async U=>{const L=await C.getCodec(U.code),re=await I.blocks.get(U,P);return L.decode(re)},k=A.split("/").filter(Boolean);let N=await O(E),K=E;for(;k.length;){const U=k.shift();if(!U)throw d.default(new Error(`Could not resolve path "${A}"`),"ERR_INVALID_PATH");if(E.code===h.code&&Array.isArray(N.Links)){const L=N.Links.find(re=>re.Name===U);if(L){yield{value:L.Hash,remainderPath:k.join("/")},N=await O(L.Hash),K=L.Hash;continue}}if(Object.prototype.hasOwnProperty.call(N,U))N=N[U],yield{value:N,remainderPath:k.join("/")};else throw d.default(new Error(`no link named "${U}" under ${K}`),"ERR_NO_LINK");r.CID.asCID(N)&&(K=N,N=await O(N))}yield{value:N,remainderPath:""}};e.MFS_MAX_CHUNK_SIZE=m,e.MFS_MAX_LINKS=v,e.MFS_ROOT_KEY=_,e.OFFLINE_ERROR=p,e.mapFile=T,e.normalizeCidPath=y,e.normalizePath=w,e.resolve=S,e.resolvePath=b,e.withTimeout=R}}),require_service2=__commonJS({"node_modules/ipfs-core/cjs/src/utils/service.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_errors(),r=require_utils2(),t=class{static create({start:n,stop:s}){return new t(n,s)}static async start(n,s){const{state:u,activate:l}=n;switch(u.status){case"stopped":try{const f=l(s);n.state={status:"starting",ready:f};const a=await f;return n.state={status:"started",value:a},a}catch(f){throw n.state={status:"stopped"},f}case"starting":throw new o.AlreadyStartingError;case"started":throw new o.AlreadyStartedError;case"stopping":return await u.ready,await t.start(n,s);default:return t.panic(n)}}static async stop(n){const{state:s,deactivate:u}=n;switch(s.status){case"stopped":break;case"starting":{try{await s.ready}catch{}return await t.stop(n)}case"stopping":return await s.ready;case"started":{u&&await u(s.value),n.state={status:"stopped"};break}default:t.panic(s)}}static try({state:n}){switch(n.status){case"started":return n.value;default:return null}}static async use({state:n},s){switch(n.status){case"started":return n.value;case"starting":return await r.withTimeout(n.ready,s);default:throw new o.NotStartedError}}static panic({state:n}){const s=JSON.stringify({status:n.status});throw RangeError(`Service in invalid state ${s}, should never happen if you see this please report a bug`)}constructor(n,s){this.activate=n,this.deactivate=s,this.state={status:"stopped"}}async use(n){return await t.use(this,n)}try(){return t.try(this)}};e.Service=t}}),require_start=__commonJS({"node_modules/ipfs-core/cjs/src/components/start.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_service2();function r({network:t,preload:n,peerId:s,keychain:u,repo:l,ipns:f,mfsPreload:a,print:c,hashers:d,options:h}){return async()=>{const{libp2p:p}=await o.Service.start(t,{peerId:s,repo:l,print:c,hashers:d,options:h});await Promise.all([f.startOnline({keychain:u,libp2p:p,peerId:s,repo:l}),n.start(),a.start()])}}e.createStart=r}}),require_stop=__commonJS({"node_modules/ipfs-core/cjs/src/components/stop.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_service2();function r({network:t,preload:n,ipns:s,repo:u,mfsPreload:l}){return async()=>{await Promise.all([n.stop(),s.stop(),l.stop()]),await o.Service.stop(t),await u.close()}}e.createStop=r}}),require_hashlru=__commonJS({"node_modules/hashlru/index.js"(e,o){init_node_globals(),o.exports=function(r){if(!r)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,n=Object.create(null),s=Object.create(null);function u(l,f){n[l]=f,t++,t>=r&&(t=0,s=n,n=Object.create(null))}return{has:function(l){return n[l]!==void 0||s[l]!==void 0},remove:function(l){n[l]!==void 0&&(n[l]=void 0),s[l]!==void 0&&(s[l]=void 0)},get:function(l){var f=n[l];if(f!==void 0)return f;if((f=s[l])!==void 0)return u(l,f),f},set:function(l,f){n[l]!==void 0?n[l]=f:u(l,f)},clear:function(){n=Object.create(null),s=Object.create(null)}}}}}),import_hashlru,TLRU,init_tlru=__esm({"node_modules/ipfs-core-config/esm/src/utils/tlru.js"(){init_node_globals(),import_hashlru=__toESM(require_hashlru(),1),TLRU=class{constructor(e){this.lru=(0,import_hashlru.default)(e)}get(e){const o=this.lru.get(e);if(o){if(o.expire&&o.expire<Date.now()){this.lru.remove(e);return}return o.value}}set(e,o,r){this.lru.set(e,{value:o,expire:Date.now()+r})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}}}),require_eventemitter3=__commonJS({"node_modules/eventemitter3/index.js"(e,o){init_node_globals();var r=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(a,c,d){this.fn=a,this.context=c,this.once=d||!1}function u(a,c,d,h,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,h||a,g),_=t?t+c:c;return a._events[_]?a._events[_].fn?a._events[_]=[a._events[_],p]:a._events[_].push(p):(a._events[_]=p,a._eventsCount++),a}function l(a,c){--a._eventsCount==0?a._events=new n:delete a._events[c]}function f(){this._events=new n,this._eventsCount=0}f.prototype.eventNames=function(){var c=[],d,h;if(this._eventsCount===0)return c;for(h in d=this._events)r.call(d,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},f.prototype.listeners=function(c){var d=t?t+c:c,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,p=h.length,_=new Array(p);g<p;g++)_[g]=h[g].fn;return _},f.prototype.listenerCount=function(c){var d=t?t+c:c,h=this._events[d];return h?h.fn?1:h.length:0},f.prototype.emit=function(c,d,h,g,p,_){var m=t?t+c:c;if(!this._events[m])return!1;var v=this._events[m],w=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,g),!0;case 5:return v.fn.call(v.context,d,h,g,p),!0;case 6:return v.fn.call(v.context,d,h,g,p,_),!0}for(b=1,y=new Array(w-1);b<w;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var T=v.length,R;for(b=0;b<T;b++)switch(v[b].once&&this.removeListener(c,v[b].fn,void 0,!0),w){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,h);break;case 4:v[b].fn.call(v[b].context,d,h,g);break;default:if(!y)for(R=1,y=new Array(w-1);R<w;R++)y[R-1]=arguments[R];v[b].fn.apply(v[b].context,y)}}return!0},f.prototype.on=function(c,d,h){return u(this,c,d,h,!1)},f.prototype.once=function(c,d,h){return u(this,c,d,h,!0)},f.prototype.removeListener=function(c,d,h,g){var p=t?t+c:c;if(!this._events[p])return this;if(!d)return l(this,p),this;var _=this._events[p];if(_.fn)_.fn===d&&(!g||_.once)&&(!h||_.context===h)&&l(this,p);else{for(var m=0,v=[],w=_.length;m<w;m++)(_[m].fn!==d||g&&!_[m].once||h&&_[m].context!==h)&&v.push(_[m]);v.length?this._events[p]=v.length===1?v[0]:v:l(this,p)}return this},f.prototype.removeAllListeners=function(c){var d;return c?(d=t?t+c:c,this._events[d]&&l(this,d)):(this._events=new n,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=t,f.EventEmitter=f,typeof o!="undefined"&&(o.exports=f)}}),require_p_finally=__commonJS({"node_modules/p-finally/index.js"(e,o){init_node_globals(),o.exports=(r,t)=>(t=t||(()=>{}),r.then(n=>new Promise(s=>{s(t())}).then(()=>n),n=>new Promise(s=>{s(t())}).then(()=>{throw n})))}}),require_p_timeout=__commonJS({"node_modules/p-queue/node_modules/p-timeout/index.js"(e,o){init_node_globals();var r=require_p_finally(),t=class extends Error{constructor(s){super(s);this.name="TimeoutError"}},n=(s,u,l)=>new Promise((f,a)=>{if(typeof u!="number"||u<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(u===1/0){f(s);return}const c=setTimeout(()=>{if(typeof l=="function"){try{f(l())}catch(g){a(g)}return}const d=typeof l=="string"?l:`Promise timed out after ${u} milliseconds`,h=l instanceof Error?l:new t(d);typeof s.cancel=="function"&&s.cancel(),a(h)},u);r(s.then(f,a),()=>{clearTimeout(c)})});o.exports=n,o.exports.default=n,o.exports.TimeoutError=t}}),require_lower_bound=__commonJS({"node_modules/p-queue/dist/lower-bound.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(r,t,n){let s=0,u=r.length;for(;u>0;){const l=u/2|0;let f=s+l;n(r[f],t)<=0?(s=++f,u-=l+1):u=l}return s}e.default=o}}),require_priority_queue=__commonJS({"node_modules/p-queue/dist/priority-queue.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_lower_bound(),r=class{constructor(){this._queue=[]}enqueue(t,n){n=Object.assign({priority:0},n);const s={priority:n.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=n.priority){this._queue.push(s);return}const u=o.default(this._queue,s,(l,f)=>f.priority-l.priority);this._queue.splice(u,0,s)}dequeue(){const t=this._queue.shift();return t==null?void 0:t.run}filter(t){return this._queue.filter(n=>n.priority===t.priority).map(n=>n.run)}get size(){return this._queue.length}};e.default=r}}),require_dist=__commonJS({"node_modules/p-queue/dist/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_eventemitter3(),r=require_p_timeout(),t=require_priority_queue(),n=()=>{},s=new r.TimeoutError,u=class extends o{constructor(l){var f,a,c,d;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,l=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},l),!(typeof l.intervalCap=="number"&&l.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(f=l.intervalCap)===null||f===void 0?void 0:f.toString())!==null&&a!==void 0?a:""}\` (${typeof l.intervalCap})`);if(l.interval===void 0||!(Number.isFinite(l.interval)&&l.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(d=(c=l.interval)===null||c===void 0?void 0:c.toString())!==null&&d!==void 0?d:""}\` (${typeof l.interval})`);this._carryoverConcurrencyCount=l.carryoverConcurrencyCount,this._isIntervalIgnored=l.intervalCap===1/0||l.interval===0,this._intervalCap=l.intervalCap,this._interval=l.interval,this._queue=new l.queueClass,this._queueClass=l.queueClass,this.concurrency=l.concurrency,this._timeout=l.timeout,this._throwOnTimeout=l.throwOnTimeout===!0,this._isPaused=l.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const l=Date.now();if(this._intervalId===void 0){const f=this._intervalEnd-l;if(f<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},f)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const l=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const f=this._queue.dequeue();return f?(this.emit("active"),f(),l&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(l){if(!(typeof l=="number"&&l>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${l}\` (${typeof l})`);this._concurrency=l,this._processQueue()}async add(l,f={}){return new Promise((a,c)=>{const d=async()=>{this._pendingCount++,this._intervalCount++;try{const h=this._timeout===void 0&&f.timeout===void 0?l():r.default(Promise.resolve(l()),f.timeout===void 0?this._timeout:f.timeout,()=>{(f.throwOnTimeout===void 0?this._throwOnTimeout:f.throwOnTimeout)&&c(s)});a(await h)}catch(h){c(h)}this._next()};this._queue.enqueue(d,f),this._tryToStartAnother(),this.emit("add")})}async addAll(l,f){return Promise.all(l.map(async a=>this.add(a,f)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(l=>{const f=this._resolveEmpty;this._resolveEmpty=()=>{f(),l()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(l=>{const f=this._resolveIdle;this._resolveIdle=()=>{f(),l()}})}get size(){return this._queue.size}sizeBy(l){return this._queue.filter(l).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(l){this._timeout=l}};e.default=u}}),require_error=__commonJS({"node_modules/ipfs-utils/src/http/error.js"(e){init_node_globals();var o=class extends Error{constructor(n="Request timed out"){super(n);this.name="TimeoutError"}};e.TimeoutError=o;var r=class extends Error{constructor(n="The operation was aborted."){super(n);this.name="AbortError"}};e.AbortError=r;var t=class extends Error{constructor(n){super(n.statusText);this.name="HTTPError",this.response=n}};e.HTTPError=t}}),require_index_es=__commonJS({"(disabled):node_modules/electron-fetch/lib/index.es.js"(){init_node_globals()}}),require_browser3=__commonJS({"node_modules/node-fetch/browser.js"(e,o){init_node_globals();var r=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof t!="undefined")return t;throw new Error("unable to locate global object")},t=r();o.exports=e=t.fetch,t.fetch&&(e.default=t.fetch.bind(t)),e.Headers=t.Headers,e.Request=t.Request,e.Response=t.Response}}),require_src4=__commonJS({"node_modules/native-fetch/src/index.js"(e,o){init_node_globals(),globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?o.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:o.exports={default:require_browser3().default,Headers:require_browser3().Headers,Request:require_browser3().Request,Response:require_browser3().Response}}}),require_fetch=__commonJS({"node_modules/ipfs-utils/src/fetch.js"(e,o){init_node_globals();var{isElectronMain:r}=require_env();r?o.exports=require_index_es():o.exports=require_src4()}}),require_fetch_browser=__commonJS({"node_modules/ipfs-utils/src/http/fetch.browser.js"(e,o){init_node_globals();var{TimeoutError:r,AbortError:t}=require_error(),{Response:n,Request:s,Headers:u,default:l}=require_fetch(),f=(g,p={})=>{const _=new XMLHttpRequest;_.open(p.method||"GET",g.toString(),!0);const{timeout:m,headers:v}=p;if(m&&m>0&&m<1/0&&(_.timeout=m),p.overrideMimeType!=null&&_.overrideMimeType(p.overrideMimeType),v)for(const[w,y]of new u(v))_.setRequestHeader(w,y);return p.signal&&(p.signal.onabort=()=>_.abort()),p.onUploadProgress&&(_.upload.onprogress=p.onUploadProgress),_.responseType="arraybuffer",new Promise((w,y)=>{const b=T=>{switch(T.type){case"error":{w(n.error());break}case"load":{w(new h(_.responseURL,_.response,{status:_.status,statusText:_.statusText,headers:d(_.getAllResponseHeaders())}));break}case"timeout":{y(new r);break}case"abort":{y(new t);break}}};_.onerror=b,_.onload=b,_.ontimeout=b,_.onabort=b,_.send(p.body)})},a=l,c=(g,p={})=>p.onUploadProgress!=null?f(g,p):a(g,p),d=g=>{const p=new u;for(const _ of g.trim().split(/[\r\n]+/)){const m=_.indexOf(": ");m>0&&p.set(_.slice(0,m),_.slice(m+1))}return p},h=class extends n{constructor(g,p,_){super(p,_);Object.defineProperty(this,"url",{value:g})}};o.exports={fetch:c,Request:s,Headers:u}}}),require_http=__commonJS({"node_modules/ipfs-utils/src/http.js"(e,o){init_node_globals();var{fetch:r,Request:t,Headers:n}=require_fetch_browser(),{TimeoutError:s,HTTPError:u}=require_error(),l=require_merge_options().bind({ignoreUndefined:!0}),{URL:f,URLSearchParams:a}=require_iso_url(),c=require_any_signal(),d=(y,b,T)=>{if(b===void 0)return y;const R=Date.now(),S=()=>Date.now()-R>=b;return new Promise((E,A)=>{const C=setTimeout(()=>{S()&&(A(new s),T.abort())},b),I=P=>k=>{if(clearTimeout(C),S()){A(new s);return}P(k)};y.then(I(E),I(A))})},h={throwHttpErrors:!0,credentials:"same-origin"},g=class{constructor(y={}){this.opts=l(h,y)}async fetch(y,b={}){const T=l(this.opts,b),R=new n(T.headers);if(typeof y!="string"&&!(y instanceof f||y instanceof t))throw new TypeError("`resource` must be a string, URL, or Request");const S=new f(y.toString(),T.base),{searchParams:E,transformSearchParams:A,json:C}=T;E&&(typeof A=="function"?S.search=A(new a(T.searchParams)):S.search=new a(T.searchParams)),C&&(T.body=JSON.stringify(T.json),R.set("content-type","application/json"));const I=new AbortController,P=c([I.signal,T.signal]),O=await d(r(S.toString(),$e(Re({},T),{signal:P,timeout:void 0,headers:R})),T.timeout,I);if(!O.ok&&T.throwHttpErrors)throw T.handleError&&await T.handleError(O),new u(O);return O.iterator=function(){return _(O.body)},O.ndjson=async function*(){for await(const k of p(O.iterator()))b.transform?yield b.transform(k):yield k},O}post(y,b={}){return this.fetch(y,$e(Re({},b),{method:"POST"}))}get(y,b={}){return this.fetch(y,$e(Re({},b),{method:"GET"}))}put(y,b={}){return this.fetch(y,$e(Re({},b),{method:"PUT"}))}delete(y,b={}){return this.fetch(y,$e(Re({},b),{method:"DELETE"}))}options(y,b={}){return this.fetch(y,$e(Re({},b),{method:"OPTIONS"}))}},p=async function*(y){const b=new TextDecoder;let T="";for await(const R of y){T+=b.decode(R,{stream:!0});const S=T.split(/\r?\n/);for(let E=0;E<S.length-1;E++){const A=S[E].trim();A.length>0&&(yield JSON.parse(A))}T=S[S.length-1]}T+=b.decode(),T=T.trim(),T.length!==0&&(yield JSON.parse(T))},_=y=>{if(w(y)){const b=y[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:b.next.bind(b),return(T){return y.destroy(),typeof b.return=="function"?b.return():Promise.resolve({done:!0,value:T})}}}}}if(v(y)){const b=y.getReader();return async function*(){try{for(;;){const{done:T,value:R}=await b.read();if(T)return;R&&(yield R)}}finally{b.releaseLock()}}()}if(m(y))return y;throw new TypeError("Body can't be converted to AsyncIterable")},m=y=>typeof y=="object"&&y!==null&&typeof y[Symbol.asyncIterator]=="function",v=y=>y&&typeof y.getReader=="function",w=y=>Object.prototype.hasOwnProperty.call(y,"readable")&&Object.prototype.hasOwnProperty.call(y,"writable");g.HTTPError=u,g.TimeoutError=s,g.streamToAsyncIterator=_,g.post=(y,b)=>new g(b).post(y,b),g.get=(y,b)=>new g(b).get(y,b),g.put=(y,b)=>new g(b).put(y,b),g.delete=(y,b)=>new g(b).delete(y,b),g.options=(y,b)=>new g(b).options(y,b),o.exports=g}}),dns_browser_exports={};__export(dns_browser_exports,{resolveDnslink:()=>resolveDnslink});async function resolveDnslink(e,o){return(async(t,n={})=>{const s=new URLSearchParams(n);s.set("arg",t);const u=s.toString();if(!n.nocache&&cache.has(u)){const f=cache.get(u);return ipfsPath(f)}const l=await httpQueue.add(async()=>{const f=await import_http.default.get("https://ipfs.io/api/v0/dns",{searchParams:s}),a=new URL(f.url).search.slice(1),c=await f.json();return cache.set(a,c,ttl),c});return ipfsPath(l)})(e,o)}var import_p_queue,import_http,cache,ttl,Queue,httpQueue,ipfsPath,init_dns_browser=__esm({"node_modules/ipfs-core-config/esm/src/dns.browser.js"(){init_node_globals(),init_tlru(),import_p_queue=__toESM(require_dist(),1),import_http=__toESM(require_http(),1),cache=new TLRU(1e3),ttl=60*1e3,Queue=import_p_queue.default.default?import_p_queue.default.default:import_p_queue.default,httpQueue=new Queue({concurrency:4}),ipfsPath=e=>{if(e.Path)return e.Path;throw new Error(e.Message)}}}),require_dns=__commonJS({"node_modules/ipfs-core/cjs/src/components/dns.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_dns_browser(),__toCommonJS(dns_browser_exports)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t(s){return s.endsWith(".eth")&&(s=s.replace(/.eth$/,".eth.link")),s}function n(){const s=async(u,l={recursive:!0})=>{if(typeof u!="string")throw new Error("Invalid arguments, domain must be a string");return u=t(u),o.resolveDnslink(u,l)};return r.withTimeoutOption(s)}e.createDns=n}}),require_is_online=__commonJS({"node_modules/ipfs-core/cjs/src/components/is-online.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o({network:r}){return()=>{const t=r.try();return t!=null&&Boolean(t.libp2p.isStarted())}}e.createIsOnline=o}}),require_keys=__commonJS({"node_modules/libp2p-crypto/src/keys/keys.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-crypto-keys"]||(r.roots["libp2p-crypto-keys"]={});u.KeyType=function(){var l={},f=Object.create(l);return f[l[0]="RSA"]=0,f[l[1]="Ed25519"]=1,f[l[2]="Secp256k1"]=2,f}(),u.PublicKey=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.Type=0,l.prototype.Data=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),c.uint32(8).int32(a.Type),c.uint32(18).bytes(a.Data),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.PublicKey;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.Type=a.int32();break;case 2:h.Data=a.bytes();break;default:a.skipType(g&7);break}}if(!h.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:h});if(!h.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:h});return h},l.fromObject=function(a){if(a instanceof u.PublicKey)return a;var c=new u.PublicKey;switch(a.Type){case"RSA":case 0:c.Type=0;break;case"Ed25519":case 1:c.Type=1;break;case"Secp256k1":case 2:c.Type=2;break}return a.Data!=null&&(typeof a.Data=="string"?s.base64.decode(a.Data,c.Data=s.newBuffer(s.base64.length(a.Data)),0):a.Data.length&&(c.Data=a.Data)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.Type=c.enums===String?"RSA":0,c.bytes===String?d.Data="":(d.Data=[],c.bytes!==Array&&(d.Data=s.newBuffer(d.Data)))),a.Type!=null&&a.hasOwnProperty("Type")&&(d.Type=c.enums===String?u.KeyType[a.Type]:a.Type),a.Data!=null&&a.hasOwnProperty("Data")&&(d.Data=c.bytes===String?s.base64.encode(a.Data,0,a.Data.length):c.bytes===Array?Array.prototype.slice.call(a.Data):a.Data),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),u.PrivateKey=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.Type=0,l.prototype.Data=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),c.uint32(8).int32(a.Type),c.uint32(18).bytes(a.Data),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.PrivateKey;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.Type=a.int32();break;case 2:h.Data=a.bytes();break;default:a.skipType(g&7);break}}if(!h.hasOwnProperty("Type"))throw s.ProtocolError("missing required 'Type'",{instance:h});if(!h.hasOwnProperty("Data"))throw s.ProtocolError("missing required 'Data'",{instance:h});return h},l.fromObject=function(a){if(a instanceof u.PrivateKey)return a;var c=new u.PrivateKey;switch(a.Type){case"RSA":case 0:c.Type=0;break;case"Ed25519":case 1:c.Type=1;break;case"Secp256k1":case 2:c.Type=2;break}return a.Data!=null&&(typeof a.Data=="string"?s.base64.decode(a.Data,c.Data=s.newBuffer(s.base64.length(a.Data)),0):a.Data.length&&(c.Data=a.Data)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.Type=c.enums===String?"RSA":0,c.bytes===String?d.Data="":(d.Data=[],c.bytes!==Array&&(d.Data=s.newBuffer(d.Data)))),a.Type!=null&&a.hasOwnProperty("Type")&&(d.Type=c.enums===String?u.KeyType[a.Type]:a.Type),a.Data!=null&&a.hasOwnProperty("Data")&&(d.Data=c.bytes===String?s.base64.encode(a.Data,0,a.Data.length):c.bytes===Array?Array.prototype.slice.call(a.Data):a.Data),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_forge=__commonJS({"node_modules/node-forge/lib/forge.js"(e,o){init_node_globals(),o.exports={options:{usePureJavaScript:!1}}}}),require_baseN=__commonJS({"node_modules/node-forge/lib/baseN.js"(e,o){init_node_globals();var r={};o.exports=r;var t={};r.encode=function(s,u,l){if(typeof u!="string")throw new TypeError('"alphabet" must be a string.');if(l!==void 0&&typeof l!="number")throw new TypeError('"maxline" must be a number.');var f="";if(!(s instanceof Uint8Array))f=n(s,u);else{var a=0,c=u.length,d=u.charAt(0),h=[0];for(a=0;a<s.length;++a){for(var g=0,p=s[a];g<h.length;++g)p+=h[g]<<8,h[g]=p%c,p=p/c|0;for(;p>0;)h.push(p%c),p=p/c|0}for(a=0;s[a]===0&&a<s.length-1;++a)f+=d;for(a=h.length-1;a>=0;--a)f+=u[h[a]]}if(l){var _=new RegExp(".{1,"+l+"}","g");f=f.match(_).join(`\r
`)}return f},r.decode=function(s,u){if(typeof s!="string")throw new TypeError('"input" must be a string.');if(typeof u!="string")throw new TypeError('"alphabet" must be a string.');var l=t[u];if(!l){l=t[u]=[];for(var f=0;f<u.length;++f)l[u.charCodeAt(f)]=f}s=s.replace(/\s/g,"");for(var a=u.length,c=u.charAt(0),d=[0],f=0;f<s.length;f++){var h=l[s.charCodeAt(f)];if(h===void 0)return;for(var g=0,p=h;g<d.length;++g)p+=d[g]*a,d[g]=p&255,p>>=8;for(;p>0;)d.push(p&255),p>>=8}for(var _=0;s[_]===c&&_<s.length-1;++_)d.push(0);return typeof Buffer!="undefined"?Buffer.from(d.reverse()):new Uint8Array(d.reverse())};function n(s,u){var l=0,f=u.length,a=u.charAt(0),c=[0];for(l=0;l<s.length();++l){for(var d=0,h=s.at(l);d<c.length;++d)h+=c[d]<<8,c[d]=h%f,h=h/f|0;for(;h>0;)c.push(h%f),h=h/f|0}var g="";for(l=0;s.at(l)===0&&l<s.length()-1;++l)g+=a;for(l=c.length-1;l>=0;--l)g+=u[c[l]];return g}}}),require_util=__commonJS({"node_modules/node-forge/lib/util.js"(e,o){init_node_globals();var r=require_forge(),t=require_baseN(),n=o.exports=r.util=r.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){n.nextTick=process.nextTick,typeof setImmediate=="function"?n.setImmediate=setImmediate:n.setImmediate=n.nextTick;return}if(typeof setImmediate=="function"){n.setImmediate=function(){return setImmediate.apply(void 0,arguments)},n.nextTick=function(A){return setImmediate(A)};return}if(n.setImmediate=function(A){setTimeout(A,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let A=function(C){if(C.source===window&&C.data===y){C.stopPropagation();var I=b.slice();b.length=0,I.forEach(function(P){P()})}};var y="forge.setImmediate",b=[];n.setImmediate=function(C){b.push(C),b.length===1&&window.postMessage(y,"*")},window.addEventListener("message",A,!0)}if(typeof MutationObserver!="undefined"){var T=Date.now(),R=!0,S=document.createElement("div"),b=[];new MutationObserver(function(){var C=b.slice();b.length=0,C.forEach(function(I){I()})}).observe(S,{attributes:!0});var E=n.setImmediate;n.setImmediate=function(C){Date.now()-T>15?(T=Date.now(),E(C)):(b.push(C),b.length===1&&S.setAttribute("a",R=!R))}}n.nextTick=n.setImmediate})(),n.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node,n.globalScope=function(){return n.isNodejs?global:typeof self=="undefined"?window:self}(),n.isArray=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"},n.isArrayBuffer=function(y){return typeof ArrayBuffer!="undefined"&&y instanceof ArrayBuffer},n.isArrayBufferView=function(y){return y&&n.isArrayBuffer(y.buffer)&&y.byteLength!==void 0};function s(y){if(!(y===8||y===16||y===24||y===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+y)}n.ByteBuffer=u;function u(y){if(this.data="",this.read=0,typeof y=="string")this.data=y;else if(n.isArrayBuffer(y)||n.isArrayBufferView(y))if(typeof Buffer!="undefined"&&y instanceof Buffer)this.data=y.toString("binary");else{var b=new Uint8Array(y);try{this.data=String.fromCharCode.apply(null,b)}catch{for(var T=0;T<b.length;++T)this.putByte(b[T])}}else(y instanceof u||typeof y=="object"&&typeof y.data=="string"&&typeof y.read=="number")&&(this.data=y.data,this.read=y.read);this._constructedStringLength=0}n.ByteStringBuffer=u;var l=4096;n.ByteStringBuffer.prototype._optimizeConstructedString=function(y){this._constructedStringLength+=y,this._constructedStringLength>l&&(this.data.substr(0,1),this._constructedStringLength=0)},n.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},n.ByteStringBuffer.prototype.putByte=function(y){return this.putBytes(String.fromCharCode(y))},n.ByteStringBuffer.prototype.fillWithByte=function(y,b){y=String.fromCharCode(y);for(var T=this.data;b>0;)b&1&&(T+=y),b>>>=1,b>0&&(y+=y);return this.data=T,this._optimizeConstructedString(b),this},n.ByteStringBuffer.prototype.putBytes=function(y){return this.data+=y,this._optimizeConstructedString(y.length),this},n.ByteStringBuffer.prototype.putString=function(y){return this.putBytes(n.encodeUtf8(y))},n.ByteStringBuffer.prototype.putInt16=function(y){return this.putBytes(String.fromCharCode(y>>8&255)+String.fromCharCode(y&255))},n.ByteStringBuffer.prototype.putInt24=function(y){return this.putBytes(String.fromCharCode(y>>16&255)+String.fromCharCode(y>>8&255)+String.fromCharCode(y&255))},n.ByteStringBuffer.prototype.putInt32=function(y){return this.putBytes(String.fromCharCode(y>>24&255)+String.fromCharCode(y>>16&255)+String.fromCharCode(y>>8&255)+String.fromCharCode(y&255))},n.ByteStringBuffer.prototype.putInt16Le=function(y){return this.putBytes(String.fromCharCode(y&255)+String.fromCharCode(y>>8&255))},n.ByteStringBuffer.prototype.putInt24Le=function(y){return this.putBytes(String.fromCharCode(y&255)+String.fromCharCode(y>>8&255)+String.fromCharCode(y>>16&255))},n.ByteStringBuffer.prototype.putInt32Le=function(y){return this.putBytes(String.fromCharCode(y&255)+String.fromCharCode(y>>8&255)+String.fromCharCode(y>>16&255)+String.fromCharCode(y>>24&255))},n.ByteStringBuffer.prototype.putInt=function(y,b){s(b);var T="";do b-=8,T+=String.fromCharCode(y>>b&255);while(b>0);return this.putBytes(T)},n.ByteStringBuffer.prototype.putSignedInt=function(y,b){return y<0&&(y+=2<<b-1),this.putInt(y,b)},n.ByteStringBuffer.prototype.putBuffer=function(y){return this.putBytes(y.getBytes())},n.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},n.ByteStringBuffer.prototype.getInt16=function(){var y=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,y},n.ByteStringBuffer.prototype.getInt24=function(){var y=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,y},n.ByteStringBuffer.prototype.getInt32=function(){var y=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,y},n.ByteStringBuffer.prototype.getInt16Le=function(){var y=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,y},n.ByteStringBuffer.prototype.getInt24Le=function(){var y=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,y},n.ByteStringBuffer.prototype.getInt32Le=function(){var y=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,y},n.ByteStringBuffer.prototype.getInt=function(y){s(y);var b=0;do b=(b<<8)+this.data.charCodeAt(this.read++),y-=8;while(y>0);return b},n.ByteStringBuffer.prototype.getSignedInt=function(y){var b=this.getInt(y),T=2<<y-2;return b>=T&&(b-=T<<1),b},n.ByteStringBuffer.prototype.getBytes=function(y){var b;return y?(y=Math.min(this.length(),y),b=this.data.slice(this.read,this.read+y),this.read+=y):y===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},n.ByteStringBuffer.prototype.bytes=function(y){return typeof y=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+y)},n.ByteStringBuffer.prototype.at=function(y){return this.data.charCodeAt(this.read+y)},n.ByteStringBuffer.prototype.setAt=function(y,b){return this.data=this.data.substr(0,this.read+y)+String.fromCharCode(b)+this.data.substr(this.read+y+1),this},n.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},n.ByteStringBuffer.prototype.copy=function(){var y=n.createBuffer(this.data);return y.read=this.read,y},n.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},n.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},n.ByteStringBuffer.prototype.truncate=function(y){var b=Math.max(0,this.length()-y);return this.data=this.data.substr(this.read,b),this.read=0,this},n.ByteStringBuffer.prototype.toHex=function(){for(var y="",b=this.read;b<this.data.length;++b){var T=this.data.charCodeAt(b);T<16&&(y+="0"),y+=T.toString(16)}return y},n.ByteStringBuffer.prototype.toString=function(){return n.decodeUtf8(this.bytes())};function f(y,b){b=b||{},this.read=b.readOffset||0,this.growSize=b.growSize||1024;var T=n.isArrayBuffer(y),R=n.isArrayBufferView(y);if(T||R){T?this.data=new DataView(y):this.data=new DataView(y.buffer,y.byteOffset,y.byteLength),this.write="writeOffset"in b?b.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,y!=null&&this.putBytes(y),"writeOffset"in b&&(this.write=b.writeOffset)}n.DataBuffer=f,n.DataBuffer.prototype.length=function(){return this.write-this.read},n.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},n.DataBuffer.prototype.accommodate=function(y,b){if(this.length()>=y)return this;b=Math.max(b||this.growSize,y);var T=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),R=new Uint8Array(this.length()+b);return R.set(T),this.data=new DataView(R.buffer),this},n.DataBuffer.prototype.putByte=function(y){return this.accommodate(1),this.data.setUint8(this.write++,y),this},n.DataBuffer.prototype.fillWithByte=function(y,b){this.accommodate(b);for(var T=0;T<b;++T)this.data.setUint8(y);return this},n.DataBuffer.prototype.putBytes=function(y,b){if(n.isArrayBufferView(y)){var T=new Uint8Array(y.buffer,y.byteOffset,y.byteLength),R=T.byteLength-T.byteOffset;this.accommodate(R);var S=new Uint8Array(this.data.buffer,this.write);return S.set(T),this.write+=R,this}if(n.isArrayBuffer(y)){var T=new Uint8Array(y);this.accommodate(T.byteLength);var S=new Uint8Array(this.data.buffer);return S.set(T,this.write),this.write+=T.byteLength,this}if(y instanceof n.DataBuffer||typeof y=="object"&&typeof y.read=="number"&&typeof y.write=="number"&&n.isArrayBufferView(y.data)){var T=new Uint8Array(y.data.byteLength,y.read,y.length());this.accommodate(T.byteLength);var S=new Uint8Array(y.data.byteLength,this.write);return S.set(T),this.write+=T.byteLength,this}if(y instanceof n.ByteStringBuffer&&(y=y.data,b="binary"),b=b||"binary",typeof y=="string"){var E;if(b==="hex")return this.accommodate(Math.ceil(y.length/2)),E=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.hex.decode(y,E,this.write),this;if(b==="base64")return this.accommodate(Math.ceil(y.length/4)*3),E=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.base64.decode(y,E,this.write),this;if(b==="utf8"&&(y=n.encodeUtf8(y),b="binary"),b==="binary"||b==="raw")return this.accommodate(y.length),E=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.raw.decode(E),this;if(b==="utf16")return this.accommodate(y.length*2),E=new Uint16Array(this.data.buffer,this.write),this.write+=n.text.utf16.encode(E),this;throw new Error("Invalid encoding: "+b)}throw Error("Invalid parameter: "+y)},n.DataBuffer.prototype.putBuffer=function(y){return this.putBytes(y),y.clear(),this},n.DataBuffer.prototype.putString=function(y){return this.putBytes(y,"utf16")},n.DataBuffer.prototype.putInt16=function(y){return this.accommodate(2),this.data.setInt16(this.write,y),this.write+=2,this},n.DataBuffer.prototype.putInt24=function(y){return this.accommodate(3),this.data.setInt16(this.write,y>>8&65535),this.data.setInt8(this.write,y>>16&255),this.write+=3,this},n.DataBuffer.prototype.putInt32=function(y){return this.accommodate(4),this.data.setInt32(this.write,y),this.write+=4,this},n.DataBuffer.prototype.putInt16Le=function(y){return this.accommodate(2),this.data.setInt16(this.write,y,!0),this.write+=2,this},n.DataBuffer.prototype.putInt24Le=function(y){return this.accommodate(3),this.data.setInt8(this.write,y>>16&255),this.data.setInt16(this.write,y>>8&65535,!0),this.write+=3,this},n.DataBuffer.prototype.putInt32Le=function(y){return this.accommodate(4),this.data.setInt32(this.write,y,!0),this.write+=4,this},n.DataBuffer.prototype.putInt=function(y,b){s(b),this.accommodate(b/8);do b-=8,this.data.setInt8(this.write++,y>>b&255);while(b>0);return this},n.DataBuffer.prototype.putSignedInt=function(y,b){return s(b),this.accommodate(b/8),y<0&&(y+=2<<b-1),this.putInt(y,b)},n.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},n.DataBuffer.prototype.getInt16=function(){var y=this.data.getInt16(this.read);return this.read+=2,y},n.DataBuffer.prototype.getInt24=function(){var y=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,y},n.DataBuffer.prototype.getInt32=function(){var y=this.data.getInt32(this.read);return this.read+=4,y},n.DataBuffer.prototype.getInt16Le=function(){var y=this.data.getInt16(this.read,!0);return this.read+=2,y},n.DataBuffer.prototype.getInt24Le=function(){var y=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,y},n.DataBuffer.prototype.getInt32Le=function(){var y=this.data.getInt32(this.read,!0);return this.read+=4,y},n.DataBuffer.prototype.getInt=function(y){s(y);var b=0;do b=(b<<8)+this.data.getInt8(this.read++),y-=8;while(y>0);return b},n.DataBuffer.prototype.getSignedInt=function(y){var b=this.getInt(y),T=2<<y-2;return b>=T&&(b-=T<<1),b},n.DataBuffer.prototype.getBytes=function(y){var b;return y?(y=Math.min(this.length(),y),b=this.data.slice(this.read,this.read+y),this.read+=y):y===0?b="":(b=this.read===0?this.data:this.data.slice(this.read),this.clear()),b},n.DataBuffer.prototype.bytes=function(y){return typeof y=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+y)},n.DataBuffer.prototype.at=function(y){return this.data.getUint8(this.read+y)},n.DataBuffer.prototype.setAt=function(y,b){return this.data.setUint8(y,b),this},n.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},n.DataBuffer.prototype.copy=function(){return new n.DataBuffer(this)},n.DataBuffer.prototype.compact=function(){if(this.read>0){var y=new Uint8Array(this.data.buffer,this.read),b=new Uint8Array(y.byteLength);b.set(y),this.data=new DataView(b),this.write-=this.read,this.read=0}return this},n.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},n.DataBuffer.prototype.truncate=function(y){return this.write=Math.max(0,this.length()-y),this.read=Math.min(this.read,this.write),this},n.DataBuffer.prototype.toHex=function(){for(var y="",b=this.read;b<this.data.byteLength;++b){var T=this.data.getUint8(b);T<16&&(y+="0"),y+=T.toString(16)}return y},n.DataBuffer.prototype.toString=function(y){var b=new Uint8Array(this.data,this.read,this.length());if(y=y||"utf8",y==="binary"||y==="raw")return n.binary.raw.encode(b);if(y==="hex")return n.binary.hex.encode(b);if(y==="base64")return n.binary.base64.encode(b);if(y==="utf8")return n.text.utf8.decode(b);if(y==="utf16")return n.text.utf16.decode(b);throw new Error("Invalid encoding: "+y)},n.createBuffer=function(y,b){return b=b||"raw",y!==void 0&&b==="utf8"&&(y=n.encodeUtf8(y)),new n.ByteBuffer(y)},n.fillString=function(y,b){for(var T="";b>0;)b&1&&(T+=y),b>>>=1,b>0&&(y+=y);return T},n.xorBytes=function(y,b,T){for(var R="",S="",E="",A=0,C=0;T>0;--T,++A)S=y.charCodeAt(A)^b.charCodeAt(A),C>=10&&(R+=E,E="",C=0),E+=String.fromCharCode(S),++C;return R+=E,R},n.hexToBytes=function(y){var b="",T=0;for(y.length&!0&&(T=1,b+=String.fromCharCode(parseInt(y[0],16)));T<y.length;T+=2)b+=String.fromCharCode(parseInt(y.substr(T,2),16));return b},n.bytesToHex=function(y){return n.createBuffer(y).toHex()},n.int32ToBytes=function(y){return String.fromCharCode(y>>24&255)+String.fromCharCode(y>>16&255)+String.fromCharCode(y>>8&255)+String.fromCharCode(y&255)};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";n.encode64=function(y,b){for(var T="",R="",S,E,A,C=0;C<y.length;)S=y.charCodeAt(C++),E=y.charCodeAt(C++),A=y.charCodeAt(C++),T+=a.charAt(S>>2),T+=a.charAt((S&3)<<4|E>>4),isNaN(E)?T+="==":(T+=a.charAt((E&15)<<2|A>>6),T+=isNaN(A)?"=":a.charAt(A&63)),b&&T.length>b&&(R+=T.substr(0,b)+`\r
`,T=T.substr(b));return R+=T,R},n.decode64=function(y){y=y.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var b="",T,R,S,E,A=0;A<y.length;)T=c[y.charCodeAt(A++)-43],R=c[y.charCodeAt(A++)-43],S=c[y.charCodeAt(A++)-43],E=c[y.charCodeAt(A++)-43],b+=String.fromCharCode(T<<2|R>>4),S!==64&&(b+=String.fromCharCode((R&15)<<4|S>>2),E!==64&&(b+=String.fromCharCode((S&3)<<6|E)));return b},n.encodeUtf8=function(y){return unescape(encodeURIComponent(y))},n.decodeUtf8=function(y){return decodeURIComponent(escape(y))},n.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:t.encode,decode:t.decode}},n.binary.raw.encode=function(y){return String.fromCharCode.apply(null,y)},n.binary.raw.decode=function(y,b,T){var R=b;R||(R=new Uint8Array(y.length)),T=T||0;for(var S=T,E=0;E<y.length;++E)R[S++]=y.charCodeAt(E);return b?S-T:R},n.binary.hex.encode=n.bytesToHex,n.binary.hex.decode=function(y,b,T){var R=b;R||(R=new Uint8Array(Math.ceil(y.length/2))),T=T||0;var S=0,E=T;for(y.length&1&&(S=1,R[E++]=parseInt(y[0],16));S<y.length;S+=2)R[E++]=parseInt(y.substr(S,2),16);return b?E-T:R},n.binary.base64.encode=function(y,b){for(var T="",R="",S,E,A,C=0;C<y.byteLength;)S=y[C++],E=y[C++],A=y[C++],T+=a.charAt(S>>2),T+=a.charAt((S&3)<<4|E>>4),isNaN(E)?T+="==":(T+=a.charAt((E&15)<<2|A>>6),T+=isNaN(A)?"=":a.charAt(A&63)),b&&T.length>b&&(R+=T.substr(0,b)+`\r
`,T=T.substr(b));return R+=T,R},n.binary.base64.decode=function(y,b,T){var R=b;R||(R=new Uint8Array(Math.ceil(y.length/4)*3)),y=y.replace(/[^A-Za-z0-9\+\/\=]/g,""),T=T||0;for(var S,E,A,C,I=0,P=T;I<y.length;)S=c[y.charCodeAt(I++)-43],E=c[y.charCodeAt(I++)-43],A=c[y.charCodeAt(I++)-43],C=c[y.charCodeAt(I++)-43],R[P++]=S<<2|E>>4,A!==64&&(R[P++]=(E&15)<<4|A>>2,C!==64&&(R[P++]=(A&3)<<6|C));return b?P-T:R.subarray(0,P)},n.binary.base58.encode=function(y,b){return n.binary.baseN.encode(y,d,b)},n.binary.base58.decode=function(y,b){return n.binary.baseN.decode(y,d,b)},n.text={utf8:{},utf16:{}},n.text.utf8.encode=function(y,b,T){y=n.encodeUtf8(y);var R=b;R||(R=new Uint8Array(y.length)),T=T||0;for(var S=T,E=0;E<y.length;++E)R[S++]=y.charCodeAt(E);return b?S-T:R},n.text.utf8.decode=function(y){return n.decodeUtf8(String.fromCharCode.apply(null,y))},n.text.utf16.encode=function(y,b,T){var R=b;R||(R=new Uint8Array(y.length*2));var S=new Uint16Array(R.buffer);T=T||0;for(var E=T,A=T,C=0;C<y.length;++C)S[A++]=y.charCodeAt(C),E+=2;return b?E-T:R},n.text.utf16.decode=function(y){return String.fromCharCode.apply(null,new Uint16Array(y.buffer))},n.deflate=function(y,b,T){if(b=n.decode64(y.deflate(n.encode64(b)).rval),T){var R=2,S=b.charCodeAt(1);S&32&&(R=6),b=b.substring(R,b.length-4)}return b},n.inflate=function(y,b,T){var R=y.inflate(n.encode64(b)).rval;return R===null?null:n.decode64(R)};var h=function(y,b,T){if(!y)throw new Error("WebStorage not available.");var R;if(T===null?R=y.removeItem(b):(T=n.encode64(JSON.stringify(T)),R=y.setItem(b,T)),typeof R!="undefined"&&R.rval!==!0){var S=new Error(R.error.message);throw S.id=R.error.id,S.name=R.error.name,S}},g=function(y,b){if(!y)throw new Error("WebStorage not available.");var T=y.getItem(b);if(y.init)if(T.rval===null){if(T.error){var R=new Error(T.error.message);throw R.id=T.error.id,R.name=T.error.name,R}T=null}else T=T.rval;return T!==null&&(T=JSON.parse(n.decode64(T))),T},p=function(y,b,T,R){var S=g(y,b);S===null&&(S={}),S[T]=R,h(y,b,S)},_=function(y,b,T){var R=g(y,b);return R!==null&&(R=T in R?R[T]:null),R},m=function(y,b,T){var R=g(y,b);if(R!==null&&T in R){delete R[T];var S=!0;for(var E in R){S=!1;break}S&&(R=null),h(y,b,R)}},v=function(y,b){h(y,b,null)},w=function(y,b,T){var R=null;typeof T=="undefined"&&(T=["web","flash"]);var S,E=!1,A=null;for(var C in T){S=T[C];try{if(S==="flash"||S==="both"){if(b[0]===null)throw new Error("Flash local storage not available.");R=y.apply(this,b),E=S==="flash"}(S==="web"||S==="both")&&(b[0]=localStorage,R=y.apply(this,b),E=!0)}catch(I){A=I}if(E)break}if(!E)throw A;return R};n.setItem=function(y,b,T,R,S){w(p,arguments,S)},n.getItem=function(y,b,T,R){return w(_,arguments,R)},n.removeItem=function(y,b,T,R){w(m,arguments,R)},n.clearItems=function(y,b,T){w(v,arguments,T)},n.isEmpty=function(y){for(var b in y)if(y.hasOwnProperty(b))return!1;return!0},n.format=function(y){for(var b=/%./g,T,R,S=0,E=[],A=0;T=b.exec(y);){R=y.substring(A,b.lastIndex-2),R.length>0&&E.push(R),A=b.lastIndex;var C=T[0][1];switch(C){case"s":case"o":S<arguments.length?E.push(arguments[S+++1]):E.push("<?>");break;case"%":E.push("%");break;default:E.push("<%"+C+"?>")}}return E.push(y.substring(A)),E.join("")},n.formatNumber=function(y,b,T,R){var S=y,E=isNaN(b=Math.abs(b))?2:b,A=T===void 0?",":T,C=R===void 0?".":R,I=S<0?"-":"",P=parseInt(S=Math.abs(+S||0).toFixed(E),10)+"",O=P.length>3?P.length%3:0;return I+(O?P.substr(0,O)+C:"")+P.substr(O).replace(/(\d{3})(?=\d)/g,"$1"+C)+(E?A+Math.abs(S-P).toFixed(E).slice(2):"")},n.formatSize=function(y){return y>=1073741824?y=n.formatNumber(y/1073741824,2,".","")+" GiB":y>=1048576?y=n.formatNumber(y/1048576,2,".","")+" MiB":y>=1024?y=n.formatNumber(y/1024,0)+" KiB":y=n.formatNumber(y,0)+" bytes",y},n.bytesFromIP=function(y){return y.indexOf(".")!==-1?n.bytesFromIPv4(y):y.indexOf(":")!==-1?n.bytesFromIPv6(y):null},n.bytesFromIPv4=function(y){if(y=y.split("."),y.length!==4)return null;for(var b=n.createBuffer(),T=0;T<y.length;++T){var R=parseInt(y[T],10);if(isNaN(R))return null;b.putByte(R)}return b.getBytes()},n.bytesFromIPv6=function(y){var b=0;y=y.split(":").filter(function(A){return A.length===0&&++b,!0});for(var T=(8-y.length+b)*2,R=n.createBuffer(),S=0;S<8;++S){if(!y[S]||y[S].length===0){R.fillWithByte(0,T),T=0;continue}var E=n.hexToBytes(y[S]);E.length<2&&R.putByte(0),R.putBytes(E)}return R.getBytes()},n.bytesToIP=function(y){return y.length===4?n.bytesToIPv4(y):y.length===16?n.bytesToIPv6(y):null},n.bytesToIPv4=function(y){if(y.length!==4)return null;for(var b=[],T=0;T<y.length;++T)b.push(y.charCodeAt(T));return b.join(".")},n.bytesToIPv6=function(y){if(y.length!==16)return null;for(var b=[],T=[],R=0,S=0;S<y.length;S+=2){for(var E=n.bytesToHex(y[S]+y[S+1]);E[0]==="0"&&E!=="0";)E=E.substr(1);if(E==="0"){var A=T[T.length-1],C=b.length;!A||C!==A.end+1?T.push({start:C,end:C}):(A.end=C,A.end-A.start>T[R].end-T[R].start&&(R=T.length-1))}b.push(E)}if(T.length>0){var I=T[R];I.end-I.start>0&&(b.splice(I.start,I.end-I.start+1,""),I.start===0&&b.unshift(""),I.end===7&&b.push(""))}return b.join(":")},n.estimateCores=function(y,b){if(typeof y=="function"&&(b=y,y={}),y=y||{},"cores"in n&&!y.update)return b(null,n.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return n.cores=navigator.hardwareConcurrency,b(null,n.cores);if(typeof Worker=="undefined")return n.cores=1,b(null,n.cores);if(typeof Blob=="undefined")return n.cores=2,b(null,n.cores);var T=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(A){var C=Date.now(),I=C+4;self.postMessage({st:C,et:I})})}.toString(),")()"],{type:"application/javascript"}));R([],5,16);function R(A,C,I){if(C===0){var P=Math.floor(A.reduce(function(O,k){return O+k},0)/A.length);return n.cores=Math.max(1,P),URL.revokeObjectURL(T),b(null,n.cores)}S(I,function(O,k){A.push(E(I,k)),R(A,C-1,I)})}function S(A,C){for(var I=[],P=[],O=0;O<A;++O){var k=new Worker(T);k.addEventListener("message",function(N){if(P.push(N.data),P.length===A){for(var K=0;K<A;++K)I[K].terminate();C(null,P)}}),I.push(k)}for(var O=0;O<A;++O)I[O].postMessage(O)}function E(A,C){for(var I=[],P=0;P<A;++P)for(var O=C[P],k=I[P]=[],N=0;N<A;++N)if(P!==N){var K=C[N];(O.st>K.st&&O.st<K.et||K.st>O.st&&K.st<O.et)&&k.push(N)}return I.reduce(function(U,L){return Math.max(U,L.length)},0)}}}}),require_oids=__commonJS({"node_modules/node-forge/lib/oids.js"(e,o){init_node_globals();var r=require_forge();r.pki=r.pki||{};var t=o.exports=r.pki.oids=r.oids=r.oids||{};function n(u,l){t[u]=l,t[l]=u}function s(u,l){t[u]=l}n("1.2.840.113549.1.1.1","rsaEncryption"),n("1.2.840.113549.1.1.4","md5WithRSAEncryption"),n("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),n("1.2.840.113549.1.1.7","RSAES-OAEP"),n("1.2.840.113549.1.1.8","mgf1"),n("1.2.840.113549.1.1.9","pSpecified"),n("1.2.840.113549.1.1.10","RSASSA-PSS"),n("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),n("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),n("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),n("1.3.101.112","EdDSA25519"),n("1.2.840.10040.4.3","dsa-with-sha1"),n("1.3.14.3.2.7","desCBC"),n("1.3.14.3.2.26","sha1"),n("1.3.14.3.2.29","sha1WithRSASignature"),n("2.16.840.1.101.3.4.2.1","sha256"),n("2.16.840.1.101.3.4.2.2","sha384"),n("2.16.840.1.101.3.4.2.3","sha512"),n("1.2.840.113549.2.5","md5"),n("1.2.840.113549.1.7.1","data"),n("1.2.840.113549.1.7.2","signedData"),n("1.2.840.113549.1.7.3","envelopedData"),n("1.2.840.113549.1.7.4","signedAndEnvelopedData"),n("1.2.840.113549.1.7.5","digestedData"),n("1.2.840.113549.1.7.6","encryptedData"),n("1.2.840.113549.1.9.1","emailAddress"),n("1.2.840.113549.1.9.2","unstructuredName"),n("1.2.840.113549.1.9.3","contentType"),n("1.2.840.113549.1.9.4","messageDigest"),n("1.2.840.113549.1.9.5","signingTime"),n("1.2.840.113549.1.9.6","counterSignature"),n("1.2.840.113549.1.9.7","challengePassword"),n("1.2.840.113549.1.9.8","unstructuredAddress"),n("1.2.840.113549.1.9.14","extensionRequest"),n("1.2.840.113549.1.9.20","friendlyName"),n("1.2.840.113549.1.9.21","localKeyId"),n("1.2.840.113549.1.9.22.1","x509Certificate"),n("1.2.840.113549.1.12.10.1.1","keyBag"),n("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),n("1.2.840.113549.1.12.10.1.3","certBag"),n("1.2.840.113549.1.12.10.1.4","crlBag"),n("1.2.840.113549.1.12.10.1.5","secretBag"),n("1.2.840.113549.1.12.10.1.6","safeContentsBag"),n("1.2.840.113549.1.5.13","pkcs5PBES2"),n("1.2.840.113549.1.5.12","pkcs5PBKDF2"),n("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),n("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),n("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),n("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),n("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),n("1.2.840.113549.2.7","hmacWithSHA1"),n("1.2.840.113549.2.8","hmacWithSHA224"),n("1.2.840.113549.2.9","hmacWithSHA256"),n("1.2.840.113549.2.10","hmacWithSHA384"),n("1.2.840.113549.2.11","hmacWithSHA512"),n("1.2.840.113549.3.7","des-EDE3-CBC"),n("2.16.840.1.101.3.4.1.2","aes128-CBC"),n("2.16.840.1.101.3.4.1.22","aes192-CBC"),n("2.16.840.1.101.3.4.1.42","aes256-CBC"),n("2.5.4.3","commonName"),n("2.5.4.4","surname"),n("2.5.4.5","serialNumber"),n("2.5.4.6","countryName"),n("2.5.4.7","localityName"),n("2.5.4.8","stateOrProvinceName"),n("2.5.4.9","streetAddress"),n("2.5.4.10","organizationName"),n("2.5.4.11","organizationalUnitName"),n("2.5.4.12","title"),n("2.5.4.13","description"),n("2.5.4.15","businessCategory"),n("2.5.4.17","postalCode"),n("2.5.4.42","givenName"),n("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),n("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),n("2.16.840.1.113730.1.1","nsCertType"),n("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),n("2.5.29.14","subjectKeyIdentifier"),n("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),n("2.5.29.17","subjectAltName"),n("2.5.29.18","issuerAltName"),n("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),n("2.5.29.31","cRLDistributionPoints"),n("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),n("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),n("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),n("1.3.6.1.4.1.11129.2.4.2","timestampList"),n("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),n("1.3.6.1.5.5.7.3.1","serverAuth"),n("1.3.6.1.5.5.7.3.2","clientAuth"),n("1.3.6.1.5.5.7.3.3","codeSigning"),n("1.3.6.1.5.5.7.3.4","emailProtection"),n("1.3.6.1.5.5.7.3.8","timeStamping")}}),require_asn1=__commonJS({"node_modules/node-forge/lib/asn1.js"(e,o){init_node_globals();var r=require_forge();require_util(),require_oids();var t=o.exports=r.asn1=r.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(f,a,c,d,h){if(r.util.isArray(d)){for(var g=[],p=0;p<d.length;++p)d[p]!==void 0&&g.push(d[p]);d=g}var _={tagClass:f,type:a,constructed:c,composed:c||r.util.isArray(d),value:d};return h&&"bitStringContents"in h&&(_.bitStringContents=h.bitStringContents,_.original=t.copy(_)),_},t.copy=function(f,a){var c;if(r.util.isArray(f)){c=[];for(var d=0;d<f.length;++d)c.push(t.copy(f[d],a));return c}return typeof f=="string"?f:(c={tagClass:f.tagClass,type:f.type,constructed:f.constructed,composed:f.composed,value:t.copy(f.value,a)},a&&!a.excludeBitStringContents&&(c.bitStringContents=f.bitStringContents),c)},t.equals=function(f,a,c){if(r.util.isArray(f)){if(!r.util.isArray(a)||f.length!==a.length)return!1;for(var d=0;d<f.length;++d)if(!t.equals(f[d],a[d]))return!1;return!0}if(typeof f!=typeof a)return!1;if(typeof f=="string")return f===a;var h=f.tagClass===a.tagClass&&f.type===a.type&&f.constructed===a.constructed&&f.composed===a.composed&&t.equals(f.value,a.value);return c&&c.includeBitStringContents&&(h=h&&f.bitStringContents===a.bitStringContents),h},t.getBerValueLength=function(f){var a=f.getByte();if(a!==128){var c,d=a&128;return d?c=f.getInt((a&127)<<3):c=a,c}};function n(f,a,c){if(c>a){var d=new Error("Too few bytes to parse DER.");throw d.available=f.length(),d.remaining=a,d.requested=c,d}}var s=function(f,a){var c=f.getByte();if(a--,c!==128){var d,h=c&128;if(!h)d=c;else{var g=c&127;n(f,a,g),d=f.getInt(g<<3)}if(d<0)throw new Error("Negative length: "+d);return d}};t.fromDer=function(f,a){return a===void 0&&(a={strict:!0,decodeBitStrings:!0}),typeof a=="boolean"&&(a={strict:a,decodeBitStrings:!0}),"strict"in a||(a.strict=!0),"decodeBitStrings"in a||(a.decodeBitStrings=!0),typeof f=="string"&&(f=r.util.createBuffer(f)),u(f,f.length(),0,a)};function u(f,a,c,d){var h;n(f,a,2);var g=f.getByte();a--;var p=g&192,_=g&31;h=f.length();var m=s(f,a);if(a-=h-f.length(),m!==void 0&&m>a){if(d.strict){var v=new Error("Too few bytes to read ASN.1 value.");throw v.available=f.length(),v.remaining=a,v.requested=m,v}m=a}var w,y,b=(g&32)==32;if(b)if(w=[],m===void 0)for(;;){if(n(f,a,2),f.bytes(2)===String.fromCharCode(0,0)){f.getBytes(2),a-=2;break}h=f.length(),w.push(u(f,a,c+1,d)),a-=h-f.length()}else for(;m>0;)h=f.length(),w.push(u(f,m,c+1,d)),a-=h-f.length(),m-=h-f.length();if(w===void 0&&p===t.Class.UNIVERSAL&&_===t.Type.BITSTRING&&(y=f.bytes(m)),w===void 0&&d.decodeBitStrings&&p===t.Class.UNIVERSAL&&_===t.Type.BITSTRING&&m>1){var T=f.read,R=a,S=0;if(_===t.Type.BITSTRING&&(n(f,a,1),S=f.getByte(),a--),S===0)try{h=f.length();var E={verbose:d.verbose,strict:!0,decodeBitStrings:!0},A=u(f,a,c+1,E),C=h-f.length();a-=C,_==t.Type.BITSTRING&&C++;var I=A.tagClass;C===m&&(I===t.Class.UNIVERSAL||I===t.Class.CONTEXT_SPECIFIC)&&(w=[A])}catch{}w===void 0&&(f.read=T,a=R)}if(w===void 0){if(m===void 0){if(d.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");m=a}if(_===t.Type.BMPSTRING)for(w="";m>0;m-=2)n(f,a,2),w+=String.fromCharCode(f.getInt16()),a-=2;else w=f.getBytes(m)}var P=y===void 0?null:{bitStringContents:y};return t.create(p,_,b,w,P)}t.toDer=function(f){var a=r.util.createBuffer(),c=f.tagClass|f.type,d=r.util.createBuffer(),h=!1;if("bitStringContents"in f&&(h=!0,f.original&&(h=t.equals(f,f.original))),h)d.putBytes(f.bitStringContents);else if(f.composed){f.constructed?c|=32:d.putByte(0);for(var g=0;g<f.value.length;++g)f.value[g]!==void 0&&d.putBuffer(t.toDer(f.value[g]))}else if(f.type===t.Type.BMPSTRING)for(var g=0;g<f.value.length;++g)d.putInt16(f.value.charCodeAt(g));else f.type===t.Type.INTEGER&&f.value.length>1&&(f.value.charCodeAt(0)===0&&(f.value.charCodeAt(1)&128)==0||f.value.charCodeAt(0)===255&&(f.value.charCodeAt(1)&128)==128)?d.putBytes(f.value.substr(1)):d.putBytes(f.value);if(a.putByte(c),d.length()<=127)a.putByte(d.length()&127);else{var p=d.length(),_="";do _+=String.fromCharCode(p&255),p=p>>>8;while(p>0);a.putByte(_.length|128);for(var g=_.length-1;g>=0;--g)a.putByte(_.charCodeAt(g))}return a.putBuffer(d),a},t.oidToDer=function(f){var a=f.split("."),c=r.util.createBuffer();c.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var d,h,g,p,_=2;_<a.length;++_){d=!0,h=[],g=parseInt(a[_],10);do p=g&127,g=g>>>7,d||(p|=128),h.push(p),d=!1;while(g>0);for(var m=h.length-1;m>=0;--m)c.putByte(h[m])}return c},t.derToOid=function(f){var a;typeof f=="string"&&(f=r.util.createBuffer(f));var c=f.getByte();a=Math.floor(c/40)+"."+c%40;for(var d=0;f.length()>0;)c=f.getByte(),d=d<<7,c&128?d+=c&127:(a+="."+(d+c),d=0);return a},t.utcTimeToDate=function(f){var a=new Date,c=parseInt(f.substr(0,2),10);c=c>=50?1900+c:2e3+c;var d=parseInt(f.substr(2,2),10)-1,h=parseInt(f.substr(4,2),10),g=parseInt(f.substr(6,2),10),p=parseInt(f.substr(8,2),10),_=0;if(f.length>11){var m=f.charAt(10),v=10;m!=="+"&&m!=="-"&&(_=parseInt(f.substr(10,2),10),v+=2)}if(a.setUTCFullYear(c,d,h),a.setUTCHours(g,p,_,0),v&&(m=f.charAt(v),m==="+"||m==="-")){var w=parseInt(f.substr(v+1,2),10),y=parseInt(f.substr(v+4,2),10),b=w*60+y;b*=6e4,m==="+"?a.setTime(+a-b):a.setTime(+a+b)}return a},t.generalizedTimeToDate=function(f){var a=new Date,c=parseInt(f.substr(0,4),10),d=parseInt(f.substr(4,2),10)-1,h=parseInt(f.substr(6,2),10),g=parseInt(f.substr(8,2),10),p=parseInt(f.substr(10,2),10),_=parseInt(f.substr(12,2),10),m=0,v=0,w=!1;f.charAt(f.length-1)==="Z"&&(w=!0);var y=f.length-5,b=f.charAt(y);if(b==="+"||b==="-"){var T=parseInt(f.substr(y+1,2),10),R=parseInt(f.substr(y+4,2),10);v=T*60+R,v*=6e4,b==="+"&&(v*=-1),w=!0}return f.charAt(14)==="."&&(m=parseFloat(f.substr(14),10)*1e3),w?(a.setUTCFullYear(c,d,h),a.setUTCHours(g,p,_,m),a.setTime(+a+v)):(a.setFullYear(c,d,h),a.setHours(g,p,_,m)),a},t.dateToUtcTime=function(f){if(typeof f=="string")return f;var a="",c=[];c.push((""+f.getUTCFullYear()).substr(2)),c.push(""+(f.getUTCMonth()+1)),c.push(""+f.getUTCDate()),c.push(""+f.getUTCHours()),c.push(""+f.getUTCMinutes()),c.push(""+f.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(a+="0"),a+=c[d];return a+="Z",a},t.dateToGeneralizedTime=function(f){if(typeof f=="string")return f;var a="",c=[];c.push(""+f.getUTCFullYear()),c.push(""+(f.getUTCMonth()+1)),c.push(""+f.getUTCDate()),c.push(""+f.getUTCHours()),c.push(""+f.getUTCMinutes()),c.push(""+f.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(a+="0"),a+=c[d];return a+="Z",a},t.integerToDer=function(f){var a=r.util.createBuffer();if(f>=-128&&f<128)return a.putSignedInt(f,8);if(f>=-32768&&f<32768)return a.putSignedInt(f,16);if(f>=-8388608&&f<8388608)return a.putSignedInt(f,24);if(f>=-2147483648&&f<2147483648)return a.putSignedInt(f,32);var c=new Error("Integer too large; max is 32-bits.");throw c.integer=f,c},t.derToInteger=function(f){typeof f=="string"&&(f=r.util.createBuffer(f));var a=f.length()*8;if(a>32)throw new Error("Integer too large; max is 32-bits.");return f.getSignedInt(a)},t.validate=function(f,a,c,d){var h=!1;if((f.tagClass===a.tagClass||typeof a.tagClass=="undefined")&&(f.type===a.type||typeof a.type=="undefined"))if(f.constructed===a.constructed||typeof a.constructed=="undefined"){if(h=!0,a.value&&r.util.isArray(a.value))for(var g=0,p=0;h&&p<a.value.length;++p)h=a.value[p].optional||!1,f.value[g]&&(h=t.validate(f.value[g],a.value[p],c,d),h?++g:a.value[p].optional&&(h=!0)),!h&&d&&d.push("["+a.name+'] Tag class "'+a.tagClass+'", type "'+a.type+'" expected value length "'+a.value.length+'", got "'+f.value.length+'"');if(h&&c&&(a.capture&&(c[a.capture]=f.value),a.captureAsn1&&(c[a.captureAsn1]=f),a.captureBitStringContents&&"bitStringContents"in f&&(c[a.captureBitStringContents]=f.bitStringContents),a.captureBitStringValue&&"bitStringContents"in f))if(f.bitStringContents.length<2)c[a.captureBitStringValue]="";else{var _=f.bitStringContents.charCodeAt(0);if(_!==0)throw new Error("captureBitStringValue only supported for zero unused bits");c[a.captureBitStringValue]=f.bitStringContents.slice(1)}}else d&&d.push("["+a.name+'] Expected constructed "'+a.constructed+'", got "'+f.constructed+'"');else d&&(f.tagClass!==a.tagClass&&d.push("["+a.name+'] Expected tag class "'+a.tagClass+'", got "'+f.tagClass+'"'),f.type!==a.type&&d.push("["+a.name+'] Expected type "'+a.type+'", got "'+f.type+'"'));return h};var l=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(f,a,c){var d="";a=a||0,c=c||2,a>0&&(d+=`
`);for(var h="",g=0;g<a*c;++g)h+=" ";switch(d+=h+"Tag: ",f.tagClass){case t.Class.UNIVERSAL:d+="Universal:";break;case t.Class.APPLICATION:d+="Application:";break;case t.Class.CONTEXT_SPECIFIC:d+="Context-Specific:";break;case t.Class.PRIVATE:d+="Private:";break}if(f.tagClass===t.Class.UNIVERSAL)switch(d+=f.type,f.type){case t.Type.NONE:d+=" (None)";break;case t.Type.BOOLEAN:d+=" (Boolean)";break;case t.Type.INTEGER:d+=" (Integer)";break;case t.Type.BITSTRING:d+=" (Bit string)";break;case t.Type.OCTETSTRING:d+=" (Octet string)";break;case t.Type.NULL:d+=" (Null)";break;case t.Type.OID:d+=" (Object Identifier)";break;case t.Type.ODESC:d+=" (Object Descriptor)";break;case t.Type.EXTERNAL:d+=" (External or Instance of)";break;case t.Type.REAL:d+=" (Real)";break;case t.Type.ENUMERATED:d+=" (Enumerated)";break;case t.Type.EMBEDDED:d+=" (Embedded PDV)";break;case t.Type.UTF8:d+=" (UTF8)";break;case t.Type.ROID:d+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:d+=" (Sequence)";break;case t.Type.SET:d+=" (Set)";break;case t.Type.PRINTABLESTRING:d+=" (Printable String)";break;case t.Type.IA5String:d+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:d+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:d+=" (Generalized time)";break;case t.Type.BMPSTRING:d+=" (BMP String)";break}else d+=f.type;if(d+=`
`,d+=h+"Constructed: "+f.constructed+`
`,f.composed){for(var p=0,_="",g=0;g<f.value.length;++g)f.value[g]!==void 0&&(p+=1,_+=t.prettyPrint(f.value[g],a+1,c),g+1<f.value.length&&(_+=","));d+=h+"Sub values: "+p+_}else{if(d+=h+"Value: ",f.type===t.Type.OID){var m=t.derToOid(f.value);d+=m,r.pki&&r.pki.oids&&m in r.pki.oids&&(d+=" ("+r.pki.oids[m]+") ")}if(f.type===t.Type.INTEGER)try{d+=t.derToInteger(f.value)}catch{d+="0x"+r.util.bytesToHex(f.value)}else if(f.type===t.Type.BITSTRING){if(f.value.length>1?d+="0x"+r.util.bytesToHex(f.value.slice(1)):d+="(none)",f.value.length>0){var v=f.value.charCodeAt(0);v==1?d+=" (1 unused bit shown)":v>1&&(d+=" ("+v+" unused bits shown)")}}else f.type===t.Type.OCTETSTRING?(l.test(f.value)||(d+="("+f.value+") "),d+="0x"+r.util.bytesToHex(f.value)):f.type===t.Type.UTF8?d+=r.util.decodeUtf8(f.value):f.type===t.Type.PRINTABLESTRING||f.type===t.Type.IA5String?d+=f.value:l.test(f.value)?d+="0x"+r.util.bytesToHex(f.value):f.value.length===0?d+="[null]":d+=f.value}return d}}}),require_cipher=__commonJS({"node_modules/node-forge/lib/cipher.js"(e,o){init_node_globals();var r=require_forge();require_util(),o.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(n,s){var u=n;if(typeof u=="string"&&(u=r.cipher.getAlgorithm(u),u&&(u=u())),!u)throw new Error("Unsupported algorithm: "+n);return new r.cipher.BlockCipher({algorithm:u,key:s,decrypt:!1})},r.cipher.createDecipher=function(n,s){var u=n;if(typeof u=="string"&&(u=r.cipher.getAlgorithm(u),u&&(u=u())),!u)throw new Error("Unsupported algorithm: "+n);return new r.cipher.BlockCipher({algorithm:u,key:s,decrypt:!0})},r.cipher.registerAlgorithm=function(n,s){n=n.toUpperCase(),r.cipher.algorithms[n]=s},r.cipher.getAlgorithm=function(n){return n=n.toUpperCase(),n in r.cipher.algorithms?r.cipher.algorithms[n]:null};var t=r.cipher.BlockCipher=function(n){this.algorithm=n.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=n.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=n.decrypt,this.algorithm.initialize(n)};t.prototype.start=function(n){n=n||{};var s={};for(var u in n)s[u]=n[u];s.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=n.output||r.util.createBuffer(),this.mode.start(s)},t.prototype.update=function(n){for(n&&this._input.putBuffer(n);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(n){n&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(u){return n(this.blockSize,u,!1)},this.mode.unpad=function(u){return n(this.blockSize,u,!0)});var s={};return s.decrypt=this._decrypt,s.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,s)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,s))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,s))}}}),require_cipherModes=__commonJS({"node_modules/node-forge/lib/cipherModes.js"(e,o){init_node_globals();var r=require_forge();require_util(),r.cipher=r.cipher||{};var t=o.exports=r.cipher.modes=r.cipher.modes||{};t.ecb=function(l){l=l||{},this.name="ECB",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(l){},t.ecb.prototype.encrypt=function(l,f,a){if(l.length()<this.blockSize&&!(a&&l.length()>0))return!0;for(var c=0;c<this._ints;++c)this._inBlock[c]=l.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._ints;++c)f.putInt32(this._outBlock[c])},t.ecb.prototype.decrypt=function(l,f,a){if(l.length()<this.blockSize&&!(a&&l.length()>0))return!0;for(var c=0;c<this._ints;++c)this._inBlock[c]=l.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var c=0;c<this._ints;++c)f.putInt32(this._outBlock[c])},t.ecb.prototype.pad=function(l,f){var a=l.length()===this.blockSize?this.blockSize:this.blockSize-l.length();return l.fillWithByte(a,a),!0},t.ecb.prototype.unpad=function(l,f){if(f.overflow>0)return!1;var a=l.length(),c=l.at(a-1);return c>this.blockSize<<2?!1:(l.truncate(c),!0)},t.cbc=function(l){l=l||{},this.name="CBC",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(l){if(l.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in l)this._iv=n(l.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},t.cbc.prototype.encrypt=function(l,f,a){if(l.length()<this.blockSize&&!(a&&l.length()>0))return!0;for(var c=0;c<this._ints;++c)this._inBlock[c]=this._prev[c]^l.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var c=0;c<this._ints;++c)f.putInt32(this._outBlock[c]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(l,f,a){if(l.length()<this.blockSize&&!(a&&l.length()>0))return!0;for(var c=0;c<this._ints;++c)this._inBlock[c]=l.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var c=0;c<this._ints;++c)f.putInt32(this._prev[c]^this._outBlock[c]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(l,f){var a=l.length()===this.blockSize?this.blockSize:this.blockSize-l.length();return l.fillWithByte(a,a),!0},t.cbc.prototype.unpad=function(l,f){if(f.overflow>0)return!1;var a=l.length(),c=l.at(a-1);return c>this.blockSize<<2?!1:(l.truncate(c),!0)},t.cfb=function(l){l=l||{},this.name="CFB",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(l){if(!("iv"in l))throw new Error("Invalid IV parameter.");this._iv=n(l.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(l,f,a){var c=l.length();if(c===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&c>=this.blockSize){for(var d=0;d<this._ints;++d)this._inBlock[d]=l.getInt32()^this._outBlock[d],f.putInt32(this._inBlock[d]);return}var h=(this.blockSize-c)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var d=0;d<this._ints;++d)this._partialBlock[d]=l.getInt32()^this._outBlock[d],this._partialOutput.putInt32(this._partialBlock[d]);if(h>0)l.read-=this.blockSize;else for(var d=0;d<this._ints;++d)this._inBlock[d]=this._partialBlock[d];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return f.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;f.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=0},t.cfb.prototype.decrypt=function(l,f,a){var c=l.length();if(c===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&c>=this.blockSize){for(var d=0;d<this._ints;++d)this._inBlock[d]=l.getInt32(),f.putInt32(this._inBlock[d]^this._outBlock[d]);return}var h=(this.blockSize-c)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var d=0;d<this._ints;++d)this._partialBlock[d]=l.getInt32(),this._partialOutput.putInt32(this._partialBlock[d]^this._outBlock[d]);if(h>0)l.read-=this.blockSize;else for(var d=0;d<this._ints;++d)this._inBlock[d]=this._partialBlock[d];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return f.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;f.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=0},t.ofb=function(l){l=l||{},this.name="OFB",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(l){if(!("iv"in l))throw new Error("Invalid IV parameter.");this._iv=n(l.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(l,f,a){var c=l.length();if(l.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&c>=this.blockSize){for(var d=0;d<this._ints;++d)f.putInt32(l.getInt32()^this._outBlock[d]),this._inBlock[d]=this._outBlock[d];return}var h=(this.blockSize-c)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var d=0;d<this._ints;++d)this._partialOutput.putInt32(l.getInt32()^this._outBlock[d]);if(h>0)l.read-=this.blockSize;else for(var d=0;d<this._ints;++d)this._inBlock[d]=this._outBlock[d];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return f.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;f.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=0},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(l){l=l||{},this.name="CTR",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(l){if(!("iv"in l))throw new Error("Invalid IV parameter.");this._iv=n(l.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(l,f,a){var c=l.length();if(c===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&c>=this.blockSize)for(var d=0;d<this._ints;++d)f.putInt32(l.getInt32()^this._outBlock[d]);else{var h=(this.blockSize-c)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var d=0;d<this._ints;++d)this._partialOutput.putInt32(l.getInt32()^this._outBlock[d]);if(h>0&&(l.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return f.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;f.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(l){l=l||{},this.name="GCM",this.cipher=l.cipher,this.blockSize=l.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(l){if(!("iv"in l))throw new Error("Invalid IV parameter.");var f=r.util.createBuffer(l.iv);this._cipherLength=0;var a;if("additionalData"in l?a=r.util.createBuffer(l.additionalData):a=r.util.createBuffer(),"tagLength"in l?this._tagLength=l.tagLength:this._tagLength=128,this._tag=null,l.decrypt&&(this._tag=r.util.createBuffer(l.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var c=f.length();if(c===12)this._j0=[f.getInt32(),f.getInt32(),f.getInt32(),1];else{for(this._j0=[0,0,0,0];f.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[f.getInt32(),f.getInt32(),f.getInt32(),f.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(u(c*8)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,a=r.util.createBuffer(a),this._aDataLength=u(a.length()*8);var d=a.length()%this.blockSize;for(d&&a.fillWithByte(0,this.blockSize-d),this._s=[0,0,0,0];a.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()])},t.gcm.prototype.encrypt=function(l,f,a){var c=l.length();if(c===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&c>=this.blockSize){for(var d=0;d<this._ints;++d)f.putInt32(this._outBlock[d]^=l.getInt32());this._cipherLength+=this.blockSize}else{var h=(this.blockSize-c)%this.blockSize;h>0&&(h=this.blockSize-h),this._partialOutput.clear();for(var d=0;d<this._ints;++d)this._partialOutput.putInt32(l.getInt32()^this._outBlock[d]);if(h<=0||a){if(a){var g=c%this.blockSize;this._cipherLength+=g,this._partialOutput.truncate(this.blockSize-g)}else this._cipherLength+=this.blockSize;for(var d=0;d<this._ints;++d)this._outBlock[d]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),h>0&&!a)return l.read-=this.blockSize,f.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;f.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},t.gcm.prototype.decrypt=function(l,f,a){var c=l.length();if(c<this.blockSize&&!(a&&c>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=l.getInt32(),this._hashBlock[1]=l.getInt32(),this._hashBlock[2]=l.getInt32(),this._hashBlock[3]=l.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var d=0;d<this._ints;++d)f.putInt32(this._outBlock[d]^this._hashBlock[d]);c<this.blockSize?this._cipherLength+=c%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(l,f){var a=!0;f.decrypt&&f.overflow&&l.truncate(this.blockSize-f.overflow),this.tag=r.util.createBuffer();var c=this._aDataLength.concat(u(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,c);var d=[];this.cipher.encrypt(this._j0,d);for(var h=0;h<this._ints;++h)this.tag.putInt32(this._s[h]^d[h]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),f.decrypt&&this.tag.bytes()!==this._tag&&(a=!1),a},t.gcm.prototype.multiply=function(l,f){for(var a=[0,0,0,0],c=f.slice(0),d=0;d<128;++d){var h=l[d/32|0]&1<<31-d%32;h&&(a[0]^=c[0],a[1]^=c[1],a[2]^=c[2],a[3]^=c[3]),this.pow(c,c)}return a},t.gcm.prototype.pow=function(l,f){for(var a=l[3]&1,c=3;c>0;--c)f[c]=l[c]>>>1|(l[c-1]&1)<<31;f[0]=l[0]>>>1,a&&(f[0]^=this._R)},t.gcm.prototype.tableMultiply=function(l){for(var f=[0,0,0,0],a=0;a<32;++a){var c=a/8|0,d=l[c]>>>(7-a%8)*4&15,h=this._m[a][d];f[0]^=h[0],f[1]^=h[1],f[2]^=h[2],f[3]^=h[3]}return f},t.gcm.prototype.ghash=function(l,f,a){return f[0]^=a[0],f[1]^=a[1],f[2]^=a[2],f[3]^=a[3],this.tableMultiply(f)},t.gcm.prototype.generateHashTable=function(l,f){for(var a=8/f,c=4*a,d=16*a,h=new Array(d),g=0;g<d;++g){var p=[0,0,0,0],_=g/c|0,m=(c-1-g%c)*f;p[_]=1<<f-1<<m,h[g]=this.generateSubHashTable(this.multiply(p,l),f)}return h},t.gcm.prototype.generateSubHashTable=function(l,f){var a=1<<f,c=a>>>1,d=new Array(a);d[c]=l.slice(0);for(var h=c>>>1;h>0;)this.pow(d[2*h],d[h]=[]),h>>=1;for(h=2;h<c;){for(var g=1;g<h;++g){var p=d[h],_=d[g];d[h+g]=[p[0]^_[0],p[1]^_[1],p[2]^_[2],p[3]^_[3]]}h*=2}for(d[0]=[0,0,0,0],h=c+1;h<a;++h){var m=d[h^c];d[h]=[l[0]^m[0],l[1]^m[1],l[2]^m[2],l[3]^m[3]]}return d};function n(l,f){if(typeof l=="string"&&(l=r.util.createBuffer(l)),r.util.isArray(l)&&l.length>4){var a=l;l=r.util.createBuffer();for(var c=0;c<a.length;++c)l.putByte(a[c])}if(l.length()<f)throw new Error("Invalid IV length; got "+l.length()+" bytes and expected "+f+" bytes.");if(!r.util.isArray(l)){for(var d=[],h=f/4,c=0;c<h;++c)d.push(l.getInt32());l=d}return l}function s(l){l[l.length-1]=l[l.length-1]+1&4294967295}function u(l){return[l/4294967296|0,l&4294967295]}}}),require_aes=__commonJS({"node_modules/node-forge/lib/aes.js"(e,o){init_node_globals();var r=require_forge();require_cipher(),require_cipherModes(),require_util(),o.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(_,m,v,w){var y=p({key:_,output:v,decrypt:!1,mode:w});return y.start(m),y},r.aes.createEncryptionCipher=function(_,m){return p({key:_,output:null,decrypt:!1,mode:m})},r.aes.startDecrypting=function(_,m,v,w){var y=p({key:_,output:v,decrypt:!0,mode:w});return y.start(m),y},r.aes.createDecryptionCipher=function(_,m){return p({key:_,output:null,decrypt:!0,mode:m})},r.aes.Algorithm=function(_,m){n||d();var v=this;v.name=_,v.mode=new m({blockSize:16,cipher:{encrypt:function(w,y){return g(v._w,w,y,!1)},decrypt:function(w,y){return g(v._w,w,y,!0)}}}),v._init=!1},r.aes.Algorithm.prototype.initialize=function(_){if(!this._init){var m=_.key,v;if(typeof m=="string"&&(m.length===16||m.length===24||m.length===32))m=r.util.createBuffer(m);else if(r.util.isArray(m)&&(m.length===16||m.length===24||m.length===32)){v=m,m=r.util.createBuffer();for(var w=0;w<v.length;++w)m.putByte(v[w])}if(!r.util.isArray(m)){v=m,m=[];var y=v.length();if(y===16||y===24||y===32){y=y>>>2;for(var w=0;w<y;++w)m.push(v.getInt32())}}if(!r.util.isArray(m)||!(m.length===4||m.length===6||m.length===8))throw new Error("Invalid key parameter.");var b=this.mode.name,T=["CFB","OFB","CTR","GCM"].indexOf(b)!==-1;this._w=h(m,_.decrypt&&!T),this._init=!0}},r.aes._expandKey=function(_,m){return n||d(),h(_,m)},r.aes._updateBlock=g,t("AES-ECB",r.cipher.modes.ecb),t("AES-CBC",r.cipher.modes.cbc),t("AES-CFB",r.cipher.modes.cfb),t("AES-OFB",r.cipher.modes.ofb),t("AES-CTR",r.cipher.modes.ctr),t("AES-GCM",r.cipher.modes.gcm);function t(_,m){var v=function(){return new r.aes.Algorithm(_,m)};r.cipher.registerAlgorithm(_,v)}var n=!1,s=4,u,l,f,a,c;function d(){n=!0,f=[0,1,2,4,8,16,32,64,128,27,54];for(var _=new Array(256),m=0;m<128;++m)_[m]=m<<1,_[m+128]=m+128<<1^283;u=new Array(256),l=new Array(256),a=new Array(4),c=new Array(4);for(var m=0;m<4;++m)a[m]=new Array(256),c[m]=new Array(256);for(var v=0,w=0,y,b,T,R,S,E,A,m=0;m<256;++m){R=w^w<<1^w<<2^w<<3^w<<4,R=R>>8^R&255^99,u[v]=R,l[R]=v,S=_[R],y=_[v],b=_[y],T=_[b],E=S<<24^R<<16^R<<8^(R^S),A=(y^b^T)<<24^(v^T)<<16^(v^b^T)<<8^(v^y^T);for(var C=0;C<4;++C)a[C][v]=E,c[C][R]=A,E=E<<24|E>>>8,A=A<<24|A>>>8;v===0?v=w=1:(v=y^_[_[_[y^T]]],w^=_[_[w]])}}function h(_,m){for(var v=_.slice(0),w,y=1,b=v.length,T=b+6+1,R=s*T,S=b;S<R;++S)w=v[S-1],S%b==0?(w=u[w>>>16&255]<<24^u[w>>>8&255]<<16^u[w&255]<<8^u[w>>>24]^f[y]<<24,y++):b>6&&S%b==4&&(w=u[w>>>24]<<24^u[w>>>16&255]<<16^u[w>>>8&255]<<8^u[w&255]),v[S]=v[S-b]^w;if(m){var E,A=c[0],C=c[1],I=c[2],P=c[3],O=v.slice(0);R=v.length;for(var S=0,k=R-s;S<R;S+=s,k-=s)if(S===0||S===R-s)O[S]=v[k],O[S+1]=v[k+3],O[S+2]=v[k+2],O[S+3]=v[k+1];else for(var N=0;N<s;++N)E=v[k+N],O[S+(3&-N)]=A[u[E>>>24]]^C[u[E>>>16&255]]^I[u[E>>>8&255]]^P[u[E&255]];v=O}return v}function g(_,m,v,w){var y=_.length/4-1,b,T,R,S,E;w?(b=c[0],T=c[1],R=c[2],S=c[3],E=l):(b=a[0],T=a[1],R=a[2],S=a[3],E=u);var A,C,I,P,O,k,N;A=m[0]^_[0],C=m[w?3:1]^_[1],I=m[2]^_[2],P=m[w?1:3]^_[3];for(var K=3,U=1;U<y;++U)O=b[A>>>24]^T[C>>>16&255]^R[I>>>8&255]^S[P&255]^_[++K],k=b[C>>>24]^T[I>>>16&255]^R[P>>>8&255]^S[A&255]^_[++K],N=b[I>>>24]^T[P>>>16&255]^R[A>>>8&255]^S[C&255]^_[++K],P=b[P>>>24]^T[A>>>16&255]^R[C>>>8&255]^S[I&255]^_[++K],A=O,C=k,I=N;v[0]=E[A>>>24]<<24^E[C>>>16&255]<<16^E[I>>>8&255]<<8^E[P&255]^_[++K],v[w?3:1]=E[C>>>24]<<24^E[I>>>16&255]<<16^E[P>>>8&255]<<8^E[A&255]^_[++K],v[2]=E[I>>>24]<<24^E[P>>>16&255]<<16^E[A>>>8&255]<<8^E[C&255]^_[++K],v[w?1:3]=E[P>>>24]<<24^E[A>>>16&255]<<16^E[C>>>8&255]<<8^E[I&255]^_[++K]}function p(_){_=_||{};var m=(_.mode||"CBC").toUpperCase(),v="AES-"+m,w;_.decrypt?w=r.cipher.createDecipher(v,_.key):w=r.cipher.createCipher(v,_.key);var y=w.start;return w.start=function(b,T){var R=null;T instanceof r.util.ByteBuffer&&(R=T,T={}),T=T||{},T.output=R,T.iv=b,y.call(w,T)},w}}}),require_des=__commonJS({"node_modules/node-forge/lib/des.js"(e,o){init_node_globals();var r=require_forge();require_cipher(),require_cipherModes(),require_util(),o.exports=r.des=r.des||{},r.des.startEncrypting=function(_,m,v,w){var y=p({key:_,output:v,decrypt:!1,mode:w||(m===null?"ECB":"CBC")});return y.start(m),y},r.des.createEncryptionCipher=function(_,m){return p({key:_,output:null,decrypt:!1,mode:m})},r.des.startDecrypting=function(_,m,v,w){var y=p({key:_,output:v,decrypt:!0,mode:w||(m===null?"ECB":"CBC")});return y.start(m),y},r.des.createDecryptionCipher=function(_,m){return p({key:_,output:null,decrypt:!0,mode:m})},r.des.Algorithm=function(_,m){var v=this;v.name=_,v.mode=new m({blockSize:8,cipher:{encrypt:function(w,y){return g(v._keys,w,y,!1)},decrypt:function(w,y){return g(v._keys,w,y,!0)}}}),v._init=!1},r.des.Algorithm.prototype.initialize=function(_){if(!this._init){var m=r.util.createBuffer(_.key);if(this.name.indexOf("3DES")===0&&m.length()!==24)throw new Error("Invalid Triple-DES key size: "+m.length()*8);this._keys=h(m),this._init=!0}},t("DES-ECB",r.cipher.modes.ecb),t("DES-CBC",r.cipher.modes.cbc),t("DES-CFB",r.cipher.modes.cfb),t("DES-OFB",r.cipher.modes.ofb),t("DES-CTR",r.cipher.modes.ctr),t("3DES-ECB",r.cipher.modes.ecb),t("3DES-CBC",r.cipher.modes.cbc),t("3DES-CFB",r.cipher.modes.cfb),t("3DES-OFB",r.cipher.modes.ofb),t("3DES-CTR",r.cipher.modes.ctr);function t(_,m){var v=function(){return new r.des.Algorithm(_,m)};r.cipher.registerAlgorithm(_,v)}var n=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],u=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],l=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],f=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],a=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],c=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(_){for(var m=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],v=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],w=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],y=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],b=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],T=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],R=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],S=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],E=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],A=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],C=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],I=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],P=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],O=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],k=_.length()>8?3:1,N=[],K=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],U=0,L,re=0;re<k;re++){var Z=_.getInt32(),V=_.getInt32();L=(Z>>>4^V)&252645135,V^=L,Z^=L<<4,L=(V>>>-16^Z)&65535,Z^=L,V^=L<<-16,L=(Z>>>2^V)&858993459,V^=L,Z^=L<<2,L=(V>>>-16^Z)&65535,Z^=L,V^=L<<-16,L=(Z>>>1^V)&1431655765,V^=L,Z^=L<<1,L=(V>>>8^Z)&16711935,Z^=L,V^=L<<8,L=(Z>>>1^V)&1431655765,V^=L,Z^=L<<1,L=Z<<8|V>>>20&240,Z=V<<24|V<<8&16711680|V>>>8&65280|V>>>24&240,V=L;for(var ee=0;ee<K.length;++ee){K[ee]?(Z=Z<<2|Z>>>26,V=V<<2|V>>>26):(Z=Z<<1|Z>>>27,V=V<<1|V>>>27),Z&=-15,V&=-15;var fe=m[Z>>>28]|v[Z>>>24&15]|w[Z>>>20&15]|y[Z>>>16&15]|b[Z>>>12&15]|T[Z>>>8&15]|R[Z>>>4&15],_e=S[V>>>28]|E[V>>>24&15]|A[V>>>20&15]|C[V>>>16&15]|I[V>>>12&15]|P[V>>>8&15]|O[V>>>4&15];L=(_e>>>16^fe)&65535,N[U++]=fe^L,N[U++]=_e^L<<16}}return N}function g(_,m,v,w){var y=_.length===32?3:9,b;y===3?b=w?[30,-2,-2]:[0,32,2]:b=w?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var T,R=m[0],S=m[1];T=(R>>>4^S)&252645135,S^=T,R^=T<<4,T=(R>>>16^S)&65535,S^=T,R^=T<<16,T=(S>>>2^R)&858993459,R^=T,S^=T<<2,T=(S>>>8^R)&16711935,R^=T,S^=T<<8,T=(R>>>1^S)&1431655765,S^=T,R^=T<<1,R=R<<1|R>>>31,S=S<<1|S>>>31;for(var E=0;E<y;E+=3){for(var A=b[E+1],C=b[E+2],I=b[E];I!=A;I+=C){var P=S^_[I],O=(S>>>4|S<<28)^_[I+1];T=R,R=S,S=T^(s[P>>>24&63]|l[P>>>16&63]|a[P>>>8&63]|d[P&63]|n[O>>>24&63]|u[O>>>16&63]|f[O>>>8&63]|c[O&63])}T=R,R=S,S=T}R=R>>>1|R<<31,S=S>>>1|S<<31,T=(R>>>1^S)&1431655765,S^=T,R^=T<<1,T=(S>>>8^R)&16711935,R^=T,S^=T<<8,T=(S>>>2^R)&858993459,R^=T,S^=T<<2,T=(R>>>16^S)&65535,S^=T,R^=T<<16,T=(R>>>4^S)&252645135,S^=T,R^=T<<4,v[0]=R,v[1]=S}function p(_){_=_||{};var m=(_.mode||"CBC").toUpperCase(),v="DES-"+m,w;_.decrypt?w=r.cipher.createDecipher(v,_.key):w=r.cipher.createCipher(v,_.key);var y=w.start;return w.start=function(b,T){var R=null;T instanceof r.util.ByteBuffer&&(R=T,T={}),T=T||{},T.output=R,T.iv=b,y.call(w,T)},w}}}),require_md=__commonJS({"node_modules/node-forge/lib/md.js"(e,o){init_node_globals();var r=require_forge();o.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}}}),require_hmac=__commonJS({"node_modules/node-forge/lib/hmac.js"(e,o){init_node_globals();var r=require_forge();require_md(),require_util();var t=o.exports=r.hmac=r.hmac||{};t.create=function(){var n=null,s=null,u=null,l=null,f={};return f.start=function(a,c){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in r.md.algorithms)s=r.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else s=a;if(c===null)c=n;else{if(typeof c=="string")c=r.util.createBuffer(c);else if(r.util.isArray(c)){var d=c;c=r.util.createBuffer();for(var h=0;h<d.length;++h)c.putByte(d[h])}var g=c.length();g>s.blockLength&&(s.start(),s.update(c.bytes()),c=s.digest()),u=r.util.createBuffer(),l=r.util.createBuffer(),g=c.length();for(var h=0;h<g;++h){var d=c.at(h);u.putByte(54^d),l.putByte(92^d)}if(g<s.blockLength)for(var d=s.blockLength-g,h=0;h<d;++h)u.putByte(54),l.putByte(92);n=c,u=u.bytes(),l=l.bytes()}s.start(),s.update(u)},f.update=function(a){s.update(a)},f.getMac=function(){var a=s.digest().bytes();return s.start(),s.update(l),s.update(a),s.digest()},f.digest=f.getMac,f}}}),require_crypto=__commonJS({"(disabled):crypto"(){init_node_globals()}}),require_pbkdf2=__commonJS({"node_modules/node-forge/lib/pbkdf2.js"(e,o){init_node_globals();var r=require_forge();require_hmac(),require_md(),require_util();var t=r.pkcs5=r.pkcs5||{},n;r.util.isNodejs&&!r.options.usePureJavaScript&&(n=require_crypto()),o.exports=r.pbkdf2=t.pbkdf2=function(s,u,l,f,a,c){if(typeof a=="function"&&(c=a,a=null),r.util.isNodejs&&!r.options.usePureJavaScript&&n.pbkdf2&&(a===null||typeof a!="object")&&(n.pbkdf2Sync.length>4||!a||a==="sha1"))return typeof a!="string"&&(a="sha1"),s=Buffer.from(s,"binary"),u=Buffer.from(u,"binary"),c?n.pbkdf2Sync.length===4?n.pbkdf2(s,u,l,f,function(E,A){if(E)return c(E);c(null,A.toString("binary"))}):n.pbkdf2(s,u,l,f,a,function(E,A){if(E)return c(E);c(null,A.toString("binary"))}):n.pbkdf2Sync.length===4?n.pbkdf2Sync(s,u,l,f).toString("binary"):n.pbkdf2Sync(s,u,l,f,a).toString("binary");if((typeof a=="undefined"||a===null)&&(a="sha1"),typeof a=="string"){if(!(a in r.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=r.md[a].create()}var d=a.digestLength;if(f>4294967295*d){var h=new Error("Derived key is too long.");if(c)return c(h);throw h}var g=Math.ceil(f/d),p=f-(g-1)*d,_=r.hmac.create();_.start(a,s);var m="",v,w,y;if(!c){for(var b=1;b<=g;++b){_.start(null,null),_.update(u),_.update(r.util.int32ToBytes(b)),v=y=_.digest().getBytes();for(var T=2;T<=l;++T)_.start(null,null),_.update(y),w=_.digest().getBytes(),v=r.util.xorBytes(v,w,d),y=w;m+=b<g?v:v.substr(0,p)}return m}var b=1,T;function R(){if(b>g)return c(null,m);_.start(null,null),_.update(u),_.update(r.util.int32ToBytes(b)),v=y=_.digest().getBytes(),T=2,S()}function S(){if(T<=l)return _.start(null,null),_.update(y),w=_.digest().getBytes(),v=r.util.xorBytes(v,w,d),y=w,++T,r.util.setImmediate(S);m+=b<g?v:v.substr(0,p),++b,R()}R()}}}),require_pem=__commonJS({"node_modules/node-forge/lib/pem.js"(e,o){init_node_globals();var r=require_forge();require_util();var t=o.exports=r.pem=r.pem||{};t.encode=function(u,l){l=l||{};var f="-----BEGIN "+u.type+`-----\r
`,a;if(u.procType&&(a={name:"Proc-Type",values:[String(u.procType.version),u.procType.type]},f+=n(a)),u.contentDomain&&(a={name:"Content-Domain",values:[u.contentDomain]},f+=n(a)),u.dekInfo&&(a={name:"DEK-Info",values:[u.dekInfo.algorithm]},u.dekInfo.parameters&&a.values.push(u.dekInfo.parameters),f+=n(a)),u.headers)for(var c=0;c<u.headers.length;++c)f+=n(u.headers[c]);return u.procType&&(f+=`\r
`),f+=r.util.encode64(u.body,l.maxline||64)+`\r
`,f+="-----END "+u.type+`-----\r
`,f},t.decode=function(u){for(var l=[],f=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,c=/\r?\n/,d;d=f.exec(u),!!d;){var h=d[1];h==="NEW CERTIFICATE REQUEST"&&(h="CERTIFICATE REQUEST");var g={type:h,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(d[3])};if(l.push(g),!!d[2]){for(var p=d[2].split(c),_=0;d&&_<p.length;){for(var m=p[_].replace(/\s+$/,""),v=_+1;v<p.length;++v){var w=p[v];if(!/\s/.test(w[0]))break;m+=w,_=v}if(d=m.match(a),d){for(var y={name:d[1],values:[]},b=d[2].split(","),T=0;T<b.length;++T)y.values.push(s(b[T]));if(g.procType)if(!g.contentDomain&&y.name==="Content-Domain")g.contentDomain=b[0]||"";else if(!g.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');g.dekInfo={algorithm:b[0],parameters:b[1]||null}}else g.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');g.procType={version:b[0],type:b[1]}}}++_}if(g.procType==="ENCRYPTED"&&!g.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(l.length===0)throw new Error("Invalid PEM formatted message.");return l};function n(u){for(var l=u.name+": ",f=[],a=function(p,_){return" "+_},c=0;c<u.values.length;++c)f.push(u.values[c].replace(/^(\S+\r\n)/,a));l+=f.join(",")+`\r
`;for(var d=0,h=-1,c=0;c<l.length;++c,++d)if(d>65&&h!==-1){var g=l[h];g===","?(++h,l=l.substr(0,h)+`\r
 `+l.substr(h)):l=l.substr(0,h)+`\r
`+g+l.substr(h+1),d=c-h-1,h=-1,++c}else(l[c]===" "||l[c]==="	"||l[c]===",")&&(h=c);return l}function s(u){return u.replace(/^\s+/,"")}}}),require_sha256=__commonJS({"node_modules/node-forge/lib/sha256.js"(e,o){init_node_globals();var r=require_forge();require_md(),require_util();var t=o.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=t,t.create=function(){s||l();var a=null,c=r.util.createBuffer(),d=new Array(64),h={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return h.start=function(){h.messageLength=0,h.fullMessageLength=h.messageLength64=[];for(var g=h.messageLengthSize/4,p=0;p<g;++p)h.fullMessageLength.push(0);return c=r.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},h},h.start(),h.update=function(g,p){p==="utf8"&&(g=r.util.encodeUtf8(g));var _=g.length;h.messageLength+=_,_=[_/4294967296>>>0,_>>>0];for(var m=h.fullMessageLength.length-1;m>=0;--m)h.fullMessageLength[m]+=_[1],_[1]=_[0]+(h.fullMessageLength[m]/4294967296>>>0),h.fullMessageLength[m]=h.fullMessageLength[m]>>>0,_[0]=_[1]/4294967296>>>0;return c.putBytes(g),f(a,d,c),(c.read>2048||c.length()===0)&&c.compact(),h},h.digest=function(){var g=r.util.createBuffer();g.putBytes(c.bytes());var p=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize,_=p&h.blockLength-1;g.putBytes(n.substr(0,h.blockLength-_));for(var m,v,w=h.fullMessageLength[0]*8,y=0;y<h.fullMessageLength.length-1;++y)m=h.fullMessageLength[y+1]*8,v=m/4294967296>>>0,w+=v,g.putInt32(w>>>0),w=m>>>0;g.putInt32(w);var b={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};f(b,d,g);var T=r.util.createBuffer();return T.putInt32(b.h0),T.putInt32(b.h1),T.putInt32(b.h2),T.putInt32(b.h3),T.putInt32(b.h4),T.putInt32(b.h5),T.putInt32(b.h6),T.putInt32(b.h7),T},h};var n=null,s=!1,u=null;function l(){n=String.fromCharCode(128),n+=r.util.fillString(String.fromCharCode(0),64),u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0}function f(a,c,d){for(var h,g,p,_,m,v,w,y,b,T,R,S,E,A,C,I=d.length();I>=64;){for(w=0;w<16;++w)c[w]=d.getInt32();for(;w<64;++w)h=c[w-2],h=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,g=c[w-15],g=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3,c[w]=h+c[w-7]+g+c[w-16]|0;for(y=a.h0,b=a.h1,T=a.h2,R=a.h3,S=a.h4,E=a.h5,A=a.h6,C=a.h7,w=0;w<64;++w)_=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),m=A^S&(E^A),p=(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10),v=y&b|T&(y^b),h=C+_+m+u[w]+c[w],g=p+v,C=A,A=E,E=S,S=R+h>>>0,R=T,T=b,b=y,y=h+g>>>0;a.h0=a.h0+y|0,a.h1=a.h1+b|0,a.h2=a.h2+T|0,a.h3=a.h3+R|0,a.h4=a.h4+S|0,a.h5=a.h5+E|0,a.h6=a.h6+A|0,a.h7=a.h7+C|0,I-=64}}}}),require_prng=__commonJS({"node_modules/node-forge/lib/prng.js"(e,o){init_node_globals();var r=require_forge();require_util();var t=null;r.util.isNodejs&&!r.options.usePureJavaScript&&!process.versions["node-webkit"]&&(t=require_crypto());var n=o.exports=r.prng=r.prng||{};n.create=function(s){for(var u={plugin:s,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},l=s.md,f=new Array(32),a=0;a<32;++a)f[a]=l.create();u.pools=f,u.pool=0,u.generate=function(p,_){if(!_)return u.generateSync(p);var m=u.plugin.cipher,v=u.plugin.increment,w=u.plugin.formatKey,y=u.plugin.formatSeed,b=r.util.createBuffer();u.key=null,T();function T(R){if(R)return _(R);if(b.length()>=p)return _(null,b.getBytes(p));if(u.generated>1048575&&(u.key=null),u.key===null)return r.util.nextTick(function(){c(T)});var S=m(u.key,u.seed);u.generated+=S.length,b.putBytes(S),u.key=w(m(u.key,v(u.seed))),u.seed=y(m(u.key,u.seed)),r.util.setImmediate(T)}},u.generateSync=function(p){var _=u.plugin.cipher,m=u.plugin.increment,v=u.plugin.formatKey,w=u.plugin.formatSeed;u.key=null;for(var y=r.util.createBuffer();y.length()<p;){u.generated>1048575&&(u.key=null),u.key===null&&d();var b=_(u.key,u.seed);u.generated+=b.length,y.putBytes(b),u.key=v(_(u.key,m(u.seed))),u.seed=w(_(u.key,u.seed))}return y.getBytes(p)};function c(p){if(u.pools[0].messageLength>=32)return h(),p();var _=32-u.pools[0].messageLength<<5;u.seedFile(_,function(m,v){if(m)return p(m);u.collect(v),h(),p()})}function d(){if(u.pools[0].messageLength>=32)return h();var p=32-u.pools[0].messageLength<<5;u.collect(u.seedFileSync(p)),h()}function h(){u.reseeds=u.reseeds===4294967295?0:u.reseeds+1;var p=u.plugin.md.create();p.update(u.keyBytes);for(var _=1,m=0;m<32;++m)u.reseeds%_==0&&(p.update(u.pools[m].digest().getBytes()),u.pools[m].start()),_=_<<1;u.keyBytes=p.digest().getBytes(),p.start(),p.update(u.keyBytes);var v=p.digest().getBytes();u.key=u.plugin.formatKey(u.keyBytes),u.seed=u.plugin.formatSeed(v),u.generated=0}function g(p){var _=null,m=r.util.globalScope,v=m.crypto||m.msCrypto;v&&v.getRandomValues&&(_=function(C){return v.getRandomValues(C)});var w=r.util.createBuffer();if(_)for(;w.length()<p;){var y=Math.max(1,Math.min(p-w.length(),65536)/4),b=new Uint32Array(Math.floor(y));try{_(b);for(var T=0;T<b.length;++T)w.putInt32(b[T])}catch(C){if(!(typeof QuotaExceededError!="undefined"&&C instanceof QuotaExceededError))throw C}}if(w.length()<p)for(var R,S,E,A=Math.floor(Math.random()*65536);w.length()<p;){S=16807*(A&65535),R=16807*(A>>16),S+=(R&32767)<<16,S+=R>>15,S=(S&2147483647)+(S>>31),A=S&4294967295;for(var T=0;T<3;++T)E=A>>>(T<<3),E^=Math.floor(Math.random()*256),w.putByte(E&255)}return w.getBytes(p)}return t?(u.seedFile=function(p,_){t.randomBytes(p,function(m,v){if(m)return _(m);_(null,v.toString())})},u.seedFileSync=function(p){return t.randomBytes(p).toString()}):(u.seedFile=function(p,_){try{_(null,g(p))}catch(m){_(m)}},u.seedFileSync=g),u.collect=function(p){for(var _=p.length,m=0;m<_;++m)u.pools[u.pool].update(p.substr(m,1)),u.pool=u.pool===31?0:u.pool+1},u.collectInt=function(p,_){for(var m="",v=0;v<_;v+=8)m+=String.fromCharCode(p>>v&255);u.collect(m)},u.registerWorker=function(p){if(p===self)u.seedFile=function(m,v){function w(y){var b=y.data;b.forge&&b.forge.prng&&(self.removeEventListener("message",w),v(b.forge.prng.err,b.forge.prng.bytes))}self.addEventListener("message",w),self.postMessage({forge:{prng:{needed:m}}})};else{var _=function(m){var v=m.data;v.forge&&v.forge.prng&&u.seedFile(v.forge.prng.needed,function(w,y){p.postMessage({forge:{prng:{err:w,bytes:y}}})})};p.addEventListener("message",_)}},u}}}),require_random=__commonJS({"node_modules/node-forge/lib/random.js"(e,o){init_node_globals();var r=require_forge();require_aes(),require_sha256(),require_prng(),require_util(),function(){if(r.random&&r.random.getBytes){o.exports=r.random;return}(function(t){var n={},s=new Array(4),u=r.util.createBuffer();n.formatKey=function(p){var _=r.util.createBuffer(p);return p=new Array(4),p[0]=_.getInt32(),p[1]=_.getInt32(),p[2]=_.getInt32(),p[3]=_.getInt32(),r.aes._expandKey(p,!1)},n.formatSeed=function(p){var _=r.util.createBuffer(p);return p=new Array(4),p[0]=_.getInt32(),p[1]=_.getInt32(),p[2]=_.getInt32(),p[3]=_.getInt32(),p},n.cipher=function(p,_){return r.aes._updateBlock(p,_,s,!1),u.putInt32(s[0]),u.putInt32(s[1]),u.putInt32(s[2]),u.putInt32(s[3]),u.getBytes()},n.increment=function(p){return++p[3],p},n.md=r.md.sha256;function l(){var p=r.prng.create(n);return p.getBytes=function(_,m){return p.generate(_,m)},p.getBytesSync=function(_){return p.generate(_)},p}var f=l(),a=null,c=r.util.globalScope,d=c.crypto||c.msCrypto;if(d&&d.getRandomValues&&(a=function(p){return d.getRandomValues(p)}),r.options.usePureJavaScript||!r.util.isNodejs&&!a){if(f.collectInt(+new Date,32),typeof navigator!="undefined"){var h="";for(var g in navigator)try{typeof navigator[g]=="string"&&(h+=navigator[g])}catch{}f.collect(h),h=null}t&&(t().mousemove(function(p){f.collectInt(p.clientX,16),f.collectInt(p.clientY,16)}),t().keypress(function(p){f.collectInt(p.charCode,8)}))}if(!r.random)r.random=f;else for(var g in f)r.random[g]=f[g];r.random.createInstance=l,o.exports=r.random})(typeof jQuery!="undefined"?jQuery:null)}()}}),require_rc2=__commonJS({"node_modules/node-forge/lib/rc2.js"(e,o){init_node_globals();var r=require_forge();require_util();var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n=[1,2,3,5],s=function(f,a){return f<<a&65535|(f&65535)>>16-a},u=function(f,a){return(f&65535)>>a|f<<16-a&65535};o.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(f,a){typeof f=="string"&&(f=r.util.createBuffer(f)),a=a||128;var c=f,d=f.length(),h=a,g=Math.ceil(h/8),p=255>>(h&7),_;for(_=d;_<128;_++)c.putByte(t[c.at(_-1)+c.at(_-d)&255]);for(c.setAt(128-g,t[c.at(128-g)&p]),_=127-g;_>=0;_--)c.setAt(_,t[c.at(_+1)^c.at(_+g)]);return c};var l=function(f,a,c){var d=!1,h=null,g=null,p=null,_,m,v,w,y=[];for(f=r.rc2.expandKey(f,a),v=0;v<64;v++)y.push(f.getInt16Le());c?(_=function(R){for(v=0;v<4;v++)R[v]+=y[w]+(R[(v+3)%4]&R[(v+2)%4])+(~R[(v+3)%4]&R[(v+1)%4]),R[v]=s(R[v],n[v]),w++},m=function(R){for(v=0;v<4;v++)R[v]+=y[R[(v+3)%4]&63]}):(_=function(R){for(v=3;v>=0;v--)R[v]=u(R[v],n[v]),R[v]-=y[w]+(R[(v+3)%4]&R[(v+2)%4])+(~R[(v+3)%4]&R[(v+1)%4]),w--},m=function(R){for(v=3;v>=0;v--)R[v]-=y[R[(v+3)%4]&63]});var b=function(R){var S=[];for(v=0;v<4;v++){var E=h.getInt16Le();p!==null&&(c?E^=p.getInt16Le():p.putInt16Le(E)),S.push(E&65535)}w=c?0:63;for(var A=0;A<R.length;A++)for(var C=0;C<R[A][0];C++)R[A][1](S);for(v=0;v<4;v++)p!==null&&(c?p.putInt16Le(S[v]):S[v]^=p.getInt16Le()),g.putInt16Le(S[v])},T=null;return T={start:function(R,S){R&&typeof R=="string"&&(R=r.util.createBuffer(R)),d=!1,h=r.util.createBuffer(),g=S||new r.util.createBuffer,p=R,T.output=g},update:function(R){for(d||h.putBuffer(R);h.length()>=8;)b([[5,_],[1,m],[6,_],[1,m],[5,_]])},finish:function(R){var S=!0;if(c)if(R)S=R(8,h,!c);else{var E=h.length()===8?8:8-h.length();h.fillWithByte(E,E)}if(S&&(d=!0,T.update()),!c&&(S=h.length()===0,S))if(R)S=R(8,g,!c);else{var A=g.length(),C=g.at(A-1);C>A?S=!1:g.truncate(C)}return S}},T};r.rc2.startEncrypting=function(f,a,c){var d=r.rc2.createEncryptionCipher(f,128);return d.start(a,c),d},r.rc2.createEncryptionCipher=function(f,a){return l(f,a,!0)},r.rc2.startDecrypting=function(f,a,c){var d=r.rc2.createDecryptionCipher(f,128);return d.start(a,c),d},r.rc2.createDecryptionCipher=function(f,a){return l(f,a,!1)}}}),require_jsbn=__commonJS({"node_modules/node-forge/lib/jsbn.js"(e,o){init_node_globals();var r=require_forge();o.exports=r.jsbn=r.jsbn||{};var t;function n(te,oe,me){this.data=[],te!=null&&(typeof te=="number"?this.fromNumber(te,oe,me):oe==null&&typeof te!="string"?this.fromString(te,256):this.fromString(te,oe))}r.jsbn.BigInteger=n;function s(){return new n(null)}function u(te,oe,me,Pe,xe,Fe){for(;--Fe>=0;){var We=oe*this.data[te++]+me.data[Pe]+xe;xe=Math.floor(We/67108864),me.data[Pe++]=We&67108863}return xe}function l(te,oe,me,Pe,xe,Fe){for(var We=oe&32767,Je=oe>>15;--Fe>=0;){var et=this.data[te]&32767,at=this.data[te++]>>15,gt=Je*et+at*We;et=We*et+((gt&32767)<<15)+me.data[Pe]+(xe&1073741823),xe=(et>>>30)+(gt>>>15)+Je*at+(xe>>>30),me.data[Pe++]=et&1073741823}return xe}function f(te,oe,me,Pe,xe,Fe){for(var We=oe&16383,Je=oe>>14;--Fe>=0;){var et=this.data[te]&16383,at=this.data[te++]>>14,gt=Je*et+at*We;et=We*et+((gt&16383)<<14)+me.data[Pe]+xe,xe=(et>>28)+(gt>>14)+Je*at,me.data[Pe++]=et&268435455}return xe}typeof navigator=="undefined"?(n.prototype.am=f,t=28):navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=l,t=30):navigator.appName!="Netscape"?(n.prototype.am=u,t=26):(n.prototype.am=f,t=28),n.prototype.DB=t,n.prototype.DM=(1<<t)-1,n.prototype.DV=1<<t;var a=52;n.prototype.FV=Math.pow(2,a),n.prototype.F1=a-t,n.prototype.F2=2*t-a;var c="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array,h,g;for(h="0".charCodeAt(0),g=0;g<=9;++g)d[h++]=g;for(h="a".charCodeAt(0),g=10;g<36;++g)d[h++]=g;for(h="A".charCodeAt(0),g=10;g<36;++g)d[h++]=g;function p(te){return c.charAt(te)}function _(te,oe){var me=d[te.charCodeAt(oe)];return me==null?-1:me}function m(te){for(var oe=this.t-1;oe>=0;--oe)te.data[oe]=this.data[oe];te.t=this.t,te.s=this.s}function v(te){this.t=1,this.s=te<0?-1:0,te>0?this.data[0]=te:te<-1?this.data[0]=te+this.DV:this.t=0}function w(te){var oe=s();return oe.fromInt(te),oe}function y(te,oe){var me;if(oe==16)me=4;else if(oe==8)me=3;else if(oe==256)me=8;else if(oe==2)me=1;else if(oe==32)me=5;else if(oe==4)me=2;else{this.fromRadix(te,oe);return}this.t=0,this.s=0;for(var Pe=te.length,xe=!1,Fe=0;--Pe>=0;){var We=me==8?te[Pe]&255:_(te,Pe);if(We<0){te.charAt(Pe)=="-"&&(xe=!0);continue}xe=!1,Fe==0?this.data[this.t++]=We:Fe+me>this.DB?(this.data[this.t-1]|=(We&(1<<this.DB-Fe)-1)<<Fe,this.data[this.t++]=We>>this.DB-Fe):this.data[this.t-1]|=We<<Fe,Fe+=me,Fe>=this.DB&&(Fe-=this.DB)}me==8&&(te[0]&128)!=0&&(this.s=-1,Fe>0&&(this.data[this.t-1]|=(1<<this.DB-Fe)-1<<Fe)),this.clamp(),xe&&n.ZERO.subTo(this,this)}function b(){for(var te=this.s&this.DM;this.t>0&&this.data[this.t-1]==te;)--this.t}function T(te){if(this.s<0)return"-"+this.negate().toString(te);var oe;if(te==16)oe=4;else if(te==8)oe=3;else if(te==2)oe=1;else if(te==32)oe=5;else if(te==4)oe=2;else return this.toRadix(te);var me=(1<<oe)-1,Pe,xe=!1,Fe="",We=this.t,Je=this.DB-We*this.DB%oe;if(We-- >0)for(Je<this.DB&&(Pe=this.data[We]>>Je)>0&&(xe=!0,Fe=p(Pe));We>=0;)Je<oe?(Pe=(this.data[We]&(1<<Je)-1)<<oe-Je,Pe|=this.data[--We]>>(Je+=this.DB-oe)):(Pe=this.data[We]>>(Je-=oe)&me,Je<=0&&(Je+=this.DB,--We)),Pe>0&&(xe=!0),xe&&(Fe+=p(Pe));return xe?Fe:"0"}function R(){var te=s();return n.ZERO.subTo(this,te),te}function S(){return this.s<0?this.negate():this}function E(te){var oe=this.s-te.s;if(oe!=0)return oe;var me=this.t;if(oe=me-te.t,oe!=0)return this.s<0?-oe:oe;for(;--me>=0;)if((oe=this.data[me]-te.data[me])!=0)return oe;return 0}function A(te){var oe=1,me;return(me=te>>>16)!=0&&(te=me,oe+=16),(me=te>>8)!=0&&(te=me,oe+=8),(me=te>>4)!=0&&(te=me,oe+=4),(me=te>>2)!=0&&(te=me,oe+=2),(me=te>>1)!=0&&(te=me,oe+=1),oe}function C(){return this.t<=0?0:this.DB*(this.t-1)+A(this.data[this.t-1]^this.s&this.DM)}function I(te,oe){var me;for(me=this.t-1;me>=0;--me)oe.data[me+te]=this.data[me];for(me=te-1;me>=0;--me)oe.data[me]=0;oe.t=this.t+te,oe.s=this.s}function P(te,oe){for(var me=te;me<this.t;++me)oe.data[me-te]=this.data[me];oe.t=Math.max(this.t-te,0),oe.s=this.s}function O(te,oe){var me=te%this.DB,Pe=this.DB-me,xe=(1<<Pe)-1,Fe=Math.floor(te/this.DB),We=this.s<<me&this.DM,Je;for(Je=this.t-1;Je>=0;--Je)oe.data[Je+Fe+1]=this.data[Je]>>Pe|We,We=(this.data[Je]&xe)<<me;for(Je=Fe-1;Je>=0;--Je)oe.data[Je]=0;oe.data[Fe]=We,oe.t=this.t+Fe+1,oe.s=this.s,oe.clamp()}function k(te,oe){oe.s=this.s;var me=Math.floor(te/this.DB);if(me>=this.t){oe.t=0;return}var Pe=te%this.DB,xe=this.DB-Pe,Fe=(1<<Pe)-1;oe.data[0]=this.data[me]>>Pe;for(var We=me+1;We<this.t;++We)oe.data[We-me-1]|=(this.data[We]&Fe)<<xe,oe.data[We-me]=this.data[We]>>Pe;Pe>0&&(oe.data[this.t-me-1]|=(this.s&Fe)<<xe),oe.t=this.t-me,oe.clamp()}function N(te,oe){for(var me=0,Pe=0,xe=Math.min(te.t,this.t);me<xe;)Pe+=this.data[me]-te.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;if(te.t<this.t){for(Pe-=te.s;me<this.t;)Pe+=this.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;Pe+=this.s}else{for(Pe+=this.s;me<te.t;)Pe-=te.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;Pe-=te.s}oe.s=Pe<0?-1:0,Pe<-1?oe.data[me++]=this.DV+Pe:Pe>0&&(oe.data[me++]=Pe),oe.t=me,oe.clamp()}function K(te,oe){var me=this.abs(),Pe=te.abs(),xe=me.t;for(oe.t=xe+Pe.t;--xe>=0;)oe.data[xe]=0;for(xe=0;xe<Pe.t;++xe)oe.data[xe+me.t]=me.am(0,Pe.data[xe],oe,xe,0,me.t);oe.s=0,oe.clamp(),this.s!=te.s&&n.ZERO.subTo(oe,oe)}function U(te){for(var oe=this.abs(),me=te.t=2*oe.t;--me>=0;)te.data[me]=0;for(me=0;me<oe.t-1;++me){var Pe=oe.am(me,oe.data[me],te,2*me,0,1);(te.data[me+oe.t]+=oe.am(me+1,2*oe.data[me],te,2*me+1,Pe,oe.t-me-1))>=oe.DV&&(te.data[me+oe.t]-=oe.DV,te.data[me+oe.t+1]=1)}te.t>0&&(te.data[te.t-1]+=oe.am(me,oe.data[me],te,2*me,0,1)),te.s=0,te.clamp()}function L(te,oe,me){var Pe=te.abs();if(!(Pe.t<=0)){var xe=this.abs();if(xe.t<Pe.t){oe!=null&&oe.fromInt(0),me!=null&&this.copyTo(me);return}me==null&&(me=s());var Fe=s(),We=this.s,Je=te.s,et=this.DB-A(Pe.data[Pe.t-1]);et>0?(Pe.lShiftTo(et,Fe),xe.lShiftTo(et,me)):(Pe.copyTo(Fe),xe.copyTo(me));var at=Fe.t,gt=Fe.data[at-1];if(gt!=0){var pt=gt*(1<<this.F1)+(at>1?Fe.data[at-2]>>this.F2:0),yt=this.FV/pt,Ot=(1<<this.F1)/pt,vt=1<<this.F2,bt=me.t,Bt=bt-at,Et=oe==null?s():oe;for(Fe.dlShiftTo(Bt,Et),me.compareTo(Et)>=0&&(me.data[me.t++]=1,me.subTo(Et,me)),n.ONE.dlShiftTo(at,Et),Et.subTo(Fe,Fe);Fe.t<at;)Fe.data[Fe.t++]=0;for(;--Bt>=0;){var Q=me.data[--bt]==gt?this.DM:Math.floor(me.data[bt]*yt+(me.data[bt-1]+vt)*Ot);if((me.data[bt]+=Fe.am(0,Q,me,Bt,0,at))<Q)for(Fe.dlShiftTo(Bt,Et),me.subTo(Et,me);me.data[bt]<--Q;)me.subTo(Et,me)}oe!=null&&(me.drShiftTo(at,oe),We!=Je&&n.ZERO.subTo(oe,oe)),me.t=at,me.clamp(),et>0&&me.rShiftTo(et,me),We<0&&n.ZERO.subTo(me,me)}}}function re(te){var oe=s();return this.abs().divRemTo(te,null,oe),this.s<0&&oe.compareTo(n.ZERO)>0&&te.subTo(oe,oe),oe}function Z(te){this.m=te}function V(te){return te.s<0||te.compareTo(this.m)>=0?te.mod(this.m):te}function ee(te){return te}function fe(te){te.divRemTo(this.m,null,te)}function _e(te,oe,me){te.multiplyTo(oe,me),this.reduce(me)}function ce(te,oe){te.squareTo(oe),this.reduce(oe)}Z.prototype.convert=V,Z.prototype.revert=ee,Z.prototype.reduce=fe,Z.prototype.mulTo=_e,Z.prototype.sqrTo=ce;function Ee(){if(this.t<1)return 0;var te=this.data[0];if((te&1)==0)return 0;var oe=te&3;return oe=oe*(2-(te&15)*oe)&15,oe=oe*(2-(te&255)*oe)&255,oe=oe*(2-((te&65535)*oe&65535))&65535,oe=oe*(2-te*oe%this.DV)%this.DV,oe>0?this.DV-oe:-oe}function Ie(te){this.m=te,this.mp=te.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<te.DB-15)-1,this.mt2=2*te.t}function ue(te){var oe=s();return te.abs().dlShiftTo(this.m.t,oe),oe.divRemTo(this.m,null,oe),te.s<0&&oe.compareTo(n.ZERO)>0&&this.m.subTo(oe,oe),oe}function pe(te){var oe=s();return te.copyTo(oe),this.reduce(oe),oe}function Ae(te){for(;te.t<=this.mt2;)te.data[te.t++]=0;for(var oe=0;oe<this.m.t;++oe){var me=te.data[oe]&32767,Pe=me*this.mpl+((me*this.mph+(te.data[oe]>>15)*this.mpl&this.um)<<15)&te.DM;for(me=oe+this.m.t,te.data[me]+=this.m.am(0,Pe,te,oe,0,this.m.t);te.data[me]>=te.DV;)te.data[me]-=te.DV,te.data[++me]++}te.clamp(),te.drShiftTo(this.m.t,te),te.compareTo(this.m)>=0&&te.subTo(this.m,te)}function Y(te,oe){te.squareTo(oe),this.reduce(oe)}function se(te,oe,me){te.multiplyTo(oe,me),this.reduce(me)}Ie.prototype.convert=ue,Ie.prototype.revert=pe,Ie.prototype.reduce=Ae,Ie.prototype.mulTo=se,Ie.prototype.sqrTo=Y;function F(){return(this.t>0?this.data[0]&1:this.s)==0}function j(te,oe){if(te>4294967295||te<1)return n.ONE;var me=s(),Pe=s(),xe=oe.convert(this),Fe=A(te)-1;for(xe.copyTo(me);--Fe>=0;)if(oe.sqrTo(me,Pe),(te&1<<Fe)>0)oe.mulTo(Pe,xe,me);else{var We=me;me=Pe,Pe=We}return oe.revert(me)}function B(te,oe){var me;return te<256||oe.isEven()?me=new Z(oe):me=new Ie(oe),this.exp(te,me)}n.prototype.copyTo=m,n.prototype.fromInt=v,n.prototype.fromString=y,n.prototype.clamp=b,n.prototype.dlShiftTo=I,n.prototype.drShiftTo=P,n.prototype.lShiftTo=O,n.prototype.rShiftTo=k,n.prototype.subTo=N,n.prototype.multiplyTo=K,n.prototype.squareTo=U,n.prototype.divRemTo=L,n.prototype.invDigit=Ee,n.prototype.isEven=F,n.prototype.exp=j,n.prototype.toString=T,n.prototype.negate=R,n.prototype.abs=S,n.prototype.compareTo=E,n.prototype.bitLength=C,n.prototype.mod=re,n.prototype.modPowInt=B,n.ZERO=w(0),n.ONE=w(1);function $(){var te=s();return this.copyTo(te),te}function G(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function X(){return this.t==0?this.s:this.data[0]<<24>>24}function H(){return this.t==0?this.s:this.data[0]<<16>>16}function he(te){return Math.floor(Math.LN2*this.DB/Math.log(te))}function we(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Te(te){if(te==null&&(te=10),this.signum()==0||te<2||te>36)return"0";var oe=this.chunkSize(te),me=Math.pow(te,oe),Pe=w(me),xe=s(),Fe=s(),We="";for(this.divRemTo(Pe,xe,Fe);xe.signum()>0;)We=(me+Fe.intValue()).toString(te).substr(1)+We,xe.divRemTo(Pe,xe,Fe);return Fe.intValue().toString(te)+We}function De(te,oe){this.fromInt(0),oe==null&&(oe=10);for(var me=this.chunkSize(oe),Pe=Math.pow(oe,me),xe=!1,Fe=0,We=0,Je=0;Je<te.length;++Je){var et=_(te,Je);if(et<0){te.charAt(Je)=="-"&&this.signum()==0&&(xe=!0);continue}We=oe*We+et,++Fe>=me&&(this.dMultiply(Pe),this.dAddOffset(We,0),Fe=0,We=0)}Fe>0&&(this.dMultiply(Math.pow(oe,Fe)),this.dAddOffset(We,0)),xe&&n.ZERO.subTo(this,this)}function Me(te,oe,me){if(typeof oe=="number")if(te<2)this.fromInt(1);else for(this.fromNumber(te,me),this.testBit(te-1)||this.bitwiseTo(n.ONE.shiftLeft(te-1),D,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(oe);)this.dAddOffset(2,0),this.bitLength()>te&&this.subTo(n.ONE.shiftLeft(te-1),this);else{var Pe=new Array,xe=te&7;Pe.length=(te>>3)+1,oe.nextBytes(Pe),xe>0?Pe[0]&=(1<<xe)-1:Pe[0]=0,this.fromString(Pe,256)}}function Be(){var te=this.t,oe=new Array;oe[0]=this.s;var me=this.DB-te*this.DB%8,Pe,xe=0;if(te-- >0)for(me<this.DB&&(Pe=this.data[te]>>me)!=(this.s&this.DM)>>me&&(oe[xe++]=Pe|this.s<<this.DB-me);te>=0;)me<8?(Pe=(this.data[te]&(1<<me)-1)<<8-me,Pe|=this.data[--te]>>(me+=this.DB-8)):(Pe=this.data[te]>>(me-=8)&255,me<=0&&(me+=this.DB,--te)),(Pe&128)!=0&&(Pe|=-256),xe==0&&(this.s&128)!=(Pe&128)&&++xe,(xe>0||Pe!=this.s)&&(oe[xe++]=Pe);return oe}function Le(te){return this.compareTo(te)==0}function W(te){return this.compareTo(te)<0?this:te}function q(te){return this.compareTo(te)>0?this:te}function M(te,oe,me){var Pe,xe,Fe=Math.min(te.t,this.t);for(Pe=0;Pe<Fe;++Pe)me.data[Pe]=oe(this.data[Pe],te.data[Pe]);if(te.t<this.t){for(xe=te.s&this.DM,Pe=Fe;Pe<this.t;++Pe)me.data[Pe]=oe(this.data[Pe],xe);me.t=this.t}else{for(xe=this.s&this.DM,Pe=Fe;Pe<te.t;++Pe)me.data[Pe]=oe(xe,te.data[Pe]);me.t=te.t}me.s=oe(this.s,te.s),me.clamp()}function ie(te,oe){return te&oe}function ve(te){var oe=s();return this.bitwiseTo(te,ie,oe),oe}function D(te,oe){return te|oe}function z(te){var oe=s();return this.bitwiseTo(te,D,oe),oe}function de(te,oe){return te^oe}function be(te){var oe=s();return this.bitwiseTo(te,de,oe),oe}function le(te,oe){return te&~oe}function ye(te){var oe=s();return this.bitwiseTo(te,le,oe),oe}function J(){for(var te=s(),oe=0;oe<this.t;++oe)te.data[oe]=this.DM&~this.data[oe];return te.t=this.t,te.s=~this.s,te}function qe(te){var oe=s();return te<0?this.rShiftTo(-te,oe):this.lShiftTo(te,oe),oe}function Ue(te){var oe=s();return te<0?this.lShiftTo(-te,oe):this.rShiftTo(te,oe),oe}function x(te){if(te==0)return-1;var oe=0;return(te&65535)==0&&(te>>=16,oe+=16),(te&255)==0&&(te>>=8,oe+=8),(te&15)==0&&(te>>=4,oe+=4),(te&3)==0&&(te>>=2,oe+=2),(te&1)==0&&++oe,oe}function ke(){for(var te=0;te<this.t;++te)if(this.data[te]!=0)return te*this.DB+x(this.data[te]);return this.s<0?this.t*this.DB:-1}function Ne(te){for(var oe=0;te!=0;)te&=te-1,++oe;return oe}function ae(){for(var te=0,oe=this.s&this.DM,me=0;me<this.t;++me)te+=Ne(this.data[me]^oe);return te}function Se(te){var oe=Math.floor(te/this.DB);return oe>=this.t?this.s!=0:(this.data[oe]&1<<te%this.DB)!=0}function Oe(te,oe){var me=n.ONE.shiftLeft(te);return this.bitwiseTo(me,oe,me),me}function He(te){return this.changeBit(te,D)}function Ve(te){return this.changeBit(te,le)}function ze(te){return this.changeBit(te,de)}function Xe(te,oe){for(var me=0,Pe=0,xe=Math.min(te.t,this.t);me<xe;)Pe+=this.data[me]+te.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;if(te.t<this.t){for(Pe+=te.s;me<this.t;)Pe+=this.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;Pe+=this.s}else{for(Pe+=this.s;me<te.t;)Pe+=te.data[me],oe.data[me++]=Pe&this.DM,Pe>>=this.DB;Pe+=te.s}oe.s=Pe<0?-1:0,Pe>0?oe.data[me++]=Pe:Pe<-1&&(oe.data[me++]=this.DV+Pe),oe.t=me,oe.clamp()}function ct(te){var oe=s();return this.addTo(te,oe),oe}function Ze(te){var oe=s();return this.subTo(te,oe),oe}function Qe(te){var oe=s();return this.multiplyTo(te,oe),oe}function rt(te){var oe=s();return this.divRemTo(te,oe,null),oe}function st(te){var oe=s();return this.divRemTo(te,null,oe),oe}function it(te){var oe=s(),me=s();return this.divRemTo(te,oe,me),new Array(oe,me)}function At(te){this.data[this.t]=this.am(0,te-1,this,0,0,this.t),++this.t,this.clamp()}function ht(te,oe){if(te!=0){for(;this.t<=oe;)this.data[this.t++]=0;for(this.data[oe]+=te;this.data[oe]>=this.DV;)this.data[oe]-=this.DV,++oe>=this.t&&(this.data[this.t++]=0),++this.data[oe]}}function tt(){}function ut(te){return te}function ot(te,oe,me){te.multiplyTo(oe,me)}function dt(te,oe){te.squareTo(oe)}tt.prototype.convert=ut,tt.prototype.revert=ut,tt.prototype.mulTo=ot,tt.prototype.sqrTo=dt;function _t(te){return this.exp(te,new tt)}function Nt(te,oe,me){var Pe=Math.min(this.t+te.t,oe);for(me.s=0,me.t=Pe;Pe>0;)me.data[--Pe]=0;var xe;for(xe=me.t-this.t;Pe<xe;++Pe)me.data[Pe+this.t]=this.am(0,te.data[Pe],me,Pe,0,this.t);for(xe=Math.min(te.t,oe);Pe<xe;++Pe)this.am(0,te.data[Pe],me,Pe,0,oe-Pe);me.clamp()}function xt(te,oe,me){--oe;var Pe=me.t=this.t+te.t-oe;for(me.s=0;--Pe>=0;)me.data[Pe]=0;for(Pe=Math.max(oe-this.t,0);Pe<te.t;++Pe)me.data[this.t+Pe-oe]=this.am(oe-Pe,te.data[Pe],me,0,0,this.t+Pe-oe);me.clamp(),me.drShiftTo(1,me)}function Ct(te){this.r2=s(),this.q3=s(),n.ONE.dlShiftTo(2*te.t,this.r2),this.mu=this.r2.divide(te),this.m=te}function jt(te){if(te.s<0||te.t>2*this.m.t)return te.mod(this.m);if(te.compareTo(this.m)<0)return te;var oe=s();return te.copyTo(oe),this.reduce(oe),oe}function Ut(te){return te}function It(te){for(te.drShiftTo(this.m.t-1,this.r2),te.t>this.m.t+1&&(te.t=this.m.t+1,te.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);te.compareTo(this.r2)<0;)te.dAddOffset(1,this.m.t+1);for(te.subTo(this.r2,te);te.compareTo(this.m)>=0;)te.subTo(this.m,te)}function Ft(te,oe){te.squareTo(oe),this.reduce(oe)}function Kt(te,oe,me){te.multiplyTo(oe,me),this.reduce(me)}Ct.prototype.convert=jt,Ct.prototype.revert=Ut,Ct.prototype.reduce=It,Ct.prototype.mulTo=Kt,Ct.prototype.sqrTo=Ft;function $t(te,oe){var me=te.bitLength(),Pe,xe=w(1),Fe;if(me<=0)return xe;me<18?Pe=1:me<48?Pe=3:me<144?Pe=4:me<768?Pe=5:Pe=6,me<8?Fe=new Z(oe):oe.isEven()?Fe=new Ct(oe):Fe=new Ie(oe);var We=new Array,Je=3,et=Pe-1,at=(1<<Pe)-1;if(We[1]=Fe.convert(this),Pe>1){var gt=s();for(Fe.sqrTo(We[1],gt);Je<=at;)We[Je]=s(),Fe.mulTo(gt,We[Je-2],We[Je]),Je+=2}var pt=te.t-1,yt,Ot=!0,vt=s(),bt;for(me=A(te.data[pt])-1;pt>=0;){for(me>=et?yt=te.data[pt]>>me-et&at:(yt=(te.data[pt]&(1<<me+1)-1)<<et-me,pt>0&&(yt|=te.data[pt-1]>>this.DB+me-et)),Je=Pe;(yt&1)==0;)yt>>=1,--Je;if((me-=Je)<0&&(me+=this.DB,--pt),Ot)We[yt].copyTo(xe),Ot=!1;else{for(;Je>1;)Fe.sqrTo(xe,vt),Fe.sqrTo(vt,xe),Je-=2;Je>0?Fe.sqrTo(xe,vt):(bt=xe,xe=vt,vt=bt),Fe.mulTo(vt,We[yt],xe)}for(;pt>=0&&(te.data[pt]&1<<me)==0;)Fe.sqrTo(xe,vt),bt=xe,xe=vt,vt=bt,--me<0&&(me=this.DB-1,--pt)}return Fe.revert(xe)}function Vt(te){var oe=this.s<0?this.negate():this.clone(),me=te.s<0?te.negate():te.clone();if(oe.compareTo(me)<0){var Pe=oe;oe=me,me=Pe}var xe=oe.getLowestSetBit(),Fe=me.getLowestSetBit();if(Fe<0)return oe;for(xe<Fe&&(Fe=xe),Fe>0&&(oe.rShiftTo(Fe,oe),me.rShiftTo(Fe,me));oe.signum()>0;)(xe=oe.getLowestSetBit())>0&&oe.rShiftTo(xe,oe),(xe=me.getLowestSetBit())>0&&me.rShiftTo(xe,me),oe.compareTo(me)>=0?(oe.subTo(me,oe),oe.rShiftTo(1,oe)):(me.subTo(oe,me),me.rShiftTo(1,me));return Fe>0&&me.lShiftTo(Fe,me),me}function Jt(te){if(te<=0)return 0;var oe=this.DV%te,me=this.s<0?te-1:0;if(this.t>0)if(oe==0)me=this.data[0]%te;else for(var Pe=this.t-1;Pe>=0;--Pe)me=(oe*me+this.data[Pe])%te;return me}function zt(te){var oe=te.isEven();if(this.isEven()&&oe||te.signum()==0)return n.ZERO;for(var me=te.clone(),Pe=this.clone(),xe=w(1),Fe=w(0),We=w(0),Je=w(1);me.signum()!=0;){for(;me.isEven();)me.rShiftTo(1,me),oe?((!xe.isEven()||!Fe.isEven())&&(xe.addTo(this,xe),Fe.subTo(te,Fe)),xe.rShiftTo(1,xe)):Fe.isEven()||Fe.subTo(te,Fe),Fe.rShiftTo(1,Fe);for(;Pe.isEven();)Pe.rShiftTo(1,Pe),oe?((!We.isEven()||!Je.isEven())&&(We.addTo(this,We),Je.subTo(te,Je)),We.rShiftTo(1,We)):Je.isEven()||Je.subTo(te,Je),Je.rShiftTo(1,Je);me.compareTo(Pe)>=0?(me.subTo(Pe,me),oe&&xe.subTo(We,xe),Fe.subTo(Je,Fe)):(Pe.subTo(me,Pe),oe&&We.subTo(xe,We),Je.subTo(Fe,Je))}if(Pe.compareTo(n.ONE)!=0)return n.ZERO;if(Je.compareTo(te)>=0)return Je.subtract(te);if(Je.signum()<0)Je.addTo(te,Je);else return Je;return Je.signum()<0?Je.add(te):Je}var mt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Ht=(1<<26)/mt[mt.length-1];function Gt(te){var oe,me=this.abs();if(me.t==1&&me.data[0]<=mt[mt.length-1]){for(oe=0;oe<mt.length;++oe)if(me.data[0]==mt[oe])return!0;return!1}if(me.isEven())return!1;for(oe=1;oe<mt.length;){for(var Pe=mt[oe],xe=oe+1;xe<mt.length&&Pe<Ht;)Pe*=mt[xe++];for(Pe=me.modInt(Pe);oe<xe;)if(Pe%mt[oe++]==0)return!1}return me.millerRabin(te)}function ft(te){var oe=this.subtract(n.ONE),me=oe.getLowestSetBit();if(me<=0)return!1;for(var Pe=oe.shiftRight(me),xe=Wt(),Fe,We=0;We<te;++We){do Fe=new n(this.bitLength(),xe);while(Fe.compareTo(n.ONE)<=0||Fe.compareTo(oe)>=0);var Je=Fe.modPow(Pe,this);if(Je.compareTo(n.ONE)!=0&&Je.compareTo(oe)!=0){for(var et=1;et++<me&&Je.compareTo(oe)!=0;)if(Je=Je.modPowInt(2,this),Je.compareTo(n.ONE)==0)return!1;if(Je.compareTo(oe)!=0)return!1}}return!0}function Wt(){return{nextBytes:function(te){for(var oe=0;oe<te.length;++oe)te[oe]=Math.floor(Math.random()*256)}}}n.prototype.chunkSize=he,n.prototype.toRadix=Te,n.prototype.fromRadix=De,n.prototype.fromNumber=Me,n.prototype.bitwiseTo=M,n.prototype.changeBit=Oe,n.prototype.addTo=Xe,n.prototype.dMultiply=At,n.prototype.dAddOffset=ht,n.prototype.multiplyLowerTo=Nt,n.prototype.multiplyUpperTo=xt,n.prototype.modInt=Jt,n.prototype.millerRabin=ft,n.prototype.clone=$,n.prototype.intValue=G,n.prototype.byteValue=X,n.prototype.shortValue=H,n.prototype.signum=we,n.prototype.toByteArray=Be,n.prototype.equals=Le,n.prototype.min=W,n.prototype.max=q,n.prototype.and=ve,n.prototype.or=z,n.prototype.xor=be,n.prototype.andNot=ye,n.prototype.not=J,n.prototype.shiftLeft=qe,n.prototype.shiftRight=Ue,n.prototype.getLowestSetBit=ke,n.prototype.bitCount=ae,n.prototype.testBit=Se,n.prototype.setBit=He,n.prototype.clearBit=Ve,n.prototype.flipBit=ze,n.prototype.add=ct,n.prototype.subtract=Ze,n.prototype.multiply=Qe,n.prototype.divide=rt,n.prototype.remainder=st,n.prototype.divideAndRemainder=it,n.prototype.modPow=$t,n.prototype.modInverse=zt,n.prototype.pow=_t,n.prototype.gcd=Vt,n.prototype.isProbablePrime=Gt}}),require_sha1=__commonJS({"node_modules/node-forge/lib/sha1.js"(e,o){init_node_globals();var r=require_forge();require_md(),require_util();var t=o.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=t,t.create=function(){s||u();var f=null,a=r.util.createBuffer(),c=new Array(80),d={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength64=[];for(var h=d.messageLengthSize/4,g=0;g<h;++g)d.fullMessageLength.push(0);return a=r.util.createBuffer(),f={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},d},d.start(),d.update=function(h,g){g==="utf8"&&(h=r.util.encodeUtf8(h));var p=h.length;d.messageLength+=p,p=[p/4294967296>>>0,p>>>0];for(var _=d.fullMessageLength.length-1;_>=0;--_)d.fullMessageLength[_]+=p[1],p[1]=p[0]+(d.fullMessageLength[_]/4294967296>>>0),d.fullMessageLength[_]=d.fullMessageLength[_]>>>0,p[0]=p[1]/4294967296>>>0;return a.putBytes(h),l(f,c,a),(a.read>2048||a.length()===0)&&a.compact(),d},d.digest=function(){var h=r.util.createBuffer();h.putBytes(a.bytes());var g=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,p=g&d.blockLength-1;h.putBytes(n.substr(0,d.blockLength-p));for(var _,m,v=d.fullMessageLength[0]*8,w=0;w<d.fullMessageLength.length-1;++w)_=d.fullMessageLength[w+1]*8,m=_/4294967296>>>0,v+=m,h.putInt32(v>>>0),v=_>>>0;h.putInt32(v);var y={h0:f.h0,h1:f.h1,h2:f.h2,h3:f.h3,h4:f.h4};l(y,c,h);var b=r.util.createBuffer();return b.putInt32(y.h0),b.putInt32(y.h1),b.putInt32(y.h2),b.putInt32(y.h3),b.putInt32(y.h4),b},d};var n=null,s=!1;function u(){n=String.fromCharCode(128),n+=r.util.fillString(String.fromCharCode(0),64),s=!0}function l(f,a,c){for(var d,h,g,p,_,m,v,w,y=c.length();y>=64;){for(h=f.h0,g=f.h1,p=f.h2,_=f.h3,m=f.h4,w=0;w<16;++w)d=c.getInt32(),a[w]=d,v=_^g&(p^_),d=(h<<5|h>>>27)+v+m+1518500249+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;for(;w<20;++w)d=a[w-3]^a[w-8]^a[w-14]^a[w-16],d=d<<1|d>>>31,a[w]=d,v=_^g&(p^_),d=(h<<5|h>>>27)+v+m+1518500249+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;for(;w<32;++w)d=a[w-3]^a[w-8]^a[w-14]^a[w-16],d=d<<1|d>>>31,a[w]=d,v=g^p^_,d=(h<<5|h>>>27)+v+m+1859775393+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;for(;w<40;++w)d=a[w-6]^a[w-16]^a[w-28]^a[w-32],d=d<<2|d>>>30,a[w]=d,v=g^p^_,d=(h<<5|h>>>27)+v+m+1859775393+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;for(;w<60;++w)d=a[w-6]^a[w-16]^a[w-28]^a[w-32],d=d<<2|d>>>30,a[w]=d,v=g&p|_&(g^p),d=(h<<5|h>>>27)+v+m+2400959708+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;for(;w<80;++w)d=a[w-6]^a[w-16]^a[w-28]^a[w-32],d=d<<2|d>>>30,a[w]=d,v=g^p^_,d=(h<<5|h>>>27)+v+m+3395469782+d,m=_,_=p,p=(g<<30|g>>>2)>>>0,g=h,h=d;f.h0=f.h0+h|0,f.h1=f.h1+g|0,f.h2=f.h2+p|0,f.h3=f.h3+_|0,f.h4=f.h4+m|0,y-=64}}}}),require_pkcs1=__commonJS({"node_modules/node-forge/lib/pkcs1.js"(e,o){init_node_globals();var r=require_forge();require_util(),require_random(),require_sha1();var t=o.exports=r.pkcs1=r.pkcs1||{};t.encode_rsa_oaep=function(s,u,l){var f,a,c,d;typeof l=="string"?(f=l,a=arguments[3]||void 0,c=arguments[4]||void 0):l&&(f=l.label||void 0,a=l.seed||void 0,c=l.md||void 0,l.mgf1&&l.mgf1.md&&(d=l.mgf1.md)),c?c.start():c=r.md.sha1.create(),d||(d=c);var h=Math.ceil(s.n.bitLength()/8),g=h-2*c.digestLength-2;if(u.length>g){var p=new Error("RSAES-OAEP input message length is too long.");throw p.length=u.length,p.maxLength=g,p}f||(f=""),c.update(f,"raw");for(var _=c.digest(),m="",v=g-u.length,w=0;w<v;w++)m+="\0";var y=_.getBytes()+m+""+u;if(!a)a=r.random.getBytes(c.digestLength);else if(a.length!==c.digestLength){var p=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw p.seedLength=a.length,p.digestLength=c.digestLength,p}var b=n(a,h-c.digestLength-1,d),T=r.util.xorBytes(y,b,y.length),R=n(T,c.digestLength,d),S=r.util.xorBytes(a,R,a.length);return"\0"+S+T},t.decode_rsa_oaep=function(s,u,l){var f,a,c;typeof l=="string"?(f=l,a=arguments[3]||void 0):l&&(f=l.label||void 0,a=l.md||void 0,l.mgf1&&l.mgf1.md&&(c=l.mgf1.md));var d=Math.ceil(s.n.bitLength()/8);if(u.length!==d){var T=new Error("RSAES-OAEP encoded message length is invalid.");throw T.length=u.length,T.expectedLength=d,T}if(a===void 0?a=r.md.sha1.create():a.start(),c||(c=a),d<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");f||(f=""),a.update(f,"raw");for(var h=a.digest().getBytes(),g=u.charAt(0),p=u.substring(1,a.digestLength+1),_=u.substring(1+a.digestLength),m=n(_,a.digestLength,c),v=r.util.xorBytes(p,m,p.length),w=n(v,d-a.digestLength-1,c),y=r.util.xorBytes(_,w,_.length),b=y.substring(0,a.digestLength),T=g!=="\0",R=0;R<a.digestLength;++R)T|=h.charAt(R)!==b.charAt(R);for(var S=1,E=a.digestLength,A=a.digestLength;A<y.length;A++){var C=y.charCodeAt(A),I=C&1^1,P=S?65534:0;T|=C&P,S=S&I,E+=S}if(T||y.charCodeAt(E)!==1)throw new Error("Invalid RSAES-OAEP padding.");return y.substring(E+1)};function n(s,u,l){l||(l=r.md.sha1.create());for(var f="",a=Math.ceil(u/l.digestLength),c=0;c<a;++c){var d=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255);l.start(),l.update(s+d),f+=l.digest().getBytes()}return f.substring(0,u)}}}),require_prime=__commonJS({"node_modules/node-forge/lib/prime.js"(e,o){init_node_globals();var r=require_forge();require_util(),require_jsbn(),require_random(),function(){if(r.prime){o.exports=r.prime;return}var t=o.exports=r.prime=r.prime||{},n=r.jsbn.BigInteger,s=[6,4,2,4,2,4,6,2],u=new n(null);u.fromInt(30);var l=function(p,_){return p|_};t.generateProbablePrime=function(p,_,m){typeof _=="function"&&(m=_,_={}),_=_||{};var v=_.algorithm||"PRIMEINC";typeof v=="string"&&(v={name:v}),v.options=v.options||{};var w=_.prng||r.random,y={nextBytes:function(b){for(var T=w.getBytesSync(b.length),R=0;R<b.length;++R)b[R]=T.charCodeAt(R)}};if(v.name==="PRIMEINC")return f(p,y,v.options,m);throw new Error("Invalid prime generation algorithm: "+v.name)};function f(p,_,m,v){return"workers"in m?d(p,_,m,v):a(p,_,m,v)}function a(p,_,m,v){var w=h(p,_),y=0,b=g(w.bitLength());"millerRabinTests"in m&&(b=m.millerRabinTests);var T=10;"maxBlockTime"in m&&(T=m.maxBlockTime),c(w,p,_,y,b,T,v)}function c(p,_,m,v,w,y,b){var T=+new Date;do{if(p.bitLength()>_&&(p=h(_,m)),p.isProbablePrime(w))return b(null,p);p.dAddOffset(s[v++%8],0)}while(y<0||+new Date-T<y);r.util.setImmediate(function(){c(p,_,m,v,w,y,b)})}function d(p,_,m,v){if(typeof Worker=="undefined")return a(p,_,m,v);var w=h(p,_),y=m.workers,b=m.workLoad||100,T=b*30/8,R=m.workerScript||"forge/prime.worker.js";if(y===-1)return r.util.estimateCores(function(E,A){E&&(A=2),y=A-1,S()});S();function S(){y=Math.max(1,y);for(var E=[],A=0;A<y;++A)E[A]=new Worker(R);for(var A=0;A<y;++A)E[A].addEventListener("message",I);var C=!1;function I(P){if(!C){var O=P.data;if(O.found){for(var k=0;k<E.length;++k)E[k].terminate();return C=!0,v(null,new n(O.prime,16))}w.bitLength()>p&&(w=h(p,_));var N=w.toString(16);P.target.postMessage({hex:N,workLoad:b}),w.dAddOffset(T,0)}}}}function h(p,_){var m=new n(p,_),v=p-1;return m.testBit(v)||m.bitwiseTo(n.ONE.shiftLeft(v),l,m),m.dAddOffset(31-m.mod(u).byteValue(),0),m}function g(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}}()}}),require_rsa=__commonJS({"node_modules/node-forge/lib/rsa.js"(e,o){init_node_globals();var r=require_forge();require_asn1(),require_jsbn(),require_oids(),require_pkcs1(),require_prime(),require_random(),require_util(),typeof t=="undefined"&&(t=r.jsbn.BigInteger);var t,n=r.util.isNodejs?require_crypto():null,s=r.asn1,u=r.util;r.pki=r.pki||{},o.exports=r.pki.rsa=r.rsa=r.rsa||{};var l=r.pki,f=[6,4,2,4,2,4,6,2],a={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},c={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},g=function(E){var A;if(E.algorithm in l.oids)A=l.oids[E.algorithm];else{var C=new Error("Unknown message digest algorithm.");throw C.algorithm=E.algorithm,C}var I=s.oidToDer(A).getBytes(),P=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),O=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);O.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,I)),O.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var k=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,E.digest().getBytes());return P.value.push(O),P.value.push(k),s.toDer(P).getBytes()},p=function(E,A,C){if(C)return E.modPow(A.e,A.n);if(!A.p||!A.q)return E.modPow(A.d,A.n);A.dP||(A.dP=A.d.mod(A.p.subtract(t.ONE))),A.dQ||(A.dQ=A.d.mod(A.q.subtract(t.ONE))),A.qInv||(A.qInv=A.q.modInverse(A.p));var I;do I=new t(r.util.bytesToHex(r.random.getBytes(A.n.bitLength()/8)),16);while(I.compareTo(A.n)>=0||!I.gcd(A.n).equals(t.ONE));E=E.multiply(I.modPow(A.e,A.n)).mod(A.n);for(var P=E.mod(A.p).modPow(A.dP,A.p),O=E.mod(A.q).modPow(A.dQ,A.q);P.compareTo(O)<0;)P=P.add(A.p);var k=P.subtract(O).multiply(A.qInv).mod(A.p).multiply(A.q).add(O);return k=k.multiply(I.modInverse(A.n)).mod(A.n),k};l.rsa.encrypt=function(E,A,C){var I=C,P,O=Math.ceil(A.n.bitLength()/8);C!==!1&&C!==!0?(I=C===2,P=_(E,A,C)):(P=r.util.createBuffer(),P.putBytes(E));for(var k=new t(P.toHex(),16),N=p(k,A,I),K=N.toString(16),U=r.util.createBuffer(),L=O-Math.ceil(K.length/2);L>0;)U.putByte(0),--L;return U.putBytes(r.util.hexToBytes(K)),U.getBytes()},l.rsa.decrypt=function(E,A,C,I){var P=Math.ceil(A.n.bitLength()/8);if(E.length!==P){var O=new Error("Encrypted message length is invalid.");throw O.length=E.length,O.expected=P,O}var k=new t(r.util.createBuffer(E).toHex(),16);if(k.compareTo(A.n)>=0)throw new Error("Encrypted message is invalid.");for(var N=p(k,A,C),K=N.toString(16),U=r.util.createBuffer(),L=P-Math.ceil(K.length/2);L>0;)U.putByte(0),--L;return U.putBytes(r.util.hexToBytes(K)),I!==!1?m(U.getBytes(),A,C):U.getBytes()},l.rsa.createKeyPairGenerationState=function(E,A,C){typeof E=="string"&&(E=parseInt(E,10)),E=E||2048,C=C||{};var I=C.prng||r.random,P={nextBytes:function(N){for(var K=I.getBytesSync(N.length),U=0;U<N.length;++U)N[U]=K.charCodeAt(U)}},O=C.algorithm||"PRIMEINC",k;if(O==="PRIMEINC")k={algorithm:O,state:0,bits:E,rng:P,eInt:A||65537,e:new t(null),p:null,q:null,qBits:E>>1,pBits:E-(E>>1),pqState:0,num:null,keys:null},k.e.fromInt(k.eInt);else throw new Error("Invalid key generation algorithm: "+O);return k},l.rsa.stepKeyPairGenerationState=function(E,A){"algorithm"in E||(E.algorithm="PRIMEINC");var C=new t(null);C.fromInt(30);for(var I=0,P=function(re,Z){return re|Z},O=+new Date,k,N=0;E.keys===null&&(A<=0||N<A);){if(E.state===0){var K=E.p===null?E.pBits:E.qBits,U=K-1;E.pqState===0?(E.num=new t(K,E.rng),E.num.testBit(U)||E.num.bitwiseTo(t.ONE.shiftLeft(U),P,E.num),E.num.dAddOffset(31-E.num.mod(C).byteValue(),0),I=0,++E.pqState):E.pqState===1?E.num.bitLength()>K?E.pqState=0:E.num.isProbablePrime(y(E.num.bitLength()))?++E.pqState:E.num.dAddOffset(f[I++%8],0):E.pqState===2?E.pqState=E.num.subtract(t.ONE).gcd(E.e).compareTo(t.ONE)===0?3:0:E.pqState===3&&(E.pqState=0,E.p===null?E.p=E.num:E.q=E.num,E.p!==null&&E.q!==null&&++E.state,E.num=null)}else if(E.state===1)E.p.compareTo(E.q)<0&&(E.num=E.p,E.p=E.q,E.q=E.num),++E.state;else if(E.state===2)E.p1=E.p.subtract(t.ONE),E.q1=E.q.subtract(t.ONE),E.phi=E.p1.multiply(E.q1),++E.state;else if(E.state===3)E.phi.gcd(E.e).compareTo(t.ONE)===0?++E.state:(E.p=null,E.q=null,E.state=0);else if(E.state===4)E.n=E.p.multiply(E.q),E.n.bitLength()===E.bits?++E.state:(E.q=null,E.state=0);else if(E.state===5){var L=E.e.modInverse(E.phi);E.keys={privateKey:l.rsa.setPrivateKey(E.n,E.e,L,E.p,E.q,L.mod(E.p1),L.mod(E.q1),E.q.modInverse(E.p)),publicKey:l.rsa.setPublicKey(E.n,E.e)}}k=+new Date,N+=k-O,O=k}return E.keys!==null},l.rsa.generateKeyPair=function(E,A,C,I){if(arguments.length===1?typeof E=="object"?(C=E,E=void 0):typeof E=="function"&&(I=E,E=void 0):arguments.length===2?typeof E=="number"?typeof A=="function"?(I=A,A=void 0):typeof A!="number"&&(C=A,A=void 0):(C=E,I=A,E=void 0,A=void 0):arguments.length===3&&(typeof A=="number"?typeof C=="function"&&(I=C,C=void 0):(I=C,C=A,A=void 0)),C=C||{},E===void 0&&(E=C.bits||2048),A===void 0&&(A=C.e||65537),!r.options.usePureJavaScript&&!C.prng&&E>=256&&E<=16384&&(A===65537||A===3)){if(I){if(b("generateKeyPair"))return n.generateKeyPair("rsa",{modulusLength:E,publicExponent:A,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(N,K,U){if(N)return I(N);I(null,{privateKey:l.privateKeyFromPem(U),publicKey:l.publicKeyFromPem(K)})});if(T("generateKey")&&T("exportKey"))return u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:E,publicExponent:S(A),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(N){return u.globalScope.crypto.subtle.exportKey("pkcs8",N.privateKey)}).then(void 0,function(N){I(N)}).then(function(N){if(N){var K=l.privateKeyFromAsn1(s.fromDer(r.util.createBuffer(N)));I(null,{privateKey:K,publicKey:l.setRsaPublicKey(K.n,K.e)})}});if(R("generateKey")&&R("exportKey")){var P=u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:E,publicExponent:S(A),hash:{name:"SHA-256"}},!0,["sign","verify"]);P.oncomplete=function(N){var K=N.target.result,U=u.globalScope.msCrypto.subtle.exportKey("pkcs8",K.privateKey);U.oncomplete=function(L){var re=L.target.result,Z=l.privateKeyFromAsn1(s.fromDer(r.util.createBuffer(re)));I(null,{privateKey:Z,publicKey:l.setRsaPublicKey(Z.n,Z.e)})},U.onerror=function(L){I(L)}},P.onerror=function(N){I(N)};return}}else if(b("generateKeyPairSync")){var O=n.generateKeyPairSync("rsa",{modulusLength:E,publicExponent:A,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(O.privateKey),publicKey:l.publicKeyFromPem(O.publicKey)}}}var k=l.rsa.createKeyPairGenerationState(E,A,C);if(!I)return l.rsa.stepKeyPairGenerationState(k,0),k.keys;v(k,C,I)},l.setRsaPublicKey=l.rsa.setPublicKey=function(E,A){var C={n:E,e:A};return C.encrypt=function(I,P,O){if(typeof P=="string"?P=P.toUpperCase():P===void 0&&(P="RSAES-PKCS1-V1_5"),P==="RSAES-PKCS1-V1_5")P={encode:function(N,K,U){return _(N,K,2).getBytes()}};else if(P==="RSA-OAEP"||P==="RSAES-OAEP")P={encode:function(N,K){return r.pkcs1.encode_rsa_oaep(K,N,O)}};else if(["RAW","NONE","NULL",null].indexOf(P)!==-1)P={encode:function(N){return N}};else if(typeof P=="string")throw new Error('Unsupported encryption scheme: "'+P+'".');var k=P.encode(I,C,!0);return l.rsa.encrypt(k,C,!0)},C.verify=function(I,P,O){typeof O=="string"?O=O.toUpperCase():O===void 0&&(O="RSASSA-PKCS1-V1_5"),O==="RSASSA-PKCS1-V1_5"?O={verify:function(N,K){K=m(K,C,!0);var U=s.fromDer(K);return N===U.value[1].value}}:(O==="NONE"||O==="NULL"||O===null)&&(O={verify:function(N,K){return K=m(K,C,!0),N===K}});var k=l.rsa.decrypt(P,C,!0,!1);return O.verify(I,k,C.n.bitLength())},C},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(E,A,C,I,P,O,k,N){var K={n:E,e:A,d:C,p:I,q:P,dP:O,dQ:k,qInv:N};return K.decrypt=function(U,L,re){typeof L=="string"?L=L.toUpperCase():L===void 0&&(L="RSAES-PKCS1-V1_5");var Z=l.rsa.decrypt(U,K,!1,!1);if(L==="RSAES-PKCS1-V1_5")L={decode:m};else if(L==="RSA-OAEP"||L==="RSAES-OAEP")L={decode:function(V,ee){return r.pkcs1.decode_rsa_oaep(ee,V,re)}};else if(["RAW","NONE","NULL",null].indexOf(L)!==-1)L={decode:function(V){return V}};else throw new Error('Unsupported encryption scheme: "'+L+'".');return L.decode(Z,K,!1)},K.sign=function(U,L){var re=!1;typeof L=="string"&&(L=L.toUpperCase()),L===void 0||L==="RSASSA-PKCS1-V1_5"?(L={encode:g},re=1):(L==="NONE"||L==="NULL"||L===null)&&(L={encode:function(){return U}},re=1);var Z=L.encode(U,K.n.bitLength());return l.rsa.encrypt(Z,K,re)},K},l.wrapRsaPrivateKey=function(E){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(E).getBytes())])},l.privateKeyFromAsn1=function(E){var A={},C=[];if(s.validate(E,a,A,C)&&(E=s.fromDer(r.util.createBuffer(A.privateKey))),A={},C=[],!s.validate(E,c,A,C)){var I=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw I.errors=C,I}var P,O,k,N,K,U,L,re;return P=r.util.createBuffer(A.privateKeyModulus).toHex(),O=r.util.createBuffer(A.privateKeyPublicExponent).toHex(),k=r.util.createBuffer(A.privateKeyPrivateExponent).toHex(),N=r.util.createBuffer(A.privateKeyPrime1).toHex(),K=r.util.createBuffer(A.privateKeyPrime2).toHex(),U=r.util.createBuffer(A.privateKeyExponent1).toHex(),L=r.util.createBuffer(A.privateKeyExponent2).toHex(),re=r.util.createBuffer(A.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new t(P,16),new t(O,16),new t(k,16),new t(N,16),new t(K,16),new t(U,16),new t(L,16),new t(re,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(E){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.qInv))])},l.publicKeyFromAsn1=function(E){var A={},C=[];if(s.validate(E,h,A,C)){var I=s.derToOid(A.publicKeyOid);if(I!==l.oids.rsaEncryption){var P=new Error("Cannot read public key. Unknown OID.");throw P.oid=I,P}E=A.rsaPublicKey}if(C=[],!s.validate(E,d,A,C)){var P=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw P.errors=C,P}var O=r.util.createBuffer(A.publicKeyModulus).toHex(),k=r.util.createBuffer(A.publicKeyExponent).toHex();return l.setRsaPublicKey(new t(O,16),new t(k,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(E){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(l.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(E)])])},l.publicKeyToRSAPublicKey=function(E){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,w(E.e))])};function _(E,A,C){var I=r.util.createBuffer(),P=Math.ceil(A.n.bitLength()/8);if(E.length>P-11){var O=new Error("Message is too long for PKCS#1 v1.5 padding.");throw O.length=E.length,O.max=P-11,O}I.putByte(0),I.putByte(C);var k=P-3-E.length,N;if(C===0||C===1){N=C===0?0:255;for(var K=0;K<k;++K)I.putByte(N)}else for(;k>0;){for(var U=0,L=r.random.getBytes(k),K=0;K<k;++K)N=L.charCodeAt(K),N===0?++U:I.putByte(N);k=U}return I.putByte(0),I.putBytes(E),I}function m(E,A,C,I){var P=Math.ceil(A.n.bitLength()/8),O=r.util.createBuffer(E),k=O.getByte(),N=O.getByte();if(k!==0||C&&N!==0&&N!==1||!C&&N!=2||C&&N===0&&typeof I=="undefined")throw new Error("Encryption block is invalid.");var K=0;if(N===0){K=P-3-I;for(var U=0;U<K;++U)if(O.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(N===1)for(K=0;O.length()>1;){if(O.getByte()!==255){--O.read;break}++K}else if(N===2)for(K=0;O.length()>1;){if(O.getByte()===0){--O.read;break}++K}var L=O.getByte();if(L!==0||K!==P-3-O.length())throw new Error("Encryption block is invalid.");return O.getBytes()}function v(E,A,C){typeof A=="function"&&(C=A,A={}),A=A||{};var I={algorithm:{name:A.algorithm||"PRIMEINC",options:{workers:A.workers||2,workLoad:A.workLoad||100,workerScript:A.workerScript}}};"prng"in A&&(I.prng=A.prng),P();function P(){O(E.pBits,function(N,K){if(N)return C(N);if(E.p=K,E.q!==null)return k(N,E.q);O(E.qBits,k)})}function O(N,K){r.prime.generateProbablePrime(N,I,K)}function k(N,K){if(N)return C(N);if(E.q=K,E.p.compareTo(E.q)<0){var U=E.p;E.p=E.q,E.q=U}if(E.p.subtract(t.ONE).gcd(E.e).compareTo(t.ONE)!==0){E.p=null,P();return}if(E.q.subtract(t.ONE).gcd(E.e).compareTo(t.ONE)!==0){E.q=null,O(E.qBits,k);return}if(E.p1=E.p.subtract(t.ONE),E.q1=E.q.subtract(t.ONE),E.phi=E.p1.multiply(E.q1),E.phi.gcd(E.e).compareTo(t.ONE)!==0){E.p=E.q=null,P();return}if(E.n=E.p.multiply(E.q),E.n.bitLength()!==E.bits){E.q=null,O(E.qBits,k);return}var L=E.e.modInverse(E.phi);E.keys={privateKey:l.rsa.setPrivateKey(E.n,E.e,L,E.p,E.q,L.mod(E.p1),L.mod(E.q1),E.q.modInverse(E.p)),publicKey:l.rsa.setPublicKey(E.n,E.e)},C(null,E.keys)}}function w(E){var A=E.toString(16);A[0]>="8"&&(A="00"+A);var C=r.util.hexToBytes(A);return C.length>1&&(C.charCodeAt(0)===0&&(C.charCodeAt(1)&128)==0||C.charCodeAt(0)===255&&(C.charCodeAt(1)&128)==128)?C.substr(1):C}function y(E){return E<=100?27:E<=150?18:E<=200?15:E<=250?12:E<=300?9:E<=350?8:E<=400?7:E<=500?6:E<=600?5:E<=800?4:E<=1250?3:2}function b(E){return r.util.isNodejs&&typeof n[E]=="function"}function T(E){return typeof u.globalScope!="undefined"&&typeof u.globalScope.crypto=="object"&&typeof u.globalScope.crypto.subtle=="object"&&typeof u.globalScope.crypto.subtle[E]=="function"}function R(E){return typeof u.globalScope!="undefined"&&typeof u.globalScope.msCrypto=="object"&&typeof u.globalScope.msCrypto.subtle=="object"&&typeof u.globalScope.msCrypto.subtle[E]=="function"}function S(E){for(var A=r.util.hexToBytes(E.toString(16)),C=new Uint8Array(A.length),I=0;I<A.length;++I)C[I]=A.charCodeAt(I);return C}}}),require_pbe=__commonJS({"node_modules/node-forge/lib/pbe.js"(e,o){init_node_globals();var r=require_forge();require_aes(),require_asn1(),require_des(),require_md(),require_oids(),require_pbkdf2(),require_pem(),require_random(),require_rc2(),require_rsa(),require_util(),typeof t=="undefined"&&(t=r.jsbn.BigInteger);var t,n=r.asn1,s=r.pki=r.pki||{};o.exports=s.pbe=r.pbe=r.pbe||{};var u=s.oids,l={name:"EncryptedPrivateKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},f={name:"PBES2Algorithms",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},a={name:"pkcs-12PbeParams",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"iterations"}]};s.encryptPrivateKeyInfo=function(p,_,m){m=m||{},m.saltSize=m.saltSize||8,m.count=m.count||2048,m.algorithm=m.algorithm||"aes128",m.prfAlgorithm=m.prfAlgorithm||"sha1";var v=r.random.getBytesSync(m.saltSize),w=m.count,y=n.integerToDer(w),b,T,R;if(m.algorithm.indexOf("aes")===0||m.algorithm==="des"){var S,E,A;switch(m.algorithm){case"aes128":b=16,S=16,E=u["aes128-CBC"],A=r.aes.createEncryptionCipher;break;case"aes192":b=24,S=16,E=u["aes192-CBC"],A=r.aes.createEncryptionCipher;break;case"aes256":b=32,S=16,E=u["aes256-CBC"],A=r.aes.createEncryptionCipher;break;case"des":b=8,S=8,E=u.desCBC,A=r.des.createEncryptionCipher;break;default:var C=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw C.algorithm=m.algorithm,C}var I="hmacWith"+m.prfAlgorithm.toUpperCase(),P=h(I),O=r.pkcs5.pbkdf2(_,v,w,b,P),k=r.random.getBytesSync(S),N=A(O);N.start(k),N.update(n.toDer(p)),N.finish(),R=N.output.getBytes();var K=g(v,y,b,I);T=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(u.pkcs5PBES2).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(u.pkcs5PBKDF2).getBytes()),K]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(E).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,k)])])])}else if(m.algorithm==="3des"){b=24;var U=new r.util.ByteBuffer(v),O=s.pbe.generatePkcs12Key(_,U,1,w,b),k=s.pbe.generatePkcs12Key(_,U,2,w,b),N=r.des.createEncryptionCipher(O);N.start(k),N.update(n.toDer(p)),N.finish(),R=N.output.getBytes(),T=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(u["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,v),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,y.getBytes())])])}else{var C=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw C.algorithm=m.algorithm,C}var L=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[T,n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,R)]);return L},s.decryptPrivateKeyInfo=function(p,_){var m=null,v={},w=[];if(!n.validate(p,l,v,w)){var y=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw y.errors=w,y}var b=n.derToOid(v.encryptionOid),T=s.pbe.getCipher(b,v.encryptionParams,_),R=r.util.createBuffer(v.encryptedData);return T.update(R),T.finish()&&(m=n.fromDer(T.output)),m},s.encryptedPrivateKeyToPem=function(p,_){var m={type:"ENCRYPTED PRIVATE KEY",body:n.toDer(p).getBytes()};return r.pem.encode(m,{maxline:_})},s.encryptedPrivateKeyFromPem=function(p){var _=r.pem.decode(p)[0];if(_.type!=="ENCRYPTED PRIVATE KEY"){var m=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw m.headerType=_.type,m}if(_.procType&&_.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return n.fromDer(_.body)},s.encryptRsaPrivateKey=function(p,_,m){if(m=m||{},!m.legacy){var v=s.wrapRsaPrivateKey(s.privateKeyToAsn1(p));return v=s.encryptPrivateKeyInfo(v,_,m),s.encryptedPrivateKeyToPem(v)}var w,y,b,T;switch(m.algorithm){case"aes128":w="AES-128-CBC",b=16,y=r.random.getBytesSync(16),T=r.aes.createEncryptionCipher;break;case"aes192":w="AES-192-CBC",b=24,y=r.random.getBytesSync(16),T=r.aes.createEncryptionCipher;break;case"aes256":w="AES-256-CBC",b=32,y=r.random.getBytesSync(16),T=r.aes.createEncryptionCipher;break;case"3des":w="DES-EDE3-CBC",b=24,y=r.random.getBytesSync(8),T=r.des.createEncryptionCipher;break;case"des":w="DES-CBC",b=8,y=r.random.getBytesSync(8),T=r.des.createEncryptionCipher;break;default:var R=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+m.algorithm+'".');throw R.algorithm=m.algorithm,R}var S=r.pbe.opensslDeriveBytes(_,y.substr(0,8),b),E=T(S);E.start(y),E.update(n.toDer(s.privateKeyToAsn1(p))),E.finish();var A={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:w,parameters:r.util.bytesToHex(y).toUpperCase()},body:E.output.getBytes()};return r.pem.encode(A)},s.decryptRsaPrivateKey=function(p,_){var m=null,v=r.pem.decode(p)[0];if(v.type!=="ENCRYPTED PRIVATE KEY"&&v.type!=="PRIVATE KEY"&&v.type!=="RSA PRIVATE KEY"){var w=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw w.headerType=w,w}if(v.procType&&v.procType.type==="ENCRYPTED"){var y,b;switch(v.dekInfo.algorithm){case"DES-CBC":y=8,b=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":y=24,b=r.des.createDecryptionCipher;break;case"AES-128-CBC":y=16,b=r.aes.createDecryptionCipher;break;case"AES-192-CBC":y=24,b=r.aes.createDecryptionCipher;break;case"AES-256-CBC":y=32,b=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":y=5,b=function(A){return r.rc2.createDecryptionCipher(A,40)};break;case"RC2-64-CBC":y=8,b=function(A){return r.rc2.createDecryptionCipher(A,64)};break;case"RC2-128-CBC":y=16,b=function(A){return r.rc2.createDecryptionCipher(A,128)};break;default:var w=new Error('Could not decrypt private key; unsupported encryption algorithm "'+v.dekInfo.algorithm+'".');throw w.algorithm=v.dekInfo.algorithm,w}var T=r.util.hexToBytes(v.dekInfo.parameters),R=r.pbe.opensslDeriveBytes(_,T.substr(0,8),y),S=b(R);if(S.start(T),S.update(r.util.createBuffer(v.body)),S.finish())m=S.output.getBytes();else return m}else m=v.body;return v.type==="ENCRYPTED PRIVATE KEY"?m=s.decryptPrivateKeyInfo(n.fromDer(m),_):m=n.fromDer(m),m!==null&&(m=s.privateKeyFromAsn1(m)),m},s.pbe.generatePkcs12Key=function(p,_,m,v,w,y){var b,T;if(typeof y=="undefined"||y===null){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');y=r.md.sha1.create()}var R=y.digestLength,S=y.blockLength,E=new r.util.ByteBuffer,A=new r.util.ByteBuffer;if(p!=null){for(T=0;T<p.length;T++)A.putInt16(p.charCodeAt(T));A.putInt16(0)}var C=A.length(),I=_.length(),P=new r.util.ByteBuffer;P.fillWithByte(m,S);var O=S*Math.ceil(I/S),k=new r.util.ByteBuffer;for(T=0;T<O;T++)k.putByte(_.at(T%I));var N=S*Math.ceil(C/S),K=new r.util.ByteBuffer;for(T=0;T<N;T++)K.putByte(A.at(T%C));var U=k;U.putBuffer(K);for(var L=Math.ceil(w/R),re=1;re<=L;re++){var Z=new r.util.ByteBuffer;Z.putBytes(P.bytes()),Z.putBytes(U.bytes());for(var V=0;V<v;V++)y.start(),y.update(Z.getBytes()),Z=y.digest();var ee=new r.util.ByteBuffer;for(T=0;T<S;T++)ee.putByte(Z.at(T%R));var fe=Math.ceil(I/S)+Math.ceil(C/S),_e=new r.util.ByteBuffer;for(b=0;b<fe;b++){var ce=new r.util.ByteBuffer(U.getBytes(S)),Ee=511;for(T=ee.length()-1;T>=0;T--)Ee=Ee>>8,Ee+=ee.at(T)+ce.at(T),ce.setAt(T,Ee&255);_e.putBuffer(ce)}U=_e,E.putBuffer(Z)}return E.truncate(E.length()-w),E},s.pbe.getCipher=function(p,_,m){switch(p){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(p,_,m);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(p,_,m);default:var v=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw v.oid=p,v.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],v}},s.pbe.getCipherForPBES2=function(p,_,m){var v={},w=[];if(!n.validate(_,f,v,w)){var y=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw y.errors=w,y}if(p=n.derToOid(v.kdfOid),p!==s.oids.pkcs5PBKDF2){var y=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw y.oid=p,y.supportedOids=["pkcs5PBKDF2"],y}if(p=n.derToOid(v.encOid),p!==s.oids["aes128-CBC"]&&p!==s.oids["aes192-CBC"]&&p!==s.oids["aes256-CBC"]&&p!==s.oids["des-EDE3-CBC"]&&p!==s.oids.desCBC){var y=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw y.oid=p,y.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],y}var b=v.kdfSalt,T=r.util.createBuffer(v.kdfIterationCount);T=T.getInt(T.length()<<3);var R,S;switch(s.oids[p]){case"aes128-CBC":R=16,S=r.aes.createDecryptionCipher;break;case"aes192-CBC":R=24,S=r.aes.createDecryptionCipher;break;case"aes256-CBC":R=32,S=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":R=24,S=r.des.createDecryptionCipher;break;case"desCBC":R=8,S=r.des.createDecryptionCipher;break}var E=d(v.prfOid),A=r.pkcs5.pbkdf2(m,b,T,R,E),C=v.encIv,I=S(A);return I.start(C),I},s.pbe.getCipherForPKCS12PBE=function(p,_,m){var v={},w=[];if(!n.validate(_,a,v,w)){var y=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw y.errors=w,y}var b=r.util.createBuffer(v.salt),T=r.util.createBuffer(v.iterations);T=T.getInt(T.length()<<3);var R,S,E;switch(p){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:R=24,S=8,E=r.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:R=5,S=8,E=function(O,k){var N=r.rc2.createDecryptionCipher(O,40);return N.start(k,null),N};break;default:var y=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw y.oid=p,y}var A=d(v.prfOid),C=s.pbe.generatePkcs12Key(m,b,1,T,R,A);A.start();var I=s.pbe.generatePkcs12Key(m,b,2,T,S,A);return E(C,I)},s.pbe.opensslDeriveBytes=function(p,_,m,v){if(typeof v=="undefined"||v===null){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');v=r.md.md5.create()}_===null&&(_="");for(var w=[c(v,p+_)],y=16,b=1;y<m;++b,y+=16)w.push(c(v,w[b-1]+p+_));return w.join("").substr(0,m)};function c(p,_){return p.start().update(_).digest().getBytes()}function d(p){var _;if(!p)_="hmacWithSHA1";else if(_=s.oids[n.derToOid(p)],!_){var m=new Error("Unsupported PRF OID.");throw m.oid=p,m.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],m}return h(_)}function h(p){var _=r.md;switch(p){case"hmacWithSHA224":_=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":p=p.substr(8).toLowerCase();break;default:var m=new Error("Unsupported PRF algorithm.");throw m.algorithm=p,m.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],m}if(!_||!(p in _))throw new Error("Unknown hash algorithm: "+p);return _[p].create()}function g(p,_,m,v){var w=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,p),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,_.getBytes())]);return v!=="hmacWithSHA1"&&w.value.push(n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(m.toString(16))),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids[v]).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])),w}}}),require_webcrypto=__commonJS({"node_modules/libp2p-crypto/src/webcrypto.js"(e){init_node_globals(),e.get=(o=globalThis)=>{const r=o.crypto;if(!r||!r.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return r}}}),require_aes_gcm_browser=__commonJS({"node_modules/libp2p-crypto/src/ciphers/aes-gcm.browser.js"(e,o){init_node_globals();var{concat:r}=(init_concat(),__toCommonJS(concat_exports)),{fromString:t}=(init_from_string(),__toCommonJS(from_string_exports)),n=require_webcrypto();function s({algorithm:u="AES-GCM",nonceLength:l=12,keyLength:f=16,digest:a="SHA-256",saltLength:c=16,iterations:d=32767}={}){const h=n.get();f*=8;async function g(_,m){const v=h.getRandomValues(new Uint8Array(c)),w=h.getRandomValues(new Uint8Array(l)),y={name:u,iv:w},b={name:"PBKDF2",salt:v,iterations:d,hash:{name:a}},T=await h.subtle.importKey("raw",t(m),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),R=await h.subtle.deriveKey(b,T,{name:u,length:f},!0,["encrypt"]),S=await h.subtle.encrypt(y,R,_);return r([v,y.iv,new Uint8Array(S)])}async function p(_,m){const v=_.slice(0,c),w=_.slice(c,c+l),y=_.slice(c+l),b={name:u,iv:w},T={name:"PBKDF2",salt:v,iterations:d,hash:{name:a}},R=await h.subtle.importKey("raw",t(m),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),S=await h.subtle.deriveKey(T,R,{name:u,length:f},!0,["decrypt"]),E=await h.subtle.decrypt(b,S,y);return new Uint8Array(E)}return{encrypt:g,decrypt:p}}o.exports={create:s}}}),require_importer=__commonJS({"node_modules/libp2p-crypto/src/keys/importer.js"(e,o){init_node_globals();var{base64:r}=(init_base64(),__toCommonJS(base64_exports)),t=require_aes_gcm_browser();o.exports={import:async function(n,s){const u=r.decode(n);return await t.create().decrypt(u,s)}}}}),require_sha512=__commonJS({"node_modules/node-forge/lib/sha512.js"(e,o){init_node_globals();var r=require_forge();require_md(),require_util();var t=o.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=t;var n=r.sha384=r.sha512.sha384=r.sha512.sha384||{};n.create=function(){return t.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=n,r.sha512.sha256=r.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,t.create=function(d){if(u||a(),typeof d=="undefined"&&(d="SHA-512"),!(d in f))throw new Error("Invalid SHA-512 algorithm: "+d);for(var h=f[d],g=null,p=r.util.createBuffer(),_=new Array(80),m=0;m<80;++m)_[m]=new Array(2);var v=64;switch(d){case"SHA-384":v=48;break;case"SHA-512/256":v=32;break;case"SHA-512/224":v=28;break}var w={algorithm:d.replace("-","").toLowerCase(),blockLength:128,digestLength:v,messageLength:0,fullMessageLength:null,messageLengthSize:16};return w.start=function(){w.messageLength=0,w.fullMessageLength=w.messageLength128=[];for(var y=w.messageLengthSize/4,b=0;b<y;++b)w.fullMessageLength.push(0);p=r.util.createBuffer(),g=new Array(h.length);for(var b=0;b<h.length;++b)g[b]=h[b].slice(0);return w},w.start(),w.update=function(y,b){b==="utf8"&&(y=r.util.encodeUtf8(y));var T=y.length;w.messageLength+=T,T=[T/4294967296>>>0,T>>>0];for(var R=w.fullMessageLength.length-1;R>=0;--R)w.fullMessageLength[R]+=T[1],T[1]=T[0]+(w.fullMessageLength[R]/4294967296>>>0),w.fullMessageLength[R]=w.fullMessageLength[R]>>>0,T[0]=T[1]/4294967296>>>0;return p.putBytes(y),c(g,_,p),(p.read>2048||p.length()===0)&&p.compact(),w},w.digest=function(){var y=r.util.createBuffer();y.putBytes(p.bytes());var b=w.fullMessageLength[w.fullMessageLength.length-1]+w.messageLengthSize,T=b&w.blockLength-1;y.putBytes(s.substr(0,w.blockLength-T));for(var R,S,E=w.fullMessageLength[0]*8,A=0;A<w.fullMessageLength.length-1;++A)R=w.fullMessageLength[A+1]*8,S=R/4294967296>>>0,E+=S,y.putInt32(E>>>0),E=R>>>0;y.putInt32(E);for(var C=new Array(g.length),A=0;A<g.length;++A)C[A]=g[A].slice(0);c(C,_,y);var I=r.util.createBuffer(),P;d==="SHA-512"?P=C.length:d==="SHA-384"?P=C.length-2:P=C.length-4;for(var A=0;A<P;++A)I.putInt32(C[A][0]),(A!==P-1||d!=="SHA-512/224")&&I.putInt32(C[A][1]);return I},w};var s=null,u=!1,l=null,f=null;function a(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),128),l=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],f={},f["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],f["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],f["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],f["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],u=!0}function c(d,h,g){for(var p,_,m,v,w,y,b,T,R,S,E,A,C,I,P,O,k,N,K,U,L,re,Z,V,ee,fe,_e,ce,Ee,Ie,ue,pe,Ae,Y,se,F=g.length();F>=128;){for(Ee=0;Ee<16;++Ee)h[Ee][0]=g.getInt32()>>>0,h[Ee][1]=g.getInt32()>>>0;for(;Ee<80;++Ee)pe=h[Ee-2],Ie=pe[0],ue=pe[1],p=((Ie>>>19|ue<<13)^(ue>>>29|Ie<<3)^Ie>>>6)>>>0,_=((Ie<<13|ue>>>19)^(ue<<3|Ie>>>29)^(Ie<<26|ue>>>6))>>>0,Y=h[Ee-15],Ie=Y[0],ue=Y[1],m=((Ie>>>1|ue<<31)^(Ie>>>8|ue<<24)^Ie>>>7)>>>0,v=((Ie<<31|ue>>>1)^(Ie<<24|ue>>>8)^(Ie<<25|ue>>>7))>>>0,Ae=h[Ee-7],se=h[Ee-16],ue=_+Ae[1]+v+se[1],h[Ee][0]=p+Ae[0]+m+se[0]+(ue/4294967296>>>0)>>>0,h[Ee][1]=ue>>>0;for(C=d[0][0],I=d[0][1],P=d[1][0],O=d[1][1],k=d[2][0],N=d[2][1],K=d[3][0],U=d[3][1],L=d[4][0],re=d[4][1],Z=d[5][0],V=d[5][1],ee=d[6][0],fe=d[6][1],_e=d[7][0],ce=d[7][1],Ee=0;Ee<80;++Ee)b=((L>>>14|re<<18)^(L>>>18|re<<14)^(re>>>9|L<<23))>>>0,T=((L<<18|re>>>14)^(L<<14|re>>>18)^(re<<23|L>>>9))>>>0,R=(ee^L&(Z^ee))>>>0,S=(fe^re&(V^fe))>>>0,w=((C>>>28|I<<4)^(I>>>2|C<<30)^(I>>>7|C<<25))>>>0,y=((C<<4|I>>>28)^(I<<30|C>>>2)^(I<<25|C>>>7))>>>0,E=(C&P|k&(C^P))>>>0,A=(I&O|N&(I^O))>>>0,ue=ce+T+S+l[Ee][1]+h[Ee][1],p=_e+b+R+l[Ee][0]+h[Ee][0]+(ue/4294967296>>>0)>>>0,_=ue>>>0,ue=y+A,m=w+E+(ue/4294967296>>>0)>>>0,v=ue>>>0,_e=ee,ce=fe,ee=Z,fe=V,Z=L,V=re,ue=U+_,L=K+p+(ue/4294967296>>>0)>>>0,re=ue>>>0,K=k,U=N,k=P,N=O,P=C,O=I,ue=_+v,C=p+m+(ue/4294967296>>>0)>>>0,I=ue>>>0;ue=d[0][1]+I,d[0][0]=d[0][0]+C+(ue/4294967296>>>0)>>>0,d[0][1]=ue>>>0,ue=d[1][1]+O,d[1][0]=d[1][0]+P+(ue/4294967296>>>0)>>>0,d[1][1]=ue>>>0,ue=d[2][1]+N,d[2][0]=d[2][0]+k+(ue/4294967296>>>0)>>>0,d[2][1]=ue>>>0,ue=d[3][1]+U,d[3][0]=d[3][0]+K+(ue/4294967296>>>0)>>>0,d[3][1]=ue>>>0,ue=d[4][1]+re,d[4][0]=d[4][0]+L+(ue/4294967296>>>0)>>>0,d[4][1]=ue>>>0,ue=d[5][1]+V,d[5][0]=d[5][0]+Z+(ue/4294967296>>>0)>>>0,d[5][1]=ue>>>0,ue=d[6][1]+fe,d[6][0]=d[6][0]+ee+(ue/4294967296>>>0)>>>0,d[6][1]=ue>>>0,ue=d[7][1]+ce,d[7][0]=d[7][0]+_e+(ue/4294967296>>>0)>>>0,d[7][1]=ue>>>0,F-=128}}}}),require_random_browser=__commonJS({"node_modules/iso-random-stream/src/random.browser.js"(e,o){init_node_globals();var r=65536;function t(n){const s=new Uint8Array(n);let u=0;if(n>0)if(n>r)for(;u<n;)u+r>n?(crypto.getRandomValues(s.subarray(u,u+(n-u))),u+=n-u):(crypto.getRandomValues(s.subarray(u,u+r)),u+=r);else crypto.getRandomValues(s);return s}o.exports=t}}),require_random_bytes=__commonJS({"node_modules/libp2p-crypto/src/random-bytes.js"(e,o){init_node_globals();var r=require_random_browser(),t=require_err_code();o.exports=function(n){if(isNaN(n)||n<=0)throw t(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return r(n)}}}),require_util2=__commonJS({"node_modules/libp2p-crypto/src/util.js"(e){init_node_globals(),require_util(),require_jsbn();var o=require_forge(),{fromString:r}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),{concat:n}=(init_concat(),__toCommonJS(concat_exports));e.bigIntegerToUintBase64url=(s,u)=>{let l=Uint8Array.from(s.abs().toByteArray());if(l=l[0]===0?l.slice(1):l,u!=null){if(l.length>u)throw new Error("byte array longer than desired length");l=n([new Uint8Array(u-l.length),l])}return t(l,"base64url")},e.base64urlToBigInteger=s=>{const u=e.base64urlToBuffer(s);return new o.jsbn.BigInteger(t(u,"base16"),16)},e.base64urlToBuffer=(s,u)=>{let l=r(s,"base64urlpad");if(u!=null){if(l.length>u)throw new Error("byte array longer than desired length");l=n([new Uint8Array(u-l.length),l])}return l}}}),require_rsa_utils=__commonJS({"node_modules/libp2p-crypto/src/keys/rsa-utils.js"(e){init_node_globals(),require_asn1(),require_rsa();var o=require_forge(),{bigIntegerToUintBase64url:r,base64urlToBigInteger:t}=require_util2(),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports));e.pkcs1ToJwk=function(u){const l=o.asn1.fromDer(s(u,"ascii")),f=o.pki.privateKeyFromAsn1(l);return{kty:"RSA",n:r(f.n),e:r(f.e),d:r(f.d),p:r(f.p),q:r(f.q),dp:r(f.dP),dq:r(f.dQ),qi:r(f.qInv),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkcs1=function(u){const l=o.pki.privateKeyToAsn1({n:t(u.n),e:t(u.e),d:t(u.d),p:t(u.p),q:t(u.q),dP:t(u.dp),dQ:t(u.dq),qInv:t(u.qi)});return n(o.asn1.toDer(l).getBytes(),"ascii")},e.pkixToJwk=function(u){const l=o.asn1.fromDer(s(u,"ascii")),f=o.pki.publicKeyFromAsn1(l);return{kty:"RSA",n:r(f.n),e:r(f.e),alg:"RS256",kid:"2011-04-29"}},e.jwkToPkix=function(u){const l=o.pki.publicKeyToAsn1({n:t(u.n),e:t(u.e)});return n(o.asn1.toDer(l).getBytes(),"ascii")}}}),require_jwk2pem=__commonJS({"node_modules/libp2p-crypto/src/keys/jwk2pem.js"(e,o){init_node_globals(),require_rsa();var r=require_forge(),{base64urlToBigInteger:t}=require_util2();function n(l,f){return f.map(a=>t(l[a]))}function s(l){return r.pki.setRsaPrivateKey(...n(l,["n","e","d","p","q","dp","dq","qi"]))}function u(l){return r.pki.setRsaPublicKey(...n(l,["n","e"]))}o.exports={jwk2pub:u,jwk2priv:s}}}),require_rsa_browser=__commonJS({"node_modules/libp2p-crypto/src/keys/rsa-browser.js"(e){init_node_globals();var o=require_webcrypto(),r=require_random_bytes(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports));e.utils=require_rsa_utils(),e.generateKey=async function(c){const d=await o.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:c,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),h=await s(d);return{privateKey:h[0],publicKey:h[1]}},e.unmarshalPrivateKey=async function(c){const h=[await o.get().subtle.importKey("jwk",c,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await u(c)],g=await s({privateKey:h[0],publicKey:h[1]});return{privateKey:g[0],publicKey:g[1]}},e.getRandomValues=r,e.hashAndSign=async function(c,d){const h=await o.get().subtle.importKey("jwk",c,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),g=await o.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},h,Uint8Array.from(d));return new Uint8Array(g,g.byteOffset,g.byteLength)},e.hashAndVerify=async function(c,d,h){const g=await o.get().subtle.importKey("jwk",c,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return o.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},g,d,h)};function s(c){return Promise.all([o.get().subtle.exportKey("jwk",c.privateKey),o.get().subtle.exportKey("jwk",c.publicKey)])}function u(c){return o.get().subtle.importKey("jwk",{kty:c.kty,n:c.n,e:c.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:l,jwk2priv:f}=require_jwk2pem();function a(c,d,h,g){const p=d?l(c):f(c),_=t(Uint8Array.from(h),"ascii"),m=g(_,p);return n(m,"ascii")}e.encrypt=function(c,d){return a(c,!0,d,(h,g)=>g.encrypt(h))},e.decrypt=function(c,d){return a(c,!1,d,(h,g)=>g.decrypt(h))}}}),require_exporter=__commonJS({"node_modules/libp2p-crypto/src/keys/exporter.js"(e,o){init_node_globals();var{base64:r}=(init_base64(),__toCommonJS(base64_exports)),t=require_aes_gcm_browser();o.exports={export:async function(n,s){const l=await t.create().encrypt(n,s);return r.encode(l)}}}}),require_rsa_class=__commonJS({"node_modules/libp2p-crypto/src/keys/rsa-class.js"(e,o){init_node_globals();var{sha256:r}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),t=require_err_code(),{equals:n}=(init_equals(),__toCommonJS(equals_exports)),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports));require_sha512();var u=require_forge(),l=require_rsa_browser(),f=require_keys(),a=require_exporter(),c=class{constructor(m){this._key=m}async verify(m,v){return l.hashAndVerify(this._key,v,m)}marshal(){return l.utils.jwkToPkix(this._key)}get bytes(){return f.PublicKey.encode({Type:f.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(m){return l.encrypt(this._key,m)}equals(m){return n(this.bytes,m.bytes)}async hash(){const{bytes:m}=await r.digest(this.bytes);return m}},d=class{constructor(m,v){this._key=m,this._publicKey=v}genSecret(){return l.getRandomValues(16)}async sign(m){return l.hashAndSign(this._key,m)}get public(){if(!this._publicKey)throw t(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new c(this._publicKey)}decrypt(m){return l.decrypt(this._key,m)}marshal(){return l.utils.jwkToPkcs1(this._key)}get bytes(){return f.PrivateKey.encode({Type:f.KeyType.RSA,Data:this.marshal()}).finish()}equals(m){return n(this.bytes,m.bytes)}async hash(){const{bytes:m}=await r.digest(this.bytes);return m}async id(){const m=await this.public.hash();return s(m,"base58btc")}async export(m,v="pkcs-8"){if(v==="pkcs-8"){const w=new u.util.ByteBuffer(this.marshal()),y=u.asn1.fromDer(w),b=u.pki.privateKeyFromAsn1(y),T={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return u.pki.encryptRsaPrivateKey(b,m,T)}else{if(v==="libp2p-key")return a.export(this.bytes,m);throw t(new Error(`export format '${v}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function h(m){const v=l.utils.pkcs1ToJwk(m),w=await l.unmarshalPrivateKey(v);return new d(w.privateKey,w.publicKey)}function g(m){const v=l.utils.pkixToJwk(m);return new c(v)}async function p(m){const v=await l.unmarshalPrivateKey(m);return new d(v.privateKey,v.publicKey)}async function _(m){const v=await l.generateKey(m);return new d(v.privateKey,v.publicKey)}o.exports={RsaPublicKey:c,RsaPrivateKey:d,unmarshalRsaPublicKey:g,unmarshalRsaPrivateKey:h,generateKeyPair:_,fromJwk:p}}}),require_lib2=__commonJS({"node_modules/@noble/ed25519/lib/index.js"(e){init_node_globals();var o=e&&e.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.curve25519=e.getSharedSecret=e.verify=e.sign=e.getPublicKey=e.Signature=e.Point=e.ExtendedPoint=e.CURVE=void 0;var r=o(require_crypto()),t=BigInt(0),n=BigInt(1),s=BigInt(2),u=BigInt(255),l=s**BigInt(252)+BigInt("27742317777372353535851937790883648493"),f={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:s**u-BigInt(19),l,n:l,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")};e.CURVE=f;var a=s**BigInt(256),c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");var d=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),h=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),g=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),p=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),_=class{constructor(B,$,G,X){this.x=B,this.y=$,this.z=G,this.t=X}static fromAffine(B){if(!(B instanceof v))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return B.equals(v.ZERO)?_.ZERO:new _(B.x,B.y,n,P(B.x*B.y))}static toAffineBatch(B){const $=k(B.map(G=>G.z));return B.map((G,X)=>G.toAffine($[X]))}static normalizeZ(B){return this.toAffineBatch(B).map(this.fromAffine)}static fromRistrettoHash(B){B=V(B,64);const $=I(B.slice(0,32)),G=this.calcElligatorRistrettoMap($),X=I(B.slice(32,64)),H=this.calcElligatorRistrettoMap(X);return G.add(H)}static calcElligatorRistrettoMap(B){const{d:$}=f,G=P(c*B*B),X=P((G+n)*g);let H=BigInt(-1);const he=P((H-$*G)*P(G+$));let{isValid:we,value:Te}=U(X,he),De=P(Te*B);A(De)||(De=P(-De)),we||(Te=De),we||(H=G);const Me=P(H*(G-n)*p-he),Be=Te*Te,Le=P((Te+Te)*he),W=P(Me*d),q=P(n-Be),M=P(n+Be);return new _(P(Le*M),P(q*W),P(W*M),P(Le*q))}static fromRistrettoBytes(B){B=V(B,32);const{a:$,d:G}=f,X="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",H=I(B);if(!Z(E(H,32),B)||A(H))throw new Error(X);const he=P(H*H),we=P(n+$*he),Te=P(n-$*he),De=P(we*we),Me=P(Te*Te),Be=P($*G*De-Me),{isValid:Le,value:W}=L(P(Be*Me)),q=P(W*Te),M=P(W*q*Be);let ie=P((H+H)*q);A(ie)&&(ie=P(-ie));const ve=P(we*M),D=P(ie*ve);if(!Le||A(D)||ve===t)throw new Error(X);return new _(ie,ve,n,D)}toRistrettoBytes(){let{x:B,y:$,z:G,t:X}=this;const H=P(P(G+$)*P(G-$)),he=P(B*$),{value:we}=L(P(H*he**s)),Te=P(we*H),De=P(we*he),Me=P(Te*De*X);let Be;if(A(X*Me)){let W=P($*c),q=P(B*c);B=W,$=q,Be=P(Te*h)}else Be=De;A(B*Me)&&($=P(-$));let Le=P((G-$)*Be);return A(Le)&&(Le=P(-Le)),E(Le,32)}equals(B){const $=this,G=B;return P($.t*G.z)===P(G.t*$.z)}negate(){return new _(P(-this.x),this.y,this.z,P(-this.t))}double(){const B=this.x,$=this.y,G=this.z,{a:X}=f,H=P(B**s),he=P($**s),we=P(s*G**s),Te=P(X*H),De=P((B+$)**s-H-he),Me=P(Te+he),Be=P(Me-we),Le=P(Te-he),W=P(De*Be),q=P(Me*Le),M=P(De*Le),ie=P(Be*Me);return new _(W,q,ie,M)}add(B){const $=this.x,G=this.y,X=this.z,H=this.t,he=B.x,we=B.y,Te=B.z,De=B.t,Me=P((G-$)*(we+he)),Be=P((G+$)*(we-he)),Le=P(Be-Me);if(Le===t)return this.double();const W=P(X*s*De),q=P(H*s*Te),M=P(q+W),ie=P(Be+Me),ve=P(q-W),D=P(M*Le),z=P(ie*ve),de=P(M*ve),be=P(Le*ie);return new _(D,z,be,de)}subtract(B){return this.add(B.negate())}multiplyUnsafe(B){let $=ee(B,f.n);const G=_.ZERO;if(this.equals(G)||$===n)return this;let X=G,H=this;for(;$>t;)$&n&&(X=X.add(H)),H=H.double(),$>>=n;return X}precomputeWindow(B){const $=256/B+1;let G=[],X=this,H=X;for(let he=0;he<$;he++){H=X,G.push(H);for(let we=1;we<2**(B-1);we++)H=H.add(X),G.push(H);X=H.double()}return G}wNAF(B,$){!$&&this.equals(_.BASE)&&($=v.BASE);const G=$&&$._WINDOW_SIZE||1;if(256%G)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let X=$&&m.get($);X||(X=this.precomputeWindow(G),$&&G!==1&&(X=_.normalizeZ(X),m.set($,X)));let H=_.ZERO,he=_.ZERO;const we=256/G+1,Te=2**(G-1),De=BigInt(2**G-1),Me=2**G,Be=BigInt(G);for(let Le=0;Le<we;Le++){const W=Le*Te;let q=Number(B&De);if(B>>=Be,q>Te&&(q-=Me,B+=n),q===0){let M=X[W];Le%2&&(M=M.negate()),he=he.add(M)}else{let M=X[W+Math.abs(q)-1];q<0&&(M=M.negate()),H=H.add(M)}}return[H,he]}multiply(B,$){const G=ee(B,f.n);return _.normalizeZ(this.wNAF(G,$))[0]}multiplyForVerification(B){const $=ee(B,f.n,!1);return _.normalizeZ(this.wNAF($))[0]}toAffine(B=O(this.z)){const $=P(this.x*B),G=P(this.y*B);return new v($,G)}};e.ExtendedPoint=_,_.BASE=new _(f.Gx,f.Gy,n,P(f.Gx*f.Gy)),_.ZERO=new _(t,n,n,t);var m=new WeakMap,v=class{constructor(B,$){this.x=B,this.y=$}_setWindowSize(B){this._WINDOW_SIZE=B,m.delete(this)}static fromHex(B,$=!0){const{d:G,P:X}=f;B=V(B,32);const H=B.slice();H[31]=B[31]&~128;const he=C(H);if($&&he>=X||!$&&he>=a)throw new Error("Point.fromHex expects hex <= Fp");const we=P(he*he),Te=P(we-n),De=P(G*we+n);let{isValid:Me,value:Be}=U(Te,De);if(!Me)throw new Error("Point.fromHex: invalid y coordinate");const Le=(Be&n)===n;return(B[31]&128)!=0!==Le&&(Be=P(-Be)),new v(Be,he)}static async fromPrivateKey(B){return(await ce(B)).point}toRawBytes(){const B=E(this.y,32);return B[31]|=this.x&n?128:0,B}toHex(){return T(this.toRawBytes())}toX25519(){const{y:B}=this,$=P((n+B)*O(n-B));return E($,32)}equals(B){return this.x===B.x&&this.y===B.y}negate(){return new v(P(-this.x),this.y)}add(B){return _.fromAffine(this).add(_.fromAffine(B)).toAffine()}subtract(B){return this.add(B.negate())}multiply(B){return _.fromAffine(this).multiply(B,this).toAffine()}};e.Point=v,v.BASE=new v(f.Gx,f.Gy),v.ZERO=new v(t,n);var w=class{constructor(B,$,G=!0){if(this.r=B,!(B instanceof v))throw new Error("Expected Point instance");this.s=ee($,f.n,G)}static fromHex(B,$=!0){const G=V(B,64),X=v.fromHex(G.slice(0,32),$),H=C(G.slice(32,64));return new w(X,H,$)}toRawBytes(){const B=new Uint8Array(64);return B.set(this.r.toRawBytes()),B.set(E(this.s,32),32),B}toHex(){return T(this.toRawBytes())}};e.Signature=w;function y(...B){if(!B.every(X=>X instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(B.length===1)return B[0];const $=B.reduce((X,H)=>X+H.length,0),G=new Uint8Array($);for(let X=0,H=0;X<B.length;X++){const he=B[X];G.set(he,H),H+=he.length}return G}var b=Array.from({length:256},(B,$)=>$.toString(16).padStart(2,"0"));function T(B){if(!(B instanceof Uint8Array))throw new Error("Uint8Array expected");let $="";for(let G=0;G<B.length;G++)$+=b[B[G]];return $}function R(B){if(typeof B!="string")throw new TypeError("hexToBytes: expected string, got "+typeof B);if(B.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const $=new Uint8Array(B.length/2);for(let G=0;G<$.length;G++){const X=G*2,H=B.slice(X,X+2),he=Number.parseInt(H,16);if(Number.isNaN(he)||he<0)throw new Error("Invalid byte sequence");$[G]=he}return $}function S(B,$){const G=B.toString(16).padStart($*2,"0");return R(G)}function E(B,$){return S(B,$).reverse()}function A(B){return(P(B)&n)===n}function C(B){if(!(B instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+T(Uint8Array.from(B).reverse()))}function I(B){return P(C(B)&s**u-n)}function P(B,$=f.P){const G=B%$;return G>=t?G:$+G}function O(B,$=f.P){if(B===t||$<=t)throw new Error(`invert: expected positive integers, got n=${B} mod=${$}`);let G=P(B,$),X=$,H=t,he=n;for(;G!==t;){const Te=X/G,De=X%G,Me=H-he*Te;X=G,G=De,H=he,he=Me}if(X!==n)throw new Error("invert: does not exist");return P(H,$)}function k(B,$=f.P){const G=B.length,X=new Array(G);let H=n;for(let he=0;he<G;he++)B[he]!==t&&(X[he]=H,H=P(H*B[he],$));H=O(H,$);for(let he=G-1;he>=0;he--){if(B[he]===t)continue;let we=P(H*B[he],$);B[he]=P(H*X[he],$),H=we}return B}function N(B,$){const{P:G}=f;let X=B;for(;$-- >t;)X*=X,X%=G;return X}function K(B){const{P:$}=f,G=BigInt(5),X=BigInt(10),H=BigInt(20),he=BigInt(40),we=BigInt(80),De=B*B%$*B%$,Me=N(De,s)*De%$,Be=N(Me,n)*B%$,Le=N(Be,G)*Be%$,W=N(Le,X)*Le%$,q=N(W,H)*W%$,M=N(q,he)*q%$,ie=N(M,we)*M%$,ve=N(ie,we)*M%$,D=N(ve,X)*Le%$;return{pow_p_5_8:N(D,s)*B%$,b2:De}}function U(B,$){const G=P($*$*$),X=P(G*G*$),H=K(B*X).pow_p_5_8;let he=P(B*G*H);const we=P($*he*he),Te=he,De=P(he*c),Me=we===B,Be=we===P(-B),Le=we===P(-B*c);return Me&&(he=Te),(Be||Le)&&(he=De),A(he)&&(he=P(-he)),{isValid:Me||Be,value:he}}function L(B){return U(n,B)}async function re(...B){const $=y(...B),G=await e.utils.sha512($),X=C(G);return P(X,f.n)}function Z(B,$){if(B.length!==$.length)return!1;for(let G=0;G<B.length;G++)if(B[G]!==$[G])return!1;return!0}function V(B,$){const G=B instanceof Uint8Array?Uint8Array.from(B):R(B);if(typeof $=="number"&&G.length!==$)throw new Error(`Expected ${$} bytes`);return G}function ee(B,$,G=!0){if(!$)throw new TypeError("Specify max value");if(typeof B=="bigint"){if(G){if(t<B&&B<$)return B}else if(t<=B&&B<a)return B}if(typeof B=="number"&&Number.isSafeInteger(B)){if(G){if(0<B)return BigInt(B)}else if(0<=B)return BigInt(B)}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function fe(B){return B[0]&=248,B[31]&=127,B[31]|=64,B}function _e(B){return C(fe(V(B,32)))}async function ce(B){if(B=typeof B=="bigint"||typeof B=="number"?S(ee(B,a),32):V(B),B.length!==32)throw new Error("Expected 32 bytes");const $=await e.utils.sha512(B),G=fe($.slice(0,32)),X=$.slice(32,64),H=P(C(G),f.n),he=v.BASE.multiply(H),we=he.toRawBytes();return{head:G,prefix:X,scalar:H,point:he,pointBytes:we}}async function Ee(B){return(await ce(B)).pointBytes}e.getPublicKey=Ee;async function Ie(B,$){B=V(B);const{prefix:G,scalar:X,pointBytes:H}=await ce($),he=await re(G,B),we=v.BASE.multiply(he),Te=await re(we.toRawBytes(),H,B),De=P(he+Te*X,f.n);return new w(we,De).toRawBytes()}e.sign=Ie;async function ue(B,$,G){$=V($),G instanceof v||(G=v.fromHex(G,!1)),B instanceof w||(B=w.fromHex(B,!1));const X=_.BASE.multiplyForVerification(B.s),H=await re(B.r.toRawBytes(),G.toRawBytes(),$),he=_.fromAffine(G).multiplyUnsafe(H);return _.fromAffine(B.r).add(he).subtract(X).multiplyUnsafe(f.h).equals(_.ZERO)}e.verify=ue;async function pe(B,$){const{head:G}=await ce(B),X=v.fromHex($).toX25519();return e.curve25519.scalarMult(G,X)}e.getSharedSecret=pe,v.BASE._setWindowSize(8);function Ae(B,$,G){const X=P(B*($-G));return $=P($-X),G=P(G+X),[$,G]}function Y(B,$){const{P:G}=f,X=ee(B,G),H=ee($,G),he=BigInt(121665),we=X;let Te=n,De=t,Me=X,Be=n,Le=t,W;for(let ve=BigInt(255-1);ve>=t;ve--){const D=H>>ve&n;Le^=D,W=Ae(Le,Te,Me),Te=W[0],Me=W[1],W=Ae(Le,De,Be),De=W[0],Be=W[1],Le=D;const z=Te+De,de=P(z*z),be=Te-De,le=P(be*be),ye=de-le,J=Me+Be,qe=Me-Be,Ue=P(qe*z),x=P(J*be);Me=P((Ue+x)**s),Be=P(we*(Ue-x)**s),Te=P(de*le),De=P(ye*(de+P(he*ye)))}W=Ae(Le,Te,Me),Te=W[0],Me=W[1],W=Ae(Le,De,Be),De=W[0],Be=W[1];const{pow_p_5_8:q,b2:M}=K(De),ie=P(N(q,BigInt(3))*M);return P(Te*ie)}function se(B){return E(P(B,f.P),32)}function F(B){const $=V(B,32);return $[31]&=127,C($)}e.curve25519={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(B,$){const G=F($),X=_e(B),H=Y(G,X);if(H===t)throw new Error("Invalid private or public key received");return se(H)},scalarMultBase(B){return e.curve25519.scalarMult(B,e.curve25519.BASE_POINT_U)}};var j={node:r.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:T,getExtendedPublicKey:ce,mod:P,randomBytes:(B=32)=>{if(j.web)return j.web.getRandomValues(new Uint8Array(B));if(j.node){const{randomBytes:$}=j.node;return new Uint8Array($(B).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>e.utils.randomBytes(32),sha512:async B=>{if(j.web){const $=await j.web.subtle.digest("SHA-512",B.buffer);return new Uint8Array($)}else{if(j.node)return Uint8Array.from(j.node.createHash("sha512").update(B).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(B=8,$=v.BASE){const G=$.equals(v.BASE)?$:new v($.x,$.y);return G._setWindowSize(B),G.multiply(s),G}}}}),require_ed25519=__commonJS({"node_modules/libp2p-crypto/src/keys/ed25519.js"(e){init_node_globals();var o=require_lib2(),r=32,t=64,n=32;e.publicKeyLength=r,e.privateKeyLength=t,e.generateKey=async function(){const u=o.utils.randomPrivateKey(),l=await o.getPublicKey(u);return{privateKey:s(u,l),publicKey:l}},e.generateKeyFromSeed=async function(u){if(u.length!==n)throw new TypeError('"seed" must be 32 bytes in length.');if(!(u instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const l=u,f=await o.getPublicKey(l);return{privateKey:s(l,f),publicKey:f}},e.hashAndSign=function(u,l){const f=u.slice(0,n);return o.sign(l,f)},e.hashAndVerify=function(u,l,f){return o.verify(l,f,u)};function s(u,l){const f=new Uint8Array(e.privateKeyLength);for(let a=0;a<n;a++)f[a]=u[a],f[n+a]=l[a];return f}}}),require_ed25519_class=__commonJS({"node_modules/libp2p-crypto/src/keys/ed25519-class.js"(e,o){init_node_globals();var r=require_err_code(),{equals:t}=(init_equals(),__toCommonJS(equals_exports)),{sha256:n}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),{base58btc:s}=(init_base58(),__toCommonJS(base58_exports)),{identity:u}=(init_identity(),__toCommonJS(identity_exports)),l=require_ed25519(),f=require_keys(),a=require_exporter(),c=class{constructor(v){this._key=m(v,l.publicKeyLength)}async verify(v,w){return l.hashAndVerify(this._key,w,v)}marshal(){return this._key}get bytes(){return f.PublicKey.encode({Type:f.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(v){return t(this.bytes,v.bytes)}async hash(){const{bytes:v}=await n.digest(this.bytes);return v}},d=class{constructor(v,w){this._key=m(v,l.privateKeyLength),this._publicKey=m(w,l.publicKeyLength)}async sign(v){return l.hashAndSign(this._key,v)}get public(){return new c(this._publicKey)}marshal(){return this._key}get bytes(){return f.PrivateKey.encode({Type:f.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(v){return t(this.bytes,v.bytes)}async hash(){const{bytes:v}=await n.digest(this.bytes);return v}async id(){const v=await u.digest(this.public.bytes);return s.encode(v.bytes).substring(1)}async export(v,w="libp2p-key"){if(w==="libp2p-key")return a.export(this.bytes,v);throw r(new Error(`export format '${w}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function h(v){if(v.length>l.privateKeyLength){v=m(v,l.privateKeyLength+l.publicKeyLength);const b=v.slice(0,l.privateKeyLength),T=v.slice(l.privateKeyLength,v.length);return new d(b,T)}v=m(v,l.privateKeyLength);const w=v.slice(0,l.privateKeyLength),y=v.slice(l.publicKeyLength);return new d(w,y)}function g(v){return v=m(v,l.publicKeyLength),new c(v)}async function p(){const{privateKey:v,publicKey:w}=await l.generateKey();return new d(v,w)}async function _(v){const{privateKey:w,publicKey:y}=await l.generateKeyFromSeed(v);return new d(w,y)}function m(v,w){if(v=Uint8Array.from(v||[]),v.length!==w)throw r(new Error(`Key must be a Uint8Array of length ${w}, got ${v.length}`),"ERR_INVALID_KEY_TYPE");return v}o.exports={Ed25519PublicKey:c,Ed25519PrivateKey:d,unmarshalEd25519PrivateKey:h,unmarshalEd25519PublicKey:g,generateKeyPair:p,generateKeyPairFromSeed:_}}}),require_lib3=__commonJS({"node_modules/@noble/secp256k1/lib/index.js"(e){init_node_globals();var o=e&&e.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.schnorr=e.verify=e.signSync=e.sign=e.getSharedSecret=e.recoverPublicKey=e.getPublicKey=e.Signature=e.Point=e.CURVE=void 0;var r=o(require_crypto()),t=BigInt(0),n=BigInt(1),s=BigInt(2),u=BigInt(3),l=BigInt(8),f=s**BigInt(256),a={a:t,b:BigInt(7),P:f-s**BigInt(32)-BigInt(977),n:f-BigInt("432420386565659656852420866394968145599"),h:n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};e.CURVE=a;function c(D){const{a:z,b:de}=a,be=N(D*D),le=N(be*D);return N(le+z*D+de)}var d=a.a===t,h=class{constructor(D,z,de){this.x=D,this.y=z,this.z=de}static fromAffine(D){if(!(D instanceof p))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new h(D.x,D.y,n)}static toAffineBatch(D){const z=re(D.map(de=>de.z));return D.map((de,be)=>de.toAffine(z[be]))}static normalizeZ(D){return h.toAffineBatch(D).map(h.fromAffine)}equals(D){const z=this,de=D,be=N(z.z*z.z),le=N(z.z*be),ye=N(de.z*de.z),J=N(de.z*ye);return N(z.x*ye)===N(be*de.x)&&N(z.y*J)===N(le*de.y)}negate(){return new h(this.x,N(-this.y),this.z)}double(){const D=this.x,z=this.y,de=this.z,be=N(D**s),le=N(z**s),ye=N(le**s),J=N(s*(N(N((D+le)**s))-be-ye)),qe=N(u*be),Ue=N(qe**s),x=N(Ue-s*J),ke=N(qe*(J-x)-l*ye),Ne=N(s*z*de);return new h(x,ke,Ne)}add(D){if(!(D instanceof h))throw new TypeError("JacobianPoint#add: expected JacobianPoint");const z=this.x,de=this.y,be=this.z,le=D.x,ye=D.y,J=D.z;if(le===t||ye===t)return this;if(z===t||de===t)return D;const qe=N(be**s),Ue=N(J**s),x=N(z*Ue),ke=N(le*qe),Ne=N(de*J*Ue),ae=N(N(ye*be)*qe),Se=N(ke-x),Oe=N(ae-Ne);if(Se===t)return Oe===t?this.double():h.ZERO;const He=N(Se**s),Ve=N(Se*He),ze=N(x*He),Xe=N(Oe**s-Ve-s*ze),ct=N(Oe*(ze-Xe)-Ne*Ve),Ze=N(be*J*Se);return new h(Xe,ct,Ze)}subtract(D){return this.add(D.negate())}multiplyUnsafe(D){let z=k(D);if(!d){let x=h.ZERO,ke=this;for(;z>t;)z&n&&(x=x.add(ke)),ke=ke.double(),z>>=n;return x}let{k1neg:de,k1:be,k2neg:le,k2:ye}=ee(z),J=h.ZERO,qe=h.ZERO,Ue=this;for(;be>t||ye>t;)be&n&&(J=J.add(Ue)),ye&n&&(qe=qe.add(Ue)),Ue=Ue.double(),be>>=n,ye>>=n;return de&&(J=J.negate()),le&&(qe=qe.negate()),qe=new h(N(qe.x*a.beta),qe.y,qe.z),J.add(qe)}precomputeWindow(D){const z=d?128/D+1:256/D+1,de=[];let be=this,le=be;for(let ye=0;ye<z;ye++){le=be,de.push(le);for(let J=1;J<2**(D-1);J++)le=le.add(be),de.push(le);be=le.double()}return de}wNAF(D,z){!z&&this.equals(h.BASE)&&(z=p.BASE);const de=z&&z._WINDOW_SIZE||1;if(256%de)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let be=z&&g.get(z);be||(be=this.precomputeWindow(de),z&&de!==1&&(be=h.normalizeZ(be),g.set(z,be)));let le=h.ZERO,ye=h.ZERO;const J=d?128/de+1:256/de+1,qe=2**(de-1),Ue=BigInt(2**de-1),x=2**de,ke=BigInt(de);for(let Ne=0;Ne<J;Ne++){const ae=Ne*qe;let Se=Number(D&Ue);if(D>>=ke,Se>qe&&(Se-=x,D+=n),Se===0){let Oe=be[ae];Ne%2&&(Oe=Oe.negate()),ye=ye.add(Oe)}else{let Oe=be[ae+Math.abs(Se)-1];Se<0&&(Oe=Oe.negate()),le=le.add(Oe)}}return{p:le,f:ye}}multiply(D,z){let de=k(D),be,le;if(d){let{k1neg:ye,k1:J,k2neg:qe,k2:Ue}=ee(de),{p:x,f:ke}=this.wNAF(J,z),{p:Ne,f:ae}=this.wNAF(Ue,z);ye&&(x=x.negate()),qe&&(Ne=Ne.negate()),Ne=new h(N(Ne.x*a.beta),Ne.y,Ne.z),be=x.add(Ne),le=ke.add(ae)}else{let{p:ye,f:J}=this.wNAF(de,z);be=ye,le=J}return h.normalizeZ([be,le])[0]}toAffine(D=L(this.z)){const z=D**s,de=N(this.x*z),be=N(this.y*z*D);return new p(de,be)}};h.BASE=new h(a.Gx,a.Gy,n),h.ZERO=new h(t,n,t);var g=new WeakMap,p=class{constructor(D,z){this.x=D,this.y=z}_setWindowSize(D){this._WINDOW_SIZE=D,g.delete(this)}static fromCompressedHex(D){const z=D.length===32,de=P(z?D:D.slice(1));if(!Ee(de))throw new Error("Point is not on curve");const be=c(de);let le=U(be);const ye=(le&n)===n;z?ye&&(le=N(-le)):(D[0]&1)==1!==ye&&(le=N(-le));const J=new p(de,le);return J.assertValidity(),J}static fromUncompressedHex(D){const z=P(D.slice(1,33)),de=P(D.slice(33)),be=new p(z,de);return be.assertValidity(),be}static fromHex(D){const z=O(D),de=z[0];if(z.length===32||z.length===33&&(de===2||de===3))return this.fromCompressedHex(z);if(z.length===65&&de===4)return this.fromUncompressedHex(z);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${z.length}`)}static fromPrivateKey(D){return p.BASE.multiply(ue(D))}static fromSignature(D,z,de){D=O(D);const be=fe(D),{r:le,s:ye}=Ae(z);if(de!==0&&de!==1)throw new Error("Cannot recover signature: invalid recovery bit");if(be===t)throw new Error("Cannot recover signature: msgHash cannot be 0");const J=2+(de&1),qe=p.fromHex(`0${J}${S(le)}`),Ue=h.fromAffine(qe).multiplyUnsafe(ye),x=h.BASE.multiply(be),ke=L(le,a.n),ae=Ue.subtract(x).multiplyUnsafe(ke).toAffine();return ae.assertValidity(),ae}toRawBytes(D=!1){return I(this.toHex(D))}toHex(D=!1){const z=S(this.x);return D?`${this.y&n?"03":"02"}${z}`:`04${z}${S(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const D="Point is not on elliptic curve",{x:z,y:de}=this;if(!Ee(z)||!Ee(de))throw new Error(D);const be=N(de*de),le=c(z);if(N(be-le)!==t)throw new Error(D)}equals(D){return this.x===D.x&&this.y===D.y}negate(){return new p(this.x,N(-this.y))}double(){return h.fromAffine(this).double().toAffine()}add(D){return h.fromAffine(this).add(h.fromAffine(D)).toAffine()}subtract(D){return this.add(D.negate())}multiply(D){return h.fromAffine(this).multiply(D,this).toAffine()}};e.Point=p,p.BASE=new p(a.Gx,a.Gy),p.ZERO=new p(t,t);function _(D){return Number.parseInt(D[0],16)>=8?"00"+D:D}function m(D){if(D.length<2||D[0]!==2)throw new Error(`Invalid signature integer tag: ${R(D)}`);const z=D[1],de=D.subarray(2,z+2);if(!z||de.length!==z)throw new Error("Invalid signature integer: wrong length");if(de[0]===0&&de[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:P(de),left:D.subarray(z+2)}}function v(D){if(D.length<2||D[0]!=48)throw new Error(`Invalid signature tag: ${R(D)}`);if(D[1]!==D.length-2)throw new Error("Invalid signature: incorrect length");const{data:z,left:de}=m(D.subarray(2)),{data:be,left:le}=m(de);if(le.length)throw new Error(`Invalid signature: left bytes after parsing: ${R(le)}`);return{r:z,s:be}}var w=class{constructor(D,z){this.r=D,this.s=z,this.assertValidity()}static fromCompact(D){const z=b(D),de="Signature.fromCompact";if(typeof D!="string"&&!z)throw new TypeError(`${de}: Expected string or Uint8Array`);const be=z?R(D):D;if(be.length!==128)throw new Error(`${de}: Expected 64-byte hex`);return new w(C(be.slice(0,64)),C(be.slice(64,128)))}static fromDER(D){const z=b(D);if(typeof D!="string"&&!z)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:de,s:be}=v(z?D:I(D));return new w(de,be)}static fromHex(D){return this.fromDER(D)}assertValidity(){const{r:D,s:z}=this;if(!ce(D))throw new Error("Invalid Signature: r must be 0 < r < n");if(!ce(z))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const D=a.n>>n;return this.s>D}normalizeS(){return this.hasHighS()?new w(this.r,a.n-this.s):this}toDERRawBytes(D=!1){return I(this.toDERHex(D))}toDERHex(D=!1){const z=_(A(this.s));if(D)return z;const de=_(A(this.r)),be=A(de.length/2),le=A(z.length/2);return`30${A(de.length/2+z.length/2+4)}02${be}${de}02${le}${z}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return I(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}};e.Signature=w;function y(...D){if(!D.every(b))throw new Error("Uint8Array list expected");if(D.length===1)return D[0];const z=D.reduce((be,le)=>be+le.length,0),de=new Uint8Array(z);for(let be=0,le=0;be<D.length;be++){const ye=D[be];de.set(ye,le),le+=ye.length}return de}function b(D){return D instanceof Uint8Array}var T=Array.from({length:256},(D,z)=>z.toString(16).padStart(2,"0"));function R(D){if(!(D instanceof Uint8Array))throw new Error("Expected Uint8Array");let z="";for(let de=0;de<D.length;de++)z+=T[D[de]];return z}function S(D){if(D>f)throw new Error("Expected number < 2^256");return D.toString(16).padStart(64,"0")}function E(D){return I(S(D))}function A(D){const z=D.toString(16);return z.length&1?`0${z}`:z}function C(D){if(typeof D!="string")throw new TypeError("hexToNumber: expected string, got "+typeof D);return BigInt(`0x${D}`)}function I(D){if(typeof D!="string")throw new TypeError("hexToBytes: expected string, got "+typeof D);if(D.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+D.length);const z=new Uint8Array(D.length/2);for(let de=0;de<z.length;de++){const be=de*2,le=D.slice(be,be+2),ye=Number.parseInt(le,16);if(Number.isNaN(ye)||ye<0)throw new Error("Invalid byte sequence");z[de]=ye}return z}function P(D){return C(R(D))}function O(D){return D instanceof Uint8Array?Uint8Array.from(D):I(D)}function k(D){if(typeof D=="number"&&Number.isSafeInteger(D)&&D>0)return BigInt(D);if(typeof D=="bigint"&&ce(D))return D;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function N(D,z=a.P){const de=D%z;return de>=0?de:z+de}function K(D,z){const{P:de}=a;let be=D;for(;z-- >t;)be*=be,be%=de;return be}function U(D){const{P:z}=a,de=BigInt(6),be=BigInt(11),le=BigInt(22),ye=BigInt(23),J=BigInt(44),qe=BigInt(88),Ue=D*D*D%z,x=Ue*Ue*D%z,ke=K(x,u)*x%z,Ne=K(ke,u)*x%z,ae=K(Ne,s)*Ue%z,Se=K(ae,be)*ae%z,Oe=K(Se,le)*Se%z,He=K(Oe,J)*Oe%z,Ve=K(He,qe)*He%z,ze=K(Ve,J)*Oe%z,Xe=K(ze,u)*x%z,ct=K(Xe,ye)*Se%z,Ze=K(ct,de)*Ue%z;return K(Ze,s)}function L(D,z=a.P){if(D===t||z<=t)throw new Error(`invert: expected positive integers, got n=${D} mod=${z}`);let de=N(D,z),be=z,le=t,ye=n;for(;de!==t;){const qe=be/de,Ue=be%de,x=le-ye*qe;be=de,de=Ue,le=ye,ye=x}if(be!==n)throw new Error("invert: does not exist");return N(le,z)}function re(D,z=a.P){const de=D.length,be=new Array(de);let le=n;for(let ye=0;ye<de;ye++)D[ye]!==t&&(be[ye]=le,le=N(le*D[ye],z));le=L(le,z);for(let ye=de-1;ye>=0;ye--){if(D[ye]===t)continue;const J=N(le*D[ye],z);D[ye]=N(le*be[ye],z),le=J}return D}var Z=(D,z)=>(D+z/s)/z,V=s**BigInt(128);function ee(D){const{n:z}=a,de=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),be=-n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),le=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),ye=de,J=Z(ye*D,z),qe=Z(-be*D,z);let Ue=N(D-J*de-qe*le,z),x=N(-J*be-qe*ye,z);const ke=Ue>V,Ne=x>V;if(ke&&(Ue=z-Ue),Ne&&(x=z-x),Ue>V||x>V)throw new Error("splitScalarEndo: Endomorphism failed");return{k1neg:ke,k1:Ue,k2neg:Ne,k2:x}}function fe(D){const{n:z}=a,be=D.length*8-256;let le=P(D);return be>0&&(le=le>>BigInt(be)),le>=z&&(le-=z),le}var _e=class{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...D){return e.utils.hmacSha256(this.k,...D)}hmacSync(...D){if(typeof e.utils.hmacSha256Sync!="function")throw new Error("utils.hmacSha256Sync is undefined, you need to set it");const z=e.utils.hmacSha256Sync(this.k,...D);if(z instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return z}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(D=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),D),this.v=await this.hmac(this.v),D.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),D),this.v=await this.hmac(this.v))}reseedSync(D=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),D),this.v=this.hmacSync(this.v),D.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),D),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}};function ce(D){return t<D&&D<a.n}function Ee(D){return t<D&&D<a.P}function Ie(D,z,de){const be=P(D);if(!ce(be))return;const{n:le}=a,ye=p.BASE.multiply(be),J=N(ye.x,le);if(J===t)return;const qe=N(L(be,le)*N(z+de*J,le),le);if(qe===t)return;const Ue=new w(J,qe),x=(ye.x===Ue.r?0:2)|Number(ye.y&n);return{sig:Ue,recovery:x}}function ue(D){let z;if(typeof D=="bigint")z=D;else if(typeof D=="number"&&Number.isSafeInteger(D)&&D>0)z=BigInt(D);else if(typeof D=="string"){if(D.length!==64)throw new Error("Expected 32 bytes of private key");z=C(D)}else if(b(D)){if(D.length!==32)throw new Error("Expected 32 bytes of private key");z=P(D)}else throw new TypeError("Expected valid private key");if(!ce(z))throw new Error("Expected private key: 0 < key < n");return z}function pe(D){return D instanceof p?(D.assertValidity(),D):p.fromHex(D)}function Ae(D){if(D instanceof w)return D.assertValidity(),D;try{return w.fromDER(D)}catch{return w.fromCompact(D)}}function Y(D,z=!1){return p.fromPrivateKey(D).toRawBytes(z)}e.getPublicKey=Y;function se(D,z,de){return p.fromSignature(D,z,de).toRawBytes()}e.recoverPublicKey=se;function F(D){const z=b(D),de=typeof D=="string",be=(z||de)&&D.length;return z?be===33||be===65:de?be===66||be===130:D instanceof p}function j(D,z,de=!1){if(F(D))throw new TypeError("getSharedSecret: first arg must be private key");if(!F(z))throw new TypeError("getSharedSecret: second arg must be public key");const be=pe(z);return be.assertValidity(),be.multiply(ue(D)).toRawBytes(de)}e.getSharedSecret=j;function B(D){const z=D.length>32?D.slice(0,32):D;return P(z)}function $(D){const z=B(D),de=N(z,a.n);return G(de<t?z:de)}function G(D){if(typeof D!="bigint")throw new Error("Expected bigint");const z=S(D);return I(z)}function X(D,z,de){if(D==null)throw new Error(`sign: expected valid message hash, not "${D}"`);const be=O(D),le=ue(z),ye=[G(le),$(be)];if(de!=null){de===!0&&(de=e.utils.randomBytes(32));const Ue=O(de);if(Ue.length!==32)throw new Error("sign: Expected 32 bytes of extra data");ye.push(Ue)}const J=y(...ye),qe=B(be);return{seed:J,m:qe,d:le}}function H(D,z){let{sig:de,recovery:be}=D;const{canonical:le,der:ye,recovered:J}=Object.assign({canonical:!0,der:!0},z);le&&de.hasHighS()&&(de=de.normalizeS(),be^=1);const qe=ye?de.toDERRawBytes():de.toCompactRawBytes();return J?[qe,be]:qe}async function he(D,z,de={}){const{seed:be,m:le,d:ye}=X(D,z,de.extraEntropy);let J;const qe=new _e;for(await qe.reseed(be);!(J=Ie(await qe.generate(),le,ye));)await qe.reseed();return H(J,de)}e.sign=he;function we(D,z,de={}){const{seed:be,m:le,d:ye}=X(D,z,de.extraEntropy);let J;const qe=new _e;for(qe.reseedSync(be);!(J=Ie(qe.generateSync(),le,ye));)qe.reseedSync();return H(J,de)}e.signSync=we;var Te={strict:!0};function De(D,z,de,be=Te){let le;try{le=Ae(D),z=O(z)}catch{return!1}const{r:ye,s:J}=le;if(be.strict&&le.hasHighS())return!1;const qe=fe(z);if(qe===t)return!1;let Ue;try{Ue=h.fromAffine(pe(de))}catch{return!1}const{n:x}=a,ke=L(J,x),Ne=N(qe*ke,x),ae=N(ye*ke,x),Se=h.BASE.multiply(Ne),Oe=Ue.multiplyUnsafe(ae),He=Se.add(Oe).toAffine();return N(He.x,x)===ye}e.verify=De;async function Me(D,...z){const de=new Uint8Array(D.split("").map(ye=>ye.charCodeAt(0))),be=await e.utils.sha256(de),le=await e.utils.sha256(y(be,be,...z));return P(le)}async function Be(D,z,de){const be=E(D),le=await Me("BIP0340/challenge",be,z.toRawX(),de);return N(le,a.n)}function Le(D){return N(D.y,s)===t}var W=class{constructor(D,z){if(this.r=D,this.s=z,!Ee(D)||!ce(z))throw new Error("Invalid signature")}static fromHex(D){const z=O(D);if(z.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${z.length}`);const de=P(z.slice(0,32)),be=P(z.slice(32,64));return new W(de,be)}toHex(){return S(this.r)+S(this.s)}toRawBytes(){return I(this.toHex())}};function q(D){return p.fromPrivateKey(D).toRawX()}async function M(D,z,de=e.utils.randomBytes()){if(D==null)throw new TypeError(`sign: Expected valid message, not "${D}"`);const{n:be}=a,le=O(D),ye=ue(z),J=O(de);if(J.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");const qe=p.fromPrivateKey(ye),Ue=Le(qe)?ye:be-ye,x=await Me("BIP0340/aux",J),ke=Ue^x,Ne=await Me("BIP0340/nonce",E(ke),qe.toRawX(),le),ae=N(Ne,be);if(ae===t)throw new Error("sign: Creation of signature failed. k is zero");const Se=p.fromPrivateKey(ae),Oe=Le(Se)?ae:be-ae,He=await Be(Se.x,qe,le),Ve=new W(Se.x,N(Oe+He*Ue,be));if(!await ie(Ve.toRawBytes(),le,qe.toRawX()))throw new Error("sign: Invalid signature produced");return Ve.toRawBytes()}async function ie(D,z,de){const be=D instanceof W?D:W.fromHex(D),le=O(z),ye=pe(de),J=await Be(be.r,ye,le),qe=p.fromPrivateKey(be.s),Ue=ye.multiply(J),x=qe.subtract(Ue);return!(x.equals(p.BASE)||!Le(x)||x.x!==be.r)}e.schnorr={Signature:W,getPublicKey:q,sign:M,verify:ie},p.BASE._setWindowSize(8);var ve={node:r.default,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};e.utils={isValidPrivateKey(D){try{return ue(D),!0}catch{return!1}},randomBytes:(D=32)=>{if(ve.web)return ve.web.getRandomValues(new Uint8Array(D));if(ve.node){const{randomBytes:z}=ve.node;return Uint8Array.from(z(D))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let D=8;for(;D--;){const z=e.utils.randomBytes(32),de=P(z);if(ce(de)&&de!==n)return z}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},bytesToHex:R,mod:N,sha256:async D=>{if(ve.web){const z=await ve.web.subtle.digest("SHA-256",D.buffer);return new Uint8Array(z)}else if(ve.node){const{createHash:z}=ve.node;return Uint8Array.from(z("sha256").update(D).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(D,...z)=>{if(ve.web){const de=await ve.web.subtle.importKey("raw",D,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),be=y(...z),le=await ve.web.subtle.sign("HMAC",de,be);return new Uint8Array(le)}else if(ve.node){const{createHmac:de}=ve.node,be=de("sha256",D);return z.forEach(le=>be.update(le)),Uint8Array.from(be.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(D=8,z=p.BASE){const de=z===p.BASE?z:new p(z.x,z.y);return de._setWindowSize(D),de.multiply(u),de}}}}),require_secp256k1=__commonJS({"node_modules/libp2p-crypto/src/keys/secp256k1.js"(e,o){init_node_globals();var r=require_err_code(),t=require_lib3(),{sha256:n}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports));o.exports=()=>{const s=32;function u(){return t.utils.randomPrivateKey()}async function l(p,_){const{digest:m}=await n.digest(_);try{return await t.sign(m,p)}catch(v){throw r(v,"ERR_INVALID_INPUT")}}async function f(p,_,m){try{const{digest:v}=await n.digest(m);return t.verify(_,v,p)}catch(v){throw r(v,"ERR_INVALID_INPUT")}}function a(p){return t.Point.fromHex(p).toRawBytes(!0)}function c(p){return t.Point.fromHex(p).toRawBytes(!1)}function d(p){try{t.getPublicKey(p,!0)}catch(_){throw r(_,"ERR_INVALID_PRIVATE_KEY")}}function h(p){try{t.Point.fromHex(p)}catch(_){throw r(_,"ERR_INVALID_PUBLIC_KEY")}}function g(p){try{return t.getPublicKey(p,!0)}catch(_){throw r(_,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:u,privateKeyLength:s,hashAndSign:l,hashAndVerify:f,compressPublicKey:a,decompressPublicKey:c,validatePrivateKey:d,validatePublicKey:h,computePublicKey:g}}}}),require_secp256k1_class=__commonJS({"node_modules/libp2p-crypto/src/keys/secp256k1-class.js"(e,o){init_node_globals();var{sha256:r}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),t=require_err_code(),{equals:n}=(init_equals(),__toCommonJS(equals_exports)),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports)),u=require_exporter();o.exports=(l,f,a)=>{a=a||require_secp256k1()();class c{constructor(m){a.validatePublicKey(m),this._key=m}verify(m,v){return a.hashAndVerify(this._key,v,m)}marshal(){return a.compressPublicKey(this._key)}get bytes(){return l.PublicKey.encode({Type:l.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(m){return n(this.bytes,m.bytes)}async hash(){const{bytes:m}=await r.digest(this.bytes);return m}}class d{constructor(m,v){this._key=m,this._publicKey=v||a.computePublicKey(m),a.validatePrivateKey(this._key),a.validatePublicKey(this._publicKey)}sign(m){return a.hashAndSign(this._key,m)}get public(){return new c(this._publicKey)}marshal(){return this._key}get bytes(){return l.PrivateKey.encode({Type:l.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(m){return n(this.bytes,m.bytes)}async hash(){const{bytes:m}=await r.digest(this.bytes);return m}async id(){const m=await this.public.hash();return s(m,"base58btc")}async export(m,v="libp2p-key"){if(v==="libp2p-key")return u.export(this.bytes,m);throw t(new Error(`export format '${v}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function h(_){return new d(_)}function g(_){return new c(_)}async function p(){const _=await a.generateKey();return new d(_)}return{Secp256k1PublicKey:c,Secp256k1PrivateKey:d,unmarshalSecp256k1PrivateKey:h,unmarshalSecp256k1PublicKey:g,generateKeyPair:p}}}}),require_lengths=__commonJS({"node_modules/libp2p-crypto/src/hmac/lengths.js"(e,o){init_node_globals(),o.exports={SHA1:20,SHA256:32,SHA512:64}}}),require_index_browser=__commonJS({"node_modules/libp2p-crypto/src/hmac/index-browser.js"(e){init_node_globals();var o=require_webcrypto(),r=require_lengths(),t={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},n=async(s,u)=>{const l=await o.get().subtle.sign({name:"HMAC"},s,u);return new Uint8Array(l,l.byteOffset,l.byteLength)};e.create=async function(s,u){const l=t[s],f=await o.get().subtle.importKey("raw",u,{name:"HMAC",hash:{name:l}},!1,["sign"]);return{async digest(a){return n(f,a)},length:r[s]}}}}),require_key_stretcher=__commonJS({"node_modules/libp2p-crypto/src/keys/key-stretcher.js"(e,o){init_node_globals();var r=require_err_code(),{concat:t}=(init_concat(),__toCommonJS(concat_exports)),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports)),s=require_index_browser(),u={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};o.exports=async(l,f,a)=>{const c=u[l];if(!c){const A=Object.keys(u).join(" / ");throw r(new Error(`unknown cipher type '${l}'. Must be ${A}`),"ERR_INVALID_CIPHER_TYPE")}if(!f)throw r(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");const d=c.keySize,h=c.ivSize,g=20,p=n("key expansion"),_=2*(h+d+g),m=await s.create(f,a);let v=await m.digest(p);const w=[];let y=0;for(;y<_;){const A=await m.digest(t([v,p]));let C=A.length;y+C>_&&(C=_-y),w.push(A),y+=C,v=await m.digest(v)}const b=_/2,T=t(w),R=T.slice(0,b),S=T.slice(b,_),E=A=>({iv:A.slice(0,h),cipherKey:A.slice(h,h+d),macKey:A.slice(h+d)});return{k1:E(R),k2:E(S)}}}}),require_validate_curve_type=__commonJS({"node_modules/libp2p-crypto/src/keys/validate-curve-type.js"(e,o){init_node_globals();var r=require_err_code();o.exports=function(t,n){if(!t.includes(n)){const s=t.join(" / ");throw r(new Error(`Unknown curve: ${n}. Must be ${s}`),"ERR_INVALID_CURVE")}}}}),require_ecdh_browser=__commonJS({"node_modules/libp2p-crypto/src/keys/ecdh-browser.js"(e){init_node_globals();var o=require_err_code(),r=require_webcrypto(),{base64urlToBuffer:t}=require_util2(),n=require_validate_curve_type(),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports)),{concat:u}=(init_concat(),__toCommonJS(concat_exports)),{equals:l}=(init_equals(),__toCommonJS(equals_exports)),f={"P-256":256,"P-384":384,"P-521":521};e.generateEphmeralKeyPair=async function(g){n(Object.keys(f),g);const p=await r.get().subtle.generateKey({name:"ECDH",namedCurve:g},!0,["deriveBits"]),_=async(v,w)=>{let y;w?y=await r.get().subtle.importKey("jwk",h(g,w),{name:"ECDH",namedCurve:g},!1,["deriveBits"]):y=p.privateKey;const b=[await r.get().subtle.importKey("jwk",d(g,v),{name:"ECDH",namedCurve:g},!1,[]),y],T=await r.get().subtle.deriveBits({name:"ECDH",namedCurve:g,public:b[0]},b[1],f[g]);return new Uint8Array(T,T.byteOffset,T.byteLength)},m=await r.get().subtle.exportKey("jwk",p.publicKey);return{key:c(m),genSharedKey:_}};var a={"P-256":32,"P-384":48,"P-521":66};function c(g){const p=a[g.crv];return u([Uint8Array.from([4]),t(g.x,p),t(g.y,p)],1+p*2)}function d(g,p){const _=a[g];if(l(!p.slice(0,1),Uint8Array.from([4])))throw o(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:g,x:s(p.slice(1,_+1),"base64url"),y:s(p.slice(1+_),"base64url"),ext:!0}}var h=(g,p)=>$e(Re({},d(g,p.public)),{d:s(p.private,"base64url")})}}),require_ephemeral_keys=__commonJS({"node_modules/libp2p-crypto/src/keys/ephemeral-keys.js"(e,o){init_node_globals();var r=require_ecdh_browser();o.exports=async t=>r.generateEphmeralKeyPair(t)}}),require_keys2=__commonJS({"node_modules/libp2p-crypto/src/keys/index.js"(e,o){init_node_globals();var r=require_keys();require_asn1(),require_pbe();var t=require_forge(),n=require_err_code(),{fromString:s}=(init_from_string(),__toCommonJS(from_string_exports)),u=require_importer(),l={rsa:require_rsa_class(),ed25519:require_ed25519_class(),secp256k1:require_secp256k1_class()(r,require_random_bytes())},f={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function a(v){const w=l[v.toLowerCase()];if(!w){const y=Object.keys(l).join(" / ");throw n(new Error(`invalid or unsupported key type ${v}. Must be ${y}`),"ERR_UNSUPPORTED_KEY_TYPE")}return w}var c=async(v,w)=>a(v).generateKeyPair(w),d=async(v,w,y)=>{const b=a(v);if(v.toLowerCase()!=="ed25519")throw n(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return b.generateKeyPairFromSeed(w,y)},h=v=>{const w=r.PublicKey.decode(v),y=w.Data;switch(w.Type){case r.KeyType.RSA:return l.rsa.unmarshalRsaPublicKey(y);case r.KeyType.Ed25519:return l.ed25519.unmarshalEd25519PublicKey(y);case r.KeyType.Secp256k1:if(l.secp256k1)return l.secp256k1.unmarshalSecp256k1PublicKey(y);throw n(new Error(f.message),f.code);default:a(w.Type)}},g=(v,w)=>(w=(w||"rsa").toLowerCase(),a(w),v.bytes),p=async v=>{const w=r.PrivateKey.decode(v),y=w.Data;switch(w.Type){case r.KeyType.RSA:return l.rsa.unmarshalRsaPrivateKey(y);case r.KeyType.Ed25519:return l.ed25519.unmarshalEd25519PrivateKey(y);case r.KeyType.Secp256k1:if(l.secp256k1)return l.secp256k1.unmarshalSecp256k1PrivateKey(y);throw n(new Error(f.message),f.code);default:a(w.Type)}},_=(v,w)=>(w=(w||"rsa").toLowerCase(),a(w),v.bytes),m=async(v,w)=>{try{const T=await u.import(v,w);return p(T)}catch{}const y=t.pki.decryptRsaPrivateKey(v,w);if(y===null)throw n(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let b=t.asn1.toDer(t.pki.privateKeyToAsn1(y));return b=s(b.getBytes(),"ascii"),l.rsa.unmarshalRsaPrivateKey(b)};o.exports={supportedKeys:l,keysPBM:r,keyStretcher:require_key_stretcher(),generateEphemeralKeyPair:require_ephemeral_keys(),generateKeyPair:c,generateKeyPairFromSeed:d,unmarshalPublicKey:h,marshalPublicKey:g,unmarshalPrivateKey:p,marshalPrivateKey:_,import:m}}}),require_class_is=__commonJS({"node_modules/class-is/index.js"(e,o){init_node_globals();function r(n,{className:s,symbolName:u}){const l=Symbol.for(u),f={[s]:class extends n{constructor(...a){super(...a);Object.defineProperty(this,l,{value:!0})}get[Symbol.toStringTag](){return s}}}[s];return f[`is${s}`]=a=>!!(a&&a[l]),f}function t(n,{className:s,symbolName:u,withoutNew:l}){const f=Symbol.for(u),a={[s]:function(...c){if(l&&!(this instanceof a))return new a(...c);const d=n.call(this,...c)||this;return d&&!d[f]&&Object.defineProperty(d,f,{value:!0}),d}}[s];return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return s}}),a[`is${s}`]=c=>!!(c&&c[f]),a}o.exports=r,o.exports.proto=t}}),require_proto=__commonJS({"node_modules/peer-id/src/proto.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-peer-id"]||(r.roots["libp2p-peer-id"]={});u.PeerIdProto=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.id=s.newBuffer([]),l.prototype.pubKey=s.newBuffer([]),l.prototype.privKey=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),c.uint32(10).bytes(a.id),a.pubKey!=null&&Object.hasOwnProperty.call(a,"pubKey")&&c.uint32(18).bytes(a.pubKey),a.privKey!=null&&Object.hasOwnProperty.call(a,"privKey")&&c.uint32(26).bytes(a.privKey),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.PeerIdProto;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.id=a.bytes();break;case 2:h.pubKey=a.bytes();break;case 3:h.privKey=a.bytes();break;default:a.skipType(g&7);break}}if(!h.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:h});return h},l.fromObject=function(a){if(a instanceof u.PeerIdProto)return a;var c=new u.PeerIdProto;return a.id!=null&&(typeof a.id=="string"?s.base64.decode(a.id,c.id=s.newBuffer(s.base64.length(a.id)),0):a.id.length&&(c.id=a.id)),a.pubKey!=null&&(typeof a.pubKey=="string"?s.base64.decode(a.pubKey,c.pubKey=s.newBuffer(s.base64.length(a.pubKey)),0):a.pubKey.length&&(c.pubKey=a.pubKey)),a.privKey!=null&&(typeof a.privKey=="string"?s.base64.decode(a.privKey,c.privKey=s.newBuffer(s.base64.length(a.privKey)),0):a.privKey.length&&(c.privKey=a.privKey)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(c.bytes===String?d.id="":(d.id=[],c.bytes!==Array&&(d.id=s.newBuffer(d.id))),c.bytes===String?d.pubKey="":(d.pubKey=[],c.bytes!==Array&&(d.pubKey=s.newBuffer(d.pubKey))),c.bytes===String?d.privKey="":(d.privKey=[],c.bytes!==Array&&(d.privKey=s.newBuffer(d.privKey)))),a.id!=null&&a.hasOwnProperty("id")&&(d.id=c.bytes===String?s.base64.encode(a.id,0,a.id.length):c.bytes===Array?Array.prototype.slice.call(a.id):a.id),a.pubKey!=null&&a.hasOwnProperty("pubKey")&&(d.pubKey=c.bytes===String?s.base64.encode(a.pubKey,0,a.pubKey.length):c.bytes===Array?Array.prototype.slice.call(a.pubKey):a.pubKey),a.privKey!=null&&a.hasOwnProperty("privKey")&&(d.privKey=c.bytes===String?s.base64.encode(a.privKey,0,a.privKey.length):c.bytes===Array?Array.prototype.slice.call(a.privKey):a.privKey),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_src5=__commonJS({"node_modules/peer-id/src/index.js"(e,o){init_node_globals();var{CID:r}=(init_cid(),__toCommonJS(cid_exports)),t=(init_base32(),__toCommonJS(base32_exports)),n=(init_base36(),__toCommonJS(base36_exports)),s=(init_base58(),__toCommonJS(base58_exports)),u=(init_base64(),__toCommonJS(base64_exports)),{base58btc:l}=(init_base58(),__toCommonJS(base58_exports)),{base32:f}=(init_base32(),__toCommonJS(base32_exports)),{base16:a}=(init_base16(),__toCommonJS(base16_exports)),c=(init_digest(),__toCommonJS(digest_exports)),d=require_keys2(),h=require_class_is(),{PeerIdProto:g}=require_proto(),{equals:p}=(init_equals(),__toCommonJS(equals_exports)),{fromString:_}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:m}=(init_to_string(),__toCommonJS(to_string_exports)),{identity:v}=(init_identity(),__toCommonJS(identity_exports)),w=Re(Re(Re(Re({},t),n),s),u),y=Object.keys(w).reduce((P,O)=>P.or(w[O]),f.decoder),b=112,T=114,R=class{constructor(P,O,k){if(!(P instanceof Uint8Array))throw new Error("invalid id provided");if(O&&k&&!p(O.public.bytes,k.bytes))throw new Error("inconsistent arguments");this._id=P,this._idB58String=l.encode(this.id).substring(1),this._privKey=O,this._pubKey=k}get id(){return this._id}set id(P){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(P){this._privKey=P}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{const P=c.decode(this.id);P.code===v.code&&(this._pubKey=d.unmarshalPublicKey(P.digest))}catch{}return this._pubKey}set pubKey(P){this._pubKey=P}marshalPubKey(){if(this.pubKey)return d.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return d.marshalPrivateKey(this.privKey)}marshal(P){return g.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:P?null:this.marshalPrivKey()}).finish()}toPrint(){let P=this.toB58String();P.startsWith("Qm")&&(P=P.slice(2));let O=6;return P.length<O&&(O=P.length),"<peer.ID "+P.substr(0,O)+">"}toJSON(){return{id:this.toB58String(),privKey:I(this.marshalPrivKey()),pubKey:I(this.marshalPubKey())}}toHexString(){return a.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){const P=r.createV1(T,c.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:P.toString(),enumerable:!1})}return this._idCIDString}equals(P){if(P instanceof Uint8Array)return p(this.id,P);if(P.id)return p(this.id,P.id);throw new Error("not valid Id")}isEqual(P){return this.equals(P)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&p(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(c.decode(this.id).code===v.code)return!0}catch{}return!1}},S=h(R,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});e=o.exports=S;var E=P=>P.bytes.length<=42?c.create(v.code,P.bytes).bytes:P.hash(),A=async(P,O)=>{const k=await E(O);return new S(k,P,O)};e.create=async P=>{P=P||{},P.bits=P.bits||2048,P.keyType=P.keyType||"RSA";const O=await d.generateKeyPair(P.keyType,P.bits);return A(O,O.public)},e.createFromHexString=P=>new S(a.decode("f"+P)),e.createFromBytes=P=>{try{const O=r.decode(P);if(!C(O))throw new Error("Supplied PeerID CID is invalid");return e.createFromCID(O)}catch{if(c.decode(P).code!==v.code)throw new Error("Supplied PeerID CID is invalid");return new S(P)}},e.createFromB58String=P=>e.createFromBytes(l.decode("z"+P));var C=P=>P.code===T||P.code===b;e.createFromCID=P=>{if(P=r.asCID(P),!P||!C(P))throw new Error("Supplied PeerID CID is invalid");return new S(P.multihash.bytes)},e.createFromPubKey=async P=>{let O=P;if(typeof O=="string"&&(O=_(P,"base64pad")),!(O instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const k=await d.unmarshalPublicKey(O);return A(void 0,k)},e.createFromPrivKey=async P=>{if(typeof P=="string"&&(P=_(P,"base64pad")),!(P instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");const O=await d.unmarshalPrivateKey(P);return A(O,O.public)},e.createFromJSON=async P=>{const O=l.decode("z"+P.id),k=P.privKey&&_(P.privKey,"base64pad"),N=P.pubKey&&_(P.pubKey,"base64pad"),K=N&&await d.unmarshalPublicKey(N);if(!k)return new S(O,void 0,K);const U=await d.unmarshalPrivateKey(k),L=await E(U.public);let re;if(K&&(re=await E(K)),K&&!p(L,re))throw new Error("Public and private key do not match");if(O&&!p(L,O))throw new Error("Id and private key do not match");return new S(O,U,K)},e.createFromProtobuf=async P=>{typeof P=="string"&&(P=_(P,"base16"));let{id:O,privKey:k,pubKey:N}=g.decode(P);k=k?await d.unmarshalPrivateKey(k):!1,N=N?await d.unmarshalPublicKey(N):!1;let K,U;if(k&&(U=await E(k.public)),N&&(K=await E(N)),k){if(N&&!p(U,K))throw new Error("Public and private key do not match");return new S(U,k,k.public)}if(N)return new S(K,void 0,N);if(O)return new S(O);throw new Error("Protobuf did not contain any usable key material")},e.parse=P=>((P.charAt(0)==="1"||P.charAt(0)==="Q")&&(P=`z${P}`),e.createFromBytes(y.decode(P))),e.isPeerId=P=>Boolean(typeof P=="object"&&P._id&&P._idB58String);function I(P){if(P)return m(P,"base64pad")}}}),require_resolve=__commonJS({"node_modules/ipfs-core/cjs/src/components/resolve.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src3(),r=(init_cid(),__toCommonJS(cid_exports)),t=require_src5(),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),s=require_utils2();function u(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var l=u(o),f=u(t);function a({repo:d,codecs:h,bases:g,name:p}){async function _(m,v={}){if(!l.default.path(m))throw new Error("invalid argument "+m);if(l.default.ipnsPath(m))for await(const I of p.resolve(m,v))m=I;const[,w,y,...b]=m.split("/"),T=v.cidBase?await g.getBase(v.cidBase):void 0,R=c(y);if(b.length===0){const I=T?T.encoder.encode(R):y;return`/${w}/${I}`}const S=r.CID.decode(R);m=b.join("/");const E=s.resolve(S,m,h,d,v);let A=S,C=m;for await(const I of E)r.CID.asCID(I.value)&&(A=I.value,C=I.remainderPath);return`/ipfs/${A.toString(T&&T.encoder)}${C?"/"+C:""}`}return n.withTimeoutOption(_)}function c(d){try{return f.default.parse(d).toBytes()}catch{return r.CID.parse(d).bytes}}e.createResolve=a}}),require_it_last=__commonJS({"node_modules/it-last/index.js"(e,o){init_node_globals();var r=async t=>{let n;for await(const s of t)n=s;return n};o.exports=r}}),require_add=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/add.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_it_last(),r=(init_cid(),__toCommonJS(cid_exports));function t(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var n=t(o);function s({addAll:u}){return(l,f={})=>{let a;const c=r.CID.asCID(l);return c?a=u([Re({cid:c},f)],f):a=u([Re({path:l.toString()},f)],f),n.default(a)}}e.createAdd=s}}),normalise_input_exports={};__export(normalise_input_exports,{normaliseInput:()=>normaliseInput});async function*normaliseInput(e){if(e==null)throw(0,import_err_code3.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const o=CID.asCID(e);if(o){yield toPin({cid:o});return}if(e instanceof String||typeof e=="string"){yield toPin({path:e});return}if(e.cid!=null||e.path!=null)return yield toPin(e);if(Symbol.iterator in e){const r=e[Symbol.iterator](),t=r.next();if(t.done)return r;if(CID.asCID(t.value)||t.value instanceof String||typeof t.value=="string"){yield toPin({cid:t.value});for(const n of r)yield toPin({cid:n});return}if(t.value.cid!=null||t.value.path!=null){yield toPin(t.value);for(const n of r)yield toPin(n);return}throw(0,import_err_code3.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){const r=e[Symbol.asyncIterator](),t=await r.next();if(t.done)return r;if(CID.asCID(t.value)||t.value instanceof String||typeof t.value=="string"){yield toPin({cid:t.value});for await(const n of r)yield toPin({cid:n});return}if(t.value.cid!=null||t.value.path!=null){yield toPin(t.value);for await(const n of r)yield toPin(n);return}throw(0,import_err_code3.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw(0,import_err_code3.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function toPin(e){const o=e.cid||`${e.path}`;if(!o)throw(0,import_err_code3.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const r={path:o,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),r}var import_err_code3,init_normalise_input=__esm({"node_modules/ipfs-core-utils/esm/src/pins/normalise-input.js"(){init_node_globals(),import_err_code3=__toESM(require_err_code(),1),init_cid()}}),pin_types_exports={};__export(pin_types_exports,{PinTypes:()=>PinTypes});var PinTypes,init_pin_types=__esm({"node_modules/ipfs-repo/esm/src/pin-types.js"(){init_node_globals(),PinTypes={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"}}}),require_add_all=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/add-all.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils2(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=(init_normalise_input(),__toCommonJS(normalise_input_exports)),n=(init_pin_types(),__toCommonJS(pin_types_exports));function s({repo:u,codecs:l}){async function*f(a,c={}){const d=async function*(){for await(const{path:p,recursive:_,metadata:m}of t.normaliseInput(a)){const{cid:v}=await o.resolvePath(u,l,p),{reason:w}=await u.pins.isPinnedWithType(v,[n.PinTypes.recursive,n.PinTypes.direct]);if(w==="recursive"&&!_)throw new Error(`${v} already pinned recursively`);_?await u.pins.pinRecursively(v,{metadata:m}):await u.pins.pinDirectly(v,{metadata:m}),yield v}};if(!Boolean(c.lock)){yield*d();return}const g=await u.gcLock.readLock();try{yield*d()}finally{g()}}return r.withTimeoutOption(f)}e.createAddAll=s}}),require_ls=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/ls.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_normalise_input(),__toCommonJS(normalise_input_exports)),r=require_utils2(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=require_err_code(),s=(init_pin_types(),__toCommonJS(pin_types_exports));function u(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var l=u(n);function f(c,d,h){const g={type:c,cid:d};return h&&(g.metadata=h),g}function a({repo:c,codecs:d}){async function*h(g={}){let p=s.PinTypes.all;if(g.type&&(p=g.type,!Object.keys(s.PinTypes).includes(p)))throw l.default(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(g.paths){let _=!1;for await(const{path:m}of o.normaliseInput(g.paths)){const{cid:v}=await r.resolvePath(c,d,m),{reason:w,pinned:y,parent:b,metadata:T}=await c.pins.isPinnedWithType(v,p);if(!y)throw l.default(new Error(`path '${m}' is not pinned`),"ERR_NOT_PINNED");switch(w){case s.PinTypes.direct:case s.PinTypes.recursive:_=!0,yield f(w,v,T);break;default:_=!0,yield f(`${s.PinTypes.indirect} through ${b}`,v,T)}}if(!_)throw new Error("No match found");return}if(p===s.PinTypes.recursive||p===s.PinTypes.all)for await(const{cid:_,metadata:m}of c.pins.recursiveKeys())yield f(s.PinTypes.recursive,_,m);if(p===s.PinTypes.indirect||p===s.PinTypes.all)for await(const _ of c.pins.indirectKeys(g))yield f(s.PinTypes.indirect,_);if(p===s.PinTypes.direct||p===s.PinTypes.all)for await(const{cid:_,metadata:m}of c.pins.directKeys())yield f(s.PinTypes.direct,_,m)}return t.withTimeoutOption(h)}e.createLs=a}}),require_rm=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/rm.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_it_last();function r(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var t=r(o);function n({rmAll:s}){async function u(l,f={}){const a=await t.default(s([Re({path:l},f)],f));if(!a)throw new Error("CID expected");return a}return u}e.createRm=n}}),require_rm_all=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/rm-all.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_normalise_input(),__toCommonJS(normalise_input_exports)),r=require_utils2(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=(init_pin_types(),__toCommonJS(pin_types_exports));function s({repo:u,codecs:l}){async function*f(a,c={}){const d=await u.gcLock.readLock();try{for await(const{path:h,recursive:g}of o.normaliseInput(a)){const{cid:p}=await r.resolvePath(u,l,h),{pinned:_,reason:m}=await u.pins.isPinnedWithType(p,n.PinTypes.all);if(!_)throw new Error(`${p} is not pinned`);switch(m){case n.PinTypes.recursive:if(!g)throw new Error(`${p} is pinned recursively`);await u.pins.unpin(p),yield p;break;case n.PinTypes.direct:await u.pins.unpin(p),yield p;break;default:throw new Error(`${p} is pinned indirectly under ${m}`)}}}finally{d()}}return t.withTimeoutOption(f)}e.createRmAll=s}}),require_pin=__commonJS({"node_modules/ipfs-core/cjs/src/components/pin/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_add(),r=require_add_all(),t=require_ls(),n=require_rm(),s=require_rm_all(),u=class{constructor({codecs:l,repo:f}){const a=r.createAddAll({codecs:l,repo:f});this.addAll=a,this.add=o.createAdd({addAll:a});const c=s.createRmAll({codecs:l,repo:f});this.rmAll=c,this.rm=n.createRm({rmAll:c}),this.ls=t.createLs({codecs:l,repo:f}),this.remote={add:(d,h={})=>Promise.reject(new Error("Not implemented")),ls:async function*(d,h={}){return Promise.reject(new Error("Not implemented"))},rm:(d,h={})=>Promise.reject(new Error("Not implemented")),rmAll:(d,h={})=>Promise.reject(new Error("Not implemented")),service:{add:(d,h)=>Promise.reject(new Error("Not implemented")),rm:(d,h={})=>Promise.reject(new Error("Not implemented")),ls:(d={})=>Promise.reject(new Error("Not implemented"))}}}};e.PinAPI=u}}),errors_exports={};__export(errors_exports,{abortedError:()=>abortedError,dbDeleteFailedError:()=>dbDeleteFailedError,dbOpenFailedError:()=>dbOpenFailedError,dbWriteFailedError:()=>dbWriteFailedError,notFoundError:()=>notFoundError});function dbOpenFailedError(e){return e=e||new Error("Cannot open database"),(0,import_err_code4.default)(e,"ERR_DB_OPEN_FAILED")}function dbDeleteFailedError(e){return e=e||new Error("Delete failed"),(0,import_err_code4.default)(e,"ERR_DB_DELETE_FAILED")}function dbWriteFailedError(e){return e=e||new Error("Write failed"),(0,import_err_code4.default)(e,"ERR_DB_WRITE_FAILED")}function notFoundError(e){return e=e||new Error("Not Found"),(0,import_err_code4.default)(e,"ERR_NOT_FOUND")}function abortedError(e){return e=e||new Error("Aborted"),(0,import_err_code4.default)(e,"ERR_ABORTED")}var import_err_code4,init_errors2=__esm({"node_modules/datastore-core/esm/src/errors.js"(){init_node_globals(),import_err_code4=__toESM(require_err_code(),1)}}),require_timestamp=__commonJS({"node_modules/timestamp-nano/timestamp.js"(e,o){init_node_globals(),function(){typeof o!="undefined"&&(o.exports=y);var r=24*3600,t=3200,n=(365*400+97)*t/400,s=r*n,u=s*1e3,l=1e3*1e4*1e4*r,f=16777216,a=65536*65536,c=1e3*1e3,d=1e3*1e3*1e3,h="000000000",g=Math.trunc||Z,p=y.prototype;y.fromDate=I,y.fromInt64BE=L(0,1,2,3,0,4),y.fromInt64LE=L(3,2,1,0,4,0),y.fromString=C,y.fromTimeT=P,p.year=0,p.time=0,p.nano=0,p.addNano=E,p.getNano=A,p.getTimeT=k,p.getYear=b,p.toDate=R,p.toJSON=N,p.toString=K,p.writeInt64BE=U(0,1,2,3,0,4),p.writeInt64LE=U(3,2,1,0,4,0);var _="%Y-%m-%dT%H:%M:%S.%NZ",m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return y;function y(_e,ce,Ee){var Ie=this;if(!(Ie instanceof y))return new y(_e,ce,Ee);Ie.time=+_e||0,Ie.nano=+ce||0,Ie.year=+Ee||0,T(Ie)}function b(){var _e=this.toDate().getUTCFullYear();return _e+this.year}function T(_e){var ce=_e.year,Ee=_e.time,Ie=_e.nano,ue,pe;if(Ie<0||c<=Ie){var Ae=Math.floor(Ie/c);Ie-=Ae*c,Ee+=Ae,ue=1}var Y=ce%t;if(Ee<-l||l<Ee||Y){pe=g(Ee/u),pe&&(ce+=pe*t,Ee-=pe*u);var se=S(Ee);se.setUTCFullYear(Y+se.getUTCFullYear()),ce-=Y,Ee=+se,pe=g(ce/t);var F=Ee+pe*u;pe&&-l<=F&&F<=l&&(ce-=pe*t,Ee=F),ue=1}return ue&&(_e.year=ce,_e.time=Ee,_e.nano=Ie),_e}function R(){var _e=T(this);return S(_e.time)}function S(_e){var ce=new Date(0);return ce.setTime(_e),ce}function E(_e){return this.nano+=+_e||0,this}function A(){var _e=T(this);return(_e.time%1e3*c+ +_e.nano+d)%d}function C(_e){var ce,Ee=new y;_e+="";var Ie=_e.replace(/^\s*[+\-]?\d+/,function(ue){var pe=+ue,Ae=1970+(pe-1970)%400;return Ee.year=pe-Ae,Ae}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(ue,pe,Ae){return pe<0&&(Ae*=-1),ce=(+pe*60+ +Ae)*6e4,""}).replace(/\.\d+$/,function(ue){return Ee.nano=+(ue+h).substr(1,9),""}).split(/\D+/);if(Ie.length>1?Ie[1]--:Ie[1]=0,Ee.time=ce=Date.UTC.apply(Date,Ie)-(ce||0),isNaN(ce))throw new TypeError("Invalid Date");return T(Ee)}function I(_e){return new y(+_e)}function P(_e){return O(_e,0)}function O(_e,ce){ce|=0,ce*=a,_e=+_e||0;var Ee=g(ce/s)+g(_e/s),Ie=ce%s+_e%s,ue=g(Ie/s);return ue&&(Ee+=ue,Ie-=ue*s),new y(Ie*1e3,0,Ee*t)}function k(){var _e=T(this),ce=Math.floor(_e.time/1e3),Ee=_e.year;return Ee&&(ce+=Ee*n*r/t),ce}function N(){return this.toString().replace(/0{1,6}Z$/,"Z")}function K(_e){var ce=this,Ee=ce.toDate(),Ie={H:F,L:$,M:j,N:G,S:B,Y:pe,a:X,b:H,d:Y,e:se,m:Ae};return ue(_e||_);function ue(he){return he.replace(/%./g,function(we){var Te=we[1],De=w[Te],Me=Ie[Te];return De?ue(De):Me?Me():we})}function pe(){var he=ce.getYear();return he>999999?"+"+he:he>9999?"+"+fe(he,6):he>=0?fe(he,4):he>=-999999?"-"+fe(-he,6):he}function Ae(){return ee(Ee.getUTCMonth()+1)}function Y(){return ee(Ee.getUTCDate())}function se(){return V(Ee.getUTCDate())}function F(){return ee(Ee.getUTCHours())}function j(){return ee(Ee.getUTCMinutes())}function B(){return ee(Ee.getUTCSeconds())}function $(){return fe(Ee.getUTCMilliseconds(),3)}function G(){return fe(ce.getNano(),9)}function X(){return v[Ee.getUTCDay()]}function H(){return m[Ee.getUTCMonth()]}}function U(_e,ce,Ee,Ie,ue,pe){return Ae;function Ae(se,F){var j=T(this);se||(se=new Array(8)),re(se,F|=0);var B=Math.floor(j.time/1e3),$=j.year*(n*r/t),G=g($/a)+g(B/a),X=$%a+B%a,H=Math.floor(X/a);return H&&(G+=H,X-=H*a),Y(se,F+ue,G),Y(se,F+pe,X),se}function Y(se,F,j){se[F+_e]=j>>24&255,se[F+ce]=j>>16&255,se[F+Ee]=j>>8&255,se[F+Ie]=j&255}}function L(_e,ce,Ee,Ie,ue,pe){return Ae;function Ae(se,F){re(se,F|=0);var j=Y(se,F+ue),B=Y(se,F+pe);return O(B,j)}function Y(se,F){return se[F+_e]*f+(se[F+ce]<<16|se[F+Ee]<<8|se[F+Ie])}}function re(_e,ce){var Ee=_e&&_e.length;if(Ee==null)throw new TypeError("Invalid Buffer");if(Ee<ce+8)throw new RangeError("Out of range")}function Z(_e){var ce=_e-_e%1;return ce===0&&(_e<0||_e===0&&1/_e!=1/0)?-0:ce}function V(_e){return(_e>9?"":" ")+(_e|0)}function ee(_e){return(_e>9?"":"0")+(_e|0)}function fe(_e,ce){return(h+(_e|0)).substr(-ce)}}()}}),require_ciphers_browser=__commonJS({"node_modules/libp2p-crypto/src/aes/ciphers-browser.js"(e,o){init_node_globals(),require_aes();var r=require_forge(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports));o.exports={createCipheriv:(s,u,l)=>{const f=r.cipher.createCipher("AES-CTR",t(u,"ascii"));return f.start({iv:t(l,"ascii")}),{update:a=>(f.update(r.util.createBuffer(t(a,"ascii"))),n(f.output.getBytes(),"ascii"))}},createDecipheriv:(s,u,l)=>{const f=r.cipher.createDecipher("AES-CTR",t(u,"ascii"));return f.start({iv:t(l,"ascii")}),{update:a=>(f.update(r.util.createBuffer(t(a,"ascii"))),n(f.output.getBytes(),"ascii"))}}}}}),require_cipher_mode=__commonJS({"node_modules/libp2p-crypto/src/aes/cipher-mode.js"(e,o){init_node_globals();var r=require_err_code(),t={16:"aes-128-ctr",32:"aes-256-ctr"};o.exports=function(n){const s=t[n.length];if(!s){const u=Object.entries(t).map(([l,f])=>`${l} (${f})`).join(" / ");throw r(new Error(`Invalid key length ${n.length} bytes. Must be ${u}`),"ERR_INVALID_KEY_LENGTH")}return s}}}),require_aes2=__commonJS({"node_modules/libp2p-crypto/src/aes/index.js"(e){init_node_globals();var o=require_ciphers_browser(),r=require_cipher_mode();e.create=async function(t,n){const s=r(t),u=o.createCipheriv(s,t,n),l=o.createDecipheriv(s,t,n);return{async encrypt(a){return u.update(a)},async decrypt(a){return l.update(a)}}}}}),require_pbkdf22=__commonJS({"node_modules/libp2p-crypto/src/pbkdf2.js"(e,o){init_node_globals();var r=require_pbkdf2(),t=require_util(),n=require_err_code(),s={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function u(l,f,a,c,d){const h=s[d];if(!h){const p=Object.keys(s).join(" / ");throw n(new Error(`Hash '${d}' is unknown or not supported. Must be ${p}`),"ERR_UNSUPPORTED_HASH_TYPE")}const g=r(l,f,a,c,h);return t.encode64(g)}o.exports=u}}),require_src6=__commonJS({"node_modules/libp2p-crypto/src/index.js"(e){init_node_globals();var o=require_index_browser(),r=require_aes2(),t=require_keys2();e.aes=r,e.hmac=o,e.keys=t,e.randomBytes=require_random_bytes(),e.pbkdf2=require_pbkdf22()}}),require_long=__commonJS({"node_modules/long/src/long.js"(e,o){init_node_globals(),o.exports=t;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(P,O,k){this.low=P|0,this.high=O|0,this.unsigned=!!k}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function n(P){return(P&&P.__isLong__)===!0}t.isLong=n;var s={},u={};function l(P,O){var k,N,K;return O?(P>>>=0,(K=0<=P&&P<256)&&(N=u[P],N)?N:(k=a(P,(P|0)<0?-1:0,!0),K&&(u[P]=k),k)):(P|=0,(K=-128<=P&&P<128)&&(N=s[P],N)?N:(k=a(P,P<0?-1:0,!1),K&&(s[P]=k),k))}t.fromInt=l;function f(P,O){if(isNaN(P))return O?b:y;if(O){if(P<0)return b;if(P>=m)return A}else{if(P<=-v)return C;if(P+1>=v)return E}return P<0?f(-P,O).neg():a(P%_|0,P/_|0,O)}t.fromNumber=f;function a(P,O,k){return new t(P,O,k)}t.fromBits=a;var c=Math.pow;function d(P,O,k){if(P.length===0)throw Error("empty string");if(P==="NaN"||P==="Infinity"||P==="+Infinity"||P==="-Infinity")return y;if(typeof O=="number"?(k=O,O=!1):O=!!O,k=k||10,k<2||36<k)throw RangeError("radix");var N;if((N=P.indexOf("-"))>0)throw Error("interior hyphen");if(N===0)return d(P.substring(1),O,k).neg();for(var K=f(c(k,8)),U=y,L=0;L<P.length;L+=8){var re=Math.min(8,P.length-L),Z=parseInt(P.substring(L,L+re),k);if(re<8){var V=f(c(k,re));U=U.mul(V).add(f(Z))}else U=U.mul(K),U=U.add(f(Z))}return U.unsigned=O,U}t.fromString=d;function h(P,O){return typeof P=="number"?f(P,O):typeof P=="string"?d(P,O):a(P.low,P.high,typeof O=="boolean"?O:P.unsigned)}t.fromValue=h;var g=1<<16,p=1<<24,_=g*g,m=_*_,v=m/2,w=l(p),y=l(0);t.ZERO=y;var b=l(0,!0);t.UZERO=b;var T=l(1);t.ONE=T;var R=l(1,!0);t.UONE=R;var S=l(-1);t.NEG_ONE=S;var E=a(4294967295|0,2147483647|0,!1);t.MAX_VALUE=E;var A=a(4294967295|0,4294967295|0,!0);t.MAX_UNSIGNED_VALUE=A;var C=a(0,2147483648|0,!1);t.MIN_VALUE=C;var I=t.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},I.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(C)){var k=f(O),N=this.div(k),K=N.mul(k).sub(this);return N.toString(O)+K.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var U=f(c(O,6),this.unsigned),L=this,re="";;){var Z=L.div(U),V=L.sub(Z.mul(U)).toInt()>>>0,ee=V.toString(O);if(L=Z,L.isZero())return ee+re;for(;ee.length<6;)ee="0"+ee;re=""+ee+re}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,k=31;k>0&&(O&1<<k)==0;k--);return this.high!=0?k+33:k+1},I.isZero=function(){return this.high===0&&this.low===0},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return(this.low&1)==1},I.isEven=function(){return(this.low&1)==0},I.equals=function(O){return n(O)||(O=h(O)),this.unsigned!==O.unsigned&&this.high>>>31==1&&O.high>>>31==1?!1:this.high===O.high&&this.low===O.low},I.eq=I.equals,I.notEquals=function(O){return!this.eq(O)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(O){return this.comp(O)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(O){return this.comp(O)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(O){return this.comp(O)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(O){return this.comp(O)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(O){if(n(O)||(O=h(O)),this.eq(O))return 0;var k=this.isNegative(),N=O.isNegative();return k&&!N?-1:!k&&N?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(T)},I.neg=I.negate,I.add=function(O){n(O)||(O=h(O));var k=this.high>>>16,N=this.high&65535,K=this.low>>>16,U=this.low&65535,L=O.high>>>16,re=O.high&65535,Z=O.low>>>16,V=O.low&65535,ee=0,fe=0,_e=0,ce=0;return ce+=U+V,_e+=ce>>>16,ce&=65535,_e+=K+Z,fe+=_e>>>16,_e&=65535,fe+=N+re,ee+=fe>>>16,fe&=65535,ee+=k+L,ee&=65535,a(_e<<16|ce,ee<<16|fe,this.unsigned)},I.subtract=function(O){return n(O)||(O=h(O)),this.add(O.neg())},I.sub=I.subtract,I.multiply=function(O){if(this.isZero())return y;if(n(O)||(O=h(O)),r){var k=r.mul(this.low,this.high,O.low,O.high);return a(k,r.get_high(),this.unsigned)}if(O.isZero())return y;if(this.eq(C))return O.isOdd()?C:y;if(O.eq(C))return this.isOdd()?C:y;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(w)&&O.lt(w))return f(this.toNumber()*O.toNumber(),this.unsigned);var N=this.high>>>16,K=this.high&65535,U=this.low>>>16,L=this.low&65535,re=O.high>>>16,Z=O.high&65535,V=O.low>>>16,ee=O.low&65535,fe=0,_e=0,ce=0,Ee=0;return Ee+=L*ee,ce+=Ee>>>16,Ee&=65535,ce+=U*ee,_e+=ce>>>16,ce&=65535,ce+=L*V,_e+=ce>>>16,ce&=65535,_e+=K*ee,fe+=_e>>>16,_e&=65535,_e+=U*V,fe+=_e>>>16,_e&=65535,_e+=L*Z,fe+=_e>>>16,_e&=65535,fe+=N*ee+K*V+U*Z+L*re,fe&=65535,a(ce<<16|Ee,fe<<16|_e,this.unsigned)},I.mul=I.multiply,I.divide=function(O){if(n(O)||(O=h(O)),O.isZero())throw Error("division by zero");if(r){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var k=(this.unsigned?r.div_u:r.div_s)(this.low,this.high,O.low,O.high);return a(k,r.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?b:y;var N,K,U;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return b;if(O.gt(this.shru(1)))return R;U=b}else{if(this.eq(C)){if(O.eq(T)||O.eq(S))return C;if(O.eq(C))return T;var L=this.shr(1);return N=L.div(O).shl(1),N.eq(y)?O.isNegative()?T:S:(K=this.sub(O.mul(N)),U=N.add(K.div(O)),U)}else if(O.eq(C))return this.unsigned?b:y;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();U=y}for(K=this;K.gte(O);){N=Math.max(1,Math.floor(K.toNumber()/O.toNumber()));for(var re=Math.ceil(Math.log(N)/Math.LN2),Z=re<=48?1:c(2,re-48),V=f(N),ee=V.mul(O);ee.isNegative()||ee.gt(K);)N-=Z,V=f(N,this.unsigned),ee=V.mul(O);V.isZero()&&(V=T),U=U.add(V),K=K.sub(ee)}return U},I.div=I.divide,I.modulo=function(O){if(n(O)||(O=h(O)),r){var k=(this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,O.low,O.high);return a(k,r.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return a(~this.low,~this.high,this.unsigned)},I.and=function(O){return n(O)||(O=h(O)),a(this.low&O.low,this.high&O.high,this.unsigned)},I.or=function(O){return n(O)||(O=h(O)),a(this.low|O.low,this.high|O.high,this.unsigned)},I.xor=function(O){return n(O)||(O=h(O)),a(this.low^O.low,this.high^O.high,this.unsigned)},I.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)==0?this:O<32?a(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):a(0,this.low<<O-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)==0?this:O<32?a(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):a(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var k=this.high;if(O<32){var N=this.low;return a(N>>>O|k<<32-O,k>>>O,this.unsigned)}else return O===32?a(k,0,this.unsigned):a(k>>>O-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},I.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var O=this.high,k=this.low;return[k&255,k>>>8&255,k>>>16&255,k>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},I.toBytesBE=function(){var O=this.high,k=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,k>>>24,k>>>16&255,k>>>8&255,k&255]},t.fromBytes=function(O,k,N){return N?t.fromBytesLE(O,k):t.fromBytesBE(O,k)},t.fromBytesLE=function(O,k){return new t(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,k)},t.fromBytesBE=function(O,k){return new t(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],k)}}}),import_minimal2,$Reader2,$Writer2,$util2,$root2,IpnsEntry,init_ipns=__esm({"node_modules/ipns/esm/src/pb/ipns.js"(){init_node_globals(),import_minimal2=__toESM(require_minimal2(),1),$Reader2=import_minimal2.default.Reader,$Writer2=import_minimal2.default.Writer,$util2=import_minimal2.default.util,$root2=import_minimal2.default.roots["ipfs-ipns"]||(import_minimal2.default.roots["ipfs-ipns"]={}),IpnsEntry=$root2.IpnsEntry=(()=>{function e(o){if(o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.value=$util2.newBuffer([]),e.prototype.signature=$util2.newBuffer([]),e.prototype.validityType=0,e.prototype.validity=$util2.newBuffer([]),e.prototype.sequence=$util2.Long?$util2.Long.fromBits(0,0,!0):0,e.prototype.ttl=$util2.Long?$util2.Long.fromBits(0,0,!0):0,e.prototype.pubKey=$util2.newBuffer([]),e.prototype.signatureV2=$util2.newBuffer([]),e.prototype.data=$util2.newBuffer([]),e.encode=function(r,t){return t||(t=$Writer2.create()),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&t.uint32(10).bytes(r.value),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&t.uint32(18).bytes(r.signature),r.validityType!=null&&Object.hasOwnProperty.call(r,"validityType")&&t.uint32(24).int32(r.validityType),r.validity!=null&&Object.hasOwnProperty.call(r,"validity")&&t.uint32(34).bytes(r.validity),r.sequence!=null&&Object.hasOwnProperty.call(r,"sequence")&&t.uint32(40).uint64(r.sequence),r.ttl!=null&&Object.hasOwnProperty.call(r,"ttl")&&t.uint32(48).uint64(r.ttl),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&t.uint32(58).bytes(r.pubKey),r.signatureV2!=null&&Object.hasOwnProperty.call(r,"signatureV2")&&t.uint32(66).bytes(r.signatureV2),r.data!=null&&Object.hasOwnProperty.call(r,"data")&&t.uint32(74).bytes(r.data),t},e.decode=function(r,t){r instanceof $Reader2||(r=$Reader2.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root2.IpnsEntry;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.value=r.bytes();break;case 2:s.signature=r.bytes();break;case 3:s.validityType=r.int32();break;case 4:s.validity=r.bytes();break;case 5:s.sequence=r.uint64();break;case 6:s.ttl=r.uint64();break;case 7:s.pubKey=r.bytes();break;case 8:s.signatureV2=r.bytes();break;case 9:s.data=r.bytes();break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root2.IpnsEntry)return r;var t=new $root2.IpnsEntry;switch(r.value!=null&&(typeof r.value=="string"?$util2.base64.decode(r.value,t.value=$util2.newBuffer($util2.base64.length(r.value)),0):r.value.length&&(t.value=r.value)),r.signature!=null&&(typeof r.signature=="string"?$util2.base64.decode(r.signature,t.signature=$util2.newBuffer($util2.base64.length(r.signature)),0):r.signature.length&&(t.signature=r.signature)),r.validityType){case"EOL":case 0:t.validityType=0;break}return r.validity!=null&&(typeof r.validity=="string"?$util2.base64.decode(r.validity,t.validity=$util2.newBuffer($util2.base64.length(r.validity)),0):r.validity.length&&(t.validity=r.validity)),r.sequence!=null&&($util2.Long?(t.sequence=$util2.Long.fromValue(r.sequence)).unsigned=!0:typeof r.sequence=="string"?t.sequence=parseInt(r.sequence,10):typeof r.sequence=="number"?t.sequence=r.sequence:typeof r.sequence=="object"&&(t.sequence=new $util2.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0))),r.ttl!=null&&($util2.Long?(t.ttl=$util2.Long.fromValue(r.ttl)).unsigned=!0:typeof r.ttl=="string"?t.ttl=parseInt(r.ttl,10):typeof r.ttl=="number"?t.ttl=r.ttl:typeof r.ttl=="object"&&(t.ttl=new $util2.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0))),r.pubKey!=null&&(typeof r.pubKey=="string"?$util2.base64.decode(r.pubKey,t.pubKey=$util2.newBuffer($util2.base64.length(r.pubKey)),0):r.pubKey.length&&(t.pubKey=r.pubKey)),r.signatureV2!=null&&(typeof r.signatureV2=="string"?$util2.base64.decode(r.signatureV2,t.signatureV2=$util2.newBuffer($util2.base64.length(r.signatureV2)),0):r.signatureV2.length&&(t.signatureV2=r.signatureV2)),r.data!=null&&(typeof r.data=="string"?$util2.base64.decode(r.data,t.data=$util2.newBuffer($util2.base64.length(r.data)),0):r.data.length&&(t.data=r.data)),t},e.toObject=function(r,t){t||(t={});var n={};if(t.defaults){if(t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=$util2.newBuffer(n.value))),t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=$util2.newBuffer(n.signature))),n.validityType=t.enums===String?"EOL":0,t.bytes===String?n.validity="":(n.validity=[],t.bytes!==Array&&(n.validity=$util2.newBuffer(n.validity))),$util2.Long){var s=new $util2.Long(0,0,!0);n.sequence=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.sequence=t.longs===String?"0":0;if($util2.Long){var s=new $util2.Long(0,0,!0);n.ttl=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.ttl=t.longs===String?"0":0;t.bytes===String?n.pubKey="":(n.pubKey=[],t.bytes!==Array&&(n.pubKey=$util2.newBuffer(n.pubKey))),t.bytes===String?n.signatureV2="":(n.signatureV2=[],t.bytes!==Array&&(n.signatureV2=$util2.newBuffer(n.signatureV2))),t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=$util2.newBuffer(n.data)))}return r.value!=null&&r.hasOwnProperty("value")&&(n.value=t.bytes===String?$util2.base64.encode(r.value,0,r.value.length):t.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=t.bytes===String?$util2.base64.encode(r.signature,0,r.signature.length):t.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),r.validityType!=null&&r.hasOwnProperty("validityType")&&(n.validityType=t.enums===String?$root2.IpnsEntry.ValidityType[r.validityType]:r.validityType),r.validity!=null&&r.hasOwnProperty("validity")&&(n.validity=t.bytes===String?$util2.base64.encode(r.validity,0,r.validity.length):t.bytes===Array?Array.prototype.slice.call(r.validity):r.validity),r.sequence!=null&&r.hasOwnProperty("sequence")&&(typeof r.sequence=="number"?n.sequence=t.longs===String?String(r.sequence):r.sequence:n.sequence=t.longs===String?$util2.Long.prototype.toString.call(r.sequence):t.longs===Number?new $util2.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0):r.sequence),r.ttl!=null&&r.hasOwnProperty("ttl")&&(typeof r.ttl=="number"?n.ttl=t.longs===String?String(r.ttl):r.ttl:n.ttl=t.longs===String?$util2.Long.prototype.toString.call(r.ttl):t.longs===Number?new $util2.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0):r.ttl),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(n.pubKey=t.bytes===String?$util2.base64.encode(r.pubKey,0,r.pubKey.length):t.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.signatureV2!=null&&r.hasOwnProperty("signatureV2")&&(n.signatureV2=t.bytes===String?$util2.base64.encode(r.signatureV2,0,r.signatureV2.length):t.bytes===Array?Array.prototype.slice.call(r.signatureV2):r.signatureV2),r.data!=null&&r.hasOwnProperty("data")&&(n.data=t.bytes===String?$util2.base64.encode(r.data,0,r.data.length):t.bytes===Array?Array.prototype.slice.call(r.data):r.data),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal2.default.util.toJSONOptions)},e.ValidityType=function(){const o={},r=Object.create(o);return r[o[0]="EOL"]=0,r}(),e})()}});function parseRFC3339(e){const o=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(o);if(!r)throw new Error("Invalid format");const t=parseInt(r[1],10),n=parseInt(r[2],10)-1,s=parseInt(r[3],10),u=parseInt(r[4],10),l=parseInt(r[5],10),f=parseInt(r[6],10),a=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(t,n,s,u,l,f,a))}var init_utils=__esm({"node_modules/ipns/esm/src/utils.js"(){init_node_globals()}}),ERR_IPNS_EXPIRED_RECORD,ERR_UNRECOGNIZED_VALIDITY,ERR_SIGNATURE_CREATION,ERR_SIGNATURE_VERIFICATION,ERR_UNRECOGNIZED_FORMAT,ERR_PEER_ID_FROM_PUBLIC_KEY,ERR_PUBLIC_KEY_FROM_ID,ERR_UNDEFINED_PARAMETER,ERR_INVALID_RECORD_DATA,ERR_INVALID_EMBEDDED_KEY,init_errors3=__esm({"node_modules/ipns/esm/src/errors.js"(){init_node_globals(),ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY",ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID",ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER",ERR_INVALID_RECORD_DATA="ERR_INVALID_RECORD_DATA",ERR_INVALID_EMBEDDED_KEY="ERR_INVALID_EMBEDDED_KEY"}}),src_exports3={};__export(src_exports3,{create:()=>create2,createWithExpiration:()=>createWithExpiration,embedPublicKey:()=>embedPublicKey,extractPublicKey:()=>extractPublicKey,getIdKeys:()=>getIdKeys,getLocalKey:()=>getLocalKey,marshal:()=>marshal,namespace:()=>namespace,namespaceLength:()=>namespaceLength,unmarshal:()=>unmarshal,validate:()=>validate2,validator:()=>validator});var import_timestamp_nano,import_libp2p_crypto,import_peer_id,import_err_code5,import_long,import_debug,log,ID_MULTIHASH_CODE,IPNS_PREFIX,namespace,namespaceLength,create2,createWithExpiration,_create,createCborData,validate2,validateCborDataMatchesPbData,embedPublicKey,extractPublicKey,rawStdEncoding,getLocalKey,getIdKeys,sign,getValidityType,ipnsEntryDataForV1Sig,ipnsEntryDataForV2Sig,extractPublicKeyFromId,marshal,unmarshal,validator,init_src4=__esm({"node_modules/ipns/esm/src/index.js"(){init_node_globals(),import_timestamp_nano=__toESM(require_timestamp(),1),init_key(),import_libp2p_crypto=__toESM(require_src6(),1),import_peer_id=__toESM(require_src5(),1),init_digest(),init_identity(),import_err_code5=__toESM(require_err_code(),1),init_base32(),init_from_string(),init_to_string(),init_concat(),init_equals(),init_cborg(),import_long=__toESM(require_long(),1),import_debug=__toESM(require_browser2(),1),init_ipns(),init_utils(),init_errors3(),log=Object.assign((0,import_debug.default)("jsipns"),{error:(0,import_debug.default)("jsipns:error")}),ID_MULTIHASH_CODE=identity.code,IPNS_PREFIX=fromString3("/ipns/"),namespace="/ipns/",namespaceLength=namespace.length,create2=(e,o,r,t)=>{const n=new import_timestamp_nano.default(Date.now()+Number(t)),s=IpnsEntry.ValidityType.EOL,[u,l]=t.toString().split("."),f=BigInt(u)*BigInt(1e5)+BigInt(l||0);return _create(e,o,r,s,n,f)},createWithExpiration=(e,o,r,t)=>{const n=import_timestamp_nano.default.fromString(t),s=IpnsEntry.ValidityType.EOL,u=n.toDate().getTime()-Date.now(),l=BigInt(u)*BigInt(1e5)+BigInt(n.getNano());return _create(e,o,r,s,n,l)},_create=async(e,o,r,t,n,s)=>{r=BigInt(r);const u=fromString3(n.toString()),l=await sign(e,o,t,u),f=createCborData(o,u,t,r,s),a=ipnsEntryDataForV2Sig(f),c=await e.sign(a),d={value:o,signature:l,validityType:t,validity:u,sequence:r,ttl:s,signatureV2:c,data:f};return log(`ipns entry for ${o} created`),d},createCborData=(e,o,r,t,n)=>encode4({Value:e,Validity:o,ValidityType:r,Sequence:t,TTL:n}),validate2=async(e,o)=>{const{value:r,validityType:t,validity:n}=o;let s,u;o.signatureV2&&o.data?(u=o.signatureV2,s=ipnsEntryDataForV2Sig(o.data),validateCborDataMatchesPbData(o)):(u=o.signature,s=ipnsEntryDataForV1Sig(r,t,n));let l;try{l=await e.verify(s,u)}catch{l=!1}if(!l)throw log.error("record signature verification failed"),(0,import_err_code5.default)(new Error("record signature verification failed"),ERR_SIGNATURE_VERIFICATION);if(t===IpnsEntry.ValidityType.EOL){let f;try{f=parseRFC3339(toString3(n))}catch{throw log.error("unrecognized validity format (not an rfc3339 format)"),(0,import_err_code5.default)(new Error("unrecognized validity format (not an rfc3339 format)"),ERR_UNRECOGNIZED_FORMAT)}if(f.getTime()<Date.now())throw log.error("record has expired"),(0,import_err_code5.default)(new Error("record has expired"),ERR_IPNS_EXPIRED_RECORD)}else if(t)throw log.error("unrecognized validity type"),(0,import_err_code5.default)(new Error("unrecognized validity type"),ERR_UNRECOGNIZED_VALIDITY);log(`ipns entry for ${r} is valid`)},validateCborDataMatchesPbData=e=>{if(!e.data)throw(0,import_err_code5.default)(new Error("Record data is missing"),ERR_INVALID_RECORD_DATA);const o=decode6(e.data);if(Number.isInteger(o.Sequence)&&(o.Sequence=BigInt(o.Sequence)),Number.isInteger(o.TTL)&&(o.TTL=BigInt(o.TTL)),!equals3(o.Value,e.value))throw(0,import_err_code5.default)(new Error('Field "value" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(!equals3(o.Validity,e.validity))throw(0,import_err_code5.default)(new Error('Field "validity" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(o.ValidityType!==e.validityType)throw(0,import_err_code5.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(o.Sequence!==e.sequence)throw(0,import_err_code5.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(o.TTL!==e.ttl)throw(0,import_err_code5.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION)},embedPublicKey=async(e,o)=>{if(!e||!e.bytes||!o){const n=new Error("one or more of the provided parameters are not defined");throw log.error(n),(0,import_err_code5.default)(n,ERR_UNDEFINED_PARAMETER)}let r;try{r=await import_peer_id.default.createFromPubKey(e.bytes)}catch(n){throw(0,import_err_code5.default)(n,ERR_PEER_ID_FROM_PUBLIC_KEY)}let t;try{t=extractPublicKeyFromId(r)}catch(n){throw log.error(n),(0,import_err_code5.default)(n,ERR_PUBLIC_KEY_FROM_ID)}if(t)return null;try{o.pubKey=import_libp2p_crypto.default.keys.marshalPublicKey(e)}catch(n){throw log.error(n),n}return o},extractPublicKey=async(e,o)=>{if(!o||!e){const t=new Error("one or more of the provided parameters are not defined");throw log.error(t),(0,import_err_code5.default)(t,ERR_UNDEFINED_PARAMETER)}let r;if(o.pubKey){try{r=import_libp2p_crypto.default.keys.unmarshalPublicKey(o.pubKey)}catch(n){throw log.error(n),n}if(!(await import_peer_id.default.createFromPubKey(o.pubKey)).equals(e))throw(0,import_err_code5.default)(new Error("Embedded public key did not match PeerID"),ERR_INVALID_EMBEDDED_KEY)}else e.pubKey&&(r=e.pubKey);if(r)return r;throw(0,import_err_code5.default)(new Error("no public key is available"),ERR_UNDEFINED_PARAMETER)},rawStdEncoding=e=>base32upper.encode(e).slice(1),getLocalKey=e=>new Key(`/ipns/${rawStdEncoding(e)}`),getIdKeys=e=>{const o=fromString3("/pk/"),r=fromString3("/ipns/");return{routingPubKey:new Key(concat2([o,e]),!1),pkKey:new Key(rawStdEncoding(concat2([o,e]))),routingKey:new Key(concat2([r,e]),!1),ipnsKey:new Key(rawStdEncoding(concat2([r,e])))}},sign=(e,o,r,t)=>{try{const n=ipnsEntryDataForV1Sig(o,r,t);return e.sign(n)}catch(n){throw log.error("record signature creation failed"),(0,import_err_code5.default)(new Error("record signature creation failed: "+n.message),ERR_SIGNATURE_CREATION)}},getValidityType=e=>{if(e.toString()==="0")return"EOL";const o=new Error(`unrecognized validity type ${e.toString()}`);throw log.error(o),(0,import_err_code5.default)(o,ERR_UNRECOGNIZED_VALIDITY)},ipnsEntryDataForV1Sig=(e,o,r)=>{const t=fromString3(getValidityType(o));return concat2([e,r,t])},ipnsEntryDataForV2Sig=e=>{const o=fromString3("ipns-signature:");return concat2([o,e])},extractPublicKeyFromId=e=>{const o=decode3(e.id);return o.code!==ID_MULTIHASH_CODE?null:import_libp2p_crypto.default.keys.unmarshalPublicKey(o.digest)},marshal=e=>IpnsEntry.encode($e(Re({},e),{sequence:import_long.default.fromString(e.sequence.toString()),ttl:e.ttl==null?void 0:import_long.default.fromString(e.ttl.toString())})).finish(),unmarshal=e=>{const o=IpnsEntry.decode(e),r=IpnsEntry.toObject(o,{defaults:!1,arrays:!0,objects:!1});return{value:r.value,signature:r.signature,validityType:r.validityType,validity:r.validity,sequence:Object.hasOwnProperty.call(r,"sequence")?BigInt(`${r.sequence}`):0,pubKey:r.pubKey,ttl:Object.hasOwnProperty.call(r,"ttl")?BigInt(`${r.ttl}`):void 0,signatureV2:r.signatureV2,data:r.data}},validator={validate:async(e,o)=>{const r=unmarshal(e),t=o.slice(IPNS_PREFIX.length),n=import_peer_id.default.createFromBytes(t),s=await extractPublicKey(n,r);await validate2(s,r)},select:(e,o)=>{const r=unmarshal(e),t=unmarshal(o);if(r.signatureV2&&!t.signatureV2)return 0;if(t.signatureV2&&!r.signatureV2)return 1;if(r.sequence>t.sequence)return 0;if(r.sequence<t.sequence)return 1;const n=parseRFC3339(toString3(r.validity));return parseRFC3339(toString3(t.validity)).getTime()>n.getTime()?1:0}}}}),require_publisher=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/publisher.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src5(),r=(init_key(),__toCommonJS(key_exports)),t=(init_errors2(),__toCommonJS(errors_exports)),n=require_err_code(),s=require_browser2(),u=(init_to_string(),__toCommonJS(to_string_exports)),l=(init_equals(),__toCommonJS(equals_exports)),f=(init_src4(),__toCommonJS(src_exports3));function a(y){return y&&typeof y=="object"&&"default"in y?y:{default:y}}function c(y){if(y&&y.__esModule)return y;var b=Object.create(null);return y&&Object.keys(y).forEach(function(T){if(T!=="default"){var R=Object.getOwnPropertyDescriptor(y,T);Object.defineProperty(b,T,R.get?R:{enumerable:!0,get:function(){return y[T]}})}}),b.default=y,Object.freeze(b)}var d=a(o),h=a(n),g=a(s),p=c(f),_=Object.assign(g.default("ipfs:ipns:publisher"),{error:g.default("ipfs:ipns:publisher:error")}),m=t.notFoundError().code,v=60*60*1e3,w=class{constructor(y,b){this._routing=y,this._datastore=b}async publishWithEOL(y,b,T){if(!y||!y.bytes)throw h.default(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");const R=await d.default.createFromPrivKey(y.bytes),S=await this._updateOrCreateRecord(y,b,T,R);return this._putRecordToRouting(S,R)}publish(y,b){return this.publishWithEOL(y,b,v)}async _putRecordToRouting(y,b){if(!d.default.isPeerId(b)){const E="peerId received is not valid";throw _.error(E),h.default(new Error(E),"ERR_INVALID_PEER_ID")}const T=b.pubKey,R=await p.embedPublicKey(T,y),S=p.getIdKeys(b.toBytes());return await this._publishEntry(S.routingKey,R||y),R||y}async _publishEntry(y,b){const T=r.Key.asKey(y);if(!T){const S="datastore key does not have a valid format";throw _.error(S),h.default(new Error(S),"ERR_INVALID_DATASTORE_KEY")}let R;try{R=p.marshal(b)}catch(S){throw _.error(S),S}try{const S=await this._routing.put(T.uint8Array(),R);return _(`ipns record for ${u.toString(T.uint8Array(),"base32")} was stored in the routing`),S}catch(S){const E=`ipns record for ${u.toString(T.uint8Array(),"base32")} could not be stored in the routing - ${S.stack}`;throw _.error(E),_.error(S),h.default(new Error(E),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(y,b={}){if(!d.default.isPeerId(y)){const R="peerId received is not valid";throw _.error(R),h.default(new Error(R),"ERR_INVALID_PEER_ID")}const T=b.checkRouting!==!1;try{const R=await this._datastore.get(p.getLocalKey(y.id));return this._unmarshalData(R)}catch(R){if(R.code!==m){const S=`unexpected error getting the ipns record ${y.id} from datastore`;throw _.error(S),h.default(new Error(S),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!T)throw h.default(R,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const S=p.getIdKeys(y.toBytes()),E=await this._routing.get(S.routingKey.uint8Array());return this._unmarshalData(E)}catch(S){throw _.error(S),S}}}_unmarshalData(y){try{return p.unmarshal(y)}catch(b){throw h.default(b,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(y,b,T,R){if(!d.default.isPeerId(R)){const I="peerId received is not valid";throw _.error(I),h.default(new Error(I),"ERR_INVALID_PEER_ID")}const S={checkRouting:!0};let E;try{E=await this._getPublished(R,S)}catch(I){if(I.code!==m){const P=`unexpected error when determining the last published IPNS record for ${R.id} ${I.stack}`;throw _.error(P),h.default(new Error(P),"ERR_DETERMINING_PUBLISHED_RECORD")}}let A=0;E&&E.sequence!==void 0&&(A=l.equals(E.value,b)?BigInt(E.sequence):BigInt(E.sequence)+BigInt(1));let C;try{C=await p.create(y,b,A,T)}catch(I){const P=`ipns record for ${b} could not be created`;throw _.error(I),h.default(new Error(P),"ERR_CREATING_IPNS_RECORD")}try{const I=p.marshal(C);return await this._datastore.put(p.getLocalKey(R.id),I),_(`ipns record for ${u.toString(b,"base32")} was stored in the datastore`),C}catch{const P=`ipns record for ${b} could not be stored in the datastore`;throw _.error(P),h.default(new Error(P),"ERR_STORING_IN_DATASTORE")}}};w.defaultRecordLifetime=v,e.IpnsPublisher=w}}),require_republisher=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/republisher.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src4(),__toCommonJS(src_exports3)),r=require_src6(),t=require_src5(),n=require_err_code(),s=require_browser2();function u(y){return y&&typeof y=="object"&&"default"in y?y:{default:y}}function l(y){if(y&&y.__esModule)return y;var b=Object.create(null);return y&&Object.keys(y).forEach(function(T){if(T!=="default"){var R=Object.getOwnPropertyDescriptor(y,T);Object.defineProperty(b,T,R.get?R:{enumerable:!0,get:function(){return y[T]}})}}),b.default=y,Object.freeze(b)}var f=l(o),a=u(r),c=u(t),d=u(n),h=u(s),g=Object.assign(h.default("ipfs:ipns:republisher"),{error:h.default("ipfs:ipns:republisher:error")}),p=60*1e3,_=60*p,m=4*_,v=24*_,w=class{constructor(y,b,T,R,S={pass:""}){this._publisher=y,this._datastore=b,this._peerId=T,this._keychain=R,this._options=S,this._republishHandle=null}async start(){if(this._republishHandle)throw d.default(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const y={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:S=>{y._timeoutId=setTimeout(async()=>{y._timeoutId=null;try{y._inflightTask=y._task(),await y._inflightTask,y._task&&y.runPeriodically(S)}catch(E){g.error(E)}},S())},cancel:async()=>{y._timeoutId!=null&&clearTimeout(y._timeoutId),y._task=null,await y._inflightTask}},{privKey:b}=this._peerId,{pass:T}=this._options;let R=!0;y._task=()=>this._republishEntries(b,T),y.runPeriodically(()=>R?(R=!1,this._options.initialBroadcastInterval||p):this._options.broadcastInterval||m),this._republishHandle=y}async stop(){const y=this._republishHandle;if(!y)throw d.default(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await y.cancel()}async _republishEntries(y,b){try{await this._republishEntry(y)}catch{const R="cannot republish entry for the node's private key";g.error(R);return}if(b)try{const T=await this._keychain.listKeys();for(const R of T){if(R.name==="self")continue;const S=await this._keychain.exportKey(R.name,b),E=await a.default.keys.import(S,b);await this._republishEntry(E)}}catch(T){g.error(T)}}async _republishEntry(y){if(!y||!y.bytes)throw d.default(new Error("invalid private key"),"ERR_INVALID_PRIVATE_KEY");try{const b=await c.default.createFromPrivKey(y.bytes),T=await this._getPreviousValue(b);await this._publisher.publishWithEOL(y,T,v)}catch(b){if(b.code==="ERR_NO_ENTRY_FOUND")return;throw b}}async _getPreviousValue(y){if(!c.default.isPeerId(y))throw d.default(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const b=await this._datastore.get(f.getLocalKey(y.id));if(!(b instanceof Uint8Array))throw d.default(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return f.unmarshal(b).value}catch(T){throw g.error(T),d.default(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(b){throw b&&b.notFound?d.default(new Error(`no previous entry for record with id: ${y.id}`),"ERR_NO_ENTRY_FOUND"):b}}};e.IpnsRepublisher=w}}),require_resolver=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/resolver.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src4(),__toCommonJS(src_exports3)),r=require_src5(),t=require_err_code(),n=require_browser2(),s=(init_to_string(),__toCommonJS(to_string_exports)),u=(init_errors2(),__toCommonJS(errors_exports));function l(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}function f(w){if(w&&w.__esModule)return w;var y=Object.create(null);return w&&Object.keys(w).forEach(function(b){if(b!=="default"){var T=Object.getOwnPropertyDescriptor(w,b);Object.defineProperty(y,b,T.get?T:{enumerable:!0,get:function(){return w[b]}})}}),y.default=w,Object.freeze(y)}var a=f(o),c=l(r),d=l(t),h=l(n),g=f(u),p=Object.assign(h.default("ipfs:ipns:resolver"),{error:h.default("ipfs:ipns:resolver:error")}),_=g.notFoundError().code,m=32,v=class{constructor(w){this._routing=w}async resolve(w,y={}){if(typeof w!="string")throw d.default(new Error("invalid name"),"ERR_INVALID_NAME");const b=y.recursive&&y.recursive.toString()==="true",T=w.split("/");if(T.length!==3||T[0]!=="")throw d.default(new Error("invalid name"),"ERR_INVALID_NAME");const R=T[2];let S=1/0;b&&(S=m);const E=await this.resolver(R,S);return p(`${w} was locally resolved correctly`),E}async resolver(w,y){if(y===0){const R=`could not resolve name (recursion limit of ${m} exceeded)`;throw p.error(R),d.default(new Error(R),"ERR_RESOLVE_RECURSION_LIMIT")}const b=await this._resolveName(w),T=b.split("/");return T[1]==="ipfs"||!y?b:this.resolver(T[2],y-1)}async _resolveName(w){const y=c.default.parse(w),{routingKey:b}=a.getIdKeys(y.toBytes());let T;try{T=await this._routing.get(b.uint8Array())}catch(S){throw p.error("could not get record from routing",S),S.code===_?d.default(new Error(`record requested for ${w} was not found in the network`),"ERR_NO_RECORD_FOUND"):d.default(new Error(`unexpected error getting the ipns record ${y.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}let R;try{R=a.unmarshal(T)}catch(S){throw p.error("could not unmarshal record",S),d.default(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_RECORD_RECEIVED")}return this._validateRecord(y,R)}async _validateRecord(w,y){const b=await a.extractPublicKey(w,y);return await a.validate(b,y),s.toString(y.value)}};e.IpnsResolver=v}}),require_tlru=__commonJS({"node_modules/ipfs-core/cjs/src/utils/tlru.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_hashlru();function r(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var t=r(o),n=class{constructor(s){this.lru=t.default(s)}get(s){const u=this.lru.get(s);if(u){if(u.expire&&u.expire<Date.now()){this.lru.remove(s);return}return u.value}}set(s,u,l){this.lru.set(s,{value:u,expire:Date.now()+l})}has(s){return!!this.get(s)}remove(s){this.lru.remove(s)}clear(){this.lru.clear()}};e.TLRU=n}}),require_ipns=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src5(),r=require_err_code(),t=require_browser2(),n=require_publisher(),s=require_republisher(),u=require_resolver(),l=require_tlru(),f=(init_to_string(),__toCommonJS(to_string_exports));function a(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var c=a(r),d=a(t),h=Object.assign(d.default("ipfs:ipns"),{error:d.default("ipfs:ipns:error")}),g=60*1e3,p=class{constructor(_,m,v,w,y){this.publisher=new n.IpnsPublisher(_,m),this.republisher=new s.IpnsRepublisher(this.publisher,m,v,w,y),this.resolver=new u.IpnsResolver(_),this.cache=new l.TLRU(1e3),this.routing=_}async publish(_,m,v=n.IpnsPublisher.defaultRecordLifetime){try{const w=await o.createFromPrivKey(_.bytes);await this.publisher.publishWithEOL(_,m,v),h(`IPNS value ${f.toString(m,"base32")} was published correctly`);const y=w.toB58String(),b=parseFloat(v),T=b<g?b:g;return this.cache.set(y,m,T),h(`IPNS value ${f.toString(m,"base32")} was cached correctly`),{name:y,value:m}}catch(w){throw h.error(w),w}}async resolve(_,m={}){if(typeof _!="string")throw c.default(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!m.nocache&&!m.recursive){const v=_.split("/")[2],w=this.cache.get(v);if(w)return w}try{const v=await this.resolver.resolve(_,m);return h(`IPNS record from ${_} was resolved correctly`),v}catch(v){throw h.error(v),v}}async initializeKeyspace(_,m){return this.publish(_,m,n.IpnsPublisher.defaultRecordLifetime)}};e.IPNS=p}}),require_it_all=__commonJS({"node_modules/it-all/index.js"(e,o){init_node_globals();var r=async t=>{const n=[];for await(const s of t)n.push(s);return n};o.exports=r}}),import_it_all,sortAll,init_utils2=__esm({"node_modules/datastore-core/esm/src/utils.js"(){init_node_globals(),import_it_all=__toESM(require_it_all(),1),sortAll=(e,o)=>async function*(){yield*(await(0,import_it_all.default)(e)).sort(o)}()}}),require_it_drain=__commonJS({"node_modules/it-drain/index.js"(e,o){init_node_globals();var r=async t=>{for await(const n of t);};o.exports=r}}),require_it_filter=__commonJS({"node_modules/it-filter/index.js"(e,o){init_node_globals();var r=async function*(t,n){for await(const s of t)await n(s)&&(yield s)};o.exports=r}}),require_it_take=__commonJS({"node_modules/it-take/index.js"(e,o){init_node_globals();var r=async function*(t,n){let s=0;if(!(n<1)){for await(const u of t)if(yield u,s++,s===n)return}};o.exports=r}}),import_it_drain,import_it_filter,import_it_take,BaseDatastore,init_base3=__esm({"node_modules/datastore-core/esm/src/base.js"(){init_node_globals(),init_utils2(),import_it_drain=__toESM(require_it_drain(),1),import_it_filter=__toESM(require_it_filter(),1),import_it_take=__toESM(require_it_take(),1),BaseDatastore=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,o,r){return Promise.reject(new Error(".put is not implemented"))}get(e,o){return Promise.reject(new Error(".get is not implemented"))}has(e,o){return Promise.reject(new Error(".has is not implemented"))}delete(e,o){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,o={}){for await(const{key:r,value:t}of e)await this.put(r,t,o),yield{key:r,value:t}}async*getMany(e,o={}){for await(const r of e)yield this.get(r,o)}async*deleteMany(e,o={}){for await(const r of e)await this.delete(r,o),yield r}batch(){let e=[],o=[];return{put(r,t){e.push({key:r,value:t})},delete(r){o.push(r)},commit:async r=>{await(0,import_it_drain.default)(this.putMany(e,r)),e=[],await(0,import_it_drain.default)(this.deleteMany(o,r)),o=[]}}}async*_all(e,o){throw new Error("._all is not implemented")}async*_allKeys(e,o){throw new Error("._allKeys is not implemented")}query(e,o){let r=this._all(e,o);if(e.prefix!=null&&(r=(0,import_it_filter.default)(r,t=>t.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((t,n)=>(0,import_it_filter.default)(t,n),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((t,n)=>sortAll(t,n),r)),e.offset!=null){let t=0;r=(0,import_it_filter.default)(r,()=>t++>=e.offset)}return e.limit!=null&&(r=(0,import_it_take.default)(r,e.limit)),r}queryKeys(e,o){let r=this._allKeys(e,o);if(e.prefix!=null&&(r=(0,import_it_filter.default)(r,t=>t.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((t,n)=>(0,import_it_filter.default)(t,n),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((t,n)=>sortAll(t,n),r)),e.offset!=null){let t=0;r=(0,import_it_filter.default)(r,()=>t++>=e.offset)}return e.limit!=null&&(r=(0,import_it_take.default)(r,e.limit)),r}}}}),require_fixed_size=__commonJS({"node_modules/fast-fifo/fixed-size.js"(e,o){init_node_globals(),o.exports=class{constructor(t){if(!(t>0)||(t-1&t)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}}}),require_fast_fifo=__commonJS({"node_modules/fast-fifo/index.js"(e,o){init_node_globals();var r=require_fixed_size();o.exports=class{constructor(n){this.hwm=n||16,this.head=new r(this.hwm),this.tail=this.head}push(n){if(!this.head.push(n)){const s=this.head;this.head=s.next=new r(2*this.head.buffer.length),this.head.push(n)}}shift(){const n=this.tail.shift();if(n===void 0&&this.tail.next){const s=this.tail.next;return this.tail.next=null,this.tail=s,this.tail.shift()}return n}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}}}),require_it_pushable=__commonJS({"node_modules/it-pushable/index.js"(e,o){init_node_globals();var r=require_fast_fifo();o.exports=t=>{t=t||{};let n;typeof t=="function"?(n=t,t={}):n=t.onEnd;let s=new r,u,l,f;const a=()=>{if(!s.isEmpty()){if(t.writev){let w;const y=[];for(;!s.isEmpty();){if(w=s.shift(),w.error)throw w.error;y.push(w.value)}return{done:w.done,value:y}}const v=s.shift();if(v.error)throw v.error;return v}return f?{done:!0}:new Promise((v,w)=>{l=y=>(l=null,y.error?w(y.error):t.writev&&!y.done?v({done:y.done,value:[y.value]}):v(y),u)})},c=v=>l?l(v):(s.push(v),u),d=v=>(s=new r,l?l({error:v}):(s.push({error:v}),u)),h=v=>f?u:c({done:!1,value:v}),g=v=>f?u:(f=!0,v?d(v):c({done:!0})),p=()=>(s=new r,g(),{done:!0}),_=v=>(g(v),{done:!0});if(u={[Symbol.asyncIterator](){return this},next:a,return:p,throw:_,push:h,end:g},!n)return u;const m=u;return u={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(v){return m.throw(v),n&&(n(v),n=null),{done:!0}},return(){return m.return(),n&&(n(),n=null),{done:!0}},push:h,end(v){return m.end(v),n&&(n(v),n=null),u}},u}}}),tiered_exports={};__export(tiered_exports,{TieredDatastore:()=>TieredDatastore});var import_debug2,import_it_pushable,import_it_drain2,log2,TieredDatastore,init_tiered=__esm({"node_modules/datastore-core/esm/src/tiered.js"(){init_node_globals(),init_base3(),init_errors2(),import_debug2=__toESM(require_browser2(),1),import_it_pushable=__toESM(require_it_pushable(),1),import_it_drain2=__toESM(require_it_drain(),1),log2=(0,import_debug2.default)("datastore:core:tiered"),TieredDatastore=class extends BaseDatastore{constructor(e){super();this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch{throw dbOpenFailedError()}}async put(e,o){try{await Promise.all(this.stores.map(r=>r.put(e,o)))}catch{throw dbWriteFailedError()}}async get(e,o){for(const r of this.stores)try{const t=await r.get(e,o);if(t)return t}catch(t){log2(t)}throw notFoundError()}async has(e,o){for(const r of this.stores)if(await r.has(e,o))return!0;return!1}async delete(e,o){try{await Promise.all(this.stores.map(r=>r.delete(e,o)))}catch{throw dbDeleteFailedError()}}async*putMany(e,o={}){let r;const t=this.stores.map(n=>{const s=(0,import_it_pushable.default)();return(0,import_it_drain2.default)(n.putMany(s,o)).catch(u=>{r=u}),s});try{for await(const n of e){if(r)throw r;t.forEach(s=>s.push(n)),yield n}}finally{t.forEach(n=>n.end())}}async*deleteMany(e,o={}){let r;const t=this.stores.map(n=>{const s=(0,import_it_pushable.default)();return(0,import_it_drain2.default)(n.deleteMany(s,o)).catch(u=>{r=u}),s});try{for await(const n of e){if(r)throw r;t.forEach(s=>s.push(n)),yield n}}finally{t.forEach(n=>n.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){const e=this.stores.map(o=>o.batch());return{put:(o,r)=>{e.forEach(t=>t.put(o,r))},delete:o=>{e.forEach(r=>r.delete(o))},commit:async o=>{for(const r of e)await r.commit(o)}}}query(e,o){return this.stores[this.stores.length-1].query(e,o)}queryKeys(e,o){return this.stores[this.stores.length-1].queryKeys(e,o)}}}}),require_dlv_umd=__commonJS({"node_modules/dlv/dist/dlv.umd.js"(e,o){init_node_globals(),function(r,t){typeof e=="object"&&typeof o!="undefined"?o.exports=function(n,s,u,l,f){for(s=s.split?s.split("."):s,l=0;l<s.length;l++)n=n?n[s[l]]:f;return n===f?u:n}:typeof define=="function"&&define.amd?define(function(){return function(n,s,u,l,f){for(s=s.split?s.split("."):s,l=0;l<s.length;l++)n=n?n[s[l]]:f;return n===f?u:n}}):r.dlv=function(n,s,u,l,f){for(s=s.split?s.split("."):s,l=0;l<s.length;l++)n=n?n[s[l]]:f;return n===f?u:n}}(e)}}),init_src5=__esm({"node_modules/interface-datastore/esm/src/index.js"(){init_node_globals(),init_key()}}),shard_readme_default,init_shard_readme=__esm({"node_modules/datastore-core/esm/src/shard-readme.js"(){init_node_globals(),shard_readme_default=`This is a repository of IPLD objects. Each IPLD object is in a single file,
named <base32 encoding of cid>.data. Where <base32 encoding of cid> is the
"base32" encoding of the CID (as specified in
https://github.com/multiformats/multibase) without the 'B' prefix.
All the object files are placed in a tree of directories, based on a
function of the CID. This is a form of sharding similar to
the objects directory in git repositories. Previously, we used
prefixes, we now use the next-to-last two charters.
    func NextToLast(base32cid string) {
      nextToLastLen := 2
      offset := len(base32cid) - nextToLastLen - 1
      return str[offset : offset+nextToLastLen]
    }
For example, an object with a base58 CIDv1 of
    zb2rhYSxw4ZjuzgCnWSt19Q94ERaeFhu9uSqRgjSdx9bsgM6f
has a base32 CIDv1 of
    BAFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA
and will be placed at
    SC/AFKREIA22FLID5AJ2KU7URG47MDLROZIH6YF2KALU2PWEFPVI37YLKRSCA.data
with 'SC' being the last-to-next two characters and the 'B' at the
beginning of the CIDv1 string is the multibase prefix that is not
stored in the filename.
`}}),shard_exports={};__export(shard_exports,{NextToLast:()=>NextToLast,PREFIX:()=>PREFIX,Prefix:()=>Prefix,README_FN:()=>README_FN,SHARDING_FN:()=>SHARDING_FN,ShardBase:()=>ShardBase,Suffix:()=>Suffix,parseShardFun:()=>parseShardFun,readShardFun:()=>readShardFun,readme:()=>shard_readme_default});function parseShardFun(e){if(e=e.trim(),e.length===0)throw new Error("empty shard string");if(!e.startsWith(PREFIX))throw new Error(`invalid or no path prefix: ${e}`);const o=e.slice(PREFIX.length).split("/"),r=o[0];if(r!=="v1")throw new Error(`expect 'v1' version, got '${r}'`);const t=o[1];if(!o[2])throw new Error("missing param");const n=parseInt(o[2],10);switch(t){case"prefix":return new Prefix(n);case"suffix":return new Suffix(n);case"next-to-last":return new NextToLast(n);default:throw new Error(`unkown sharding function: ${t}`)}}var PREFIX,SHARDING_FN,README_FN,ShardBase,Prefix,Suffix,NextToLast,readShardFun,init_shard=__esm({"node_modules/datastore-core/esm/src/shard.js"(){init_node_globals(),init_key(),init_shard_readme(),init_shard_readme(),PREFIX="/repo/flatfs/shard/",SHARDING_FN="SHARDING",README_FN="_README",ShardBase=class{constructor(e){this.param=e,this.name="base",this._padding=""}fun(e){return"implement me"}toString(){return`${PREFIX}v1/${this.name}/${this.param}`}},Prefix=class extends ShardBase{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}},Suffix=class extends ShardBase{constructor(e){super(e);this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){const o=this._padding+e;return o.slice(o.length-this.param)}},NextToLast=class extends ShardBase{constructor(e){super(e);this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){const o=this._padding+e,r=o.length-this.param-1;return o.slice(r,r+this.param)}},readShardFun=async(e,o)=>{const r=new Key(e).child(new Key(SHARDING_FN)),n=await(typeof o.getRaw=="function"?o.getRaw.bind(o):o.get.bind(o))(r);return parseShardFun(new TextDecoder().decode(n||"").trim())}}}),memory_exports={};__export(memory_exports,{MemoryDatastore:()=>MemoryDatastore});var MemoryDatastore,init_memory=__esm({"node_modules/datastore-core/esm/src/memory.js"(){init_node_globals(),init_base3(),init_key(),init_errors2(),MemoryDatastore=class extends BaseDatastore{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,o){this.data[e.toString()]=o}async get(e){if(!await this.has(e))throw notFoundError();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,o])=>({key:new Key(e),value:o}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Key(e))}}}}),require_it_map=__commonJS({"node_modules/it-map/index.js"(e,o){init_node_globals();var r=async function*(t,n){for await(const s of t)yield n(s)};o.exports=r}}),require_it_pipe=__commonJS({"node_modules/it-pipe/index.js"(e,o){init_node_globals();var r=(...l)=>{let f;for(;l.length;)f=l.shift()(f);return f},t=l=>l&&(typeof l[Symbol.asyncIterator]=="function"||typeof l[Symbol.iterator]=="function"||typeof l.next=="function"),n=l=>l&&typeof l.sink=="function"&&t(l.source),s=l=>f=>(l.sink(f),l.source),u=(...l)=>{if(n(l[0])){const f=l[0];l[0]=()=>f.source}else if(t(l[0])){const f=l[0];l[0]=()=>f}if(l.length>1&&n(l[l.length-1])&&(l[l.length-1]=l[l.length-1].sink),l.length>2)for(let f=1;f<l.length-1;f++)n(l[f])&&(l[f]=s(l[f]));return r(...l)};o.exports=u,o.exports.pipe=u,o.exports.rawPipe=r,o.exports.isIterable=t,o.exports.isDuplex=n}}),import_it_map,import_it_pipe,KeyTransformDatastore,init_keytransform=__esm({"node_modules/datastore-core/esm/src/keytransform.js"(){init_node_globals(),init_base3(),import_it_map=__toESM(require_it_map(),1),import_it_pipe=__toESM(require_it_pipe(),1),KeyTransformDatastore=class extends BaseDatastore{constructor(e,o){super();this.child=e,this.transform=o}open(){return this.child.open()}put(e,o,r){return this.child.put(this.transform.convert(e),o,r)}get(e,o){return this.child.get(this.transform.convert(e),o)}has(e,o){return this.child.has(this.transform.convert(e),o)}delete(e,o){return this.child.delete(this.transform.convert(e),o)}async*putMany(e,o={}){const r=this.transform,t=this.child;yield*(0,import_it_pipe.pipe)(e,async function*(n){yield*(0,import_it_map.default)(n,({key:s,value:u})=>({key:r.convert(s),value:u}))},async function*(n){yield*t.putMany(n,o)},async function*(n){yield*(0,import_it_map.default)(n,({key:s,value:u})=>({key:r.invert(s),value:u}))})}async*getMany(e,o={}){const r=this.transform,t=this.child;yield*(0,import_it_pipe.pipe)(e,async function*(n){yield*(0,import_it_map.default)(n,s=>r.convert(s))},async function*(n){yield*t.getMany(n,o)})}async*deleteMany(e,o={}){const r=this.transform,t=this.child;yield*(0,import_it_pipe.pipe)(e,async function*(n){yield*(0,import_it_map.default)(n,s=>r.convert(s))},async function*(n){yield*t.deleteMany(n,o)},async function*(n){yield*(0,import_it_map.default)(n,s=>r.invert(s))})}batch(){const e=this.child.batch();return{put:(o,r)=>{e.put(this.transform.convert(o),r)},delete:o=>{e.delete(this.transform.convert(o))},commit:o=>e.commit(o)}}query(e,o){const r=Re({},e);r.filters=(r.filters||[]).map(n=>({key:s,value:u})=>n({key:this.transform.convert(s),value:u}));const{prefix:t}=e;return t!=null&&t!=="/"&&(delete r.prefix,r.filters.push(({key:n})=>this.transform.invert(n).toString().startsWith(t))),r.orders&&(r.orders=r.orders.map(n=>(s,u)=>n({key:this.transform.invert(s.key),value:s.value},{key:this.transform.invert(u.key),value:u.value}))),(0,import_it_map.default)(this.child.query(r,o),({key:n,value:s})=>({key:this.transform.invert(n),value:s}))}queryKeys(e,o){const r=Re({},e);r.filters=(r.filters||[]).map(n=>s=>n(this.transform.convert(s)));const{prefix:t}=e;return t!=null&&t!=="/"&&(delete r.prefix,r.filters.push(n=>this.transform.invert(n).toString().startsWith(t))),r.orders&&(r.orders=r.orders.map(n=>(s,u)=>n(this.transform.invert(s),this.transform.invert(u)))),(0,import_it_map.default)(this.child.queryKeys(r,o),n=>this.transform.invert(n))}close(){return this.child.close()}}}}),shardKey,shardReadmeKey,ShardingDatastore,init_sharding=__esm({"node_modules/datastore-core/esm/src/sharding.js"(){init_node_globals(),init_src5(),init_shard(),init_base3(),init_keytransform(),init_errors2(),shardKey=new Key(SHARDING_FN),shardReadmeKey=new Key(README_FN),ShardingDatastore=class extends BaseDatastore{constructor(e,o){super();this.child=new KeyTransformDatastore(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=o}async open(){await this.child.open(),this.shard=await ShardingDatastore.create(this.child,this.shard)}_convertKey(e){const o=e.toString();return o===shardKey.toString()||o===shardReadmeKey.toString()?e:new Key(this.shard.fun(o)).child(e)}_invertKey(e){const o=e.toString();return o===shardKey.toString()||o===shardReadmeKey.toString()?e:Key.withNamespaces(e.list().slice(1))}static async createOrOpen(e,o){try{await ShardingDatastore.create(e,o)}catch(r){if(r&&r.message!=="datastore exists")throw r}return ShardingDatastore.open(e)}static async open(e){const o=await readShardFun("/",e);return new ShardingDatastore(e,o)}static async create(e,o){const r=await e.has(shardKey);if(!r&&!o)throw dbOpenFailedError(Error("Shard is required when datastore doesn't have a shard key already."));if(!r){const u=typeof e.putRaw=="function"?e.putRaw.bind(e):e.put.bind(e);return await Promise.all([u(shardKey,new TextEncoder().encode(o.toString()+`
`)),u(shardReadmeKey,new TextEncoder().encode(shard_readme_default))]),o}const t=await readShardFun("/",e),n=(t||"").toString(),s=o.toString();if(n!==s)throw new Error(`specified fun ${s} does not match repo shard fun ${n}`);return t}put(e,o,r){return this.child.put(e,o,r)}get(e,o){return this.child.get(e,o)}has(e,o){return this.child.has(e,o)}delete(e,o){return this.child.delete(e,o)}async*putMany(e,o={}){yield*this.child.putMany(e,o)}async*getMany(e,o={}){yield*this.child.getMany(e,o)}async*deleteMany(e,o={}){yield*this.child.deleteMany(e,o)}batch(){return this.child.batch()}query(e,o){const r=$e(Re({},e),{filters:[({key:t})=>t.toString()!==shardKey.toString(),({key:t})=>t.toString()!==shardReadmeKey.toString()].concat(e.filters||[])});return this.child.query(r,o)}queryKeys(e,o){const r=$e(Re({},e),{filters:[t=>t.toString()!==shardKey.toString(),t=>t.toString()!==shardReadmeKey.toString()].concat(e.filters||[])});return this.child.queryKeys(r,o)}close(){return this.child.close()}}}}),require_it_merge=__commonJS({"node_modules/it-merge/index.js"(e,o){init_node_globals();var r=require_it_pushable(),t=async function*(...n){const s=r();setTimeout(async()=>{try{await Promise.all(n.map(async u=>{for await(const l of u)s.push(l)})),s.end()}catch(u){s.end(u)}},0),yield*s};o.exports=t}}),import_it_filter2,import_it_take2,import_it_merge,MountDatastore,init_mount=__esm({"node_modules/datastore-core/esm/src/mount.js"(){init_node_globals(),import_it_filter2=__toESM(require_it_filter(),1),import_it_take2=__toESM(require_it_take(),1),import_it_merge=__toESM(require_it_merge(),1),init_base3(),init_errors2(),init_utils2(),MountDatastore=class extends BaseDatastore{constructor(e){super();this.mounts=e.slice()}async open(){await Promise.all(this.mounts.map(e=>e.datastore.open()))}_lookup(e){for(const o of this.mounts)if(o.prefix.toString()===e.toString()||o.prefix.isAncestorOf(e))return{datastore:o.datastore,mountpoint:o.prefix}}put(e,o,r){const t=this._lookup(e);if(t==null)throw dbWriteFailedError(new Error("No datastore mounted for this key"));return t.datastore.put(e,o,r)}get(e,o){const r=this._lookup(e);if(r==null)throw notFoundError(new Error("No datastore mounted for this key"));return r.datastore.get(e,o)}has(e,o){const r=this._lookup(e);return r==null?Promise.resolve(!1):r.datastore.has(e,o)}delete(e,o){const r=this._lookup(e);if(r==null)throw dbDeleteFailedError(new Error("No datastore mounted for this key"));return r.datastore.delete(e,o)}async close(){await Promise.all(this.mounts.map(e=>e.datastore.close()))}batch(){const e={},o=r=>{const t=this._lookup(r);if(t==null)throw new Error("No datastore mounted for this key");const n=t.mountpoint.toString();return e[n]==null&&(e[n]=t.datastore.batch()),{batch:e[n]}};return{put:(r,t)=>{o(r).batch.put(r,t)},delete:r=>{o(r).batch.delete(r)},commit:async r=>{await Promise.all(Object.keys(e).map(t=>e[t].commit(r)))}}}query(e,o){const r=this.mounts.map(n=>n.datastore.query({prefix:e.prefix,filters:e.filters},o));let t=(0,import_it_merge.default)(...r);if(e.filters&&e.filters.forEach(n=>{t=(0,import_it_filter2.default)(t,n)}),e.orders&&e.orders.forEach(n=>{t=sortAll(t,n)}),e.offset!=null){let n=0;t=(0,import_it_filter2.default)(t,()=>n++>=e.offset)}return e.limit!=null&&(t=(0,import_it_take2.default)(t,e.limit)),t}queryKeys(e,o){const r=this.mounts.map(n=>n.datastore.queryKeys({prefix:e.prefix,filters:e.filters},o));let t=(0,import_it_merge.default)(...r);if(e.filters&&e.filters.forEach(n=>{t=(0,import_it_filter2.default)(t,n)}),e.orders&&e.orders.forEach(n=>{t=sortAll(t,n)}),e.offset!=null){let n=0;t=(0,import_it_filter2.default)(t,()=>n++>=e.offset)}return e.limit!=null&&(t=(0,import_it_take2.default)(t,e.limit)),t}}}}),NamespaceDatastore,init_namespace=__esm({"node_modules/datastore-core/esm/src/namespace.js"(){init_node_globals(),init_src5(),init_keytransform(),NamespaceDatastore=class extends KeyTransformDatastore{constructor(e,o){super(e,{convert(r){return o.child(r)},invert(r){if(o.toString()==="/")return r;if(!o.isAncestorOf(r))throw new Error(`Expected prefix: (${o.toString()}) in key: ${r.toString()}`);return new Key(r.toString().slice(o.toString().length),!1)}})}}}}),src_exports4={};__export(src_exports4,{BaseDatastore:()=>BaseDatastore,Errors:()=>Errors,KeyTransformDatastore:()=>KeyTransformDatastore,MemoryDatastore:()=>MemoryDatastore,MountDatastore:()=>MountDatastore,NamespaceDatastore:()=>NamespaceDatastore,ShardingDatastore:()=>ShardingDatastore,TieredDatastore:()=>TieredDatastore,shard:()=>shard});var Errors,shard,init_src6=__esm({"node_modules/datastore-core/esm/src/index.js"(){init_node_globals(),init_errors2(),init_shard(),init_base3(),init_memory(),init_keytransform(),init_sharding(),init_mount(),init_tiered(),init_namespace(),Errors=errors_exports,shard=shard_exports}});function encodeBase32(e){return toString3(e,"base32")}function keyToTopic(e){(typeof e=="string"||e instanceof String)&&(e=fromString3(e.toString()));const o=toString3(e,"base64url");return`${namespace2}${o}`}function topicToKey(e){if(e.substring(0,namespace2.length)!==namespace2)throw(0,import_err_code6.default)(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const o=e.substring(namespace2.length);return fromString3(o,"base64url")}var import_err_code6,namespace2,init_utils3=__esm({"node_modules/datastore-pubsub/esm/src/utils.js"(){init_node_globals(),import_err_code6=__toESM(require_err_code(),1),init_to_string(),init_from_string(),namespace2="/record/"}}),src_exports5={};__export(src_exports5,{PubsubDatastore:()=>PubsubDatastore});var import_err_code7,import_debug3,log3,PubsubDatastore,init_src7=__esm({"node_modules/datastore-pubsub/esm/src/index.js"(){init_node_globals(),init_src5(),init_src6(),init_utils3(),init_equals(),import_err_code7=__toESM(require_err_code(),1),import_debug3=__toESM(require_browser2(),1),log3=Object.assign((0,import_debug3.default)("datastore-pubsub:publisher"),{error:(0,import_debug3.default)("datastore-pubsub:publisher:error")}),PubsubDatastore=class extends BaseDatastore{constructor(e,o,r,t,n){super();if(!t)throw(0,import_err_code7.default)(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if(typeof t.validate!="function")throw(0,import_err_code7.default)(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if(typeof t.select!="function")throw(0,import_err_code7.default)(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(n&&typeof n!="function")throw(0,import_err_code7.default)(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=o,this._peerId=r,this._validator=t,this._handleSubscriptionKeyFn=n,this._onMessage=this._onMessage.bind(this)}async put(e,o){if(!(e instanceof Uint8Array)){const t="datastore key does not have a valid format";throw log3.error(t),(0,import_err_code7.default)(new Error(t),"ERR_INVALID_DATASTORE_KEY")}if(!(o instanceof Uint8Array)){const t="received value is not a Uint8Array";throw log3.error(t),(0,import_err_code7.default)(new Error(t),"ERR_INVALID_VALUE_RECEIVED")}const r=keyToTopic(e);log3(`publish value for topic ${r}`),await this._pubsub.publish(r,o)}async get(e){if(!(e instanceof Uint8Array)){const t="datastore key does not have a valid format";throw log3.error(t),(0,import_err_code7.default)(new Error(t),"ERR_INVALID_DATASTORE_KEY")}const o=keyToTopic(e),r=await this._pubsub.getTopics();if(r&&Array.isArray(r)&&r.indexOf(o)>-1)return this._getLocal(e);try{this._pubsub.on(o,this._onMessage),await this._pubsub.subscribe(o)}catch{const n=`cannot subscribe topic ${o}`;throw log3.error(n),(0,import_err_code7.default)(new Error(n),"ERR_SUBSCRIBING_TOPIC")}return log3(`subscribed values for key ${o}`),this._getLocal(e)}unsubscribe(e){const o=keyToTopic(e);return this._pubsub.removeListener(o,this._onMessage),this._pubsub.unsubscribe(o)}async _getLocal(e){const o=new Key("/"+encodeBase32(e),!1);let r;try{r=await this._datastore.get(o)}catch(t){if(t.code!=="ERR_NOT_FOUND"){const s=`unexpected error getting the ipns record for ${o.toString()}`;throw log3.error(s),(0,import_err_code7.default)(new Error(s),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const n=`local record requested was not found for ${o.toString()}`;throw log3.error(n),(0,import_err_code7.default)(new Error(n),"ERR_NOT_FOUND")}if(!(r instanceof Uint8Array)){const t="found record that we couldn't convert to a value";throw log3.error(t),(0,import_err_code7.default)(new Error(t),"ERR_INVALID_RECORD_RECEIVED")}return r}async _onMessage(e){const{data:o,from:r,topicIDs:t}=e;let n;try{n=topicToKey(t[0])}catch(s){log3.error(s);return}if(log3(`message received for topic ${t[0]}`),r===this._peerId.toB58String()){log3("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let s;try{s=await this._handleSubscriptionKeyFn(n)}catch{log3.error("message discarded by the subscriptionKeyFn");return}n=s}try{await this._storeIfSubscriptionIsBetter(n,o)}catch(s){log3.error(s)}}async _storeIfSubscriptionIsBetter(e,o){let r=!1;try{r=await this._isBetter(e,o)}catch(t){if(t.code!=="ERR_NOT_VALID_RECORD")throw t}r&&await this._storeRecord(e,o)}async _validateRecord(e,o){return this._validator.validate(e,o)}async _selectRecord(e,o){return await this._validator.select(e,o)===0}async _isBetter(e,o){try{await this._validateRecord(o,e)}catch{const s="record received through pubsub is not valid";throw log3.error(s),(0,import_err_code7.default)(new Error(s),"ERR_NOT_VALID_RECORD")}const r=new Key(e);let t;try{t=await this._getLocal(r.uint8Array())}catch{return!0}return equals3(t,o)?!1:this._selectRecord(e,[t,o])}async _storeRecord(e,o){const r=new Key("/"+encodeBase32(e),!1);await this._datastore.put(r,o),log3(`record for ${keyToTopic(e)} was stored in the datastore`)}}}}),require_pubsub_datastore=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/routing/pubsub-datastore.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src4(),__toCommonJS(src_exports3)),r=(init_base58(),__toCommonJS(base58_exports)),t=(init_src7(),__toCommonJS(src_exports5)),n=(init_from_string(),__toCommonJS(from_string_exports)),s=(init_to_string(),__toCommonJS(to_string_exports)),u=require_err_code(),l=require_browser2();function f(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}function a(_){if(_&&_.__esModule)return _;var m=Object.create(null);return _&&Object.keys(_).forEach(function(v){if(v!=="default"){var w=Object.getOwnPropertyDescriptor(_,v);Object.defineProperty(m,v,w.get?w:{enumerable:!0,get:function(){return _[v]}})}}),m.default=_,Object.freeze(m)}var c=a(o),d=f(u),h=f(l),g=Object.assign(h.default("ipfs:ipns:pubsub"),{error:h.default("ipfs:ipns:pubsub:error")}),p=class{constructor(_,m,v){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new t.PubsubDatastore(_,m,v,c.validator,this._handleSubscriptionKey)}async put(_,m){try{await this._pubsubDs.put(_,m)}catch(v){throw g.error(v),v}}async get(_){let m,v;try{m=await this._pubsubDs.get(_)}catch(y){v=y}const w=_.slice(0,c.namespaceLength);if(s.toString(w)===c.namespace){const y=r.base58btc.encode(_).substring(1),b=r.base58btc.encode(_.slice(c.namespaceLength)).substring(1);this._subscriptions[y]=b,g(`subscribed to pubsub topic ${y}, id ${b}`)}if(v)throw v;return m}_handleSubscriptionKey(_){_ instanceof Uint8Array&&(_=s.toString(_,"base58btc"));const m=this._subscriptions[_];if(!m)throw d.default(new Error(`key ${_} does not correspond to a subscription`),"ERR_INVALID_KEY");let v;try{v=c.getIdKeys(n.fromString(m,"base58btc"))}catch(w){throw g.error(w),w}return v.routingKey.uint8Array()}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map(m=>`${c.namespace}${m}`)}async cancel(_){if(typeof _!="string")throw d.default(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");_.startsWith(c.namespace)&&(_=_.substring(c.namespaceLength));const m=Object.keys(this._subscriptions).find(w=>this._subscriptions[w]===_);if(!m)return{canceled:!1};const v=n.fromString(m);return this._pubsubDs.unsubscribe(v),delete this._subscriptions[m],g(`unsubscribed pubsub ${m}: ${_}`),{canceled:!0}}};e.IpnsPubsubDatastore=p}}),require_record=__commonJS({"node_modules/libp2p-record/src/record/record.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-record"]||(r.roots["libp2p-record"]={});u.Record=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.key=s.newBuffer([]),l.prototype.value=s.newBuffer([]),l.prototype.timeReceived="",l.encode=function(a,c){return c||(c=n.create()),a.key!=null&&Object.hasOwnProperty.call(a,"key")&&c.uint32(10).bytes(a.key),a.value!=null&&Object.hasOwnProperty.call(a,"value")&&c.uint32(18).bytes(a.value),a.timeReceived!=null&&Object.hasOwnProperty.call(a,"timeReceived")&&c.uint32(42).string(a.timeReceived),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.Record;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.key=a.bytes();break;case 2:h.value=a.bytes();break;case 5:h.timeReceived=a.string();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.Record)return a;var c=new u.Record;return a.key!=null&&(typeof a.key=="string"?s.base64.decode(a.key,c.key=s.newBuffer(s.base64.length(a.key)),0):a.key.length&&(c.key=a.key)),a.value!=null&&(typeof a.value=="string"?s.base64.decode(a.value,c.value=s.newBuffer(s.base64.length(a.value)),0):a.value.length&&(c.value=a.value)),a.timeReceived!=null&&(c.timeReceived=String(a.timeReceived)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(c.bytes===String?d.key="":(d.key=[],c.bytes!==Array&&(d.key=s.newBuffer(d.key))),c.bytes===String?d.value="":(d.value=[],c.bytes!==Array&&(d.value=s.newBuffer(d.value))),d.timeReceived=""),a.key!=null&&a.hasOwnProperty("key")&&(d.key=c.bytes===String?s.base64.encode(a.key,0,a.key.length):c.bytes===Array?Array.prototype.slice.call(a.key):a.key),a.value!=null&&a.hasOwnProperty("value")&&(d.value=c.bytes===String?s.base64.encode(a.value,0,a.value.length):c.bytes===Array?Array.prototype.slice.call(a.value):a.value),a.timeReceived!=null&&a.hasOwnProperty("timeReceived")&&(d.timeReceived=a.timeReceived),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_utils3=__commonJS({"node_modules/libp2p-record/src/utils.js"(e,o){init_node_globals(),o.exports.toRFC3339=r=>{const t=r.getUTCFullYear(),n=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),u=String(r.getUTCHours()).padStart(2,"0"),l=String(r.getUTCMinutes()).padStart(2,"0"),f=String(r.getUTCSeconds()).padStart(2,"0"),c=r.getUTCMilliseconds()*1e3*1e3;return`${t}-${n}-${s}T${u}:${l}:${f}.${c}Z`},o.exports.parseRFC3339=r=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(r).trim().match(t);if(!n)throw new Error("Invalid format");const s=parseInt(n[1],10),u=parseInt(n[2],10)-1,l=parseInt(n[3],10),f=parseInt(n[4],10),a=parseInt(n[5],10),c=parseInt(n[6],10),d=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(s,u,l,f,a,c,d))}}}),require_record2=__commonJS({"node_modules/libp2p-record/src/record/index.js"(e,o){init_node_globals();var{Record:r}=require_record(),t=require_utils3(),n=class{constructor(s,u,l){if(!(s instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(u instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=s,this.value=u,this.timeReceived=l}serialize(){return r.encode(this.prepareSerialize()).finish()}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&t.toRFC3339(this.timeReceived)}}static deserialize(s){const u=r.decode(s);return n.fromDeserialized(r.toObject(u,{defaults:!1,arrays:!0,longs:Number,objects:!1}))}static fromDeserialized(s){let u;return s.timeReceived&&(u=t.parseRFC3339(s.timeReceived)),new n(s.key,s.value,u)}};o.exports=n}}),require_public_key=__commonJS({"node_modules/libp2p-record/src/validators/public-key.js"(e,o){init_node_globals();var{sha256:r}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),t=require_err_code(),{toString:n}=(init_to_string(),__toCommonJS(to_string_exports)),{equals:s}=(init_equals(),__toCommonJS(equals_exports)),u=async(l,f)=>{if(!(l instanceof Uint8Array))throw t(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(l.byteLength<5)throw t(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if(n(l.subarray(0,4))!=="/pk/")throw t(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const c=l.slice(4),d=await r.digest(f);if(!s(c,d.bytes))throw t(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")};o.exports={func:u,sign:!1}}}),require_validators=__commonJS({"node_modules/libp2p-record/src/validators/index.js"(e,o){init_node_globals(),o.exports={pk:require_public_key()}}}),require_validator=__commonJS({"node_modules/libp2p-record/src/validator.js"(e,o){init_node_globals();var r=require_err_code(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),n=(s,u)=>{const l=u.key,a=t(l).split("/");if(a.length<3)return;const c=s[a[1].toString()];if(!c){const d="Invalid record keytype";throw r(new Error(d),"ERR_INVALID_RECORD_KEY_TYPE")}return c.func(l,u.value)};o.exports={verifyRecord:n,validators:require_validators()}}}),require_public_key2=__commonJS({"node_modules/libp2p-record/src/selectors/public-key.js"(e,o){init_node_globals();var r=(t,n)=>0;o.exports=r}}),require_selectors=__commonJS({"node_modules/libp2p-record/src/selectors/index.js"(e,o){init_node_globals(),o.exports={pk:require_public_key2()}}}),require_selection=__commonJS({"node_modules/libp2p-record/src/selection.js"(e,o){init_node_globals();var r=require_err_code(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),n=(s,u,l)=>{if(l.length===0){const d="No records given";throw r(new Error(d),"ERR_NO_RECORDS_RECEIVED")}const a=t(u).split("/");if(a.length<3){const d="Record key does not have a selector function";throw r(new Error(d),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const c=s[a[1].toString()];if(!c){const d=`Unrecognized key prefix: ${a[1]}`;throw r(new Error(d),"ERR_UNRECOGNIZED_KEY_PREFIX")}return l.length===1?0:c(u,l)};o.exports={bestRecord:n,selectors:require_selectors()}}}),require_src7=__commonJS({"node_modules/libp2p-record/src/index.js"(e,o){init_node_globals(),o.exports={Record:require_record2(),validator:require_validator(),selection:require_selection()}}}),require_offline_datastore=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/routing/offline-datastore.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_key(),__toCommonJS(key_exports)),r=require_src7(),t=require_err_code(),n=require_browser2(),s=(init_to_string(),__toCommonJS(to_string_exports));function u(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var l=u(t),f=u(n),a=Object.assign(f.default("ipfs:ipns:offline-datastore"),{error:f.default("ipfs:ipns:offline-datastore:error")}),c=class{constructor(d){this._repo=d,this.stores=[]}async put(d,h){if(!(d instanceof Uint8Array))throw l.default(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(h instanceof Uint8Array))throw l.default(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let g;try{g=this._routingKey(d)}catch(_){throw a.error(_),l.default(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const p=new r.Record(d,h);return this._repo.datastore.put(g,p.serialize())}async get(d){if(!(d instanceof Uint8Array))throw l.default(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let h;try{h=this._routingKey(d)}catch(_){throw a.error(_),l.default(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const g=await this._repo.datastore.get(h);let p;try{p=r.Record.deserialize(g)}catch(_){throw a.error(_),_}return p.value}_routingKey(d){return new o.Key("/dht/record/"+s.toString(d,"base32"),!1)}};e.OfflineDatastore=c}}),require_dht_datastore=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/routing/dht-datastore.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_it_drain(),r=(init_errors2(),__toCommonJS(errors_exports)),t=require_browser2();function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=n(o),u=n(t),l=Object.assign(u.default("ipfs:ipns:dht-datastore"),{error:u.default("ipfs:ipns:dht-datastore:error")}),f=class{constructor(a){this._dht=a}async put(a,c){try{await s.default(this._dht.put(a,c))}catch(d){throw l.error(d),d}}async get(a){for await(const c of this._dht.get(a))if(c.name==="VALUE")return c.value;throw r.notFoundError()}};e.DHTDatastore=f}}),require_config=__commonJS({"node_modules/ipfs-core/cjs/src/ipns/routing/config.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_tiered(),__toCommonJS(tiered_exports)),r=require_dlv_umd(),t=require_pubsub_datastore(),n=require_offline_datastore(),s=require_dht_datastore();function u(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var l=u(r);function f({libp2p:a,repo:c,peerId:d,options:h}){const g=[];let p;if(l.default(h,"EXPERIMENTAL.ipnsPubsub",!1)){const _=a.pubsub,m=c.datastore;p=new t.IpnsPubsubDatastore(_,m,d),g.push(p)}if(!l.default(h,"offline",!1)&&a._config&&a._config.dht&&a._config.dht.enabled&&g.push(new s.DHTDatastore(a._dht)),l.default(h,"offline",!1)||g.length===0){const _=new n.OfflineDatastore(c);g.push(_)}return new o.TieredDatastore(g)}e.createRouting=f}}),require_ipns2=__commonJS({"node_modules/ipfs-core/cjs/src/components/ipns.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_ipns(),r=require_config(),t=require_offline_datastore(),n=require_errors(),s=require_browser2();function u(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var l=u(s),f=l.default("ipfs:components:ipns"),a=class{constructor(c={pass:""}){this.options=c,this.offline=null,this.online=null}getIPNS(){const c=this.online||this.offline;if(c)return c;throw new n.NotInitializedError}get routing(){return this.getIPNS().routing}startOffline({repo:c,peerId:d,keychain:h}){if(this.offline!=null)throw new n.AlreadyInitializedError;f("initializing IPNS keyspace");const g=new t.OfflineDatastore(c),p=new o.IPNS(g,c.datastore,d,h,this.options);this.offline=p}async startOnline({libp2p:c,repo:d,peerId:h,keychain:g}){if(this.online!=null)throw new n.AlreadyInitializedError;const p=r.createRouting({libp2p:c,repo:d,peerId:h,options:this.options}),_=new o.IPNS(p,d.datastore,h,g,this.options);await _.republisher.start(),this.online=_}async stop(){const c=this.online;c&&(await c.republisher.stop(),this.online=null)}publish(c,d,h){return this.getIPNS().publish(c,d,h)}resolve(c,d){return this.getIPNS().resolve(c,d)}initializeKeyspace(c,d){return this.getIPNS().initializeKeyspace(c,d)}};e.IPNSAPI=a}}),require_parse_duration=__commonJS({"node_modules/parse-duration/index.js"(e,o){init_node_globals();var r=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;o.exports=t,o.exports.default=t,t.nanosecond=t.ns=1/1e6,t.\u00B5s=t.\u03BCs=t.us=t.microsecond=1/1e3,t.millisecond=t.ms=t[""]=1,t.second=t.sec=t.s=t.ms*1e3,t.minute=t.min=t.m=t.s*60,t.hour=t.hr=t.h=t.m*60,t.day=t.d=t.h*24,t.week=t.wk=t.w=t.d*7,t.month=t.b=t.d*(365.25/12),t.year=t.yr=t.y=t.d*365.25;function t(s="",u="ms"){var l=null;return s=(s+"").replace(/(\d)[,_](\d)/g,"$1$2"),s.replace(r,function(f,a,c){c=n(c),c&&(l=(l||0)+parseFloat(a,10)*c)}),l&&l/(n(u)||1)}function n(s){return t[s]||t[s.toLowerCase().replace(/s$/,"")]}}}),require_utils4=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src3(),r=(init_to_cid_and_path(),__toCommonJS(to_cid_and_path_exports)),t=require_it_drain(),n=require_utils2();function s(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var u=s(o),l=s(t);async function f({ipns:a,repo:c,codecs:d},h,g){if(u.default.ipnsPath(h))return a.resolve(h);const{cid:p,path:_}=r.toCidAndPath(h);await l.default(n.resolve(p,_||"",d,c,g))}e.resolvePath=f}}),require_publish=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/publish.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=require_parse_duration(),t=require_src6(),n=require_err_code(),s=(init_from_string(),__toCommonJS(from_string_exports)),u=(init_to_string(),__toCommonJS(to_string_exports)),l=require_utils2(),f=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),a=require_utils4();function c(v){return v&&typeof v=="object"&&"default"in v?v:{default:v}}var d=c(o),h=c(r),g=c(t),p=c(n),_=Object.assign(d.default("ipfs:name:publish"),{error:d.default("ipfs:name:publish:error")});function m({ipns:v,repo:w,codecs:y,peerId:b,isOnline:T,keychain:R}){const S=async A=>{if(A==="self")return b.privKey;try{const C=await R.exportKey(A,"temp");return await g.default.keys.import(C,"temp")}catch(C){throw _.error(C),p.default(C,"ERR_CANNOT_GET_KEY")}};async function E(A,C={}){const I=C.resolve!==!1,P=C.lifetime||"24h",O=C.key||"self";if(!T())throw p.default(new Error(l.OFFLINE_ERROR),"OFFLINE_ERROR");try{A=l.normalizePath(A)}catch(L){throw _.error(L),L}let k=0;try{k=h.default(P)||0,k=parseFloat(k.toFixed(6))}catch(L){throw _.error(L),L}const N=await Promise.all([S(O),I?a.resolvePath({ipns:v,repo:w,codecs:y},A):Promise.resolve()]),K=s.fromString(A),U=await v.publish(N[0],K,k);return{name:U.name,value:u.toString(U.value)}}return f.withTimeoutOption(E)}e.createPublish=m}}),require_is_domain_name=__commonJS({"node_modules/is-domain-name/index.js"(e,o){init_node_globals();var r=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;o.exports=function(n,s){if(s==null&&(s=!1),n.length<2||n.length>255)return!1;var u=n[n.length-1];if(s){if(u!==".")return!1}else if(u===".")return!1;return r.test(n)}}}),require_resolve2=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/resolve.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=require_err_code(),t=require_merge_options(),n=(init_cid(),__toCommonJS(cid_exports)),s=(init_digest(),__toCommonJS(digest_exports)),u=(init_base36(),__toCommonJS(base36_exports)),l=require_src5(),f=require_is_domain_name(),a=(init_to_string(),__toCommonJS(to_string_exports)),c=require_utils2(),d=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function h(E){return E&&typeof E=="object"&&"default"in E?E:{default:E}}function g(E){if(E&&E.__esModule)return E;var A=Object.create(null);return E&&Object.keys(E).forEach(function(C){if(C!=="default"){var I=Object.getOwnPropertyDescriptor(E,C);Object.defineProperty(A,C,I.get?I:{enumerable:!0,get:function(){return E[C]}})}}),A.default=E,Object.freeze(A)}var p=h(o),_=h(r),m=h(t),v=g(s),w=h(l),y=h(f),b=m.default.bind({ignoreUndefined:!0}),T=Object.assign(p.default("ipfs:name:resolve"),{error:p.default("ipfs:name:resolve:error")}),R=(E,A)=>A.length>0?E+"/"+A.join("/"):E;function S({dns:E,ipns:A,peerId:C,isOnline:I,options:{offline:P}}){async function*O(k,N={}){if(N=b({nocache:!1,recursive:!0},N),P&&N&&N.nocache)throw _.default(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!I()&&!P)throw _.default(new Error(c.OFFLINE_ERROR),"OFFLINE_ERROR");k||(k=C.toB58String()),k.startsWith("/ipns/")||(k=`/ipns/${k}`);let[K,U,...L]=k.slice(1).split("/");try{if(U.substring(0,1)==="1"){const Z=w.default.parse(U),V=v.decode(Z.toBytes());U=n.CID.createV1(114,V).toString(u.base36)}else{const Z=n.CID.parse(U);Z.version===1&&(U=Z.toString(u.base36))}}catch(Z){if(y.default(U)){yield R(await E(U,N),L);return}throw T.error(Z),_.default(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const re=await A.resolve(`/${K}/${U}`,N);yield R(re instanceof Uint8Array?a.toString(re):re,L)}return d.withTimeoutOption(O)}e.createResolve=S}}),require_utils5=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/pubsub/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_pubsub_datastore(),r=require_err_code();function t(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var n=t(r);function s(u,l){if(!u||!(l&&l.ipnsPubsub))throw n.default(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(u.routing instanceof o.IpnsPubsubDatastore)return u.routing;const f=(u.routing.stores||[]).find(a=>a instanceof o.IpnsPubsubDatastore);if(!f)throw n.default(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return f}e.getPubsubRouting=s}}),require_cancel=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/pubsub/cancel.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils5(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({ipns:n,options:s}){const u=s.EXPERIMENTAL;async function l(f,a={}){return o.getPubsubRouting(n,u).cancel(f,a)}return r.withTimeoutOption(l)}e.createCancel=t}}),require_state=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/pubsub/state.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils5(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({ipns:n,options:s}){const u=s.EXPERIMENTAL;async function l(f={}){try{return{enabled:Boolean(o.getPubsubRouting(n,u))}}catch{return{enabled:!1}}}return r.withTimeoutOption(l)}e.createState=t}}),require_subs=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/pubsub/subs.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils5(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({ipns:n,options:s}){const u=s.EXPERIMENTAL;async function l(f={}){return o.getPubsubRouting(n,u).getSubscriptions(f)}return r.withTimeoutOption(l)}e.createSubs=t}}),require_pubsub=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/pubsub/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_cancel(),r=require_state(),t=require_subs(),n=class{constructor({ipns:s,options:u}){this.cancel=o.createCancel({ipns:s,options:u}),this.state=r.createState({ipns:s,options:u}),this.subs=t.createSubs({ipns:s,options:u})}};e.PubSubAPI=n}}),require_name=__commonJS({"node_modules/ipfs-core/cjs/src/components/name/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_publish(),r=require_resolve2(),t=require_pubsub(),n=class{constructor({dns:s,ipns:u,repo:l,codecs:f,peerId:a,isOnline:c,keychain:d,options:h}){this.publish=o.createPublish({ipns:u,repo:l,codecs:f,peerId:a,isOnline:c,keychain:d}),this.resolve=r.createResolve({dns:s,ipns:u,peerId:a,isOnline:c,options:h}),this.pubsub=new t.PubSubAPI({ipns:u,options:h})}};e.NameAPI=n}}),require_refs=__commonJS({"node_modules/ipfs-core/cjs/src/components/refs/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_errors2(),__toCommonJS(errors_exports)),t=(init_to_cid_and_path(),__toCommonJS(to_cid_and_path_exports)),n=(init_cid(),__toCommonJS(cid_exports)),s=require_timeout_abort_controller(),u=require_any_signal();function l(w){if(w&&w.__esModule)return w;var y=Object.create(null);return w&&Object.keys(w).forEach(function(b){if(b!=="default"){var T=Object.getOwnPropertyDescriptor(w,b);Object.defineProperty(y,b,T.get?T:{enumerable:!0,get:function(){return w[b]}})}}),y.default=w,Object.freeze(y)}var f=l(o),a=r.notFoundError().code,c={default:"<dst>",edges:"<src> -> <dst>"};function d({repo:w,codecs:y,resolve:b,preload:T}){async function*R(S,E={}){if(E.maxDepth===0)return;if(E.edges&&E.format&&E.format!==c.default)throw new Error("Cannot set edges to true and also specify format");if(E.format=E.edges?c.edges:E.format,typeof E.maxDepth!="number"&&(E.maxDepth=E.recursive?1/0:1),E.timeout){const P=[new s.TimeoutController(E.timeout).signal];E.signal&&P.push(E.signal),E.signal=u.anySignal(P)}const C=(Array.isArray(S)?S:[S]).map(I=>h(T,I,E));for(const I of C)try{yield*g(b,w,y,I,E)}catch(P){yield{ref:"",err:P.message}}}return R}function h(w,y,b){const{cid:T,path:R}=t.toCidAndPath(y);return b.preload!==!1&&w(T),`/ipfs/${T}${R||""}`}async function*g(w,y,b,T,R){const S=await w(T,R),{cid:E}=t.toCidAndPath(S),A=R.maxDepth!=null?R.maxDepth:1/0,C=R.unique||!1;for await(const I of _(y,b,E,A,C,R))!I.parent||I.isDuplicate||(yield{ref:p(I.parent.cid,I.node.cid,I.node.name,R.format)})}function p(w,y,b="",T=c.default){let R=T.replace(/<src>/g,w.toString());return R=R.replace(/<dst>/g,y.toString()),R=R.replace(/<linkname>/g,b),R}async function*_(w,y,b,T,R,S){const E=new Set;async function*A(C,I){const P=I+1;if(!(P>T))try{for await(const O of m(w,y,C.cid,S))yield{parent:C,node:O,isDuplicate:R&&E.has(O.cid.toString())},R&&E.add(O.cid.toString()),yield*A(O,P)}catch(O){throw O.code===a&&(O.message=`Could not find object with CID: ${C.cid}`),O}}yield*A({cid:b},0)}async function*m(w,y,b,T){const R=await w.blocks.get(b,T),E=(await y.getCodec(b.code)).decode(R),A=b.code===f.code,C=[];for(const[I,P]of v(E,C)){if(A){const O=I.match(/^Links\/(\d+)\/Hash$/);if(O){const k=Number(O[1]);if(k<E.Links.length){yield{name:E.Links[k].Name,cid:P};continue}}}yield{name:I,cid:P}}}var v=function*(w,y){if(w!=null&&!(w instanceof Uint8Array)){for(const[b,T]of Object.entries(w)){const R=[...y,b];if(T!=null&&typeof T=="object")if(Array.isArray(T))for(const[S,E]of T.entries()){const A=[...R,S],C=n.CID.asCID(E);C?yield[A.join("/"),C]:typeof E=="object"&&(yield*v(E,A))}else{const S=n.CID.asCID(T);S?yield[R.join("/"),S]:yield*v(T,R)}}return[]}};e.Format=c,e.createRefs=d}}),require_local=__commonJS({"node_modules/ipfs-core/cjs/src/components/refs/local.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({repo:t}){async function*n(s={}){for await(const u of t.blocks.queryKeys({},{signal:s.signal}))yield{ref:u.toString()}}return o.withTimeoutOption(n)}e.createLocal=r}}),require_wantlist=__commonJS({"node_modules/ipfs-core/cjs/src/components/bitswap/wantlist.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s={}){const{bitswap:u}=await t.use(s),l=u.getWantlist();return Array.from(l).map(f=>f[1].cid)}return o.withTimeoutOption(n)}e.createWantlist=r}}),require_wantlist_for_peer=__commonJS({"node_modules/ipfs-core/cjs/src/components/bitswap/wantlist-for-peer.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src5(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var n=t(o);function s({network:u}){async function l(f,a={}){const{bitswap:c}=await u.use(a),d=c.wantlistForPeer(n.default.createFromB58String(f));return Array.from(d).map(h=>h[1].cid)}return r.withTimeoutOption(l)}e.createWantlistForPeer=s}}),require_unwant=__commonJS({"node_modules/ipfs-core/cjs/src/components/bitswap/unwant.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s,u={}){const{bitswap:l}=await t.use(u);return Array.isArray(s)||(s=[s]),l.unwant(s)}return o.withTimeoutOption(n)}e.createUnwant=r}}),require_stat=__commonJS({"node_modules/ipfs-core/cjs/src/components/bitswap/stat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s={}){const u=(await t.use(s)).bitswap,l=u.stat().snapshot;return{provideBufLen:parseInt(l.providesBufferLength.toString()),blocksReceived:BigInt(l.blocksReceived.toString()),wantlist:Array.from(u.getWantlist()).map(f=>f[1].cid),peers:u.peers().map(f=>f.toB58String()),dupBlksReceived:BigInt(l.dupBlksReceived.toString()),dupDataReceived:BigInt(l.dupDataReceived.toString()),dataReceived:BigInt(l.dataReceived.toString()),blocksSent:BigInt(l.blocksSent.toString()),dataSent:BigInt(l.dataSent.toString())}}return o.withTimeoutOption(n)}e.createStat=r}}),require_bitswap=__commonJS({"node_modules/ipfs-core/cjs/src/components/bitswap/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_wantlist(),r=require_wantlist_for_peer(),t=require_unwant(),n=require_stat(),s=class{constructor({network:u}){this.wantlist=o.createWantlist({network:u}),this.wantlistForPeer=r.createWantlistForPeer({network:u}),this.unwant=t.createUnwant({network:u}),this.stat=n.createStat({network:u})}};e.BitswapAPI=s}}),require_utils6=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src2();function r(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var t=r(o);function n(s){try{return t.default.IPFS.matches(s)}catch{return!1}}e.isValidMultiaddr=n}}),require_add2=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/add.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils6(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({repo:n}){async function s(u,l={}){if(!o.isValidMultiaddr(u))throw new Error(`${u} is not a valid Multiaddr`);const f=await n.config.getAll(l),a=f.Bootstrap||[];return a.push(u.toString()),f.Bootstrap=Array.from(new Set(a)).sort((c,d)=>c.localeCompare(d)),await n.config.replace(f),{Peers:[u]}}return r.withTimeoutOption(s)}e.createAdd=t}}),require_clear=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/clear.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_src();function t({repo:n}){async function s(u={}){const l=await n.config.getAll(u),f=l.Bootstrap||[];return l.Bootstrap=[],await n.config.replace(l),{Peers:f.map(a=>new r.Multiaddr(a))}}return o.withTimeoutOption(s)}e.createClear=t}}),require_list=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/list.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_src();function t({repo:n}){async function s(u={}){return{Peers:(await n.config.get("Bootstrap",u)||[]).map(f=>new r.Multiaddr(f))}}return o.withTimeoutOption(s)}e.createList=t}}),config_browser_exports={};__export(config_browser_exports,{default:()=>config_browser_default});var config_browser_default,init_config_browser=__esm({"node_modules/ipfs-core-config/esm/src/config.browser.js"(){init_node_globals(),config_browser_default=()=>({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}})}}),require_reset=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/reset.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_config_browser(),__toCommonJS(config_browser_exports)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=require_src();function n(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var s=n(o);function u({repo:l}){async function f(a={}){const c=await l.config.getAll(a);return c.Bootstrap=s.default().Bootstrap,await l.config.replace(c),{Peers:s.default().Bootstrap.map(d=>new t.Multiaddr(d))}}return r.withTimeoutOption(f)}e.createReset=u}}),require_rm2=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/rm.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils6(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({repo:n}){async function s(u,l={}){if(!o.isValidMultiaddr(u))throw new Error(`${u} is not a valid Multiaddr`);const f=await n.config.getAll(l);return f.Bootstrap=(f.Bootstrap||[]).filter(a=>a.toString()!==u.toString()),await n.config.replace(f),{Peers:[u]}}return r.withTimeoutOption(s)}e.createRm=t}}),require_bootstrap=__commonJS({"node_modules/ipfs-core/cjs/src/components/bootstrap/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_add2(),r=require_clear(),t=require_list(),n=require_reset(),s=require_rm2(),u=class{constructor({repo:l}){this.add=o.createAdd({repo:l}),this.list=t.createList({repo:l}),this.rm=s.createRm({repo:l}),this.clear=r.createClear({repo:l}),this.reset=n.createReset({repo:l})}};e.BootstrapAPI=u}}),require_get=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/get.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({preload:t,repo:n}){async function s(u,l={}){return l.preload!==!1&&t(u),n.blocks.get(u,l)}return o.withTimeoutOption(s)}e.createGet=r}}),require_put=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/put.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({codecs:n,hashers:s,repo:u,preload:l}){async function f(a,c={}){const d=c.pin?await u.gcLock.readLock():null;try{const h=c.version!=null?c.version:0,g=c.format||(h===0?"dag-pb":"raw"),_=await(await s.getHasher(c.mhtype||"sha2-256")).digest(a),m=await n.getCodec(g),v=o.CID.create(h,m.code,_);return await u.blocks.put(v,a,{signal:c.signal}),c.preload!==!1&&l(v),c.pin===!0&&await u.pins.pinRecursively(v,{signal:c.signal}),v}finally{d&&d()}}return r.withTimeoutOption(f)}e.createPut=t}}),require_p_defer=__commonJS({"node_modules/p-defer/index.js"(e,o){init_node_globals();var r=()=>{const t={};return t.promise=new Promise((n,s)=>{t.resolve=n,t.reject=s}),t};o.exports=r}}),require_events=__commonJS({"node_modules/events/events.js"(e,o){init_node_globals();var r=typeof Reflect=="object"?Reflect:null,t=r&&typeof r.apply=="function"?r.apply:function(S,E,A){return Function.prototype.apply.call(S,E,A)},n;r&&typeof r.ownKeys=="function"?n=r.ownKeys:Object.getOwnPropertySymbols?n=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:n=function(S){return Object.getOwnPropertyNames(S)};function s(R){console&&console.warn&&console.warn(R)}var u=Number.isNaN||function(S){return S!==S};function l(){l.init.call(this)}o.exports=l,o.exports.once=y,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var f=10;function a(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(R){if(typeof R!="number"||R<0||u(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");f=R}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||u(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function c(R){return R._maxListeners===void 0?l.defaultMaxListeners:R._maxListeners}l.prototype.getMaxListeners=function(){return c(this)},l.prototype.emit=function(S){for(var E=[],A=1;A<arguments.length;A++)E.push(arguments[A]);var C=S==="error",I=this._events;if(I!==void 0)C=C&&I.error===void 0;else if(!C)return!1;if(C){var P;if(E.length>0&&(P=E[0]),P instanceof Error)throw P;var O=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw O.context=P,O}var k=I[S];if(k===void 0)return!1;if(typeof k=="function")t(k,this,E);else for(var N=k.length,K=m(k,N),A=0;A<N;++A)t(K[A],this,E);return!0};function d(R,S,E,A){var C,I,P;if(a(E),I=R._events,I===void 0?(I=R._events=Object.create(null),R._eventsCount=0):(I.newListener!==void 0&&(R.emit("newListener",S,E.listener?E.listener:E),I=R._events),P=I[S]),P===void 0)P=I[S]=E,++R._eventsCount;else if(typeof P=="function"?P=I[S]=A?[E,P]:[P,E]:A?P.unshift(E):P.push(E),C=c(R),C>0&&P.length>C&&!P.warned){P.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=R,O.type=S,O.count=P.length,s(O)}return R}l.prototype.addListener=function(S,E){return d(this,S,E,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(S,E){return d(this,S,E,!0)};function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(R,S,E){var A={fired:!1,wrapFn:void 0,target:R,type:S,listener:E},C=h.bind(A);return C.listener=E,A.wrapFn=C,C}l.prototype.once=function(S,E){return a(E),this.on(S,g(this,S,E)),this},l.prototype.prependOnceListener=function(S,E){return a(E),this.prependListener(S,g(this,S,E)),this},l.prototype.removeListener=function(S,E){var A,C,I,P,O;if(a(E),C=this._events,C===void 0)return this;if(A=C[S],A===void 0)return this;if(A===E||A.listener===E)--this._eventsCount==0?this._events=Object.create(null):(delete C[S],C.removeListener&&this.emit("removeListener",S,A.listener||E));else if(typeof A!="function"){for(I=-1,P=A.length-1;P>=0;P--)if(A[P]===E||A[P].listener===E){O=A[P].listener,I=P;break}if(I<0)return this;I===0?A.shift():v(A,I),A.length===1&&(C[S]=A[0]),C.removeListener!==void 0&&this.emit("removeListener",S,O||E)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(S){var E,A,C;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete A[S]),this;if(arguments.length===0){var I=Object.keys(A),P;for(C=0;C<I.length;++C)P=I[C],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=A[S],typeof E=="function")this.removeListener(S,E);else if(E!==void 0)for(C=E.length-1;C>=0;C--)this.removeListener(S,E[C]);return this};function p(R,S,E){var A=R._events;if(A===void 0)return[];var C=A[S];return C===void 0?[]:typeof C=="function"?E?[C.listener||C]:[C]:E?w(C):m(C,C.length)}l.prototype.listeners=function(S){return p(this,S,!0)},l.prototype.rawListeners=function(S){return p(this,S,!1)},l.listenerCount=function(R,S){return typeof R.listenerCount=="function"?R.listenerCount(S):_.call(R,S)},l.prototype.listenerCount=_;function _(R){var S=this._events;if(S!==void 0){var E=S[R];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function m(R,S){for(var E=new Array(S),A=0;A<S;++A)E[A]=R[A];return E}function v(R,S){for(;S+1<R.length;S++)R[S]=R[S+1];R.pop()}function w(R){for(var S=new Array(R.length),E=0;E<S.length;++E)S[E]=R[E].listener||R[E];return S}function y(R,S){return new Promise(function(E,A){function C(P){R.removeListener(S,I),A(P)}function I(){typeof R.removeListener=="function"&&R.removeListener("error",C),E([].slice.call(arguments))}T(R,S,I,{once:!0}),S!=="error"&&b(R,C,{once:!0})})}function b(R,S,E){typeof R.on=="function"&&T(R,"error",S,E)}function T(R,S,E,A){if(typeof R.on=="function")A.once?R.once(S,E):R.on(S,E);else if(typeof R.addEventListener=="function")R.addEventListener(S,function C(I){A.once&&R.removeEventListener(S,C),E(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}}}),require_it_parallel=__commonJS({"node_modules/it-parallel/index.js"(e,o){init_node_globals();var r=require_p_defer(),t=require_events().EventEmitter;async function*n(s,u={}){let l=u.concurrency||1/0;l<1&&(l=1/0);const f=u.ordered==null?!1:u.ordered,a=new t,c=[];let d=r(),h=r(),g=!1,p,_=!1;a.on("task-complete",()=>{h.resolve()}),Promise.resolve().then(async()=>{try{for await(const y of s){if(c.length===l&&(d=r(),await d.promise),_)break;const b={done:!1};c.push(b),y().then(T=>{b.done=!0,b.ok=!0,b.value=T,a.emit("task-complete")},T=>{b.done=!0,b.err=T,a.emit("task-complete")})}g=!0,a.emit("task-complete")}catch(y){p=y,a.emit("task-complete")}});function m(){return Boolean(f?c[0]&&c[0].done:c.find(y=>y.done))}function*v(){for(;c.length&&c[0].done;){const y=c[0];if(c.shift(),y.ok)yield y.value;else throw _=!0,d.resolve(),y.err;d.resolve()}}function*w(){for(;m();)for(let y=0;y<c.length;y++)if(c[y].done){const b=c[y];if(c.splice(y,1),y--,b.ok)yield b.value;else throw _=!0,d.resolve(),b.err;d.resolve()}}for(;;){if(m()||(h=r(),await h.promise),p)throw p;if(f?yield*v():yield*w(),g&&c.length===0)break}}o.exports=n}}),require_utils7=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports));function r(t){return t instanceof Uint8Array?o.CID.decode(t):o.CID.parse(t.toString())}e.cleanCid=r}}),require_rm3=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/rm.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_err_code(),r=require_it_parallel(),t=require_it_map(),n=require_it_filter(),s=require_it_pipe(),u=require_utils7(),l=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function f(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var a=f(o),c=f(r),d=f(t),h=f(n),g=8;function p({repo:_}){async function*m(v,w={}){Array.isArray(v)||(v=[v]);const y=await _.gcLock.writeLock();try{yield*s.pipe(v,b=>d.default(b,T=>async()=>{T=u.cleanCid(T);const R={cid:T};try{if(!await _.blocks.has(T))throw a.default(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await _.blocks.delete(T)}catch(S){w.force||(S.message=`cannot remove ${T}: ${S.message}`,R.error=S)}return R}),b=>c.default(b,{concurrency:g}),b=>h.default(b,()=>!w.quiet))}finally{y()}}return l.withTimeoutOption(m)}e.createRm=p}}),require_stat2=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/stat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_utils7(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({repo:n,preload:s}){async function u(l,f={}){l=o.cleanCid(l),f.preload!==!1&&s(l);const a=await n.blocks.get(l);return{cid:l,size:a.length}}return r.withTimeoutOption(u)}e.createStat=t}}),require_block=__commonJS({"node_modules/ipfs-core/cjs/src/components/block/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_get(),r=require_put(),t=require_rm3(),n=require_stat2(),s=class{constructor({codecs:u,hashers:l,preload:f,repo:a}){this.get=o.createGet({preload:f,repo:a}),this.put=r.createPut({codecs:u,hashers:l,preload:f,repo:a}),this.rm=t.createRm({repo:a}),this.stat=n.createStat({preload:f,repo:a})}};e.BlockAPI=s}}),require_browser_readablestream_to_it=__commonJS({"node_modules/browser-readablestream-to-it/index.js"(e,o){init_node_globals();async function*r(t,n={}){const s=t.getReader();try{for(;;){const u=await s.read();if(u.done)return;yield u.value}}finally{n.preventCancel!==!0&&s.cancel(),s.releaseLock()}}o.exports=r}}),require_blob_to_it=__commonJS({"node_modules/blob-to-it/index.js"(e,o){init_node_globals();var r=require_browser_readablestream_to_it();function t(n){return typeof n.stream=="function"?r(n.stream()):r(new Response(n).body)}o.exports=t}}),require_it_peekable=__commonJS({"node_modules/it-peekable/index.js"(e,o){init_node_globals();function r(t){const[n,s]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],u=[];return{peek:()=>n.next(),push:l=>{u.push(l)},next:()=>u.length?{done:!1,value:u.shift()}:n.next(),[s](){return this}}}o.exports=r}});function isBytes(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function isBlob(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function isFileObject(e){return typeof e=="object"&&(e.path||e.content)}var isReadableStream,init_utils4=__esm({"node_modules/ipfs-core-utils/esm/src/files/utils.js"(){init_node_globals(),isReadableStream=e=>e&&typeof e.getReader=="function"}});async function*toAsyncIterable(e){yield e}async function normaliseContent(e){if(isBytes(e))return toAsyncIterable(toBytes(e));if(typeof e=="string"||e instanceof String)return toAsyncIterable(toBytes(e.toString()));if(isBlob(e))return(0,import_blob_to_it.default)(e);if(isReadableStream(e)&&(e=(0,import_browser_readablestream_to_it.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const o=(0,import_it_peekable.default)(e),{value:r,done:t}=await o.peek();if(t)return toAsyncIterable(new Uint8Array(0));if(o.push(r),Number.isInteger(r))return toAsyncIterable(Uint8Array.from(await(0,import_it_all2.default)(o)));if(isBytes(r)||typeof r=="string"||r instanceof String)return(0,import_it_map2.default)(o,toBytes)}throw(0,import_err_code8.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function toBytes(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):fromString3(e.toString())}var import_err_code8,import_browser_readablestream_to_it,import_blob_to_it,import_it_peekable,import_it_all2,import_it_map2,init_normalise_content=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-content.js"(){init_node_globals(),import_err_code8=__toESM(require_err_code(),1),init_from_string(),import_browser_readablestream_to_it=__toESM(require_browser_readablestream_to_it(),1),import_blob_to_it=__toESM(require_blob_to_it(),1),import_it_peekable=__toESM(require_it_peekable(),1),import_it_all2=__toESM(require_it_all(),1),import_it_map2=__toESM(require_it_map(),1),init_utils4()}});async function*normaliseCandidateSingle(e,o){if(e==null)throw(0,import_err_code9.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield toFileObject(e.toString(),o);return}if(isBytes(e)||isBlob(e)){yield toFileObject(e,o);return}if(isReadableStream(e)&&(e=(0,import_browser_readablestream_to_it2.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=(0,import_it_peekable2.default)(e),{value:t,done:n}=await r.peek();if(n){yield{content:[]};return}if(r.push(t),Number.isInteger(t)||isBytes(t)||typeof t=="string"||t instanceof String){yield toFileObject(r,o);return}throw(0,import_err_code9.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(e)){yield toFileObject(e,o);return}throw(0,import_err_code9.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject(e,o){const{path:r,mode:t,mtime:n,content:s}=e,u={path:r||"",mode:parseMode(t),mtime:parseMtime(n)};return s?u.content=await o(s):r||(u.content=await o(e)),u}var import_err_code9,import_browser_readablestream_to_it2,import_it_peekable2,init_normalise_candidate_single=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-candidate-single.js"(){init_node_globals(),import_err_code9=__toESM(require_err_code(),1),import_browser_readablestream_to_it2=__toESM(require_browser_readablestream_to_it(),1),import_it_peekable2=__toESM(require_it_peekable(),1),init_utils4(),init_src()}}),normalise_input_single_exports={};__export(normalise_input_single_exports,{normaliseInput:()=>normaliseInput2});function normaliseInput2(e){return normaliseCandidateSingle(e,normaliseContent)}var init_normalise_input_single=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-input-single.js"(){init_node_globals(),init_normalise_content(),init_normalise_candidate_single()}}),require_add3=__commonJS({"node_modules/ipfs-core/cjs/src/components/add.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_it_last(),r=(init_normalise_input_single(),__toCommonJS(normalise_input_single_exports));function t(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var n=t(o);function s({addAll:u}){async function l(f,a={}){const c=await n.default(u(r.normaliseInput(f),a));if(c==null)throw Error("Failed to add a file, if you see this please report a bug");return c}return l}e.createAdd=s}}),require_it_batch=__commonJS({"node_modules/it-batch/index.js"(e,o){init_node_globals();async function*r(t,n=1){let s=[];n<1&&(n=1);for await(const u of t)for(s.push(u);s.length>=n;)yield s.slice(0,n),s=s.slice(n);for(;s.length;)yield s.slice(0,n),s=s.slice(n)}o.exports=r}}),require_it_parallel_batch=__commonJS({"node_modules/it-parallel-batch/index.js"(e,o){init_node_globals();var r=require_it_batch();async function*t(n,s=1){for await(const u of r(n,s)){const l=u.map(f=>f().then(a=>({ok:!0,value:a}),a=>({ok:!1,err:a})));for(let f=0;f<l.length;f++){const a=await l[f];if(a.ok)yield a.value;else throw a.err}}}o.exports=t}}),import_index2,merge_options_default,init_merge_options=__esm({"node_modules/merge-options/index.mjs"(){init_node_globals(),import_index2=__toESM(require_merge_options(),1),merge_options_default=import_index2.default}}),require_murmurHash3js=__commonJS({"node_modules/murmurhash3js-revisited/lib/murmurHash3js.js"(e,o){init_node_globals(),function(r,t){var n={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(_){if(!Array.isArray(_)&&!ArrayBuffer.isView(_))return!1;for(var m=0;m<_.length;m++)if(!Number.isInteger(_[m])||_[m]<0||_[m]>255)return!1;return!0}function u(_,m){return(_&65535)*m+(((_>>>16)*m&65535)<<16)}function l(_,m){return _<<m|_>>>32-m}function f(_){return _^=_>>>16,_=u(_,2246822507),_^=_>>>13,_=u(_,3266489909),_^=_>>>16,_}function a(_,m){_=[_[0]>>>16,_[0]&65535,_[1]>>>16,_[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var v=[0,0,0,0];return v[3]+=_[3]+m[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=_[2]+m[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=_[1]+m[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=_[0]+m[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function c(_,m){_=[_[0]>>>16,_[0]&65535,_[1]>>>16,_[1]&65535],m=[m[0]>>>16,m[0]&65535,m[1]>>>16,m[1]&65535];var v=[0,0,0,0];return v[3]+=_[3]*m[3],v[2]+=v[3]>>>16,v[3]&=65535,v[2]+=_[2]*m[3],v[1]+=v[2]>>>16,v[2]&=65535,v[2]+=_[3]*m[2],v[1]+=v[2]>>>16,v[2]&=65535,v[1]+=_[1]*m[3],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=_[2]*m[2],v[0]+=v[1]>>>16,v[1]&=65535,v[1]+=_[3]*m[1],v[0]+=v[1]>>>16,v[1]&=65535,v[0]+=_[0]*m[3]+_[1]*m[2]+_[2]*m[1]+_[3]*m[0],v[0]&=65535,[v[0]<<16|v[1],v[2]<<16|v[3]]}function d(_,m){return m%=64,m===32?[_[1],_[0]]:m<32?[_[0]<<m|_[1]>>>32-m,_[1]<<m|_[0]>>>32-m]:(m-=32,[_[1]<<m|_[0]>>>32-m,_[0]<<m|_[1]>>>32-m])}function h(_,m){return m%=64,m===0?_:m<32?[_[0]<<m|_[1]>>>32-m,_[1]<<m]:[_[1]<<m-32,0]}function g(_,m){return[_[0]^m[0],_[1]^m[1]]}function p(_){return _=g(_,[0,_[0]>>>1]),_=c(_,[4283543511,3981806797]),_=g(_,[0,_[0]>>>1]),_=c(_,[3301882366,444984403]),_=g(_,[0,_[0]>>>1]),_}n.x86.hash32=function(_,m){if(n.inputValidation&&!s(_))return t;m=m||0;for(var v=_.length%4,w=_.length-v,y=m,b=0,T=3432918353,R=461845907,S=0;S<w;S=S+4)b=_[S]|_[S+1]<<8|_[S+2]<<16|_[S+3]<<24,b=u(b,T),b=l(b,15),b=u(b,R),y^=b,y=l(y,13),y=u(y,5)+3864292196;switch(b=0,v){case 3:b^=_[S+2]<<16;case 2:b^=_[S+1]<<8;case 1:b^=_[S],b=u(b,T),b=l(b,15),b=u(b,R),y^=b}return y^=_.length,y=f(y),y>>>0},n.x86.hash128=function(_,m){if(n.inputValidation&&!s(_))return t;m=m||0;for(var v=_.length%16,w=_.length-v,y=m,b=m,T=m,R=m,S=0,E=0,A=0,C=0,I=597399067,P=2869860233,O=951274213,k=2716044179,N=0;N<w;N=N+16)S=_[N]|_[N+1]<<8|_[N+2]<<16|_[N+3]<<24,E=_[N+4]|_[N+5]<<8|_[N+6]<<16|_[N+7]<<24,A=_[N+8]|_[N+9]<<8|_[N+10]<<16|_[N+11]<<24,C=_[N+12]|_[N+13]<<8|_[N+14]<<16|_[N+15]<<24,S=u(S,I),S=l(S,15),S=u(S,P),y^=S,y=l(y,19),y+=b,y=u(y,5)+1444728091,E=u(E,P),E=l(E,16),E=u(E,O),b^=E,b=l(b,17),b+=T,b=u(b,5)+197830471,A=u(A,O),A=l(A,17),A=u(A,k),T^=A,T=l(T,15),T+=R,T=u(T,5)+2530024501,C=u(C,k),C=l(C,18),C=u(C,I),R^=C,R=l(R,13),R+=y,R=u(R,5)+850148119;switch(S=0,E=0,A=0,C=0,v){case 15:C^=_[N+14]<<16;case 14:C^=_[N+13]<<8;case 13:C^=_[N+12],C=u(C,k),C=l(C,18),C=u(C,I),R^=C;case 12:A^=_[N+11]<<24;case 11:A^=_[N+10]<<16;case 10:A^=_[N+9]<<8;case 9:A^=_[N+8],A=u(A,O),A=l(A,17),A=u(A,k),T^=A;case 8:E^=_[N+7]<<24;case 7:E^=_[N+6]<<16;case 6:E^=_[N+5]<<8;case 5:E^=_[N+4],E=u(E,P),E=l(E,16),E=u(E,O),b^=E;case 4:S^=_[N+3]<<24;case 3:S^=_[N+2]<<16;case 2:S^=_[N+1]<<8;case 1:S^=_[N],S=u(S,I),S=l(S,15),S=u(S,P),y^=S}return y^=_.length,b^=_.length,T^=_.length,R^=_.length,y+=b,y+=T,y+=R,b+=y,T+=y,R+=y,y=f(y),b=f(b),T=f(T),R=f(R),y+=b,y+=T,y+=R,b+=y,T+=y,R+=y,("00000000"+(y>>>0).toString(16)).slice(-8)+("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(T>>>0).toString(16)).slice(-8)+("00000000"+(R>>>0).toString(16)).slice(-8)},n.x64.hash128=function(_,m){if(n.inputValidation&&!s(_))return t;m=m||0;for(var v=_.length%16,w=_.length-v,y=[0,m],b=[0,m],T=[0,0],R=[0,0],S=[2277735313,289559509],E=[1291169091,658871167],A=0;A<w;A=A+16)T=[_[A+4]|_[A+5]<<8|_[A+6]<<16|_[A+7]<<24,_[A]|_[A+1]<<8|_[A+2]<<16|_[A+3]<<24],R=[_[A+12]|_[A+13]<<8|_[A+14]<<16|_[A+15]<<24,_[A+8]|_[A+9]<<8|_[A+10]<<16|_[A+11]<<24],T=c(T,S),T=d(T,31),T=c(T,E),y=g(y,T),y=d(y,27),y=a(y,b),y=a(c(y,[0,5]),[0,1390208809]),R=c(R,E),R=d(R,33),R=c(R,S),b=g(b,R),b=d(b,31),b=a(b,y),b=a(c(b,[0,5]),[0,944331445]);switch(T=[0,0],R=[0,0],v){case 15:R=g(R,h([0,_[A+14]],48));case 14:R=g(R,h([0,_[A+13]],40));case 13:R=g(R,h([0,_[A+12]],32));case 12:R=g(R,h([0,_[A+11]],24));case 11:R=g(R,h([0,_[A+10]],16));case 10:R=g(R,h([0,_[A+9]],8));case 9:R=g(R,[0,_[A+8]]),R=c(R,E),R=d(R,33),R=c(R,S),b=g(b,R);case 8:T=g(T,h([0,_[A+7]],56));case 7:T=g(T,h([0,_[A+6]],48));case 6:T=g(T,h([0,_[A+5]],40));case 5:T=g(T,h([0,_[A+4]],32));case 4:T=g(T,h([0,_[A+3]],24));case 3:T=g(T,h([0,_[A+2]],16));case 2:T=g(T,h([0,_[A+1]],8));case 1:T=g(T,[0,_[A]]),T=c(T,S),T=d(T,31),T=c(T,E),y=g(y,T)}return y=g(y,[0,_.length]),b=g(b,[0,_.length]),y=a(y,b),b=a(b,y),y=p(y),b=p(b),y=a(y,b),b=a(b,y),("00000000"+(y[0]>>>0).toString(16)).slice(-8)+("00000000"+(y[1]>>>0).toString(16)).slice(-8)+("00000000"+(b[0]>>>0).toString(16)).slice(-8)+("00000000"+(b[1]>>>0).toString(16)).slice(-8)},typeof e!="undefined"?(typeof o!="undefined"&&o.exports&&(e=o.exports=n),e.murmurHash3=n):typeof define=="function"&&define.amd?define([],function(){return n}):(n._murmurHash3=r.murmurHash3,n.noConflict=function(){return r.murmurHash3=n._murmurHash3,n._murmurHash3=t,n.noConflict=t,n},r.murmurHash3=n)}(e)}}),require_murmurhash3js_revisited=__commonJS({"node_modules/murmurhash3js-revisited/index.js"(e,o){init_node_globals(),o.exports=require_murmurHash3js()}}),esm_exports4={};__export(esm_exports4,{murmur3128:()=>murmur3128,murmur332:()=>murmur332});function fromNumberTo32BitBuf(e){const o=new Array(4);for(let r=0;r<4;r++)o[r]=e&255,e=e>>8;return new Uint8Array(o)}var import_murmurhash3js_revisited,murmur332,murmur3128,init_esm4=__esm({"node_modules/@multiformats/murmur3/esm/index.js"(){init_node_globals(),init_hasher(),init_src3(),import_murmurhash3js_revisited=__toESM(require_murmurhash3js_revisited(),1),murmur332=from2({name:"murmur3-32",code:35,encode:e=>fromNumberTo32BitBuf(import_murmurhash3js_revisited.default.x86.hash32(e))}),murmur3128=from2({name:"murmur3-128",code:34,encode:e=>bytes_exports.fromHex(import_murmurhash3js_revisited.default.x64.hash128(e))})}});async function hamtHashFn(e){return(await murmur3128.encode(e)).slice(0,8).reverse()}var defaultOptions,options_default,init_options=__esm({"node_modules/ipfs-unixfs-importer/esm/src/options.js"(){init_node_globals(),init_merge_options(),init_sha2_browser(),init_esm4(),defaultOptions={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:17437180132763652,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn,hamtHashCode:34,hamtBucketBits:8},options_default=(e={})=>merge_options_default.bind({ignoreUndefined:!0})(defaultOptions,e)}}),persist,persist_default,init_persist=__esm({"node_modules/ipfs-unixfs-importer/esm/src/utils/persist.js"(){init_node_globals(),init_cid(),init_src2(),init_sha2_browser(),persist=async(e,o,r)=>{r.codec||(r.codec=src_exports2),r.hasher||(r.hasher=sha256),r.cidVersion===void 0&&(r.cidVersion=1),r.codec===src_exports2&&r.hasher!==sha256&&(r.cidVersion=1);const t=await r.hasher.digest(e),n=CID.create(r.cidVersion,r.codec.code,t);return r.onlyHash||await o.put(n,e,{signal:r.signal}),n},persist_default=persist}}),dirBuilder,dir_default,init_dir=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/dir.js"(){init_node_globals(),init_src(),init_persist(),init_src2(),dirBuilder=async(e,o,r)=>{const t=new UnixFS({type:"directory",mtime:e.mtime,mode:e.mode}),n=encode3(prepare({Data:t.marshal()})),s=await persist_default(n,o,r),u=e.path;return{cid:s,path:u,unixfs:t,size:n.length}},dir_default=dirBuilder}});async function flat(e,o){return o(await(0,import_it_all3.default)(e))}var import_it_all3,flat_default,init_flat=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/flat.js"(){init_node_globals(),import_it_all3=__toESM(require_it_all(),1),flat_default=flat}});function balanced(e,o,r){return reduceToParents(e,o,r)}async function reduceToParents(e,o,r){const t=[];for await(const n of(0,import_it_batch.default)(e,r.maxChildrenPerNode))t.push(await o(n));return t.length>1?reduceToParents(t,o,r):t[0]}var import_it_batch,balanced_default,init_balanced=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/balanced.js"(){init_node_globals(),import_it_batch=__toESM(require_it_batch(),1),balanced_default=balanced}});async function trickleStream(e,o,r){const t=new Root(r.layerRepeat);let n=0,s=1,u=t;for await(const l of(0,import_it_batch2.default)(e,r.maxChildrenPerNode))u.isFull()&&(u!==t&&t.addChild(await u.reduce(o)),n&&n%r.layerRepeat==0&&s++,u=new SubTree(s,r.layerRepeat,n),n++),u.append(l);return u&&u!==t&&t.addChild(await u.reduce(o)),t.reduce(o)}var import_it_batch2,trickle_default,SubTree,Root,init_trickle=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/trickle.js"(){init_node_globals(),import_it_batch2=__toESM(require_it_batch(),1),trickle_default=trickleStream,SubTree=class{constructor(e,o,r=0){this.maxDepth=e,this.layerRepeat=o,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return e?(this._addNextNodeToParent(e),!1):!0}_addNextNodeToParent(e){this.parent=e;const o={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(o),this.currentDepth=o.depth,this.node=o}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,o){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter(t=>t.data).map(t=>this._reduce(t,o)))),o((e.data||[]).concat(r))}_findParent(e,o){const r=e.parent;if(!(!r||r.depth===0))return r.children.length===r.maxChildren||!r.maxChildren?this._findParent(r,o):r}},Root=class extends SubTree{constructor(e){super(0,e);this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}}});async function*bufferImporter(e,o,r){for await(let t of e.content)yield async()=>{r.progress(t.length,e.path);let n;const s={codec:src_exports2,cidVersion:r.cidVersion,hasher:r.hasher,onlyHash:r.onlyHash};return r.rawLeaves?(s.codec=raw_exports,s.cidVersion=1):(n=new UnixFS({type:r.leafType,data:t,mtime:e.mtime,mode:e.mode}),t=encode3({Data:n.marshal(),Links:[]})),{cid:await persist_default(t,o,s),unixfs:n,size:t.length}}}var buffer_importer_default,init_buffer_importer=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/buffer-importer.js"(){init_node_globals(),init_src(),init_persist(),init_src2(),init_raw(),buffer_importer_default=bufferImporter}});async function*buildFileBatch(e,o,r){let t=-1,n,s;typeof r.bufferImporter=="function"?s=r.bufferImporter:s=buffer_importer_default;for await(const u of(0,import_it_parallel_batch.default)(s(e,o,r),r.blockWriteConcurrency)){if(t++,t===0){n=u;continue}else t===1&&n&&(yield n,n=null);yield u}n&&(n.single=!0,yield n)}function fileBuilder(e,o,r){const t=dagBuilders[r.strategy];if(!t)throw(0,import_err_code10.default)(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY");return t(buildFileBatch(e,o,r),reduce(e,o,r),r)}var import_err_code10,import_it_parallel_batch,dagBuilders,reduce,file_default,init_file=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/file/index.js"(){init_node_globals(),import_err_code10=__toESM(require_err_code(),1),init_src(),init_persist(),init_src2(),import_it_parallel_batch=__toESM(require_it_parallel_batch(),1),init_raw(),init_src2(),init_flat(),init_balanced(),init_trickle(),init_buffer_importer(),dagBuilders={flat:flat_default,balanced:balanced_default,trickle:trickle_default},reduce=(e,o,r)=>{async function t(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){const c=n[0];if(c.cid.code===code6&&(e.mtime!==void 0||e.mode!==void 0)){let d=await o.get(c.cid);c.unixfs=new UnixFS({type:"file",mtime:e.mtime,mode:e.mode,data:d}),d=encode3(prepare({Data:c.unixfs.marshal()})),c.cid=await persist_default(d,o,$e(Re({},r),{codec:src_exports2,hasher:r.hasher,cidVersion:r.cidVersion})),c.size=d.length}return{cid:c.cid,path:e.path,unixfs:c.unixfs,size:c.size}}const s=new UnixFS({type:"file",mtime:e.mtime,mode:e.mode}),u=n.filter(c=>c.cid.code===code6&&c.size||c.unixfs&&!c.unixfs.data&&c.unixfs.fileSize()?!0:Boolean(c.unixfs&&c.unixfs.data&&c.unixfs.data.length)).map(c=>c.cid.code===code6?(s.addBlockSize(c.size),{Name:"",Tsize:c.size,Hash:c.cid}):(!c.unixfs||!c.unixfs.data?s.addBlockSize(c.unixfs&&c.unixfs.fileSize()||0):s.addBlockSize(c.unixfs.data.length),{Name:"",Tsize:c.size,Hash:c.cid})),l={Data:s.marshal(),Links:u},f=encode3(prepare(l));return{cid:await persist_default(f,o,r),path:e.path,unixfs:s,size:f.length+l.Links.reduce((c,d)=>c+d.Tsize,0)}}return t},file_default=fileBuilder}}),require_BufferList=__commonJS({"node_modules/bl/BufferList.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=Symbol.for("BufferList");function n(s){if(!(this instanceof n))return new n(s);n._init.call(this,s)}n._init=function(u){Object.defineProperty(this,t,{value:!0}),this._bufs=[],this.length=0,u&&this.append(u)},n.prototype._new=function(u){return new n(u)},n.prototype._offset=function(u){if(u===0)return[0,0];let l=0;for(let f=0;f<this._bufs.length;f++){const a=l+this._bufs[f].length;if(u<a||f===this._bufs.length-1)return[f,u-l];l=a}},n.prototype._reverseOffset=function(s){const u=s[0];let l=s[1];for(let f=0;f<u;f++)l+=this._bufs[f].length;return l},n.prototype.get=function(u){if(u>this.length||u<0)return;const l=this._offset(u);return this._bufs[l[0]][l[1]]},n.prototype.slice=function(u,l){return typeof u=="number"&&u<0&&(u+=this.length),typeof l=="number"&&l<0&&(l+=this.length),this.copy(null,0,u,l)},n.prototype.copy=function(u,l,f,a){if((typeof f!="number"||f<0)&&(f=0),(typeof a!="number"||a>this.length)&&(a=this.length),f>=this.length||a<=0)return u||r.alloc(0);const c=!!u,d=this._offset(f),h=a-f;let g=h,p=c&&l||0,_=d[1];if(f===0&&a===this.length){if(!c)return this._bufs.length===1?this._bufs[0]:r.concat(this._bufs,this.length);for(let m=0;m<this._bufs.length;m++)this._bufs[m].copy(u,p),p+=this._bufs[m].length;return u}if(g<=this._bufs[d[0]].length-_)return c?this._bufs[d[0]].copy(u,l,_,_+g):this._bufs[d[0]].slice(_,_+g);c||(u=r.allocUnsafe(h));for(let m=d[0];m<this._bufs.length;m++){const v=this._bufs[m].length-_;if(g>v)this._bufs[m].copy(u,p,_),p+=v;else{this._bufs[m].copy(u,p,_,_+g),p+=v;break}g-=v,_&&(_=0)}return u.length>p?u.slice(0,p):u},n.prototype.shallowSlice=function(u,l){if(u=u||0,l=typeof l!="number"?this.length:l,u<0&&(u+=this.length),l<0&&(l+=this.length),u===l)return this._new();const f=this._offset(u),a=this._offset(l),c=this._bufs.slice(f[0],a[0]+1);return a[1]===0?c.pop():c[c.length-1]=c[c.length-1].slice(0,a[1]),f[1]!==0&&(c[0]=c[0].slice(f[1])),this._new(c)},n.prototype.toString=function(u,l,f){return this.slice(l,f).toString(u)},n.prototype.consume=function(u){if(u=Math.trunc(u),Number.isNaN(u)||u<=0)return this;for(;this._bufs.length;)if(u>=this._bufs[0].length)u-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(u),this.length-=u;break}return this},n.prototype.duplicate=function(){const u=this._new();for(let l=0;l<this._bufs.length;l++)u.append(this._bufs[l]);return u},n.prototype.append=function(u){if(u==null)return this;if(u.buffer)this._appendBuffer(r.from(u.buffer,u.byteOffset,u.byteLength));else if(Array.isArray(u))for(let l=0;l<u.length;l++)this.append(u[l]);else if(this._isBufferList(u))for(let l=0;l<u._bufs.length;l++)this.append(u._bufs[l]);else typeof u=="number"&&(u=u.toString()),this._appendBuffer(r.from(u));return this},n.prototype._appendBuffer=function(u){this._bufs.push(u),this.length+=u.length},n.prototype.indexOf=function(s,u,l){if(l===void 0&&typeof u=="string"&&(l=u,u=void 0),typeof s=="function"||Array.isArray(s))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof s=="number"?s=r.from([s]):typeof s=="string"?s=r.from(s,l):this._isBufferList(s)?s=s.slice():Array.isArray(s.buffer)?s=r.from(s.buffer,s.byteOffset,s.byteLength):r.isBuffer(s)||(s=r.from(s)),u=Number(u||0),isNaN(u)&&(u=0),u<0&&(u=this.length+u),u<0&&(u=0),s.length===0)return u>this.length?this.length:u;const f=this._offset(u);let a=f[0],c=f[1];for(;a<this._bufs.length;a++){const d=this._bufs[a];for(;c<d.length;)if(d.length-c>=s.length){const g=d.indexOf(s,c);if(g!==-1)return this._reverseOffset([a,g]);c=d.length-s.length+1}else{const g=this._reverseOffset([a,c]);if(this._match(g,s))return g;c++}c=0}return-1},n.prototype._match=function(s,u){if(this.length-s<u.length)return!1;for(let l=0;l<u.length;l++)if(this.get(s+l)!==u[l])return!1;return!0},function(){const s={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const u in s)(function(l){s[l]===null?n.prototype[l]=function(f,a){return this.slice(f,f+a)[l](0,a)}:n.prototype[l]=function(f=0){return this.slice(f,f+s[l])[l](0)}})(u)}(),n.prototype._isBufferList=function(u){return u instanceof n||n.isBufferList(u)},n.isBufferList=function(u){return u!=null&&u[t]},o.exports=n}}),require_rabin=__commonJS({"node_modules/rabin-wasm/src/rabin.js"(e,o){init_node_globals();var r=class{constructor(t,n=12,s=8*1024,u=32*1024,l=64,f){this.bits=n,this.min=s,this.max=u,this.asModule=t,this.rabin=new t.Rabin(n,s,u,l,f),this.polynomial=f}fingerprint(t){const{__retain:n,__release:s,__allocArray:u,__getInt32Array:l,Int32Array_ID:f,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(t.length/this.min)),d=n(u(f,c)),h=n(u(a,t)),g=this.rabin.fingerprint(h,d),p=l(g);s(h),s(d);const _=p.indexOf(0);return _>=0?p.subarray(0,_):p}};o.exports=r}}),require_loader=__commonJS({"node_modules/@assemblyscript/loader/index.js"(e){init_node_globals();var o=-8,r=-4,t=0,n=1,s=1<<0,u=1<<1,l=5,f=1<<10,a=1<<11,c=1<<13,d=0,h=4,g=8,p=12,_=12,m=16,v=typeof BigUint64Array!="undefined",w=Symbol(),y=1024;function b(P,O){const k=new Uint32Array(P),N=new Uint16Array(P);var K=k[O+r>>>2]>>>1,U=O>>>1;if(K<=y)return String.fromCharCode.apply(String,N.subarray(U,U+K));const L=[];do{const re=N[U+y-1],Z=re>=55296&&re<56320?y-1:y;L.push(String.fromCharCode.apply(String,N.subarray(U,U+=Z))),K-=Z}while(K>y);return L.join("")+String.fromCharCode.apply(String,N.subarray(U,U+K))}function T(P){const O={};function k(K,U){return K?b(K.buffer,U):"<yet unknown>"}const N=P.env=P.env||{};return N.abort=N.abort||function(U,L,re,Z){const V=O.memory||N.memory;throw Error("abort: "+k(V,U)+" at "+k(V,L)+":"+re+":"+Z)},N.trace=N.trace||function(U,L){const re=O.memory||N.memory;console.log("trace: "+k(re,U)+(L?" ":"")+Array.prototype.slice.call(arguments,2,2+L).join(", "))},P.Math=P.Math||Math,P.Date=P.Date||Date,O}function R(P,O){const k=O.exports,N=k.memory,K=k.table,U=k.__alloc,L=k.__retain,re=k.__rtti_base||~0;function Z(F){const j=new Uint32Array(N.buffer),B=j[re>>>2];if((F>>>=0)>=B)throw Error("invalid id: "+F);return j[(re+4>>>2)+F*2]}function V(F){const j=new Uint32Array(N.buffer),B=j[re>>>2];if((F>>>=0)>=B)throw Error("invalid id: "+F);return j[(re+4>>>2)+F*2+1]}function ee(F){return 31-Math.clz32(F>>>l&31)}function fe(F){const j=F.length,B=U(j<<1,n),$=new Uint16Array(N.buffer);for(var G=0,X=B>>>1;G<j;++G)$[X+G]=F.charCodeAt(G);return B}P.__allocString=fe;function _e(F){const j=N.buffer;if(new Uint32Array(j)[F+o>>>2]!==n)throw Error("not a string: "+F);return b(j,F)}P.__getString=_e;function ce(F,j,B){const $=N.buffer;if(B)switch(F){case 2:return new Float32Array($);case 3:return new Float64Array($)}else switch(F){case 0:return new(j?Int8Array:Uint8Array)($);case 1:return new(j?Int16Array:Uint16Array)($);case 2:return new(j?Int32Array:Uint32Array)($);case 3:return new(j?BigInt64Array:BigUint64Array)($)}throw Error("unsupported align: "+F)}function Ee(F,j){const B=Z(F);if(!(B&(s|u)))throw Error("not an array: "+F+" @ "+B);const $=ee(B),G=j.length,X=U(G<<$,t),H=U(B&u?m:p,F),he=new Uint32Array(N.buffer);he[H+d>>>2]=L(X),he[H+h>>>2]=X,he[H+g>>>2]=G<<$,B&u&&(he[H+_>>>2]=G);const we=ce($,B&f,B&a);if(B&c)for(let Te=0;Te<G;++Te)we[(X>>>$)+Te]=L(j[Te]);else we.set(j,X>>>$);return H}P.__allocArray=Ee;function Ie(F){const j=new Uint32Array(N.buffer),B=j[F+o>>>2],$=Z(B);if(!($&s))throw Error("not an array: "+B);const G=ee($);var X=j[F+h>>>2];const H=$&u?j[F+_>>>2]:j[X+r>>>2]>>>G;return ce(G,$&f,$&a).subarray(X>>>=G,X+H)}P.__getArrayView=Ie;function ue(F){const j=Ie(F),B=j.length,$=new Array(B);for(let G=0;G<B;G++)$[G]=j[G];return $}P.__getArray=ue;function pe(F){const j=N.buffer,B=new Uint32Array(j)[F+r>>>2];return j.slice(F,F+B)}P.__getArrayBuffer=pe;function Ae(F,j,B){return new F(Y(F,j,B))}function Y(F,j,B){const $=N.buffer,G=new Uint32Array($),X=G[B+h>>>2];return new F($,X,G[X+r>>>2]>>>j)}P.__getInt8Array=Ae.bind(null,Int8Array,0),P.__getInt8ArrayView=Y.bind(null,Int8Array,0),P.__getUint8Array=Ae.bind(null,Uint8Array,0),P.__getUint8ArrayView=Y.bind(null,Uint8Array,0),P.__getUint8ClampedArray=Ae.bind(null,Uint8ClampedArray,0),P.__getUint8ClampedArrayView=Y.bind(null,Uint8ClampedArray,0),P.__getInt16Array=Ae.bind(null,Int16Array,1),P.__getInt16ArrayView=Y.bind(null,Int16Array,1),P.__getUint16Array=Ae.bind(null,Uint16Array,1),P.__getUint16ArrayView=Y.bind(null,Uint16Array,1),P.__getInt32Array=Ae.bind(null,Int32Array,2),P.__getInt32ArrayView=Y.bind(null,Int32Array,2),P.__getUint32Array=Ae.bind(null,Uint32Array,2),P.__getUint32ArrayView=Y.bind(null,Uint32Array,2),v&&(P.__getInt64Array=Ae.bind(null,BigInt64Array,3),P.__getInt64ArrayView=Y.bind(null,BigInt64Array,3),P.__getUint64Array=Ae.bind(null,BigUint64Array,3),P.__getUint64ArrayView=Y.bind(null,BigUint64Array,3)),P.__getFloat32Array=Ae.bind(null,Float32Array,2),P.__getFloat32ArrayView=Y.bind(null,Float32Array,2),P.__getFloat64Array=Ae.bind(null,Float64Array,3),P.__getFloat64ArrayView=Y.bind(null,Float64Array,3);function se(F,j){const B=new Uint32Array(N.buffer);var $=B[F+o>>>2];if($<=B[re>>>2])do if($==j)return!0;while($=V($));return!1}return P.__instanceof=se,P.memory=P.memory||N,P.table=P.table||K,I(k,P)}function S(P){return typeof Response!="undefined"&&P instanceof Response}async function E(P,O){return S(P=await P)?C(P,O):R(T(O||(O={})),await WebAssembly.instantiate(P instanceof WebAssembly.Module?P:await WebAssembly.compile(P),O))}e.instantiate=E;function A(P,O){return R(T(O||(O={})),new WebAssembly.Instance(P instanceof WebAssembly.Module?P:new WebAssembly.Module(P),O))}e.instantiateSync=A;async function C(P,O){return WebAssembly.instantiateStreaming?R(T(O||(O={})),(await WebAssembly.instantiateStreaming(P,O)).instance):E(S(P=await P)?P.arrayBuffer():P,O)}e.instantiateStreaming=C;function I(P,O){var k=O?Object.create(O):{},N=P.__argumentsLength?function(K){P.__argumentsLength.value=K}:P.__setArgumentsLength||P.__setargc||function(){};for(let K in P){if(!Object.prototype.hasOwnProperty.call(P,K))continue;const U=P[K];let L=K.split("."),re=k;for(;L.length>1;){let ee=L.shift();Object.prototype.hasOwnProperty.call(re,ee)||(re[ee]={}),re=re[ee]}let Z=L[0],V=Z.indexOf("#");if(V>=0){let ee=Z.substring(0,V),fe=re[ee];if(typeof fe=="undefined"||!fe.prototype){let _e=function(...ce){return _e.wrap(_e.prototype.constructor(0,...ce))};_e.prototype={valueOf:function(){return this[w]}},_e.wrap=function(ce){return Object.create(_e.prototype,{[w]:{value:ce,writable:!1}})},fe&&Object.getOwnPropertyNames(fe).forEach(ce=>Object.defineProperty(_e,ce,Object.getOwnPropertyDescriptor(fe,ce))),re[ee]=_e}if(Z=Z.substring(V+1),re=re[ee].prototype,/^(get|set):/.test(Z)){if(!Object.prototype.hasOwnProperty.call(re,Z=Z.substring(4))){let _e=P[K.replace("set:","get:")],ce=P[K.replace("get:","set:")];Object.defineProperty(re,Z,{get:function(){return _e(this[w])},set:function(Ee){ce(this[w],Ee)},enumerable:!0})}}else Z==="constructor"?(re[Z]=(..._e)=>(N(_e.length),U(..._e))).original=U:(re[Z]=function(..._e){return N(_e.length),U(this[w],..._e)}).original=U}else/^(get|set):/.test(Z)?Object.prototype.hasOwnProperty.call(re,Z=Z.substring(4))||Object.defineProperty(re,Z,{get:P[K.replace("set:","get:")],set:P[K.replace("get:","set:")],enumerable:!0}):typeof U=="function"&&U!==N?(re[Z]=(...ee)=>(N(ee.length),U(...ee))).original=U:re[Z]=U}return k}e.demangle=I}}),require_rabin_wasm=__commonJS({"node_modules/rabin-wasm/dist/rabin-wasm.js"(e,o){init_node_globals();var{instantiate:r}=require_loader();t.supported=typeof WebAssembly!="undefined";function t(n={}){if(!t.supported)return null;var s=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return r(new Response(new Blob([s],{type:"application/wasm"})),n)}o.exports=t}}),require_src8=__commonJS({"node_modules/rabin-wasm/src/index.js"(e,o){init_node_globals();var r=require_rabin(),t=require_rabin_wasm(),n=async(s,u,l,f,a)=>{const c=await t();return new r(c,s,u,l,f,a)};o.exports={Rabin:r,create:n}}});async function*rabinChunker(e,o){let r,t,n;if(o.minChunkSize&&o.maxChunkSize&&o.avgChunkSize)n=o.avgChunkSize,r=o.minChunkSize,t=o.maxChunkSize;else if(o.avgChunkSize)n=o.avgChunkSize,r=n/3,t=n+n/2;else throw(0,import_err_code11.default)(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(r<16)throw(0,import_err_code11.default)(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");t<r&&(t=r),n<r&&(n=r);const s=Math.floor(Math.log2(n));for await(const u of rabin(e,{min:r,max:t,bits:s,window:o.window,polynomial:o.polynomial}))yield u}async function*rabin(e,o){const r=await(0,import_rabin_wasm.create)(o.bits,o.min,o.max,o.window),t=new import_BufferList.default;for await(const n of e){t.append(n);const s=r.fingerprint(n);for(let u=0;u<s.length;u++){const l=s[u],f=t.slice(0,l);t.consume(l),yield f}}t.length&&(yield t.slice(0))}var import_BufferList,import_rabin_wasm,import_err_code11,rabin_default,init_rabin=__esm({"node_modules/ipfs-unixfs-importer/esm/src/chunker/rabin.js"(){init_node_globals(),import_BufferList=__toESM(require_BufferList(),1),import_rabin_wasm=__toESM(require_src8(),1),import_err_code11=__toESM(require_err_code(),1),rabin_default=rabinChunker}});async function*fixedSizeChunker(e,o){let r=new import_BufferList2.default,t=0,n=!1;const s=o.maxChunkSize;for await(const u of e)for(r.append(u),t+=u.length;t>=s;)if(yield r.slice(0,s),n=!0,s===r.length)r=new import_BufferList2.default,t=0;else{const l=new import_BufferList2.default;l.append(r.shallowSlice(s)),r=l,t-=s}(!n||t)&&(yield r.slice(0,t))}var import_BufferList2,fixed_size_default,init_fixed_size=__esm({"node_modules/ipfs-unixfs-importer/esm/src/chunker/fixed-size.js"(){init_node_globals(),import_BufferList2=__toESM(require_BufferList(),1),fixed_size_default=fixedSizeChunker}});async function*validateChunks(e){for await(const o of e){if(o.length===void 0)throw(0,import_err_code12.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof o=="string"||o instanceof String)yield fromString3(o.toString());else if(Array.isArray(o))yield Uint8Array.from(o);else if(o instanceof Uint8Array)yield o;else throw(0,import_err_code12.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}var import_err_code12,validate_chunks_default,init_validate_chunks=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/validate-chunks.js"(){init_node_globals(),import_err_code12=__toESM(require_err_code(),1),init_from_string(),validate_chunks_default=validateChunks}});function isIterable(e){return Symbol.iterator in e}function isAsyncIterable(e){return Symbol.asyncIterator in e}function contentAsAsyncIterable(e){try{if(e instanceof Uint8Array)return async function*(){yield e}();if(isIterable(e))return async function*(){yield*e}();if(isAsyncIterable(e))return e}catch{throw(0,import_err_code13.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,import_err_code13.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(e,o,r){for await(const t of e)if(t.path&&(t.path.substring(0,2)==="./"&&(r.wrapWithDirectory=!0),t.path=t.path.split("/").filter(n=>n&&n!==".").join("/")),t.content){let n;typeof r.chunker=="function"?n=r.chunker:r.chunker==="rabin"?n=rabin_default:n=fixed_size_default;let s;typeof r.chunkValidator=="function"?s=r.chunkValidator:s=validate_chunks_default;const u={path:t.path,mtime:t.mtime,mode:t.mode,content:n(s(contentAsAsyncIterable(t.content),r),r)};yield()=>file_default(u,o,r)}else if(t.path){const n={path:t.path,mtime:t.mtime,mode:t.mode};yield()=>dir_default(n,o,r)}else throw new Error("Import candidate must have content or path or both")}var import_err_code13,dag_builder_default,init_dag_builder=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dag-builder/index.js"(){init_node_globals(),init_dir(),init_file(),import_err_code13=__toESM(require_err_code(),1),init_rabin(),init_fixed_size(),init_validate_chunks(),dag_builder_default=dagBuilder}}),Dir,dir_default2,init_dir2=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dir.js"(){init_node_globals(),Dir=class{constructor(e,o){this.options=o||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,o){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}},dir_default2=Dir}}),DirFlat,dir_flat_default,init_dir_flat=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dir-flat.js"(){init_node_globals(),init_src2(),init_src(),init_dir2(),init_persist(),DirFlat=class extends dir_default2{constructor(e,o){super(e,o);this._children={}}async put(e,o){this.cid=void 0,this.size=void 0,this._children[e]=o}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let o=0;o<e.length;o++){const r=e[o];yield{key:r,child:this._children[r]}}}async*flush(e){const o=Object.keys(this._children),r=[];for(let f=0;f<o.length;f++){let a=this._children[o[f]];if(a instanceof dir_default2)for await(const c of a.flush(e))a=c,yield a;a.size!=null&&a.cid&&r.push({Name:o[f],Tsize:a.size,Hash:a.cid})}const t=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode}),n={Data:t.marshal(),Links:r},s=encode3(prepare(n)),u=await persist_default(s,e,this.options),l=s.length+n.Links.reduce((f,a)=>f+(a.Tsize==null?0:a.Tsize),0);this.cid=u,this.size=l,yield{cid:u,unixfs:t,path:this.path,size:l}}},dir_flat_default=DirFlat}}),require_sparse_array=__commonJS({"node_modules/sparse-array/index.js"(e,o){init_node_globals();var r=7;o.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(f,a){let c=this._internalPositionFor(f,!1);if(a===void 0)c!==-1&&(this._unsetInternalPos(c),this._unsetBit(f),this._changedLength=!0,this._changedData=!0);else{let d=!1;c===-1?(c=this._data.length,this._setBit(f),this._changedData=!0):d=!0,this._setInternalPos(c,f,a,d),this._changedLength=!0}}unset(f){this.set(f,void 0)}get(f){this._sortData();const a=this._internalPositionFor(f,!0);if(a!==-1)return this._data[a][1]}push(f){return this.set(this.length,f),this.length}get length(){if(this._sortData(),this._changedLength){const f=this._data[this._data.length-1];this._length=f?f[0]+1:0,this._changedLength=!1}return this._length}forEach(f){let a=0;for(;a<this.length;)f(this.get(a),a,this),a++}map(f){let a=0,c=new Array(this.length);for(;a<this.length;)c[a]=f(this.get(a),a,this),a++;return c}reduce(f,a){let c=0,d=a;for(;c<this.length;){const h=this.get(c);d=f(d,h,c),c++}return d}find(f){let a=0,c,d;for(;a<this.length&&!c;)d=this.get(a),c=f(d),a++;return c?d:void 0}_internalPositionFor(f,a){const c=this._bytePosFor(f,a);if(c>=this._bitArrays.length)return-1;const d=this._bitArrays[c],h=f-c*r;if(!((d&1<<h)>0))return-1;const p=this._bitArrays.slice(0,c).reduce(t,0),_=~(4294967295<<h+1),m=n(d&_);return p+m-1}_bytePosFor(f,a){const c=Math.floor(f/r),d=c+1;for(;!a&&this._bitArrays.length<d;)this._bitArrays.push(0);return c}_setBit(f){const a=this._bytePosFor(f,!1);this._bitArrays[a]|=1<<f-a*r}_unsetBit(f){const a=this._bytePosFor(f,!1);this._bitArrays[a]&=~(1<<f-a*r)}_setInternalPos(f,a,c,d){const h=this._data,g=[a,c];if(d)this._sortData(),h[f]=g;else{if(h.length)if(h[h.length-1][0]>=a)h.push(g);else if(h[0][0]<=a)h.unshift(g);else{const p=Math.round(h.length/2);this._data=h.slice(0,p).concat(g).concat(h.slice(p))}else this._data.push(g);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(f){this._data.splice(f,1)}_sortData(){this._changedData&&this._data.sort(s),this._changedData=!1}bitField(){const f=[];let a=8,c=0,d=0,h;const g=this._bitArrays.slice();for(;g.length||c;){c===0&&(h=g.shift(),c=7);const _=Math.min(c,a),m=~(255<<_);d|=(h&m)<<8-a,h=h>>>_,c-=_,a-=_,(!a||!c&&!g.length)&&(f.push(d),d=0,a=8)}for(var p=f.length-1;p>0&&f[p]===0;p--)f.pop();return f}compactArray(){return this._sortData(),this._data.map(u)}};function t(l,f){return l+n(f)}function n(l){let f=l;return f=f-(f>>1&1431655765),f=(f&858993459)+(f>>2&858993459),(f+(f>>4)&252645135)*16843009>>24}function s(l,f){return l[0]-f[0]}function u(l){return l[1]}}}),require_bucket=__commonJS({"node_modules/hamt-sharding/src/bucket.js"(e,o){init_node_globals();var r=require_sparse_array(),{fromString:t}=(init_from_string(),__toCommonJS(from_string_exports)),n=class{constructor(a,c,d=0){this._options=a,this._popCount=0,this._parent=c,this._posAtParent=d,this._children=new r,this.key=null}async put(a,c){const d=await this._findNewBucketAndPos(a);await d.bucket._putAt(d,a,c)}async get(a){const c=await this._findChild(a);if(c)return c.value}async del(a){const c=await this._findPlace(a),d=c.bucket._at(c.pos);d&&d.key===a&&c.bucket._delAt(c.pos)}leafCount(){return this._children.compactArray().reduce((c,d)=>d instanceof n?c+d.leafCount():c+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const a=this._children.compactArray();for(const c of a)c instanceof n?yield*c.eachLeafSeries():yield c;return[]}serialize(a,c){const d=[];return c(this._children.reduce((h,g,p)=>(g&&(g instanceof n?h.push(g.serialize(a,c)):h.push(a(g,p))),h),d))}asyncTransform(a,c){return f(this,a,c)}toJSON(){return this.serialize(u,l)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(a){const c=await this._findPlace(a),d=c.bucket._at(c.pos);if(!(d instanceof n)&&d&&d.key===a)return d}async _findPlace(a){const c=this._options.hash(typeof a=="string"?t(a):a),d=await c.take(this._options.bits),h=this._children.get(d);return h instanceof n?h._findPlace(c):{bucket:this,pos:d,hash:c,existingChild:h}}async _findNewBucketAndPos(a){const c=await this._findPlace(a);if(c.existingChild&&c.existingChild.key!==a){const d=new n(this._options,c.bucket,c.pos);c.bucket._putObjectAt(c.pos,d);const h=await d._findPlace(c.existingChild.hash);return h.bucket._putAt(h,c.existingChild.key,c.existingChild.value),d._findNewBucketAndPos(c.hash)}return c}_putAt(a,c,d){this._putObjectAt(a.pos,{key:c,value:d,hash:a.hash})}_putObjectAt(a,c){this._children.get(a)||this._popCount++,this._children.set(a,c)}_delAt(a){if(a===-1)throw new Error("Invalid position");this._children.get(a)&&this._popCount--,this._children.unset(a),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){const a=this._children.find(s);if(a&&!(a instanceof n)){const c=a.hash;c.untake(this._options.bits);const d={pos:this._posAtParent,hash:c,bucket:this._parent};this._parent._putAt(d,a.key,a.value)}}else this._parent._delAt(this._posAtParent)}_at(a){return this._children.get(a)}};function s(a){return Boolean(a)}function u(a,c){return a.key}function l(a){return a}async function f(a,c,d){const h=[];for(const g of a._children.compactArray())if(g instanceof n)await f(g,c,d);else{const p=await c(g);h.push({bitField:a._children.bitField(),children:p})}return d(h)}o.exports=n}}),require_consumable_buffer=__commonJS({"node_modules/hamt-sharding/src/consumable-buffer.js"(e,o){init_node_globals();var r=[255,254,252,248,240,224,192,128],t=[1,3,7,15,31,63,127,255];o.exports=class{constructor(l){this._value=l,this._currentBytePos=l.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(l){let f=l,a=0;for(;f&&this._haveBits();){const c=this._value[this._currentBytePos],d=this._currentBitPos+1,h=Math.min(d,f),g=n(c,d-h,h);a=(a<<h)+g,f-=h,this._currentBitPos-=h,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return a}untake(l){for(this._currentBitPos+=l;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function n(u,l,f){const a=s(l,f);return(u&a)>>>l}function s(u,l){return r[u]&t[Math.min(l+u-1,7)]}}}),require_consumable_hash=__commonJS({"node_modules/hamt-sharding/src/consumable-hash.js"(e,o){init_node_globals();var r=require_consumable_buffer(),{concat:t}=(init_concat(),__toCommonJS(concat_exports));function n(u){function l(f){return f instanceof s?f:new s(f,u)}return l}var s=class{constructor(u,l){if(!(u instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=u,this._hashFn=l,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(u){let l=u;for(;this._availableBits<l;)await this._produceMoreBits();let f=0;for(;l>0;){const a=this._buffers[this._currentBufferIndex],c=Math.min(a.availableBits(),l),d=a.take(c);f=(f<<c)+d,l-=c,this._availableBits-=c,a.availableBits()===0&&this._currentBufferIndex++}return f}untake(u){let l=u;for(;l>0;){const f=this._buffers[this._currentBufferIndex],a=Math.min(f.totalBits()-f.availableBits(),l);f.untake(a),l-=a,this._availableBits+=a,this._currentBufferIndex>0&&f.totalBits()===f.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const u=this._depth?t([this._value,Uint8Array.from([this._depth])]):this._value,l=await this._hashFn(u),f=new r(l);this._buffers.push(f),this._availableBits+=f.availableBits()}};o.exports=n,o.exports.InfiniteHash=s}}),require_src9=__commonJS({"node_modules/hamt-sharding/src/index.js"(e,o){init_node_globals();var r=require_bucket(),t=require_consumable_hash();function n(s){if(!s||!s.hashFn)throw new Error("please define an options.hashFn");const u={bits:s.bits||8,hash:t(s.hashFn)};return new r(u)}o.exports={createHAMT:n,Bucket:r}}});async function*flush(e,o,r,t){const n=e._children,s=[];let u=0;for(let g=0;g<n.length;g++){const p=n.get(g);if(!p)continue;const _=g.toString(16).toUpperCase().padStart(2,"0");if(p instanceof import_hamt_sharding.Bucket){let m;for await(const v of await flush(p,o,null,t))m=v;if(!m)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:_,Tsize:m.size,Hash:m.cid}),u+=m.size}else if(typeof p.value.flush=="function"){const m=p.value;let v;for await(const y of m.flush(o))v=y,yield v;const w=_+p.key;s.push({Name:w,Tsize:v.size,Hash:v.cid}),u+=v.size}else{const m=p.value;if(!m.cid)continue;const v=_+p.key,w=m.size;s.push({Name:v,Tsize:w,Hash:m.cid}),u+=w}}const l=Uint8Array.from(n.bitField().reverse()),f=new UnixFS({type:"hamt-sharded-directory",data:l,fanout:e.tableSize(),hashType:t.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),a={Data:f.marshal(),Links:s},c=encode3(prepare(a)),d=await persist_default(c,o,t),h=c.length+u;yield{cid:d,unixfs:f,size:h}}var import_hamt_sharding,DirSharded,dir_sharded_default,init_dir_sharded=__esm({"node_modules/ipfs-unixfs-importer/esm/src/dir-sharded.js"(){init_node_globals(),init_src2(),init_src(),init_dir2(),init_persist(),import_hamt_sharding=__toESM(require_src9(),1),DirSharded=class extends dir_default2{constructor(e,o){super(e,o);this._bucket=(0,import_hamt_sharding.createHAMT)({hashFn:o.hamtHashFn,bits:o.hamtBucketBits})}async put(e,o){await this._bucket.put(e,o)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:o}of this._bucket.eachLeafSeries())yield{key:e,child:o}}async*flush(e){for await(const o of flush(this._bucket,e,this,this.options))yield $e(Re({},o),{path:this.path})}},dir_sharded_default=DirSharded}});async function flatToShard(e,o,r,t){let n=o;o instanceof dir_flat_default&&o.directChildrenCount()>=r&&(n=await convertToShard(o,t));const s=n.parent;if(s){if(n!==o){if(e&&(e.parent=n),!n.parentKey)throw new Error("No parent key found");await s.put(n.parentKey,n)}return flatToShard(n,s,r,t)}return n}async function convertToShard(e,o){const r=new dir_sharded_default({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1,mtime:e.mtime,mode:e.mode},o);for await(const{key:t,child:n}of e.eachChildSeries())await r.put(t,n);return r}var flat_to_shard_default,init_flat_to_shard=__esm({"node_modules/ipfs-unixfs-importer/esm/src/flat-to-shard.js"(){init_node_globals(),init_dir_sharded(),init_dir_flat(),flat_to_shard_default=flatToShard}}),toPathComponents,to_path_components_default,init_to_path_components=__esm({"node_modules/ipfs-unixfs-importer/esm/src/utils/to-path-components.js"(){init_node_globals(),toPathComponents=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),to_path_components_default=toPathComponents}});async function addToTree(e,o,r){const t=to_path_components_default(e.path||""),n=t.length-1;let s=o,u="";for(let l=0;l<t.length;l++){const f=t[l];u+=`${u?"/":""}${f}`;const a=l===n;if(s.dirty=!0,s.cid=void 0,s.size=void 0,a)await s.put(f,e),o=await flat_to_shard_default(null,s,r.shardSplitThreshold,r);else{let c=await s.get(f);(!c||!(c instanceof dir_default2))&&(c=new dir_flat_default({root:!1,dir:!0,parent:s,parentKey:f,path:u,dirty:!0,flat:!0,mtime:c&&c.unixfs&&c.unixfs.mtime,mode:c&&c.unixfs&&c.unixfs.mode},r)),await s.put(f,c),s=c}}return o}async function*flushAndYield(e,o){if(!(e instanceof dir_default2)){e&&e.unixfs&&e.unixfs.isDirectory()&&(yield e);return}yield*e.flush(o)}async function*treeBuilder(e,o,r){let t=new dir_flat_default({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const n of e)!n||(t=await addToTree(n,t,r),(!n.unixfs||!n.unixfs.isDirectory())&&(yield n));if(r.wrapWithDirectory)yield*flushAndYield(t,o);else for await(const n of t.eachChildSeries())!n||(yield*flushAndYield(n.child,o))}var tree_builder_default,init_tree_builder=__esm({"node_modules/ipfs-unixfs-importer/esm/src/tree-builder.js"(){init_node_globals(),init_dir_flat(),init_flat_to_shard(),init_dir2(),init_to_path_components(),tree_builder_default=treeBuilder}}),src_exports6={};__export(src_exports6,{importer:()=>importer});async function*importer(e,o,r={}){const t=options_default(r);let n;typeof r.dagBuilder=="function"?n=r.dagBuilder:n=dag_builder_default;let s;typeof r.treeBuilder=="function"?s=r.treeBuilder:s=tree_builder_default;let u;Symbol.asyncIterator in e||Symbol.iterator in e?u=e:u=[e];for await(const l of s((0,import_it_parallel_batch2.default)(n(u,o,t),t.fileImportConcurrency),o,t))yield{cid:l.cid,path:l.path,unixfs:l.unixfs,size:l.size}}var import_it_parallel_batch2,init_src8=__esm({"node_modules/ipfs-unixfs-importer/esm/src/index.js"(){init_node_globals(),import_it_parallel_batch2=__toESM(require_it_parallel_batch(),1),init_options(),init_dag_builder(),init_tree_builder()}});async function*normaliseCandidateMultiple(e,o){if(typeof e=="string"||e instanceof String||isBytes(e)||isBlob(e)||e._readableState)throw(0,import_err_code14.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(e)&&(e=(0,import_browser_readablestream_to_it3.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=(0,import_it_peekable3.default)(e),{value:t,done:n}=await r.peek();if(n){yield*[];return}if(r.push(t),Number.isInteger(t))throw(0,import_err_code14.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(t._readableState){yield*(0,import_it_map3.default)(r,s=>toFileObject2({content:s},o));return}if(isBytes(t)){yield toFileObject2({content:r},o);return}if(isFileObject(t)||t[Symbol.iterator]||t[Symbol.asyncIterator]||isReadableStream(t)||isBlob(t)){yield*(0,import_it_map3.default)(r,s=>toFileObject2(s,o));return}}throw isFileObject(e)?(0,import_err_code14.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,import_err_code14.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function toFileObject2(e,o){const{path:r,mode:t,mtime:n,content:s}=e,u={path:r||"",mode:parseMode(t),mtime:parseMtime(n)};return s?u.content=await o(s):r||(u.content=await o(e)),u}var import_err_code14,import_browser_readablestream_to_it3,import_it_peekable3,import_it_map3,init_normalise_candidate_multiple=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-candidate-multiple.js"(){init_node_globals(),import_err_code14=__toESM(require_err_code(),1),import_browser_readablestream_to_it3=__toESM(require_browser_readablestream_to_it(),1),import_it_peekable3=__toESM(require_it_peekable(),1),import_it_map3=__toESM(require_it_map(),1),init_utils4(),init_src()}}),normalise_input_multiple_exports={};__export(normalise_input_multiple_exports,{normaliseInput:()=>normaliseInput3});function normaliseInput3(e){return normaliseCandidateMultiple(e,normaliseContent)}var init_normalise_input_multiple=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-input-multiple.js"(){init_node_globals(),init_normalise_content(),init_normalise_candidate_multiple()}}),require_utils8=__commonJS({"node_modules/ipfs-core/cjs/src/components/add-all/utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=n=>{if(n)if(n.startsWith("size-")){const s=n.split("-")[1],u=parseInt(s);if(isNaN(u))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:u}}else{if(n.startsWith("rabin"))return Re({chunker:"rabin"},r(n));throw new Error(`Unrecognized chunker option: ${n}`)}else return{chunker:"fixed"}},r=n=>{const s={},u=n.split("-");switch(u.length){case 1:s.avgChunkSize=262144;break;case 2:s.avgChunkSize=t(u[1],"avg");break;case 4:s.minChunkSize=t(u[1],"min"),s.avgChunkSize=t(u[2],"avg"),s.maxChunkSize=t(u[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return s},t=(n,s)=>{const u=parseInt(n);if(isNaN(u))throw new Error(`Chunker parameter ${s} must be an integer`);return u};e.parseChunkSize=t,e.parseChunkerString=o,e.parseRabinString=r}}),require_add_all2=__commonJS({"node_modules/ipfs-core/cjs/src/components/add-all/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src8(),__toCommonJS(src_exports6)),r=(init_normalise_input_multiple(),__toCommonJS(normalise_input_multiple_exports)),t=require_utils8(),n=require_it_pipe(),s=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),u=require_merge_options();function l(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var f=l(u),a=f.default.bind({ignoreUndefined:!0});function c({repo:p,preload:_,options:m}){const v=m&&m.sharding;async function*w(y,b={}){const T=a({shardSplitThreshold:v?1e3:1/0,strategy:"balanced"},b,Re({},t.parseChunkerString(b.chunker)));T.hashAlg&&T.hashAlg!=="sha2-256"&&T.cidVersion!==1&&(T.cidVersion=1),T.trickle&&(T.strategy="trickle"),T.strategy==="trickle"&&(T.leafType="raw",T.reduceSingleLeafToSelf=!1),T.cidVersion>0&&T.rawLeaves===void 0&&(T.rawLeaves=!0),T.hashAlg!==void 0&&T.rawLeaves===void 0&&(T.rawLeaves=!0),delete T.trickle;const R={};if(T.progress){const A=T.progress;T.progress=(C,I)=>{R[I]||(R[I]=0),R[I]+=C,A(R[I],I)}}const S=n.pipe(r.normaliseInput(y),A=>o.importer(A,p.blocks,$e(Re({},T),{pin:!1})),d(T),h(_,T),g(p,T)),E=await p.gcLock.readLock();try{for await(const A of S)delete R[A.path],yield A}finally{E()}}return s.withTimeoutOption(w)}function d(p){async function*_(m){for await(const v of m){let w=v.cid;p.cidVersion===1&&(w=w.toV1());let y=v.path?v.path:w.toString();p.wrapWithDirectory&&!v.path&&(y=""),yield{path:y,cid:w,size:v.size,mode:v.unixfs&&v.unixfs.mode,mtime:v.unixfs&&v.unixfs.mtime}}}return _}function h(p,_){async function*m(v){for await(const w of v)(!w.path||_.wrapWithDirectory?w.path==="":!w.path.includes("/"))&&!_.onlyHash&&_.preload!==!1&&p(w.cid),yield w}return m}function g(p,_){async function*m(v){for await(const w of v){const y=!(w.path&&w.path.includes("/"));(_.pin==null?!0:_.pin)&&y&&!_.onlyHash&&await p.pins.pinRecursively(w.cid),yield w}}return m}e.createAddAll=c}}),import_hamt_sharding2,hashFn,addLinksToHamtBucket,toPrefix,toBucketPath,findShardCid,find_cid_in_shard_default,init_find_cid_in_shard=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/utils/find-cid-in-shard.js"(){init_node_globals(),import_hamt_sharding2=__toESM(require_src9(),1),init_src2(),init_esm4(),hashFn=async function(e){return(await murmur3128.encode(e)).slice(0,8).reverse()},addLinksToHamtBucket=(e,o,r)=>Promise.all(e.map(t=>{if(t.Name==null)throw new Error("Unexpected Link without a Name");if(t.Name.length===2){const n=parseInt(t.Name,16);return o._putObjectAt(n,new import_hamt_sharding2.Bucket({hash:r._options.hash,bits:r._options.bits},o,n))}return r.put(t.Name.substring(2),!0)})),toPrefix=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),toBucketPath=e=>{let o=e.bucket;const r=[];for(;o._parent;)r.push(o),o=o._parent;return r.push(o),r.reverse()},findShardCid=async(e,o,r,t,n)=>{if(!t){const c=(0,import_hamt_sharding2.createHAMT)({hashFn});t={rootBucket:c,hamtDepth:1,lastBucket:c}}await addLinksToHamtBucket(e.Links,t.lastBucket,t.rootBucket);const s=await t.rootBucket._findNewBucketAndPos(o);let u=toPrefix(s.pos);const l=toBucketPath(s);l.length>t.hamtDepth&&(t.lastBucket=l[t.hamtDepth],u=toPrefix(t.lastBucket._posAtParent));const f=e.Links.find(c=>{if(c.Name==null)return!1;const d=c.Name.substring(0,2),h=c.Name.substring(2);return!(d!==u||h&&h!==o)});if(!f)return null;if(f.Name!=null&&f.Name.substring(2)===o)return f.Hash;t.hamtDepth++;const a=await r.get(f.Hash,n);return e=decode5(a),findShardCid(e,o,r,t,n)},find_cid_in_shard_default=findShardCid}});function extractDataFromBlock(e,o,r,t){const n=e.length,s=o+n;return r>=s||t<o?new Uint8Array(0):(t>=o&&t<s&&(e=e.slice(0,t-o)),r>=o&&r<s&&(e=e.slice(r-o)),e)}var extract_data_from_block_default,init_extract_data_from_block=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/utils/extract-data-from-block.js"(){init_node_globals(),extract_data_from_block_default=extractDataFromBlock}}),import_err_code15,validateOffsetAndLength,validate_offset_and_length_default,init_validate_offset_and_length=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/utils/validate-offset-and-length.js"(){init_node_globals(),import_err_code15=__toESM(require_err_code(),1),validateOffsetAndLength=(e,o,r)=>{if(o||(o=0),o<0)throw(0,import_err_code15.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>e)throw(0,import_err_code15.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!r&&r!==0&&(r=e-o),r<0)throw(0,import_err_code15.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return o+r>e&&(r=e-o),{offset:o,length:r}},validate_offset_and_length_default=validateOffsetAndLength}});async function*emitBytes(e,o,r,t,n=0,s){if(o instanceof Uint8Array){const f=extract_data_from_block_default(o,n,r,t);return f.length&&(yield f),n+=f.length,n}if(o.Data==null)throw(0,import_err_code16.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let u;try{u=UnixFS.unmarshal(o.Data)}catch(f){throw(0,import_err_code16.default)(f,"ERR_NOT_UNIXFS")}if(u.data&&u.data.length){const f=extract_data_from_block_default(u.data,n,r,t);f.length&&(yield f),n+=u.data.length}let l=n;for(let f=0;f<o.Links.length;f++){const a=o.Links[f],c=n+u.blockSizes[f];if(r>=l&&r<c||t>l&&t<=c||r<l&&t>c){const d=await e.get(a.Hash,{signal:s.signal});let h;switch(a.Hash.code){case code:h=await decode5(d);break;case code6:h=d;break;case code4:h=await decode10(d);break;default:throw Error(`Unsupported codec: ${a.Hash.code}`)}for await(const g of emitBytes(e,h,r,t,n,s))n+=g.length,yield g}n=c,l=c+1}}var import_err_code16,fileContent,file_default2,init_file2=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/unixfs-v1/content/file.js"(){init_node_globals(),init_extract_data_from_block(),init_validate_offset_and_length(),init_src(),import_err_code16=__toESM(require_err_code(),1),init_src2(),init_esm3(),init_raw(),fileContent=(e,o,r,t,n,s,u)=>{function l(f={}){const a=r.fileSize();if(a===void 0)throw new Error("File was a directory");const{offset:c,length:d}=validate_offset_and_length_default(a,f.offset,f.length),h=c,g=c+d;return emitBytes(u,o,h,g,0,f)}return l},file_default2=fileContent}}),directoryContent,directory_default,init_directory=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/unixfs-v1/content/directory.js"(){init_node_globals(),directoryContent=(e,o,r,t,n,s,u)=>{async function*l(f={}){const a=f.offset||0,c=f.length||o.Links.length,d=o.Links.slice(a,c);for(const h of d){const g=await n(h.Hash,h.Name||"",`${t}/${h.Name||""}`,[],s+1,u,f);g.entry&&(yield g.entry)}}return l},directory_default=directoryContent}});async function*listDirectory(e,o,r,t,n,s){const u=e.Links;for(const l of u){const f=l.Name!=null?l.Name.substring(2):null;if(f)yield(await r(l.Hash,f,`${o}/${f}`,[],t+1,n,s)).entry;else{const a=await n.get(l.Hash);e=decode5(a);for await(const c of listDirectory(e,o,r,t,n,s))yield c}}}var hamtShardedDirectoryContent,hamt_sharded_directory_default,init_hamt_sharded_directory=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/unixfs-v1/content/hamt-sharded-directory.js"(){init_node_globals(),init_src2(),hamtShardedDirectoryContent=(e,o,r,t,n,s,u)=>{function l(f={}){return listDirectory(o,t,n,s,u,f)}return l},hamt_sharded_directory_default=hamtShardedDirectoryContent}}),import_err_code17,findLinkCid,contentExporters,unixFsResolver,unixfs_v1_default,init_unixfs_v1=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/unixfs-v1/index.js"(){init_node_globals(),import_err_code17=__toESM(require_err_code(),1),init_src(),init_find_cid_in_shard(),init_src2(),init_file2(),init_directory(),init_hamt_sharded_directory(),findLinkCid=(e,o)=>{const r=e.Links.find(t=>t.Name===o);return r&&r.Hash},contentExporters={raw:file_default2,file:file_default2,directory:directory_default,"hamt-sharded-directory":hamt_sharded_directory_default,metadata:(e,o,r,t,n,s,u)=>()=>[],symlink:(e,o,r,t,n,s,u)=>()=>[]},unixFsResolver=async(e,o,r,t,n,s,u,l)=>{const f=await u.get(e,l),a=decode5(f);let c,d;if(o||(o=e.toString()),a.Data==null)throw(0,import_err_code17.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{c=UnixFS.unmarshal(a.Data)}catch(h){throw(0,import_err_code17.default)(h,"ERR_NOT_UNIXFS")}if(r||(r=o),t.length){let h;if(c&&c.type==="hamt-sharded-directory"?h=await find_cid_in_shard_default(a,t[0],u):h=findLinkCid(a,t[0]),!h)throw(0,import_err_code17.default)(new Error("file does not exist"),"ERR_NOT_FOUND");const g=t.shift(),p=`${r}/${g}`;d={cid:h,toResolve:t,name:g||"",path:p}}return{entry:{type:c.isDirectory()?"directory":"file",name:o,path:r,cid:e,content:contentExporters[c.type](e,a,c,r,n,s,u),unixfs:c,depth:s,node:a,size:c.fileSize()},next:d}},unixfs_v1_default=unixFsResolver}}),import_err_code18,rawContent,resolve,raw_default,init_raw2=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/raw.js"(){init_node_globals(),import_err_code18=__toESM(require_err_code(),1),init_extract_data_from_block(),init_validate_offset_and_length(),rawContent=e=>{async function*o(r={}){const{offset:t,length:n}=validate_offset_and_length_default(e.length,r.offset,r.length);yield extract_data_from_block_default(e,0,t,t+n)}return o},resolve=async(e,o,r,t,n,s,u,l)=>{if(t.length)throw(0,import_err_code18.default)(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const f=await u.get(e,l);return{entry:{type:"raw",name:o,path:r,cid:e,content:rawContent(f),depth:s,size:f.length,node:f}}},raw_default=resolve}}),import_err_code19,resolve2,dag_cbor_default,init_dag_cbor=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/dag-cbor.js"(){init_node_globals(),init_cid(),import_err_code19=__toESM(require_err_code(),1),init_esm3(),resolve2=async(e,o,r,t,n,s,u,l)=>{const f=await u.get(e),a=decode10(f);let c=a,d=r;for(;t.length;){const h=t[0];if(h in c){t.shift(),d=`${d}/${h}`;const g=CID.asCID(c[h]);if(g)return{entry:{type:"object",name:o,path:r,cid:e,node:f,depth:s,size:f.length,content:async function*(){yield a}},next:{cid:g,name:h,path:d,toResolve:t}};c=c[h]}else throw(0,import_err_code19.default)(new Error(`No property named ${h} found in cbor node ${e}`),"ERR_NO_PROP")}return{entry:{type:"object",name:o,path:r,cid:e,node:f,depth:s,size:f.length,content:async function*(){yield a}}}},dag_cbor_default=resolve2}}),import_err_code20,rawContent2,resolve3,identity_default,init_identity3=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/identity.js"(){init_node_globals(),import_err_code20=__toESM(require_err_code(),1),init_extract_data_from_block(),init_validate_offset_and_length(),init_digest(),rawContent2=e=>{async function*o(r={}){const{offset:t,length:n}=validate_offset_and_length_default(e.length,r.offset,r.length);yield extract_data_from_block_default(e,0,t,t+n)}return o},resolve3=async(e,o,r,t,n,s,u,l)=>{if(t.length)throw(0,import_err_code20.default)(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const f=await decode3(e.multihash.bytes);return{entry:{type:"identity",name:o,path:r,cid:e,content:rawContent2(f.digest),depth:s,size:f.digest.length,node:f.digest}}},identity_default=resolve3}});function resolve4(e,o,r,t,n,s,u){const l=resolvers[e.code];if(!l)throw(0,import_err_code21.default)(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER");return l(e,o,r,t,resolve4,n,s,u)}var import_err_code21,resolvers,resolvers_default,init_resolvers=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/resolvers/index.js"(){init_node_globals(),import_err_code21=__toESM(require_err_code(),1),init_src2(),init_esm3(),init_raw(),init_identity(),init_unixfs_v1(),init_raw2(),init_dag_cbor(),init_identity3(),resolvers={[code]:unixfs_v1_default,[code6]:raw_default,[code4]:dag_cbor_default,[identity.code]:identity_default},resolvers_default=resolve4}}),src_exports7={};__export(src_exports7,{exporter:()=>exporter,recursive:()=>recursive,walkPath:()=>walkPath});async function*walkPath(e,o,r={}){let{cid:t,toResolve:n}=cidAndRest(e),s=t.toString(),u=s;const l=n.length;for(;;){const f=await resolvers_default(t,s,u,n,l,o,r);if(!f.entry&&!f.next)throw(0,import_err_code22.default)(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(f.entry&&(yield f.entry),!f.next)return;n=f.next.toResolve,t=f.next.cid,s=f.next.name,u=f.next.path}}async function exporter(e,o,r={}){const t=await(0,import_it_last.default)(walkPath(e,o,r));if(!t)throw(0,import_err_code22.default)(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return t}async function*recursive(e,o,r={}){const t=await exporter(e,o,r);if(!t)return;if(yield t,t.type==="directory")for await(const s of n(t,r))yield s;async function*n(s,u){for await(const l of s.content(u))yield l,!(l instanceof Uint8Array)&&l.type==="directory"&&(yield*n(l,u))}}var import_err_code22,import_it_last,toPathComponents2,cidAndRest,init_src9=__esm({"node_modules/ipfs-unixfs-exporter/esm/src/index.js"(){init_node_globals(),import_err_code22=__toESM(require_err_code(),1),init_cid(),init_resolvers(),import_it_last=__toESM(require_it_last(),1),toPathComponents2=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),cidAndRest=e=>{if(e instanceof Uint8Array)return{cid:CID.decode(e),toResolve:[]};const o=CID.asCID(e);if(o)return{cid:o,toResolve:[]};if(typeof e=="string"){e.indexOf("/ipfs/")===0&&(e=e.substring(6));const r=toPathComponents2(e);return{cid:CID.parse(r[0]),toResolve:r.slice(1)}}throw(0,import_err_code22.default)(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")}}}),require_cat=__commonJS({"node_modules/ipfs-core/cjs/src/components/cat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_utils2(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=(init_cid(),__toCommonJS(cid_exports));function s({repo:u,preload:l}){async function*f(a,c={}){if(a=r.normalizeCidPath(a),c.preload!==!1){const h=a.split("/");l(n.CID.parse(h[0]))}const d=await o.exporter(a,u.blocks,c);if(d.type==="directory")throw new Error("this dag node is a directory");if(!d.content)throw new Error("this dag node has no content");yield*d.content(c)}return t.withTimeoutOption(f)}e.createCat=s}}),require_extract_headers=__commonJS({"node_modules/it-tar/extract-headers.js"(e){init_node_globals();var{Buffer:o}=require_buffer(),r=require_BufferList(),t="0".charCodeAt(0),n=o.from("ustar\0","binary"),s=o.from("ustar ","binary"),u=o.from(" \0","binary"),l=257,f=263,a=function(m,v,w){return typeof m!="number"?w:(m=~~m,m>=v?v:m>=0||(m+=v,m>=0)?m:0)},c=function(m){switch(m){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null},d=function(m,v,w,y){for(;w<y;w++)if(m.get(w)===v)return w;return y},h=function(m){let v=8*32;for(let w=0;w<148;w++)v+=m.get(w);for(let w=156;w<512;w++)v+=m.get(w);return v};function g(m){let v;if(m.get(0)===128)v=!0;else if(m.get(0)===255)v=!1;else return null;const w=[];for(let T=m.length-1;T>0;T--){const R=m.get(T);v?w.push(R):w.push(255-R)}let y=0;const b=w.length;for(let T=0;T<b;T++)y+=w[T]*Math.pow(256,T);return v?y:-1*y}var p=function(m,v,w){if(m=m.shallowSlice(v,v+w),v=0,m.get(v)&128)return g(m);{for(;v<m.length&&m.get(v)===32;)v++;const y=a(d(m,32,v,m.length),m.length,m.length);for(;v<y&&m.get(v)===0;)v++;return y===v?0:parseInt(m.shallowSlice(v,y).toString(),8)}},_=function(m,v,w,y){return m.shallowSlice(v,d(m,0,v,v+w)).toString(y)};e.decodeLongPath=function(m,v){return m=r.isBufferList(m)?m:new r(m),_(m,0,m.length,v)},e.decodePax=function(m){m=r.isBufferList(m)?m:new r(m);const v={};for(;m.length;){let w=0;for(;w<m.length&&m.get(w)!==32;)w++;const y=parseInt(m.shallowSlice(0,w).toString(),10);if(!y)return v;const b=m.shallowSlice(w+1,y-1).toString(),T=b.indexOf("=");if(T===-1)return v;v[b.slice(0,T)]=b.slice(T+1),m=m.shallowSlice(y)}return v},e.decode=function(m,v){m=r.isBufferList(m)?m:new r(m);let w=m.get(156)===0?0:m.get(156)-t,y=_(m,0,100,v);const b=p(m,100,8),T=p(m,108,8),R=p(m,116,8),S=p(m,124,12),E=p(m,136,12),A=c(w),C=m.get(157)===0?null:_(m,157,100,v),I=_(m,265,32),P=_(m,297,32),O=p(m,329,8),k=p(m,337,8),N=h(m);if(N===8*32)return null;if(N!==p(m,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(n.compare(m.slice(l,l+6))===0)m.get(345)&&(y=_(m,345,155,v)+"/"+y);else if(!(s.compare(m.slice(l,l+6))===0&&u.compare(m.slice(f,f+2))===0))throw new Error("Invalid tar header: unknown format.");return w===0&&y&&y[y.length-1]==="/"&&(w=5),{name:y,mode:b,uid:T,gid:R,size:S,mtime:new Date(1e3*E),type:A,linkname:C,uname:I,gname:P,devmajor:O,devminor:k}}}}),require_it_reader=__commonJS({"node_modules/it-reader/index.js"(e,o){init_node_globals();var r=require_BufferList();o.exports=t=>{const n=async function*(){let s=yield,u=new r;for await(const l of t){if(!s){s=yield u.append(l),u=new r;continue}for(u.append(l);u.length>=s;){const f=u.shallowSlice(0,s);if(u.consume(s),s=yield f,!s){u.length&&(s=yield u,u=new r);break}}}if(s)throw Object.assign(new Error(`stream ended before ${s} bytes became available`),{code:"ERR_UNDER_READ",buffer:u})}();return n.next(),n}}}),require_lte_reader=__commonJS({"node_modules/it-tar/lte-reader.js"(e,o){init_node_globals();var r=require_BufferList(),t=require_it_reader();o.exports=function(s){const u=t(s);let l;const f={[Symbol.asyncIterator]:()=>f,async next(a){if(l){let c;if(a==null||l.length===a)c=l,l=null;else if(l.length>a)c=l.shallowSlice(0,a),l=l.shallowSlice(a);else if(l.length<a){const{value:d,done:h}=await u.next(a-l.length);if(h)throw Object.assign(new Error(`stream ended before ${a-l.length} bytes became available`),{code:"ERR_UNDER_READ"});c=new r([l,d]),l=null}return{value:c}}return u.next(a)},async nextLte(a){let{done:c,value:d}=await f.next();return c?{done:c}:d.length<=a?{value:d}:(d=r.isBufferList(d)?d:new r(d),l?l.append(d.shallowSlice(a)):l=d.shallowSlice(a),{value:d.shallowSlice(0,a)})},return(){return u.return()}};return f}}}),require_extract=__commonJS({"node_modules/it-tar/extract.js"(e,o){init_node_globals();var r=require_p_defer(),t=require_extract_headers(),n=require_lte_reader();function s(l){return l&=511,l&&512-l}async function u(l,f){const a=s(f);a&&await l.next(a)}o.exports=l=>(l=l||{},l.highWaterMark=l.highWaterMark||1024*16,f=>async function*(){const a=n(f);let c,d,h,g;try{for(;;){let p;try{const{done:b,value:T}=await a.next(512);if(b)return;p=T}catch(b){if(b.code==="ERR_UNDER_READ")return;throw b}const _=t.decode(p,l.filenameEncoding);if(!_)continue;if(_.type==="gnu-long-path"){const{done:b,value:T}=await a.next(_.size);if(b)return;c=t.decodeLongPath(T,l.filenameEncoding),await u(a,_.size);continue}if(_.type==="gnu-long-link-path"){const{done:b,value:T}=await a.next(_.size);if(b)return;d=t.decodeLongPath(T,l.filenameEncoding),await u(a,_.size);continue}if(_.type==="pax-global-header"){const{done:b,value:T}=await a.next(_.size);if(b)return;h=t.decodePax(T,l.filenameEncoding),await u(a,_.size);continue}if(_.type==="pax-header"){const{done:b,value:T}=await a.next(_.size);if(b)return;g=t.decodePax(T,l.filenameEncoding),h&&(g=Re(Re({},h),g)),await u(a,_.size);continue}if(c&&(_.name=c,c=null),d&&(_.linkname=d,d=null),g&&(g.path&&(_.name=g.path),g.linkpath&&(_.linkname=g.linkpath),g.size&&(_.size=parseInt(g.size,10)),_.pax=g,g=null),!_.size||_.type==="directory"){yield{header:_,body:async function*(){}()};continue}let m=_.size;const v=r(),w=await a.nextLte(Math.min(m,l.highWaterMark));m-=w.value.length,m||v.resolve();const y=async function*(){try{for(yield w.value;m;){const{done:b,value:T}=await a.nextLte(m);if(b){m=0;return}m-=T.length,yield T}}finally{v.resolve()}}();if(yield{header:_,body:y},await v.promise,m)for await(const b of y);await u(a,_.size)}}finally{await a.return()}}())}}),require_index_browser2=__commonJS({"node_modules/iso-constants/index.browser.js"(e,o){init_node_globals(),o.exports={E2BIG:7,EACCES:13,EADDRINUSE:100,EADDRNOTAVAIL:101,EAFNOSUPPORT:102,EAGAIN:11,EALREADY:103,EBADF:9,EBADMSG:104,EBUSY:16,ECANCELED:105,ECHILD:10,ECONNABORTED:106,ECONNREFUSED:107,ECONNRESET:108,EDEADLK:36,EDESTADDRREQ:109,EDOM:33,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:110,EIDRM:111,EILSEQ:42,EINPROGRESS:112,EINTR:4,EINVAL:22,EIO:5,EISCONN:113,EISDIR:21,ELOOP:114,EMFILE:24,EMLINK:31,EMSGSIZE:115,ENAMETOOLONG:38,ENETDOWN:116,ENETRESET:117,ENETUNREACH:118,ENFILE:23,ENOBUFS:119,ENODATA:120,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:39,ENOLINK:121,ENOMEM:12,ENOMSG:122,ENOPROTOOPT:123,ENOSPC:28,ENOSR:124,ENOSTR:125,ENOSYS:40,ENOTCONN:126,ENOTDIR:20,ENOTEMPTY:41,ENOTSOCK:128,ENOTSUP:129,ENOTTY:25,ENXIO:6,EOPNOTSUPP:130,EOVERFLOW:132,EPERM:1,EPIPE:32,EPROTO:134,EPROTONOSUPPORT:135,EPROTOTYPE:136,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ETIME:137,ETIMEDOUT:138,ETXTBSY:139,EWOULDBLOCK:140,EXDEV:18,WSAEINTR:10004,WSAEBADF:10009,WSAEACCES:10013,WSAEFAULT:10014,WSAEINVAL:10022,WSAEMFILE:10024,WSAEWOULDBLOCK:10035,WSAEINPROGRESS:10036,WSAEALREADY:10037,WSAENOTSOCK:10038,WSAEDESTADDRREQ:10039,WSAEMSGSIZE:10040,WSAEPROTOTYPE:10041,WSAENOPROTOOPT:10042,WSAEPROTONOSUPPORT:10043,WSAESOCKTNOSUPPORT:10044,WSAEOPNOTSUPP:10045,WSAEPFNOSUPPORT:10046,WSAEAFNOSUPPORT:10047,WSAEADDRINUSE:10048,WSAEADDRNOTAVAIL:10049,WSAENETDOWN:10050,WSAENETUNREACH:10051,WSAENETRESET:10052,WSAECONNABORTED:10053,WSAECONNRESET:10054,WSAENOBUFS:10055,WSAEISCONN:10056,WSAENOTCONN:10057,WSAESHUTDOWN:10058,WSAETOOMANYREFS:10059,WSAETIMEDOUT:10060,WSAECONNREFUSED:10061,WSAELOOP:10062,WSAENAMETOOLONG:10063,WSAEHOSTDOWN:10064,WSAEHOSTUNREACH:10065,WSAENOTEMPTY:10066,WSAEPROCLIM:10067,WSAEUSERS:10068,WSAEDQUOT:10069,WSAESTALE:10070,WSAEREMOTE:10071,WSASYSNOTREADY:10091,WSAVERNOTSUPPORTED:10092,WSANOTINITIALISED:10093,WSAEDISCON:10101,WSAENOMORE:10102,WSAECANCELLED:10103,WSAEINVALIDPROCTABLE:10104,WSAEINVALIDPROVIDER:10105,WSAEPROVIDERFAILEDINIT:10106,WSASYSCALLFAILURE:10107,WSASERVICE_NOT_FOUND:10108,WSATYPE_NOT_FOUND:10109,WSA_E_NO_MORE:10110,WSA_E_CANCELLED:10111,WSAEREFUSED:10112,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGILL:4,SIGABRT:22,SIGFPE:8,SIGKILL:9,SIGSEGV:11,SIGTERM:15,SIGBREAK:21,SIGWINCH:28,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFLNK:40960,O_CREAT:256,O_EXCL:1024,UV_FS_O_FILEMAP:536870912,O_TRUNC:512,O_APPEND:8,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488319,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}}),require_it_concat=__commonJS({"node_modules/it-concat/index.js"(e,o){init_node_globals();var r=require_BufferList(),t={string:()=>"",buffer:()=>r()};o.exports=async(n,s)=>{if(s=s||{},s.type&&!t[s.type])throw new Error(`invalid type "${s.type}"`);let u,l;for await(const f of n)u||(l=s.type||(typeof f=="string"?"string":"buffer"),u=t[l]()),l==="string"?u+=f:u.append(f);return u||t[s.type||"buffer"]()}}}),require_pack_headers=__commonJS({"node_modules/it-tar/pack-headers.js"(e){init_node_globals();var{Buffer:o}=require_buffer(),r=o.alloc,t="0000000000000000000",n="7777777777777777777",s="0".charCodeAt(0),u=o.from("ustar\0","binary"),l=o.from("00","binary"),f=parseInt("7777",8),a=257,c=263,d=function(_){switch(_){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0},h=function(_){let m=8*32;for(let v=0;v<148;v++)m+=_[v];for(let v=156;v<512;v++)m+=_[v];return m},g=function(_,m){return _=_.toString(8),_.length>m?n.slice(0,m)+" ":t.slice(0,m-_.length)+_+" "},p=function(_){const m=o.byteLength(_);let v=Math.floor(Math.log(m)/Math.log(10))+1;return m+v>=Math.pow(10,v)&&v++,m+v+_};e.encodePax=function(_){let m="";_.name&&(m+=p(" path="+_.name+`
`)),_.linkname&&(m+=p(" linkpath="+_.linkname+`
`));const v=_.pax;if(v)for(const w in v)m+=p(" "+w+"="+v[w]+`
`);return o.from(m)},e.encode=function(_){const m=r(512);let v=_.name,w="";if(_.typeflag===5&&v[v.length-1]!=="/"&&(v+="/"),o.byteLength(v)!==v.length)return null;for(;o.byteLength(v)>100;){const y=v.indexOf("/");if(y===-1)return null;w+=w?"/"+v.slice(0,y):v.slice(0,y),v=v.slice(y+1)}return o.byteLength(v)>100||o.byteLength(w)>155||_.linkname&&o.byteLength(_.linkname)>100?null:(m.write(v),m.write(g(_.mode&f,6),100),m.write(g(_.uid,6),108),m.write(g(_.gid,6),116),m.write(g(_.size,11),124),m.write(g(_.mtime.getTime()/1e3|0,11),136),m[156]=s+d(_.type),_.linkname&&m.write(_.linkname,157),u.copy(m,a),l.copy(m,c),_.uname&&m.write(_.uname,265),_.gname&&m.write(_.gname,297),m.write(g(_.devmajor||0,6),329),m.write(g(_.devminor||0,6),337),w&&m.write(w,345),m.write(g(h(m),6),148),m)}}}),require_pack=__commonJS({"node_modules/it-tar/pack.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=require_BufferList(),{S_IFMT:n,S_IFBLK:s,S_IFCHR:u,S_IFDIR:l,S_IFIFO:f,S_IFLNK:a}=require_index_browser2(),c=require_it_concat(),d=require_pack_headers(),h=parseInt("755",8),g=parseInt("644",8),p=r.alloc(1024);function _(y){switch(y&n){case s:return"block-device";case u:return"character-device";case l:return"directory";case f:return"fifo";case a:return"symlink"}return"file"}function m(y){if(y&=511,y)return new t(p.slice(0,512-y))}function v(y){if(!y.pax){const b=d.encode(y);if(b)return b}return w(y)}function w(y){const b=d.encodePax({name:y.name,linkname:y.linkname,pax:y.pax}),T={name:"PaxHeader",mode:y.mode,uid:y.uid,gid:y.gid,size:b.length,mtime:y.mtime,type:"pax-header",linkname:y.linkname&&"PaxHeader",uname:y.uname,gname:y.gname,devmajor:y.devmajor,devminor:y.devminor};return new t([d.encode(T),b,m(b.length),d.encode($e(Re({},T),{size:y.size,type:y.type}))])}o.exports=()=>async function*(y){for await(let{header:b,body:T}of y){if((!b.size||b.type==="symlink")&&(b.size=0),b.type||(b.type=_(b.mode)),b.mode||(b.mode=b.type==="directory"?h:g),b.uid||(b.uid=0),b.gid||(b.gid=0),b.mtime||(b.mtime=new Date),typeof T=="string"&&(T=r.from(T)),r.isBuffer(T)||t.isBufferList(T)){b.size=T.length,yield new t([v(b),T,m(b.size)]);continue}if(b.type==="symlink"&&!b.linkname){b.linkname=(await c(T)).toString(),yield v(b);continue}if(yield v(b),b.type!=="file"&&b.type!=="contiguous-file")continue;let R=0;for await(const E of T)R+=E.length,yield t.isBufferList(E)?E:new t(E);if(R!==b.size)throw new Error("size mismatch");const S=m(b.size);S&&(yield S)}yield new t(p)}}}),require_it_tar=__commonJS({"node_modules/it-tar/index.js"(e){init_node_globals(),e.extract=require_extract(),e.pack=require_pack()}}),require_common2=__commonJS({"node_modules/pako/lib/utils/common.js"(e){init_node_globals();var o=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function r(s,u){return Object.prototype.hasOwnProperty.call(s,u)}e.assign=function(s){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var l=u.shift();if(!!l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var f in l)r(l,f)&&(s[f]=l[f])}}return s},e.shrinkBuf=function(s,u){return s.length===u?s:s.subarray?s.subarray(0,u):(s.length=u,s)};var t={arraySet:function(s,u,l,f,a){if(u.subarray&&s.subarray){s.set(u.subarray(l,l+f),a);return}for(var c=0;c<f;c++)s[a+c]=u[l+c]},flattenChunks:function(s){var u,l,f,a,c,d;for(f=0,u=0,l=s.length;u<l;u++)f+=s[u].length;for(d=new Uint8Array(f),a=0,u=0,l=s.length;u<l;u++)c=s[u],d.set(c,a),a+=c.length;return d}},n={arraySet:function(s,u,l,f,a){for(var c=0;c<f;c++)s[a+c]=u[l+c]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,t)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,n))},e.setTyped(o)}}),require_trees=__commonJS({"node_modules/pako/lib/zlib/trees.js"(e){init_node_globals();var o=require_common2(),r=4,t=0,n=1,s=2;function u(D){for(var z=D.length;--z>=0;)D[z]=0}var l=0,f=1,a=2,c=3,d=258,h=29,g=256,p=g+1+h,_=30,m=19,v=2*p+1,w=15,y=16,b=7,T=256,R=16,S=17,E=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=512,k=new Array((p+2)*2);u(k);var N=new Array(_*2);u(N);var K=new Array(O);u(K);var U=new Array(d-c+1);u(U);var L=new Array(h);u(L);var re=new Array(_);u(re);function Z(D,z,de,be,le){this.static_tree=D,this.extra_bits=z,this.extra_base=de,this.elems=be,this.max_length=le,this.has_stree=D&&D.length}var V,ee,fe;function _e(D,z){this.dyn_tree=D,this.max_code=0,this.stat_desc=z}function ce(D){return D<256?K[D]:K[256+(D>>>7)]}function Ee(D,z){D.pending_buf[D.pending++]=z&255,D.pending_buf[D.pending++]=z>>>8&255}function Ie(D,z,de){D.bi_valid>y-de?(D.bi_buf|=z<<D.bi_valid&65535,Ee(D,D.bi_buf),D.bi_buf=z>>y-D.bi_valid,D.bi_valid+=de-y):(D.bi_buf|=z<<D.bi_valid&65535,D.bi_valid+=de)}function ue(D,z,de){Ie(D,de[z*2],de[z*2+1])}function pe(D,z){var de=0;do de|=D&1,D>>>=1,de<<=1;while(--z>0);return de>>>1}function Ae(D){D.bi_valid===16?(Ee(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Y(D,z){var de=z.dyn_tree,be=z.max_code,le=z.stat_desc.static_tree,ye=z.stat_desc.has_stree,J=z.stat_desc.extra_bits,qe=z.stat_desc.extra_base,Ue=z.stat_desc.max_length,x,ke,Ne,ae,Se,Oe,He=0;for(ae=0;ae<=w;ae++)D.bl_count[ae]=0;for(de[D.heap[D.heap_max]*2+1]=0,x=D.heap_max+1;x<v;x++)ke=D.heap[x],ae=de[de[ke*2+1]*2+1]+1,ae>Ue&&(ae=Ue,He++),de[ke*2+1]=ae,!(ke>be)&&(D.bl_count[ae]++,Se=0,ke>=qe&&(Se=J[ke-qe]),Oe=de[ke*2],D.opt_len+=Oe*(ae+Se),ye&&(D.static_len+=Oe*(le[ke*2+1]+Se)));if(He!==0){do{for(ae=Ue-1;D.bl_count[ae]===0;)ae--;D.bl_count[ae]--,D.bl_count[ae+1]+=2,D.bl_count[Ue]--,He-=2}while(He>0);for(ae=Ue;ae!==0;ae--)for(ke=D.bl_count[ae];ke!==0;)Ne=D.heap[--x],!(Ne>be)&&(de[Ne*2+1]!==ae&&(D.opt_len+=(ae-de[Ne*2+1])*de[Ne*2],de[Ne*2+1]=ae),ke--)}}function se(D,z,de){var be=new Array(w+1),le=0,ye,J;for(ye=1;ye<=w;ye++)be[ye]=le=le+de[ye-1]<<1;for(J=0;J<=z;J++){var qe=D[J*2+1];qe!==0&&(D[J*2]=pe(be[qe]++,qe))}}function F(){var D,z,de,be,le,ye=new Array(w+1);for(de=0,be=0;be<h-1;be++)for(L[be]=de,D=0;D<1<<A[be];D++)U[de++]=be;for(U[de-1]=be,le=0,be=0;be<16;be++)for(re[be]=le,D=0;D<1<<C[be];D++)K[le++]=be;for(le>>=7;be<_;be++)for(re[be]=le<<7,D=0;D<1<<C[be]-7;D++)K[256+le++]=be;for(z=0;z<=w;z++)ye[z]=0;for(D=0;D<=143;)k[D*2+1]=8,D++,ye[8]++;for(;D<=255;)k[D*2+1]=9,D++,ye[9]++;for(;D<=279;)k[D*2+1]=7,D++,ye[7]++;for(;D<=287;)k[D*2+1]=8,D++,ye[8]++;for(se(k,p+1,ye),D=0;D<_;D++)N[D*2+1]=5,N[D*2]=pe(D,5);V=new Z(k,A,g+1,p,w),ee=new Z(N,C,0,_,w),fe=new Z(new Array(0),I,0,m,b)}function j(D){var z;for(z=0;z<p;z++)D.dyn_ltree[z*2]=0;for(z=0;z<_;z++)D.dyn_dtree[z*2]=0;for(z=0;z<m;z++)D.bl_tree[z*2]=0;D.dyn_ltree[T*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function B(D){D.bi_valid>8?Ee(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function $(D,z,de,be){B(D),be&&(Ee(D,de),Ee(D,~de)),o.arraySet(D.pending_buf,D.window,z,de,D.pending),D.pending+=de}function G(D,z,de,be){var le=z*2,ye=de*2;return D[le]<D[ye]||D[le]===D[ye]&&be[z]<=be[de]}function X(D,z,de){for(var be=D.heap[de],le=de<<1;le<=D.heap_len&&(le<D.heap_len&&G(z,D.heap[le+1],D.heap[le],D.depth)&&le++,!G(z,be,D.heap[le],D.depth));)D.heap[de]=D.heap[le],de=le,le<<=1;D.heap[de]=be}function H(D,z,de){var be,le,ye=0,J,qe;if(D.last_lit!==0)do be=D.pending_buf[D.d_buf+ye*2]<<8|D.pending_buf[D.d_buf+ye*2+1],le=D.pending_buf[D.l_buf+ye],ye++,be===0?ue(D,le,z):(J=U[le],ue(D,J+g+1,z),qe=A[J],qe!==0&&(le-=L[J],Ie(D,le,qe)),be--,J=ce(be),ue(D,J,de),qe=C[J],qe!==0&&(be-=re[J],Ie(D,be,qe)));while(ye<D.last_lit);ue(D,T,z)}function he(D,z){var de=z.dyn_tree,be=z.stat_desc.static_tree,le=z.stat_desc.has_stree,ye=z.stat_desc.elems,J,qe,Ue=-1,x;for(D.heap_len=0,D.heap_max=v,J=0;J<ye;J++)de[J*2]!==0?(D.heap[++D.heap_len]=Ue=J,D.depth[J]=0):de[J*2+1]=0;for(;D.heap_len<2;)x=D.heap[++D.heap_len]=Ue<2?++Ue:0,de[x*2]=1,D.depth[x]=0,D.opt_len--,le&&(D.static_len-=be[x*2+1]);for(z.max_code=Ue,J=D.heap_len>>1;J>=1;J--)X(D,de,J);x=ye;do J=D.heap[1],D.heap[1]=D.heap[D.heap_len--],X(D,de,1),qe=D.heap[1],D.heap[--D.heap_max]=J,D.heap[--D.heap_max]=qe,de[x*2]=de[J*2]+de[qe*2],D.depth[x]=(D.depth[J]>=D.depth[qe]?D.depth[J]:D.depth[qe])+1,de[J*2+1]=de[qe*2+1]=x,D.heap[1]=x++,X(D,de,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Y(D,z),se(de,Ue,D.bl_count)}function we(D,z,de){var be,le=-1,ye,J=z[0*2+1],qe=0,Ue=7,x=4;for(J===0&&(Ue=138,x=3),z[(de+1)*2+1]=65535,be=0;be<=de;be++)ye=J,J=z[(be+1)*2+1],!(++qe<Ue&&ye===J)&&(qe<x?D.bl_tree[ye*2]+=qe:ye!==0?(ye!==le&&D.bl_tree[ye*2]++,D.bl_tree[R*2]++):qe<=10?D.bl_tree[S*2]++:D.bl_tree[E*2]++,qe=0,le=ye,J===0?(Ue=138,x=3):ye===J?(Ue=6,x=3):(Ue=7,x=4))}function Te(D,z,de){var be,le=-1,ye,J=z[0*2+1],qe=0,Ue=7,x=4;for(J===0&&(Ue=138,x=3),be=0;be<=de;be++)if(ye=J,J=z[(be+1)*2+1],!(++qe<Ue&&ye===J)){if(qe<x)do ue(D,ye,D.bl_tree);while(--qe!=0);else ye!==0?(ye!==le&&(ue(D,ye,D.bl_tree),qe--),ue(D,R,D.bl_tree),Ie(D,qe-3,2)):qe<=10?(ue(D,S,D.bl_tree),Ie(D,qe-3,3)):(ue(D,E,D.bl_tree),Ie(D,qe-11,7));qe=0,le=ye,J===0?(Ue=138,x=3):ye===J?(Ue=6,x=3):(Ue=7,x=4)}}function De(D){var z;for(we(D,D.dyn_ltree,D.l_desc.max_code),we(D,D.dyn_dtree,D.d_desc.max_code),he(D,D.bl_desc),z=m-1;z>=3&&D.bl_tree[P[z]*2+1]===0;z--);return D.opt_len+=3*(z+1)+5+5+4,z}function Me(D,z,de,be){var le;for(Ie(D,z-257,5),Ie(D,de-1,5),Ie(D,be-4,4),le=0;le<be;le++)Ie(D,D.bl_tree[P[le]*2+1],3);Te(D,D.dyn_ltree,z-1),Te(D,D.dyn_dtree,de-1)}function Be(D){var z=4093624447,de;for(de=0;de<=31;de++,z>>>=1)if(z&1&&D.dyn_ltree[de*2]!==0)return t;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return n;for(de=32;de<g;de++)if(D.dyn_ltree[de*2]!==0)return n;return t}var Le=!1;function W(D){Le||(F(),Le=!0),D.l_desc=new _e(D.dyn_ltree,V),D.d_desc=new _e(D.dyn_dtree,ee),D.bl_desc=new _e(D.bl_tree,fe),D.bi_buf=0,D.bi_valid=0,j(D)}function q(D,z,de,be){Ie(D,(l<<1)+(be?1:0),3),$(D,z,de,!0)}function M(D){Ie(D,f<<1,3),ue(D,T,k),Ae(D)}function ie(D,z,de,be){var le,ye,J=0;D.level>0?(D.strm.data_type===s&&(D.strm.data_type=Be(D)),he(D,D.l_desc),he(D,D.d_desc),J=De(D),le=D.opt_len+3+7>>>3,ye=D.static_len+3+7>>>3,ye<=le&&(le=ye)):le=ye=de+5,de+4<=le&&z!==-1?q(D,z,de,be):D.strategy===r||ye===le?(Ie(D,(f<<1)+(be?1:0),3),H(D,k,N)):(Ie(D,(a<<1)+(be?1:0),3),Me(D,D.l_desc.max_code+1,D.d_desc.max_code+1,J+1),H(D,D.dyn_ltree,D.dyn_dtree)),j(D),be&&B(D)}function ve(D,z,de){return D.pending_buf[D.d_buf+D.last_lit*2]=z>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=z&255,D.pending_buf[D.l_buf+D.last_lit]=de&255,D.last_lit++,z===0?D.dyn_ltree[de*2]++:(D.matches++,z--,D.dyn_ltree[(U[de]+g+1)*2]++,D.dyn_dtree[ce(z)*2]++),D.last_lit===D.lit_bufsize-1}e._tr_init=W,e._tr_stored_block=q,e._tr_flush_block=ie,e._tr_tally=ve,e._tr_align=M}}),require_adler32=__commonJS({"node_modules/pako/lib/zlib/adler32.js"(e,o){init_node_globals();function r(t,n,s,u){for(var l=t&65535|0,f=t>>>16&65535|0,a=0;s!==0;){a=s>2e3?2e3:s,s-=a;do l=l+n[u++]|0,f=f+l|0;while(--a);l%=65521,f%=65521}return l|f<<16|0}o.exports=r}}),require_crc32=__commonJS({"node_modules/pako/lib/zlib/crc32.js"(e,o){init_node_globals();function r(){for(var s,u=[],l=0;l<256;l++){s=l;for(var f=0;f<8;f++)s=s&1?3988292384^s>>>1:s>>>1;u[l]=s}return u}var t=r();function n(s,u,l,f){var a=t,c=f+l;s^=-1;for(var d=f;d<c;d++)s=s>>>8^a[(s^u[d])&255];return s^-1}o.exports=n}}),require_messages=__commonJS({"node_modules/pako/lib/zlib/messages.js"(e,o){init_node_globals(),o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}}),require_deflate=__commonJS({"node_modules/pako/lib/zlib/deflate.js"(e){init_node_globals();var o=require_common2(),r=require_trees(),t=require_adler32(),n=require_crc32(),s=require_messages(),u=0,l=1,f=3,a=4,c=5,d=0,h=1,g=-2,p=-3,_=-5,m=-1,v=1,w=2,y=3,b=4,T=0,R=2,S=8,E=9,A=15,C=8,I=29,P=256,O=P+1+I,k=30,N=19,K=2*O+1,U=15,L=3,re=258,Z=re+L+1,V=32,ee=42,fe=69,_e=73,ce=91,Ee=103,Ie=113,ue=666,pe=1,Ae=2,Y=3,se=4,F=3;function j(x,ke){return x.msg=s[ke],ke}function B(x){return(x<<1)-(x>4?9:0)}function $(x){for(var ke=x.length;--ke>=0;)x[ke]=0}function G(x){var ke=x.state,Ne=ke.pending;Ne>x.avail_out&&(Ne=x.avail_out),Ne!==0&&(o.arraySet(x.output,ke.pending_buf,ke.pending_out,Ne,x.next_out),x.next_out+=Ne,ke.pending_out+=Ne,x.total_out+=Ne,x.avail_out-=Ne,ke.pending-=Ne,ke.pending===0&&(ke.pending_out=0))}function X(x,ke){r._tr_flush_block(x,x.block_start>=0?x.block_start:-1,x.strstart-x.block_start,ke),x.block_start=x.strstart,G(x.strm)}function H(x,ke){x.pending_buf[x.pending++]=ke}function he(x,ke){x.pending_buf[x.pending++]=ke>>>8&255,x.pending_buf[x.pending++]=ke&255}function we(x,ke,Ne,ae){var Se=x.avail_in;return Se>ae&&(Se=ae),Se===0?0:(x.avail_in-=Se,o.arraySet(ke,x.input,x.next_in,Se,Ne),x.state.wrap===1?x.adler=t(x.adler,ke,Se,Ne):x.state.wrap===2&&(x.adler=n(x.adler,ke,Se,Ne)),x.next_in+=Se,x.total_in+=Se,Se)}function Te(x,ke){var Ne=x.max_chain_length,ae=x.strstart,Se,Oe,He=x.prev_length,Ve=x.nice_match,ze=x.strstart>x.w_size-Z?x.strstart-(x.w_size-Z):0,Xe=x.window,ct=x.w_mask,Ze=x.prev,Qe=x.strstart+re,rt=Xe[ae+He-1],st=Xe[ae+He];x.prev_length>=x.good_match&&(Ne>>=2),Ve>x.lookahead&&(Ve=x.lookahead);do if(Se=ke,!(Xe[Se+He]!==st||Xe[Se+He-1]!==rt||Xe[Se]!==Xe[ae]||Xe[++Se]!==Xe[ae+1])){ae+=2,Se++;do;while(Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&Xe[++ae]===Xe[++Se]&&ae<Qe);if(Oe=re-(Qe-ae),ae=Qe-re,Oe>He){if(x.match_start=ke,He=Oe,Oe>=Ve)break;rt=Xe[ae+He-1],st=Xe[ae+He]}}while((ke=Ze[ke&ct])>ze&&--Ne!=0);return He<=x.lookahead?He:x.lookahead}function De(x){var ke=x.w_size,Ne,ae,Se,Oe,He;do{if(Oe=x.window_size-x.lookahead-x.strstart,x.strstart>=ke+(ke-Z)){o.arraySet(x.window,x.window,ke,ke,0),x.match_start-=ke,x.strstart-=ke,x.block_start-=ke,ae=x.hash_size,Ne=ae;do Se=x.head[--Ne],x.head[Ne]=Se>=ke?Se-ke:0;while(--ae);ae=ke,Ne=ae;do Se=x.prev[--Ne],x.prev[Ne]=Se>=ke?Se-ke:0;while(--ae);Oe+=ke}if(x.strm.avail_in===0)break;if(ae=we(x.strm,x.window,x.strstart+x.lookahead,Oe),x.lookahead+=ae,x.lookahead+x.insert>=L)for(He=x.strstart-x.insert,x.ins_h=x.window[He],x.ins_h=(x.ins_h<<x.hash_shift^x.window[He+1])&x.hash_mask;x.insert&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[He+L-1])&x.hash_mask,x.prev[He&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=He,He++,x.insert--,!(x.lookahead+x.insert<L)););}while(x.lookahead<Z&&x.strm.avail_in!==0)}function Me(x,ke){var Ne=65535;for(Ne>x.pending_buf_size-5&&(Ne=x.pending_buf_size-5);;){if(x.lookahead<=1){if(De(x),x.lookahead===0&&ke===u)return pe;if(x.lookahead===0)break}x.strstart+=x.lookahead,x.lookahead=0;var ae=x.block_start+Ne;if((x.strstart===0||x.strstart>=ae)&&(x.lookahead=x.strstart-ae,x.strstart=ae,X(x,!1),x.strm.avail_out===0)||x.strstart-x.block_start>=x.w_size-Z&&(X(x,!1),x.strm.avail_out===0))return pe}return x.insert=0,ke===a?(X(x,!0),x.strm.avail_out===0?Y:se):(x.strstart>x.block_start&&(X(x,!1),x.strm.avail_out===0),pe)}function Be(x,ke){for(var Ne,ae;;){if(x.lookahead<Z){if(De(x),x.lookahead<Z&&ke===u)return pe;if(x.lookahead===0)break}if(Ne=0,x.lookahead>=L&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+L-1])&x.hash_mask,Ne=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),Ne!==0&&x.strstart-Ne<=x.w_size-Z&&(x.match_length=Te(x,Ne)),x.match_length>=L)if(ae=r._tr_tally(x,x.strstart-x.match_start,x.match_length-L),x.lookahead-=x.match_length,x.match_length<=x.max_lazy_match&&x.lookahead>=L){x.match_length--;do x.strstart++,x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+L-1])&x.hash_mask,Ne=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart;while(--x.match_length!=0);x.strstart++}else x.strstart+=x.match_length,x.match_length=0,x.ins_h=x.window[x.strstart],x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+1])&x.hash_mask;else ae=r._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++;if(ae&&(X(x,!1),x.strm.avail_out===0))return pe}return x.insert=x.strstart<L-1?x.strstart:L-1,ke===a?(X(x,!0),x.strm.avail_out===0?Y:se):x.last_lit&&(X(x,!1),x.strm.avail_out===0)?pe:Ae}function Le(x,ke){for(var Ne,ae,Se;;){if(x.lookahead<Z){if(De(x),x.lookahead<Z&&ke===u)return pe;if(x.lookahead===0)break}if(Ne=0,x.lookahead>=L&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+L-1])&x.hash_mask,Ne=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart),x.prev_length=x.match_length,x.prev_match=x.match_start,x.match_length=L-1,Ne!==0&&x.prev_length<x.max_lazy_match&&x.strstart-Ne<=x.w_size-Z&&(x.match_length=Te(x,Ne),x.match_length<=5&&(x.strategy===v||x.match_length===L&&x.strstart-x.match_start>4096)&&(x.match_length=L-1)),x.prev_length>=L&&x.match_length<=x.prev_length){Se=x.strstart+x.lookahead-L,ae=r._tr_tally(x,x.strstart-1-x.prev_match,x.prev_length-L),x.lookahead-=x.prev_length-1,x.prev_length-=2;do++x.strstart<=Se&&(x.ins_h=(x.ins_h<<x.hash_shift^x.window[x.strstart+L-1])&x.hash_mask,Ne=x.prev[x.strstart&x.w_mask]=x.head[x.ins_h],x.head[x.ins_h]=x.strstart);while(--x.prev_length!=0);if(x.match_available=0,x.match_length=L-1,x.strstart++,ae&&(X(x,!1),x.strm.avail_out===0))return pe}else if(x.match_available){if(ae=r._tr_tally(x,0,x.window[x.strstart-1]),ae&&X(x,!1),x.strstart++,x.lookahead--,x.strm.avail_out===0)return pe}else x.match_available=1,x.strstart++,x.lookahead--}return x.match_available&&(ae=r._tr_tally(x,0,x.window[x.strstart-1]),x.match_available=0),x.insert=x.strstart<L-1?x.strstart:L-1,ke===a?(X(x,!0),x.strm.avail_out===0?Y:se):x.last_lit&&(X(x,!1),x.strm.avail_out===0)?pe:Ae}function W(x,ke){for(var Ne,ae,Se,Oe,He=x.window;;){if(x.lookahead<=re){if(De(x),x.lookahead<=re&&ke===u)return pe;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=L&&x.strstart>0&&(Se=x.strstart-1,ae=He[Se],ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se])){Oe=x.strstart+re;do;while(ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&ae===He[++Se]&&Se<Oe);x.match_length=re-(Oe-Se),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=L?(Ne=r._tr_tally(x,1,x.match_length-L),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(Ne=r._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),Ne&&(X(x,!1),x.strm.avail_out===0))return pe}return x.insert=0,ke===a?(X(x,!0),x.strm.avail_out===0?Y:se):x.last_lit&&(X(x,!1),x.strm.avail_out===0)?pe:Ae}function q(x,ke){for(var Ne;;){if(x.lookahead===0&&(De(x),x.lookahead===0)){if(ke===u)return pe;break}if(x.match_length=0,Ne=r._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,Ne&&(X(x,!1),x.strm.avail_out===0))return pe}return x.insert=0,ke===a?(X(x,!0),x.strm.avail_out===0?Y:se):x.last_lit&&(X(x,!1),x.strm.avail_out===0)?pe:Ae}function M(x,ke,Ne,ae,Se){this.good_length=x,this.max_lazy=ke,this.nice_length=Ne,this.max_chain=ae,this.func=Se}var ie;ie=[new M(0,0,0,0,Me),new M(4,4,8,4,Be),new M(4,5,16,8,Be),new M(4,6,32,32,Be),new M(4,4,16,16,Le),new M(8,16,32,32,Le),new M(8,16,128,128,Le),new M(8,32,128,256,Le),new M(32,128,258,1024,Le),new M(32,258,258,4096,Le)];function ve(x){x.window_size=2*x.w_size,$(x.head),x.max_lazy_match=ie[x.level].max_lazy,x.good_match=ie[x.level].good_length,x.nice_match=ie[x.level].nice_length,x.max_chain_length=ie[x.level].max_chain,x.strstart=0,x.block_start=0,x.lookahead=0,x.insert=0,x.match_length=x.prev_length=L-1,x.match_available=0,x.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(K*2),this.dyn_dtree=new o.Buf16((2*k+1)*2),this.bl_tree=new o.Buf16((2*N+1)*2),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(U+1),this.heap=new o.Buf16(2*O+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*O+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(x){var ke;return!x||!x.state?j(x,g):(x.total_in=x.total_out=0,x.data_type=R,ke=x.state,ke.pending=0,ke.pending_out=0,ke.wrap<0&&(ke.wrap=-ke.wrap),ke.status=ke.wrap?ee:Ie,x.adler=ke.wrap===2?0:1,ke.last_flush=u,r._tr_init(ke),d)}function de(x){var ke=z(x);return ke===d&&ve(x.state),ke}function be(x,ke){return!x||!x.state||x.state.wrap!==2?g:(x.state.gzhead=ke,d)}function le(x,ke,Ne,ae,Se,Oe){if(!x)return g;var He=1;if(ke===m&&(ke=6),ae<0?(He=0,ae=-ae):ae>15&&(He=2,ae-=16),Se<1||Se>E||Ne!==S||ae<8||ae>15||ke<0||ke>9||Oe<0||Oe>b)return j(x,g);ae===8&&(ae=9);var Ve=new D;return x.state=Ve,Ve.strm=x,Ve.wrap=He,Ve.gzhead=null,Ve.w_bits=ae,Ve.w_size=1<<Ve.w_bits,Ve.w_mask=Ve.w_size-1,Ve.hash_bits=Se+7,Ve.hash_size=1<<Ve.hash_bits,Ve.hash_mask=Ve.hash_size-1,Ve.hash_shift=~~((Ve.hash_bits+L-1)/L),Ve.window=new o.Buf8(Ve.w_size*2),Ve.head=new o.Buf16(Ve.hash_size),Ve.prev=new o.Buf16(Ve.w_size),Ve.lit_bufsize=1<<Se+6,Ve.pending_buf_size=Ve.lit_bufsize*4,Ve.pending_buf=new o.Buf8(Ve.pending_buf_size),Ve.d_buf=1*Ve.lit_bufsize,Ve.l_buf=(1+2)*Ve.lit_bufsize,Ve.level=ke,Ve.strategy=Oe,Ve.method=Ne,de(x)}function ye(x,ke){return le(x,ke,S,A,C,T)}function J(x,ke){var Ne,ae,Se,Oe;if(!x||!x.state||ke>c||ke<0)return x?j(x,g):g;if(ae=x.state,!x.output||!x.input&&x.avail_in!==0||ae.status===ue&&ke!==a)return j(x,x.avail_out===0?_:g);if(ae.strm=x,Ne=ae.last_flush,ae.last_flush=ke,ae.status===ee)if(ae.wrap===2)x.adler=0,H(ae,31),H(ae,139),H(ae,8),ae.gzhead?(H(ae,(ae.gzhead.text?1:0)+(ae.gzhead.hcrc?2:0)+(ae.gzhead.extra?4:0)+(ae.gzhead.name?8:0)+(ae.gzhead.comment?16:0)),H(ae,ae.gzhead.time&255),H(ae,ae.gzhead.time>>8&255),H(ae,ae.gzhead.time>>16&255),H(ae,ae.gzhead.time>>24&255),H(ae,ae.level===9?2:ae.strategy>=w||ae.level<2?4:0),H(ae,ae.gzhead.os&255),ae.gzhead.extra&&ae.gzhead.extra.length&&(H(ae,ae.gzhead.extra.length&255),H(ae,ae.gzhead.extra.length>>8&255)),ae.gzhead.hcrc&&(x.adler=n(x.adler,ae.pending_buf,ae.pending,0)),ae.gzindex=0,ae.status=fe):(H(ae,0),H(ae,0),H(ae,0),H(ae,0),H(ae,0),H(ae,ae.level===9?2:ae.strategy>=w||ae.level<2?4:0),H(ae,F),ae.status=Ie);else{var He=S+(ae.w_bits-8<<4)<<8,Ve=-1;ae.strategy>=w||ae.level<2?Ve=0:ae.level<6?Ve=1:ae.level===6?Ve=2:Ve=3,He|=Ve<<6,ae.strstart!==0&&(He|=V),He+=31-He%31,ae.status=Ie,he(ae,He),ae.strstart!==0&&(he(ae,x.adler>>>16),he(ae,x.adler&65535)),x.adler=1}if(ae.status===fe)if(ae.gzhead.extra){for(Se=ae.pending;ae.gzindex<(ae.gzhead.extra.length&65535)&&!(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),G(x),Se=ae.pending,ae.pending===ae.pending_buf_size));)H(ae,ae.gzhead.extra[ae.gzindex]&255),ae.gzindex++;ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),ae.gzindex===ae.gzhead.extra.length&&(ae.gzindex=0,ae.status=_e)}else ae.status=_e;if(ae.status===_e)if(ae.gzhead.name){Se=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),G(x),Se=ae.pending,ae.pending===ae.pending_buf_size)){Oe=1;break}ae.gzindex<ae.gzhead.name.length?Oe=ae.gzhead.name.charCodeAt(ae.gzindex++)&255:Oe=0,H(ae,Oe)}while(Oe!==0);ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),Oe===0&&(ae.gzindex=0,ae.status=ce)}else ae.status=ce;if(ae.status===ce)if(ae.gzhead.comment){Se=ae.pending;do{if(ae.pending===ae.pending_buf_size&&(ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),G(x),Se=ae.pending,ae.pending===ae.pending_buf_size)){Oe=1;break}ae.gzindex<ae.gzhead.comment.length?Oe=ae.gzhead.comment.charCodeAt(ae.gzindex++)&255:Oe=0,H(ae,Oe)}while(Oe!==0);ae.gzhead.hcrc&&ae.pending>Se&&(x.adler=n(x.adler,ae.pending_buf,ae.pending-Se,Se)),Oe===0&&(ae.status=Ee)}else ae.status=Ee;if(ae.status===Ee&&(ae.gzhead.hcrc?(ae.pending+2>ae.pending_buf_size&&G(x),ae.pending+2<=ae.pending_buf_size&&(H(ae,x.adler&255),H(ae,x.adler>>8&255),x.adler=0,ae.status=Ie)):ae.status=Ie),ae.pending!==0){if(G(x),x.avail_out===0)return ae.last_flush=-1,d}else if(x.avail_in===0&&B(ke)<=B(Ne)&&ke!==a)return j(x,_);if(ae.status===ue&&x.avail_in!==0)return j(x,_);if(x.avail_in!==0||ae.lookahead!==0||ke!==u&&ae.status!==ue){var ze=ae.strategy===w?q(ae,ke):ae.strategy===y?W(ae,ke):ie[ae.level].func(ae,ke);if((ze===Y||ze===se)&&(ae.status=ue),ze===pe||ze===Y)return x.avail_out===0&&(ae.last_flush=-1),d;if(ze===Ae&&(ke===l?r._tr_align(ae):ke!==c&&(r._tr_stored_block(ae,0,0,!1),ke===f&&($(ae.head),ae.lookahead===0&&(ae.strstart=0,ae.block_start=0,ae.insert=0))),G(x),x.avail_out===0))return ae.last_flush=-1,d}return ke!==a?d:ae.wrap<=0?h:(ae.wrap===2?(H(ae,x.adler&255),H(ae,x.adler>>8&255),H(ae,x.adler>>16&255),H(ae,x.adler>>24&255),H(ae,x.total_in&255),H(ae,x.total_in>>8&255),H(ae,x.total_in>>16&255),H(ae,x.total_in>>24&255)):(he(ae,x.adler>>>16),he(ae,x.adler&65535)),G(x),ae.wrap>0&&(ae.wrap=-ae.wrap),ae.pending!==0?d:h)}function qe(x){var ke;return!x||!x.state?g:(ke=x.state.status,ke!==ee&&ke!==fe&&ke!==_e&&ke!==ce&&ke!==Ee&&ke!==Ie&&ke!==ue?j(x,g):(x.state=null,ke===Ie?j(x,p):d))}function Ue(x,ke){var Ne=ke.length,ae,Se,Oe,He,Ve,ze,Xe,ct;if(!x||!x.state||(ae=x.state,He=ae.wrap,He===2||He===1&&ae.status!==ee||ae.lookahead))return g;for(He===1&&(x.adler=t(x.adler,ke,Ne,0)),ae.wrap=0,Ne>=ae.w_size&&(He===0&&($(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0),ct=new o.Buf8(ae.w_size),o.arraySet(ct,ke,Ne-ae.w_size,ae.w_size,0),ke=ct,Ne=ae.w_size),Ve=x.avail_in,ze=x.next_in,Xe=x.input,x.avail_in=Ne,x.next_in=0,x.input=ke,De(ae);ae.lookahead>=L;){Se=ae.strstart,Oe=ae.lookahead-(L-1);do ae.ins_h=(ae.ins_h<<ae.hash_shift^ae.window[Se+L-1])&ae.hash_mask,ae.prev[Se&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=Se,Se++;while(--Oe);ae.strstart=Se,ae.lookahead=L-1,De(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=L-1,ae.match_available=0,x.next_in=ze,x.input=Xe,x.avail_in=Ve,ae.wrap=He,d}e.deflateInit=ye,e.deflateInit2=le,e.deflateReset=de,e.deflateResetKeep=z,e.deflateSetHeader=be,e.deflate=J,e.deflateEnd=qe,e.deflateSetDictionary=Ue,e.deflateInfo="pako deflate (from Nodeca project)"}}),require_strings=__commonJS({"node_modules/pako/lib/utils/strings.js"(e){init_node_globals();var o=require_common2(),r=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{t=!1}var n=new o.Buf8(256);for(s=0;s<256;s++)n[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;var s;n[254]=n[254]=1,e.string2buf=function(l){var f,a,c,d,h,g=l.length,p=0;for(d=0;d<g;d++)a=l.charCodeAt(d),(a&64512)==55296&&d+1<g&&(c=l.charCodeAt(d+1),(c&64512)==56320&&(a=65536+(a-55296<<10)+(c-56320),d++)),p+=a<128?1:a<2048?2:a<65536?3:4;for(f=new o.Buf8(p),h=0,d=0;h<p;d++)a=l.charCodeAt(d),(a&64512)==55296&&d+1<g&&(c=l.charCodeAt(d+1),(c&64512)==56320&&(a=65536+(a-55296<<10)+(c-56320),d++)),a<128?f[h++]=a:a<2048?(f[h++]=192|a>>>6,f[h++]=128|a&63):a<65536?(f[h++]=224|a>>>12,f[h++]=128|a>>>6&63,f[h++]=128|a&63):(f[h++]=240|a>>>18,f[h++]=128|a>>>12&63,f[h++]=128|a>>>6&63,f[h++]=128|a&63);return f};function u(l,f){if(f<65534&&(l.subarray&&t||!l.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(l,f));for(var a="",c=0;c<f;c++)a+=String.fromCharCode(l[c]);return a}e.buf2binstring=function(l){return u(l,l.length)},e.binstring2buf=function(l){for(var f=new o.Buf8(l.length),a=0,c=f.length;a<c;a++)f[a]=l.charCodeAt(a);return f},e.buf2string=function(l,f){var a,c,d,h,g=f||l.length,p=new Array(g*2);for(c=0,a=0;a<g;){if(d=l[a++],d<128){p[c++]=d;continue}if(h=n[d],h>4){p[c++]=65533,a+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&a<g;)d=d<<6|l[a++]&63,h--;if(h>1){p[c++]=65533;continue}d<65536?p[c++]=d:(d-=65536,p[c++]=55296|d>>10&1023,p[c++]=56320|d&1023)}return u(p,c)},e.utf8border=function(l,f){var a;for(f=f||l.length,f>l.length&&(f=l.length),a=f-1;a>=0&&(l[a]&192)==128;)a--;return a<0||a===0?f:a+n[l[a]]>f?a:f}}}),require_zstream=__commonJS({"node_modules/pako/lib/zlib/zstream.js"(e,o){init_node_globals();function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o.exports=r}}),require_deflate2=__commonJS({"node_modules/pako/lib/deflate.js"(e){init_node_globals();var o=require_deflate(),r=require_common2(),t=require_strings(),n=require_messages(),s=require_zstream(),u=Object.prototype.toString,l=0,f=4,a=0,c=1,d=2,h=-1,g=0,p=8;function _(y){if(!(this instanceof _))return new _(y);this.options=r.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},y||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var T=o.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(T!==a)throw new Error(n[T]);if(b.header&&o.deflateSetHeader(this.strm,b.header),b.dictionary){var R;if(typeof b.dictionary=="string"?R=t.string2buf(b.dictionary):u.call(b.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(b.dictionary):R=b.dictionary,T=o.deflateSetDictionary(this.strm,R),T!==a)throw new Error(n[T]);this._dict_set=!0}}_.prototype.push=function(y,b){var T=this.strm,R=this.options.chunkSize,S,E;if(this.ended)return!1;E=b===~~b?b:b===!0?f:l,typeof y=="string"?T.input=t.string2buf(y):u.call(y)==="[object ArrayBuffer]"?T.input=new Uint8Array(y):T.input=y,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new r.Buf8(R),T.next_out=0,T.avail_out=R),S=o.deflate(T,E),S!==c&&S!==a)return this.onEnd(S),this.ended=!0,!1;(T.avail_out===0||T.avail_in===0&&(E===f||E===d))&&(this.options.to==="string"?this.onData(t.buf2binstring(r.shrinkBuf(T.output,T.next_out))):this.onData(r.shrinkBuf(T.output,T.next_out)))}while((T.avail_in>0||T.avail_out===0)&&S!==c);return E===f?(S=o.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===a):(E===d&&(this.onEnd(a),T.avail_out=0),!0)},_.prototype.onData=function(y){this.chunks.push(y)},_.prototype.onEnd=function(y){y===a&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg};function m(y,b){var T=new _(b);if(T.push(y,!0),T.err)throw T.msg||n[T.err];return T.result}function v(y,b){return b=b||{},b.raw=!0,m(y,b)}function w(y,b){return b=b||{},b.gzip=!0,m(y,b)}e.Deflate=_,e.deflate=m,e.deflateRaw=v,e.gzip=w}}),require_inffast=__commonJS({"node_modules/pako/lib/zlib/inffast.js"(e,o){init_node_globals();var r=30,t=12;o.exports=function(s,u){var l,f,a,c,d,h,g,p,_,m,v,w,y,b,T,R,S,E,A,C,I,P,O,k,N;l=s.state,f=s.next_in,k=s.input,a=f+(s.avail_in-5),c=s.next_out,N=s.output,d=c-(u-s.avail_out),h=c+(s.avail_out-257),g=l.dmax,p=l.wsize,_=l.whave,m=l.wnext,v=l.window,w=l.hold,y=l.bits,b=l.lencode,T=l.distcode,R=(1<<l.lenbits)-1,S=(1<<l.distbits)-1;e:do{y<15&&(w+=k[f++]<<y,y+=8,w+=k[f++]<<y,y+=8),E=b[w&R];t:for(;;){if(A=E>>>24,w>>>=A,y-=A,A=E>>>16&255,A===0)N[c++]=E&65535;else if(A&16){C=E&65535,A&=15,A&&(y<A&&(w+=k[f++]<<y,y+=8),C+=w&(1<<A)-1,w>>>=A,y-=A),y<15&&(w+=k[f++]<<y,y+=8,w+=k[f++]<<y,y+=8),E=T[w&S];r:for(;;){if(A=E>>>24,w>>>=A,y-=A,A=E>>>16&255,A&16){if(I=E&65535,A&=15,y<A&&(w+=k[f++]<<y,y+=8,y<A&&(w+=k[f++]<<y,y+=8)),I+=w&(1<<A)-1,I>g){s.msg="invalid distance too far back",l.mode=r;break e}if(w>>>=A,y-=A,A=c-d,I>A){if(A=I-A,A>_&&l.sane){s.msg="invalid distance too far back",l.mode=r;break e}if(P=0,O=v,m===0){if(P+=p-A,A<C){C-=A;do N[c++]=v[P++];while(--A);P=c-I,O=N}}else if(m<A){if(P+=p+m-A,A-=m,A<C){C-=A;do N[c++]=v[P++];while(--A);if(P=0,m<C){A=m,C-=A;do N[c++]=v[P++];while(--A);P=c-I,O=N}}}else if(P+=m-A,A<C){C-=A;do N[c++]=v[P++];while(--A);P=c-I,O=N}for(;C>2;)N[c++]=O[P++],N[c++]=O[P++],N[c++]=O[P++],C-=3;C&&(N[c++]=O[P++],C>1&&(N[c++]=O[P++]))}else{P=c-I;do N[c++]=N[P++],N[c++]=N[P++],N[c++]=N[P++],C-=3;while(C>2);C&&(N[c++]=N[P++],C>1&&(N[c++]=N[P++]))}}else if((A&64)==0){E=T[(E&65535)+(w&(1<<A)-1)];continue r}else{s.msg="invalid distance code",l.mode=r;break e}break}}else if((A&64)==0){E=b[(E&65535)+(w&(1<<A)-1)];continue t}else if(A&32){l.mode=t;break e}else{s.msg="invalid literal/length code",l.mode=r;break e}break}}while(f<a&&c<h);C=y>>3,f-=C,y-=C<<3,w&=(1<<y)-1,s.next_in=f,s.next_out=c,s.avail_in=f<a?5+(a-f):5-(f-a),s.avail_out=c<h?257+(h-c):257-(c-h),l.hold=w,l.bits=y}}}),require_inftrees=__commonJS({"node_modules/pako/lib/zlib/inftrees.js"(e,o){init_node_globals();var r=require_common2(),t=15,n=852,s=592,u=0,l=1,f=2,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(p,_,m,v,w,y,b,T){var R=T.bits,S=0,E=0,A=0,C=0,I=0,P=0,O=0,k=0,N=0,K=0,U,L,re,Z,V,ee=null,fe=0,_e,ce=new r.Buf16(t+1),Ee=new r.Buf16(t+1),Ie=null,ue=0,pe,Ae,Y;for(S=0;S<=t;S++)ce[S]=0;for(E=0;E<v;E++)ce[_[m+E]]++;for(I=R,C=t;C>=1&&ce[C]===0;C--);if(I>C&&(I=C),C===0)return w[y++]=1<<24|64<<16|0,w[y++]=1<<24|64<<16|0,T.bits=1,0;for(A=1;A<C&&ce[A]===0;A++);for(I<A&&(I=A),k=1,S=1;S<=t;S++)if(k<<=1,k-=ce[S],k<0)return-1;if(k>0&&(p===u||C!==1))return-1;for(Ee[1]=0,S=1;S<t;S++)Ee[S+1]=Ee[S]+ce[S];for(E=0;E<v;E++)_[m+E]!==0&&(b[Ee[_[m+E]]++]=E);if(p===u?(ee=Ie=b,_e=19):p===l?(ee=a,fe-=257,Ie=c,ue-=257,_e=256):(ee=d,Ie=h,_e=-1),K=0,E=0,S=A,V=y,P=I,O=0,re=-1,N=1<<I,Z=N-1,p===l&&N>n||p===f&&N>s)return 1;for(;;){pe=S-O,b[E]<_e?(Ae=0,Y=b[E]):b[E]>_e?(Ae=Ie[ue+b[E]],Y=ee[fe+b[E]]):(Ae=32+64,Y=0),U=1<<S-O,L=1<<P,A=L;do L-=U,w[V+(K>>O)+L]=pe<<24|Ae<<16|Y|0;while(L!==0);for(U=1<<S-1;K&U;)U>>=1;if(U!==0?(K&=U-1,K+=U):K=0,E++,--ce[S]==0){if(S===C)break;S=_[m+b[E]]}if(S>I&&(K&Z)!==re){for(O===0&&(O=I),V+=A,P=S-O,k=1<<P;P+O<C&&(k-=ce[P+O],!(k<=0));)P++,k<<=1;if(N+=1<<P,p===l&&N>n||p===f&&N>s)return 1;re=K&Z,w[re]=I<<24|P<<16|V-y|0}}return K!==0&&(w[V+K]=S-O<<24|64<<16|0),T.bits=I,0}}}),require_inflate=__commonJS({"node_modules/pako/lib/zlib/inflate.js"(e){init_node_globals();var o=require_common2(),r=require_adler32(),t=require_crc32(),n=require_inffast(),s=require_inftrees(),u=0,l=1,f=2,a=4,c=5,d=6,h=0,g=1,p=2,_=-2,m=-3,v=-4,w=-5,y=8,b=1,T=2,R=3,S=4,E=5,A=6,C=7,I=8,P=9,O=10,k=11,N=12,K=13,U=14,L=15,re=16,Z=17,V=18,ee=19,fe=20,_e=21,ce=22,Ee=23,Ie=24,ue=25,pe=26,Ae=27,Y=28,se=29,F=30,j=31,B=32,$=852,G=592,X=15,H=X;function he(le){return(le>>>24&255)+(le>>>8&65280)+((le&65280)<<8)+((le&255)<<24)}function we(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Te(le){var ye;return!le||!le.state?_:(ye=le.state,le.total_in=le.total_out=ye.total=0,le.msg="",ye.wrap&&(le.adler=ye.wrap&1),ye.mode=b,ye.last=0,ye.havedict=0,ye.dmax=32768,ye.head=null,ye.hold=0,ye.bits=0,ye.lencode=ye.lendyn=new o.Buf32($),ye.distcode=ye.distdyn=new o.Buf32(G),ye.sane=1,ye.back=-1,h)}function De(le){var ye;return!le||!le.state?_:(ye=le.state,ye.wsize=0,ye.whave=0,ye.wnext=0,Te(le))}function Me(le,ye){var J,qe;return!le||!le.state||(qe=le.state,ye<0?(J=0,ye=-ye):(J=(ye>>4)+1,ye<48&&(ye&=15)),ye&&(ye<8||ye>15))?_:(qe.window!==null&&qe.wbits!==ye&&(qe.window=null),qe.wrap=J,qe.wbits=ye,De(le))}function Be(le,ye){var J,qe;return le?(qe=new we,le.state=qe,qe.window=null,J=Me(le,ye),J!==h&&(le.state=null),J):_}function Le(le){return Be(le,H)}var W=!0,q,M;function ie(le){if(W){var ye;for(q=new o.Buf32(512),M=new o.Buf32(32),ye=0;ye<144;)le.lens[ye++]=8;for(;ye<256;)le.lens[ye++]=9;for(;ye<280;)le.lens[ye++]=7;for(;ye<288;)le.lens[ye++]=8;for(s(l,le.lens,0,288,q,0,le.work,{bits:9}),ye=0;ye<32;)le.lens[ye++]=5;s(f,le.lens,0,32,M,0,le.work,{bits:5}),W=!1}le.lencode=q,le.lenbits=9,le.distcode=M,le.distbits=5}function ve(le,ye,J,qe){var Ue,x=le.state;return x.window===null&&(x.wsize=1<<x.wbits,x.wnext=0,x.whave=0,x.window=new o.Buf8(x.wsize)),qe>=x.wsize?(o.arraySet(x.window,ye,J-x.wsize,x.wsize,0),x.wnext=0,x.whave=x.wsize):(Ue=x.wsize-x.wnext,Ue>qe&&(Ue=qe),o.arraySet(x.window,ye,J-qe,Ue,x.wnext),qe-=Ue,qe?(o.arraySet(x.window,ye,J-qe,qe,0),x.wnext=qe,x.whave=x.wsize):(x.wnext+=Ue,x.wnext===x.wsize&&(x.wnext=0),x.whave<x.wsize&&(x.whave+=Ue))),0}function D(le,ye){var J,qe,Ue,x,ke,Ne,ae,Se,Oe,He,Ve,ze,Xe,ct,Ze=0,Qe,rt,st,it,At,ht,tt,ut,ot=new o.Buf8(4),dt,_t,Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return _;J=le.state,J.mode===N&&(J.mode=K),ke=le.next_out,Ue=le.output,ae=le.avail_out,x=le.next_in,qe=le.input,Ne=le.avail_in,Se=J.hold,Oe=J.bits,He=Ne,Ve=ae,ut=h;e:for(;;)switch(J.mode){case b:if(J.wrap===0){J.mode=K;break}for(;Oe<16;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(J.wrap&2&&Se===35615){J.check=0,ot[0]=Se&255,ot[1]=Se>>>8&255,J.check=t(J.check,ot,2,0),Se=0,Oe=0,J.mode=T;break}if(J.flags=0,J.head&&(J.head.done=!1),!(J.wrap&1)||(((Se&255)<<8)+(Se>>8))%31){le.msg="incorrect header check",J.mode=F;break}if((Se&15)!==y){le.msg="unknown compression method",J.mode=F;break}if(Se>>>=4,Oe-=4,tt=(Se&15)+8,J.wbits===0)J.wbits=tt;else if(tt>J.wbits){le.msg="invalid window size",J.mode=F;break}J.dmax=1<<tt,le.adler=J.check=1,J.mode=Se&512?O:N,Se=0,Oe=0;break;case T:for(;Oe<16;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(J.flags=Se,(J.flags&255)!==y){le.msg="unknown compression method",J.mode=F;break}if(J.flags&57344){le.msg="unknown header flags set",J.mode=F;break}J.head&&(J.head.text=Se>>8&1),J.flags&512&&(ot[0]=Se&255,ot[1]=Se>>>8&255,J.check=t(J.check,ot,2,0)),Se=0,Oe=0,J.mode=R;case R:for(;Oe<32;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.head&&(J.head.time=Se),J.flags&512&&(ot[0]=Se&255,ot[1]=Se>>>8&255,ot[2]=Se>>>16&255,ot[3]=Se>>>24&255,J.check=t(J.check,ot,4,0)),Se=0,Oe=0,J.mode=S;case S:for(;Oe<16;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.head&&(J.head.xflags=Se&255,J.head.os=Se>>8),J.flags&512&&(ot[0]=Se&255,ot[1]=Se>>>8&255,J.check=t(J.check,ot,2,0)),Se=0,Oe=0,J.mode=E;case E:if(J.flags&1024){for(;Oe<16;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.length=Se,J.head&&(J.head.extra_len=Se),J.flags&512&&(ot[0]=Se&255,ot[1]=Se>>>8&255,J.check=t(J.check,ot,2,0)),Se=0,Oe=0}else J.head&&(J.head.extra=null);J.mode=A;case A:if(J.flags&1024&&(ze=J.length,ze>Ne&&(ze=Ne),ze&&(J.head&&(tt=J.head.extra_len-J.length,J.head.extra||(J.head.extra=new Array(J.head.extra_len)),o.arraySet(J.head.extra,qe,x,ze,tt)),J.flags&512&&(J.check=t(J.check,qe,ze,x)),Ne-=ze,x+=ze,J.length-=ze),J.length))break e;J.length=0,J.mode=C;case C:if(J.flags&2048){if(Ne===0)break e;ze=0;do tt=qe[x+ze++],J.head&&tt&&J.length<65536&&(J.head.name+=String.fromCharCode(tt));while(tt&&ze<Ne);if(J.flags&512&&(J.check=t(J.check,qe,ze,x)),Ne-=ze,x+=ze,tt)break e}else J.head&&(J.head.name=null);J.length=0,J.mode=I;case I:if(J.flags&4096){if(Ne===0)break e;ze=0;do tt=qe[x+ze++],J.head&&tt&&J.length<65536&&(J.head.comment+=String.fromCharCode(tt));while(tt&&ze<Ne);if(J.flags&512&&(J.check=t(J.check,qe,ze,x)),Ne-=ze,x+=ze,tt)break e}else J.head&&(J.head.comment=null);J.mode=P;case P:if(J.flags&512){for(;Oe<16;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(Se!==(J.check&65535)){le.msg="header crc mismatch",J.mode=F;break}Se=0,Oe=0}J.head&&(J.head.hcrc=J.flags>>9&1,J.head.done=!0),le.adler=J.check=0,J.mode=N;break;case O:for(;Oe<32;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}le.adler=J.check=he(Se),Se=0,Oe=0,J.mode=k;case k:if(J.havedict===0)return le.next_out=ke,le.avail_out=ae,le.next_in=x,le.avail_in=Ne,J.hold=Se,J.bits=Oe,p;le.adler=J.check=1,J.mode=N;case N:if(ye===c||ye===d)break e;case K:if(J.last){Se>>>=Oe&7,Oe-=Oe&7,J.mode=Ae;break}for(;Oe<3;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}switch(J.last=Se&1,Se>>>=1,Oe-=1,Se&3){case 0:J.mode=U;break;case 1:if(ie(J),J.mode=fe,ye===d){Se>>>=2,Oe-=2;break e}break;case 2:J.mode=Z;break;case 3:le.msg="invalid block type",J.mode=F}Se>>>=2,Oe-=2;break;case U:for(Se>>>=Oe&7,Oe-=Oe&7;Oe<32;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if((Se&65535)!=(Se>>>16^65535)){le.msg="invalid stored block lengths",J.mode=F;break}if(J.length=Se&65535,Se=0,Oe=0,J.mode=L,ye===d)break e;case L:J.mode=re;case re:if(ze=J.length,ze){if(ze>Ne&&(ze=Ne),ze>ae&&(ze=ae),ze===0)break e;o.arraySet(Ue,qe,x,ze,ke),Ne-=ze,x+=ze,ae-=ze,ke+=ze,J.length-=ze;break}J.mode=N;break;case Z:for(;Oe<14;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(J.nlen=(Se&31)+257,Se>>>=5,Oe-=5,J.ndist=(Se&31)+1,Se>>>=5,Oe-=5,J.ncode=(Se&15)+4,Se>>>=4,Oe-=4,J.nlen>286||J.ndist>30){le.msg="too many length or distance symbols",J.mode=F;break}J.have=0,J.mode=V;case V:for(;J.have<J.ncode;){for(;Oe<3;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.lens[Nt[J.have++]]=Se&7,Se>>>=3,Oe-=3}for(;J.have<19;)J.lens[Nt[J.have++]]=0;if(J.lencode=J.lendyn,J.lenbits=7,dt={bits:J.lenbits},ut=s(u,J.lens,0,19,J.lencode,0,J.work,dt),J.lenbits=dt.bits,ut){le.msg="invalid code lengths set",J.mode=F;break}J.have=0,J.mode=ee;case ee:for(;J.have<J.nlen+J.ndist;){for(;Ze=J.lencode[Se&(1<<J.lenbits)-1],Qe=Ze>>>24,rt=Ze>>>16&255,st=Ze&65535,!(Qe<=Oe);){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(st<16)Se>>>=Qe,Oe-=Qe,J.lens[J.have++]=st;else{if(st===16){for(_t=Qe+2;Oe<_t;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(Se>>>=Qe,Oe-=Qe,J.have===0){le.msg="invalid bit length repeat",J.mode=F;break}tt=J.lens[J.have-1],ze=3+(Se&3),Se>>>=2,Oe-=2}else if(st===17){for(_t=Qe+3;Oe<_t;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}Se>>>=Qe,Oe-=Qe,tt=0,ze=3+(Se&7),Se>>>=3,Oe-=3}else{for(_t=Qe+7;Oe<_t;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}Se>>>=Qe,Oe-=Qe,tt=0,ze=11+(Se&127),Se>>>=7,Oe-=7}if(J.have+ze>J.nlen+J.ndist){le.msg="invalid bit length repeat",J.mode=F;break}for(;ze--;)J.lens[J.have++]=tt}}if(J.mode===F)break;if(J.lens[256]===0){le.msg="invalid code -- missing end-of-block",J.mode=F;break}if(J.lenbits=9,dt={bits:J.lenbits},ut=s(l,J.lens,0,J.nlen,J.lencode,0,J.work,dt),J.lenbits=dt.bits,ut){le.msg="invalid literal/lengths set",J.mode=F;break}if(J.distbits=6,J.distcode=J.distdyn,dt={bits:J.distbits},ut=s(f,J.lens,J.nlen,J.ndist,J.distcode,0,J.work,dt),J.distbits=dt.bits,ut){le.msg="invalid distances set",J.mode=F;break}if(J.mode=fe,ye===d)break e;case fe:J.mode=_e;case _e:if(Ne>=6&&ae>=258){le.next_out=ke,le.avail_out=ae,le.next_in=x,le.avail_in=Ne,J.hold=Se,J.bits=Oe,n(le,Ve),ke=le.next_out,Ue=le.output,ae=le.avail_out,x=le.next_in,qe=le.input,Ne=le.avail_in,Se=J.hold,Oe=J.bits,J.mode===N&&(J.back=-1);break}for(J.back=0;Ze=J.lencode[Se&(1<<J.lenbits)-1],Qe=Ze>>>24,rt=Ze>>>16&255,st=Ze&65535,!(Qe<=Oe);){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(rt&&(rt&240)==0){for(it=Qe,At=rt,ht=st;Ze=J.lencode[ht+((Se&(1<<it+At)-1)>>it)],Qe=Ze>>>24,rt=Ze>>>16&255,st=Ze&65535,!(it+Qe<=Oe);){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}Se>>>=it,Oe-=it,J.back+=it}if(Se>>>=Qe,Oe-=Qe,J.back+=Qe,J.length=st,rt===0){J.mode=pe;break}if(rt&32){J.back=-1,J.mode=N;break}if(rt&64){le.msg="invalid literal/length code",J.mode=F;break}J.extra=rt&15,J.mode=ce;case ce:if(J.extra){for(_t=J.extra;Oe<_t;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.length+=Se&(1<<J.extra)-1,Se>>>=J.extra,Oe-=J.extra,J.back+=J.extra}J.was=J.length,J.mode=Ee;case Ee:for(;Ze=J.distcode[Se&(1<<J.distbits)-1],Qe=Ze>>>24,rt=Ze>>>16&255,st=Ze&65535,!(Qe<=Oe);){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if((rt&240)==0){for(it=Qe,At=rt,ht=st;Ze=J.distcode[ht+((Se&(1<<it+At)-1)>>it)],Qe=Ze>>>24,rt=Ze>>>16&255,st=Ze&65535,!(it+Qe<=Oe);){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}Se>>>=it,Oe-=it,J.back+=it}if(Se>>>=Qe,Oe-=Qe,J.back+=Qe,rt&64){le.msg="invalid distance code",J.mode=F;break}J.offset=st,J.extra=rt&15,J.mode=Ie;case Ie:if(J.extra){for(_t=J.extra;Oe<_t;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}J.offset+=Se&(1<<J.extra)-1,Se>>>=J.extra,Oe-=J.extra,J.back+=J.extra}if(J.offset>J.dmax){le.msg="invalid distance too far back",J.mode=F;break}J.mode=ue;case ue:if(ae===0)break e;if(ze=Ve-ae,J.offset>ze){if(ze=J.offset-ze,ze>J.whave&&J.sane){le.msg="invalid distance too far back",J.mode=F;break}ze>J.wnext?(ze-=J.wnext,Xe=J.wsize-ze):Xe=J.wnext-ze,ze>J.length&&(ze=J.length),ct=J.window}else ct=Ue,Xe=ke-J.offset,ze=J.length;ze>ae&&(ze=ae),ae-=ze,J.length-=ze;do Ue[ke++]=ct[Xe++];while(--ze);J.length===0&&(J.mode=_e);break;case pe:if(ae===0)break e;Ue[ke++]=J.length,ae--,J.mode=_e;break;case Ae:if(J.wrap){for(;Oe<32;){if(Ne===0)break e;Ne--,Se|=qe[x++]<<Oe,Oe+=8}if(Ve-=ae,le.total_out+=Ve,J.total+=Ve,Ve&&(le.adler=J.check=J.flags?t(J.check,Ue,Ve,ke-Ve):r(J.check,Ue,Ve,ke-Ve)),Ve=ae,(J.flags?Se:he(Se))!==J.check){le.msg="incorrect data check",J.mode=F;break}Se=0,Oe=0}J.mode=Y;case Y:if(J.wrap&&J.flags){for(;Oe<32;){if(Ne===0)break e;Ne--,Se+=qe[x++]<<Oe,Oe+=8}if(Se!==(J.total&4294967295)){le.msg="incorrect length check",J.mode=F;break}Se=0,Oe=0}J.mode=se;case se:ut=g;break e;case F:ut=m;break e;case j:return v;case B:default:return _}return le.next_out=ke,le.avail_out=ae,le.next_in=x,le.avail_in=Ne,J.hold=Se,J.bits=Oe,(J.wsize||Ve!==le.avail_out&&J.mode<F&&(J.mode<Ae||ye!==a))&&ve(le,le.output,le.next_out,Ve-le.avail_out),He-=le.avail_in,Ve-=le.avail_out,le.total_in+=He,le.total_out+=Ve,J.total+=Ve,J.wrap&&Ve&&(le.adler=J.check=J.flags?t(J.check,Ue,Ve,le.next_out-Ve):r(J.check,Ue,Ve,le.next_out-Ve)),le.data_type=J.bits+(J.last?64:0)+(J.mode===N?128:0)+(J.mode===fe||J.mode===L?256:0),(He===0&&Ve===0||ye===a)&&ut===h&&(ut=w),ut}function z(le){if(!le||!le.state)return _;var ye=le.state;return ye.window&&(ye.window=null),le.state=null,h}function de(le,ye){var J;return!le||!le.state||(J=le.state,(J.wrap&2)==0)?_:(J.head=ye,ye.done=!1,h)}function be(le,ye){var J=ye.length,qe,Ue,x;return!le||!le.state||(qe=le.state,qe.wrap!==0&&qe.mode!==k)?_:qe.mode===k&&(Ue=1,Ue=r(Ue,ye,J,0),Ue!==qe.check)?m:(x=ve(le,ye,J,J),x?(qe.mode=j,v):(qe.havedict=1,h))}e.inflateReset=De,e.inflateReset2=Me,e.inflateResetKeep=Te,e.inflateInit=Le,e.inflateInit2=Be,e.inflate=D,e.inflateEnd=z,e.inflateGetHeader=de,e.inflateSetDictionary=be,e.inflateInfo="pako inflate (from Nodeca project)"}}),require_constants=__commonJS({"node_modules/pako/lib/zlib/constants.js"(e,o){init_node_globals(),o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}}),require_gzheader=__commonJS({"node_modules/pako/lib/zlib/gzheader.js"(e,o){init_node_globals();function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o.exports=r}}),require_inflate2=__commonJS({"node_modules/pako/lib/inflate.js"(e){init_node_globals();var o=require_inflate(),r=require_common2(),t=require_strings(),n=require_constants(),s=require_messages(),u=require_zstream(),l=require_gzheader(),f=Object.prototype.toString;function a(h){if(!(this instanceof a))return new a(h);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},h||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(h&&h.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var p=o.inflateInit2(this.strm,g.windowBits);if(p!==n.Z_OK)throw new Error(s[p]);if(this.header=new l,o.inflateGetHeader(this.strm,this.header),g.dictionary&&(typeof g.dictionary=="string"?g.dictionary=t.string2buf(g.dictionary):f.call(g.dictionary)==="[object ArrayBuffer]"&&(g.dictionary=new Uint8Array(g.dictionary)),g.raw&&(p=o.inflateSetDictionary(this.strm,g.dictionary),p!==n.Z_OK)))throw new Error(s[p])}a.prototype.push=function(h,g){var p=this.strm,_=this.options.chunkSize,m=this.options.dictionary,v,w,y,b,T,R=!1;if(this.ended)return!1;w=g===~~g?g:g===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof h=="string"?p.input=t.binstring2buf(h):f.call(h)==="[object ArrayBuffer]"?p.input=new Uint8Array(h):p.input=h,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new r.Buf8(_),p.next_out=0,p.avail_out=_),v=o.inflate(p,n.Z_NO_FLUSH),v===n.Z_NEED_DICT&&m&&(v=o.inflateSetDictionary(this.strm,m)),v===n.Z_BUF_ERROR&&R===!0&&(v=n.Z_OK,R=!1),v!==n.Z_STREAM_END&&v!==n.Z_OK)return this.onEnd(v),this.ended=!0,!1;p.next_out&&(p.avail_out===0||v===n.Z_STREAM_END||p.avail_in===0&&(w===n.Z_FINISH||w===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(y=t.utf8border(p.output,p.next_out),b=p.next_out-y,T=t.buf2string(p.output,y),p.next_out=b,p.avail_out=_-b,b&&r.arraySet(p.output,p.output,y,b,0),this.onData(T)):this.onData(r.shrinkBuf(p.output,p.next_out))),p.avail_in===0&&p.avail_out===0&&(R=!0)}while((p.avail_in>0||p.avail_out===0)&&v!==n.Z_STREAM_END);return v===n.Z_STREAM_END&&(w=n.Z_FINISH),w===n.Z_FINISH?(v=o.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===n.Z_OK):(w===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),p.avail_out=0),!0)},a.prototype.onData=function(h){this.chunks.push(h)},a.prototype.onEnd=function(h){h===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,g){var p=new a(g);if(p.push(h,!0),p.err)throw p.msg||s[p.err];return p.result}function d(h,g){return g=g||{},g.raw=!0,c(h,g)}e.Inflate=a,e.inflate=c,e.inflateRaw=d,e.ungzip=c}}),require_pako=__commonJS({"node_modules/pako/index.js"(e,o){init_node_globals();var r=require_common2().assign,t=require_deflate2(),n=require_inflate2(),s=require_constants(),u={};r(u,t,n,s),o.exports=u}}),require_it_to_buffer=__commonJS({"node_modules/it-to-buffer/index.js"(e,o){init_node_globals();var{concat:r}=(init_concat(),__toCommonJS(concat_exports));async function t(n){let s=new Uint8Array(0);for await(const u of n)s=r([s,u],s.length+u.length);return s}o.exports=t}}),require_get2=__commonJS({"node_modules/ipfs-core/cjs/src/components/get.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_err_code(),t=require_utils2(),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),s=(init_cid(),__toCommonJS(cid_exports)),u=require_it_tar(),l=require_it_pipe(),f=require_pako(),a=require_it_map(),c=require_it_to_buffer();function d(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}var h=d(r),g=d(f),p=d(a),_=d(c),m=6;function v({repo:w,preload:y}){async function*b(T,R={}){if(R.compressionLevel!=null&&(R.compressionLevel<-1||R.compressionLevel>9))throw h.default(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(R.preload!==!1){let A;try{A=t.normalizeCidPath(T).split("/")}catch(C){throw h.default(C,"ERR_INVALID_PATH")}y(s.CID.parse(A[0]))}const S=s.CID.asCID(T)||T,E=await o.exporter(S,w.blocks,R);if(E.type==="file"||E.type==="raw"){const A=[];!R.compress||R.archive===!0?A.push([{header:{name:E.path,mode:E.type==="file"&&E.unixfs.mode,mtime:E.type==="file"&&E.unixfs.mtime?new Date(E.unixfs.mtime.secs*1e3):void 0,size:E.size,type:"file"},body:E.content()}],u.pack(),C=>p.default(C,I=>I.slice())):A.push(E.content),R.compress&&A.push(async function*(C){const I=await _.default(C);yield g.default.gzip(I,{level:R.compressionLevel||m})}),yield*l.pipe(...A);return}if(E.type==="directory"){const A=[o.recursive(S,w.blocks,R),async function*(C){for await(const I of C){const P={header:{name:I.path,size:I.size}};if(I.type==="file")P.header.type="file",P.header.mode=I.unixfs.mode!=null?I.unixfs.mode:void 0,P.header.mtime=I.unixfs.mtime?new Date(I.unixfs.mtime.secs*1e3):void 0,P.body=I.content();else if(I.type==="raw")P.header.type="file",P.body=I.content();else if(I.type==="directory")P.header.type="directory",P.header.mode=I.unixfs.mode!=null?I.unixfs.mode:void 0,P.header.mtime=I.unixfs.mtime?new Date(I.unixfs.mtime.secs*1e3):void 0;else throw h.default(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");yield P}},u.pack(),C=>p.default(C,I=>I.slice())];if(R.compress){if(!R.archive)throw h.default(new Error("file is not regular"),"ERR_INVALID_PATH");R.compress&&A.push(async function*(C){const I=await _.default(C);yield g.default.gzip(I,{level:R.compressionLevel||m})})}yield*l.pipe(...A);return}throw h.default(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS")}return n.withTimeoutOption(b)}e.createGet=v}}),require_ls2=__commonJS({"node_modules/ipfs-core/cjs/src/components/ls.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_err_code(),t=require_utils2(),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),s=(init_cid(),__toCommonJS(cid_exports));function u(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var l=u(r);function f({repo:a,preload:c}){async function*d(h,g={}){const p=t.normalizeCidPath(h),_=p.split("/");g.preload!==!1&&c(s.CID.parse(_[0]));const m=s.CID.asCID(p)||p,v=await o.exporter(m,a.blocks,g);if(v.type==="file"){yield t.mapFile(v);return}if(v.type==="directory"){for await(const w of v.content())yield t.mapFile(w);return}throw l.default(new Error(`Unknown UnixFS type ${v.type}`),"ERR_UNKNOWN_UNIXFS_TYPE")}return n.withTimeoutOption(d)}e.createLs=f}}),require_root=__commonJS({"node_modules/ipfs-core/cjs/src/components/root.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_add3(),r=require_add_all2(),t=require_cat(),n=require_get2(),s=require_ls2(),u=class{constructor({preload:l,repo:f,options:a}){const c=r.createAddAll({preload:l,repo:f,options:a});this.addAll=c,this.add=o.createAdd({addAll:c}),this.cat=t.createCat({repo:f,preload:l}),this.get=n.createGet({repo:f,preload:l}),this.ls=s.createLs({repo:f,preload:l})}};e.RootAPI=u}}),require_version=__commonJS({"node_modules/ipfs-core/cjs/src/version.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o="0.14.0",r="",t="^0.154.0";e.commit=r,e.interfaceIpfsCore=t,e.ipfsCore=o}}),require_version2=__commonJS({"node_modules/ipfs-core/cjs/src/components/version.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_version(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({repo:n}){async function s(u={}){const l=await n.version.get();return{version:o.ipfsCore,commit:o.commit,repo:`${l}`,"ipfs-core":o.ipfsCore,"interface-ipfs-core":o.interfaceIpfsCore}}return r.withTimeoutOption(s)}e.createVersion=t}}),require_id=__commonJS({"node_modules/ipfs-core/cjs/src/components/id.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_version(),r=require_src(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=(init_to_string(),__toCommonJS(to_string_exports)),s=require_src5(),u=require_errors(),l=require_err_code(),f=require_browser2();function a(v){return v&&typeof v=="object"&&"default"in v?v:{default:v}}var c=a(s),d=a(l),h=a(f),g=Object.assign(h.default("ipfs:components:id"),{error:h.default("ipfs:components:id:error")});function p({peerId:v,network:w}){async function y(b={}){const T=w.try();if(!T){if(b.peerId)throw new u.NotStartedError;return{id:v.toB58String(),publicKey:n.toString(v.pubKey.bytes,"base64pad"),addresses:[],agentVersion:`js-ipfs/${o.ipfsCore}`,protocolVersion:"9000",protocols:[]}}const{libp2p:R}=T,S=b.peerId?c.default.parse(b.peerId):v,E=await _(S,R,b),A=n.toString(E.metadata.get("AgentVersion")||new Uint8Array),C=n.toString(E.metadata.get("ProtocolVersion")||new Uint8Array),I=E.id.toB58String(),P=E.publicKey?n.toString(E.publicKey.bytes,"base64pad"):"";return{id:I,publicKey:P,addresses:(E.addresses||[]).map(O=>{const k=O.toString();return k.endsWith(`/p2p/${I}`)?k:`${k}/p2p/${I}`}).sort().map(O=>new r.Multiaddr(O)),agentVersion:A,protocolVersion:C,protocols:(E.protocols||[]).sort()}}return t.withTimeoutOption(y)}async function _(v,w,y){let b=await w.peerStore.get(v);b||(b=await m(v,w,y));let T=v.pubKey?v.pubKey:await w.peerStore.keyBook.get(v);if(!T)try{T=await w._dht.getPublicKey(v,y)}catch(R){g.error("Could not load public key for",v.toB58String(),R)}return $e(Re({},b),{publicKey:T,metadata:b.metadata||new Map,addresses:b.addresses.map(R=>R.multiaddr)})}async function m(v,w,y){for await(const T of w._dht.findPeer(v,y))if(T.name==="FINAL_PEER")break;const b=await w.peerStore.get(v);if(!b)throw d.default(new Error("Could not find peer"),"ERR_NOT_FOUND");return b}e.createId=p}}),require_just_safe_set=__commonJS({"node_modules/just-safe-set/index.js"(e,o){init_node_globals(),o.exports=r;function r(n,s,u){var l,f;if(Array.isArray(s)&&(l=s.slice(0)),typeof s=="string"&&(l=s.split(".")),typeof s=="symbol"&&(l=[s]),!Array.isArray(l))throw new Error("props arg must be an array, a string or a symbol");if(f=l.pop(),!f)return!1;t(f);for(var a;a=l.shift();)if(t(a),typeof n[a]=="undefined"&&(n[a]={}),n=n[a],!n||typeof n!="object")return!1;return n[f]=u,!0}function t(n){if(n==="__proto__"||n==="constructor"||n==="prototype")throw new Error("setting of prototype values not supported")}}}),require_profiles=__commonJS({"node_modules/ipfs-core/cjs/src/components/config/profiles.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_just_safe_set(),r=(init_config_browser(),__toCommonJS(config_browser_exports));function t(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=t(o),s=t(r),u={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:l=>(n.default(l,"Discovery.MDNS.Enabled",!1),n.default(l,"Discovery.webRTCStar.Enabled",!1),l.Swarm=$e(Re({},l.Swarm||{}),{DisableNatPortMap:!0}),l)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:l=>(n.default(l,"Discovery.MDNS.Enabled",!0),n.default(l,"Discovery.webRTCStar.Enabled",!0),n.default(l,"Swarm",$e(Re({},l.Swarm||{}),{DisableNatPortMap:!1})),l)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:l=>{const f=s.default();return n.default(l,"Addresses.API",f.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),n.default(l,"Addresses.Gateway",f.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),n.default(l,"Addresses.Swarm",f.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),n.default(l,"Addresses.Delegates",[]),n.default(l,"Bootstrap",[]),n.default(l,"Discovery.MDNS.Enabled",!1),n.default(l,"Discovery.webRTCStar.Enabled",!1),n.default(l,"Swarm",$e(Re({},l.Swarm||{}),{DisableNatPortMap:!0})),l}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:l=>{const f=s.default();return n.default(l,"Addresses.API",f.Addresses.API),n.default(l,"Addresses.Gateway",f.Addresses.Gateway),n.default(l,"Addresses.Swarm",f.Addresses.Swarm),n.default(l,"Addresses.Delegates",f.Addresses.Delegates),n.default(l,"Bootstrap",f.Bootstrap),n.default(l,"Discovery.MDNS.Enabled",f.Discovery.MDNS.Enabled),n.default(l,"Discovery.webRTCStar.Enabled",f.Discovery.webRTCStar.Enabled),n.default(l,"Swarm",$e(Re({},l.Swarm||{}),{DisableNatPortMap:!1})),l}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:l=>{const f=l.Swarm||{},a=f.ConnMgr||{};return a.LowWater=20,a.HighWater=40,f.ConnMgr=a,l.Swarm=f,l}},"default-power":{description:'Inverse of "lowpower" profile.',transform:l=>{const f=s.default();return l.Swarm=f.Swarm,l}}};e.profiles=u}}),require_config2=__commonJS({"node_modules/ipfs-core/cjs/src/components/config/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_browser2(),t=require_profiles();function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=n(r),u=s.default("ipfs:core:config");function l({repo:a}){return{getAll:o.withTimeoutOption(c),get:o.withTimeoutOption(d),set:o.withTimeoutOption(h),replace:o.withTimeoutOption(g),profiles:{apply:o.withTimeoutOption(p),list:o.withTimeoutOption(f)}};async function c(_={}){return a.config.getAll(_)}async function d(_,m){return _?a.config.get(_,m):Promise.reject(new Error("key argument is required"))}async function h(_,m,v){return a.config.set(_,m,v)}async function g(_,m){return a.config.replace(_,m)}async function p(_,m={dryRun:!1}){const{dryRun:v}=m,w=t.profiles[_];if(!w)throw new Error(`No profile with name '${_}' exists`);try{const y=await a.config.getAll(m);let b=JSON.parse(JSON.stringify(y));return b=w.transform(b),v||await a.config.replace(b,m),delete y.Identity.PrivKey,delete b.Identity.PrivKey,{original:y,updated:b}}catch(y){throw u(y),new Error(`Could not apply profile '${_}' to config: ${y.message}`)}}}async function f(a){return Object.keys(t.profiles).map(c=>({name:c,description:t.profiles[c].description}))}e.createConfig=l}}),block_exports={};__export(block_exports,{Block:()=>Block,create:()=>create4,createUnsafe:()=>createUnsafe,decode:()=>decode13,encode:()=>encode12});var readonly2,links,tree,get,Block,encode12,decode13,createUnsafe,create4,init_block=__esm({"node_modules/multiformats/esm/src/block.js"(){init_node_globals(),init_src3(),readonly2=({enumerable:e=!0,configurable:o=!1}={})=>({enumerable:e,configurable:o,writable:!1}),links=function*(e,o){if(e!=null&&!(e instanceof Uint8Array))for(const[r,t]of Object.entries(e)){const n=[...o,r];if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[s,u]of t.entries()){const l=[...n,s],f=CID.asCID(u);f?yield[l.join("/"),f]:typeof u=="object"&&(yield*links(u,l))}else{const s=CID.asCID(t);s?yield[n.join("/"),s]:yield*links(t,n)}}},tree=function*(e,o){if(e!=null)for(const[r,t]of Object.entries(e)){const n=[...o,r];if(yield n.join("/"),t!=null&&!(t instanceof Uint8Array)&&typeof t=="object"&&!CID.asCID(t))if(Array.isArray(t))for(const[s,u]of t.entries()){const l=[...n,s];yield l.join("/"),typeof u=="object"&&!CID.asCID(u)&&(yield*tree(u,l))}else yield*tree(t,n)}},get=(e,o)=>{let r=e;for(const[t,n]of o.entries()){if(r=r[n],r==null)throw new Error(`Object has no property at ${o.slice(0,t+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);const s=CID.asCID(r);if(s)return{value:s,remaining:o.slice(t+1).join("/")}}return{value:r}},Block=class{constructor({cid:e,bytes:o,value:r}){if(!e||!o||typeof r=="undefined")throw new Error("Missing required argument");this.cid=e,this.bytes=o,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:readonly2(),bytes:readonly2(),value:readonly2(),asBlock:readonly2()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}},encode12=async({value:e,codec:o,hasher:r})=>{if(typeof e=="undefined")throw new Error('Missing required argument "value"');if(!o||!r)throw new Error("Missing required argument: codec or hasher");const t=o.encode(e),n=await r.digest(t),s=CID.create(1,o.code,n);return new Block({value:e,bytes:t,cid:s})},decode13=async({bytes:e,codec:o,hasher:r})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!o||!r)throw new Error("Missing required argument: codec or hasher");const t=o.decode(e),n=await r.digest(e),s=CID.create(1,o.code,n);return new Block({value:t,bytes:e,cid:s})},createUnsafe=({bytes:e,cid:o,value:r,codec:t})=>{const n=r!==void 0?r:t&&t.decode(e);if(n===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:o,bytes:e,value:n})},create4=async({bytes:e,cid:o,hasher:r,codec:t})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');const n=t.decode(e),s=await r.digest(e);if(!bytes_exports.equals(o.multihash.bytes,s.bytes))throw new Error("CID hash does not match bytes");return createUnsafe({bytes:e,cid:o,value:n,codec:t})}}});function cidEncoder4(e){if(e.asCID!==e)return null;const o=CID.asCID(e);if(!o)return null;const r=new Uint8Array(o.bytes.byteLength+1);return r.set(o.bytes,1),[new Token(Type.tag,CID_CBOR_TAG3),new Token(Type.bytes,r)]}function undefinedEncoder4(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder4(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function cidDecoder3(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(e.subarray(1))}var CID_CBOR_TAG3,encodeOptions4,decodeOptions4,encode13,decode14,init_esm5=__esm({"node_modules/@ipld/car/node_modules/@ipld/dag-cbor/esm/index.js"(){init_node_globals(),init_cborg(),init_cid(),CID_CBOR_TAG3=42,encodeOptions4={float64:!0,typeEncoders:{Object:cidEncoder4,undefined:undefinedEncoder4,number:numberEncoder4}},decodeOptions4={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]},decodeOptions4.tags[CID_CBOR_TAG3]=cidDecoder3,encode13=e=>encode4(e,encodeOptions4),decode14=e=>decode6(e,decodeOptions4)}});function createHeader(e){const o=encode13({version:1,roots:e}),r=import_varint2.default.encode(o.length),t=new Uint8Array(r.length+o.length);return t.set(r,0),t.set(o,r.length),t}function createEncoder(e){return{async setRoots(o){const r=createHeader(o);await e.write(r)},async writeBlock(o){const{cid:r,bytes:t}=o;await e.write(new Uint8Array(import_varint2.default.encode(r.bytes.length+t.length))),await e.write(r.bytes),t.length&&await e.write(t)},async close(){return e.end()}}}var import_varint2,init_encoder=__esm({"node_modules/@ipld/car/esm/lib/encoder.js"(){init_node_globals(),import_varint2=__toESM(require_varint(),1),init_esm5()}});function noop(){}function create5(){const e=[];let o=null,r=noop,t=!1,n=null,s=noop;const u=()=>(o||(o=new Promise(a=>{r=()=>{o=null,r=noop,a()}})),o),l={write(a){e.push(a);const c=u();return s(),c},async end(){t=!0;const a=u();return s(),a}},f={async next(){const a=e.shift();return a?(e.length===0&&r(),{done:!1,value:a}):t?(r(),{done:!0,value:void 0}):(n||(n=new Promise(c=>{s=()=>(n=null,s=noop,c(f.next()))})),n)}};return{writer:l,iterator:f}}var init_iterator_channel=__esm({"node_modules/@ipld/car/esm/lib/iterator-channel.js"(){init_node_globals()}});async function readVarint(e){const o=await e.upTo(8),r=import_varint3.default.decode(o);return e.seek(import_varint3.default.decode.bytes),r}async function readHeader(e){const o=await readVarint(e);if(o===0)throw new Error("Invalid CAR header (zero length)");const r=await e.exactly(o);e.seek(o);const t=decode14(r);if(t==null||Array.isArray(t)||typeof t!="object")throw new Error("Invalid CAR header format");if(t.version!==1)throw typeof t.version=="string"?new Error(`Invalid CAR version: "${t.version}"`):new Error(`Invalid CAR version: ${t.version}`);if(!Array.isArray(t.roots))throw new Error("Invalid CAR header format");if(Object.keys(t).filter(n=>n!=="roots"&&n!=="version").length)throw new Error("Invalid CAR header format");return t}async function readMultihash(e){const o=await e.upTo(8);import_varint3.default.decode(o);const r=import_varint3.default.decode.bytes,t=import_varint3.default.decode(o.subarray(import_varint3.default.decode.bytes)),n=import_varint3.default.decode.bytes,s=r+n+t,u=await e.exactly(s);return e.seek(s),u}async function readCid(e){const o=await e.exactly(2);if(o[0]===CIDV0_BYTES.SHA2_256&&o[1]===CIDV0_BYTES.LENGTH){const u=await e.exactly(34);e.seek(34);const l=decode3(u);return CID.create(0,CIDV0_BYTES.DAG_PB,l)}const r=await readVarint(e);if(r!==1)throw new Error(`Unexpected CID version (${r})`);const t=await readVarint(e),n=await readMultihash(e),s=decode3(n);return CID.create(r,t,s)}async function readBlockHead(e){const o=e.pos;let r=await readVarint(e);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=e.pos-o;const t=await readCid(e),n=r-(e.pos-o);return{cid:t,length:r,blockLength:n}}async function readBlock(e){const{cid:o,blockLength:r}=await readBlockHead(e),t=await e.exactly(r);return e.seek(r),{bytes:t,cid:o}}async function readBlockIndex(e){const o=e.pos,{cid:r,length:t,blockLength:n}=await readBlockHead(e),s={cid:r,length:t,blockLength:n,offset:o,blockOffset:e.pos};return e.seek(s.blockLength),s}function createDecoder(e){const o=readHeader(e);return{header:()=>o,async*blocks(){for(await o;(await e.upTo(8)).length>0;)yield await readBlock(e)},async*blocksIndex(){for(await o;(await e.upTo(8)).length>0;)yield await readBlockIndex(e)}}}function bytesReader(e){let o=0;return{async upTo(r){return e.subarray(o,o+Math.min(r,e.length-o))},async exactly(r){if(r>e.length-o)throw new Error("Unexpected end of data");return e.subarray(o,o+r)},seek(r){o+=r},get pos(){return o}}}function chunkReader(e){let o=0,r=0,t=0,n=new Uint8Array(0);const s=async u=>{r=n.length-t;const l=[n.subarray(t)];for(;r<u;){const a=await e();if(a==null)break;r<0?a.length>r&&l.push(a.subarray(-r)):l.push(a),r+=a.length}n=new Uint8Array(l.reduce((a,c)=>a+c.length,0));let f=0;for(const a of l)n.set(a,f),f+=a.length;t=0};return{async upTo(u){return n.length-t<u&&await s(u),n.subarray(t,t+Math.min(n.length-t,u))},async exactly(u){if(n.length-t<u&&await s(u),n.length-t<u)throw new Error("Unexpected end of data");return n.subarray(t,t+u)},seek(u){o+=u,t+=u},get pos(){return o}}}function asyncIterableReader(e){const o=e[Symbol.asyncIterator]();async function r(){const t=await o.next();return t.done?null:t.value}return chunkReader(r)}var import_varint3,CIDV0_BYTES,init_decoder=__esm({"node_modules/@ipld/car/esm/lib/decoder.js"(){init_node_globals(),import_varint3=__toESM(require_varint(),1),init_cid(),init_digest(),init_esm5(),CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112}}}),writer_browser_exports={};__export(writer_browser_exports,{CarWriter:()=>CarWriter,CarWriterOut:()=>CarWriterOut,__browser:()=>__browser});function encodeWriter(){const e=create5(),{writer:o,iterator:r}=e;return{encoder:createEncoder(o),iterator:r}}function toRoots(e){if(e===void 0)return[];if(!Array.isArray(e)){const r=CID.asCID(e);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}const o=[];for(const r of e){const t=CID.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");o.push(t)}return o}var CarWriter,CarWriterOut,__browser,init_writer_browser=__esm({"node_modules/@ipld/car/esm/lib/writer-browser.js"(){init_node_globals(),init_cid(),init_encoder(),init_iterator_channel(),init_decoder(),CarWriter=class{constructor(e,o){this._encoder=o,this._mutex=o.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const o=CID.asCID(e.cid);if(!o)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:o,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=toRoots(e);const{encoder:o,iterator:r}=encodeWriter(),t=new CarWriter(e,o),n=new CarWriterOut(r);return{writer:t,out:n}}static createAppender(){const{encoder:e,iterator:o}=encodeWriter();e.setRoots=()=>Promise.resolve();const r=new CarWriter([],e),t=new CarWriterOut(o);return{writer:r,out:t}}static async updateRootsInBytes(e,o){const r=bytesReader(e);await readHeader(r);const t=createHeader(o);if(r.pos!==t.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${t.length} bytes)`);return e.set(t,0),e}},CarWriterOut=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}},__browser=!0}}),require_export=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/export.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports)),r=(init_block(),__toCommonJS(block_exports)),t=(init_base58(),__toCommonJS(base58_exports)),n=(init_writer_browser(),__toCommonJS(writer_browser_exports)),s=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),u=require_browser2(),l=(init_raw(),__toCommonJS(raw_exports)),f=(init_json2(),__toCommonJS(json_exports2));function a(y){return y&&typeof y=="object"&&"default"in y?y:{default:y}}function c(y){if(y&&y.__esModule)return y;var b=Object.create(null);return y&&Object.keys(y).forEach(function(T){if(T!=="default"){var R=Object.getOwnPropertyDescriptor(y,T);Object.defineProperty(b,T,R.get?R:{enumerable:!0,get:function(){return y[T]}})}}),b.default=y,Object.freeze(b)}var d=a(u),h=c(l),g=c(f),p=d.default("ipfs:components:dag:import"),_=[h.code,g.code];function m({repo:y,preload:b,codecs:T}){async function*R(S,E={}){E.preload!==!1&&b(S);const A=o.CID.asCID(S);if(!A)throw new Error(`Unexpected error converting CID type: ${S}`);p(`Exporting ${A} as car`);const{writer:C,out:I}=await n.CarWriter.create([A]);let P=null;(async()=>{try{await v(y,{signal:E.signal,timeout:E.timeout},A,C,T)}catch(O){P=O}finally{C.close()}})();for await(const O of I){if(P)break;yield O}if(P)throw P}return s.withTimeoutOption(R)}async function v(y,b,T,R,S,E=new Set){const A=T.toString(t.base58btc);if(E.has(A))return;const C=await w(y,b,T,S);p(`Adding block ${T} to car`),await R.put(C),E.add(A);for(const I of C.links)await v(y,b,I,R,S,E)}async function w(y,b,T,R){const S=await y.blocks.get(T,b);let E=[];const A=await R.getCodec(T.code);if(A)E=[...r.createUnsafe({bytes:S,cid:T,codec:A}).links()].map(I=>I[1]);else if(!_.includes(T.code))throw new Error(`Can't decode links in block with codec 0x${T.code.toString(16)} to form complete DAG`);return{cid:T,bytes:S,links:E}}e.createExport=m}}),require_it_first=__commonJS({"node_modules/it-first/index.js"(e,o){init_node_globals();var r=async t=>{for await(const n of t)return n};o.exports=r}}),require_get3=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/get.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_it_first(),t=require_it_last(),n=require_utils2(),s=require_err_code();function u(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var l=u(r),f=u(t),a=u(s);function c({codecs:d,repo:h,preload:g}){const p=async function(m,v={}){if(v.preload!==!1&&g(m),v.path){const R=v.localResolve?await l.default(n.resolve(m,v.path,d,h,v)):await f.default(n.resolve(m,v.path,d,h,v));if(!R)throw a.default(new Error("Not found"),"ERR_NOT_FOUND");return R}const w=await d.getCodec(m.code),y=await h.blocks.get(m,v);return{value:w.decode(y),remainderPath:""}};return o.withTimeoutOption(p)}e.createGet=c}}),iterator_exports={};__export(iterator_exports,{CarBlockIterator:()=>CarBlockIterator,CarCIDIterator:()=>CarCIDIterator,CarIteratorBase:()=>CarIteratorBase});async function fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIterator(bytesReader(e))}async function fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeIterator(asyncIterableReader(e))}async function decodeIterator(e){const o=createDecoder(e),{version:r,roots:t}=await o.header();return{version:r,roots:t,iterator:o.blocks()}}var CarIteratorBase,CarBlockIterator,CarCIDIterator,init_iterator=__esm({"node_modules/@ipld/car/esm/lib/iterator.js"(){init_node_globals(),init_decoder(),CarIteratorBase=class{constructor(e,o,r){this._version=e,this._roots=o,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},CarBlockIterator=class extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:o,roots:r,iterator:t}=await fromBytes(e);return new CarBlockIterator(o,r,t)}static async fromIterable(e){const{version:o,roots:r,iterator:t}=await fromIterable(e);return new CarBlockIterator(o,r,t)}},CarCIDIterator=class extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;const e=this._iterable[Symbol.asyncIterator]();return{async next(){const o=await e.next();return o.done?o:{done:!1,value:o.value.cid}}}}static async fromBytes(e){const{version:o,roots:r,iterator:t}=await fromBytes(e);return new CarCIDIterator(o,r,t)}static async fromIterable(e){const{version:o,roots:r,iterator:t}=await fromIterable(e);return new CarCIDIterator(o,r,t)}}}}),require_import=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/import.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_iterator(),__toCommonJS(iterator_exports)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=require_it_peekable(),n=require_it_drain(),s=require_it_map(),u=require_browser2();function l(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}var f=l(t),a=l(n),c=l(s),d=l(u),h=d.default("ipfs:components:dag:import");function g({repo:_}){async function*m(v,w={}){const y=await _.gcLock.readLock();try{const b={signal:w.signal,timeout:w.timeout},T=f.default(v),{value:R,done:S}=await T.peek();if(S)return;R&&T.push(R);let E;R instanceof Uint8Array?E=[T]:E=T;for await(const A of E){const C=await p(_,b,A);if(w.pinRoots!==!1)for(const I of C){let P="";try{await _.blocks.has(I)?(h(`Pinning root ${I}`),await _.pins.pinRecursively(I)):P="blockstore: block not found"}catch(O){P=O.message}yield{root:{cid:I,pinErrorMsg:P}}}}}finally{y()}}return r.withTimeoutOption(m)}async function p(_,m,v){const w=await o.CarBlockIterator.fromIterable(v),y=await w.getRoots();return await a.default(_.blocks.putMany(c.default(w,({cid:b,bytes:T})=>(h(`Import block ${b}`),{key:b,value:T})),{signal:m.signal})),y}e.createImport=g}}),require_put2=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/put.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t({repo:n,codecs:s,hashers:u,preload:l}){async function f(a,c={}){const d=c.pin?await n.gcLock.readLock():null;try{const h=await s.getCodec(c.storeCodec||"dag-cbor");if(!h)throw new Error(`Unknown storeCodec ${c.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(c.inputCodec){if(!(a instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const w=await s.getCodec(c.inputCodec);if(!w)throw new Error(`Unknown inputCodec ${c.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);a=w.decode(a)}const g=c.version!=null?c.version:1,p=await u.getHasher(c.hashAlg||"sha2-256");if(!p)throw new Error(`Unknown hash algorithm ${c.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const _=h.encode(a),m=await p.digest(_),v=o.CID.create(g,h.code,m);return await n.blocks.put(v,_,{signal:c.signal}),c.pin&&await n.pins.pinRecursively(v),c.preload!==!1&&l(v),v}finally{d&&d()}}return r.withTimeoutOption(f)}e.createPut=t}}),require_resolve3=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/resolve.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=(init_to_cid_and_path(),__toCommonJS(to_cid_and_path_exports)),t=require_utils2();function n({repo:s,codecs:u,preload:l}){async function f(a,c={}){const{cid:d}=r.toCidAndPath(a);return c.preload!==!1&&l(d),t.resolvePath(s,u,a,c)}return o.withTimeoutOption(f)}e.createResolve=n}}),require_dag=__commonJS({"node_modules/ipfs-core/cjs/src/components/dag/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_export(),r=require_get3(),t=require_import(),n=require_put2(),s=require_resolve3(),u=class{constructor({repo:l,codecs:f,hashers:a,preload:c}){this.export=o.createExport({repo:l,preload:c,codecs:f}),this.get=r.createGet({codecs:f,repo:l,preload:c}),this.import=t.createImport({repo:l}),this.resolve=s.createResolve({repo:l,codecs:f,preload:c}),this.put=n.createPut({repo:l,codecs:f,hashers:a,preload:c})}};e.DagAPI=u}}),require_multiaddr_to_uri=__commonJS({"node_modules/multiaddr-to-uri/index.js"(e,o){init_node_globals();var{Multiaddr:r}=require_src(),t=(u,l)=>l,n=(u,l,f,a)=>{if(a&&a.assumeHttp===!1)return`tcp://${u}:${l}`;let c="tcp",d=`:${l}`;return f[f.length-1].protocol==="tcp"&&(c=l==="443"?"https":"http",d=l==="443"||l==="80"?"":d),`${c}://${u}${d}`},s={ip4:t,ip6:(u,l,f,a)=>a.length===1&&a[0].protocol==="ip6"?l:`[${l}]`,tcp:(u,l,f,a,c)=>a.some(d=>["http","https","ws","wss"].includes(d.protocol))?`${u}:${l}`:n(u,l,a,c),udp:(u,l)=>`udp://${u}:${l}`,dnsaddr:t,dns4:t,dns6:t,ipfs:(u,l)=>`${u}/ipfs/${l}`,p2p:(u,l)=>`${u}/p2p/${l}`,http:u=>`http://${u}`,https:u=>`https://${u}`,ws:u=>`ws://${u}`,wss:u=>`wss://${u}`,"p2p-websocket-star":u=>`${u}/p2p-websocket-star`,"p2p-webrtc-star":u=>`${u}/p2p-webrtc-star`,"p2p-webrtc-direct":u=>`${u}/p2p-webrtc-direct`};o.exports=(u,l)=>{const f=new r(u),a=u.toString().split("/").slice(1);return f.tuples().map(c=>({protocol:a.shift(),content:c[1]?a.shift():null})).reduce((c,d,h,g)=>{const p=s[d.protocol];if(!p)throw new Error(`Unsupported protocol ${d.protocol}`);return p(c,d.content,h,g,l)},"")}}}),require_array_shuffle=__commonJS({"node_modules/array-shuffle/index.js"(e,o){init_node_globals(),o.exports=r=>{if(!Array.isArray(r))throw new TypeError(`Expected an array, got ${typeof r}`);r=[...r];for(let t=r.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[r[t],r[n]]=[r[n],r[t]]}return r}}}),preload_browser_exports={};__export(preload_browser_exports,{preload:()=>preload});function preload(e,o={}){return log4(e),httpQueue2.add(async()=>{const t=(await import_http2.default.post(e,{signal:o.signal})).body.getReader();try{for(;;){const{done:n}=await t.read();if(n)return}}finally{t.releaseLock()}})}var import_http2,import_debug4,import_p_queue2,log4,Queue2,httpQueue2,init_preload_browser=__esm({"node_modules/ipfs-core-config/esm/src/preload.browser.js"(){init_node_globals(),import_http2=__toESM(require_http(),1),import_debug4=__toESM(require_browser2(),1),import_p_queue2=__toESM(require_dist(),1),log4=Object.assign((0,import_debug4.default)("ipfs:preload"),{error:(0,import_debug4.default)("ipfs:preload:error")}),Queue2=import_p_queue2.default.default?import_p_queue2.default.default:import_p_queue2.default,httpQueue2=new Queue2({concurrency:4})}}),require_preload=__commonJS({"node_modules/ipfs-core/cjs/src/preload.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_multiaddr_to_uri(),r=require_browser2(),t=require_array_shuffle(),n=(init_preload_browser(),__toCommonJS(preload_browser_exports)),s=require_hashlru();function u(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var l=u(o),f=u(r),a=u(t),c=u(s),d=Object.assign(f.default("ipfs:preload"),{error:f.default("ipfs:preload:error")});function h(g={}){if(g.enabled=Boolean(g.enabled),g.addresses=g.addresses||[],g.cache=g.cache||1e3,!g.enabled||!g.addresses.length)return d("preload disabled"),Object.assign(()=>{},{start:()=>{},stop:()=>{}});let p=!0,_=[];const m=g.addresses.map(l.default),v=c.default(g.cache),w=async y=>{try{if(p)throw new Error(`preload ${y} but preloader is not started`);const b=y.toString();if(v.has(b))return;v.set(b,!0);const T=a.default(m);let R=!1;const S=Date.now();for(const E of T){if(p)throw new Error(`preload aborted for ${b}`);let A;try{A=new AbortController,_=_.concat(A),await n.preload(`${E}/api/v0/refs?r=true&arg=${encodeURIComponent(b)}`,{signal:A.signal}),R=!0}catch(C){C.type!=="aborted"&&d.error(C)}finally{_=_.filter(C=>C!==A)}if(R)break}d(`${R?"":"un"}successfully preloaded ${b} in ${Date.now()-S}ms`)}catch(b){d.error(b)}};return w.start=()=>{p=!1},w.stop=()=>{p=!0,d(`aborting ${_.length} pending preload request(s)`),_.forEach(y=>y.abort()),_=[]},w}e.createPreloader=h}}),require_mfs_preload=__commonJS({"node_modules/ipfs-core/cjs/src/mfs-preload.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2();function r(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var t=r(o),n=Object.assign(t.default("ipfs:mfs-preload"),{error:t.default("ipfs:mfs-preload:error")});function s({preload:u,files:l,options:f={}}){if(f.interval=f.interval||30*1e3,!f.enabled){n("MFS preload disabled");const h=async()=>{};return{start:h,stop:h}}let a="",c;const d=async()=>{try{const h=await l.stat("/"),g=h.cid.toString();a!==g&&(n(`preloading updated MFS root ${a} -> ${h.cid}`),await u(h.cid),a=g)}catch(h){n.error("failed to preload MFS root",h)}finally{c=setTimeout(d,f.interval)}};return{async start(){const h=await l.stat("/");a=h.cid.toString(),n(`monitoring MFS root ${h.cid}`),c=setTimeout(d,f.interval)},stop(){clearTimeout(c)}}}e.createMfsPreloader=s}}),require_constants2=__commonJS({"node_modules/mortice/lib/constants.js"(e,o){init_node_globals(),o.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}}}),require_cluster=__commonJS({"(disabled):cluster"(){init_node_globals()}}),require_node=__commonJS({"node_modules/mortice/lib/node.js"(e,o){init_node_globals();var r=require_events().EventEmitter,{nanoid:t}=(init_index_prod(),__toCommonJS(index_prod_exports)),{WORKER_REQUEST_READ_LOCK:n,WORKER_RELEASE_READ_LOCK:s,MASTER_GRANT_READ_LOCK:u,WORKER_REQUEST_WRITE_LOCK:l,WORKER_RELEASE_WRITE_LOCK:f,MASTER_GRANT_WRITE_LOCK:a}=require_constants2(),c,d=(g,p,_,m,v)=>(w,y)=>{y&&y.type===_&&g.emit(p,y.name,()=>(w.send({type:v,name:y.name,identifier:y.identifier}),new Promise(b=>{const T=R=>{R&&R.type===m&&R.identifier===y.identifier&&(w.removeListener("message",T),b())};w.on("message",T)})))},h=(g,p,_,m)=>()=>{const v=t();return process.send({type:p,identifier:v,name:g}),new Promise(w=>{const y=b=>{b&&b.type===_&&b.identifier===v&&(process.removeListener("message",y),w(()=>{process.send({type:m,identifier:v,name:g})}))};process.on("message",y)})};o.exports=g=>{try{if(c=require_cluster(),!Object.keys(c).length)return}catch{return}if(c.isMaster||g.singleProcess){const p=new r;return c.on("message",d(p,"requestReadLock",n,s,u)),c.on("message",d(p,"requestWriteLock",l,f,a)),p}return{isWorker:!0,readLock:p=>h(p,n,u,s),writeLock:p=>h(p,l,a,f)}}}}),require_lib4=__commonJS({"node_modules/observable-webworkers/lib/index.js"(e,o){init_node_globals();var r={},t=n=>{n.addEventListener("message",s=>{t.dispatchEvent("message",n,s)}),n.port&&n.port.addEventListener("message",s=>{t.dispatchEvent("message",n,s)})};t.addEventListener=(n,s)=>{r[n]||(r[n]=[]),r[n].push(s)},t.removeEventListener=(n,s)=>{!r[n]||(r[n]=r[n].filter(u=>u===s))},t.dispatchEvent=function(){const n=Array.prototype.slice.call(arguments),s=n.shift();!r[s]||r[s].forEach(u=>u.apply(null,n))},o.exports=t}}),require_browser4=__commonJS({"node_modules/mortice/lib/browser.js"(e,o){init_node_globals();var r=require_events().EventEmitter,{nanoid:t}=(init_index_prod(),__toCommonJS(index_prod_exports)),{WORKER_REQUEST_READ_LOCK:n,WORKER_RELEASE_READ_LOCK:s,MASTER_GRANT_READ_LOCK:u,WORKER_REQUEST_WRITE_LOCK:l,WORKER_RELEASE_WRITE_LOCK:f,MASTER_GRANT_WRITE_LOCK:a}=require_constants2(),c=require_lib4(),d=(p,_,m,v,w)=>(y,b)=>{if(!b||!b.data||b.data.type!==m)return;const T={type:b.data.type,name:b.data.name,identifier:b.data.identifier};p.emit(_,T.name,()=>(y.postMessage({type:w,name:T.name,identifier:T.identifier}),new Promise(R=>{const S=E=>{if(!E||!E.data)return;const A={type:E.data.type,name:E.data.name,identifier:E.data.identifier};A&&A.type===v&&A.identifier===T.identifier&&(y.removeEventListener("message",S),R())};y.addEventListener("message",S)})))},h=(p,_,m,v)=>()=>{const w=t();return globalThis.postMessage({type:_,identifier:w,name:p}),new Promise(y=>{const b=T=>{if(!T||!T.data)return;const R={type:T.data.type,identifier:T.data.identifier};R&&R.type===m&&R.identifier===w&&(globalThis.removeEventListener("message",b),y(()=>{globalThis.postMessage({type:v,identifier:w,name:p})}))};globalThis.addEventListener("message",b)})},g={singleProcess:!1};o.exports=p=>{if(p=Object.assign({},g,p),!!globalThis.document||p.singleProcess){const m=new r;return c.addEventListener("message",d(m,"requestReadLock",n,s,u)),c.addEventListener("message",d(m,"requestWriteLock",l,f,a)),m}return{isWorker:!0,readLock:m=>h(m,n,u,s),writeLock:m=>h(m,l,a,f)}}}}),require_promise_timeout=__commonJS({"node_modules/promise-timeout/index.js"(e,o){init_node_globals();var r;o.exports.timeout=function(t,n){var s=new r,u;return Promise.race([t,new Promise(function(l,f){u=setTimeout(function(){f(s)},n)})]).then(function(l){return clearTimeout(u),l},function(l){throw clearTimeout(u),l})},r=o.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"},r.prototype=Object.create(Error.prototype),r.prototype.name="TimeoutError"}}),require_lib5=__commonJS({"node_modules/mortice/lib/index.js"(e,o){init_node_globals();var r=require_node(),t=require_browser4(),{default:n}=require_dist(),{timeout:s}=require_promise_timeout(),u=require_lib4(),l={},f;function a(h,g){let p;const _=new Promise(m=>{p=m});return h.add(()=>s((()=>new Promise(m=>{p(()=>{m()})}))(),g.timeout)),_}var c=(h,g)=>{if(f.isWorker)return{readLock:f.readLock(h,g),writeLock:f.writeLock(h,g)};const p=new n({concurrency:1});let _=null;return{readLock:()=>{if(_)return a(_,g);_=new n({concurrency:g.concurrency,autoStart:!1});const m=_,v=a(_,g);return p.add(()=>(m.start(),m.onIdle().then(()=>{_===m&&(_=null)}))),v},writeLock:()=>(_=null,a(p,g))}},d={concurrency:1/0,timeout:846e5,global,singleProcess:!1};o.exports=(h,g)=>(g||(g={}),typeof h=="object"&&(g=h,h="lock"),h||(h="lock"),g=Object.assign({},d,g),f||(f=r(g)||t(g),f.isWorker||(f.on("requestReadLock",(p,_)=>{!l[p]||l[p].readLock().then(m=>_().finally(()=>m()))}),f.on("requestWriteLock",async(p,_)=>{!l[p]||l[p].writeLock().then(m=>_().finally(()=>m()))}))),l[h]||(l[h]=c(h,g)),l[h]),o.exports.Worker=function(h,g){g=g||global.Worker;let p;try{p=new g(h)}catch(_){_.message.includes("not a constructor")&&(p=g(h))}if(!p)throw new Error("Could not create Worker from",g);return u(p),p}}}),require_create_lock=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/create-lock.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_lib5();function r(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var t=r(o),n;function s(u=!1){if(n)return n;const l=t.default({singleProcess:u});return n={readLock:f=>async(...a)=>{const c=await l.readLock();try{return await f.apply(null,a)}finally{c()}},writeLock:f=>async(...a)=>{const c=await l.writeLock();try{return await f.apply(null,a)}finally{c()}}},n}e.createLock=s}}),require_with_mfs_root=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/with-mfs-root.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports)),r=(init_src(),__toCommonJS(src_exports)),t=(init_src2(),__toCommonJS(src_exports2)),n=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),s=require_browser2(),u=require_err_code(),l=require_utils2();function f(_){return _&&typeof _=="object"&&"default"in _?_:{default:_}}function a(_){if(_&&_.__esModule)return _;var m=Object.create(null);return _&&Object.keys(_).forEach(function(v){if(v!=="default"){var w=Object.getOwnPropertyDescriptor(_,v);Object.defineProperty(m,v,w.get?w:{enumerable:!0,get:function(){return _[v]}})}}),m.default=_,Object.freeze(m)}var c=a(t),d=f(s),h=f(u),g=d.default("ipfs:mfs:utils:with-mfs-root");async function p(_,m){if(m&&m.signal&&m.signal.aborted)throw h.default(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await _.repo.datastore.open();let v;try{const w=await _.repo.datastore.get(l.MFS_ROOT_KEY);v=o.CID.decode(w)}catch(w){if(w.code!=="ERR_NOT_FOUND")throw w;g("Creating new MFS root");const y=c.encode({Data:new r.UnixFS({type:"directory"}).marshal(),Links:[]}),b=await n.sha256.digest(y);if(v=o.CID.createV0(b),await _.repo.blocks.put(v,y),m&&m.signal&&m.signal.aborted)throw h.default(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await _.repo.datastore.put(l.MFS_ROOT_KEY,v.bytes)}return g(`Loaded MFS root /ipfs/${v}`),v}e.loadMfsRoot=p}}),require_to_path_components=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/to-path-components.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(r=""){return(r.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}e.toPathComponents=o}}),require_to_mfs_path=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/to-mfs-path.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_with_mfs_root(),r=require_to_path_components(),t=(init_src9(),__toCommonJS(src_exports7)),n=require_err_code(),s=(init_cid(),__toCommonJS(cid_exports));function u(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var l=u(n),f="ipfs",a=async(c,d,h)=>{const g=await o.loadMfsRoot(c,h);let p={entryType:"file"},_="";if(s.CID.asCID(d)?_=`/ipfs/${d}`:_=d.toString(),_=_.trim(),_=_.replace(/(\/\/+)/g,"/"),_.endsWith("/")&&_.length>1&&(_=_.substring(0,_.length-1)),!_)throw l.default(new Error("paths must not be empty"),"ERR_NO_PATH");if(_.substring(0,1)!=="/")throw l.default(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");_.substring(_.length-1)==="/"&&(_=_.substring(0,_.length-1));const m=r.toPathComponents(_);if(m[0]===f){let w;m.length===2?w=`/${m.join("/")}`:w=`/${m.slice(0,m.length-1).join("/")}`,p={type:"ipfs",depth:m.length-2,entryType:"file",mfsPath:`/${m.join("/")}`,mfsDirectory:w,parts:m,path:`/${m.join("/")}`,name:m[m.length-1]}}else{const w=`/${f}/${g}${m.length?"/"+m.join("/"):""}`,y=`/${f}/${g}/${m.slice(0,m.length-1).join("/")}`;p={type:"mfs",depth:m.length,entryType:"file",mfsDirectory:y,mfsPath:w,parts:m,path:`/${m.join("/")}`,name:m[m.length-1]}}const v=p.type==="mfs"?p.mfsPath:p.path;try{const w=await t.exporter(v,c.repo.blocks,h);p.cid=w.cid,p.mfsPath=`/ipfs/${w.path}`,p.entryType=w.type,p.content=w.content,(p.entryType==="file"||p.entryType==="directory")&&(w.type==="file"||w.type==="directory")&&(p.unixfs=w.unixfs)}catch(w){if(w.code!=="ERR_NOT_FOUND")throw w}return p.exists=Boolean(p.cid),p};e.toMfsPath=a}}),require_stat3=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/stat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_merge_options(),r=require_to_mfs_path(),t=(init_src9(),__toCommonJS(src_exports7)),n=require_browser2(),s=require_err_code(),u=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),l=(init_src2(),__toCommonJS(src_exports2));function f(y){return y&&typeof y=="object"&&"default"in y?y:{default:y}}function a(y){if(y&&y.__esModule)return y;var b=Object.create(null);return y&&Object.keys(y).forEach(function(T){if(T!=="default"){var R=Object.getOwnPropertyDescriptor(y,T);Object.defineProperty(b,T,R.get?R:{enumerable:!0,get:function(){return y[T]}})}}),b.default=y,Object.freeze(b)}var c=f(o),d=f(n),h=f(s),g=a(l),p=c.default.bind({ignoreUndefined:!0}),_=d.default("ipfs:mfs:stat"),m={withLocal:!1};function v(y){async function b(T,R={}){R=p(m,R),_(`Fetching stats for ${T}`);const{type:S,cid:E,mfsPath:A}=await r.toMfsPath(y,T,R),C=S==="ipfs"&&E?E:A;let I;try{I=await t.exporter(C,y.repo.blocks)}catch(P){throw P.code==="ERR_NOT_FOUND"?h.default(new Error(`${T} does not exist`),"ERR_NOT_FOUND"):P}if(!w[I.type])throw new Error(`Cannot stat codec ${I.cid.code}`);return w[I.type](I)}return u.withTimeoutOption(b)}var w={raw:y=>({cid:y.cid,size:y.node.length,cumulativeSize:y.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:y=>{const b={cid:y.cid,type:"file",size:y.unixfs.fileSize(),cumulativeSize:g.encode(y.node).length+(y.node.Links||[]).reduce((T,R)=>T+(R.Tsize||0),0),blocks:y.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:y.unixfs.mode};return y.unixfs.mtime&&(b.mtime=y.unixfs.mtime),b},directory:y=>{const b={cid:y.cid,type:"directory",size:0,cumulativeSize:g.encode(y.node).length+(y.node.Links||[]).reduce((T,R)=>T+(R.Tsize||0),0),blocks:y.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:y.unixfs.mode};return y.unixfs.mtime&&(b.mtime=y.unixfs.mtime),b},object:y=>({cid:y.cid,size:y.node.length,cumulativeSize:y.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:y=>({cid:y.cid,size:y.node.length,cumulativeSize:y.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})};e.createStat=v}}),require_to_trail=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/to-trail.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_browser2();function t(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=t(r),s=n.default("ipfs:mfs:utils:to-trail");async function u(l,f){s(`Creating trail for path ${f}`);const a=[];for await(const c of o.walkPath(f,l.repo.blocks))a.push({name:c.name,cid:c.cid,size:c.size,type:c.type});return a}e.toTrail=u}}),require_persist=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/persist.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_cid(),__toCommonJS(cid_exports)),r=(init_src2(),__toCommonJS(src_exports2)),t=(init_sha2_browser(),__toCommonJS(sha2_browser_exports));function n(l){if(l&&l.__esModule)return l;var f=Object.create(null);return l&&Object.keys(l).forEach(function(a){if(a!=="default"){var c=Object.getOwnPropertyDescriptor(l,a);Object.defineProperty(f,a,c.get?c:{enumerable:!0,get:function(){return l[a]}})}}),f.default=l,Object.freeze(f)}var s=n(r),u=async(l,f,a)=>{a.codec||(a.codec=s),a.hasher||(a.hasher=t.sha256),a.cidVersion===void 0&&(a.cidVersion=1),a.codec===s&&a.hasher!==t.sha256&&(a.cidVersion=1);const c=await a.hasher.digest(l),d=o.CID.create(a.cidVersion,a.codec.code,c);return a.onlyHash||await f.put(d,l,{signal:a.signal}),d};e.persist=u}}),require_hamt_constants=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/hamt-constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_esm4(),__toCommonJS(esm_exports4)),r=o.murmur3128.code,t=8;async function n(s){return(await o.murmur3128.encode(s)).slice(0,8).reverse()}e.hamtBucketBits=t,e.hamtHashCode=r,e.hamtHashFn=n}}),require_dir_sharded=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/dir-sharded.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_src(),__toCommonJS(src_exports)),t=require_persist(),n=require_src9(),s=require_hamt_constants(),u=class{constructor(a,c){this.options=c||{},this.root=a.root,this.dir=a.dir,this.path=a.path,this.dirty=a.dirty,this.flat=a.flat,this.parent=a.parent,this.parentKey=a.parentKey,this.unixfs=a.unixfs,this.mode=a.mode,this.mtime=a.mtime,this.cid=void 0,this.size=void 0}async put(a,c){}get(a){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(a){}},l=class extends u{constructor(a,c){super(a,c);this._bucket=n.createHAMT({hashFn:s.hamtHashFn,bits:s.hamtBucketBits})}async put(a,c){await this._bucket.put(a,c)}get(a){return this._bucket.get(a)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:a,value:c}of this._bucket.eachLeafSeries())yield{key:a,child:c}}async*flush(a){yield*f(this._bucket,a,this,this.options)}};async function*f(a,c,d,h){const g=a._children,p=[];let _=0;for(let R=0;R<g.length;R++){const S=g.get(R);if(!S)continue;const E=R.toString(16).toUpperCase().padStart(2,"0");if(S instanceof n.Bucket){let A;for await(const C of await f(S,c,null,h))A=C;if(!A)throw new Error("Could not flush sharded directory, no subshard found");p.push({Name:E,Tsize:A.size,Hash:A.cid}),_+=A.size}else if(typeof S.value.flush=="function"){const A=S.value;let C;for await(const P of A.flush(c))C=P,yield C;const I=E+S.key;p.push({Name:I,Tsize:C.size,Hash:C.cid}),_+=C.size}else{const A=S.value;if(!A.cid)continue;const C=E+S.key,I=A.size;p.push({Name:C,Tsize:I,Hash:A.cid}),_+=I}}const m=Uint8Array.from(g.bitField().reverse()),w={Data:new r.UnixFS({type:"hamt-sharded-directory",data:m,fanout:a.tableSize(),hashType:s.hamtHashCode,mtime:d&&d.mtime,mode:d&&d.mode}).marshal(),Links:p},y=o.encode(o.prepare(w)),b=await t.persist(y,c,h),T=y.length+_;yield{cid:b,node:w,size:T}}e.Dir=u,e.DirSharded=l}}),require_hamt_utils=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/hamt-utils.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=require_src9(),t=require_dir_sharded(),n=require_browser2(),s=(init_src(),__toCommonJS(src_exports)),u=require_it_last(),l=(init_cid(),__toCommonJS(cid_exports)),f=require_hamt_constants();function a(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}function c(R){if(R&&R.__esModule)return R;var S=Object.create(null);return R&&Object.keys(R).forEach(function(E){if(E!=="default"){var A=Object.getOwnPropertyDescriptor(R,E);Object.defineProperty(S,E,A.get?A:{enumerable:!0,get:function(){return R[E]}})}}),S.default=R,Object.freeze(S)}var d=c(o),h=a(n),g=a(u),p=h.default("ipfs:mfs:core:utils:hamt-utils"),_=async(R,S,E,A)=>{if(!A.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const C=Uint8Array.from(E._children.bitField().reverse()),I=s.UnixFS.unmarshal(A.parent.Data),P=new s.UnixFS({type:"hamt-sharded-directory",data:C,fanout:E.tableSize(),hashType:f.hamtHashCode,mode:I.mode,mtime:I.mtime}),O=await R.hashers.getHasher(A.hashAlg),k={Data:P.marshal(),Links:S.sort((L,re)=>(L.Name||"").localeCompare(re.Name||""))},N=d.encode(k),K=await O.digest(N),U=l.CID.create(A.cidVersion,d.code,K);return A.flush&&await R.repo.blocks.put(U,N),{node:k,cid:U,size:S.reduce((L,re)=>L+(re.Tsize||0),N.length)}},m=async(R,S,E,A,C)=>{const I=new r.Bucket({hash:E._options.hash,bits:E._options.bits},A,C);return A._putObjectAt(C,I),await w(R,S,I,E),I},v=async R=>{const S=r.createHAMT({hashFn:f.hamtHashFn,bits:f.hamtBucketBits});return await Promise.all(R.map(async E=>{const A=E.Name||"";if(A.length===2){const C=parseInt(A,16),I=new r.Bucket({hash:S._options.hash,bits:S._options.bits},S,C);return S._putObjectAt(C,I),Promise.resolve()}return S.put(A.substring(2),{size:E.Tsize,cid:E.Hash})})),S},w=async(R,S,E,A)=>{await Promise.all(S.map(async C=>{const I=C.Name||"";if(I.length===2){p("Populating sub bucket",I);const P=parseInt(I,16),O=await R.repo.blocks.get(C.Hash),k=d.decode(O),N=new r.Bucket({hash:A._options.hash,bits:A._options.bits},E,P);return E._putObjectAt(P,N),await w(R,k.Links,N,A),Promise.resolve()}return A.put(I.substring(2),{size:C.Tsize,cid:C.Hash})}))},y=R=>R.toString(16).toUpperCase().padStart(2,"0").substring(0,2),b=async(R,S,E)=>{const A=await v(E.Links),C=await A._findNewBucketAndPos(S),I=[{bucket:C.bucket,prefix:y(C.pos)}];let P=C.bucket;for(;P!==A;)I.push({bucket:P,prefix:y(P._posAtParent)}),P=P._parent;I.reverse(),I[0].node=E;for(let O=0;O<I.length;O++){const k=I[O];if(!k.node)throw new Error("Could not generate HAMT path");const N=k.node.Links.filter(re=>(re.Name||"").substring(0,2)===k.prefix).pop();if(!N){p(`Link ${k.prefix}${S} will be added`);continue}if(N.Name===`${k.prefix}${S}`){p(`Link ${k.prefix}${S} will be replaced`);continue}p(`Found subshard ${k.prefix}`);const K=await R.repo.blocks.get(N.Hash),U=d.decode(K);if(!I[O+1]){p(`Loaded new subshard ${k.prefix}`),await m(R,U.Links,A,k.bucket,parseInt(k.prefix,16));const re=await A._findNewBucketAndPos(S);I.push({bucket:re.bucket,prefix:y(re.pos),node:U});continue}const L=I[O+1];await w(R,U.Links,L.bucket,A),L.node=U}return await A.put(S,!0),I.reverse(),{rootBucket:A,path:I}},T=async(R,S,E={})=>{const A=new t.DirSharded({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:E.mtime,mode:E.mode},E);for(let I=0;I<S.length;I++)await A._bucket.put(S[I].name,{size:S[I].size,cid:S[I].cid});const C=await g.default(A.flush(R.repo.blocks));if(!C)throw new Error("Flushing shard yielded no result");return C};e.addLinksToHamtBucket=w,e.createShard=T,e.generatePath=b,e.recreateHamtLevel=m,e.recreateInitialHamtLevel=v,e.toPrefix=y,e.updateHamtDirectory=_}}),require_add_link=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/add-link.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_cid(),__toCommonJS(cid_exports)),t=require_browser2(),n=(init_src(),__toCommonJS(src_exports)),s=require_dir_sharded(),u=require_hamt_utils(),l=require_err_code(),f=require_it_last();function a(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}function c(R){if(R&&R.__esModule)return R;var S=Object.create(null);return R&&Object.keys(R).forEach(function(E){if(E!=="default"){var A=Object.getOwnPropertyDescriptor(R,E);Object.defineProperty(S,E,A.get?A:{enumerable:!0,get:function(){return R[E]}})}}),S.default=R,Object.freeze(S)}var d=c(o),h=a(t),g=a(l),p=a(f),_=h.default("ipfs:mfs:core:utils:add-link");async function m(R,S){let E=S.parent;if(S.parentCid){const C=r.CID.asCID(S.parentCid);if(C===null)throw g.default(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(C.code!==d.code)throw g.default(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");_(`Loading parent node ${C}`);const I=await R.repo.blocks.get(C);E=d.decode(I)}if(!E)throw g.default(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!S.cid)throw g.default(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!S.name)throw g.default(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!S.size&&S.size!==0)throw g.default(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!E.Data)throw g.default(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const A=n.UnixFS.unmarshal(E.Data);return A.type==="hamt-sharded-directory"?(_("Adding link to sharded directory"),y(R,$e(Re({},S),{parent:E}))):E.Links.length>=S.shardSplitThreshold?(_("Converting directory to sharded directory"),v(R,$e(Re({},S),{parent:E,mtime:A.mtime,mode:A.mode}))):(_(`Adding ${S.name} (${S.cid}) to regular directory`),w(R,$e(Re({},S),{parent:E})))}var v=async(R,S)=>{const E=await u.createShard(R,S.parent.Links.map(A=>({name:A.Name||"",size:A.Tsize||0,cid:A.Hash})).concat({name:S.name,size:S.size,cid:S.cid}),S);return _(`Converted directory to sharded directory ${E.cid}`),E},w=async(R,S)=>{const E=S.parent.Links.filter(N=>N.Name!==S.name);if(E.push({Name:S.name,Tsize:S.size,Hash:S.cid}),!S.parent.Data)throw g.default(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const A=n.UnixFS.unmarshal(S.parent.Data);let C;if(A.mtime){const N=Date.now(),K=Math.floor(N/1e3);A.mtime={secs:K,nsecs:(N-K*1e3)*1e3},C=A.marshal()}else C=S.parent.Data;S.parent=d.prepare({Data:C,Links:E});const I=await R.hashers.getHasher(S.hashAlg),P=d.encode(S.parent),O=await I.digest(P),k=r.CID.create(S.cidVersion,d.code,O);return S.flush&&await R.repo.blocks.put(k,P),{node:S.parent,cid:k,size:P.length}},y=async(R,S)=>{const{shard:E,path:A}=await b(R,S),C=await p.default(E.flush(R.repo.blocks));if(!C)throw new Error("No result from flushing shard");const I=await R.repo.blocks.get(C.cid),P=d.decode(I),O=S.parent.Links.filter(N=>(N.Name||"").substring(0,2)!==A[0].prefix),k=P.Links.find(N=>(N.Name||"").substring(0,2)===A[0].prefix);if(!k)throw new Error(`No link found with prefix ${A[0].prefix}`);return O.push(k),u.updateHamtDirectory(R,O,A[0].bucket,S)},b=async(R,S)=>{const E={name:S.name,cid:S.cid,size:S.size};if(!S.parent.Data)throw g.default(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const A=await u.recreateInitialHamtLevel(S.parent.Links),C=n.UnixFS.unmarshal(S.parent.Data),I=new s.DirSharded({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:C.mode},S);I._bucket=A,C.mtime&&(I.mtime={secs:Math.round(Date.now()/1e3)});const P=await A._findNewBucketAndPos(E.name),O=T(P);O[0].node=S.parent;let k=0;for(;k<O.length;){const N=O[k];k++;const K=N.node;if(!K)throw new Error("Segment had no node");const U=K.Links.find(V=>(V.Name||"").substring(0,2)===N.prefix);if(!U){_(`Link ${N.prefix}${E.name} will be added`),k=O.length;break}if(U.Name===`${N.prefix}${E.name}`){_(`Link ${N.prefix}${E.name} will be replaced`),k=O.length;break}if((U.Name||"").length>2){_(`Link ${U.Name} ${U.Hash} will be replaced with a subshard`),k=O.length;break}_(`Found subshard ${N.prefix}`);const L=await R.repo.blocks.get(U.Hash),re=d.decode(L);if(!O[k]){_(`Loaded new subshard ${N.prefix}`),await u.recreateHamtLevel(R,re.Links,A,N.bucket,parseInt(N.prefix,16));const V=await A._findNewBucketAndPos(E.name);O.push({bucket:V.bucket,prefix:u.toPrefix(V.pos),node:re});break}const Z=O[k];await u.addLinksToHamtBucket(R,re.Links,Z.bucket,A),Z.node=re}return await I._bucket.put(E.name,{size:E.size,cid:E.cid}),{shard:I,path:O}},T=R=>{const S=[{bucket:R.bucket,prefix:u.toPrefix(R.pos)}];let E=R.bucket._parent,A=R.bucket._posAtParent;for(;E;)S.push({bucket:E,prefix:u.toPrefix(A)}),A=E._posAtParent,E=E._parent;return S.reverse(),S};e.addLink=m}}),require_update_tree=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/update-tree.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=require_add_link(),t=(init_src2(),__toCommonJS(src_exports2));function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=n(o),u=s.default("ipfs:mfs:utils:update-tree"),l={shardSplitThreshold:1e3};async function f(a,c,d){d=Object.assign({},l,d),u("Trail",c),c=c.slice().reverse();let h=0,g;for await(const _ of a.repo.blocks.getMany(c.map(m=>m.cid))){const m=t.decode(_),v=c[h].cid,w=c[h].name;if(h++,!g){g={cid:v,name:w,size:_.length};continue}const y=await r.addLink(a,{parent:m,name:g.name,cid:g.cid,size:g.size,flush:d.flush,shardSplitThreshold:d.shardSplitThreshold,hashAlg:d.hashAlg,cidVersion:d.cidVersion});g={cid:y.cid,name:w,size:y.size}}const{cid:p}=g;return u(`Final CID ${p}`),p}e.updateTree=f}}),require_update_mfs_root=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/update-mfs-root.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=require_utils2(),t=require_err_code();function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=n(o),u=n(t),l=s.default("ipfs:mfs:utils:update-mfs-root");async function f(a,c,d){if(d&&d.signal&&d.signal.aborted)throw u.default(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return l(`New MFS root will be ${c}`),await a.repo.datastore.put(r.MFS_ROOT_KEY,c.bytes),c}e.updateMfsRoot=f}}),require_create_node=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/create-node.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src(),__toCommonJS(src_exports)),r=(init_src2(),__toCommonJS(src_exports2)),t=(init_cid(),__toCommonJS(cid_exports));function n(l){if(l&&l.__esModule)return l;var f=Object.create(null);return l&&Object.keys(l).forEach(function(a){if(a!=="default"){var c=Object.getOwnPropertyDescriptor(l,a);Object.defineProperty(f,a,c.get?c:{enumerable:!0,get:function(){return l[a]}})}}),f.default=l,Object.freeze(f)}var s=n(r);async function u(l,f,a){const c=new o.UnixFS({type:f,mode:a.mode,mtime:a.mtime}),d=await l.hashers.getHasher(a.hashAlg),h={Data:c.marshal(),Links:[]},g=s.encode(h),p=await d.digest(g),_=t.CID.create(a.cidVersion,s.code,p);return a.flush&&await l.repo.blocks.put(_,g),{cid:_,node:h}}e.createNode=u}}),require_mkdir=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/mkdir.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_err_code(),r=require_browser2(),t=(init_src9(),__toCommonJS(src_exports7)),n=require_create_node(),s=require_to_path_components(),u=require_update_mfs_root(),l=require_update_tree(),f=require_add_link(),a=require_with_mfs_root(),c=require_merge_options(),d=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function h(T){return T&&typeof T=="object"&&"default"in T?T:{default:T}}var g=h(o),p=h(r),_=h(c),m=_.default.bind({ignoreUndefined:!0}),v=p.default("ipfs:mfs:mkdir"),w={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function y(T){async function R(S,E={}){const A=m(w,E);if(!S)throw new Error("no path given to Mkdir");if(S=S.trim(),S==="/"){if(A.parents)return;throw g.default(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if(S.substring(0,1)!=="/")throw g.default(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");v(`Creating ${S}`);const C=s.toPathComponents(S);if(C[0]==="ipfs")throw g.default(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const I=await a.loadMfsRoot(T,A);let P;const O=[],k=await n.createNode(T,"directory",A);for(let K=0;K<=C.length;K++){const U=C.slice(0,K),L=`/ipfs/${I}/${U.join("/")}`;try{if(P=await t.exporter(L,T.repo.blocks),P.type!=="file"&&P.type!=="directory")throw g.default(new Error(`${S} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(K===C.length){if(A.parents)return;throw g.default(new Error("file already exists"),"ERR_ALREADY_EXISTS")}O.push({name:P.name,cid:P.cid})}catch(re){if(re.code==="ERR_NOT_FOUND"){if(K<C.length&&!A.parents)throw g.default(new Error(`Intermediate directory path ${L} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await b(T,U[U.length-1],k,O[O.length-1],O,A)}else throw re}}const N=await l.updateTree(T,O,A);await u.updateMfsRoot(T,N,A)}return d.withTimeoutOption(R)}var b=async(T,R,S,E,A,C)=>{v(`Adding empty dir called ${R} to ${E.cid}`);const I=await f.addLink(T,{parent:E.node,parentCid:E.cid,size:0,cid:S.cid,name:R,hashAlg:C.hashAlg,cidVersion:C.cidVersion,flush:C.flush,shardSplitThreshold:C.shardSplitThreshold});A[A.length-1].cid=I.cid,A.push({name:R,cid:S.cid})};e.createMkdir=y}}),require_cp=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/cp.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_mkdir(),r=require_stat3(),t=require_browser2(),n=require_err_code(),s=require_update_tree(),u=require_update_mfs_root(),l=require_add_link(),f=require_to_mfs_path(),a=require_merge_options(),c=require_to_trail(),d=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function h(E){return E&&typeof E=="object"&&"default"in E?E:{default:E}}var g=h(t),p=h(n),_=h(a),m=_.default.bind({ignoreUndefined:!0}),v=g.default("ipfs:mfs:cp"),w={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function y(E){async function A(C,I,P={}){const O=m(w,P);Array.isArray(C)||(C=[C]);const k=await Promise.all(C.map(Z=>f.toMfsPath(E,Z,O)));let N=await f.toMfsPath(E,I,O);if(!k.length||!N)throw p.default(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const K=k.find(Z=>!Z.exists);if(K)throw p.default(new Error(`${K.path} does not exist`),"ERR_INVALID_PARAMS");const U=b(N);if(N.exists){if(v("Destination exists"),k.length===1&&!U)throw p.default(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(v("Destination does not exist"),k.length>1){if(!O.parents)throw p.default(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await o.createMkdir(E)(N.path,O),N=await f.toMfsPath(E,N.path,O)}else if(N.parts.length>1){const Z=`/${N.parts.slice(0,-1).join("/")}`;try{await r.createStat(E)(Z,O)}catch(V){if(V.code!=="ERR_NOT_FOUND")throw V;if(!O.parents)throw p.default(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await o.createMkdir(E)(Z,O),N=await f.toMfsPath(E,N.path,O)}}const L=b(N)?N.mfsPath:N.mfsDirectory,re=await c.toTrail(E,L);if(k.length===1){const Z=k.pop();if(!Z)throw p.default(new Error("could not find source"),"ERR_INVALID_PARAMS");const V=U?Z.name:N.name;return v(`Only one source, copying to destination ${U?"directory":"file"} ${V}`),T(E,Z,V,re,O)}return v("Multiple sources, wrapping in a directory"),R(E,k,N,re,O)}return d.withTimeoutOption(A)}var b=E=>E.unixfs&&E.unixfs.type&&E.unixfs.type.includes("directory"),T=async(E,A,C,I,P)=>{let O=I.pop();if(!O)throw p.default(new Error("destination had no parent"),"ERR_INVALID_PARAMS");O=await S(E,A,C,O,P),I.push(O);const k=await s.updateTree(E,I,P);await u.updateMfsRoot(E,k,P)},R=async(E,A,C,I,P)=>{for(let k=0;k<A.length;k++){const N=A[k];C=await S(E,N,N.name,C,P)}I[I.length-1]=C;const O=await s.updateTree(E,I,P);await u.updateMfsRoot(E,O,P)},S=async(E,A,C,I,P)=>{const O=await E.repo.blocks.get(A.cid),{node:k,cid:N,size:K}=await l.addLink(E,{parentCid:I.cid,size:O.length,cid:A.cid,name:C,hashAlg:P.hashAlg,cidVersion:P.cidVersion,flush:P.flush,shardSplitThreshold:P.shardSplitThreshold});return I.node=k,I.cid=N,I.size=K,I};e.createCp=y}}),require_remove_link=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/remove-link.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_cid(),__toCommonJS(cid_exports)),t=require_browser2(),n=(init_src(),__toCommonJS(src_exports)),s=require_hamt_utils(),u=require_err_code();function l(w){return w&&typeof w=="object"&&"default"in w?w:{default:w}}function f(w){if(w&&w.__esModule)return w;var y=Object.create(null);return w&&Object.keys(w).forEach(function(b){if(b!=="default"){var T=Object.getOwnPropertyDescriptor(w,b);Object.defineProperty(y,b,T.get?T:{enumerable:!0,get:function(){return w[b]}})}}),y.default=w,Object.freeze(y)}var a=f(o),c=l(t),d=l(u),h=c.default("ipfs:mfs:core:utils:remove-link");async function g(w,y){let b=y.parent;if(y.parentCid){const R=r.CID.asCID(y.parentCid);if(R===null)throw d.default(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");h(`Loading parent node ${R}`);const S=await w.repo.blocks.get(R);b=a.decode(S)}if(!b)throw d.default(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!y.name)throw d.default(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!b.Data)throw d.default(new Error("Parent node had no data"),"ERR_INVALID_NODE");return n.UnixFS.unmarshal(b.Data).type==="hamt-sharded-directory"?(h(`Removing ${y.name} from sharded directory`),_(w,$e(Re({},y),{parent:b}))):(h(`Removing link ${y.name} regular directory`),p(w,$e(Re({},y),{parent:b})))}var p=async(w,y)=>{y.parent.Links=y.parent.Links.filter(E=>E.Name!==y.name);const b=await a.encode(y.parent),R=await(await w.hashers.getHasher(y.hashAlg)).digest(b),S=r.CID.create(y.cidVersion,a.code,R);return await w.repo.blocks.put(S,b),h(`Updated regular directory ${S}`),{node:y.parent,cid:S}},_=async(w,y)=>{const{rootBucket:b,path:T}=await s.generatePath(w,y.name,y.parent);await b.del(y.name);const{node:R}=await m(w,T,y.name,y);return s.updateHamtDirectory(w,R.Links,b,y)},m=async(w,y,b,T)=>{const R=y.pop();if(!R)throw d.default(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:S,prefix:E,node:A}=R;if(!A)throw d.default(new Error("Could not find parent"),"EINVALIDPARENT");const C=A.Links.find(N=>(N.Name||"").substring(0,2)===E);if(!C)throw d.default(new Error(`No link found with prefix ${E} for file ${b}`),"ERR_NOT_FOUND");if(C.Name===`${E}${b}`){h(`Removing existing link ${C.Name}`);const N=A.Links.filter(K=>K.Name!==C.Name);return await S.del(b),s.updateHamtDirectory(w,N,S,T)}h(`Descending into sub-shard ${C.Name} for ${E}${b}`);const I=await m(w,y,b,T);let P=I.cid,O=I.size,k=E;if(I.node.Links.length===1){h(`Removing subshard for ${E}`);const N=I.node.Links[0];k=`${E}${(N.Name||"").substring(2)}`,P=N.Hash,O=N.Tsize||0}return h(`Updating shard ${E} with name ${k}`),v(w,S,A,E,k,O,P,T)},v=(w,y,b,T,R,S,E,A)=>{const C=b.Links.filter(I=>I.Name!==T);return C.push({Name:R,Tsize:S,Hash:E}),s.updateHamtDirectory(w,C,y,A)};e.removeLink=g}}),require_rm4=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/rm.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_err_code(),r=require_update_tree(),t=require_update_mfs_root(),n=require_remove_link(),s=require_to_mfs_path(),u=require_to_trail(),l=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),f=require_merge_options();function a(m){return m&&typeof m=="object"&&"default"in m?m:{default:m}}var c=a(o),d=a(f),h=d.default.bind({ignoreUndefined:!0}),g={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function p(m){async function v(w,y={}){const b=h(g,y);Array.isArray(w)||(w=[w]);const T=await Promise.all(w.map(R=>s.toMfsPath(m,R,b)));if(!T.length)throw c.default(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");T.forEach(R=>{if(R.path==="/")throw c.default(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")});for(const R of T)await _(m,R.path,b)}return l.withTimeoutOption(v)}var _=async(m,v,w)=>{const y=await s.toMfsPath(m,v,w),b=await u.toTrail(m,y.mfsPath),T=b[b.length-1];b.pop();const R=b[b.length-1];if(!R)throw c.default(new Error(`${v} does not exist`),"ERR_NOT_FOUND");if(T.type==="directory"&&!w.recursive)throw c.default(new Error(`${v} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:S}=await n.removeLink(m,{parentCid:R.cid,name:T.name,hashAlg:w.hashAlg,cidVersion:w.cidVersion,flush:w.flush,shardSplitThreshold:w.shardSplitThreshold});R.cid=S;const E=await r.updateTree(m,b,w);await t.updateMfsRoot(m,E,w)};e.createRm=p}}),require_chmod=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/chmod.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_merge_options(),r=require_to_mfs_path(),t=require_browser2(),n=require_err_code(),s=(init_src(),__toCommonJS(src_exports)),u=require_to_trail(),l=require_add_link(),f=require_update_tree(),a=require_update_mfs_root(),c=(init_src2(),__toCommonJS(src_exports2)),d=(init_cid(),__toCommonJS(cid_exports)),h=require_it_pipe(),g=(init_src8(),__toCommonJS(src_exports6)),p=(init_src9(),__toCommonJS(src_exports7)),_=require_it_last(),m=require_cp(),v=require_rm4(),w=require_persist(),y=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function b(Z){return Z&&typeof Z=="object"&&"default"in Z?Z:{default:Z}}function T(Z){if(Z&&Z.__esModule)return Z;var V=Object.create(null);return Z&&Object.keys(Z).forEach(function(ee){if(ee!=="default"){var fe=Object.getOwnPropertyDescriptor(Z,ee);Object.defineProperty(V,ee,fe.get?fe:{enumerable:!0,get:function(){return Z[ee]}})}}),V.default=Z,Object.freeze(V)}var R=b(o),S=b(t),E=b(n),A=T(c),C=b(_),I=R.default.bind({ignoreUndefined:!0}),P=S.default("ipfs:mfs:touch"),O={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function k(Z,V,ee){let fe=0;return(Z.includes("x")||Z.includes("X")&&(ee||V&1||V&8||V&64))&&(fe+=1),Z.includes("w")&&(fe+=2),Z.includes("r")&&(fe+=4),fe}function N(Z,V){let ee=0;return Z.includes("u")&&(ee+=V<<6),Z.includes("g")&&(ee+=V<<3),Z.includes("o")&&(ee+=V),ee}function K(Z,V,ee){return V.includes("t")&&(ee+=parseInt("1000",8)),V.includes("s")&&(Z.includes("u")&&(ee+=parseInt("4000",8)),Z.includes("g")&&(ee+=parseInt("2000",8))),ee}function U(Z,V,ee){V||(V=0);const fe=Z.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!fe)throw new Error(`Invalid file mode: ${Z}`);let[,_e,ce,Ee]=fe;(_e==="a"||!_e)&&(_e="ugo");let Ie=k(Ee,V,ee);return Ie=N(_e,Ie),Ie=K(_e,Ee,Ie),ce==="="?(_e.includes("u")&&(V=V&parseInt("7077",8),V=V|Ie),_e.includes("g")&&(V=V&parseInt("7707",8),V=V|Ie),_e.includes("o")&&(V=V&parseInt("7770",8),V=V|Ie),V):ce==="+"?Ie|V:ce==="-"?Ie^V:V}function L(Z,V){if(Z instanceof String||typeof Z=="string"){const ee=`${Z}`;ee.match(/^\d+$/g)?Z=parseInt(ee,8):Z=0+ee.split(",").reduce((fe,_e)=>U(_e,fe,V.isDirectory()),V.mode||0)}return Z}function re(Z){async function V(ee,fe,_e={}){const ce=I(O,_e);P(`Fetching stats for ${ee}`);const{cid:Ee,mfsDirectory:Ie,name:ue}=await r.toMfsPath(Z,ee,ce);if(Ee.code!==A.code)throw E.default(new Error(`${ee} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(ce.recursive){const Me=await h.pipe(async function*(){for await(const Be of p.recursive(Ee,Z.repo.blocks)){if(Be.type!=="file"&&Be.type!=="directory")throw E.default(new Error(`${ee} was not a UnixFS node`),"ERR_NOT_UNIXFS");Be.unixfs.mode=L(fe,Be.unixfs);const Le=A.prepare({Data:Be.unixfs.marshal(),Links:Be.node.Links});yield{path:Be.path,content:Le}}},Be=>g.importer(Be,Z.repo.blocks,$e(Re({},ce),{pin:!1,dagBuilder:async function*(Le,W,q){for await(const M of Le)yield async function(){const ie=M.content,ve=A.encode(ie),D=await w.persist(ve,W,q);if(!ie.Data)throw E.default(new Error(`${D} had no data`),"ERR_INVALID_NODE");const z=s.UnixFS.unmarshal(ie.Data);return{cid:D,size:ve.length,path:M.path,unixfs:z}}}})),Be=>C.default(Be));if(!Me)throw E.default(new Error(`Could not chmod ${ee}`),"ERR_COULD_NOT_CHMOD");await v.createRm(Z)(ee,ce),await m.createCp(Z)(`/ipfs/${Me.cid}`,ee,ce);return}const pe=await Z.repo.blocks.get(Ee),Ae=A.decode(pe);if(!Ae.Data)throw E.default(new Error(`${Ee} had no data`),"ERR_INVALID_NODE");const Y=s.UnixFS.unmarshal(Ae.Data);Y.mode=L(fe,Y);const se=A.encode({Data:Y.marshal(),Links:Ae.Links}),F=ce.hashAlg||O.hashAlg,B=await(await Z.hashers.getHasher(F)).digest(se),$=d.CID.create(ce.cidVersion,A.code,B);ce.flush&&await Z.repo.blocks.put($,se);const G=await u.toTrail(Z,Ie),X=G[G.length-1],H=d.CID.decode(X.cid.bytes),he=await Z.repo.blocks.get(H),we=A.decode(he),Te=await l.addLink(Z,{parent:we,name:ue,cid:$,size:se.length,flush:ce.flush,hashAlg:F,cidVersion:Ee.version,shardSplitThreshold:1/0});X.cid=Te.cid;const De=await f.updateTree(Z,G,ce);await a.updateMfsRoot(Z,De,ce)}return y.withTimeoutOption(V)}e.createChmod=re}}),require_flush=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/flush.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_stat3(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=require_merge_options();function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var s=n(t),u=s.default.bind({ignoreUndefined:!0}),l={};function f(a){async function c(d,h={}){h=u(l,h);const{cid:g}=await o.createStat(a)(d,h);return g}return r.withTimeoutOption(c)}e.createFlush=f}}),require_mv=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/mv.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_cp(),r=require_rm4(),t=require_merge_options(),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function s(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var u=s(t),l=u.default.bind({ignoreUndefined:!0}),f={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};function a(c){async function d(h,g,p={}){const _=l(f,p);await o.createCp(c)(h,g,_),await r.createRm(c)(h,$e(Re({},_),{recursive:!0}))}return n.withTimeoutOption(d)}e.createMv=a}}),require_touch=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/touch.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_merge_options(),r=require_to_mfs_path(),t=require_browser2(),n=require_err_code(),s=(init_src(),__toCommonJS(src_exports)),u=require_to_trail(),l=require_add_link(),f=require_update_tree(),a=require_update_mfs_root(),c=(init_src2(),__toCommonJS(src_exports2)),d=(init_cid(),__toCommonJS(cid_exports)),h=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function g(S){return S&&typeof S=="object"&&"default"in S?S:{default:S}}function p(S){if(S&&S.__esModule)return S;var E=Object.create(null);return S&&Object.keys(S).forEach(function(A){if(A!=="default"){var C=Object.getOwnPropertyDescriptor(S,A);Object.defineProperty(E,A,C.get?C:{enumerable:!0,get:function(){return S[A]}})}}),E.default=S,Object.freeze(E)}var _=g(o),m=g(t),v=g(n),w=p(c),y=_.default.bind({ignoreUndefined:!0}),b=m.default("ipfs:mfs:touch"),T={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};function R(S){async function E(A,C={}){const I=y(T,C);I.mtime=I.mtime||new Date,b(`Touching ${A} mtime: ${I.mtime}`);const{cid:P,mfsDirectory:O,name:k,exists:N}=await r.toMfsPath(S,A,I),K=C.hashAlg||T.hashAlg,U=await S.hashers.getHasher(K);let L,re,Z=I.cidVersion;if(N){if(P.code!==w.code)throw v.default(new Error(`${A} was not a UnixFS node`),"ERR_NOT_UNIXFS");Z=P.version;const ue=await S.repo.blocks.get(P),pe=w.decode(ue);if(!pe.Data)throw v.default(new Error(`${A} had no data`),"ERR_INVALID_NODE");const Ae=s.UnixFS.unmarshal(pe.Data);Ae.mtime=I.mtime,L=w.encode({Data:Ae.marshal(),Links:pe.Links});const Y=await U.digest(L);re=d.CID.create(I.cidVersion,w.code,Y),I.flush&&await S.repo.blocks.put(re,L)}else{const ue=new s.UnixFS({type:"file",mtime:I.mtime});L=w.encode({Data:ue.marshal(),Links:[]});const pe=await U.digest(L);re=d.CID.create(I.cidVersion,w.code,pe),I.flush&&await S.repo.blocks.put(re,L)}const V=await u.toTrail(S,O),ee=V[V.length-1],fe=ee.cid,_e=await S.repo.blocks.get(fe),ce=w.decode(_e),Ee=await l.addLink(S,{parent:ce,name:k,cid:re,size:L.length,flush:I.flush,shardSplitThreshold:I.shardSplitThreshold,hashAlg:I.hashAlg,cidVersion:Z});ee.cid=Ee.cid;const Ie=await f.updateTree(S,V,I);await a.updateMfsRoot(S,Ie,I)}return h.withTimeoutOption(E)}e.createTouch=R}}),require_read=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/read.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_merge_options(),t=require_to_mfs_path(),n=require_err_code(),s=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function u(h){return h&&typeof h=="object"&&"default"in h?h:{default:h}}var l=u(r),f=u(n),a=l.default.bind({ignoreUndefined:!0}),c={offset:0,length:1/0};function d(h){function g(p,_={}){return _=a(c,_),{[Symbol.asyncIterator]:async function*(){const v=await t.toMfsPath(h,p,_),w=await o.exporter(v.mfsPath,h.repo.blocks);if(w.type!=="file")throw f.default(new Error(`${p} was not a file`),"ERR_NOT_FILE");if(!w.content)throw f.default(new Error(`Could not load content stream from ${p}`),"ERR_NO_CONTENT");for await(const y of w.content({offset:_.offset,length:_.length}))yield y}}}return s.withTimeoutOption(g)}e.createRead=d}}),require_to_async_iterator=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/utils/to-async-iterator.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_err_code(),r=require_browser2(),t=require_utils2(),n=(init_from_string(),__toCommonJS(from_string_exports));function s(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var u=s(o),l=s(r),f=l.default("ipfs:mfs:utils:to-async-iterator");function a(c){if(!c)throw u.default(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if((typeof c=="string"||c instanceof String)&&(f("Content was a string"),c=n.fromString(c.toString())),c.length)return f("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield c}};if(c[Symbol.asyncIterator])return f("Content was an async iterator"),c;if(c[Symbol.iterator])return f("Content was an iterator"),c;if(global.Blob&&c instanceof global.Blob){f("Content was an HTML5 Blob");let d=0;const h={next:()=>d>c.size?{done:!0}:new Promise((g,p)=>{const _=c.slice(d,t.MFS_MAX_CHUNK_SIZE);d+=t.MFS_MAX_CHUNK_SIZE;const m=new global.FileReader,v=w=>{if(m.removeEventListener("loadend",v,!1),w.error)return p(w.error);g({done:!1,value:new Uint8Array(m.result)})};m.addEventListener("loadend",v),m.readAsArrayBuffer(_)})};return{[Symbol.asyncIterator]:()=>h}}throw u.default(new Error(`Don't know how to convert ${c} into an async iterator`),"ERR_INVALID_PARAMS")}e.toAsyncIterator=a}}),require_write=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/write.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=(init_src8(),__toCommonJS(src_exports6)),t=(init_src2(),__toCommonJS(src_exports2)),n=require_stat3(),s=require_mkdir(),u=require_add_link(),l=require_merge_options(),f=require_create_lock(),a=require_to_async_iterator(),c=require_to_mfs_path(),d=require_to_path_components(),h=require_to_trail(),g=require_update_tree(),p=require_update_mfs_root(),_=require_err_code(),m=require_utils2(),v=require_it_last(),w=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),y=(init_src(),__toCommonJS(src_exports));function b(re){return re&&typeof re=="object"&&"default"in re?re:{default:re}}var T=b(o),R=b(l),S=b(_),E=b(v),A=R.default.bind({ignoreUndefined:!0}),C=T.default("ipfs:mfs:write"),I={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(re,Z)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};function P(re){async function Z(V,ee,fe={}){const _e=A(I,fe);let ce,Ee,Ie;if(C("Reading source, destination and parent"),await f.createLock().readLock(async()=>{ce=await a.toAsyncIterator(ee),Ee=await c.toMfsPath(re,V,_e),Ie=await c.toMfsPath(re,Ee.mfsDirectory,_e)})(),C("Read source, destination and parent"),!_e.parents&&!Ie.exists)throw S.default(new Error("directory does not exist"),"ERR_NO_EXIST");if(ce==null)throw S.default(new Error("could not create source"),"ERR_NO_SOURCE");if(Ee==null)throw S.default(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!_e.create&&!Ee.exists)throw S.default(new Error("file does not exist"),"ERR_NO_EXIST");if(Ee.entryType!=="file")throw S.default(new Error("not a file"),"ERR_NOT_A_FILE");return O(re,V,ce,Ee,_e)}return w.withTimeoutOption(Z)}var O=async(re,Z,V,ee,fe)=>{const _e=await k(re,V,ee,fe);await f.createLock().writeLock(async()=>{const ce=d.toPathComponents(Z),Ee=ce.pop();if(Ee==null)throw S.default(new Error("source does not exist"),"ERR_NO_EXIST");let Ie=!1;try{await n.createStat(re)(`/${ce.join("/")}`,fe),Ie=!0}catch(B){if(B.code!=="ERR_NOT_FOUND")throw B}Ie||await s.createMkdir(re)(`/${ce.join("/")}`,fe);const ue=await c.toMfsPath(re,Z,fe),pe=await h.toTrail(re,ue.mfsDirectory),Ae=pe[pe.length-1];if(!Ae)throw S.default(new Error("directory does not exist"),"ERR_NO_EXIST");if(!Ae.type||!Ae.type.includes("directory"))throw S.default(new Error(`cannot write to ${Ae.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const Y=await re.repo.blocks.get(Ae.cid),se=t.decode(Y),F=await u.addLink(re,{parent:se,name:Ee,cid:_e.cid,size:_e.size,flush:fe.flush,shardSplitThreshold:fe.shardSplitThreshold,hashAlg:fe.hashAlg,cidVersion:fe.cidVersion});Ae.cid=F.cid;const j=await g.updateTree(re,pe,fe);await p.updateMfsRoot(re,j,fe)})()},k=async(re,Z,V,ee)=>{V.exists?C(`Overwriting file ${V.cid} offset ${ee.offset} length ${ee.length}`):C(`Writing file offset ${ee.offset} length ${ee.length}`);const fe=[];if(ee.offset>0)if(V.unixfs){if(C(`Writing first ${ee.offset} bytes of original file`),fe.push(()=>V.content({offset:0,length:ee.offset})),V.unixfs.fileSize()<ee.offset){const pe=ee.offset-V.unixfs.fileSize();C(`Writing zeros for extra ${pe} bytes`),fe.push(K(pe))}}else C(`Writing zeros for first ${ee.offset} bytes`),fe.push(K(ee.offset));fe.push(N(Z,ee.length));const _e=L(U(fe),pe=>{if(V.unixfs&&!ee.truncate){const Ae=V.unixfs.fileSize();if(Ae>pe)return C(`Writing last ${Ae-pe} of ${Ae} bytes from original file starting at offset ${pe}`),V.content({offset:pe});C("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}});let ce;ee.mode!==void 0&&ee.mode!==null?ce=y.parseMode(ee.mode):V&&V.unixfs&&(ce=V.unixfs.mode);let Ee;ee.mtime!=null?Ee=y.parseMtime(ee.mtime):V&&V.unixfs&&(Ee=V.unixfs.mtime);const Ie=await re.hashers.getHasher(ee.hashAlg),ue=await E.default(r.importer([{content:_e,mode:ce,mtime:Ee}],re.repo.blocks,{progress:ee.progress,hasher:Ie,cidVersion:ee.cidVersion,strategy:ee.strategy,rawLeaves:ee.rawLeaves,reduceSingleLeafToSelf:ee.reduceSingleLeafToSelf,leafType:ee.leafType}));if(!ue)throw S.default(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return C(`Wrote ${ue.cid}`),{cid:ue.cid,size:ue.size}},N=(re,Z)=>async function*(){let ee=0;for await(const fe of re){if(ee+=fe.length,ee>Z){yield fe.slice(0,Z-ee);return}yield fe}},K=(re,Z=m.MFS_MAX_CHUNK_SIZE)=>{const V=new Uint8Array(Z);async function*ee(){for(;;)yield V.slice()}return N(ee(),re)},U=async function*(re){for(let Z=0;Z<re.length;Z++)yield*re[Z]()},L=async function*(re,Z){let V=0;for await(const ee of re)V+=ee.length,yield ee;for await(const ee of Z(V))V+=ee.length,yield ee};e.createWrite=P}}),require_ls3=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/ls.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src9(),__toCommonJS(src_exports7)),r=require_to_mfs_path(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=require_it_map();function s(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var u=s(n),l=a=>{const c={cid:a.cid,name:a.name,type:a.type==="directory"?"directory":"file",size:a.size};return(a.type==="file"||a.type==="directory")&&(c.mode=a.unixfs.mode,c.mtime=a.unixfs.mtime),c};function f(a){async function*c(d,h={}){const g=await r.toMfsPath(a,d,h),p=await o.exporter(g.mfsPath,a.repo.blocks);if(p.type==="directory"){yield*u.default(p.content(h),l);return}yield l(p)}return t.withTimeoutOption(c)}e.createLs=f}}),require_files=__commonJS({"node_modules/ipfs-core/cjs/src/components/files/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_create_lock(),r=require_src3(),t=require_stat3(),n=require_chmod(),s=require_cp(),u=require_flush(),l=require_mkdir(),f=require_mv(),a=require_rm4(),c=require_touch(),d=require_read(),h=require_write(),g=require_ls3();function p(S){return S&&typeof S=="object"&&"default"in S?S:{default:S}}var _=p(r),m={stat:t.createStat},v={chmod:n.createChmod,cp:s.createCp,flush:u.createFlush,mkdir:l.createMkdir,mv:f.createMv,rm:a.createRm,touch:c.createTouch},w={write:h.createWrite,read:d.createRead,ls:g.createLs},y=({options:S,mfs:E,operations:A,lock:C})=>{Object.keys(A).forEach(I=>{E[I]=C(A[I](S))})},b={repoOwner:!0,repo:null};function T(S){const{repoOwner:E}=Object.assign({},b||{},S),A=o.createLock(E),C=O=>A.readLock(O),I=O=>A.writeLock(O),P={};return y({options:S,mfs:P,operations:m,lock:C}),y({options:S,mfs:P,operations:v,lock:I}),Object.keys(w).forEach(O=>{P[O]=w[O](S)}),P}function R({repo:S,preload:E,hashers:A,options:C}){const I=T({repo:S,repoOwner:Boolean(C.repoOwner),hashers:A}),P=O=>(...N)=>{const K=N.filter(U=>_.default.ipfsPath(U)||_.default.cid(U));if(K.length){const U=N[N.length-1];U&&U.preload!==!1&&K.forEach(L=>E(L))}return O(...N)};return $e(Re({},I),{chmod:I.chmod,cp:P(I.cp),mkdir:I.mkdir,stat:P(I.stat),rm:I.rm,read:P(I.read),touch:I.touch,write:I.write,mv:P(I.mv),flush:I.flush,ls:P(async function*(...O){for await(const k of I.ls(...O))yield $e(Re({},k),{size:k.size||0})})})}e.createFiles=R}}),require_export2=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/export.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=(s,u)=>t.exportKey(s,u);return o.withTimeoutOption(n)}e.createExport=r}}),require_gen=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/gen.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r="ed25519",t=2048;function n({keychain:s}){const u=(l,f={type:r,size:t})=>s.createKey(l,f.type||r,f.size||t);return o.withTimeoutOption(u)}e.createGen=n}}),require_import2=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/import.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=(s,u,l)=>t.importKey(s,u,l);return o.withTimeoutOption(n)}e.createImport=r}}),require_info=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/info.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=s=>t.findKeyByName(s);return o.withTimeoutOption(n)}e.createInfo=r}}),require_list2=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/list.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=()=>t.listKeys();return o.withTimeoutOption(n)}e.createList=r}}),require_rename=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/rename.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=async(s,u)=>{const l=await t.renameKey(s,u);return{was:s,now:l.name,id:l.id,overwrite:!1}};return o.withTimeoutOption(n)}e.createRename=r}}),require_rm5=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/rm.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({keychain:t}){const n=s=>t.removeKey(s);return o.withTimeoutOption(n)}e.createRm=r}}),require_key=__commonJS({"node_modules/ipfs-core/cjs/src/components/key/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_export2(),r=require_gen(),t=require_import2(),n=require_info(),s=require_list2(),u=require_rename(),l=require_rm5(),f=class{constructor({keychain:a}){this.gen=r.createGen({keychain:a}),this.list=s.createList({keychain:a}),this.rm=l.createRm({keychain:a}),this.rename=u.createRename({keychain:a}),this.export=o.createExport({keychain:a}),this.import=t.createImport({keychain:a}),this.info=n.createInfo({keychain:a})}};e.KeyAPI=f}}),require_get4=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/get.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t(u){if(u&&u.__esModule)return u;var l=Object.create(null);return u&&Object.keys(u).forEach(function(f){if(f!=="default"){var a=Object.getOwnPropertyDescriptor(u,f);Object.defineProperty(l,f,a.get?a:{enumerable:!0,get:function(){return u[f]}})}}),l.default=u,Object.freeze(l)}var n=t(o);function s({repo:u,preload:l}){async function f(a,c={}){c.preload!==!1&&l(a);const d=await u.blocks.get(a,c);return n.decode(d)}return r.withTimeoutOption(f)}e.createGet=s}}),require_data=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/data.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_get4();function t({repo:n,preload:s}){const u=r.createGet({repo:n,preload:s});async function l(f,a={}){return(await u(f,a)).Data||new Uint8Array(0)}return o.withTimeoutOption(l)}e.createData=t}}),require_links=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/links.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_esm(),__toCommonJS(esm_exports)),t=(init_esm2(),__toCommonJS(esm_exports2)),n=(init_raw(),__toCommonJS(raw_exports)),s=(init_cid(),__toCommonJS(cid_exports)),u=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function l(p){if(p&&p.__esModule)return p;var _=Object.create(null);return p&&Object.keys(p).forEach(function(m){if(m!=="default"){var v=Object.getOwnPropertyDescriptor(p,m);Object.defineProperty(_,m,v.get?v:{enumerable:!0,get:function(){return p[m]}})}}),_.default=p,Object.freeze(_)}var f=l(o),a=l(r),c=l(t),d=l(n);function h(p,_=[]){for(const m in p){const v=p[m];if(m==="/"&&Object.keys(p).length===1)try{_.push({Name:"",Tsize:0,Hash:s.CID.parse(v)});continue}catch{}const w=s.CID.asCID(v);if(w){_.push({Name:"",Tsize:0,Hash:w});continue}Array.isArray(v)&&h(v,_),v&&typeof v=="object"&&h(v,_)}return _}function g({repo:p,codecs:_}){async function m(v,w={}){const y=await _.getCodec(v.code),b=await p.blocks.get(v,w),T=y.decode(b);switch(v.code){case d.code:return[];case f.code:return T.Links;case a.code:case c.code:return h(T);default:throw new Error(`Cannot resolve links from codec ${v.code}`)}}return u.withTimeoutOption(m)}e.createLinks=g}}),require_new=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/new.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),t=(init_src(),__toCommonJS(src_exports)),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),s=(init_cid(),__toCommonJS(cid_exports));function u(a){if(a&&a.__esModule)return a;var c=Object.create(null);return a&&Object.keys(a).forEach(function(d){if(d!=="default"){var h=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(c,d,h.get?h:{enumerable:!0,get:function(){return a[d]}})}}),c.default=a,Object.freeze(c)}var l=u(o);function f({repo:a,preload:c}){async function d(h={}){let g;if(h.template)if(h.template==="unixfs-dir")g=new t.UnixFS({type:"directory"}).marshal();else throw new Error("unknown template");const p=l.encode({Data:g,Links:[]}),_=await r.sha256.digest(p),m=s.CID.createV0(_);return await a.blocks.put(m,p,{signal:h.signal}),h.preload!==!1&&c(m),m}return n.withTimeoutOption(d)}e.createNew=f}}),require_put3=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/put.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_cid(),__toCommonJS(cid_exports)),t=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),n=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function s(f){if(f&&f.__esModule)return f;var a=Object.create(null);return f&&Object.keys(f).forEach(function(c){if(c!=="default"){var d=Object.getOwnPropertyDescriptor(f,c);Object.defineProperty(a,c,d.get?d:{enumerable:!0,get:function(){return f[c]}})}}),a.default=f,Object.freeze(a)}var u=s(o);function l({repo:f,preload:a}){async function c(d,h={}){const g=await f.gcLock.readLock();try{const p=u.encode(d),_=await t.sha256.digest(p),m=r.CID.createV1(u.code,_);return await f.blocks.put(m,p,{signal:h.signal}),h.preload!==!1&&a(m),h.pin&&await f.pins.pinRecursively(m,{signal:h.signal}),m}finally{g()}}return n.withTimeoutOption(c)}e.createPut=l}}),require_stat4=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/stat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src2(),__toCommonJS(src_exports2)),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=require_get4();function n(l){if(l&&l.__esModule)return l;var f=Object.create(null);return l&&Object.keys(l).forEach(function(a){if(a!=="default"){var c=Object.getOwnPropertyDescriptor(l,a);Object.defineProperty(f,a,c.get?c:{enumerable:!0,get:function(){return l[a]}})}}),f.default=l,Object.freeze(f)}var s=n(o);function u({repo:l,preload:f}){const a=t.createGet({repo:l,preload:f});async function c(d,h={}){const g=await a(d,h),_=s.encode(g).length,m=g.Links.reduce((v,w)=>v+(w.Tsize||0),0);return{Hash:d,NumLinks:g.Links.length,BlockSize:_,LinksSize:_-(g.Data||[]).length,DataSize:(g.Data||[]).length,CumulativeSize:_+m}}return r.withTimeoutOption(c)}e.createStat=u}}),require_add_link2=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/patch/add-link.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_get4(),t=require_put3();function n({repo:s,preload:u}){const l=r.createGet({repo:s,preload:u}),f=t.createPut({repo:s,preload:u});async function a(c,d,h={}){const g=await l(c,h);return f($e(Re({},g),{Links:g.Links.concat([d])}),h)}return o.withTimeoutOption(a)}e.createAddLink=n}}),require_append_data=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/patch/append-data.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=(init_concat(),__toCommonJS(concat_exports)),t=require_get4(),n=require_put3();function s({repo:u,preload:l}){const f=t.createGet({repo:u,preload:l}),a=n.createPut({repo:u,preload:l});async function c(d,h,g={}){const p=await f(d,g),_=r.concat([p.Data||[],h]);return a($e(Re({},p),{Data:_}),g)}return o.withTimeoutOption(c)}e.createAppendData=s}}),require_rm_link=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/patch/rm-link.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_get4(),t=require_put3();function n({repo:s,preload:u}){const l=r.createGet({repo:s,preload:u}),f=t.createPut({repo:s,preload:u});async function a(c,d,h={}){const g=await l(c,h),p=(typeof d=="string"?d:d.Name)||"";return g.Links=g.Links.filter(_=>_.Name!==p),f(g,h)}return o.withTimeoutOption(a)}e.createRmLink=n}}),require_set_data=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/patch/set-data.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_get4(),t=require_put3();function n({repo:s,preload:u}){const l=r.createGet({repo:s,preload:u}),f=t.createPut({repo:s,preload:u});async function a(c,d,h={}){const g=await l(c,h);return f($e(Re({},g),{Data:d}),h)}return o.withTimeoutOption(a)}e.createSetData=n}}),require_patch=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/patch/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_add_link2(),r=require_append_data(),t=require_rm_link(),n=require_set_data(),s=class{constructor({repo:u,preload:l}){this.addLink=o.createAddLink({repo:u,preload:l}),this.appendData=r.createAppendData({repo:u,preload:l}),this.rmLink=t.createRmLink({repo:u,preload:l}),this.setData=n.createSetData({repo:u,preload:l})}};e.ObjectPatchAPI=s}}),require_object=__commonJS({"node_modules/ipfs-core/cjs/src/components/object/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_data(),r=require_get4(),t=require_links(),n=require_new(),s=require_put3(),u=require_stat4(),l=require_patch(),f=class{constructor({repo:a,codecs:c,preload:d}){this.data=o.createData({repo:a,preload:d}),this.get=r.createGet({repo:a,preload:d}),this.links=t.createLinks({repo:a,codecs:c}),this.new=n.createNew({repo:a,preload:d}),this.put=s.createPut({repo:a,preload:d}),this.stat=u.createStat({repo:a,preload:d}),this.patch=new l.ObjectPatchAPI({repo:a,preload:d})}};e.ObjectAPI=f}}),require_gc=__commonJS({"node_modules/ipfs-core/cjs/src/components/repo/gc.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),t=require_with_mfs_root();function n(f){return f&&typeof f=="object"&&"default"in f?f:{default:f}}var s=n(o),u=s.default("ipfs:repo:gc");function l({repo:f,hashers:a}){async function*c(d={}){const h=Date.now();let g;try{g=await t.loadMfsRoot({repo:f,hashers:a},d),await f.pins.pinRecursively(g),yield*f.gc()}finally{g&&await f.pins.unpin(g)}u(`Complete (${Date.now()-h}ms)`)}return r.withTimeoutOption(c)}e.createGc=l}}),require_stat5=__commonJS({"node_modules/ipfs-core/cjs/src/components/repo/stat.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({repo:t}){async function n(s={}){const u=await t.stat();return{numObjects:BigInt(u.numObjects.toString()),repoSize:BigInt(u.repoSize.toString()),repoPath:u.repoPath,version:`${u.version}`,storageMax:BigInt(u.storageMax.toString())}}return o.withTimeoutOption(n)}e.createStat=r}}),constants_exports={};__export(constants_exports,{repoVersion:()=>repoVersion});var repoVersion,init_constants=__esm({"node_modules/ipfs-repo/esm/src/constants.js"(){init_node_globals(),repoVersion=12}}),require_version3=__commonJS({"node_modules/ipfs-core/cjs/src/components/repo/version.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=(init_constants(),__toCommonJS(constants_exports));function t({repo:n}){async function s(u={}){try{await n._checkInitialized(u)}catch(l){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some(a=>a.test(l.message)))return r.repoVersion;throw l}return n.version.get()}return o.withTimeoutOption(s)}e.createVersion=t}}),require_repo=__commonJS({"node_modules/ipfs-core/cjs/src/components/repo/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_gc(),r=require_stat5(),t=require_version3(),n=class{constructor({repo:s,hashers:u}){this.gc=o.createGc({repo:s,hashers:u}),this.stat=r.createStat({repo:s}),this.version=t.createVersion({repo:s}),this.setApiAddr=l=>s.apiAddr.set(l)}};e.RepoAPI=n}}),require_bw=__commonJS({"node_modules/ipfs-core/cjs/src/components/stats/bw.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_parse_duration(),r=require_err_code(),t=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),n=require_src5();function s(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var u=s(o),l=s(r),f=s(n);function a(d,h){let g;if(d.metrics?h.peer?g=d.metrics.forPeer(f.default.parse(h.peer)):h.proto?g=d.metrics.forProtocol(h.proto):g=d.metrics.global:g=void 0,!g)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};const{movingAverages:p,snapshot:_}=g;return{totalIn:BigInt(_.dataReceived.integerValue().toString()),totalOut:BigInt(_.dataSent.integerValue().toString()),rateIn:p.dataReceived[6e4].movingAverage()/60,rateOut:p.dataSent[6e4].movingAverage()/60}}function c({network:d}){const h=async function*(g={}){const{libp2p:p}=await d.use(g);if(!g.poll){yield a(p,g);return}const _=g.interval||1e3;let m=-1;try{if(m=typeof _=="string"?u.default(_)||-1:_,!m||m<0)throw new Error("invalid duration")}catch(w){throw l.default(w,"ERR_INVALID_POLL_INTERVAL")}let v;try{for(;;)yield a(p,g),await new Promise(w=>{v=setTimeout(w,m)})}finally{clearTimeout(v)}};return t.withTimeoutOption(h)}e.createBw=c}}),require_stats=__commonJS({"node_modules/ipfs-core/cjs/src/components/stats/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_bw(),r=require_stat5(),t=require_stat(),n=class{constructor({repo:s,network:u}){this.repo=r.createStat({repo:s}),this.bw=o.createBw({network:u}),this.bitswap=t.createStat({network:u})}};e.StatsAPI=n}}),require_just_safe_get=__commonJS({"node_modules/just-safe-get/index.js"(e,o){init_node_globals(),o.exports=r;function r(t,n,s){if(!t)return s;var u,l;if(Array.isArray(n)&&(u=n.slice(0)),typeof n=="string"&&(u=n.split(".")),typeof n=="symbol"&&(u=[n]),!Array.isArray(u))throw new Error("props arg must be an array, a string or a symbol");for(;u.length;)if(l=u.shift(),!t||(t=t[l],t===void 0))return s;return t}}}),require_it_length=__commonJS({"node_modules/it-length/index.js"(e,o){init_node_globals();var r=async t=>{let n=0;for await(const s of t)n++;return n};o.exports=r}});function unwrap(e){return e.child?unwrap(e.child):e}function keyToMultihash(e){try{const o=base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=CID.decode(o).multihash.bytes,t=base32.encode(r).slice(1).toUpperCase();return new Key(`/${t}`,!1)}catch{return e}}function keyToCid(e){try{const o=base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=decode3(o),t=base32.encode(CID.createV1(code6,r).bytes).slice(1);return new Key(`/${t.toUpperCase()}`,!1)}catch{return e}}async function process2(e,o,r){const t=e.blocks;await t.open();const n=unwrap(t),s=await(0,import_it_length.default)(n.queryKeys({filters:[u=>r(u).toString()!==u.toString()]}));try{let u=0;for await(const l of n.query({})){const f=r(l.key);f.toString()!==l.key.toString()&&(u+=1,log5(`Migrating Block from ${l.key} to ${f}`,await n.has(l.key)),await n.delete(l.key),await n.put(f,l.value),o(u/s*100,`Migrated Block from ${l.key} to ${f}`))}}finally{await t.close()}}var import_debug5,import_it_length,log5,migration,init_migration_8=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-8/index.js"(){init_node_globals(),init_cid(),init_key(),import_debug5=__toESM(require_browser2(),1),import_it_length=__toESM(require_it_length(),1),init_base32(),init_raw(),init_digest(),log5=(0,import_debug5.default)("ipfs:repo:migrator:migration-8"),migration={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,o=()=>{})=>process2(e,o,keyToMultihash),revert:(e,o=()=>{})=>process2(e,o,keyToCid)}}}),import_minimal3,$Reader3,$Writer3,$root3,ipfs,init_pin=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-9/pin.js"(){init_node_globals(),import_minimal3=__toESM(require_minimal2(),1),$Reader3=import_minimal3.default.Reader,$Writer3=import_minimal3.default.Writer,import_minimal3.default.util,$root3=import_minimal3.default.roots.default||(import_minimal3.default.roots.default={}),ipfs=$root3.ipfs=(()=>{const e={};return e.pin=function(){const o={};return o.Set=function(){function r(t){if(t)for(var n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,s){return s||(s=$Writer3.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&s.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&s.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&s.uint32(29).fixed32(n.seed),s},r.decode=function(n,s){n instanceof $Reader3||(n=$Reader3.create(n));for(var u=s===void 0?n.len:n.pos+s,l=new $root3.ipfs.pin.Set;n.pos<u;){var f=n.uint32();switch(f>>>3){case 1:l.version=n.uint32();break;case 2:l.fanout=n.uint32();break;case 3:l.seed=n.fixed32();break;default:n.skipType(f&7);break}}return l},r.fromObject=function(n){if(n instanceof $root3.ipfs.pin.Set)return n;var s=new $root3.ipfs.pin.Set;return n.version!=null&&(s.version=n.version>>>0),n.fanout!=null&&(s.fanout=n.fanout>>>0),n.seed!=null&&(s.seed=n.seed>>>0),s},r.toObject=function(n,s){s||(s={});var u={};return s.defaults&&(u.version=0,u.fanout=0,u.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(u.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(u.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(u.seed=n.seed),u},r.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal3.default.util.toJSONOptions)},r}(),o}(),e})()}}),require_fnv1a=__commonJS({"node_modules/fnv1a/index.js"(e,o){init_node_globals(),r.BASE=2166136261;function r(t){for(var n=r.BASE,s=0,u=t.length;s<u;s++)n^=t.charCodeAt(s),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>0}o.exports=r}});function cidToKey(e){return new Key(`/${base32.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}var PIN_DS_KEY,DEFAULT_FANOUT,MAX_ITEMS,EMPTY_KEY,PinTypes2,init_utils5=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-9/utils.js"(){init_node_globals(),init_key(),init_base32(),init_cid(),PIN_DS_KEY=new Key("/local/pins"),DEFAULT_FANOUT=256,MAX_ITEMS=8192,EMPTY_KEY=CID.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),PinTypes2={direct:"direct",recursive:"recursive"}}}),compare_exports={};__export(compare_exports,{compare:()=>compare2});function compare2(e,o){for(let r=0;r<e.byteLength;r++){if(e[r]<o[r])return-1;if(e[r]>o[r])return 1}return e.byteLength>o.byteLength?1:e.byteLength<o.byteLength?-1:0}var init_compare=__esm({"node_modules/uint8arrays/esm/src/compare.js"(){init_node_globals()}});function readHeader2(e){const o=e.Data;if(!o)throw new Error("No data present");const r=import_varint4.default.decode(o),t=import_varint4.default.decode.bytes;if(t<=0)throw new Error("Invalid Set header length");if(t+r>o.length)throw new Error("Impossibly large set header length");const n=o.slice(t,r+t),s=PinSet.toObject(PinSet.decode(n),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(s.version!==1)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:o.slice(r+t)}}function hash(e,o){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);const n=fromString3(o.toString()),s=concat2([r,n],r.byteLength+n.byteLength);return(0,import_fnv1a.default)(toString3(s))}async function*walkItems(e,o){const r=readHeader2(o);let t=0;for(const n of o.Links){if(t<r.header.fanout){const s=n.Hash;if(!EMPTY_KEY.equals(s)){const u=await e.get(s),l=decode5(u);yield*walkItems(e,l)}}else yield n.Hash;t++}}async function*loadSet(e,o,r){const t=o.Links.find(u=>u.Name===r);if(!t)throw new Error("No link found with name "+r);const n=await e.get(t.Hash),s=decode5(n);yield*walkItems(e,s)}function storeItems(e,o){return r(o,0);async function r(t,n){const s=PinSet.encode({version:1,fanout:DEFAULT_FANOUT,seed:n}).finish(),u=import_varint4.default.encode(s.length),l=concat2([u,s]),f=[];for(let c=0;c<DEFAULT_FANOUT;c++)f.push({Name:"",Tsize:1,Hash:EMPTY_KEY});if(t.length<=MAX_ITEMS){const c=t.map(g=>({link:{Name:"",Tsize:1,Hash:g.key},data:g.data||new Uint8Array})).sort((g,p)=>compare2(g.link.Hash.bytes,p.link.Hash.bytes)),d=f.concat(c.map(g=>g.link));return{Data:concat2([l,...c.map(g=>g.data)]),Links:d}}else{const c=t.reduce((h,g)=>{const p=hash(n,g.key)%DEFAULT_FANOUT;return h[p]=p in h?h[p].concat([g]):[g],h},[]);let d=0;for(const h of c){const g=await r(h,n+1);await a(g,d),d++}return{Data:l,Links:f}}async function a(c,d){const h=encode3(c),g=await sha256.digest(h),p=CID.createV0(g);await e.put(p,h);const _=c.Links.reduce((m,v)=>m+(v.Tsize||0),0)+h.length;f[d]={Name:"",Tsize:_,Hash:p}}}}async function storeSet(e,o,r){const t=await storeItems(e,r.map(f=>({key:f}))),n=encode3(t),s=await sha256.digest(n),u=CID.createV0(s);await e.put(u,n);const l=t.Links.reduce((f,a)=>f+a.Tsize,0)+n.length;return{Name:o,Tsize:l,Hash:u}}var import_fnv1a,import_varint4,PinSet,init_pin_set=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-9/pin-set.js"(){init_node_globals(),init_cid(),init_pin(),import_fnv1a=__toESM(require_fnv1a(),1),import_varint4=__toESM(require_varint(),1),init_src2(),init_utils5(),init_concat(),init_compare(),init_to_string(),init_from_string(),init_sha2_browser(),PinSet=ipfs.pin.Set}});async function pinsToDatastore(e,o,r,t){if(!await o.has(PIN_DS_KEY))return;const n=await o.get(PIN_DS_KEY),s=CID.decode(n),u=await e.get(s),l=decode5(u);let f=0;const a=await(0,import_it_length2.default)(loadSet(e,l,PinTypes2.recursive))+await(0,import_it_length2.default)(loadSet(e,l,PinTypes2.direct));for await(const c of loadSet(e,l,PinTypes2.recursive)){f++;const d={depth:1/0};c.version!==0&&(d.version=c.version),c.code!==code&&(d.codec=c.code),await r.put(cidToKey(c),encode4(d)),t(f/a*100,`Migrated recursive pin ${c}`)}for await(const c of loadSet(e,l,PinTypes2.direct)){f++;const d={depth:0};c.version!==0&&(d.version=c.version),c.code!==code&&(d.codec=c.code),await r.put(cidToKey(c),encode4(d)),t(f/a*100,`Migrated direct pin ${c}`)}await e.delete(s),await o.delete(PIN_DS_KEY)}async function pinsToDAG(e,o,r,t){const n=[],s=[];let u=0;const l=await(0,import_it_length2.default)(r.queryKeys({}));for await(const{key:h,value:g}of r.query({})){u++;const p=decode6(g),_=CID.create(p.version||0,p.codec||code,decode3(base32.decode("b"+h.toString().toLowerCase().split("/").pop())));p.depth===0?(t(u/l*100,`Reverted direct pin ${_}`),s.push(_)):(t(u/l*100,`Reverted recursive pin ${_}`),n.push(_))}t(100,"Updating pin root");const f={Links:[await storeSet(e,PinTypes2.direct,s),await storeSet(e,PinTypes2.recursive,n)]},a=encode3(f),c=await sha256.digest(a),d=CID.createV0(c);await e.put(d,a),await o.put(PIN_DS_KEY,d.bytes)}async function process3(e,o,r){const t=e.blocks,n=e.datastore,s=e.pins;await t.open(),await n.open(),await s.open();try{await r(t,n,s,o)}finally{await s.close(),await n.close(),await t.close()}}var import_it_length2,migration2,init_migration_9=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-9/index.js"(){init_node_globals(),init_cid(),init_src2(),init_cborg(),init_pin_set(),init_utils5(),import_it_length2=__toESM(require_it_length(),1),init_sha2_browser(),init_digest(),init_base32(),migration2={version:9,description:"Migrates pins to datastore",migrate:(e,o=()=>{})=>process3(e,o,pinsToDatastore),revert:(e,o=()=>{})=>process3(e,o,pinsToDAG)}}});function findLevelJs(e){let o=e;for(;o.db||o.child;)if(o=o.db||o.child,o.type==="level-js"||o.constructor.name==="Level")return o}async function hasWithFallback(e,o,r){const t=await o(e);if(t)return t;const n=findLevelJs(r);return n?new Promise((s,u)=>{const l=n.store("readonly").get(e.toString());l.transaction.onabort=()=>{u(l.transaction.error)},l.transaction.oncomplete=()=>{s(Boolean(l.result))}}):!1}async function getWithFallback(e,o,r,t){if(await r(e))return o(e);const n=findLevelJs(t);if(!n)throw notFoundError();return new Promise((s,u)=>{const l=n.store("readonly").get(e.toString());l.transaction.onabort=()=>{u(l.transaction.error)},l.transaction.oncomplete=()=>{if(l.result)return s(l.result);u(notFoundError())}})}function wrapStore(e){const o=e.get.bind(e),r=e.has.bind(e);return e.get=t=>getWithFallback(t,o,r,e),e.has=t=>hasWithFallback(t,r,e),e}function wrapBackends(e){return $e(Re({},e),{root:wrapStore(e.root),datastore:wrapStore(e.datastore),pins:wrapStore(e.pins),keys:wrapStore(e.keys)})}var CONFIG_KEY,VERSION_KEY,init_utils6=__esm({"node_modules/ipfs-repo-migrations/esm/src/utils.js"(){init_node_globals(),init_key(),init_errors2(),CONFIG_KEY=new Key("/config"),VERSION_KEY=new Key("/version")}});async function keysToBinary(e,o,r=()=>{}){const t=findLevelJs(o);if(!t){r(`${e} did not need an upgrade`);return}r(`Upgrading ${e}`),await withEach(t,(s,u)=>[{type:"del",key:s},{type:"put",key:fromString3(s),value:u}])}async function keysToStrings(e,o,r=()=>{}){const t=findLevelJs(o);if(!t){r(`${e} did not need a downgrade`);return}r(`Downgrading ${e}`),await withEach(t,(s,u)=>[{type:"del",key:s},{type:"put",key:toString3(s),value:u}])}function unwrap2(e){return e.child?unwrap2(e.child):e}async function process4(e,o,r){const t=Object.entries(e).map(([u,l])=>({key:u,backend:unwrap2(l)})).filter(({key:u,backend:l})=>l.constructor.name==="LevelDatastore").map(({key:u,backend:l})=>({name:u,store:l}));o(0,`Migrating ${t.length} dbs`);let n=0;const s=u=>{o(Math.round(n/t.length*100),u)};for(const{name:u,store:l}of t){await l.open();try{await r(u,l,s)}finally{n++,await l.close()}}o(100,`Migrated ${t.length} dbs`)}function withEach(e,o){function r(t,n){const s=e.store("readwrite"),u=s.transaction;let l=0,f;u.onabort=()=>n(f||u.error||new Error("aborted by user")),u.oncomplete=()=>n();function a(){const c=t[l++],d=c.key;let h;try{h=c.type==="del"?s.delete(d):s.put(c.value,d)}catch(g){f=g,u.abort();return}l<t.length&&(h.onsuccess=a)}a()}return new Promise((t,n)=>{const s=e.iterator(),u=f=>f;s._deserializeKey=s._deserializeValue=u,l();function l(){const f=(a,c,d)=>{if(a||c===void 0){const h=g=>{if(g){n(g);return}t()};s.end(h);return}r(o(c,d),l)};s.next(f)}})}var migration3,init_migration_10=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-10/index.js"(){init_node_globals(),init_utils6(),init_from_string(),init_to_string(),migration3={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,o=()=>{})=>process4(e,o,keysToBinary),revert:(e,o=()=>{})=>process4(e,o,keysToStrings)}}});async function storeMfsRootInDatastore(e,o=()=>{}){if(o(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(MFS_ROOT_KEY)){const r=await e.root.get(MFS_ROOT_KEY);await e.datastore.put(MFS_ROOT_KEY,r),await e.root.delete(MFS_ROOT_KEY)}await e.datastore.close(),await e.root.close(),o(100,"Stored MFS root in repo datastore")}async function storeMfsRootInRoot(e,o=()=>{}){if(o(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(MFS_ROOT_KEY)){const r=await e.datastore.get(MFS_ROOT_KEY);await e.root.put(MFS_ROOT_KEY,r),await e.datastore.delete(MFS_ROOT_KEY)}await e.datastore.close(),await e.root.close(),o(100,"Stored MFS root in repo root datastore")}var MFS_ROOT_KEY,migration4,init_migration_11=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-11/index.js"(){init_node_globals(),init_key(),MFS_ROOT_KEY=new Key("/local/filesroot"),migration4={version:11,description:"Store mfs root in the datastore",migrate:storeMfsRootInDatastore,revert:storeMfsRootInRoot}}}),import_minimal4,$Reader4,$Writer4,$util4,$root4,Protocols,init_proto_book=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/pb/proto-book.js"(){init_node_globals(),import_minimal4=__toESM(require_minimal2(),1),$Reader4=import_minimal4.default.Reader,$Writer4=import_minimal4.default.Writer,$util4=import_minimal4.default.util,$root4=import_minimal4.default.roots.default||(import_minimal4.default.roots.default={}),Protocols=$root4.Protocols=(()=>{function e(o){if(this.protocols=[],o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.protocols=$util4.emptyArray,e.encode=function(r,t){if(t||(t=$Writer4.create()),r.protocols!=null&&r.protocols.length)for(var n=0;n<r.protocols.length;++n)t.uint32(10).string(r.protocols[n]);return t},e.decode=function(r,t){r instanceof $Reader4||(r=$Reader4.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root4.Protocols;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(r.string());break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root4.Protocols)return r;var t=new $root4.Protocols;if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var n=0;n<r.protocols.length;++n)t.protocols[n]=String(r.protocols[n])}return t},e.toObject=function(r,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.protocols=[]),r.protocols&&r.protocols.length){n.protocols=[];for(var s=0;s<r.protocols.length;++s)n.protocols[s]=r.protocols[s]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal4.default.util.toJSONOptions)},e})()}}),import_minimal5,$Reader5,$Writer5,$util5,$root5,Addresses,init_address_book=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/pb/address-book.js"(){init_node_globals(),import_minimal5=__toESM(require_minimal2(),1),$Reader5=import_minimal5.default.Reader,$Writer5=import_minimal5.default.Writer,$util5=import_minimal5.default.util,$root5=import_minimal5.default.roots.default||(import_minimal5.default.roots.default={}),Addresses=$root5.Addresses=(()=>{function e(o){if(this.addrs=[],o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.addrs=$util5.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(r,t){if(t||(t=$Writer5.create()),r.addrs!=null&&r.addrs.length)for(var n=0;n<r.addrs.length;++n)$root5.Addresses.Address.encode(r.addrs[n],t.uint32(10).fork()).ldelim();return r.certifiedRecord!=null&&Object.hasOwnProperty.call(r,"certifiedRecord")&&$root5.Addresses.CertifiedRecord.encode(r.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(r,t){r instanceof $Reader5||(r=$Reader5.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root5.Addresses;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.addrs&&s.addrs.length||(s.addrs=[]),s.addrs.push($root5.Addresses.Address.decode(r,r.uint32()));break;case 2:s.certifiedRecord=$root5.Addresses.CertifiedRecord.decode(r,r.uint32());break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root5.Addresses)return r;var t=new $root5.Addresses;if(r.addrs){if(!Array.isArray(r.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var n=0;n<r.addrs.length;++n){if(typeof r.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");t.addrs[n]=$root5.Addresses.Address.fromObject(r.addrs[n])}}if(r.certifiedRecord!=null){if(typeof r.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=$root5.Addresses.CertifiedRecord.fromObject(r.certifiedRecord)}return t},e.toObject=function(r,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addrs=[]),t.defaults&&(n.certifiedRecord=null),r.addrs&&r.addrs.length){n.addrs=[];for(var s=0;s<r.addrs.length;++s)n.addrs[s]=$root5.Addresses.Address.toObject(r.addrs[s],t)}return r.certifiedRecord!=null&&r.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=$root5.Addresses.CertifiedRecord.toObject(r.certifiedRecord,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal5.default.util.toJSONOptions)},e.Address=function(){function o(t){if(t)for(var n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}o.prototype.multiaddr=$util5.newBuffer([]),o.prototype.isCertified=null;let r;return Object.defineProperty(o.prototype,"_isCertified",{get:$util5.oneOfGetter(r=["isCertified"]),set:$util5.oneOfSetter(r)}),o.encode=function(n,s){return s||(s=$Writer5.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&s.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&s.uint32(16).bool(n.isCertified),s},o.decode=function(n,s){n instanceof $Reader5||(n=$Reader5.create(n));for(var u=s===void 0?n.len:n.pos+s,l=new $root5.Addresses.Address;n.pos<u;){var f=n.uint32();switch(f>>>3){case 1:l.multiaddr=n.bytes();break;case 2:l.isCertified=n.bool();break;default:n.skipType(f&7);break}}return l},o.fromObject=function(n){if(n instanceof $root5.Addresses.Address)return n;var s=new $root5.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$util5.base64.decode(n.multiaddr,s.multiaddr=$util5.newBuffer($util5.base64.length(n.multiaddr)),0):n.multiaddr.length&&(s.multiaddr=n.multiaddr)),n.isCertified!=null&&(s.isCertified=Boolean(n.isCertified)),s},o.toObject=function(n,s){s||(s={});var u={};return s.defaults&&(s.bytes===String?u.multiaddr="":(u.multiaddr=[],s.bytes!==Array&&(u.multiaddr=$util5.newBuffer(u.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(u.multiaddr=s.bytes===String?$util5.base64.encode(n.multiaddr,0,n.multiaddr.length):s.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(u.isCertified=n.isCertified,s.oneofs&&(u._isCertified="isCertified")),u},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal5.default.util.toJSONOptions)},o}(),e.CertifiedRecord=function(){function o(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return o.prototype.seq=$util5.Long?$util5.Long.fromBits(0,0,!0):0,o.prototype.raw=$util5.newBuffer([]),o.encode=function(t,n){return n||(n=$Writer5.create()),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(8).uint64(t.seq),t.raw!=null&&Object.hasOwnProperty.call(t,"raw")&&n.uint32(18).bytes(t.raw),n},o.decode=function(t,n){t instanceof $Reader5||(t=$Reader5.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root5.Addresses.CertifiedRecord;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.seq=t.uint64();break;case 2:u.raw=t.bytes();break;default:t.skipType(l&7);break}}return u},o.fromObject=function(t){if(t instanceof $root5.Addresses.CertifiedRecord)return t;var n=new $root5.Addresses.CertifiedRecord;return t.seq!=null&&($util5.Long?(n.seq=$util5.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new $util5.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.raw!=null&&(typeof t.raw=="string"?$util5.base64.decode(t.raw,n.raw=$util5.newBuffer($util5.base64.length(t.raw)),0):t.raw.length&&(n.raw=t.raw)),n},o.toObject=function(t,n){n||(n={});var s={};if(n.defaults){if($util5.Long){var u=new $util5.Long(0,0,!0);s.seq=n.longs===String?u.toString():n.longs===Number?u.toNumber():u}else s.seq=n.longs===String?"0":0;n.bytes===String?s.raw="":(s.raw=[],n.bytes!==Array&&(s.raw=$util5.newBuffer(s.raw)))}return t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?s.seq=n.longs===String?String(t.seq):t.seq:s.seq=n.longs===String?$util5.Long.prototype.toString.call(t.seq):n.longs===Number?new $util5.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.raw!=null&&t.hasOwnProperty("raw")&&(s.raw=n.bytes===String?$util5.base64.encode(t.raw,0,t.raw.length):n.bytes===Array?Array.prototype.slice.call(t.raw):t.raw),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal5.default.util.toJSONOptions)},o}(),e})()}}),import_minimal6,$Reader6,$Writer6,$util6,$root6,Peer,init_peer=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/pb/peer.js"(){init_node_globals(),import_minimal6=__toESM(require_minimal2(),1),$Reader6=import_minimal6.default.Reader,$Writer6=import_minimal6.default.Writer,$util6=import_minimal6.default.util,$root6=import_minimal6.default.roots.default||(import_minimal6.default.roots.default={}),Peer=$root6.Peer=(()=>{function e(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}e.prototype.addresses=$util6.emptyArray,e.prototype.protocols=$util6.emptyArray,e.prototype.metadata=$util6.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null;let o;return Object.defineProperty(e.prototype,"_pubKey",{get:$util6.oneOfGetter(o=["pubKey"]),set:$util6.oneOfSetter(o)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:$util6.oneOfGetter(o=["peerRecordEnvelope"]),set:$util6.oneOfSetter(o)}),e.encode=function(t,n){if(n||(n=$Writer6.create()),t.addresses!=null&&t.addresses.length)for(var s=0;s<t.addresses.length;++s)$root6.Address.encode(t.addresses[s],n.uint32(10).fork()).ldelim();if(t.protocols!=null&&t.protocols.length)for(var s=0;s<t.protocols.length;++s)n.uint32(18).string(t.protocols[s]);if(t.metadata!=null&&t.metadata.length)for(var s=0;s<t.metadata.length;++s)$root6.Metadata.encode(t.metadata[s],n.uint32(26).fork()).ldelim();return t.pubKey!=null&&Object.hasOwnProperty.call(t,"pubKey")&&n.uint32(34).bytes(t.pubKey),t.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&n.uint32(42).bytes(t.peerRecordEnvelope),n},e.decode=function(t,n){t instanceof $Reader6||(t=$Reader6.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root6.Peer;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.addresses&&u.addresses.length||(u.addresses=[]),u.addresses.push($root6.Address.decode(t,t.uint32()));break;case 2:u.protocols&&u.protocols.length||(u.protocols=[]),u.protocols.push(t.string());break;case 3:u.metadata&&u.metadata.length||(u.metadata=[]),u.metadata.push($root6.Metadata.decode(t,t.uint32()));break;case 4:u.pubKey=t.bytes();break;case 5:u.peerRecordEnvelope=t.bytes();break;default:t.skipType(l&7);break}}return u},e.fromObject=function(t){if(t instanceof $root6.Peer)return t;var n=new $root6.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");n.addresses=[];for(var s=0;s<t.addresses.length;++s){if(typeof t.addresses[s]!="object")throw TypeError(".Peer.addresses: object expected");n.addresses[s]=$root6.Address.fromObject(t.addresses[s])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");n.protocols=[];for(var s=0;s<t.protocols.length;++s)n.protocols[s]=String(t.protocols[s])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");n.metadata=[];for(var s=0;s<t.metadata.length;++s){if(typeof t.metadata[s]!="object")throw TypeError(".Peer.metadata: object expected");n.metadata[s]=$root6.Metadata.fromObject(t.metadata[s])}}return t.pubKey!=null&&(typeof t.pubKey=="string"?$util6.base64.decode(t.pubKey,n.pubKey=$util6.newBuffer($util6.base64.length(t.pubKey)),0):t.pubKey.length&&(n.pubKey=t.pubKey)),t.peerRecordEnvelope!=null&&(typeof t.peerRecordEnvelope=="string"?$util6.base64.decode(t.peerRecordEnvelope,n.peerRecordEnvelope=$util6.newBuffer($util6.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(n.peerRecordEnvelope=t.peerRecordEnvelope)),n},e.toObject=function(t,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.addresses=[],s.protocols=[],s.metadata=[]),t.addresses&&t.addresses.length){s.addresses=[];for(var u=0;u<t.addresses.length;++u)s.addresses[u]=$root6.Address.toObject(t.addresses[u],n)}if(t.protocols&&t.protocols.length){s.protocols=[];for(var u=0;u<t.protocols.length;++u)s.protocols[u]=t.protocols[u]}if(t.metadata&&t.metadata.length){s.metadata=[];for(var u=0;u<t.metadata.length;++u)s.metadata[u]=$root6.Metadata.toObject(t.metadata[u],n)}return t.pubKey!=null&&t.hasOwnProperty("pubKey")&&(s.pubKey=n.bytes===String?$util6.base64.encode(t.pubKey,0,t.pubKey.length):n.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,n.oneofs&&(s._pubKey="pubKey")),t.peerRecordEnvelope!=null&&t.hasOwnProperty("peerRecordEnvelope")&&(s.peerRecordEnvelope=n.bytes===String?$util6.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):n.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,n.oneofs&&(s._peerRecordEnvelope="peerRecordEnvelope")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal6.default.util.toJSONOptions)},e})(),$root6.Address=(()=>{function e(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}e.prototype.multiaddr=$util6.newBuffer([]),e.prototype.isCertified=null;let o;return Object.defineProperty(e.prototype,"_isCertified",{get:$util6.oneOfGetter(o=["isCertified"]),set:$util6.oneOfSetter(o)}),e.encode=function(t,n){return n||(n=$Writer6.create()),t.multiaddr!=null&&Object.hasOwnProperty.call(t,"multiaddr")&&n.uint32(10).bytes(t.multiaddr),t.isCertified!=null&&Object.hasOwnProperty.call(t,"isCertified")&&n.uint32(16).bool(t.isCertified),n},e.decode=function(t,n){t instanceof $Reader6||(t=$Reader6.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root6.Address;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.multiaddr=t.bytes();break;case 2:u.isCertified=t.bool();break;default:t.skipType(l&7);break}}return u},e.fromObject=function(t){if(t instanceof $root6.Address)return t;var n=new $root6.Address;return t.multiaddr!=null&&(typeof t.multiaddr=="string"?$util6.base64.decode(t.multiaddr,n.multiaddr=$util6.newBuffer($util6.base64.length(t.multiaddr)),0):t.multiaddr.length&&(n.multiaddr=t.multiaddr)),t.isCertified!=null&&(n.isCertified=Boolean(t.isCertified)),n},e.toObject=function(t,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=$util6.newBuffer(s.multiaddr)))),t.multiaddr!=null&&t.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?$util6.base64.encode(t.multiaddr,0,t.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),t.isCertified!=null&&t.hasOwnProperty("isCertified")&&(s.isCertified=t.isCertified,n.oneofs&&(s._isCertified="isCertified")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal6.default.util.toJSONOptions)},e})(),$root6.Metadata=(()=>{function e(o){if(o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.key="",e.prototype.value=$util6.newBuffer([]),e.encode=function(r,t){return t||(t=$Writer6.create()),r.key!=null&&Object.hasOwnProperty.call(r,"key")&&t.uint32(10).string(r.key),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&t.uint32(18).bytes(r.value),t},e.decode=function(r,t){r instanceof $Reader6||(r=$Reader6.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root6.Metadata;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.key=r.string();break;case 2:s.value=r.bytes();break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root6.Metadata)return r;var t=new $root6.Metadata;return r.key!=null&&(t.key=String(r.key)),r.value!=null&&(typeof r.value=="string"?$util6.base64.decode(r.value,t.value=$util6.newBuffer($util6.base64.length(r.value)),0):r.value.length&&(t.value=r.value)),t},e.toObject=function(r,t){t||(t={});var n={};return t.defaults&&(n.key="",t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=$util6.newBuffer(n.value)))),r.key!=null&&r.hasOwnProperty("key")&&(n.key=r.key),r.value!=null&&r.hasOwnProperty("value")&&(n.value=t.bytes===String?$util6.base64.encode(r.value,0,r.value.length):t.bytes===Array?Array.prototype.slice.call(r.value):r.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal6.default.util.toJSONOptions)},e})()}}),import_minimal7,$Reader7,$Writer7,$util7,$root7,Envelope,init_envelope=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/pb/envelope.js"(){init_node_globals(),import_minimal7=__toESM(require_minimal2(),1),$Reader7=import_minimal7.default.Reader,$Writer7=import_minimal7.default.Writer,$util7=import_minimal7.default.util,$root7=import_minimal7.default.roots.default||(import_minimal7.default.roots.default={}),Envelope=$root7.Envelope=(()=>{function e(o){if(o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.publicKey=$util7.newBuffer([]),e.prototype.payloadType=$util7.newBuffer([]),e.prototype.payload=$util7.newBuffer([]),e.prototype.signature=$util7.newBuffer([]),e.encode=function(r,t){return t||(t=$Writer7.create()),r.publicKey!=null&&Object.hasOwnProperty.call(r,"publicKey")&&t.uint32(10).bytes(r.publicKey),r.payloadType!=null&&Object.hasOwnProperty.call(r,"payloadType")&&t.uint32(18).bytes(r.payloadType),r.payload!=null&&Object.hasOwnProperty.call(r,"payload")&&t.uint32(26).bytes(r.payload),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&t.uint32(42).bytes(r.signature),t},e.decode=function(r,t){r instanceof $Reader7||(r=$Reader7.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root7.Envelope;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.publicKey=r.bytes();break;case 2:s.payloadType=r.bytes();break;case 3:s.payload=r.bytes();break;case 5:s.signature=r.bytes();break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root7.Envelope)return r;var t=new $root7.Envelope;return r.publicKey!=null&&(typeof r.publicKey=="string"?$util7.base64.decode(r.publicKey,t.publicKey=$util7.newBuffer($util7.base64.length(r.publicKey)),0):r.publicKey.length&&(t.publicKey=r.publicKey)),r.payloadType!=null&&(typeof r.payloadType=="string"?$util7.base64.decode(r.payloadType,t.payloadType=$util7.newBuffer($util7.base64.length(r.payloadType)),0):r.payloadType.length&&(t.payloadType=r.payloadType)),r.payload!=null&&(typeof r.payload=="string"?$util7.base64.decode(r.payload,t.payload=$util7.newBuffer($util7.base64.length(r.payload)),0):r.payload.length&&(t.payload=r.payload)),r.signature!=null&&(typeof r.signature=="string"?$util7.base64.decode(r.signature,t.signature=$util7.newBuffer($util7.base64.length(r.signature)),0):r.signature.length&&(t.signature=r.signature)),t},e.toObject=function(r,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.publicKey="":(n.publicKey=[],t.bytes!==Array&&(n.publicKey=$util7.newBuffer(n.publicKey))),t.bytes===String?n.payloadType="":(n.payloadType=[],t.bytes!==Array&&(n.payloadType=$util7.newBuffer(n.payloadType))),t.bytes===String?n.payload="":(n.payload=[],t.bytes!==Array&&(n.payload=$util7.newBuffer(n.payload))),t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=$util7.newBuffer(n.signature)))),r.publicKey!=null&&r.hasOwnProperty("publicKey")&&(n.publicKey=t.bytes===String?$util7.base64.encode(r.publicKey,0,r.publicKey.length):t.bytes===Array?Array.prototype.slice.call(r.publicKey):r.publicKey),r.payloadType!=null&&r.hasOwnProperty("payloadType")&&(n.payloadType=t.bytes===String?$util7.base64.encode(r.payloadType,0,r.payloadType.length):t.bytes===Array?Array.prototype.slice.call(r.payloadType):r.payloadType),r.payload!=null&&r.hasOwnProperty("payload")&&(n.payload=t.bytes===String?$util7.base64.encode(r.payload,0,r.payload.length):t.bytes===Array?Array.prototype.slice.call(r.payload):r.payload),r.signature!=null&&r.hasOwnProperty("signature")&&(n.signature=t.bytes===String?$util7.base64.encode(r.signature,0,r.signature.length):t.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal7.default.util.toJSONOptions)},e})()}}),import_minimal8,$Reader8,$Writer8,$util8,$root8,PeerRecord,init_peer_record=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/pb/peer-record.js"(){init_node_globals(),import_minimal8=__toESM(require_minimal2(),1),$Reader8=import_minimal8.default.Reader,$Writer8=import_minimal8.default.Writer,$util8=import_minimal8.default.util,$root8=import_minimal8.default.roots.default||(import_minimal8.default.roots.default={}),PeerRecord=$root8.PeerRecord=(()=>{function e(o){if(this.addresses=[],o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.peerId=$util8.newBuffer([]),e.prototype.seq=$util8.Long?$util8.Long.fromBits(0,0,!0):0,e.prototype.addresses=$util8.emptyArray,e.encode=function(r,t){if(t||(t=$Writer8.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&t.uint32(10).bytes(r.peerId),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&t.uint32(16).uint64(r.seq),r.addresses!=null&&r.addresses.length)for(var n=0;n<r.addresses.length;++n)$root8.PeerRecord.AddressInfo.encode(r.addresses[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(r,t){r instanceof $Reader8||(r=$Reader8.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root8.PeerRecord;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.peerId=r.bytes();break;case 2:s.seq=r.uint64();break;case 3:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push($root8.PeerRecord.AddressInfo.decode(r,r.uint32()));break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root8.PeerRecord)return r;var t=new $root8.PeerRecord;if(r.peerId!=null&&(typeof r.peerId=="string"?$util8.base64.decode(r.peerId,t.peerId=$util8.newBuffer($util8.base64.length(r.peerId)),0):r.peerId.length&&(t.peerId=r.peerId)),r.seq!=null&&($util8.Long?(t.seq=$util8.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?t.seq=parseInt(r.seq,10):typeof r.seq=="number"?t.seq=r.seq:typeof r.seq=="object"&&(t.seq=new $util8.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var n=0;n<r.addresses.length;++n){if(typeof r.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");t.addresses[n]=$root8.PeerRecord.AddressInfo.fromObject(r.addresses[n])}}return t},e.toObject=function(r,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[]),t.defaults)if(t.bytes===String?n.peerId="":(n.peerId=[],t.bytes!==Array&&(n.peerId=$util8.newBuffer(n.peerId))),$util8.Long){var s=new $util8.Long(0,0,!0);n.seq=t.longs===String?s.toString():t.longs===Number?s.toNumber():s}else n.seq=t.longs===String?"0":0;if(r.peerId!=null&&r.hasOwnProperty("peerId")&&(n.peerId=t.bytes===String?$util8.base64.encode(r.peerId,0,r.peerId.length):t.bytes===Array?Array.prototype.slice.call(r.peerId):r.peerId),r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?n.seq=t.longs===String?String(r.seq):r.seq:n.seq=t.longs===String?$util8.Long.prototype.toString.call(r.seq):t.longs===Number?new $util8.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.addresses&&r.addresses.length){n.addresses=[];for(var u=0;u<r.addresses.length;++u)n.addresses[u]=$root8.PeerRecord.AddressInfo.toObject(r.addresses[u],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal8.default.util.toJSONOptions)},e.AddressInfo=function(){function o(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return o.prototype.multiaddr=$util8.newBuffer([]),o.encode=function(t,n){return n||(n=$Writer8.create()),t.multiaddr!=null&&Object.hasOwnProperty.call(t,"multiaddr")&&n.uint32(10).bytes(t.multiaddr),n},o.decode=function(t,n){t instanceof $Reader8||(t=$Reader8.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root8.PeerRecord.AddressInfo;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.multiaddr=t.bytes();break;default:t.skipType(l&7);break}}return u},o.fromObject=function(t){if(t instanceof $root8.PeerRecord.AddressInfo)return t;var n=new $root8.PeerRecord.AddressInfo;return t.multiaddr!=null&&(typeof t.multiaddr=="string"?$util8.base64.decode(t.multiaddr,n.multiaddr=$util8.newBuffer($util8.base64.length(t.multiaddr)),0):t.multiaddr.length&&(n.multiaddr=t.multiaddr)),n},o.toObject=function(t,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.multiaddr="":(s.multiaddr=[],n.bytes!==Array&&(s.multiaddr=$util8.newBuffer(s.multiaddr)))),t.multiaddr!=null&&t.hasOwnProperty("multiaddr")&&(s.multiaddr=n.bytes===String?$util8.base64.encode(t.multiaddr,0,t.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal8.default.util.toJSONOptions)},o}(),e})()}});async function storePeerUnderSingleDatastoreKey(e,o=()=>{}){o(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();const r={},t=[];for await(const{key:n,value:s}of e.datastore.query({prefix:"/peers"})){t.push(n);const u=n.toString(),[l,f,a,c,d]=u.split("/");if(f==="peers"&&!!["protos","addrs","metadata","keys"].includes(a)&&!!c)if(r[c]=r[c]||{addresses:[],protocols:[],metadata:[]},a==="protos"){const h=Protocols.decode(s);r[c].protocols=h.protocols.sort()}else if(a==="addrs"){const h=Addresses.decode(s);r[c].addresses=h.addrs.sort((g,p)=>new import_multiaddr.Multiaddr(g.multiaddr).toString().localeCompare(new import_multiaddr.Multiaddr(p.multiaddr).toString())),h.certifiedRecord&&h.certifiedRecord.raw&&(r[c].peerRecordEnvelope=h.certifiedRecord.raw)}else a==="metadata"?r[c].metadata.push({key:d,value:s}):a==="keys"&&(r[c].pubKey=s)}o(33,"Read peer data from store");for(const n of t)await e.datastore.delete(n);o(66,"Removed existing peer data from store");for(const n of Object.keys(r)){const s=r[n];s.metadata=s.metadata.sort((l,f)=>l.key.localeCompare(f.key));const u=Peer.encode(s).finish();await e.datastore.put(new Key(`/peers/${n}`),u)}await e.datastore.close(),o(100,"Stored each peerstore key under a single datastore key")}async function storePeerUnderMultipleDatastoreKeys(e,o=()=>{}){o(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();const r={},t=[];for await(const{key:n,value:s}of e.datastore.query({prefix:"/peers"})){t.push(n);const u=n.toString(),[l,f,a]=u.split("/");r[a]=Peer.decode(s)}o(33,"Read peer data from store");for(const n of t)await e.datastore.delete(n);o(66,"Removed existing peer data from store");for(const[n,s]of Object.entries(r)){if(s.protocols&&s.protocols.length>0&&await e.datastore.put(new Key(`/peers/protos/${n}`),Protocols.encode({protocols:s.protocols}).finish()),s.addresses&&s.addresses.length>0){const u=s.peerRecordEnvelope;let l;if(u){const f=Envelope.decode(u),a=PeerRecord.decode(f.payload);l={raw:u,seq:a.seq}}await e.datastore.put(new Key(`/peers/addrs/${n}`),Addresses.encode({addrs:s.addresses,certifiedRecord:l}).finish())}if(s.metadata&&s.metadata.length>0)for(const{key:u,value:l}of s.metadata)await e.datastore.put(new Key(`/peers/metadata/${n}/${u}`),l);s.pubKey&&await e.datastore.put(new Key(`/peers/keys/${n}`),s.pubKey)}await e.datastore.close(),o(100,"Stored each peerstore key under multiple datastore keys")}var import_minimal9,import_multiaddr,migration5,init_migration_12=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/migration-12/index.js"(){init_node_globals(),import_minimal9=__toESM(require_minimal2(),1),init_key(),init_proto_book(),init_address_book(),init_peer(),init_envelope(),init_peer_record(),import_multiaddr=__toESM(require_src(),1),import_minimal9.default.util.Long=void 0,import_minimal9.default.configure(),migration5={version:12,description:"Store each peerstore peer under a single datastore key",migrate:storePeerUnderSingleDatastoreKey,revert:storePeerUnderMultipleDatastoreKeys}}}),emptyMigration,migrations_default,init_migrations=__esm({"node_modules/ipfs-repo-migrations/esm/migrations/index.js"(){init_node_globals(),init_migration_8(),init_migration_9(),init_migration_10(),init_migration_11(),init_migration_12(),emptyMigration={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},migrations_default=[Object.assign({version:1},emptyMigration),Object.assign({version:2},emptyMigration),Object.assign({version:3},emptyMigration),Object.assign({version:4},emptyMigration),Object.assign({version:5},emptyMigration),Object.assign({version:6},emptyMigration),Object.assign({version:7},emptyMigration),migration,migration2,migration3,migration4,migration5]}}),errors_exports3={};__export(errors_exports3,{InvalidValueError:()=>InvalidValueError,MissingRepoOptionsError:()=>MissingRepoOptionsError,NonReversibleMigrationError:()=>NonReversibleMigrationError,NotInitializedRepoError:()=>NotInitializedRepoError,RequiredParameterError:()=>RequiredParameterError});var NonReversibleMigrationError,NotInitializedRepoError,RequiredParameterError,InvalidValueError,MissingRepoOptionsError,init_errors4=__esm({"node_modules/ipfs-repo-migrations/esm/src/errors.js"(){init_node_globals(),NonReversibleMigrationError=class extends Error{constructor(e){super(e);this.name="NonReversibleMigrationError",this.code=NonReversibleMigrationError.code,this.message=e}},NonReversibleMigrationError.code="ERR_NON_REVERSIBLE_MIGRATION",NotInitializedRepoError=class extends Error{constructor(e){super(e);this.name="NotInitializedRepoError",this.code=NotInitializedRepoError.code,this.message=e}},NotInitializedRepoError.code="ERR_NOT_INITIALIZED_REPO",RequiredParameterError=class extends Error{constructor(e){super(e);this.name="RequiredParameterError",this.code=RequiredParameterError.code,this.message=e}},RequiredParameterError.code="ERR_REQUIRED_PARAMETER",InvalidValueError=class extends Error{constructor(e){super(e);this.name="InvalidValueError",this.code=InvalidValueError.code,this.message=e}},InvalidValueError.code="ERR_INVALID_VALUE",MissingRepoOptionsError=class extends Error{constructor(e){super(e);this.name="MissingRepoOptionsError",this.code=MissingRepoOptionsError.code,this.message=e}},MissingRepoOptionsError.code="ERR_MISSING_REPO_OPTIONS"}});async function isRepoInitialized(e){if(!e)throw new MissingRepoOptionsError("Please pass repo options when trying to open a repo");const o=e.root;try{await o.open();const r=await o.has(VERSION_KEY),t=await o.has(CONFIG_KEY);return!r||!t?(log6(`Version entry present: ${r}`),log6(`Config entry present: ${t}`),!1):!0}catch(r){return log6("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(o!==void 0)try{await o.close()}catch{}}}var import_debug6,log6,init_init=__esm({"node_modules/ipfs-repo-migrations/esm/src/repo/init.js"(){init_node_globals(),import_debug6=__toESM(require_browser2(),1),init_utils6(),init_errors4(),log6=(0,import_debug6.default)("ipfs:repo:migrator:repo:init")}});async function getVersion(e){if(!await isRepoInitialized(e))throw new NotInitializedRepoError("Repo is not initialized!");const o=e.root;await o.open();try{return parseInt(toString3(await o.get(VERSION_KEY)))}finally{await o.close()}}async function setVersion(e,o){if(!o)throw new MissingRepoOptionsError("Please pass repo options when trying to open a repo");const r=o.root;await r.open(),await r.put(VERSION_KEY,fromString3(String(e))),await r.close()}var init_version=__esm({"node_modules/ipfs-repo-migrations/esm/src/repo/version.js"(){init_node_globals(),init_init(),init_errors4(),init_utils6(),init_from_string(),init_to_string()}});function getLatestMigrationVersion(e){return e=e||migrations_default,!Array.isArray(e)||e.length===0?0:e[e.length-1].version}async function migrate(e,o,r,t,{ignoreLock:n=!1,onProgress:s,isDryRun:u=!1,migrations:l}){if(l=l||migrations_default,!e)throw new errors.RequiredParameterError("Path argument is required!");if(!r)throw new errors.RequiredParameterError("repoOptions argument is required!");if(!t)throw new errors.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(t)||t<=0)throw new errors.InvalidValueError("Version has to be positive integer!");o=wrapBackends(o);const f=await getVersion(o);if(f===t){log7("Nothing to migrate.");return}if(f>t)throw new errors.InvalidValueError(`Current repo's version (${f}) is higher then toVersion (${t}), you probably wanted to revert it?`);verifyAvailableMigrations(l,f,t);let a;!u&&!n&&(a=await r.repoLock.lock(e));try{for(const c of l){if(t!==void 0&&c.version>t)break;if(!(c.version<=f)){log7(`Migrating version ${c.version}`);try{if(!u){let d=()=>{};s&&(d=(h,g)=>s(c.version,h.toFixed(2),g)),await c.migrate(o,d)}}catch(d){const h=c.version-1;throw log7(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${h}`),await setVersion(h,o),new Error(`During migration to version ${c.version} exception was raised: ${d.stack||d.message||d}`)}log7(`Migrating to version ${c.version} finished`)}}u||await setVersion(t||getLatestMigrationVersion(l),o),log7("Repo successfully migrated",t!==void 0?`to version ${t}!`:"to latest version!")}finally{!u&&!n&&a&&await a.close()}}async function revert(e,o,r,t,{ignoreLock:n=!1,onProgress:s,isDryRun:u=!1,migrations:l}){if(l=l||migrations_default,!e)throw new errors.RequiredParameterError("Path argument is required!");if(!r)throw new errors.RequiredParameterError("repoOptions argument is required!");if(!t)throw new errors.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(t)||t<=0)throw new errors.InvalidValueError("Version has to be positive integer!");o=wrapBackends(o);const f=await getVersion(o);if(f===t){log7("Nothing to revert.");return}if(f<t)throw new errors.InvalidValueError(`Current repo's version (${f}) is lower then toVersion (${t}), you probably wanted to migrate it?`);verifyAvailableMigrations(l,t,f,!0);let a;!u&&!n&&(a=await r.repoLock.lock(e)),log7(`Reverting from version ${f} to ${t}`);try{const c=l.slice().reverse();for(const d of c){if(d.version<=t)break;if(!(d.version>f)){log7(`Reverting migration version ${d.version}`);try{if(!u){let h=()=>{};s&&(h=(g,p)=>s(d.version,g.toFixed(2),p)),await d.revert(o,h)}}catch(h){const g=d.version;throw log7(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${g}`),await setVersion(g,o),h.message=`During reversion to version ${d.version} exception was raised: ${h.message}`,h}log7(`Reverting to version ${d.version} finished`)}}u||await setVersion(t,o),log7(`All migrations successfully reverted to version ${t}!`)}finally{!u&&!n&&a&&await a.close()}}function verifyAvailableMigrations(e,o,r,t=!1){let n=0;for(const s of e){if(s.version>r)break;if(s.version>o){if(t&&!s.revert)throw new errors.NonReversibleMigrationError(`It is not possible to revert to version ${o} because migration version ${s.version} is not reversible. Cancelling reversion.`);n++}}if(n!==r-o)throw new errors.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${o} to ${r}`)}var import_debug7,log7,errors,init_src10=__esm({"node_modules/ipfs-repo-migrations/esm/src/index.js"(){init_node_globals(),init_migrations(),init_version(),init_errors4(),init_utils6(),import_debug7=__toESM(require_browser2(),1),log7=(0,import_debug7.default)("ipfs:repo:migrator"),errors=errors_exports3}}),require_bytes=__commonJS({"node_modules/bytes/index.js"(e,o){init_node_globals(),o.exports=u,o.exports.format=l,o.exports.parse=f;var r=/\B(?=(\d{3})+(?!\d))/g,t=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},s=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function u(a,c){return typeof a=="string"?f(a):typeof a=="number"?l(a,c):null}function l(a,c){if(!Number.isFinite(a))return null;var d=Math.abs(a),h=c&&c.thousandsSeparator||"",g=c&&c.unitSeparator||"",p=c&&c.decimalPlaces!==void 0?c.decimalPlaces:2,_=Boolean(c&&c.fixedDecimals),m=c&&c.unit||"";(!m||!n[m.toLowerCase()])&&(d>=n.pb?m="PB":d>=n.tb?m="TB":d>=n.gb?m="GB":d>=n.mb?m="MB":d>=n.kb?m="KB":m="B");var v=a/n[m.toLowerCase()],w=v.toFixed(p);return _||(w=w.replace(t,"$1")),h&&(w=w.split(".").map(function(y,b){return b===0?y.replace(r,h):y}).join(".")),w+g+m}function f(a){if(typeof a=="number"&&!isNaN(a))return a;if(typeof a!="string")return null;var c=s.exec(a),d,h="b";return c?(d=parseFloat(c[1]),h=c[4].toLowerCase()):(d=parseInt(a,10),h="b"),isNaN(d)?null:Math.floor(n[h]*d)}}}),errors_exports4={};__export(errors_exports4,{ERR_REPO_ALREADY_CLOSED:()=>ERR_REPO_ALREADY_CLOSED,ERR_REPO_ALREADY_OPEN:()=>ERR_REPO_ALREADY_OPEN,ERR_REPO_NOT_INITIALIZED:()=>ERR_REPO_NOT_INITIALIZED,InvalidRepoVersionError:()=>InvalidRepoVersionError,LockExistsError:()=>LockExistsError,NotFoundError:()=>NotFoundError});var LockExistsError,NotFoundError,InvalidRepoVersionError,ERR_REPO_NOT_INITIALIZED,ERR_REPO_ALREADY_OPEN,ERR_REPO_ALREADY_CLOSED,init_errors5=__esm({"node_modules/ipfs-repo/esm/src/errors.js"(){init_node_globals(),LockExistsError=class extends Error{constructor(e){super(e);this.name="LockExistsError",this.code=LockExistsError.code}},LockExistsError.code="ERR_LOCK_EXISTS",NotFoundError=class extends Error{constructor(e){super(e);this.name="NotFoundError",this.code=NotFoundError.code}},NotFoundError.code="ERR_NOT_FOUND",InvalidRepoVersionError=class extends Error{constructor(e){super(e);this.name="InvalidRepoVersionError",this.code=InvalidRepoVersionError.code}},InvalidRepoVersionError.code="ERR_INVALID_REPO_VERSION",ERR_REPO_NOT_INITIALIZED="ERR_REPO_NOT_INITIALIZED",ERR_REPO_ALREADY_OPEN="ERR_REPO_ALREADY_OPEN",ERR_REPO_ALREADY_CLOSED="ERR_REPO_ALREADY_CLOSED"}});async function hasWithFallback2(e,o,r){const t=await o(e);if(t)return t;const n=findLevelJs2(r);return n?new Promise((s,u)=>{const l=n.store("readonly").get(e.toString());l.transaction.onabort=()=>{u(l.transaction.error)},l.transaction.oncomplete=()=>{s(Boolean(l.result))}}):!1}async function getWithFallback2(e,o,r,t){if(await r(e))return o(e);const n=findLevelJs2(t);if(!n)throw new NotFoundError;return new Promise((s,u)=>{const l=n.store("readonly").get(e.toString());l.transaction.onabort=()=>{u(l.transaction.error)},l.transaction.oncomplete=()=>{if(l.result)return s(l.result);u(new NotFoundError)}})}function findLevelJs2(e){let o=e;for(;o.db||o.child;)if(o=o.db||o.child,o.type==="level-js"||o.constructor.name==="Level")return o}var init_level=__esm({"node_modules/ipfs-repo/esm/src/utils/level.js"(){init_node_globals(),init_errors5()}});function version2(e){return{async exists(){return hasWithFallback2(versionKey,e.has.bind(e),e)},async get(){const o=await getWithFallback2(versionKey,e.get.bind(e),e.has.bind(e),e);return parseInt(toString3(o),10)},set(o){return e.put(versionKey,fromString3(String(o)))},async check(o){const r=await this.get();return log8("comparing version: %s and %s",r,o),r===o||(r===6&&o===7||o===6&&r===7)}}}var import_debug8,log8,versionKey,init_version2=__esm({"node_modules/ipfs-repo/esm/src/version.js"(){init_node_globals(),init_key(),import_debug8=__toESM(require_browser2(),1),init_to_string(),init_from_string(),init_level(),log8=(0,import_debug8.default)("ipfs:repo:version"),versionKey=new Key("version")}});function config(e){const o=new Queue3({concurrency:1}),r={async getAll(s={}){const u=await getWithFallback2(configKey,e.get.bind(e),e.has.bind(e),e);return JSON.parse(toString3(u))},async get(s,u={}){if(s==null)throw new NotFoundError(`Key ${s} does not exist in config`);const l=await this.getAll(u),f=(0,import_just_safe_get.default)(l,s);if(f===void 0)throw new NotFoundError(`Key ${s} does not exist in config`);return f},set(s,u,l={}){if(typeof s!="string"&&!(s instanceof String))throw(0,import_err_code23.default)(new Error("Invalid key type: "+typeof s),"ERR_INVALID_KEY");if(u===void 0||u instanceof Uint8Array)throw(0,import_err_code23.default)(new Error("Invalid value type: "+typeof u),"ERR_INVALID_VALUE");return o.add(()=>t({key:s,value:u},l.signal))},replace(s,u={}){if(!s||s instanceof Uint8Array)throw(0,import_err_code23.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return o.add(()=>t({key:void 0,value:s},u.signal))},async exists(){return hasWithFallback2(configKey,e.has.bind(e),e)}};return r;async function t(s,u){if(u&&u.aborted)return;const l=s.key,f=s.value;if(l){const a=await r.getAll();return typeof a=="object"&&a!==null&&(0,import_just_safe_set.default)(a,l,f),n(a)}return n(f)}function n(s){const u=fromString3(JSON.stringify(s,null,2));return e.put(configKey,u)}}var import_p_queue3,import_just_safe_get,import_just_safe_set,import_err_code23,Queue3,configKey,init_config=__esm({"node_modules/ipfs-repo/esm/src/config.js"(){init_node_globals(),init_key(),import_p_queue3=__toESM(require_dist(),1),import_just_safe_get=__toESM(require_just_safe_get(),1),import_just_safe_set=__toESM(require_just_safe_set(),1),import_err_code23=__toESM(require_err_code(),1),init_errors5(),init_to_string(),init_from_string(),init_level(),Queue3=import_p_queue3.default.default?import_p_queue3.default.default:import_p_queue3.default,configKey=new Key("config")}}),require_sort_keys=__commonJS({"node_modules/sort-keys/index.js"(e,o){init_node_globals();var r=require_is_plain_obj();o.exports=(t,n={})=>{if(!r(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:s}=n,u=[],l=[],f=c=>{const d=u.indexOf(c);if(d!==-1)return l[d];const h=[];return u.push(c),l.push(h),h.push(...c.map(g=>Array.isArray(g)?f(g):r(g)?a(g):g)),h},a=c=>{const d=u.indexOf(c);if(d!==-1)return l[d];const h={},g=Object.keys(c).sort(n.compare);u.push(c),l.push(h);for(const p of g){const _=c[p];let m;s&&Array.isArray(_)?m=f(_):m=s&&r(_)?a(_):_,Object.defineProperty(h,p,$e(Re({},Object.getOwnPropertyDescriptor(c,p)),{value:m}))}return h};return Array.isArray(t)?s?f(t):t.slice():a(t)}}});function spec(e){return{exists(){return e.has(specKey)},async get(){const o=await e.get(specKey);return JSON.parse(toString3(o))},async set(o){return e.put(specKey,fromString3(JSON.stringify((0,import_sort_keys.default)(o,{deep:!0}))))}}}var import_sort_keys,specKey,init_spec=__esm({"node_modules/ipfs-repo/esm/src/spec.js"(){init_node_globals(),init_src5(),import_sort_keys=__toESM(require_sort_keys(),1),init_to_string(),init_from_string(),specKey=new Key("datastore_spec")}});function apiAddr(e){return{async get(){const o=await e.get(apiFile);return o&&o.toString()},set(o){return e.put(apiFile,fromString3(o.toString()))},delete(){return e.delete(apiFile)}}}var apiFile,init_api_addr=__esm({"node_modules/ipfs-repo/esm/src/api-addr.js"(){init_node_globals(),init_key(),init_from_string(),apiFile=new Key("api")}});function createIdStore(e){return{open(){return e.open()},close(){return e.close()},query(o,r){return e.query(o,r)},queryKeys(o,r){return e.queryKeys(o,r)},async get(o,r){const t=extractContents(o);return t.isIdentity?Promise.resolve(t.digest):e.get(o,r)},async*getMany(o,r){for await(const t of o)yield this.get(t,r)},async put(o,r,t){const{isIdentity:n}=extractContents(o);n||await e.put(o,r,t)},async*putMany(o,r){const t=(0,import_it_pushable2.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,import_it_drain3.default)(e.putMany(async function*(){for await(const{key:s,value:u}of o)extractContents(s).isIdentity||(yield{key:s,value:u}),t.push({key:s,value:u})}())),t.end()}catch(s){t.end(s)}}),yield*t},has(o,r){const{isIdentity:t}=extractContents(o);return t?Promise.resolve(!0):e.has(o,r)},delete(o,r){const{isIdentity:t}=extractContents(o);return t?Promise.resolve():e.delete(o,r)},deleteMany(o,r){return e.deleteMany((0,import_it_filter3.default)(o,t=>!extractContents(t).isIdentity),r)},batch(){const o=e.batch();return{put(r,t){const{isIdentity:n}=extractContents(r);n||o.put(r,t)},delete(r){const{isIdentity:t}=extractContents(r);t||o.delete(r)},commit:r=>o.commit(r)}}}}function extractContents(e){const o=CID.asCID(e);if(o==null)throw(0,import_err_code24.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return o.multihash.code!==identity.code?{isIdentity:!1}:{isIdentity:!0,digest:o.multihash.digest}}var import_it_filter3,import_it_pushable2,import_it_drain3,import_err_code24,init_idstore=__esm({"node_modules/ipfs-repo/esm/src/idstore.js"(){init_node_globals(),import_it_filter3=__toESM(require_it_filter(),1),import_it_pushable2=__toESM(require_it_pushable(),1),import_it_drain3=__toESM(require_it_drain(),1),init_cid(),import_err_code24=__toESM(require_err_code(),1),init_identity()}});async function lock(e){const o=e+"/"+lockFile;if(log9("locking %s",o),LOCKS[o]===!0)throw new LockExistsError(`Lock already being held for file: ${o}`);return LOCKS[o]=!0,{async close(){LOCKS[o]&&delete LOCKS[o]}}}async function locked(e){const o=e+"/"+lockFile;return log9(`checking lock: ${o}`),Boolean(LOCKS[o])}var import_debug9,log9,lockFile,LOCKS,MemoryLock,init_memory2=__esm({"node_modules/ipfs-repo/esm/src/locks/memory.js"(){init_node_globals(),init_errors5(),import_debug9=__toESM(require_browser2(),1),log9=(0,import_debug9.default)("ipfs:repo:lock:memory"),lockFile="repo.lock",LOCKS={},MemoryLock={lock,locked}}}),default_options_default,init_default_options=__esm({"node_modules/ipfs-repo/esm/src/default-options.js"(){init_node_globals(),init_memory2(),default_options_default={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:MemoryLock}}}),default_datastore_default,init_default_datastore=__esm({"node_modules/ipfs-repo/esm/src/default-datastore.js"(){init_node_globals(),default_datastore_default={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}}}});function cidToKey2(e){const o=CID.asCID(e);if(o==null)throw(0,import_err_code25.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=base32.encode(o.multihash.bytes);return new Key("/"+r.slice(1).toUpperCase(),!1)}function keyToMultihash2(e){return decode3(base32.decode(`b${e.toString().toLowerCase().substring(1)}`))}var import_err_code25,init_blockstore=__esm({"node_modules/ipfs-repo/esm/src/utils/blockstore.js"(){init_node_globals(),init_key(),init_src3(),init_raw(),import_err_code25=__toESM(require_err_code(),1),init_base32(),init_digest()}});async function*walkDag(e,o,r,t){try{const n=await o.get(e,t),s=await r(e.code),u=createUnsafe({bytes:n,cid:e,codec:s});for(const[,l]of u.links())yield l,yield*walkDag(l,o,r,t)}catch(n){throw log10("Could not walk DAG for CID",e.toString(),n),n}}var import_debug10,log10,init_walk_dag=__esm({"node_modules/ipfs-repo/esm/src/utils/walk-dag.js"(){init_node_globals(),import_debug10=__toESM(require_browser2(),1),init_block(),log10=(0,import_debug10.default)("ipfs:repo:utils:walk-dag")}});function invalidPinTypeErr(e){const o=`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`;return(0,import_err_code26.default)(new Error(o),"ERR_INVALID_PIN_TYPE")}var import_err_code26,import_debug11,import_it_first,PinManager,init_pin_manager=__esm({"node_modules/ipfs-repo/esm/src/pin-manager.js"(){init_node_globals(),init_cid(),import_err_code26=__toESM(require_err_code(),1),import_debug11=__toESM(require_browser2(),1),import_it_first=__toESM(require_it_first(),1),init_block(),init_cborg(),init_src2(),init_blockstore(),init_walk_dag(),init_pin_types(),PinManager=class{constructor({pinstore:e,blockstore:o,loadCodec:r}){this.pinstore=e,this.blockstore=o,this.loadCodec=r,this.log=(0,import_debug11.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,o={}){await this.blockstore.get(e,o);const r={depth:0};return e.version!==0&&(r.version=e.version),e.code!==code&&(r.codec=e.code),o.metadata&&(r.metadata=o.metadata),this.pinstore.put(cidToKey2(e),encode4(r))}unpin(e,o){return this.pinstore.delete(cidToKey2(e),o)}async pinRecursively(e,o={}){await this.fetchCompleteDag(e,o);const r={depth:1/0};e.version!==0&&(r.version=e.version),e.code!==code&&(r.codec=e.code),o.metadata&&(r.metadata=o.metadata),await this.pinstore.put(cidToKey2(e),encode4(r))}async*directKeys(e){for await(const o of this.pinstore.query({filters:[r=>decode6(r.value).depth===0]})){const r=decode6(o.value),t=r.version||0,n=r.codec!=null?r.codec:code,s=keyToMultihash2(o.key);yield{cid:CID.create(t,n,s),metadata:r.metadata}}}async*recursiveKeys(e){for await(const o of this.pinstore.query({filters:[r=>decode6(r.value).depth===1/0]})){const r=decode6(o.value),t=r.version||0,n=r.codec!=null?r.codec:code,s=keyToMultihash2(o.key);yield{cid:CID.create(t,n,s),metadata:r.metadata}}}async*indirectKeys(e){for await(const{cid:o}of this.recursiveKeys())for await(const r of walkDag(o,this.blockstore,this.loadCodec,e)){const t=[PinTypes.recursive];(await this.isPinnedWithType(r,t)).pinned||(yield r)}}async isPinnedWithType(e,o,r){Array.isArray(o)||(o=[o]);const t=o.includes(PinTypes.all),n=o.includes(PinTypes.direct),s=o.includes(PinTypes.recursive),u=o.includes(PinTypes.indirect);if(s||n||t){const a=await(0,import_it_first.default)(this.pinstore.query({prefix:cidToKey2(e).toString(),filters:[c=>{if(t)return!0;const d=decode6(c.value);return o.includes(d.depth===0?PinTypes.direct:PinTypes.recursive)}],limit:1}));if(a){const c=decode6(a.value);return{cid:e,pinned:!0,reason:c.depth===0?PinTypes.direct:PinTypes.recursive,metadata:c.metadata}}}const l=this;async function*f(a,c){for await(const{cid:d}of c)for await(const h of walkDag(d,l.blockstore,l.loadCodec))if(h.equals(a)){yield d;return}}if(t||u){const a=await(0,import_it_first.default)(f(e,this.recursiveKeys()));if(a)return{cid:e,pinned:!0,reason:PinTypes.indirect,parent:a}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,o){const r=new Set,t=async(n,s)=>{if(r.has(n.toString()))return;r.add(n.toString());const u=await this.blockstore.get(n,s),l=await this.loadCodec(n.code),f=createUnsafe({bytes:u,cid:n,codec:l});await Promise.all([...f.links()].map(([,a])=>t(a,s)))};await t(e,o)}static checkPinType(e){if(typeof e!="string"||!Object.keys(PinTypes).includes(e))throw invalidPinTypeErr(e);return!0}}}});function createPinnedBlockstore(e,o){return{open(){return o.open()},close(){return o.close()},query(r,t){return o.query(r,t)},queryKeys(r,t){return o.queryKeys(r,t)},async get(r,t){return o.get(r,t)},async*getMany(r,t){yield*o.getMany(r,t)},async put(r,t,n){await o.put(r,t,n)},async*putMany(r,t){yield*o.putMany(r,t)},has(r,t){return o.has(r,t)},async delete(r,t){return await ensureNotPinned(r,e),o.delete(r,t)},deleteMany(r,t){return o.deleteMany((0,import_it_map4.default)(r,async n=>(await ensureNotPinned(n,e),n)),t)},batch(){return o.batch()}}}async function ensureNotPinned(e,o){const{pinned:r,reason:t}=await o.isPinnedWithType(e,PinTypes.all);if(r)throw(0,import_err_code27.default)(new Error(`pinned: ${t}`),"ERR_BLOCK_PINNED")}var import_it_map4,import_err_code27,init_pinned_blockstore=__esm({"node_modules/ipfs-repo/esm/src/pinned-blockstore.js"(){init_node_globals(),import_it_map4=__toESM(require_it_map(),1),import_err_code27=__toESM(require_err_code(),1),init_pin_types()}});function gc({gcLock:e,pins:o,blockstore:r,root:t,loadCodec:n}){async function*s(){const u=Date.now();log11("Creating set of marked blocks");const l=await e.writeLock();try{const f=await createMarkedSet({pins:o,blockstore:r,root:t,loadCodec:n}),a=r.queryKeys({});yield*deleteUnmarkedBlocks({blockstore:r},f,a),log11(`Complete (${Date.now()-u}ms)`)}finally{l()}}return s}async function createMarkedSet({pins:e,blockstore:o,loadCodec:r,root:t}){const n=async function*(){let l;try{l=await t.get(MFS_ROOT_KEY2)}catch(a){if(a.code===ERR_NOT_FOUND){log11("No blocks in MFS");return}throw a}const f=CID.decode(l);yield f,yield*walkDag(f,o,r)}(),s=(0,import_it_merge2.default)((0,import_it_map5.default)(e.recursiveKeys(),({cid:l})=>l),e.indirectKeys(),(0,import_it_map5.default)(e.directKeys(),({cid:l})=>l),n),u=new Set;for await(const l of(0,import_it_merge2.default)(s,n))u.add(base32.encode(l.multihash.bytes));return u}async function*deleteUnmarkedBlocks({blockstore:e},o,r){let t=0,n=0;const s=async u=>async function(){t++;try{const f=base32.encode(u.multihash.bytes);if(o.has(f))return null;try{await e.delete(u),n++}catch(a){return{err:new Error(`Could not delete block with CID ${u}: ${a.message}`)}}return{cid:u}}catch(f){const a=`Could delete block with CID ${u}`;return log11(a,f),{err:new Error(a+`: ${f.message}`)}}};yield*(0,import_it_pipe2.pipe)((0,import_it_parallel_batch3.default)((0,import_it_map5.default)(r,s),BLOCK_RM_CONCURRENCY),u=>(0,import_it_filter4.default)(u,Boolean)),log11(`Marked set has ${o.size} unique blocks. Blockstore has ${t} blocks. Deleted ${n} blocks.`)}var import_debug12,import_it_parallel_batch3,import_it_pipe2,import_it_merge2,import_it_map5,import_it_filter4,log11,ERR_NOT_FOUND,BLOCK_RM_CONCURRENCY,MFS_ROOT_KEY2,init_gc=__esm({"node_modules/ipfs-repo/esm/src/gc.js"(){init_node_globals(),init_cid(),import_debug12=__toESM(require_browser2(),1),init_errors2(),import_it_parallel_batch3=__toESM(require_it_parallel_batch(),1),import_it_pipe2=__toESM(require_it_pipe(),1),import_it_merge2=__toESM(require_it_merge(),1),import_it_map5=__toESM(require_it_map(),1),import_it_filter4=__toESM(require_it_filter(),1),init_key(),init_base32(),init_walk_dag(),log11=(0,import_debug12.default)("ipfs:repo:gc"),ERR_NOT_FOUND=notFoundError().code,BLOCK_RM_CONCURRENCY=256,MFS_ROOT_KEY2=new Key("/local/filesroot")}});async function getSize(e){let o=BigInt(0);for await(const r of e.query({}))o+=BigInt(r.value.byteLength),o+=BigInt(r.key.uint8Array().byteLength);return o}function createRepo(e,o,r,t){return new Repo(e,o,r,t)}function buildConfig(e){return e.Datastore=Object.assign({},default_datastore_default,(0,import_just_safe_get2.default)(e,"datastore")),e}function buildDatastoreSpec(e){const o=Re(Re({},default_datastore_default.Spec),(0,import_just_safe_get2.default)(e,"Datastore.Spec"));return{type:o.type,mounts:o.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}var import_just_safe_get2,import_debug13,import_err_code28,import_bytes9,import_mortice,log12,noLimit,AUTO_MIGRATE_CONFIG_KEY,Repo,init_src11=__esm({"node_modules/ipfs-repo/esm/src/index.js"(){init_node_globals(),import_just_safe_get2=__toESM(require_just_safe_get(),1),import_debug13=__toESM(require_browser2(),1),import_err_code28=__toESM(require_err_code(),1),init_src10(),import_bytes9=__toESM(require_bytes(),1),init_merge_options(),init_constants(),init_version2(),init_config(),init_spec(),init_api_addr(),init_idstore(),init_default_options(),init_default_datastore(),init_errors5(),init_pin_manager(),init_pinned_blockstore(),import_mortice=__toESM(require_lib5(),1),init_gc(),log12=(0,import_debug13.default)("ipfs:repo"),noLimit=Number.MAX_SAFE_INTEGER,AUTO_MIGRATE_CONFIG_KEY="repoAutoMigrate",Repo=class{constructor(e,o,r,t){if(typeof e!="string")throw new Error("missing repo path");if(typeof o!="function")throw new Error("missing codec loader");this.options=merge_options_default(default_options_default,t),this.closed=!0,this.path=e,this.root=r.root,this.datastore=r.datastore,this.keys=r.keys;const n=r.blocks,s=r.pins;this.pins=new PinManager({pinstore:s,blockstore:n,loadCodec:o});const u=createPinnedBlockstore(this.pins,n);this.blocks=createIdStore(u),this.version=version2(this.root),this.config=config(this.root),this.spec=spec(this.root),this.apiAddr=apiAddr(this.root),this.gcLock=(0,import_mortice.default)(e,{singleProcess:this.options.repoOwner!==!1}),this.gc=gc({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:o})}async init(e){log12("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(buildConfig(e)),await this.spec.set(buildDatastoreSpec(e)),await this.version.set(repoVersion)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,import_err_code28.default)(new Error("repo is already open"),ERR_REPO_ALREADY_OPEN);log12("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),log12("acquired repo.lock"),!await this.version.check(repoVersion))if(await this._isAutoMigrationEnabled())await this._migrate(repoVersion,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new InvalidRepoVersionError("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");log12("creating datastore"),await this.datastore.open(),log12("creating blocks"),await this.blocks.open(),log12("creating keystore"),await this.keys.open(),log12("creating pins"),await this.pins.pinstore.open(),this.closed=!1,log12("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(o){log12("error removing lock",o)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,import_err_code28.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){log12("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(o){throw o.code==="ERR_NOT_FOUND"?(0,import_err_code28.default)(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path}):o}if(!e)throw(0,import_err_code28.default)(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path})}async close(){if(this.closed)throw(0,import_err_code28.default)(new Error("repo is already closed"),ERR_REPO_ALREADY_CLOSED);log12("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==ERR_REPO_NOT_INITIALIZED&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),log12("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,o,r,t,n]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),getSize(this.datastore),getSize(this.keys)]),s=o.size+t+n;return{repoPath:this.path,storageMax:e,version:r,numObjects:o.count,repoSize:s}}throw(0,import_err_code28.default)(new Error("repo is not initialized yet"),ERR_REPO_NOT_INITIALIZED,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(AUTO_MIGRATE_CONFIG_KEY)}catch(o){if(o.code===NotFoundError.code)e=!0;else throw o}return e}async _migrate(e,o){return await this.version.get()>e?(log12(`reverting to version ${e}`),revert(this.path,o,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(log12(`migrating to version ${e}`),migrate(this.path,o,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt((0,import_bytes9.default)(e))}catch{return BigInt(noLimit)}}async _blockStat(){let e=BigInt(0),o=BigInt(0);if(this.blocks)for await(const{key:r,value:t}of this.blocks.query({}))e+=BigInt(1),o+=BigInt(t.byteLength),o+=BigInt(r.bytes.byteLength);return{count:e,size:o}}}}}),require_it_sort=__commonJS({"node_modules/it-sort/index.js"(e,o){init_node_globals();var r=require_it_all(),t=async function*(n,s){yield*(await r(n)).sort(s)};o.exports=t}}),require_shams=__commonJS({"node_modules/has-symbols/shams.js"(e,o){init_node_globals(),o.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),s=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(s)!=="[object Symbol]")return!1;var u=42;t[n]=u;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var l=Object.getOwnPropertySymbols(t);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(t,n);if(f.value!==u||f.enumerable!==!0)return!1}return!0}}}),require_shams2=__commonJS({"node_modules/has-tostringtag/shams.js"(e,o){init_node_globals();var r=require_shams();o.exports=function(){return r()&&!!Symbol.toStringTag}}}),require_has_symbols=__commonJS({"node_modules/has-symbols/index.js"(e,o){init_node_globals();var r=typeof Symbol!="undefined"&&Symbol,t=require_shams();o.exports=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()}}}),require_implementation=__commonJS({"node_modules/function-bind/implementation.js"(e,o){init_node_globals();var r="Function.prototype.bind called on incompatible ",t=Array.prototype.slice,n=Object.prototype.toString,s="[object Function]";o.exports=function(l){var f=this;if(typeof f!="function"||n.call(f)!==s)throw new TypeError(r+f);for(var a=t.call(arguments,1),c,d=function(){if(this instanceof c){var m=f.apply(this,a.concat(t.call(arguments)));return Object(m)===m?m:this}else return f.apply(l,a.concat(t.call(arguments)))},h=Math.max(0,f.length-a.length),g=[],p=0;p<h;p++)g.push("$"+p);if(c=Function("binder","return function ("+g.join(",")+"){ return binder.apply(this,arguments); }")(d),f.prototype){var _=function(){};_.prototype=f.prototype,c.prototype=new _,_.prototype=null}return c}}}),require_function_bind=__commonJS({"node_modules/function-bind/index.js"(e,o){init_node_globals();var r=require_implementation();o.exports=Function.prototype.bind||r}}),require_src10=__commonJS({"node_modules/has/src/index.js"(e,o){init_node_globals();var r=require_function_bind();o.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}}),require_get_intrinsic=__commonJS({"node_modules/get-intrinsic/index.js"(e,o){init_node_globals();var r,t=SyntaxError,n=Function,s=TypeError,u=function(I){try{return n('"use strict"; return ('+I+").constructor;")()}catch{}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch{l=null}var f=function(){throw new s},a=l?function(){try{return arguments.callee,f}catch{try{return l(arguments,"callee").get}catch{return f}}}():f,c=require_has_symbols()(),d=Object.getPrototypeOf||function(I){return I.__proto__},h={},g=typeof Uint8Array=="undefined"?r:d(Uint8Array),p={"%AggregateError%":typeof AggregateError=="undefined"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?r:ArrayBuffer,"%ArrayIteratorPrototype%":c?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":typeof Atomics=="undefined"?r:Atomics,"%BigInt%":typeof BigInt=="undefined"?r:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?r:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?r:FinalizationRegistry,"%Function%":n,"%GeneratorFunction%":h,"%Int8Array%":typeof Int8Array=="undefined"?r:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?r:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?d(d([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map=="undefined"?r:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!c?r:d(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?r:Promise,"%Proxy%":typeof Proxy=="undefined"?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?r:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!c?r:d(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?d(""[Symbol.iterator]()):r,"%Symbol%":c?Symbol:r,"%SyntaxError%":t,"%ThrowTypeError%":a,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array=="undefined"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?r:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?r:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?r:WeakSet},_=function I(P){var O;if(P==="%AsyncFunction%")O=u("async function () {}");else if(P==="%GeneratorFunction%")O=u("function* () {}");else if(P==="%AsyncGeneratorFunction%")O=u("async function* () {}");else if(P==="%AsyncGenerator%"){var k=I("%AsyncGeneratorFunction%");k&&(O=k.prototype)}else if(P==="%AsyncIteratorPrototype%"){var N=I("%AsyncGenerator%");N&&(O=d(N.prototype))}return p[P]=O,O},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=require_function_bind(),w=require_src10(),y=v.call(Function.call,Array.prototype.concat),b=v.call(Function.apply,Array.prototype.splice),T=v.call(Function.call,String.prototype.replace),R=v.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,A=function(P){var O=R(P,0,1),k=R(P,-1);if(O==="%"&&k!=="%")throw new t("invalid intrinsic syntax, expected closing `%`");if(k==="%"&&O!=="%")throw new t("invalid intrinsic syntax, expected opening `%`");var N=[];return T(P,S,function(K,U,L,re){N[N.length]=L?T(re,E,"$1"):U||K}),N},C=function(P,O){var k=P,N;if(w(m,k)&&(N=m[k],k="%"+N[0]+"%"),w(p,k)){var K=p[k];if(K===h&&(K=_(k)),typeof K=="undefined"&&!O)throw new s("intrinsic "+P+" exists, but is not available. Please file an issue!");return{alias:N,name:k,value:K}}throw new t("intrinsic "+P+" does not exist!")};o.exports=function(P,O){if(typeof P!="string"||P.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof O!="boolean")throw new s('"allowMissing" argument must be a boolean');var k=A(P),N=k.length>0?k[0]:"",K=C("%"+N+"%",O),U=K.name,L=K.value,re=!1,Z=K.alias;Z&&(N=Z[0],b(k,y([0,1],Z)));for(var V=1,ee=!0;V<k.length;V+=1){var fe=k[V],_e=R(fe,0,1),ce=R(fe,-1);if((_e==='"'||_e==="'"||_e==="`"||ce==='"'||ce==="'"||ce==="`")&&_e!==ce)throw new t("property names with quotes must have matching quotes");if((fe==="constructor"||!ee)&&(re=!0),N+="."+fe,U="%"+N+"%",w(p,U))L=p[U];else if(L!=null){if(!(fe in L)){if(!O)throw new s("base intrinsic for "+P+" exists, but the property is not available.");return}if(l&&V+1>=k.length){var Ee=l(L,fe);ee=!!Ee,ee&&"get"in Ee&&!("originalValue"in Ee.get)?L=Ee.get:L=L[fe]}else ee=w(L,fe),L=L[fe];ee&&!re&&(p[U]=L)}}return L}}}),require_call_bind=__commonJS({"node_modules/call-bind/index.js"(e,o){init_node_globals();var r=require_function_bind(),t=require_get_intrinsic(),n=t("%Function.prototype.apply%"),s=t("%Function.prototype.call%"),u=t("%Reflect.apply%",!0)||r.call(s,n),l=t("%Object.getOwnPropertyDescriptor%",!0),f=t("%Object.defineProperty%",!0),a=t("%Math.max%");if(f)try{f({},"a",{value:1})}catch{f=null}o.exports=function(h){var g=u(r,s,arguments);if(l&&f){var p=l(g,"length");p.configurable&&f(g,"length",{value:1+a(0,h.length-(arguments.length-1))})}return g};var c=function(){return u(r,n,arguments)};f?f(o.exports,"apply",{value:c}):o.exports.apply=c}}),require_callBound=__commonJS({"node_modules/call-bind/callBound.js"(e,o){init_node_globals();var r=require_get_intrinsic(),t=require_call_bind(),n=t(r("String.prototype.indexOf"));o.exports=function(u,l){var f=r(u,!!l);return typeof f=="function"&&n(u,".prototype.")>-1?t(f):f}}}),require_is_arguments=__commonJS({"node_modules/is-arguments/index.js"(e,o){init_node_globals();var r=require_shams2()(),t=require_callBound(),n=t("Object.prototype.toString"),s=function(a){return r&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:n(a)==="[object Arguments]"},u=function(a){return s(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&n(a)!=="[object Array]"&&n(a.callee)==="[object Function]"},l=function(){return s(arguments)}();s.isLegacyArguments=u,o.exports=l?s:u}}),require_is_generator_function=__commonJS({"node_modules/is-generator-function/index.js"(e,o){init_node_globals();var r=Object.prototype.toString,t=Function.prototype.toString,n=/^\s*(?:function)?\*/,s=require_shams2()(),u=Object.getPrototypeOf,l=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch{}},f;o.exports=function(c){if(typeof c!="function")return!1;if(n.test(t.call(c)))return!0;if(!s){var d=r.call(c);return d==="[object GeneratorFunction]"}if(!u)return!1;if(typeof f=="undefined"){var h=l();f=h?u(h):!1}return u(c)===f}}}),require_foreach=__commonJS({"node_modules/foreach/index.js"(e,o){init_node_globals();var r=Object.prototype.hasOwnProperty,t=Object.prototype.toString;o.exports=function(s,u,l){if(t.call(u)!=="[object Function]")throw new TypeError("iterator must be a function");var f=s.length;if(f===+f)for(var a=0;a<f;a++)u.call(l,s[a],a,s);else for(var c in s)r.call(s,c)&&u.call(l,s[c],c,s)}}}),require_available_typed_arrays=__commonJS({"node_modules/available-typed-arrays/index.js"(e,o){init_node_globals();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],t=typeof globalThis=="undefined"?global:globalThis;o.exports=function(){for(var s=[],u=0;u<r.length;u++)typeof t[r[u]]=="function"&&(s[s.length]=r[u]);return s}}}),require_getOwnPropertyDescriptor=__commonJS({"node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js"(e,o){init_node_globals();var r=require_get_intrinsic(),t=r("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}o.exports=t}}),require_is_typed_array=__commonJS({"node_modules/is-typed-array/index.js"(e,o){init_node_globals();var r=require_foreach(),t=require_available_typed_arrays(),n=require_callBound(),s=n("Object.prototype.toString"),u=require_shams2()(),l=typeof globalThis=="undefined"?global:globalThis,f=t(),a=n("Array.prototype.indexOf",!0)||function(m,v){for(var w=0;w<m.length;w+=1)if(m[w]===v)return w;return-1},c=n("String.prototype.slice"),d={},h=require_getOwnPropertyDescriptor(),g=Object.getPrototypeOf;u&&h&&g&&r(f,function(_){var m=new l[_];if(Symbol.toStringTag in m){var v=g(m),w=h(v,Symbol.toStringTag);if(!w){var y=g(v);w=h(y,Symbol.toStringTag)}d[_]=w.get}});var p=function(m){var v=!1;return r(d,function(w,y){if(!v)try{v=w.call(m)===y}catch{}}),v};o.exports=function(m){if(!m||typeof m!="object")return!1;if(!u||!(Symbol.toStringTag in m)){var v=c(s(m),8,-1);return a(f,v)>-1}return h?p(m):!1}}}),require_which_typed_array=__commonJS({"node_modules/which-typed-array/index.js"(e,o){init_node_globals();var r=require_foreach(),t=require_available_typed_arrays(),n=require_callBound(),s=n("Object.prototype.toString"),u=require_shams2()(),l=typeof globalThis=="undefined"?global:globalThis,f=t(),a=n("String.prototype.slice"),c={},d=require_getOwnPropertyDescriptor(),h=Object.getPrototypeOf;u&&d&&h&&r(f,function(_){if(typeof l[_]=="function"){var m=new l[_];if(Symbol.toStringTag in m){var v=h(m),w=d(v,Symbol.toStringTag);if(!w){var y=h(v);w=d(y,Symbol.toStringTag)}c[_]=w.get}}});var g=function(m){var v=!1;return r(c,function(w,y){if(!v)try{var b=w.call(m);b===y&&(v=b)}catch{}}),v},p=require_is_typed_array();o.exports=function(m){return p(m)?!u||!(Symbol.toStringTag in m)?a(s(m),8,-1):g(m):!1}}}),require_types=__commonJS({"node_modules/util/support/types.js"(e){init_node_globals();var o=require_is_arguments(),r=require_is_generator_function(),t=require_which_typed_array(),n=require_is_typed_array();function s(H){return H.call.bind(H)}var u=typeof BigInt!="undefined",l=typeof Symbol!="undefined",f=s(Object.prototype.toString),a=s(Number.prototype.valueOf),c=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);u&&(h=s(BigInt.prototype.valueOf));var h;l&&(g=s(Symbol.prototype.valueOf));var g;function p(H,he){if(typeof H!="object")return!1;try{return he(H),!0}catch{return!1}}e.isArgumentsObject=o,e.isGeneratorFunction=r,e.isTypedArray=n;function _(H){return typeof Promise!="undefined"&&H instanceof Promise||H!==null&&typeof H=="object"&&typeof H.then=="function"&&typeof H.catch=="function"}e.isPromise=_;function m(H){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(H):n(H)||fe(H)}e.isArrayBufferView=m;function v(H){return t(H)==="Uint8Array"}e.isUint8Array=v;function w(H){return t(H)==="Uint8ClampedArray"}e.isUint8ClampedArray=w;function y(H){return t(H)==="Uint16Array"}e.isUint16Array=y;function b(H){return t(H)==="Uint32Array"}e.isUint32Array=b;function T(H){return t(H)==="Int8Array"}e.isInt8Array=T;function R(H){return t(H)==="Int16Array"}e.isInt16Array=R;function S(H){return t(H)==="Int32Array"}e.isInt32Array=S;function E(H){return t(H)==="Float32Array"}e.isFloat32Array=E;function A(H){return t(H)==="Float64Array"}e.isFloat64Array=A;function C(H){return t(H)==="BigInt64Array"}e.isBigInt64Array=C;function I(H){return t(H)==="BigUint64Array"}e.isBigUint64Array=I;function P(H){return f(H)==="[object Map]"}P.working=typeof Map!="undefined"&&P(new Map);function O(H){return typeof Map=="undefined"?!1:P.working?P(H):H instanceof Map}e.isMap=O;function k(H){return f(H)==="[object Set]"}k.working=typeof Set!="undefined"&&k(new Set);function N(H){return typeof Set=="undefined"?!1:k.working?k(H):H instanceof Set}e.isSet=N;function K(H){return f(H)==="[object WeakMap]"}K.working=typeof WeakMap!="undefined"&&K(new WeakMap);function U(H){return typeof WeakMap=="undefined"?!1:K.working?K(H):H instanceof WeakMap}e.isWeakMap=U;function L(H){return f(H)==="[object WeakSet]"}L.working=typeof WeakSet!="undefined"&&L(new WeakSet);function re(H){return L(H)}e.isWeakSet=re;function Z(H){return f(H)==="[object ArrayBuffer]"}Z.working=typeof ArrayBuffer!="undefined"&&Z(new ArrayBuffer);function V(H){return typeof ArrayBuffer=="undefined"?!1:Z.working?Z(H):H instanceof ArrayBuffer}e.isArrayBuffer=V;function ee(H){return f(H)==="[object DataView]"}ee.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&ee(new DataView(new ArrayBuffer(1),0,1));function fe(H){return typeof DataView=="undefined"?!1:ee.working?ee(H):H instanceof DataView}e.isDataView=fe;var _e=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function ce(H){return f(H)==="[object SharedArrayBuffer]"}function Ee(H){return typeof _e=="undefined"?!1:(typeof ce.working=="undefined"&&(ce.working=ce(new _e)),ce.working?ce(H):H instanceof _e)}e.isSharedArrayBuffer=Ee;function Ie(H){return f(H)==="[object AsyncFunction]"}e.isAsyncFunction=Ie;function ue(H){return f(H)==="[object Map Iterator]"}e.isMapIterator=ue;function pe(H){return f(H)==="[object Set Iterator]"}e.isSetIterator=pe;function Ae(H){return f(H)==="[object Generator]"}e.isGeneratorObject=Ae;function Y(H){return f(H)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=Y;function se(H){return p(H,a)}e.isNumberObject=se;function F(H){return p(H,c)}e.isStringObject=F;function j(H){return p(H,d)}e.isBooleanObject=j;function B(H){return u&&p(H,h)}e.isBigIntObject=B;function $(H){return l&&p(H,g)}e.isSymbolObject=$;function G(H){return se(H)||F(H)||j(H)||B(H)||$(H)}e.isBoxedPrimitive=G;function X(H){return typeof Uint8Array!="undefined"&&(V(H)||Ee(H))}e.isAnyArrayBuffer=X,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(H){Object.defineProperty(e,H,{enumerable:!1,value:function(){throw new Error(H+" is not supported in userland")}})})}}),require_isBufferBrowser=__commonJS({"node_modules/util/support/isBufferBrowser.js"(e,o){init_node_globals(),o.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}}}),require_inherits_browser=__commonJS({"node_modules/inherits/inherits_browser.js"(e,o){init_node_globals(),typeof Object.create=="function"?o.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:o.exports=function(t,n){if(n){t.super_=n;var s=function(){};s.prototype=n.prototype,t.prototype=new s,t.prototype.constructor=t}}}}),require_util3=__commonJS({"node_modules/util/util.js"(e){init_node_globals();var o=Object.getOwnPropertyDescriptors||function(ee){for(var fe=Object.keys(ee),_e={},ce=0;ce<fe.length;ce++)_e[fe[ce]]=Object.getOwnPropertyDescriptor(ee,fe[ce]);return _e},r=/%[sdj%]/g;e.format=function(V){if(!b(V)){for(var ee=[],fe=0;fe<arguments.length;fe++)ee.push(s(arguments[fe]));return ee.join(" ")}for(var fe=1,_e=arguments,ce=_e.length,Ee=String(V).replace(r,function(ue){if(ue==="%%")return"%";if(fe>=ce)return ue;switch(ue){case"%s":return String(_e[fe++]);case"%d":return Number(_e[fe++]);case"%j":try{return JSON.stringify(_e[fe++])}catch{return"[Circular]"}default:return ue}}),Ie=_e[fe];fe<ce;Ie=_e[++fe])v(Ie)||!E(Ie)?Ee+=" "+Ie:Ee+=" "+s(Ie);return Ee},e.deprecate=function(V,ee){if(typeof process!="undefined"&&process.noDeprecation===!0)return V;if(typeof process=="undefined")return function(){return e.deprecate(V,ee).apply(this,arguments)};var fe=!1;function _e(){if(!fe){if(process.throwDeprecation)throw new Error(ee);process.traceDeprecation?console.trace(ee):console.error(ee),fe=!0}return V.apply(this,arguments)}return _e};var t={},n=/^$/;e.debuglog=function(V){if(V=V.toUpperCase(),!t[V])if(n.test(V)){var ee=process.pid;t[V]=function(){var fe=e.format.apply(e,arguments);console.error("%s %d: %s",V,ee,fe)}}else t[V]=function(){};return t[V]};function s(V,ee){var fe={seen:[],stylize:l};return arguments.length>=3&&(fe.depth=arguments[2]),arguments.length>=4&&(fe.colors=arguments[3]),m(ee)?fe.showHidden=ee:ee&&e._extend(fe,ee),R(fe.showHidden)&&(fe.showHidden=!1),R(fe.depth)&&(fe.depth=2),R(fe.colors)&&(fe.colors=!1),R(fe.customInspect)&&(fe.customInspect=!0),fe.colors&&(fe.stylize=u),a(fe,V,fe.depth)}e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(V,ee){var fe=s.styles[ee];return fe?"["+s.colors[fe][0]+"m"+V+"["+s.colors[fe][1]+"m":V}function l(V,ee){return V}function f(V){var ee={};return V.forEach(function(fe,_e){ee[fe]=!0}),ee}function a(V,ee,fe){if(V.customInspect&&ee&&I(ee.inspect)&&ee.inspect!==e.inspect&&!(ee.constructor&&ee.constructor.prototype===ee)){var _e=ee.inspect(fe,V);return b(_e)||(_e=a(V,_e,fe)),_e}var ce=c(V,ee);if(ce)return ce;var Ee=Object.keys(ee),Ie=f(Ee);if(V.showHidden&&(Ee=Object.getOwnPropertyNames(ee)),C(ee)&&(Ee.indexOf("message")>=0||Ee.indexOf("description")>=0))return d(ee);if(Ee.length===0){if(I(ee)){var ue=ee.name?": "+ee.name:"";return V.stylize("[Function"+ue+"]","special")}if(S(ee))return V.stylize(RegExp.prototype.toString.call(ee),"regexp");if(A(ee))return V.stylize(Date.prototype.toString.call(ee),"date");if(C(ee))return d(ee)}var pe="",Ae=!1,Y=["{","}"];if(_(ee)&&(Ae=!0,Y=["[","]"]),I(ee)){var se=ee.name?": "+ee.name:"";pe=" [Function"+se+"]"}if(S(ee)&&(pe=" "+RegExp.prototype.toString.call(ee)),A(ee)&&(pe=" "+Date.prototype.toUTCString.call(ee)),C(ee)&&(pe=" "+d(ee)),Ee.length===0&&(!Ae||ee.length==0))return Y[0]+pe+Y[1];if(fe<0)return S(ee)?V.stylize(RegExp.prototype.toString.call(ee),"regexp"):V.stylize("[Object]","special");V.seen.push(ee);var F;return Ae?F=h(V,ee,fe,Ie,Ee):F=Ee.map(function(j){return g(V,ee,fe,Ie,j,Ae)}),V.seen.pop(),p(F,pe,Y)}function c(V,ee){if(R(ee))return V.stylize("undefined","undefined");if(b(ee)){var fe="'"+JSON.stringify(ee).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return V.stylize(fe,"string")}if(y(ee))return V.stylize(""+ee,"number");if(m(ee))return V.stylize(""+ee,"boolean");if(v(ee))return V.stylize("null","null")}function d(V){return"["+Error.prototype.toString.call(V)+"]"}function h(V,ee,fe,_e,ce){for(var Ee=[],Ie=0,ue=ee.length;Ie<ue;++Ie)U(ee,String(Ie))?Ee.push(g(V,ee,fe,_e,String(Ie),!0)):Ee.push("");return ce.forEach(function(pe){pe.match(/^\d+$/)||Ee.push(g(V,ee,fe,_e,pe,!0))}),Ee}function g(V,ee,fe,_e,ce,Ee){var Ie,ue,pe;if(pe=Object.getOwnPropertyDescriptor(ee,ce)||{value:ee[ce]},pe.get?pe.set?ue=V.stylize("[Getter/Setter]","special"):ue=V.stylize("[Getter]","special"):pe.set&&(ue=V.stylize("[Setter]","special")),U(_e,ce)||(Ie="["+ce+"]"),ue||(V.seen.indexOf(pe.value)<0?(v(fe)?ue=a(V,pe.value,null):ue=a(V,pe.value,fe-1),ue.indexOf(`
`)>-1&&(Ee?ue=ue.split(`
`).map(function(Ae){return"  "+Ae}).join(`
`).substr(2):ue=`
`+ue.split(`
`).map(function(Ae){return"   "+Ae}).join(`
`))):ue=V.stylize("[Circular]","special")),R(Ie)){if(Ee&&ce.match(/^\d+$/))return ue;Ie=JSON.stringify(""+ce),Ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ie=Ie.substr(1,Ie.length-2),Ie=V.stylize(Ie,"name")):(Ie=Ie.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ie=V.stylize(Ie,"string"))}return Ie+": "+ue}function p(V,ee,fe){var _e=V.reduce(function(ce,Ee){return Ee.indexOf(`
`)>=0,ce+Ee.replace(/\u001b\[\d\d?m/g,"").length+1},0);return _e>60?fe[0]+(ee===""?"":ee+`
 `)+" "+V.join(`,
  `)+" "+fe[1]:fe[0]+ee+" "+V.join(", ")+" "+fe[1]}e.types=require_types();function _(V){return Array.isArray(V)}e.isArray=_;function m(V){return typeof V=="boolean"}e.isBoolean=m;function v(V){return V===null}e.isNull=v;function w(V){return V==null}e.isNullOrUndefined=w;function y(V){return typeof V=="number"}e.isNumber=y;function b(V){return typeof V=="string"}e.isString=b;function T(V){return typeof V=="symbol"}e.isSymbol=T;function R(V){return V===void 0}e.isUndefined=R;function S(V){return E(V)&&O(V)==="[object RegExp]"}e.isRegExp=S,e.types.isRegExp=S;function E(V){return typeof V=="object"&&V!==null}e.isObject=E;function A(V){return E(V)&&O(V)==="[object Date]"}e.isDate=A,e.types.isDate=A;function C(V){return E(V)&&(O(V)==="[object Error]"||V instanceof Error)}e.isError=C,e.types.isNativeError=C;function I(V){return typeof V=="function"}e.isFunction=I;function P(V){return V===null||typeof V=="boolean"||typeof V=="number"||typeof V=="string"||typeof V=="symbol"||typeof V=="undefined"}e.isPrimitive=P,e.isBuffer=require_isBufferBrowser();function O(V){return Object.prototype.toString.call(V)}function k(V){return V<10?"0"+V.toString(10):V.toString(10)}var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function K(){var V=new Date,ee=[k(V.getHours()),k(V.getMinutes()),k(V.getSeconds())].join(":");return[V.getDate(),N[V.getMonth()],ee].join(" ")}e.log=function(){console.log("%s - %s",K(),e.format.apply(e,arguments))},e.inherits=require_inherits_browser(),e._extend=function(V,ee){if(!ee||!E(ee))return V;for(var fe=Object.keys(ee),_e=fe.length;_e--;)V[fe[_e]]=ee[fe[_e]];return V};function U(V,ee){return Object.prototype.hasOwnProperty.call(V,ee)}var L=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;e.promisify=function(ee){if(typeof ee!="function")throw new TypeError('The "original" argument must be of type Function');if(L&&ee[L]){var fe=ee[L];if(typeof fe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fe,L,{value:fe,enumerable:!1,writable:!1,configurable:!0}),fe}function fe(){for(var _e,ce,Ee=new Promise(function(pe,Ae){_e=pe,ce=Ae}),Ie=[],ue=0;ue<arguments.length;ue++)Ie.push(arguments[ue]);Ie.push(function(pe,Ae){pe?ce(pe):_e(Ae)});try{ee.apply(this,Ie)}catch(pe){ce(pe)}return Ee}return Object.setPrototypeOf(fe,Object.getPrototypeOf(ee)),L&&Object.defineProperty(fe,L,{value:fe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fe,o(ee))},e.promisify.custom=L;function re(V,ee){if(!V){var fe=new Error("Promise was rejected with a falsy value");fe.reason=V,V=fe}return ee(V)}function Z(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');function ee(){for(var fe=[],_e=0;_e<arguments.length;_e++)fe.push(arguments[_e]);var ce=fe.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var Ee=this,Ie=function(){return ce.apply(Ee,arguments)};V.apply(this,fe).then(function(ue){process.nextTick(Ie.bind(null,null,ue))},function(ue){process.nextTick(re.bind(null,ue,Ie))})}return Object.setPrototypeOf(ee,Object.getPrototypeOf(V)),Object.defineProperties(ee,o(V)),ee}e.callbackify=Z}}),require_level_supports=__commonJS({"node_modules/level-supports/index.js"(e,o){init_node_globals(),o.exports=function(...n){const s=n.reduce((u,l)=>Object.assign(u,l),{});return Object.assign(s,{bufferKeys:s.bufferKeys||!1,snapshots:s.snapshots||!1,permanence:s.permanence||!1,seek:s.seek||!1,clear:s.clear||!1,getMany:s.getMany||!1,keyIterator:s.keyIterator||!1,valueIterator:s.valueIterator||!1,iteratorNextv:s.iteratorNextv||!1,iteratorAll:s.iteratorAll||!1,status:s.status||!1,idempotentOpen:s.idempotentOpen||!1,passiveOpen:s.passiveOpen||!1,serialize:s.serialize||!1,createIfMissing:s.createIfMissing||!1,errorIfExists:s.errorIfExists||!1,deferredOpen:s.deferredOpen||!1,openCallback:s.openCallback||!1,promises:s.promises||!1,streams:s.streams||!1,encodings:r(s.encodings),events:r(s.events),additionalMethods:Object.assign({},s.additionalMethods)})};function r(t){return t?Object.assign({},t):!1}}}),require_is_buffer=__commonJS({"node_modules/is-buffer/index.js"(e,o){init_node_globals(),o.exports=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}}}),require_next_tick_browser=__commonJS({"node_modules/catering/next-tick-browser.js"(e,o){init_node_globals(),o.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)}}),require_catering=__commonJS({"node_modules/catering/index.js"(e){init_node_globals();var o=require_next_tick_browser();e.fromCallback=function(r,t){if(r===void 0){var n=new Promise(function(s,u){r=function(l,f){l?u(l):s(f)}});r[t!==void 0?t:"promise"]=n}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r},e.fromPromise=function(r,t){if(t===void 0)return r;r.then(function(n){o(()=>t(null,n))}).catch(function(n){o(()=>t(n))})}}}),require_queue_microtask=__commonJS({"node_modules/queue-microtask/index.js"(e,o){init_node_globals();var r;o.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:global):t=>(r||(r=Promise.resolve())).then(t).catch(n=>setTimeout(()=>{throw n},0))}}),require_next_tick_browser2=__commonJS({"node_modules/abstract-leveldown/next-tick-browser.js"(e,o){init_node_globals();var r=require_queue_microtask();o.exports=function(t,...n){n.length===0?r(t):r(()=>t(...n))}}}),require_abstract_iterator=__commonJS({"node_modules/abstract-leveldown/abstract-iterator.js"(e,o){init_node_globals();function r(t){if(typeof t!="object"||t===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=t,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){let n=this;if(t===void 0)n=new Promise(function(s,u){t=function(l,f,a){l?u(l):f===void 0&&a===void 0?s():s([f,a])}});else if(typeof t!="function")throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(t,new Error("cannot call next() after end()")),n):this._nexting?(this._nextTick(t,new Error("cannot call next() before previous next() has completed")),n):(this._nexting=!0,this._next((s,...u)=>{this._nexting=!1,t(s,...u)}),n)},r.prototype._next=function(t){this._nextTick(t)},r.prototype.seek=function(t){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");t=this.db._serializeKey(t),this._seek(t)},r.prototype._seek=function(t){},r.prototype.end=function(t){let n;if(t===void 0)n=new Promise(function(s,u){t=function(l){l?u(l):s()}});else if(typeof t!="function")throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(t,new Error("end() already called on iterator")),n):(this._ended=!0,this._end(t),n)},r.prototype._end=function(t){this._nextTick(t)},r.prototype[Symbol.asyncIterator]=async function*(){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this._ended||await this.end()}},r.prototype._nextTick=require_next_tick_browser2(),o.exports=r}}),require_abstract_chained_batch=__commonJS({"node_modules/abstract-leveldown/abstract-chained-batch.js"(e,o){init_node_globals();var r=Object.freeze({});function t(n){if(typeof n!="object"||n===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=n,this._operations=[],this._written=!1}t.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},t.prototype.put=function(n,s,u){this._checkWritten();const l=this.db._checkKey(n)||this.db._checkValue(s);if(l)throw l;return n=this.db._serializeKey(n),s=this.db._serializeValue(s),this._put(n,s,u!=null?u:r),this},t.prototype._put=function(n,s,u){this._operations.push($e(Re({},u),{type:"put",key:n,value:s}))},t.prototype.del=function(n,s){this._checkWritten();const u=this.db._checkKey(n);if(u)throw u;return n=this.db._serializeKey(n),this._del(n,s!=null?s:r),this},t.prototype._del=function(n,s){this._operations.push($e(Re({},s),{type:"del",key:n}))},t.prototype.clear=function(){return this._checkWritten(),this._clear(),this},t.prototype._clear=function(){this._operations=[]},t.prototype.write=function(n,s){if(this._checkWritten(),typeof n=="function"&&(s=n),typeof s!="function")throw new Error("write() requires a callback argument");(typeof n!="object"||n===null)&&(n={}),this._written=!0,this._write(n,s)},t.prototype._write=function(n,s){this.db._batch(this._operations,n,s)},t.prototype._nextTick=require_next_tick_browser2(),o.exports=t}}),require_common3=__commonJS({"node_modules/abstract-leveldown/lib/common.js"(e){init_node_globals(),e.getCallback=function(o,r){return typeof o=="function"?o:r},e.getOptions=function(o){return typeof o=="object"&&o!==null?o:{}}}}),require_abstract_leveldown=__commonJS({"node_modules/abstract-leveldown/abstract-leveldown.js"(e,o){init_node_globals();var r=require_level_supports(),t=require_is_buffer(),n=require_catering(),s=require_abstract_iterator(),u=require_abstract_chained_batch(),l=require_common3().getCallback,f=require_common3().getOptions,a=Object.prototype.hasOwnProperty,c=["lt","lte","gt","gte"];function d(_){this.status="new",this.supports=r(_,{status:!0})}d.prototype.open=function(_,m){const v=this.status;if(typeof _=="function"&&(m=_),typeof m!="function")throw new Error("open() requires a callback argument");(typeof _!="object"||_===null)&&(_={}),_.createIfMissing=_.createIfMissing!==!1,_.errorIfExists=!!_.errorIfExists,this.status="opening",this._open(_,w=>{if(w)return this.status=v,m(w);this.status="open",m()})},d.prototype._open=function(_,m){this._nextTick(m)},d.prototype.close=function(_){const m=this.status;if(typeof _!="function")throw new Error("close() requires a callback argument");this.status="closing",this._close(v=>{if(v)return this.status=m,_(v);this.status="closed",_()})},d.prototype._close=function(_){this._nextTick(_)},d.prototype.get=function(_,m,v){if(typeof m=="function"&&(v=m),typeof v!="function")throw new Error("get() requires a callback argument");const w=this._checkKey(_);if(w)return this._nextTick(v,w);_=this._serializeKey(_),(typeof m!="object"||m===null)&&(m={}),m.asBuffer=m.asBuffer!==!1,this._get(_,m,v)},d.prototype._get=function(_,m,v){this._nextTick(function(){v(new Error("NotFound"))})},d.prototype.getMany=function(_,m,v){if(v=l(m,v),v=n.fromCallback(v),m=f(m),p(this,v))return v.promise;if(!Array.isArray(_))return this._nextTick(v,new Error("getMany() requires an array argument")),v.promise;if(_.length===0)return this._nextTick(v,null,[]),v.promise;typeof m.asBuffer!="boolean"&&(m=$e(Re({},m),{asBuffer:!0}));const w=new Array(_.length);for(let y=0;y<_.length;y++){const b=_[y],T=this._checkKey(b);if(T)return this._nextTick(v,T),v.promise;w[y]=this._serializeKey(b)}return this._getMany(w,m,v),v.promise},d.prototype._getMany=function(_,m,v){this._nextTick(v,null,new Array(_.length).fill(void 0))},d.prototype.put=function(_,m,v,w){if(typeof v=="function"&&(w=v),typeof w!="function")throw new Error("put() requires a callback argument");const y=this._checkKey(_)||this._checkValue(m);if(y)return this._nextTick(w,y);_=this._serializeKey(_),m=this._serializeValue(m),(typeof v!="object"||v===null)&&(v={}),this._put(_,m,v,w)},d.prototype._put=function(_,m,v,w){this._nextTick(w)},d.prototype.del=function(_,m,v){if(typeof m=="function"&&(v=m),typeof v!="function")throw new Error("del() requires a callback argument");const w=this._checkKey(_);if(w)return this._nextTick(v,w);_=this._serializeKey(_),(typeof m!="object"||m===null)&&(m={}),this._del(_,m,v)},d.prototype._del=function(_,m,v){this._nextTick(v)},d.prototype.batch=function(_,m,v){if(!arguments.length)return this._chainedBatch();if(typeof m=="function"&&(v=m),typeof _=="function"&&(v=_),typeof v!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(_))return this._nextTick(v,new Error("batch(array) requires an array argument"));if(_.length===0)return this._nextTick(v);(typeof m!="object"||m===null)&&(m={});const w=new Array(_.length);for(let y=0;y<_.length;y++){if(typeof _[y]!="object"||_[y]===null)return this._nextTick(v,new Error("batch(array) element must be an object and not `null`"));const b=Object.assign({},_[y]);if(b.type!=="put"&&b.type!=="del")return this._nextTick(v,new Error("`type` must be 'put' or 'del'"));const T=this._checkKey(b.key);if(T)return this._nextTick(v,T);if(b.key=this._serializeKey(b.key),b.type==="put"){const R=this._checkValue(b.value);if(R)return this._nextTick(v,R);b.value=this._serializeValue(b.value)}w[y]=b}this._batch(w,m,v)},d.prototype._batch=function(_,m,v){this._nextTick(v)},d.prototype.clear=function(_,m){if(typeof _=="function")m=_;else if(typeof m!="function")throw new Error("clear() requires a callback argument");_=h(this,_),_.reverse=!!_.reverse,_.limit="limit"in _?_.limit:-1,this._clear(_,m)},d.prototype._clear=function(_,m){_.keys=!0,_.values=!1,_.keyAsBuffer=!0,_.valueAsBuffer=!0;const v=this._iterator(_),w={},y=b=>{if(b)return v.end(function(){m(b)});v.next((T,R)=>{if(T)return y(T);if(R===void 0)return v.end(m);this._del(R,w,y)})};y()},d.prototype._setupIteratorOptions=function(_){return _=h(this,_),_.reverse=!!_.reverse,_.keys=_.keys!==!1,_.values=_.values!==!1,_.limit="limit"in _?_.limit:-1,_.keyAsBuffer=_.keyAsBuffer!==!1,_.valueAsBuffer=_.valueAsBuffer!==!1,_};function h(_,m){const v={};for(const w in m){if(!a.call(m,w))continue;if(w==="start"||w==="end")throw new Error('Legacy range options ("start" and "end") have been removed');let y=m[w];g(w)&&(y=_._serializeKey(y)),v[w]=y}return v}function g(_){return c.indexOf(_)!==-1}d.prototype.iterator=function(_){return(typeof _!="object"||_===null)&&(_={}),_=this._setupIteratorOptions(_),this._iterator(_)},d.prototype._iterator=function(_){return new s(this)},d.prototype._chainedBatch=function(){return new u(this)},d.prototype._serializeKey=function(_){return _},d.prototype._serializeValue=function(_){return _},d.prototype._checkKey=function(_){if(_==null)return new Error("key cannot be `null` or `undefined`");if(t(_)&&_.length===0)return new Error("key cannot be an empty Buffer");if(_==="")return new Error("key cannot be an empty String");if(Array.isArray(_)&&_.length===0)return new Error("key cannot be an empty Array")},d.prototype._checkValue=function(_){if(_==null)return new Error("value cannot be `null` or `undefined`")},d.prototype.isOperational=function(){return this.status==="open"||this._isOperational()},d.prototype._isOperational=function(){return!1},d.prototype._nextTick=require_next_tick_browser2(),o.exports=d;function p(_,m){return _.isOperational()?!1:(_._nextTick(m,new Error("Database is not open")),!0)}}}),require_abstract_leveldown2=__commonJS({"node_modules/abstract-leveldown/index.js"(e){init_node_globals(),e.AbstractLevelDOWN=require_abstract_leveldown(),e.AbstractIterator=require_abstract_iterator(),e.AbstractChainedBatch=require_abstract_chained_batch()}}),require_util4=__commonJS({"node_modules/deferred-leveldown/util.js"(e){init_node_globals(),e.getCallback=function(o,r,t){let n=o[o.length-1];if(typeof n!="function"){const s=new Promise((u,l)=>{o.push(n=function(f,...a){f?l(f):u(t?t(...a):a[0])})});n[r]=s}return n}}}),require_deferred_iterator=__commonJS({"node_modules/deferred-leveldown/deferred-iterator.js"(e,o){init_node_globals();var{AbstractIterator:r}=require_abstract_leveldown2(),t=require_inherits_browser(),n=require_util4().getCallback,s=Symbol("options"),u=Symbol("iterator"),l=Symbol("operations"),f=Symbol("promise");function a(c,d){r.call(this,c),this[s]=d,this[u]=null,this[l]=[]}t(a,r),a.prototype.setDb=function(c){this[u]=c.iterator(this[s]);for(const d of this[l].splice(0,this[l].length))this[u][d.method](...d.args)},a.prototype.next=function(...c){if(this.db.status==="open")return this[u].next(...c);const d=n(c,f,function(g,p){if(!(g===void 0&&p===void 0))return[g,p]});return this.db.status==="opening"?this[l].push({method:"next",args:c}):this._nextTick(d,new Error("Database is not open")),d[f]||this},a.prototype.seek=function(...c){if(this.db.status==="open")this[u].seek(...c);else if(this.db.status==="opening")this[l].push({method:"seek",args:c});else throw new Error("Database is not open")},a.prototype.end=function(...c){if(this.db.status==="open")return this[u].end(...c);const d=n(c,f);return this.db.status==="opening"?this[l].push({method:"end",args:c}):this._nextTick(d,new Error("Database is not open")),d[f]||this};for(const c of["next","seek","end"])a.prototype["_"+c]=function(){throw new Error("Did not expect private method to be called: "+c)};o.exports=a}}),require_deferred_chained_batch=__commonJS({"node_modules/deferred-leveldown/deferred-chained-batch.js"(e,o){init_node_globals();var{AbstractChainedBatch:r}=require_abstract_leveldown2(),t=Symbol("operations");o.exports=class extends r{constructor(s){super(s);this[t]=[]}_put(s,u,l){this[t].push($e(Re({},l),{type:"put",key:s,value:u}))}_del(s,u){this[t].push($e(Re({},u),{type:"del",key:s}))}_clear(){this[t]=[]}_write(s,u){this.db.batch(this[t],s,u)}}}}),require_deferred_leveldown=__commonJS({"node_modules/deferred-leveldown/deferred-leveldown.js"(e,o){init_node_globals();var{AbstractLevelDOWN:r}=require_abstract_leveldown2(),t=require_inherits_browser(),n=require_deferred_iterator(),s=require_deferred_chained_batch(),u=require_util4().getCallback,l=["put","get","getMany","del","batch","clear"],f=["approximateSize","compactRange"],a=Symbol("innerDb"),c=Symbol("operations"),d=Symbol("promise");function h(p){r.call(this,p.supports||{});for(const _ of f)typeof p[_]=="function"&&!this.supports.additionalMethods[_]&&(this.supports.additionalMethods[_]=!0);this[a]=p,this[c]=[],g(this)}t(h,r),h.prototype.type="deferred-leveldown",Object.defineProperty(h.prototype,"_db",{enumerable:!0,get(){return this[a]}}),h.prototype._open=function(p,_){const m=v=>{if(v||this[a].status!=="open")return _(v||new Error("Database is not open"));const w=this[c];this[c]=[];for(const y of w)y.iterator?y.iterator.setDb(this[a]):this[a][y.method](...y.args);if(this[c].length>0)throw new Error("Did not expect further operations");_()};this[a].status==="new"||this[a].status==="closed"?this[a].open(p,m):this._nextTick(m)},h.prototype._close=function(p){this[a].close(p)},h.prototype._isOperational=function(){return this.status==="opening"};function g(p){const _=Object.keys(p.supports.additionalMethods);for(const m of l.concat(_))p[m]=function(...v){if(m==="batch"&&v.length===0)return new s(this);if(this.status==="open")return this[a][m](...v);const w=u(v,d);return this.status==="opening"?this[c].push({method:m,args:v}):this._nextTick(w,new Error("Database is not open")),w[d]};p.iterator=function(m){if(this.status==="open")return this[a].iterator(m);if(this.status==="opening"){const v=new n(this,m);return this[c].push({iterator:v}),v}else throw new Error("Database is not open")};for(const m of l.concat(["iterator"]))p["_"+m]=function(){throw new Error("Did not expect private method to be called: "+m)}}o.exports=h,o.exports.DeferredIterator=n}}),require_stream_browser=__commonJS({"node_modules/readable-stream/lib/internal/streams/stream-browser.js"(e,o){init_node_globals(),o.exports=require_events().EventEmitter}}),require_util5=__commonJS({"(disabled):node_modules/util/util.js"(){init_node_globals()}}),require_buffer_list=__commonJS({"node_modules/readable-stream/lib/internal/streams/buffer_list.js"(e,o){init_node_globals();function r(p,_){var m=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);_&&(v=v.filter(function(w){return Object.getOwnPropertyDescriptor(p,w).enumerable})),m.push.apply(m,v)}return m}function t(p){for(var _=1;_<arguments.length;_++){var m=arguments[_]!=null?arguments[_]:{};_%2?r(Object(m),!0).forEach(function(v){n(p,v,m[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(m,v))})}return p}function n(p,_,m){return _ in p?Object.defineProperty(p,_,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[_]=m,p}function s(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}function u(p,_){for(var m=0;m<_.length;m++){var v=_[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function l(p,_,m){return _&&u(p.prototype,_),m&&u(p,m),p}var f=require_buffer(),a=f.Buffer,c=require_util5(),d=c.inspect,h=d&&d.custom||"inspect";function g(p,_,m){a.prototype.copy.call(p,_,m)}o.exports=function(){function p(){s(this,p),this.head=null,this.tail=null,this.length=0}return l(p,[{key:"push",value:function(m){var v={data:m,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(m){var v={data:m,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var v=this.head,w=""+v.data;v=v.next;)w+=m+v.data;return w}},{key:"concat",value:function(m){if(this.length===0)return a.alloc(0);for(var v=a.allocUnsafe(m>>>0),w=this.head,y=0;w;)g(w.data,v,y),y+=w.data.length,w=w.next;return v}},{key:"consume",value:function(m,v){var w;return m<this.head.data.length?(w=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?w=this.shift():w=v?this._getString(m):this._getBuffer(m),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var v=this.head,w=1,y=v.data;for(m-=y.length;v=v.next;){var b=v.data,T=m>b.length?b.length:m;if(T===b.length?y+=b:y+=b.slice(0,m),m-=T,m===0){T===b.length?(++w,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=b.slice(T));break}++w}return this.length-=w,y}},{key:"_getBuffer",value:function(m){var v=a.allocUnsafe(m),w=this.head,y=1;for(w.data.copy(v),m-=w.data.length;w=w.next;){var b=w.data,T=m>b.length?b.length:m;if(b.copy(v,v.length-m,0,T),m-=T,m===0){T===b.length?(++y,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=b.slice(T));break}++y}return this.length-=y,v}},{key:h,value:function(m,v){return d(this,t({},v,{depth:0,customInspect:!1}))}}]),p}()}}),require_destroy=__commonJS({"node_modules/readable-stream/lib/internal/streams/destroy.js"(e,o){init_node_globals();function r(f,a){var c=this,d=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return d||h?(a?a(f):f&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(u,this,f)):process.nextTick(u,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(g){!a&&g?c._writableState?c._writableState.errorEmitted?process.nextTick(n,c):(c._writableState.errorEmitted=!0,process.nextTick(t,c,g)):process.nextTick(t,c,g):a?(process.nextTick(n,c),a(g)):process.nextTick(n,c)}),this)}function t(f,a){u(f,a),n(f)}function n(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(f,a){f.emit("error",a)}function l(f,a){var c=f._readableState,d=f._writableState;c&&c.autoDestroy||d&&d.autoDestroy?f.destroy(a):f.emit("error",a)}o.exports={destroy:r,undestroy:s,errorOrDestroy:l}}}),require_errors_browser=__commonJS({"node_modules/readable-stream/errors-browser.js"(e,o){init_node_globals();function r(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var t={};function n(a,c,d){d||(d=Error);function h(p,_,m){return typeof c=="string"?c:c(p,_,m)}var g=function(p){r(_,p);function _(m,v,w){return p.call(this,h(m,v,w))||this}return _}(d);g.prototype.name=d.name,g.prototype.code=a,t[a]=g}function s(a,c){if(Array.isArray(a)){var d=a.length;return a=a.map(function(h){return String(h)}),d>2?"one of ".concat(c," ").concat(a.slice(0,d-1).join(", "),", or ")+a[d-1]:d===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function u(a,c,d){return a.substr(!d||d<0?0:+d,c.length)===c}function l(a,c,d){return(d===void 0||d>a.length)&&(d=a.length),a.substring(d-c.length,d)===c}function f(a,c,d){return typeof d!="number"&&(d=0),d+c.length>a.length?!1:a.indexOf(c,d)!==-1}n("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(a,c,d){var h;typeof c=="string"&&u(c,"not ")?(h="must not be",c=c.replace(/^not /,"")):h="must be";var g;if(l(a," argument"))g="The ".concat(a," ").concat(h," ").concat(s(c,"type"));else{var p=f(a,".")?"property":"argument";g='The "'.concat(a,'" ').concat(p," ").concat(h," ").concat(s(c,"type"))}return g+=". Received type ".concat(typeof d),g},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),o.exports.codes=t}}),require_state2=__commonJS({"node_modules/readable-stream/lib/internal/streams/state.js"(e,o){init_node_globals();var r=require_errors_browser().codes.ERR_INVALID_OPT_VALUE;function t(s,u,l){return s.highWaterMark!=null?s.highWaterMark:u?s[l]:null}function n(s,u,l,f){var a=t(u,f,l);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var c=f?l:"highWaterMark";throw new r(c,a)}return Math.floor(a)}return s.objectMode?16:16*1024}o.exports={getHighWaterMark:n}}}),require_browser5=__commonJS({"node_modules/util-deprecate/browser.js"(e,o){init_node_globals(),o.exports=r;function r(n,s){if(t("noDeprecation"))return n;var u=!1;function l(){if(!u){if(t("throwDeprecation"))throw new Error(s);t("traceDeprecation")?console.trace(s):console.warn(s),u=!0}return n.apply(this,arguments)}return l}function t(n){try{if(!global.localStorage)return!1}catch{return!1}var s=global.localStorage[n];return s==null?!1:String(s).toLowerCase()==="true"}}}),require_stream_writable=__commonJS({"node_modules/readable-stream/lib/_stream_writable.js"(e,o){init_node_globals(),o.exports=C;function r(ue){var pe=this;this.next=null,this.entry=null,this.finish=function(){Ie(pe,ue)}}var t;C.WritableState=E;var n={deprecate:require_browser5()},s=require_stream_browser(),u=require_buffer().Buffer,l=global.Uint8Array||function(){};function f(ue){return u.from(ue)}function a(ue){return u.isBuffer(ue)||ue instanceof l}var c=require_destroy(),d=require_state2(),h=d.getHighWaterMark,g=require_errors_browser().codes,p=g.ERR_INVALID_ARG_TYPE,_=g.ERR_METHOD_NOT_IMPLEMENTED,m=g.ERR_MULTIPLE_CALLBACK,v=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,y=g.ERR_STREAM_NULL_VALUES,b=g.ERR_STREAM_WRITE_AFTER_END,T=g.ERR_UNKNOWN_ENCODING,R=c.errorOrDestroy;require_inherits_browser()(C,s);function S(){}function E(ue,pe,Ae){t=t||require_stream_duplex(),ue=ue||{},typeof Ae!="boolean"&&(Ae=pe instanceof t),this.objectMode=!!ue.objectMode,Ae&&(this.objectMode=this.objectMode||!!ue.writableObjectMode),this.highWaterMark=h(this,ue,"writableHighWaterMark",Ae),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Y=ue.decodeStrings===!1;this.decodeStrings=!Y,this.defaultEncoding=ue.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(se){L(pe,se)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ue.emitClose!==!1,this.autoDestroy=!!ue.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var pe=this.bufferedRequest,Ae=[];pe;)Ae.push(pe),pe=pe.next;return Ae},function(){try{Object.defineProperty(E.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var A;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(pe){return A.call(this,pe)?!0:this!==C?!1:pe&&pe._writableState instanceof E}})):A=function(pe){return pe instanceof this};function C(ue){t=t||require_stream_duplex();var pe=this instanceof t;if(!pe&&!A.call(C,this))return new C(ue);this._writableState=new E(ue,this,pe),this.writable=!0,ue&&(typeof ue.write=="function"&&(this._write=ue.write),typeof ue.writev=="function"&&(this._writev=ue.writev),typeof ue.destroy=="function"&&(this._destroy=ue.destroy),typeof ue.final=="function"&&(this._final=ue.final)),s.call(this)}C.prototype.pipe=function(){R(this,new v)};function I(ue,pe){var Ae=new b;R(ue,Ae),process.nextTick(pe,Ae)}function P(ue,pe,Ae,Y){var se;return Ae===null?se=new y:typeof Ae!="string"&&!pe.objectMode&&(se=new p("chunk",["string","Buffer"],Ae)),se?(R(ue,se),process.nextTick(Y,se),!1):!0}C.prototype.write=function(ue,pe,Ae){var Y=this._writableState,se=!1,F=!Y.objectMode&&a(ue);return F&&!u.isBuffer(ue)&&(ue=f(ue)),typeof pe=="function"&&(Ae=pe,pe=null),F?pe="buffer":pe||(pe=Y.defaultEncoding),typeof Ae!="function"&&(Ae=S),Y.ending?I(this,Ae):(F||P(this,Y,ue,Ae))&&(Y.pendingcb++,se=k(this,Y,F,ue,pe,Ae)),se},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var ue=this._writableState;ue.corked&&(ue.corked--,!ue.writing&&!ue.corked&&!ue.bufferProcessing&&ue.bufferedRequest&&V(this,ue))},C.prototype.setDefaultEncoding=function(pe){if(typeof pe=="string"&&(pe=pe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((pe+"").toLowerCase())>-1))throw new T(pe);return this._writableState.defaultEncoding=pe,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function O(ue,pe,Ae){return!ue.objectMode&&ue.decodeStrings!==!1&&typeof pe=="string"&&(pe=u.from(pe,Ae)),pe}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(ue,pe,Ae,Y,se,F){if(!Ae){var j=O(pe,Y,se);Y!==j&&(Ae=!0,se="buffer",Y=j)}var B=pe.objectMode?1:Y.length;pe.length+=B;var $=pe.length<pe.highWaterMark;if($||(pe.needDrain=!0),pe.writing||pe.corked){var G=pe.lastBufferedRequest;pe.lastBufferedRequest={chunk:Y,encoding:se,isBuf:Ae,callback:F,next:null},G?G.next=pe.lastBufferedRequest:pe.bufferedRequest=pe.lastBufferedRequest,pe.bufferedRequestCount+=1}else N(ue,pe,!1,B,Y,se,F);return $}function N(ue,pe,Ae,Y,se,F,j){pe.writelen=Y,pe.writecb=j,pe.writing=!0,pe.sync=!0,pe.destroyed?pe.onwrite(new w("write")):Ae?ue._writev(se,pe.onwrite):ue._write(se,F,pe.onwrite),pe.sync=!1}function K(ue,pe,Ae,Y,se){--pe.pendingcb,Ae?(process.nextTick(se,Y),process.nextTick(ce,ue,pe),ue._writableState.errorEmitted=!0,R(ue,Y)):(se(Y),ue._writableState.errorEmitted=!0,R(ue,Y),ce(ue,pe))}function U(ue){ue.writing=!1,ue.writecb=null,ue.length-=ue.writelen,ue.writelen=0}function L(ue,pe){var Ae=ue._writableState,Y=Ae.sync,se=Ae.writecb;if(typeof se!="function")throw new m;if(U(Ae),pe)K(ue,Ae,Y,pe,se);else{var F=ee(Ae)||ue.destroyed;!F&&!Ae.corked&&!Ae.bufferProcessing&&Ae.bufferedRequest&&V(ue,Ae),Y?process.nextTick(re,ue,Ae,F,se):re(ue,Ae,F,se)}}function re(ue,pe,Ae,Y){Ae||Z(ue,pe),pe.pendingcb--,Y(),ce(ue,pe)}function Z(ue,pe){pe.length===0&&pe.needDrain&&(pe.needDrain=!1,ue.emit("drain"))}function V(ue,pe){pe.bufferProcessing=!0;var Ae=pe.bufferedRequest;if(ue._writev&&Ae&&Ae.next){var Y=pe.bufferedRequestCount,se=new Array(Y),F=pe.corkedRequestsFree;F.entry=Ae;for(var j=0,B=!0;Ae;)se[j]=Ae,Ae.isBuf||(B=!1),Ae=Ae.next,j+=1;se.allBuffers=B,N(ue,pe,!0,pe.length,se,"",F.finish),pe.pendingcb++,pe.lastBufferedRequest=null,F.next?(pe.corkedRequestsFree=F.next,F.next=null):pe.corkedRequestsFree=new r(pe),pe.bufferedRequestCount=0}else{for(;Ae;){var $=Ae.chunk,G=Ae.encoding,X=Ae.callback,H=pe.objectMode?1:$.length;if(N(ue,pe,!1,H,$,G,X),Ae=Ae.next,pe.bufferedRequestCount--,pe.writing)break}Ae===null&&(pe.lastBufferedRequest=null)}pe.bufferedRequest=Ae,pe.bufferProcessing=!1}C.prototype._write=function(ue,pe,Ae){Ae(new _("_write()"))},C.prototype._writev=null,C.prototype.end=function(ue,pe,Ae){var Y=this._writableState;return typeof ue=="function"?(Ae=ue,ue=null,pe=null):typeof pe=="function"&&(Ae=pe,pe=null),ue!=null&&this.write(ue,pe),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||Ee(this,Y,Ae),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ee(ue){return ue.ending&&ue.length===0&&ue.bufferedRequest===null&&!ue.finished&&!ue.writing}function fe(ue,pe){ue._final(function(Ae){pe.pendingcb--,Ae&&R(ue,Ae),pe.prefinished=!0,ue.emit("prefinish"),ce(ue,pe)})}function _e(ue,pe){!pe.prefinished&&!pe.finalCalled&&(typeof ue._final=="function"&&!pe.destroyed?(pe.pendingcb++,pe.finalCalled=!0,process.nextTick(fe,ue,pe)):(pe.prefinished=!0,ue.emit("prefinish")))}function ce(ue,pe){var Ae=ee(pe);if(Ae&&(_e(ue,pe),pe.pendingcb===0&&(pe.finished=!0,ue.emit("finish"),pe.autoDestroy))){var Y=ue._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&ue.destroy()}return Ae}function Ee(ue,pe,Ae){pe.ending=!0,ce(ue,pe),Ae&&(pe.finished?process.nextTick(Ae):ue.once("finish",Ae)),pe.ended=!0,ue.writable=!1}function Ie(ue,pe,Ae){var Y=ue.entry;for(ue.entry=null;Y;){var se=Y.callback;pe.pendingcb--,se(Ae),Y=Y.next}pe.corkedRequestsFree.next=ue}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(pe){!this._writableState||(this._writableState.destroyed=pe)}}),C.prototype.destroy=c.destroy,C.prototype._undestroy=c.undestroy,C.prototype._destroy=function(ue,pe){pe(ue)}}}),require_stream_duplex=__commonJS({"node_modules/readable-stream/lib/_stream_duplex.js"(e,o){init_node_globals();var r=Object.keys||function(d){var h=[];for(var g in d)h.push(g);return h};o.exports=f;var t=require_stream_readable(),n=require_stream_writable();for(require_inherits_browser()(f,t),s=r(n.prototype),l=0;l<s.length;l++)u=s[l],f.prototype[u]||(f.prototype[u]=n.prototype[u]);var s,u,l;function f(d){if(!(this instanceof f))return new f(d);t.call(this,d),n.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(f.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(c,this)}function c(d){d.end()}Object.defineProperty(f.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}}),require_safe_buffer=__commonJS({"node_modules/safe-buffer/index.js"(e,o){init_node_globals();var r=require_buffer(),t=r.Buffer;function n(u,l){for(var f in u)l[f]=u[f]}t.from&&t.alloc&&t.allocUnsafe&&t.allocUnsafeSlow?o.exports=r:(n(r,e),e.Buffer=s);function s(u,l,f){return t(u,l,f)}s.prototype=Object.create(t.prototype),n(t,s),s.from=function(u,l,f){if(typeof u=="number")throw new TypeError("Argument must not be a number");return t(u,l,f)},s.alloc=function(u,l,f){if(typeof u!="number")throw new TypeError("Argument must be a number");var a=t(u);return l!==void 0?typeof f=="string"?a.fill(l,f):a.fill(l):a.fill(0),a},s.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return t(u)},s.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}}}),require_string_decoder=__commonJS({"node_modules/string_decoder/lib/string_decoder.js"(e){init_node_globals();var o=require_safe_buffer().Buffer,r=o.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(w){if(!w)return"utf8";for(var y;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(y)return;w=(""+w).toLowerCase(),y=!0}}function n(w){var y=t(w);if(typeof y!="string"&&(o.isEncoding===r||!r(w)))throw new Error("Unknown encoding: "+w);return y||w}e.StringDecoder=s;function s(w){this.encoding=n(w);var y;switch(this.encoding){case"utf16le":this.text=h,this.end=g,y=4;break;case"utf8":this.fillLast=a,y=4;break;case"base64":this.text=p,this.end=_,y=3;break;default:this.write=m,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(y)}s.prototype.write=function(w){if(w.length===0)return"";var y,b;if(this.lastNeed){if(y=this.fillLast(w),y===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<w.length?y?y+this.text(w,b):this.text(w,b):y||""},s.prototype.end=d,s.prototype.text=c,s.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function u(w){return w<=127?0:w>>5==6?2:w>>4==14?3:w>>3==30?4:w>>6==2?-1:-2}function l(w,y,b){var T=y.length-1;if(T<b)return 0;var R=u(y[T]);return R>=0?(R>0&&(w.lastNeed=R-1),R):--T<b||R===-2?0:(R=u(y[T]),R>=0?(R>0&&(w.lastNeed=R-2),R):--T<b||R===-2?0:(R=u(y[T]),R>=0?(R>0&&(R===2?R=0:w.lastNeed=R-3),R):0))}function f(w,y,b){if((y[0]&192)!=128)return w.lastNeed=0,"\uFFFD";if(w.lastNeed>1&&y.length>1){if((y[1]&192)!=128)return w.lastNeed=1,"\uFFFD";if(w.lastNeed>2&&y.length>2&&(y[2]&192)!=128)return w.lastNeed=2,"\uFFFD"}}function a(w){var y=this.lastTotal-this.lastNeed,b=f(this,w);if(b!==void 0)return b;if(this.lastNeed<=w.length)return w.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,y,0,w.length),this.lastNeed-=w.length}function c(w,y){var b=l(this,w,y);if(!this.lastNeed)return w.toString("utf8",y);this.lastTotal=b;var T=w.length-(b-this.lastNeed);return w.copy(this.lastChar,0,T),w.toString("utf8",y,T)}function d(w){var y=w&&w.length?this.write(w):"";return this.lastNeed?y+"\uFFFD":y}function h(w,y){if((w.length-y)%2==0){var b=w.toString("utf16le",y);if(b){var T=b.charCodeAt(b.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",y,w.length-1)}function g(w){var y=w&&w.length?this.write(w):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function p(w,y){var b=(w.length-y)%3;return b===0?w.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",y,w.length-b))}function _(w){var y=w&&w.length?this.write(w):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function m(w){return w.toString(this.encoding)}function v(w){return w&&w.length?this.write(w):""}}}),require_end_of_stream=__commonJS({"node_modules/readable-stream/lib/internal/streams/end-of-stream.js"(e,o){init_node_globals();var r=require_errors_browser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(l){var f=!1;return function(){if(!f){f=!0;for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];l.apply(this,c)}}}function n(){}function s(l){return l.setHeader&&typeof l.abort=="function"}function u(l,f,a){if(typeof f=="function")return u(l,null,f);f||(f={}),a=t(a||n);var c=f.readable||f.readable!==!1&&l.readable,d=f.writable||f.writable!==!1&&l.writable,h=function(){l.writable||p()},g=l._writableState&&l._writableState.finished,p=function(){d=!1,g=!0,c||a.call(l)},_=l._readableState&&l._readableState.endEmitted,m=function(){c=!1,_=!0,d||a.call(l)},v=function(T){a.call(l,T)},w=function(){var T;if(c&&!_)return(!l._readableState||!l._readableState.ended)&&(T=new r),a.call(l,T);if(d&&!g)return(!l._writableState||!l._writableState.ended)&&(T=new r),a.call(l,T)},y=function(){l.req.on("finish",p)};return s(l)?(l.on("complete",p),l.on("abort",w),l.req?y():l.on("request",y)):d&&!l._writableState&&(l.on("end",h),l.on("close",h)),l.on("end",m),l.on("finish",p),f.error!==!1&&l.on("error",v),l.on("close",w),function(){l.removeListener("complete",p),l.removeListener("abort",w),l.removeListener("request",y),l.req&&l.req.removeListener("finish",p),l.removeListener("end",h),l.removeListener("close",h),l.removeListener("finish",p),l.removeListener("end",m),l.removeListener("error",v),l.removeListener("close",w)}}o.exports=u}}),require_async_iterator=__commonJS({"node_modules/readable-stream/lib/internal/streams/async_iterator.js"(e,o){init_node_globals();var r;function t(y,b,T){return b in y?Object.defineProperty(y,b,{value:T,enumerable:!0,configurable:!0,writable:!0}):y[b]=T,y}var n=require_end_of_stream(),s=Symbol("lastResolve"),u=Symbol("lastReject"),l=Symbol("error"),f=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),d=Symbol("stream");function h(y,b){return{value:y,done:b}}function g(y){var b=y[s];if(b!==null){var T=y[d].read();T!==null&&(y[a]=null,y[s]=null,y[u]=null,b(h(T,!1)))}}function p(y){process.nextTick(g,y)}function _(y,b){return function(T,R){y.then(function(){if(b[f]){T(h(void 0,!0));return}b[c](T,R)},R)}}var m=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((r={get stream(){return this[d]},next:function(){var b=this,T=this[l];if(T!==null)return Promise.reject(T);if(this[f])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise(function(A,C){process.nextTick(function(){b[l]?C(b[l]):A(h(void 0,!0))})});var R=this[a],S;if(R)S=new Promise(_(R,this));else{var E=this[d].read();if(E!==null)return Promise.resolve(h(E,!1));S=new Promise(this[c])}return this[a]=S,S}},t(r,Symbol.asyncIterator,function(){return this}),t(r,"return",function(){var b=this;return new Promise(function(T,R){b[d].destroy(null,function(S){if(S){R(S);return}T(h(void 0,!0))})})}),r),m),w=function(b){var T,R=Object.create(v,(T={},t(T,d,{value:b,writable:!0}),t(T,s,{value:null,writable:!0}),t(T,u,{value:null,writable:!0}),t(T,l,{value:null,writable:!0}),t(T,f,{value:b._readableState.endEmitted,writable:!0}),t(T,c,{value:function(E,A){var C=R[d].read();C?(R[a]=null,R[s]=null,R[u]=null,E(h(C,!1))):(R[s]=E,R[u]=A)},writable:!0}),T));return R[a]=null,n(b,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var E=R[u];E!==null&&(R[a]=null,R[s]=null,R[u]=null,E(S)),R[l]=S;return}var A=R[s];A!==null&&(R[a]=null,R[s]=null,R[u]=null,A(h(void 0,!0))),R[f]=!0}),b.on("readable",p.bind(null,R)),R};o.exports=w}}),require_from_browser=__commonJS({"node_modules/readable-stream/lib/internal/streams/from-browser.js"(e,o){init_node_globals(),o.exports=function(){throw new Error("Readable.from is not available in the browser")}}}),require_stream_readable=__commonJS({"node_modules/readable-stream/lib/_stream_readable.js"(e,o){init_node_globals(),o.exports=I;var r;I.ReadableState=C,require_events().EventEmitter;var t=function(j,B){return j.listeners(B).length},n=require_stream_browser(),s=require_buffer().Buffer,u=global.Uint8Array||function(){};function l(F){return s.from(F)}function f(F){return s.isBuffer(F)||F instanceof u}var a=require_util5(),c;a&&a.debuglog?c=a.debuglog("stream"):c=function(){};var d=require_buffer_list(),h=require_destroy(),g=require_state2(),p=g.getHighWaterMark,_=require_errors_browser().codes,m=_.ERR_INVALID_ARG_TYPE,v=_.ERR_STREAM_PUSH_AFTER_EOF,w=_.ERR_METHOD_NOT_IMPLEMENTED,y=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b,T,R;require_inherits_browser()(I,n);var S=h.errorOrDestroy,E=["error","close","destroy","pause","resume"];function A(F,j,B){if(typeof F.prependListener=="function")return F.prependListener(j,B);!F._events||!F._events[j]?F.on(j,B):Array.isArray(F._events[j])?F._events[j].unshift(B):F._events[j]=[B,F._events[j]]}function C(F,j,B){r=r||require_stream_duplex(),F=F||{},typeof B!="boolean"&&(B=j instanceof r),this.objectMode=!!F.objectMode,B&&(this.objectMode=this.objectMode||!!F.readableObjectMode),this.highWaterMark=p(this,F,"readableHighWaterMark",B),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=F.emitClose!==!1,this.autoDestroy=!!F.autoDestroy,this.destroyed=!1,this.defaultEncoding=F.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,F.encoding&&(b||(b=require_string_decoder().StringDecoder),this.decoder=new b(F.encoding),this.encoding=F.encoding)}function I(F){if(r=r||require_stream_duplex(),!(this instanceof I))return new I(F);var j=this instanceof r;this._readableState=new C(F,this,j),this.readable=!0,F&&(typeof F.read=="function"&&(this._read=F.read),typeof F.destroy=="function"&&(this._destroy=F.destroy)),n.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(j){!this._readableState||(this._readableState.destroyed=j)}}),I.prototype.destroy=h.destroy,I.prototype._undestroy=h.undestroy,I.prototype._destroy=function(F,j){j(F)},I.prototype.push=function(F,j){var B=this._readableState,$;return B.objectMode?$=!0:typeof F=="string"&&(j=j||B.defaultEncoding,j!==B.encoding&&(F=s.from(F,j),j=""),$=!0),P(this,F,j,!1,$)},I.prototype.unshift=function(F){return P(this,F,null,!0,!1)};function P(F,j,B,$,G){c("readableAddChunk",j);var X=F._readableState;if(j===null)X.reading=!1,L(F,X);else{var H;if(G||(H=k(X,j)),H)S(F,H);else if(X.objectMode||j&&j.length>0)if(typeof j!="string"&&!X.objectMode&&Object.getPrototypeOf(j)!==s.prototype&&(j=l(j)),$)X.endEmitted?S(F,new y):O(F,X,j,!0);else if(X.ended)S(F,new v);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!B?(j=X.decoder.write(j),X.objectMode||j.length!==0?O(F,X,j,!1):V(F,X)):O(F,X,j,!1)}else $||(X.reading=!1,V(F,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function O(F,j,B,$){j.flowing&&j.length===0&&!j.sync?(j.awaitDrain=0,F.emit("data",B)):(j.length+=j.objectMode?1:B.length,$?j.buffer.unshift(B):j.buffer.push(B),j.needReadable&&re(F)),V(F,j)}function k(F,j){var B;return!f(j)&&typeof j!="string"&&j!==void 0&&!F.objectMode&&(B=new m("chunk",["string","Buffer","Uint8Array"],j)),B}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(F){b||(b=require_string_decoder().StringDecoder);var j=new b(F);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;for(var B=this._readableState.buffer.head,$="";B!==null;)$+=j.write(B.data),B=B.next;return this._readableState.buffer.clear(),$!==""&&this._readableState.buffer.push($),this._readableState.length=$.length,this};var N=1073741824;function K(F){return F>=N?F=N:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}function U(F,j){return F<=0||j.length===0&&j.ended?0:j.objectMode?1:F!==F?j.flowing&&j.length?j.buffer.head.data.length:j.length:(F>j.highWaterMark&&(j.highWaterMark=K(F)),F<=j.length?F:j.ended?j.length:(j.needReadable=!0,0))}I.prototype.read=function(F){c("read",F),F=parseInt(F,10);var j=this._readableState,B=F;if(F!==0&&(j.emittedReadable=!1),F===0&&j.needReadable&&((j.highWaterMark!==0?j.length>=j.highWaterMark:j.length>0)||j.ended))return c("read: emitReadable",j.length,j.ended),j.length===0&&j.ended?Ae(this):re(this),null;if(F=U(F,j),F===0&&j.ended)return j.length===0&&Ae(this),null;var $=j.needReadable;c("need readable",$),(j.length===0||j.length-F<j.highWaterMark)&&($=!0,c("length less than watermark",$)),j.ended||j.reading?($=!1,c("reading or ended",$)):$&&(c("do read"),j.reading=!0,j.sync=!0,j.length===0&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(F=U(B,j)));var G;return F>0?G=pe(F,j):G=null,G===null?(j.needReadable=j.length<=j.highWaterMark,F=0):(j.length-=F,j.awaitDrain=0),j.length===0&&(j.ended||(j.needReadable=!0),B!==F&&j.ended&&Ae(this)),G!==null&&this.emit("data",G),G};function L(F,j){if(c("onEofChunk"),!j.ended){if(j.decoder){var B=j.decoder.end();B&&B.length&&(j.buffer.push(B),j.length+=j.objectMode?1:B.length)}j.ended=!0,j.sync?re(F):(j.needReadable=!1,j.emittedReadable||(j.emittedReadable=!0,Z(F)))}}function re(F){var j=F._readableState;c("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(c("emitReadable",j.flowing),j.emittedReadable=!0,process.nextTick(Z,F))}function Z(F){var j=F._readableState;c("emitReadable_",j.destroyed,j.length,j.ended),!j.destroyed&&(j.length||j.ended)&&(F.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,ue(F)}function V(F,j){j.readingMore||(j.readingMore=!0,process.nextTick(ee,F,j))}function ee(F,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&j.length===0);){var B=j.length;if(c("maybeReadMore read 0"),F.read(0),B===j.length)break}j.readingMore=!1}I.prototype._read=function(F){S(this,new w("_read()"))},I.prototype.pipe=function(F,j){var B=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=F;break;case 1:$.pipes=[$.pipes,F];break;default:$.pipes.push(F);break}$.pipesCount+=1,c("pipe count=%d opts=%j",$.pipesCount,j);var G=(!j||j.end!==!1)&&F!==process.stdout&&F!==process.stderr,X=G?he:q;$.endEmitted?process.nextTick(X):B.once("end",X),F.on("unpipe",H);function H(M,ie){c("onunpipe"),M===B&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,De())}function he(){c("onend"),F.end()}var we=fe(B);F.on("drain",we);var Te=!1;function De(){c("cleanup"),F.removeListener("close",Le),F.removeListener("finish",W),F.removeListener("drain",we),F.removeListener("error",Be),F.removeListener("unpipe",H),B.removeListener("end",he),B.removeListener("end",q),B.removeListener("data",Me),Te=!0,$.awaitDrain&&(!F._writableState||F._writableState.needDrain)&&we()}B.on("data",Me);function Me(M){c("ondata");var ie=F.write(M);c("dest.write",ie),ie===!1&&(($.pipesCount===1&&$.pipes===F||$.pipesCount>1&&se($.pipes,F)!==-1)&&!Te&&(c("false write response, pause",$.awaitDrain),$.awaitDrain++),B.pause())}function Be(M){c("onerror",M),q(),F.removeListener("error",Be),t(F,"error")===0&&S(F,M)}A(F,"error",Be);function Le(){F.removeListener("finish",W),q()}F.once("close",Le);function W(){c("onfinish"),F.removeListener("close",Le),q()}F.once("finish",W);function q(){c("unpipe"),B.unpipe(F)}return F.emit("pipe",B),$.flowing||(c("pipe resume"),B.resume()),F};function fe(F){return function(){var B=F._readableState;c("pipeOnDrain",B.awaitDrain),B.awaitDrain&&B.awaitDrain--,B.awaitDrain===0&&t(F,"data")&&(B.flowing=!0,ue(F))}}I.prototype.unpipe=function(F){var j=this._readableState,B={hasUnpiped:!1};if(j.pipesCount===0)return this;if(j.pipesCount===1)return F&&F!==j.pipes?this:(F||(F=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,F&&F.emit("unpipe",this,B),this);if(!F){var $=j.pipes,G=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var X=0;X<G;X++)$[X].emit("unpipe",this,{hasUnpiped:!1});return this}var H=se(j.pipes,F);return H===-1?this:(j.pipes.splice(H,1),j.pipesCount-=1,j.pipesCount===1&&(j.pipes=j.pipes[0]),F.emit("unpipe",this,B),this)},I.prototype.on=function(F,j){var B=n.prototype.on.call(this,F,j),$=this._readableState;return F==="data"?($.readableListening=this.listenerCount("readable")>0,$.flowing!==!1&&this.resume()):F==="readable"&&!$.endEmitted&&!$.readableListening&&($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,c("on readable",$.length,$.reading),$.length?re(this):$.reading||process.nextTick(ce,this)),B},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(F,j){var B=n.prototype.removeListener.call(this,F,j);return F==="readable"&&process.nextTick(_e,this),B},I.prototype.removeAllListeners=function(F){var j=n.prototype.removeAllListeners.apply(this,arguments);return(F==="readable"||F===void 0)&&process.nextTick(_e,this),j};function _e(F){var j=F._readableState;j.readableListening=F.listenerCount("readable")>0,j.resumeScheduled&&!j.paused?j.flowing=!0:F.listenerCount("data")>0&&F.resume()}function ce(F){c("readable nexttick read 0"),F.read(0)}I.prototype.resume=function(){var F=this._readableState;return F.flowing||(c("resume"),F.flowing=!F.readableListening,Ee(this,F)),F.paused=!1,this};function Ee(F,j){j.resumeScheduled||(j.resumeScheduled=!0,process.nextTick(Ie,F,j))}function Ie(F,j){c("resume",j.reading),j.reading||F.read(0),j.resumeScheduled=!1,F.emit("resume"),ue(F),j.flowing&&!j.reading&&F.read(0)}I.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ue(F){var j=F._readableState;for(c("flow",j.flowing);j.flowing&&F.read()!==null;);}I.prototype.wrap=function(F){var j=this,B=this._readableState,$=!1;F.on("end",function(){if(c("wrapped end"),B.decoder&&!B.ended){var H=B.decoder.end();H&&H.length&&j.push(H)}j.push(null)}),F.on("data",function(H){if(c("wrapped data"),B.decoder&&(H=B.decoder.write(H)),!(B.objectMode&&H==null)&&!(!B.objectMode&&(!H||!H.length))){var he=j.push(H);he||($=!0,F.pause())}});for(var G in F)this[G]===void 0&&typeof F[G]=="function"&&(this[G]=function(he){return function(){return F[he].apply(F,arguments)}}(G));for(var X=0;X<E.length;X++)F.on(E[X],this.emit.bind(this,E[X]));return this._read=function(H){c("wrapped _read",H),$&&($=!1,F.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=require_async_iterator()),T(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),I._fromList=pe,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function pe(F,j){if(j.length===0)return null;var B;return j.objectMode?B=j.buffer.shift():!F||F>=j.length?(j.decoder?B=j.buffer.join(""):j.buffer.length===1?B=j.buffer.first():B=j.buffer.concat(j.length),j.buffer.clear()):B=j.buffer.consume(F,j.decoder),B}function Ae(F){var j=F._readableState;c("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,process.nextTick(Y,j,F))}function Y(F,j){if(c("endReadableNT",F.endEmitted,F.length),!F.endEmitted&&F.length===0&&(F.endEmitted=!0,j.readable=!1,j.emit("end"),F.autoDestroy)){var B=j._writableState;(!B||B.autoDestroy&&B.finished)&&j.destroy()}}typeof Symbol=="function"&&(I.from=function(F,j){return R===void 0&&(R=require_from_browser()),R(I,F,j)});function se(F,j){for(var B=0,$=F.length;B<$;B++)if(F[B]===j)return B;return-1}}}),require_stream_transform=__commonJS({"node_modules/readable-stream/lib/_stream_transform.js"(e,o){init_node_globals(),o.exports=a;var r=require_errors_browser().codes,t=r.ERR_METHOD_NOT_IMPLEMENTED,n=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=r.ERR_TRANSFORM_WITH_LENGTH_0,l=require_stream_duplex();require_inherits_browser()(a,l);function f(h,g){var p=this._transformState;p.transforming=!1;var _=p.writecb;if(_===null)return this.emit("error",new n);p.writechunk=null,p.writecb=null,g!=null&&this.push(g),_(h);var m=this._readableState;m.reading=!1,(m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}function a(h){if(!(this instanceof a))return new a(h);l.call(this,h),this._transformState={afterTransform:f.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",c)}function c(){var h=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,p){d(h,g,p)}):d(this,null,null)}a.prototype.push=function(h,g){return this._transformState.needTransform=!1,l.prototype.push.call(this,h,g)},a.prototype._transform=function(h,g,p){p(new t("_transform()"))},a.prototype._write=function(h,g,p){var _=this._transformState;if(_.writecb=p,_.writechunk=h,_.writeencoding=g,!_.transforming){var m=this._readableState;(_.needTransform||m.needReadable||m.length<m.highWaterMark)&&this._read(m.highWaterMark)}},a.prototype._read=function(h){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},a.prototype._destroy=function(h,g){l.prototype._destroy.call(this,h,function(p){g(p)})};function d(h,g,p){if(g)return h.emit("error",g);if(p!=null&&h.push(p),h._writableState.length)throw new u;if(h._transformState.transforming)throw new s;return h.push(null)}}}),require_stream_passthrough=__commonJS({"node_modules/readable-stream/lib/_stream_passthrough.js"(e,o){init_node_globals(),o.exports=t;var r=require_stream_transform();require_inherits_browser()(t,r);function t(n){if(!(this instanceof t))return new t(n);r.call(this,n)}t.prototype._transform=function(n,s,u){u(null,n)}}}),require_pipeline=__commonJS({"node_modules/readable-stream/lib/internal/streams/pipeline.js"(e,o){init_node_globals();var r;function t(p){var _=!1;return function(){_||(_=!0,p.apply(void 0,arguments))}}var n=require_errors_browser().codes,s=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function l(p){if(p)throw p}function f(p){return p.setHeader&&typeof p.abort=="function"}function a(p,_,m,v){v=t(v);var w=!1;p.on("close",function(){w=!0}),r===void 0&&(r=require_end_of_stream()),r(p,{readable:_,writable:m},function(b){if(b)return v(b);w=!0,v()});var y=!1;return function(b){if(!w&&!y){if(y=!0,f(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();v(b||new u("pipe"))}}}function c(p){p()}function d(p,_){return p.pipe(_)}function h(p){return!p.length||typeof p[p.length-1]!="function"?l:p.pop()}function g(){for(var p=arguments.length,_=new Array(p),m=0;m<p;m++)_[m]=arguments[m];var v=h(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new s("streams");var w,y=_.map(function(b,T){var R=T<_.length-1,S=T>0;return a(b,R,S,function(E){w||(w=E),E&&y.forEach(c),!R&&(y.forEach(c),v(w))})});return _.reduce(d)}o.exports=g}}),require_readable_browser=__commonJS({"node_modules/readable-stream/readable-browser.js"(e,o){init_node_globals(),e=o.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough(),e.finished=require_end_of_stream(),e.pipeline=require_pipeline()}}),require_level_iterator_stream=__commonJS({"node_modules/level-iterator-stream/index.js"(e,o){init_node_globals();var r=require_inherits_browser(),{Readable:t}=require_readable_browser();o.exports=n,r(n,t);function n(s,u){if(!(this instanceof n))return new n(s,u);u=u||{},t.call(this,Object.assign({},u,{objectMode:!0})),this._iterator=s,this._options=u,this.on("end",this.destroy.bind(this,null,null))}n.prototype._read=function(){this.destroyed||this._iterator.next((s,u,l)=>{if(!this.destroyed){if(s)return this.destroy(s);u===void 0&&l===void 0?this.push(null):this._options.keys!==!1&&this._options.values===!1?this.push(u):this._options.keys===!1&&this._options.values!==!1?this.push(l):this.push({key:u,value:l})}})},n.prototype._destroy=function(s,u){this._iterator.end(function(l){u(s||l)})}}}),require_errors2=__commonJS({"node_modules/level-errors/errors.js"(e,o){init_node_globals();function r(n,s){const u=function(l,f){if(typeof l=="object"&&l!==null&&(f=f||l,l=l.message||l.name),l=l||"",f=f||void 0,typeof f=="object"&&f.type===n&&f.message===l)return f;Object.defineProperty(this,"type",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:f,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:l,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,u)};return u.prototype=new s,u}var t=r("LevelUPError",Error);o.exports={LevelUPError:t,InitializationError:r("InitializationError",t),OpenError:r("OpenError",t),ReadError:r("ReadError",t),WriteError:r("WriteError",t),NotFoundError:r("NotFoundError",t),EncodingError:r("EncodingError",t)},o.exports.NotFoundError.prototype.notFound=!0,o.exports.NotFoundError.prototype.status=404}}),require_common4=__commonJS({"node_modules/levelup/lib/common.js"(e){init_node_globals(),e.getCallback=function(o,r){return typeof o=="function"?o:r},e.getOptions=function(o){return typeof o=="object"&&o!==null?o:{}}}}),require_batch=__commonJS({"node_modules/levelup/lib/batch.js"(e,o){init_node_globals();var r=require_errors2().WriteError,t=require_catering(),n=require_common4().getCallback,s=require_common4().getOptions;function u(l){this.db=l,this.batch=l.db.batch(),this.ops=[],this.length=0}u.prototype.put=function(l,f,a){try{this.batch.put(l,f,a)}catch(c){throw new r(c)}return this.ops.push($e(Re({},a),{type:"put",key:l,value:f})),this.length++,this},u.prototype.del=function(l,f){try{this.batch.del(l,f)}catch(a){throw new r(a)}return this.ops.push($e(Re({},f),{type:"del",key:l})),this.length++,this},u.prototype.clear=function(){try{this.batch.clear()}catch(l){throw new r(l)}return this.ops=[],this.length=0,this},u.prototype.write=function(l,f){const a=this.db,c=this.ops;f=n(l,f),f=t.fromCallback(f),l=s(l);try{this.batch.write(l,function(d){if(d)return f(new r(d));a.emit("batch",c),f()})}catch(d){throw new r(d)}return f.promise},o.exports=u}}),require_next_tick_browser3=__commonJS({"node_modules/levelup/lib/next-tick-browser.js"(e,o){init_node_globals();var r=require_queue_microtask();o.exports=function(t,...n){n.length===0?r(t):r(()=>t(...n))}}}),require_levelup=__commonJS({"node_modules/levelup/lib/levelup.js"(e,o){init_node_globals();var r=require_events().EventEmitter,t=require_util3().inherits,n=require_deferred_leveldown(),s=require_level_iterator_stream(),u=require_batch(),l=require_errors2(),f=require_level_supports(),a=require_catering(),c=require_common4().getCallback,d=require_common4().getOptions,h=require_next_tick_browser3(),g=l.WriteError,p=l.ReadError,_=l.NotFoundError,m=l.OpenError,v=l.InitializationError;function w(b,T,R){if(!(this instanceof w))return new w(b,T,R);let S;if(r.call(this),this.setMaxListeners(1/0),typeof T=="function"&&(R=T,T={}),T=T||{},!b||typeof b!="object"){if(S=new v("First argument must be an abstract-leveldown compliant store"),typeof R=="function")return h(R,S);throw S}if(typeof b.status!="string")throw new Error(".status required, old abstract-leveldown");this.options=d(T),this._db=b,this.db=null,this.open(R||(E=>{E&&this.emit("error",E)})),this.supports=f(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(const E of Object.keys(this.supports.additionalMethods))this[E]==null&&(this[E]=function(...A){return this.db[E](...A)})}w.prototype.emit=r.prototype.emit,w.prototype.once=r.prototype.once,t(w,r),Object.defineProperty(w.prototype,"status",{enumerable:!0,get(){return this.db.status}}),w.prototype.isOperational=function(){return this.db.status==="open"||this.db.status==="opening"},w.prototype.open=function(b,T){return typeof b=="function"&&(T=b,b=null),T=a.fromCallback(T),b||(b=this.options),this.db&&this.isOpen()?(h(T,null,this),T.promise):this.db&&this._isOpening()?(this.once("open",()=>{T(null,this)}),T.promise):(this.db=new n(this._db),this.emit("opening"),this.db.open(b,R=>{if(R)return T(new m(R));this.db=this._db,T(null,this),this.emit("open"),this.emit("ready")}),T.promise)},w.prototype.close=function(b){return b=a.fromCallback(b),this.isOpen()?(this.db.close((T,...R)=>{this.emit("closed"),b(T,...R)}),this.emit("closing")):this.isClosed()?h(b):this.db.status==="closing"?this.once("closed",b):this._isOpening()&&this.once("open",()=>{this.close(b)}),b.promise},w.prototype.isOpen=function(){return this.db.status==="open"},w.prototype._isOpening=function(){return this.db.status==="opening"},w.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},w.prototype.get=function(b,T,R){return R=c(T,R),R=a.fromCallback(R),y(this,R)||(T=d(T),this.db.get(b,T,function(S,E){if(S)return/notfound/i.test(S)||S.notFound?S=new _("Key not found in database ["+b+"]",S):S=new p(S),R(S);R(null,E)})),R.promise},w.prototype.getMany=function(b,T,R){return this.db.getMany(b,T,R)},w.prototype.put=function(b,T,R,S){return S=c(R,S),S=a.fromCallback(S),y(this,S)||(R=d(R),this.db.put(b,T,R,E=>{if(E)return S(new g(E));this.emit("put",b,T),S()})),S.promise},w.prototype.del=function(b,T,R){return R=c(T,R),R=a.fromCallback(R),y(this,R)||(T=d(T),this.db.del(b,T,S=>{if(S)return R(new g(S));this.emit("del",b),R()})),R.promise},w.prototype.batch=function(b,T,R){return arguments.length?(typeof b=="function"?R=b:R=c(T,R),R=a.fromCallback(R),y(this,R)||(T=d(T),this.db.batch(b,T,S=>{if(S)return R(new g(S));this.emit("batch",b),R()})),R.promise):new u(this)},w.prototype.iterator=function(b){return this.db.iterator(b)},w.prototype.clear=function(b,T){return T=c(b,T),b=d(b),T=a.fromCallback(T),y(this,T)||this.db.clear(b,R=>{if(R)return T(new g(R));this.emit("clear",b),T()}),T.promise},w.prototype.readStream=w.prototype.createReadStream=function(b){return b=Object.assign({keys:!0,values:!0},b),typeof b.limit!="number"&&(b.limit=-1),new s(this.db.iterator(b),b)},w.prototype.keyStream=w.prototype.createKeyStream=function(b){return this.createReadStream(Object.assign({},b,{keys:!0,values:!1}))},w.prototype.valueStream=w.prototype.createValueStream=function(b){return this.createReadStream(Object.assign({},b,{keys:!1,values:!0}))},w.prototype.toString=function(){return"LevelUP"},w.prototype.type="levelup",w.prototype._nextTick=h;function y(b,T){return b.isOperational()?!1:(h(T,new p("Database is not open")),!0)}w.errors=l,o.exports=w}}),require_encodings=__commonJS({"node_modules/level-codec/lib/encodings.js"(e){init_node_globals();var{Buffer:o}=require_buffer();e.utf8=e["utf-8"]={encode:function(s){return n(s)?s:String(s)},decode:t,buffer:!1,type:"utf8"},e.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},e.binary={encode:function(s){return n(s)?s:o.from(s)},decode:t,buffer:!0,type:"binary"},e.none={encode:t,decode:t,buffer:!1,type:"id"},e.id=e.none;var r=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(const s of r)e[s]={encode:function(u){return n(u)?u:o.from(u,s)},decode:function(u){return u.toString(s)},buffer:!0,type:s};function t(s){return s}function n(s){return s==null||o.isBuffer(s)}}}),require_level_codec=__commonJS({"node_modules/level-codec/index.js"(e,o){init_node_globals();var r=require_encodings(),t=new Set(["lt","gt","lte","gte"]);o.exports=n;function n(s){if(!(this instanceof n))return new n(s);this.opts=s||{},this.encodings=r}n.prototype._encoding=function(s){return typeof s=="string"&&(s=r[s]),s||(s=r.id),s},n.prototype._keyEncoding=function(s,u){return this._encoding(u&&u.keyEncoding||s&&s.keyEncoding||this.opts.keyEncoding)},n.prototype._valueEncoding=function(s,u){return this._encoding(u&&(u.valueEncoding||u.encoding)||s&&(s.valueEncoding||s.encoding)||this.opts.valueEncoding||this.opts.encoding)},n.prototype.encodeKey=function(s,u,l){return this._keyEncoding(u,l).encode(s)},n.prototype.encodeValue=function(s,u,l){return this._valueEncoding(u,l).encode(s)},n.prototype.decodeKey=function(s,u){return this._keyEncoding(u).decode(s)},n.prototype.decodeValue=function(s,u){return this._valueEncoding(u).decode(s)},n.prototype.encodeBatch=function(s,u){return s.map(l=>{const f={type:l.type,key:this.encodeKey(l.key,u,l)};return this.keyAsBuffer(u,l)&&(f.keyEncoding="binary"),l.prefix&&(f.prefix=l.prefix),"value"in l&&(f.value=this.encodeValue(l.value,u,l),this.valueAsBuffer(u,l)&&(f.valueEncoding="binary")),f})},n.prototype.encodeLtgt=function(s){const u={};for(const l of Object.keys(s)){if(l==="start"||l==="end")throw new Error('Legacy range options ("start" and "end") have been removed');u[l]=t.has(l)?this.encodeKey(s[l],s):s[l]}return u},n.prototype.createStreamDecoder=function(s){return s.keys&&s.values?(u,l)=>({key:this.decodeKey(u,s),value:this.decodeValue(l,s)}):s.keys?u=>this.decodeKey(u,s):s.values?(u,l)=>this.decodeValue(l,s):function(){}},n.prototype.keyAsBuffer=function(s){return this._keyEncoding(s).buffer},n.prototype.valueAsBuffer=function(s){return this._valueEncoding(s).buffer}}}),require_encoding_down=__commonJS({"node_modules/encoding-down/index.js"(e,o){init_node_globals();var r=require_abstract_leveldown2().AbstractLevelDOWN,t=require_abstract_leveldown2().AbstractChainedBatch,n=require_abstract_leveldown2().AbstractIterator,s=require_inherits_browser(),u=require_level_codec(),l=require_errors2().EncodingError,f=["approximateSize","compactRange"];o.exports=a;function a(h,g){if(!(this instanceof a))return new a(h,g);const p=h.supports||{},_=p.additionalMethods||{};r.call(this,p),this.supports.encodings=!0,this.supports.additionalMethods={},f.forEach(function(m){const v=typeof h[m]=="function";(_[m]||v)&&(this.supports.additionalMethods[m]=!0,this[m]=function(w,y,b,T){return w=this.codec.encodeKey(w,b),y=this.codec.encodeKey(y,b),this.db[m](w,y,b,T)})},this),g=g||{},typeof g.keyEncoding=="undefined"&&(g.keyEncoding="utf8"),typeof g.valueEncoding=="undefined"&&(g.valueEncoding="utf8"),this.db=h,this.codec=new u(g)}s(a,r),a.prototype.type="encoding-down",a.prototype._serializeKey=a.prototype._serializeValue=function(h){return h},a.prototype._open=function(h,g){this.db.open(h,g)},a.prototype._close=function(h){this.db.close(h)},a.prototype._put=function(h,g,p,_){h=this.codec.encodeKey(h,p),g=this.codec.encodeValue(g,p),this.db.put(h,g,p,_)},a.prototype._get=function(h,g,p){h=this.codec.encodeKey(h,g),g.asBuffer=this.codec.valueAsBuffer(g),this.db.get(h,g,(_,m)=>{if(_)return p(_);try{m=this.codec.decodeValue(m,g)}catch(v){return p(new l(v))}p(null,m)})},a.prototype._getMany=function(h,g,p){h=h.map(_=>this.codec.encodeKey(_,g)),g.asBuffer=this.codec.valueAsBuffer(g),this.db.getMany(h,g,(_,m)=>{if(_)return p(_);const v=new Array(m.length);for(let w=0;w<m.length;w++){if(m[w]===void 0){v[w]=void 0;continue}try{v[w]=this.codec.decodeValue(m[w],g)}catch(y){return p(new l(y))}}p(null,v)})},a.prototype._del=function(h,g,p){h=this.codec.encodeKey(h,g),this.db.del(h,g,p)},a.prototype._chainedBatch=function(){return new d(this)},a.prototype._batch=function(h,g,p){h=this.codec.encodeBatch(h,g),this.db.batch(h,g,p)},a.prototype._iterator=function(h){return h.keyAsBuffer=this.codec.keyAsBuffer(h),h.valueAsBuffer=this.codec.valueAsBuffer(h),new c(this,h)},a.prototype._clear=function(h,g){h=this.codec.encodeLtgt(h),this.db.clear(h,g)};function c(h,g){n.call(this,h),this.codec=h.codec,this.keys=g.keys,this.values=g.values,this.opts=this.codec.encodeLtgt(g),this.it=h.db.iterator(this.opts)}s(c,n),c.prototype._next=function(h){this.it.next((g,p,_)=>{if(g)return h(g);try{this.keys&&typeof p!="undefined"?p=this.codec.decodeKey(p,this.opts):p=void 0,this.values&&typeof _!="undefined"?_=this.codec.decodeValue(_,this.opts):_=void 0}catch(m){return h(new l(m))}h(null,p,_)})},c.prototype._seek=function(h){h=this.codec.encodeKey(h,this.opts),this.it.seek(h)},c.prototype._end=function(h){this.it.end(h)};function d(h,g){t.call(this,h),this.codec=h.codec,this.batch=h.db.batch()}s(d,t),d.prototype._put=function(h,g,p){h=this.codec.encodeKey(h,p),g=this.codec.encodeValue(g,p),this.batch.put(h,g)},d.prototype._del=function(h,g){h=this.codec.encodeKey(h,g),this.batch.del(h)},d.prototype._clear=function(){this.batch.clear()},d.prototype._write=function(h,g){this.batch.write(h,g)}}}),require_level_packager=__commonJS({"node_modules/level-packager/level-packager.js"(e,o){init_node_globals();var r=require_levelup(),t=require_encoding_down();function n(s){function u(f,a,c){return typeof f=="function"?c=f:typeof a=="function"&&(c=a),l(a)||(a=l(f)?f:{}),r(t(s(f,a),a),a,c)}function l(f){return typeof f=="object"&&f!==null}for(const f of["destroy","repair"])typeof s[f]=="function"&&(u[f]=function(...a){s[f](...a)});return u.errors=r.errors,u}o.exports=n}}),require_run_parallel_limit=__commonJS({"node_modules/run-parallel-limit/index.js"(e,o){init_node_globals(),o.exports=t;var r=require_queue_microtask();function t(n,s,u){if(typeof s!="number")throw new Error("second argument must be a Number");let l,f,a,c,d,h=!0,g;Array.isArray(n)?(l=[],a=f=n.length):(c=Object.keys(n),l={},a=f=c.length);function p(m){function v(){u&&u(m,l),u=null}h?r(v):v()}function _(m,v,w){if(l[m]=w,v&&(d=!0),--a==0||v)p(v);else if(!d&&g<f){let y;c?(y=c[g],g+=1,n[y](function(b,T){_(y,b,T)})):(y=g,g+=1,n[y](function(b,T){_(y,b,T)}))}}g=s,a?c?c.some(function(m,v){return n[m](function(w,y){_(m,w,y)}),v===s-1}):n.some(function(m,v){return m(function(w,y){_(v,w,y)}),v===s-1}):p(null),h=!1}}}),require_ltgt=__commonJS({"node_modules/ltgt/index.js"(e){init_node_globals(),e.compare=function(g,p){if(Buffer.isBuffer(g)){for(var _=Math.min(g.length,p.length),m=0;m<_;m++){var v=g[m]-p[m];if(v)return v}return g.length-p.length}return g<p?-1:g>p?1:0};function o(g){return g!==void 0&&g!==""}function r(g,p){return Object.hasOwnProperty.call(g,p)}function t(g,p){return Object.hasOwnProperty.call(g,p)&&p}var n=e.lowerBoundKey=function(g){return t(g,"gt")||t(g,"gte")||t(g,"min")||(g.reverse?t(g,"end"):t(g,"start"))||void 0},s=e.lowerBound=function(g,p){var _=n(g);return _?g[_]:p},u=e.lowerBoundInclusive=function(g){return!r(g,"gt")},l=e.upperBoundInclusive=function(g){return!r(g,"lt")},f=e.lowerBoundExclusive=function(g){return!u(g)},a=e.upperBoundExclusive=function(g){return!l(g)},c=e.upperBoundKey=function(g){return t(g,"lt")||t(g,"lte")||t(g,"max")||(g.reverse?t(g,"start"):t(g,"end"))||void 0},d=e.upperBound=function(g,p){var _=c(g);return _?g[_]:p};e.start=function(g,p){return g.reverse?d(g,p):s(g,p)},e.end=function(g,p){return g.reverse?s(g,p):d(g,p)},e.startInclusive=function(g){return g.reverse?l(g):u(g)},e.endInclusive=function(g){return g.reverse?u(g):l(g)};function h(g){return g}e.toLtgt=function(g,p,_,m,v){p=p||{},_=_||h;var w=arguments.length>3,y=e.lowerBoundKey(g),b=e.upperBoundKey(g);return y?y==="gt"?p.gt=_(g.gt,!1):p.gte=_(g[y],!1):w&&(p.gte=_(m,!1)),b?b==="lt"?p.lt=_(g.lt,!0):p.lte=_(g[b],!0):w&&(p.lte=_(v,!0)),g.reverse!=null&&(p.reverse=!!g.reverse),r(p,"max")&&delete p.max,r(p,"min")&&delete p.min,r(p,"start")&&delete p.start,r(p,"end")&&delete p.end,p},e.contains=function(g,p,_){_=_||e.compare;var m=s(g);if(o(m)){var v=_(p,m);if(v<0||v===0&&f(g))return!1}var w=d(g);if(o(w)){var v=_(p,w);if(v>0||v===0&&a(g))return!1}return!0},e.filter=function(g,p){return function(_){return e.contains(g,_,p)}}}}),require_key_range=__commonJS({"node_modules/level-js/util/key-range.js"(e,o){init_node_globals();var r=require_ltgt(),t=Symbol("none");o.exports=function(s){const u=r.lowerBound(s,t),l=r.upperBound(s,t),f=r.lowerBoundExclusive(s,t),a=r.upperBoundExclusive(s,t);return u!==t&&l!==t?IDBKeyRange.bound(u,l,f,a):u!==t?IDBKeyRange.lowerBound(u,f):l!==t?IDBKeyRange.upperBound(l,a):null}}}),require_deserialize=__commonJS({"node_modules/level-js/util/deserialize.js"(e,o){init_node_globals();var r=require_buffer().Buffer,t=function(){if(global.TextDecoder){const u=new TextDecoder("utf-8");return u.decode.bind(u)}else return function(l){return s(l).toString()}}(),n=function(){if(global.TextDecoder){const u=new TextDecoder("utf-8");return u.decode.bind(u)}else return function(l){return r.from(l).toString()}}();function s(u){const l=r.from(u.buffer);return u.byteLength===u.buffer.byteLength?l:l.slice(u.byteOffset,u.byteOffset+u.byteLength)}o.exports=function(u,l){return u instanceof Uint8Array?l?s(u):t(u):u instanceof ArrayBuffer?l?r.from(u):n(u):l?r.from(String(u)):String(u)}}}),require_iterator=__commonJS({"node_modules/level-js/iterator.js"(e,o){init_node_globals();var r=require_inherits_browser(),t=require_abstract_leveldown2().AbstractIterator,n=require_key_range(),s=require_deserialize(),u=function(){};o.exports=l;function l(f,a,c){if(t.call(this,f),this._limit=c.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=c.keys,this._values=c.values,this._keyAsBuffer=c.keyAsBuffer,this._valueAsBuffer=c.valueAsBuffer,this._limit===0){this._completed=!0;return}let d;try{d=n(c)}catch{this._completed=!0;return}this.createIterator(a,d,c.reverse)}r(l,t),l.prototype.createIterator=function(f,a,c){const d=this.db.db.transaction([f],"readonly"),g=d.objectStore(f).openCursor(a,c?"prev":"next");g.onsuccess=p=>{const _=p.target.result;_&&this.onItem(_)},this._transaction=d,d.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},d.oncomplete=()=>{this.onComplete()}},l.prototype.onItem=function(f){this._cache.push(f.key,f.value),(this._limit<=0||++this._count<this._limit)&&f.continue(),this.maybeNext()},l.prototype.onAbort=function(f){this._aborted=!0,this._error=f,this.maybeNext()},l.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},l.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},l.prototype._next=function(f){if(this._aborted){const a=this._error;this._error=null,this._nextTick(f,a)}else if(this._cache.length>0){let a=this._cache.shift(),c=this._cache.shift();this._keys&&a!==void 0?a=this._deserializeKey(a,this._keyAsBuffer):a=void 0,this._values&&c!==void 0?c=this._deserializeValue(c,this._valueAsBuffer):c=void 0,this._nextTick(f,null,a,c)}else this._completed?this._nextTick(f):this._callback=f},l.prototype._deserializeKey=s,l.prototype._deserializeValue=s,l.prototype._end=function(f){if(this._aborted||this._completed)return this._nextTick(f,this._error);this.onItem=u,this.onAbort=f,this.onComplete=f}}}),require_serialize=__commonJS({"node_modules/level-js/util/serialize.js"(e,o){init_node_globals();var r=require_buffer().Buffer,t=function(){if(global.TextEncoder){const n=new TextEncoder("utf-8");return n.encode.bind(n)}else return r.from}();o.exports=function(n,s){return s?r.isBuffer(n)?n:t(String(n)):String(n)}}}),require_support=__commonJS({"node_modules/level-js/util/support.js"(e){init_node_globals();var o=require_buffer().Buffer;e.test=function(r){return function(n){try{return n.cmp(r,0),!0}catch{return!1}}},e.bufferKeys=e.test(o.alloc(0))}}),require_clear2=__commonJS({"node_modules/level-js/util/clear.js"(e,o){init_node_globals(),o.exports=function(t,n,s,u,l){if(u.limit===0)return t._nextTick(l);const f=t.db.transaction([n],"readwrite"),a=f.objectStore(n);let c=0;f.oncomplete=function(){l()},f.onabort=function(){l(f.error||new Error("aborted by user"))};const d=a.openKeyCursor?"openKeyCursor":"openCursor",h=u.reverse?"prev":"next";a[d](s,h).onsuccess=function(g){const p=g.target.result;p&&(a.delete(p.key).onsuccess=function(){(u.limit<=0||++c<u.limit)&&p.continue()})}}}}),require_level_js=__commonJS({"node_modules/level-js/index.js"(e,o){init_node_globals(),o.exports=h;var r=require_abstract_leveldown2().AbstractLevelDOWN,t=require_inherits_browser(),n=require_run_parallel_limit(),s=require_iterator(),u=require_serialize(),l=require_deserialize(),f=require_support(),a=require_clear2(),c=require_key_range(),d="level-js-";function h(g,p){if(!(this instanceof h))return new h(g,p);if(r.call(this,{bufferKeys:f.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),p=p||{},typeof g!="string")throw new Error("constructor requires a location string argument");this.location=g,this.prefix=p.prefix==null?d:p.prefix,this.version=parseInt(p.version||1,10)}t(h,r),h.prototype.type="level-js",h.prototype._open=function(g,p){const _=indexedDB.open(this.prefix+this.location,this.version);_.onerror=function(){p(_.error||new Error("unknown error"))},_.onsuccess=()=>{this.db=_.result,p()},_.onupgradeneeded=m=>{const v=m.target.result;v.objectStoreNames.contains(this.location)||v.createObjectStore(this.location)}},h.prototype.store=function(g){return this.db.transaction([this.location],g).objectStore(this.location)},h.prototype.await=function(g,p){const _=g.transaction;_.onabort=function(){p(_.error||new Error("aborted by user"))},_.oncomplete=function(){p(null,g.result)}},h.prototype._get=function(g,p,_){const m=this.store("readonly");let v;try{v=m.get(g)}catch(w){return this._nextTick(_,w)}this.await(v,function(w,y){if(w)return _(w);if(y===void 0)return _(new Error("NotFound"));_(null,l(y,p.asBuffer))})},h.prototype._getMany=function(g,p,_){const m=p.asBuffer,v=this.store("readonly"),w=g.map(y=>b=>{let T;try{T=v.get(y)}catch(R){return b(R)}T.onsuccess=()=>{const R=T.result;b(null,R===void 0?R:l(R,m))},T.onerror=R=>{R.stopPropagation(),b(T.error)}});n(w,16,_)},h.prototype._del=function(g,p,_){const m=this.store("readwrite");let v;try{v=m.delete(g)}catch(w){return this._nextTick(_,w)}this.await(v,_)},h.prototype._put=function(g,p,_,m){const v=this.store("readwrite");let w;try{w=v.put(p,g)}catch(y){return this._nextTick(m,y)}this.await(w,m)},h.prototype._serializeKey=function(g){return u(g,this.supports.bufferKeys)},h.prototype._serializeValue=function(g){return u(g,!0)},h.prototype._iterator=function(g){return new s(this,this.location,g)},h.prototype._batch=function(g,p,_){if(g.length===0)return this._nextTick(_);const m=this.store("readwrite"),v=m.transaction;let w=0,y;v.onabort=function(){_(y||v.error||new Error("aborted by user"))},v.oncomplete=function(){_()};function b(){const T=g[w++],R=T.key;let S;try{S=T.type==="del"?m.delete(R):m.put(T.value,R)}catch(E){y=E,v.abort();return}w<g.length&&(S.onsuccess=b)}b()},h.prototype._clear=function(g,p){let _,m;try{_=c(g)}catch{return this._nextTick(p)}if(g.limit>=0)return a(this,this.location,_,g,p);try{const v=this.store("readwrite");m=_?v.delete(_):v.clear()}catch(v){return this._nextTick(p,v)}this.await(m,p)},h.prototype._close=function(g){this.db.close(),this._nextTick(g)},h.prototype.upgrade=function(g){if(this.status!=="open")return this._nextTick(g,new Error("cannot upgrade() before open()"));const p=this.iterator(),_={},m=this;p._deserializeKey=p._deserializeValue=b,v();function v(T){if(T)return y(T);p.next(w)}function w(T,R,S){if(T||R===void 0)return y(T);const E=m._serializeKey(l(R,!0)),A=m._serializeValue(l(S,!0));m._batch([{type:"del",key:R},{type:"put",key:E,value:A}],_,v)}function y(T){p.end(function(R){g(T||R)})}function b(T){return T}},h.destroy=function(g,p,_){typeof p=="function"&&(_=p,p=d);const m=indexedDB.deleteDatabase(p+g);m.onsuccess=function(){_()},m.onerror=function(v){_(v)}}}}),require_browser6=__commonJS({"node_modules/level/browser.js"(e,o){init_node_globals(),o.exports=require_level_packager()(require_level_js())}});function levelIteratorToIterator(e){return{[Symbol.asyncIterator](){return{next:()=>new Promise((o,r)=>{e.next((t,n,s)=>{if(t)return r(t);if(n==null)return e.end(u=>{if(u)return r(u);o({done:!0,value:void 0})});o({done:!1,value:{key:new Key(n,!1),value:s}})})}),return:()=>new Promise((o,r)=>{e.end(t=>{if(t)return r(t);o({done:!0,value:void 0})})})}}}}var import_it_filter5,import_it_map6,import_it_take3,import_it_sort,import_level3,LevelDatastore,init_src12=__esm({"node_modules/datastore-level/esm/src/index.js"(){init_node_globals(),init_src5(),init_src6(),import_it_filter5=__toESM(require_it_filter(),1),import_it_map6=__toESM(require_it_map(),1),import_it_take3=__toESM(require_it_take(),1),import_it_sort=__toESM(require_it_sort(),1),import_level3=__toESM(require_browser6(),1),LevelDatastore=class extends BaseDatastore{constructor(e,o){super();this.path=e,this.opts=o,o&&o.db?(this.database=o.db,delete o.db):this.database=import_level3.default}_initDb(){return new Promise((e,o)=>{this.db=this.database(this.path,$e(Re({},this.opts),{valueEncoding:"binary",compression:!1}),r=>{if(r)return o(r);e(this.db)})})}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(e){throw Errors.dbOpenFailedError(e)}}async put(e,o){try{await this.db.put(e.toString(),o)}catch(r){throw Errors.dbWriteFailedError(r)}}async get(e){let o;try{o=await this.db.get(e.toString())}catch(r){throw r.notFound?Errors.notFoundError(r):Errors.dbWriteFailedError(r)}return o}async has(e){try{await this.db.get(e.toString())}catch(o){if(o.notFound)return!1;throw o}return!0}async delete(e){try{await this.db.del(e.toString())}catch(o){throw Errors.dbDeleteFailedError(o)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(o,r)=>{e.push({type:"put",key:o.toString(),value:r})},delete:o=>{e.push({type:"del",key:o.toString()})},commit:()=>this.db.batch(e)}}query(e){let o=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(o=e.filters.reduce((n,s)=>(0,import_it_filter5.default)(n,s),o)),Array.isArray(e.orders)&&(o=e.orders.reduce((n,s)=>(0,import_it_sort.default)(n,s),o));const{offset:r,limit:t}=e;if(r){let n=0;o=(0,import_it_filter5.default)(o,()=>n++>=r)}return t&&(o=(0,import_it_take3.default)(o,t)),o}queryKeys(e){let o=(0,import_it_map6.default)(this._query({values:!1,prefix:e.prefix}),({key:n})=>n);Array.isArray(e.filters)&&(o=e.filters.reduce((n,s)=>(0,import_it_filter5.default)(n,s),o)),Array.isArray(e.orders)&&(o=e.orders.reduce((n,s)=>(0,import_it_sort.default)(n,s),o));const{offset:r,limit:t}=e;if(r){let n=0;o=(0,import_it_filter5.default)(o,()=>n++>=r)}return t&&(o=(0,import_it_take3.default)(o,t)),o}_query(e){const o={keys:!0,keyAsBuffer:!0,values:e.values};if(e.prefix!=null){const r=e.prefix.toString();o.gte=r,o.lt=r+"\xFF"}return levelIteratorToIterator(this.db.iterator(o))}}}}),import_it_drain4,import_it_filter6,import_it_take4,import_it_all4,sortAll2,BaseBlockstore,init_base4=__esm({"node_modules/blockstore-core/esm/src/base.js"(){init_node_globals(),import_it_drain4=__toESM(require_it_drain(),1),import_it_filter6=__toESM(require_it_filter(),1),import_it_take4=__toESM(require_it_take(),1),import_it_all4=__toESM(require_it_all(),1),sortAll2=(e,o)=>async function*(){yield*(await(0,import_it_all4.default)(e)).sort(o)}(),BaseBlockstore=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,o,r){return Promise.reject(new Error(".put is not implemented"))}get(e,o){return Promise.reject(new Error(".get is not implemented"))}has(e,o){return Promise.reject(new Error(".has is not implemented"))}delete(e,o){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,o={}){for await(const{key:r,value:t}of e)await this.put(r,t,o),yield{key:r,value:t}}async*getMany(e,o={}){for await(const r of e)yield this.get(r,o)}async*deleteMany(e,o={}){for await(const r of e)await this.delete(r,o),yield r}batch(){let e=[],o=[];return{put(r,t){e.push({key:r,value:t})},delete(r){o.push(r)},commit:async r=>{await(0,import_it_drain4.default)(this.putMany(e,r)),e=[],await(0,import_it_drain4.default)(this.deleteMany(o,r)),o=[]}}}async*_all(e,o){throw new Error("._all is not implemented")}async*_allKeys(e,o){throw new Error("._allKeys is not implemented")}query(e,o){let r=this._all(e,o);if(e.prefix!=null&&(r=(0,import_it_filter6.default)(r,t=>t.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((t,n)=>(0,import_it_filter6.default)(t,n),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((t,n)=>sortAll2(t,n),r)),e.offset!=null){let t=0;r=(0,import_it_filter6.default)(r,()=>t++>=(e.offset||0))}return e.limit!=null&&(r=(0,import_it_take4.default)(r,e.limit)),r}queryKeys(e,o){let r=this._allKeys(e,o);if(e.prefix!=null&&(r=(0,import_it_filter6.default)(r,t=>t.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((t,n)=>(0,import_it_filter6.default)(t,n),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((t,n)=>sortAll2(t,n),r)),e.offset!=null){let t=0;r=(0,import_it_filter6.default)(r,()=>t++>=e.offset)}return e.limit!=null&&(r=(0,import_it_take4.default)(r,e.limit)),r}}}});function cidToKey3(e){const o=CID.asCID(e);if(!o)throw(0,import_err_code29.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Key("/"+base32.encode(o.multihash.bytes).slice(1).toUpperCase(),!1)}function keyToCid2(e){return CID.createV1(code6,decode3(base32.decode("b"+e.toString().slice(1).toLowerCase())))}function convertPrefix(e){const o=e.substring(0,1);if(o==="/")return convertPrefix(e.substring(1));let r;o.toLowerCase()==="b"?r=s=>base32.decode(s.toLowerCase()).subarray(2):o.toLowerCase()==="c"?r=s=>base32pad.decode(s.toLowerCase()).subarray(2):o==="z"?r=s=>base58btc.decode(s).subarray(2):o==="Q"?r=s=>base58btc.decode("z"+s):r=s=>base32.decode("b"+s.toLowerCase()).subarray(2);let t;for(let s=1;s<e.length;s++)try{t=r(e.substring(0,s))}catch(u){if(u.message!=="Unexpected end of data")throw u}let n="/C";return t&&(n=`/${base32.encode(t).slice(1,-1).toUpperCase()||"C"}`),n}function convertQuery(e){return $e(Re({},e),{prefix:e.prefix?convertPrefix(e.prefix):void 0,filters:e.filters?e.filters.map(o=>r=>o({key:keyToCid2(r.key),value:r.value})):void 0,orders:e.orders?e.orders.map(o=>(r,t)=>o({key:keyToCid2(r.key),value:r.value},{key:keyToCid2(t.key),value:t.value})):void 0})}function convertKeyQuery(e){return $e(Re({},e),{prefix:e.prefix?convertPrefix(e.prefix):void 0,filters:e.filters?e.filters.map(o=>r=>o(keyToCid2(r))):void 0,orders:e.orders?e.orders.map(o=>(r,t)=>o(keyToCid2(r),keyToCid2(t))):void 0})}var import_it_drain5,import_it_pushable3,import_err_code29,BlockstoreDatastoreAdapter,init_src13=__esm({"node_modules/blockstore-datastore-adapter/esm/src/index.js"(){init_node_globals(),import_it_drain5=__toESM(require_it_drain(),1),import_it_pushable3=__toESM(require_it_pushable(),1),init_key(),init_cid(),init_raw(),init_digest(),init_base32(),init_base58(),import_err_code29=__toESM(require_err_code(),1),init_base4(),BlockstoreDatastoreAdapter=class extends BaseBlockstore{constructor(e){super();this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,o){for await(const{key:r,value:t}of this.child.query(convertQuery(e),o))yield{key:keyToCid2(r),value:t}}async*queryKeys(e,o){for await(const r of this.child.queryKeys(convertKeyQuery(e),o))yield keyToCid2(r)}async get(e,o){return this.child.get(cidToKey3(e),o)}async*getMany(e,o){for await(const r of e)yield this.get(r,o)}async put(e,o,r){await this.child.put(cidToKey3(e),o,r)}async*putMany(e,o){const r=(0,import_it_pushable3.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{const n=this.child;await(0,import_it_drain5.default)(this.child.putMany(async function*(){for await(const s of e){const u=cidToKey3(s.key);await n.has(u,o)||(yield{key:u,value:s.value}),r.push(s)}}())),r.end()}catch(n){r.end(n)}}),yield*r}has(e,o){return this.child.has(cidToKey3(e),o)}delete(e,o){return this.child.delete(cidToKey3(e),o)}deleteMany(e,o){const r=(0,import_it_pushable3.default)();return(0,import_it_drain5.default)(this.child.deleteMany(async function*(){for await(const t of e)yield cidToKey3(t),r.push(t);r.end()}(),o)).catch(t=>{r.end(t)}),r}}}}),repo_browser_exports={};__export(repo_browser_exports,{createRepo:()=>createRepo2});function createRepo2(e,o,r){const t=r.path||"ipfs";return createRepo(t,n=>o.getCodec(n),{root:new LevelDatastore(t,{prefix:"",version:2}),blocks:new BlockstoreDatastoreAdapter(new LevelDatastore(`${t}/blocks`,{prefix:"",version:2})),datastore:new LevelDatastore(`${t}/datastore`,{prefix:"",version:2}),keys:new LevelDatastore(`${t}/keys`,{prefix:"",version:2}),pins:new LevelDatastore(`${t}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:MemoryLock})}var init_repo_browser=__esm({"node_modules/ipfs-core-config/esm/src/repo.browser.js"(){init_node_globals(),init_src11(),init_src12(),init_src13(),init_memory2()}}),require_topology=__commonJS({"node_modules/libp2p-interfaces/src/topology/index.js"(e,o){init_node_globals();var r=()=>{},t=Symbol.for("@libp2p/js-interfaces/topology"),n=class{constructor({min:s=0,max:u=1/0,handlers:l={}}){this.min=s,this.max=u,this._onConnect=l.onConnect||r,this._onDisconnect=l.onDisconnect||r,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[t](){return!0}static isTopology(s){return Boolean(s&&s[t])}async setRegistrar(s){this._registrar=s}disconnect(s){this._onDisconnect(s)}};o.exports=n}}),require_multicodec_topology=__commonJS({"node_modules/libp2p-interfaces/src/topology/multicodec-topology.js"(e,o){init_node_globals();var r=require_topology(),t=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),n=require_browser2(),s=Object.assign(n("libp2p:topology:multicodec-topology"),{error:n("libp2p:topology:multicodec-topology:error")}),u=class extends r{constructor({min:l,max:f,multicodecs:a,handlers:c}){super({min:l,max:f,handlers:c});if(!a)throw new Error("one or more multicodec should be provided");if(!c)throw new Error("the handlers should be provided");if(typeof c.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof c.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(a)?a:[a],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[t](){return!0}static isMulticodecTopology(l){return Boolean(l&&l[t])}async setRegistrar(l){this._registrar=l,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),await this._updatePeers(this._registrar.peerStore.getPeers())}async _updatePeers(l){for await(const{id:f,protocols:a}of l)if(this.multicodecs.filter(c=>a.includes(c)).length){this.peers.add(f.toB58String());const c=this._registrar.getConnection(f);c&&this._onConnect(f,c)}else this.peers.delete(f.toB58String())}async _onProtocolChange({peerId:l,protocols:f}){try{const a=this.peers.has(l.toB58String()),c=f.filter(d=>this.multicodecs.includes(d));a&&c.length===0&&this._onDisconnect(l);for(const d of f)if(this.multicodecs.includes(d)){const h=await this._registrar.peerStore.get(l);await this._updatePeers([h]);return}}catch(a){s.error(a)}}async _onPeerConnect(l){try{const f=l.remotePeer,a=await this._registrar.peerStore.protoBook.get(f);if(!a)return;this.multicodecs.find(c=>a.includes(c))&&(this.peers.add(f.toB58String()),this._onConnect(f,l))}catch(f){s.error(f)}}};o.exports=u}}),require_errors3=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/errors.js"(e){init_node_globals(),e.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}}}),require_rpc2=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/message/rpc.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-pubsub-rpc"]||(r.roots["libp2p-pubsub-rpc"]={});u.RPC=function(){function l(f){if(this.subscriptions=[],this.msgs=[],f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.subscriptions=s.emptyArray,l.prototype.msgs=s.emptyArray,l.encode=function(a,c){if(c||(c=n.create()),a.subscriptions!=null&&a.subscriptions.length)for(var d=0;d<a.subscriptions.length;++d)u.RPC.SubOpts.encode(a.subscriptions[d],c.uint32(10).fork()).ldelim();if(a.msgs!=null&&a.msgs.length)for(var d=0;d<a.msgs.length;++d)u.RPC.Message.encode(a.msgs[d],c.uint32(18).fork()).ldelim();return c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.RPC;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.subscriptions&&h.subscriptions.length||(h.subscriptions=[]),h.subscriptions.push(u.RPC.SubOpts.decode(a,a.uint32()));break;case 2:h.msgs&&h.msgs.length||(h.msgs=[]),h.msgs.push(u.RPC.Message.decode(a,a.uint32()));break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.RPC)return a;var c=new u.RPC;if(a.subscriptions){if(!Array.isArray(a.subscriptions))throw TypeError(".RPC.subscriptions: array expected");c.subscriptions=[];for(var d=0;d<a.subscriptions.length;++d){if(typeof a.subscriptions[d]!="object")throw TypeError(".RPC.subscriptions: object expected");c.subscriptions[d]=u.RPC.SubOpts.fromObject(a.subscriptions[d])}}if(a.msgs){if(!Array.isArray(a.msgs))throw TypeError(".RPC.msgs: array expected");c.msgs=[];for(var d=0;d<a.msgs.length;++d){if(typeof a.msgs[d]!="object")throw TypeError(".RPC.msgs: object expected");c.msgs[d]=u.RPC.Message.fromObject(a.msgs[d])}}return c},l.toObject=function(a,c){c||(c={});var d={};if((c.arrays||c.defaults)&&(d.subscriptions=[],d.msgs=[]),a.subscriptions&&a.subscriptions.length){d.subscriptions=[];for(var h=0;h<a.subscriptions.length;++h)d.subscriptions[h]=u.RPC.SubOpts.toObject(a.subscriptions[h],c)}if(a.msgs&&a.msgs.length){d.msgs=[];for(var h=0;h<a.msgs.length;++h)d.msgs[h]=u.RPC.Message.toObject(a.msgs[h],c)}return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.SubOpts=function(){function f(c){if(c)for(var d=Object.keys(c),h=0;h<d.length;++h)c[d[h]]!=null&&(this[d[h]]=c[d[h]])}f.prototype.subscribe=null,f.prototype.topicID=null;var a;return Object.defineProperty(f.prototype,"_subscribe",{get:s.oneOfGetter(a=["subscribe"]),set:s.oneOfSetter(a)}),Object.defineProperty(f.prototype,"_topicID",{get:s.oneOfGetter(a=["topicID"]),set:s.oneOfSetter(a)}),f.encode=function(d,h){return h||(h=n.create()),d.subscribe!=null&&Object.hasOwnProperty.call(d,"subscribe")&&h.uint32(8).bool(d.subscribe),d.topicID!=null&&Object.hasOwnProperty.call(d,"topicID")&&h.uint32(18).string(d.topicID),h},f.decode=function(d,h){d instanceof t||(d=t.create(d));for(var g=h===void 0?d.len:d.pos+h,p=new u.RPC.SubOpts;d.pos<g;){var _=d.uint32();switch(_>>>3){case 1:p.subscribe=d.bool();break;case 2:p.topicID=d.string();break;default:d.skipType(_&7);break}}return p},f.fromObject=function(d){if(d instanceof u.RPC.SubOpts)return d;var h=new u.RPC.SubOpts;return d.subscribe!=null&&(h.subscribe=Boolean(d.subscribe)),d.topicID!=null&&(h.topicID=String(d.topicID)),h},f.toObject=function(d,h){h||(h={});var g={};return d.subscribe!=null&&d.hasOwnProperty("subscribe")&&(g.subscribe=d.subscribe,h.oneofs&&(g._subscribe="subscribe")),d.topicID!=null&&d.hasOwnProperty("topicID")&&(g.topicID=d.topicID,h.oneofs&&(g._topicID="topicID")),g},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f}(),l.Message=function(){function f(c){if(this.topicIDs=[],c)for(var d=Object.keys(c),h=0;h<d.length;++h)c[d[h]]!=null&&(this[d[h]]=c[d[h]])}f.prototype.from=null,f.prototype.data=null,f.prototype.seqno=null,f.prototype.topicIDs=s.emptyArray,f.prototype.signature=null,f.prototype.key=null;var a;return Object.defineProperty(f.prototype,"_from",{get:s.oneOfGetter(a=["from"]),set:s.oneOfSetter(a)}),Object.defineProperty(f.prototype,"_data",{get:s.oneOfGetter(a=["data"]),set:s.oneOfSetter(a)}),Object.defineProperty(f.prototype,"_seqno",{get:s.oneOfGetter(a=["seqno"]),set:s.oneOfSetter(a)}),Object.defineProperty(f.prototype,"_signature",{get:s.oneOfGetter(a=["signature"]),set:s.oneOfSetter(a)}),Object.defineProperty(f.prototype,"_key",{get:s.oneOfGetter(a=["key"]),set:s.oneOfSetter(a)}),f.encode=function(d,h){if(h||(h=n.create()),d.from!=null&&Object.hasOwnProperty.call(d,"from")&&h.uint32(10).bytes(d.from),d.data!=null&&Object.hasOwnProperty.call(d,"data")&&h.uint32(18).bytes(d.data),d.seqno!=null&&Object.hasOwnProperty.call(d,"seqno")&&h.uint32(26).bytes(d.seqno),d.topicIDs!=null&&d.topicIDs.length)for(var g=0;g<d.topicIDs.length;++g)h.uint32(34).string(d.topicIDs[g]);return d.signature!=null&&Object.hasOwnProperty.call(d,"signature")&&h.uint32(42).bytes(d.signature),d.key!=null&&Object.hasOwnProperty.call(d,"key")&&h.uint32(50).bytes(d.key),h},f.decode=function(d,h){d instanceof t||(d=t.create(d));for(var g=h===void 0?d.len:d.pos+h,p=new u.RPC.Message;d.pos<g;){var _=d.uint32();switch(_>>>3){case 1:p.from=d.bytes();break;case 2:p.data=d.bytes();break;case 3:p.seqno=d.bytes();break;case 4:p.topicIDs&&p.topicIDs.length||(p.topicIDs=[]),p.topicIDs.push(d.string());break;case 5:p.signature=d.bytes();break;case 6:p.key=d.bytes();break;default:d.skipType(_&7);break}}return p},f.fromObject=function(d){if(d instanceof u.RPC.Message)return d;var h=new u.RPC.Message;if(d.from!=null&&(typeof d.from=="string"?s.base64.decode(d.from,h.from=s.newBuffer(s.base64.length(d.from)),0):d.from.length&&(h.from=d.from)),d.data!=null&&(typeof d.data=="string"?s.base64.decode(d.data,h.data=s.newBuffer(s.base64.length(d.data)),0):d.data.length&&(h.data=d.data)),d.seqno!=null&&(typeof d.seqno=="string"?s.base64.decode(d.seqno,h.seqno=s.newBuffer(s.base64.length(d.seqno)),0):d.seqno.length&&(h.seqno=d.seqno)),d.topicIDs){if(!Array.isArray(d.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");h.topicIDs=[];for(var g=0;g<d.topicIDs.length;++g)h.topicIDs[g]=String(d.topicIDs[g])}return d.signature!=null&&(typeof d.signature=="string"?s.base64.decode(d.signature,h.signature=s.newBuffer(s.base64.length(d.signature)),0):d.signature.length&&(h.signature=d.signature)),d.key!=null&&(typeof d.key=="string"?s.base64.decode(d.key,h.key=s.newBuffer(s.base64.length(d.key)),0):d.key.length&&(h.key=d.key)),h},f.toObject=function(d,h){h||(h={});var g={};if((h.arrays||h.defaults)&&(g.topicIDs=[]),d.from!=null&&d.hasOwnProperty("from")&&(g.from=h.bytes===String?s.base64.encode(d.from,0,d.from.length):h.bytes===Array?Array.prototype.slice.call(d.from):d.from,h.oneofs&&(g._from="from")),d.data!=null&&d.hasOwnProperty("data")&&(g.data=h.bytes===String?s.base64.encode(d.data,0,d.data.length):h.bytes===Array?Array.prototype.slice.call(d.data):d.data,h.oneofs&&(g._data="data")),d.seqno!=null&&d.hasOwnProperty("seqno")&&(g.seqno=h.bytes===String?s.base64.encode(d.seqno,0,d.seqno.length):h.bytes===Array?Array.prototype.slice.call(d.seqno):d.seqno,h.oneofs&&(g._seqno="seqno")),d.topicIDs&&d.topicIDs.length){g.topicIDs=[];for(var p=0;p<d.topicIDs.length;++p)g.topicIDs[p]=d.topicIDs[p]}return d.signature!=null&&d.hasOwnProperty("signature")&&(g.signature=h.bytes===String?s.base64.encode(d.signature,0,d.signature.length):h.bytes===Array?Array.prototype.slice.call(d.signature):d.signature,h.oneofs&&(g._signature="signature")),d.key!=null&&d.hasOwnProperty("key")&&(g.key=h.bytes===String?s.base64.encode(d.key,0,d.key.length):h.bytes===Array?Array.prototype.slice.call(d.key):d.key,h.oneofs&&(g._key="key")),g},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f}(),l}(),o.exports=u}}),require_varint_encode=__commonJS({"node_modules/it-length-prefixed/src/varint-encode.js"(e,o){init_node_globals();var r=require_varint(),{Buffer:t}=require_buffer(),n=(s,u,l)=>{const f=r.encode(s,u,l);return n.bytes=r.encode.bytes,u||t.from(f)};o.exports=n}}),require_encode2=__commonJS({"node_modules/it-length-prefixed/src/encode.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=require_BufferList(),n=require_varint_encode(),s=8,u=10*1024;function l(f){f=f||{};const a=Math.max(f.poolSize||u,f.minPoolSize||s),c=f.lengthEncoder||n;return async function*(h){let g=r.alloc(a),p=0;for await(const _ of h){c(_.length,g,p);const m=g.slice(p,p+c.bytes);p+=c.bytes,g.length-p<s&&(g=r.alloc(a),p=0),yield new t().append(m).append(_)}}}l.single=(f,a)=>{a=a||{};const c=a.lengthEncoder||n;return new t([c(f.length),f.slice()])},o.exports=l,o.exports.MIN_POOL_SIZE=s,o.exports.DEFAULT_POOL_SIZE=u}}),require_varint_decode=__commonJS({"node_modules/it-length-prefixed/src/varint-decode.js"(e,o){init_node_globals();var r=require_varint(),{Buffer:t}=require_buffer(),n=u=>new Proxy({},{get:(l,f)=>f[0]==="l"?u[f]:u.get(parseInt(f))}),s=u=>{const l=r.decode(t.isBuffer(u)?u:n(u));return s.bytes=r.decode.bytes,l};o.exports=s}}),require_decode2=__commonJS({"node_modules/it-length-prefixed/src/decode.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=require_BufferList(),n=require_varint_decode(),s=8,u=1024*1024*4,l=r.alloc(0),f={LENGTH:"readLength",DATA:"readData"},a={[f.LENGTH]:(d,h,g,p)=>{h=h.append(d);let _;try{_=p.lengthDecoder(h)}catch(m){if(h.length>p.maxLengthLength)throw Object.assign(m,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(m instanceof RangeError)return{mode:f.LENGTH,buffer:h,chunk:void 0,state:void 0,data:void 0};throw m}if(_>p.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return d=h.shallowSlice(p.lengthDecoder.bytes),h=new t,p.onLength&&p.onLength(_),_<=0?(p.onData&&p.onData(l),{mode:f.LENGTH,chunk:d,buffer:h,data:l}):{mode:f.DATA,chunk:d,buffer:h,state:{dataLength:_},data:void 0}},[f.DATA]:(d,h,g,p)=>{if(h=h.append(d),!g)throw new Error("state is required");if(h.length<g.dataLength)return{mode:f.DATA,buffer:h,state:g,chunk:void 0,data:void 0};const{dataLength:_}=g,m=h.shallowSlice(0,_),v=h.length>_?h.shallowSlice(_):void 0;return h=new t,p.onData&&p.onData(m),{mode:f.LENGTH,chunk:v,buffer:h,state:void 0,data:m}}};function c(d){d=d||{};const h={lengthDecoder:d.lengthDecoder||n,maxLengthLength:d.maxLengthLength||s,maxDataLength:d.maxDataLength||u,onLength:d.onLength,onData:d.onData};return async function*(p){let _=new t,m=f.LENGTH,v;for await(const w of p){let y=w;for(;y;){const b=a[m](y,_,v,h);m=b.mode,y=b.chunk,_=b.buffer,v=b.state,b.data&&(yield b.data)}}if(_.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}c.fromReader=(d,h)=>{let g=1;const p={[Symbol.asyncIterator](){return this},next:async()=>{try{return await d.next(g)}catch(m){if(m.code==="ERR_UNDER_READ")return{done:!0,value:null};throw m}finally{g=1}}},_=m=>{g=m};return c($e(Re({},h||{}),{onLength:_}))(p)},o.exports=c,o.exports.MAX_LENGTH_LENGTH=s,o.exports.MAX_DATA_LENGTH=u}}),require_int32BE_encode=__commonJS({"node_modules/it-length-prefixed/src/int32BE-encode.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=(n,s,u)=>(s=s||r.allocUnsafe(4),s.writeInt32BE(n,u),s);t.bytes=4,o.exports=t}}),require_int32BE_decode=__commonJS({"node_modules/it-length-prefixed/src/int32BE-decode.js"(e,o){init_node_globals();var r=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};r.bytes=4,o.exports=r}}),require_src11=__commonJS({"node_modules/it-length-prefixed/src/index.js"(e){init_node_globals(),e.encode=require_encode2(),e.decode=require_decode2(),e.varintEncode=require_varint_encode(),e.varintDecode=require_varint_decode(),e.int32BEEncode=require_int32BE_encode(),e.int32BEDecode=require_int32BE_decode()}}),require_get_iterator=__commonJS({"node_modules/get-iterator/index.js"(e,o){init_node_globals(),o.exports=function(t){if(t){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}}}),require_AbortError=__commonJS({"node_modules/abortable-iterator/AbortError.js"(e,o){init_node_globals(),o.exports=class extends Error{constructor(t,n){super(t||"The operation was aborted");this.type="aborted",this.code=n||"ABORT_ERR"}}}}),require_abortable_iterator=__commonJS({"node_modules/abortable-iterator/index.js"(e,o){init_node_globals();var r=require_get_iterator(),t=require_AbortError(),n=(c,d,h)=>s(c,Array.isArray(d)?d:[{signal:d,options:h}]),s=(c,d)=>{c=r(c),d=d.map(({signal:g,options:p})=>({signal:g,options:p||{}}));async function*h(){let g;const p=()=>{g&&g()};for(const{signal:_}of d)_.addEventListener("abort",p);for(;;){let _;try{for(const{signal:v,options:w}of d)if(v.aborted){const{abortMessage:y,abortCode:b}=w;throw new t(y,b)}const m=new Promise((v,w)=>{g=()=>{const{options:y}=d.find(({signal:R})=>R.aborted),{abortMessage:b,abortCode:T}=y;w(new t(b,T))}});_=await Promise.race([m,c.next()]),g=null}catch(m){for(const{signal:y}of d)y.removeEventListener("abort",p);const v=d.find(({signal:y})=>y.aborted),w=m.type==="aborted"&&v;if(w&&v.options.onAbort&&await v.options.onAbort(c),typeof c.return=="function")try{const y=c.return();y instanceof Promise&&y.catch(b=>{v.options.onReturnError!=null&&v.options.onReturnError(b)})}catch(y){v.options.onReturnError!=null&&v.options.onReturnError(y)}if(w&&v.options.returnOnAbort)return;throw m}if(_.done)break;yield _.value}for(const{signal:_}of d)_.removeEventListener("abort",p)}return h()},u=(c,d,h)=>l(c,Array.isArray(d)?d:[{signal:d,options:h}]),l=(c,d)=>h=>c(s(h,d)),f=(c,d,h)=>a(c,Array.isArray(d)?d:[{signal:d,options:h}]),a=(c,d)=>({sink:l(c.sink,d),source:s(c.source,d)});o.exports=n,o.exports.AbortError=t,o.exports.source=n,o.exports.sink=u,o.exports.transform=u,o.exports.duplex=f}}),require_peer_streams=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/peer-streams.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p-pubsub:peer-streams"),{error:r("libp2p-pubsub:peer-streams:err")}),{EventEmitter:n}=require_events(),s=require_src11(),u=require_it_pushable(),{pipe:l}=require_it_pipe(),{source:f}=require_abortable_iterator(),a=class extends n{constructor({id:c,protocol:d}){super();this.id=c,this.protocol=d,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new AbortController,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(c){if(!this.outboundStream){const d=this.id.toB58String();throw new Error("No writable connection to "+d)}this.outboundStream.push(c)}attachInboundStream(c){return this._rawInboundStream=c,this.inboundStream=f(l(this._rawInboundStream,s.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(c){const d=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=c,this.outboundStream=u({onEnd:h=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,h&&this.emit("close")}}),l(this.outboundStream,s.encode(),this._rawOutboundStream).catch(h=>{t.error(h)}),d||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};o.exports=a}}),require_signature_policy=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/signature-policy.js"(e){init_node_globals();var o={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};e.SignaturePolicy=o}}),require_utils9=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/utils.js"(e,o){init_node_globals();var r=require_random_bytes(),{toString:t}=(init_to_string(),__toCommonJS(to_string_exports)),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports)),s=require_src5(),{sha256:u}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),l=()=>r(8),f=(p,_)=>{let m;p instanceof Uint8Array?m=s.createFromBytes(p).id:m=s.parse(p).id;const v=new Uint8Array(m.length+_.length);return v.set(m,0),v.set(_,m.length),v},a=p=>u.encode(p),c=(p,_)=>{let m;Array.isArray(_)?m=v=>_.indexOf(v)>-1:m=v=>_.has(v);for(const v of p)if(m(v))return!0;return!1},d=p=>Array.isArray(p)?p:[p],h=(p,_)=>{const m=Object.assign({},p);return p.from instanceof Uint8Array&&(m.from=t(p.from,"base58btc")),_&&(m.receivedFrom=_),m},g=p=>{const _=Object.assign({},p);return typeof p.from=="string"&&(_.from=n(p.from,"base58btc")),typeof p.data=="string"&&(_.data=n(p.data)),_};o.exports={randomSeqno:l,msgId:f,noSignMsgId:a,anyMatch:c,ensureArray:d,normalizeInRpcMessage:h,normalizeOutRpcMessage:g}}}),require_sign=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/message/sign.js"(e,o){init_node_globals();var r=require_src5(),{RPC:t}=require_rpc2(),{concat:n}=(init_concat(),__toCommonJS(concat_exports)),{fromString:s}=(init_from_string(),__toCommonJS(from_string_exports)),u=s("libp2p-pubsub:"),{normalizeOutRpcMessage:l}=require_utils9();async function f(d,h){const g=n([u,t.Message.encode(l(h)).finish()]),p=await d.privKey.sign(g);return $e(Re({},h),{signature:p,key:d.pubKey.bytes})}async function a(d){if(!d.signature)throw new Error("Message must contain a signature to be verified");if(!d.from)throw new Error("Message must contain a from property to be verified");const h=n([u,t.Message.encode($e(Re({},d),{from:r.createFromB58String(d.from).toBytes(),signature:void 0,key:void 0})).finish()]);return(await c(d)).verify(h,d.signature)}async function c(d){if(!d.from)throw new Error("Could not get the public key from the originator id");const h=r.createFromB58String(d.from);if(d.key){const g=await r.createFromPubKey(d.key);if(g.equals(h))return g.pubKey;throw new Error("Public Key does not match the originator")}else{if(h.pubKey)return h.pubKey;throw new Error("Could not get the public key from the originator id")}}o.exports={messagePublicKey:c,signMessage:f,SignPrefix:u,verifySignature:a}}}),require_pubsub2=__commonJS({"node_modules/libp2p-interfaces/src/pubsub/index.js"(e,o){init_node_globals();var r=require_browser2(),{EventEmitter:t}=require_events(),n=require_err_code(),{pipe:s}=require_it_pipe(),{default:u}=require_dist(),l=require_multicodec_topology(),{codes:f}=require_errors3(),{RPC:a}=require_rpc2(),c=require_peer_streams(),{SignaturePolicy:d}=require_signature_policy(),h=require_utils9(),{signMessage:g,verifySignature:p}=require_sign(),_=class extends t{constructor({debugName:m,multicodecs:v,libp2p:w,globalSignaturePolicy:y=d.StrictSign,canRelayMessage:b=!1,emitSelf:T=!1,messageProcessingConcurrency:R=10}){if(typeof m!="string")throw new Error("a debugname `string` is required");if(!v)throw new Error("multicodecs are required");if(!w)throw new Error("libp2p is required");super();if(this.log=Object.assign(r(m),{err:r(`${m}:error`)}),this.multicodecs=h.ensureArray(v),this._libp2p=w,this.registrar=w.registrar,this.peerId=w.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!d[y])throw n(new Error("Invalid global signature policy"),f.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=y,this.canRelayMessage=b,this.emitSelf=T,this.topicValidators=new Map,this.queue=new u({concurrency:R}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}async start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);const m=new l({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=await this.registrar.register(m),this.log("started"),this.started=!0}async stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(m=>m.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:m,stream:v,connection:w}){const y=w.remotePeer,b=y.toB58String(),T=this._addPeer(y,m),R=T.attachInboundStream(v);this._processMessages(b,R,T)}async _onPeerConnected(m,v){const w=m.toB58String();this.log("connected",w);try{const{stream:y,protocol:b}=await v.newStream(this.multicodecs);await this._addPeer(m,b).attachOutboundStream(y)}catch(y){this.log.err(y)}this._sendSubscriptions(w,Array.from(this.subscriptions),!0)}_onPeerDisconnected(m,v){const w=m.toB58String();this.log("connection ended",w,v?v.message:""),this._removePeer(m)}_addPeer(m,v){const w=m.toB58String(),y=this.peers.get(w);if(y)return y;this.log("new peer",w);const b=new c({id:m,protocol:v});return this.peers.set(w,b),b.once("close",()=>this._removePeer(m)),b}_removePeer(m){if(!m)return;const v=m.toB58String(),w=this.peers.get(v);if(!!w){w.removeAllListeners(),w.close(),this.log("delete peer",v),this.peers.delete(v);for(const y of this.topics.values())y.delete(v);return w}}async _processMessages(m,v,w){try{await s(v,async y=>{for await(const b of y){const T=b instanceof Uint8Array?b:b.slice(),R=this._decodeRpc(T);(async()=>{try{await this._processRpc(m,w,R)}catch(S){this.log.err(S)}})()}})}catch(y){this._onPeerDisconnected(w.id,y)}}async _processRpc(m,v,w){this.log("rpc from",m);const y=w.subscriptions,b=w.msgs;return y.length&&(y.forEach(T=>{this._processRpcSubOpt(m,T)}),this.emit("pubsub:subscription-change",v.id,y)),this._acceptFrom(m)?(b.length&&this.queue.addAll(b.map(T=>async()=>{if(!(this.canRelayMessage||T.topicIDs&&T.topicIDs.some(R=>this.subscriptions.has(R)))){this.log("received message we didn't subscribe to. Dropping.");return}try{const R=h.normalizeInRpcMessage(T,m);await this._processRpcMessage(R)}catch(R){this.log.err(R)}})),!0):(this.log("received message from unacceptable peer %s",m),!1)}_processRpcSubOpt(m,v){const w=v.topicID;if(!w)return;let y=this.topics.get(w);y||(y=new Set,this.topics.set(w,y)),v.subscribe?y.add(m):y.delete(m)}async _processRpcMessage(m){if(!(this.peerId.toB58String()===m.from&&!this.emitSelf)){try{await this.validate(m)}catch(v){this.log("Message is invalid, dropping it. %O",v);return}return this._emitMessage(m),this._publish(h.normalizeOutRpcMessage(m))}}_emitMessage(m){m.topicIDs.forEach(v=>{this.subscriptions.has(v)&&this.emit(v,m)})}getMsgId(m){const v=this.globalSignaturePolicy;switch(v){case d.StrictSign:return h.msgId(m.from,m.seqno);case d.StrictNoSign:return h.noSignMsgId(m.data);default:throw n(new Error("Cannot get message id: unhandled signature policy: "+v),f.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(m){return!0}_decodeRpc(m){return a.decode(m)}_encodeRpc(m){return a.encode(m).finish()}_sendRpc(m,v){const w=this.peers.get(m);if(!w||!w.isWritable){const y=`Cannot send RPC to ${m} as there is no open stream to it available`;this.log.err(y);return}w.write(this._encodeRpc(v))}_sendSubscriptions(m,v,w){return this._sendRpc(m,{subscriptions:v.map(y=>({topicID:y,subscribe:w}))})}async validate(m){const v=this.globalSignaturePolicy;switch(v){case d.StrictNoSign:if(m.from)throw n(new Error("StrictNoSigning: from should not be present"),f.ERR_UNEXPECTED_FROM);if(m.signature)throw n(new Error("StrictNoSigning: signature should not be present"),f.ERR_UNEXPECTED_SIGNATURE);if(m.key)throw n(new Error("StrictNoSigning: key should not be present"),f.ERR_UNEXPECTED_KEY);if(m.seqno)throw n(new Error("StrictNoSigning: seqno should not be present"),f.ERR_UNEXPECTED_SEQNO);break;case d.StrictSign:if(!m.signature)throw n(new Error("StrictSigning: Signing required and no signature was present"),f.ERR_MISSING_SIGNATURE);if(!m.seqno)throw n(new Error("StrictSigning: Signing required and no seqno was present"),f.ERR_MISSING_SEQNO);if(!await p(m))throw n(new Error("StrictSigning: Invalid message signature"),f.ERR_INVALID_SIGNATURE);break;default:throw n(new Error("Cannot validate message: unhandled signature policy: "+v),f.ERR_UNHANDLED_SIGNATURE_POLICY)}for(const w of m.topicIDs){const y=this.topicValidators.get(w);y&&await y(w,m)}}_buildMessage(m){const v=this.globalSignaturePolicy;switch(v){case d.StrictSign:return m.from=this.peerId.toB58String(),m.seqno=h.randomSeqno(),g(this.peerId,m);case d.StrictNoSign:return Promise.resolve(m);default:throw n(new Error("Cannot build message: unhandled signature policy: "+v),f.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(m){if(!this.started)throw n(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!m||typeof m!="string")throw n(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");const v=this.topics.get(m);return v?Array.from(v):[]}async publish(m,v){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",m,v);const y={receivedFrom:this.peerId.toB58String(),data:v,topicIDs:[m]},b=await this._buildMessage(y),T=h.normalizeInRpcMessage(b);this.emitSelf&&this._emitMessage(T),await this._publish(T)}_publish(m){throw n(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(m){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(m)||(this.subscriptions.add(m),this.peers.forEach((v,w)=>this._sendSubscriptions(w,[m],!0)))}unsubscribe(m){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(m)&&this.listenerCount(m)===0&&(this.subscriptions.delete(m),this.peers.forEach((v,w)=>this._sendSubscriptions(w,[m],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};_.utils=h,_.SignaturePolicy=d,o.exports=_}}),require_create_gossip_rpc=__commonJS({"node_modules/libp2p-gossipsub/src/utils/create-gossip-rpc.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.createGossipRpc=void 0;function o(r=[],t={}){return{subscriptions:[],msgs:r,control:Object.assign({ihave:[],iwant:[],graft:[],prune:[]},t)}}e.createGossipRpc=o}}),require_shuffle=__commonJS({"node_modules/libp2p-gossipsub/src/utils/shuffle.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.shuffle=void 0;function o(r){if(r.length<=1)return r;const t=()=>Math.floor(Math.random()*Math.floor(r.length));for(let n=0;n<r.length;n++){const s=t(),u=r[n];r[n]=r[s],r[s]=u}return r}e.shuffle=o}}),require_constants3=__commonJS({"node_modules/libp2p-gossipsub/src/constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.ACCEPT_FROM_WHITELIST_DURATION_MS=e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=e.ERR_TOPIC_VALIDATOR_IGNORE=e.ERR_TOPIC_VALIDATOR_REJECT=e.TimeCacheDuration=e.GossipsubSeenTTL=e.GossipsubIWantFollowupTime=e.GossipsubMaxIHaveMessages=e.GossipsubMaxIHaveLength=e.GossipsubGraftFloodThreshold=e.GossipsubOpportunisticGraftPeers=e.GossipsubOpportunisticGraftTicks=e.GossipsubDirectConnectInitialDelay=e.GossipsubDirectConnectTicks=e.GossipsubConnectionTimeout=e.GossipsubMaxPendingConnections=e.GossipsubConnectors=e.GossipsubPruneBackoffTicks=e.GossipsubPruneBackoff=e.GossipsubPrunePeers=e.GossipsubFanoutTTL=e.GossipsubHeartbeatInterval=e.GossipsubHeartbeatInitialDelay=e.GossipsubGossipRetransmission=e.GossipsubGossipFactor=e.GossipsubDlazy=e.GossipsubHistoryGossip=e.GossipsubHistoryLength=e.GossipsubDout=e.GossipsubDscore=e.GossipsubDhi=e.GossipsubDlo=e.GossipsubD=e.GossipsubIDv11=e.GossipsubIDv10=e.FloodsubID=e.minute=e.second=void 0,e.second=1e3,e.minute=60*e.second,e.FloodsubID="/floodsub/1.0.0",e.GossipsubIDv10="/meshsub/1.0.0",e.GossipsubIDv11="/meshsub/1.1.0",e.GossipsubD=6,e.GossipsubDlo=4,e.GossipsubDhi=12,e.GossipsubDscore=4,e.GossipsubDout=2,e.GossipsubHistoryLength=5,e.GossipsubHistoryGossip=3,e.GossipsubDlazy=6,e.GossipsubGossipFactor=.25,e.GossipsubGossipRetransmission=3,e.GossipsubHeartbeatInitialDelay=100,e.GossipsubHeartbeatInterval=e.second,e.GossipsubFanoutTTL=e.minute,e.GossipsubPrunePeers=16,e.GossipsubPruneBackoff=e.minute,e.GossipsubPruneBackoffTicks=15,e.GossipsubConnectors=8,e.GossipsubMaxPendingConnections=128,e.GossipsubConnectionTimeout=30*e.second,e.GossipsubDirectConnectTicks=300,e.GossipsubDirectConnectInitialDelay=e.second,e.GossipsubOpportunisticGraftTicks=60,e.GossipsubOpportunisticGraftPeers=2,e.GossipsubGraftFloodThreshold=10*e.second,e.GossipsubMaxIHaveLength=5e3,e.GossipsubMaxIHaveMessages=10,e.GossipsubIWantFollowupTime=3*e.second,e.GossipsubSeenTTL=30*e.second,e.TimeCacheDuration=120*1e3,e.ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",e.ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",e.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,e.ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,e.ACCEPT_FROM_WHITELIST_DURATION_MS=1e3}}),require_has_gossip_protocol=__commonJS({"node_modules/libp2p-gossipsub/src/utils/has-gossip-protocol.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.hasGossipProtocol=void 0;var o=require_constants3();function r(t){return t===o.GossipsubIDv10||t===o.GossipsubIDv11}e.hasGossipProtocol=r}}),require_messageIdToString=__commonJS({"node_modules/libp2p-gossipsub/src/utils/messageIdToString.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.messageIdFromString=e.messageIdToString=void 0;var o=(init_from_string(),__toCommonJS(from_string_exports)),r=(init_to_string(),__toCommonJS(to_string_exports));function t(s){return r.toString(s,"base64")}e.messageIdToString=t;function n(s){return o.fromString(s,"base64")}e.messageIdFromString=n}}),require_utils10=__commonJS({"node_modules/libp2p-gossipsub/src/utils/index.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(t,n,s,u){u===void 0&&(u=s),Object.defineProperty(t,u,{enumerable:!0,get:function(){return n[s]}})}:function(t,n,s,u){u===void 0&&(u=s),t[u]=n[s]}),r=e&&e.__exportStar||function(t,n){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&o(n,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(require_create_gossip_rpc(),e),r(require_shuffle(),e),r(require_has_gossip_protocol(),e),r(require_messageIdToString(),e)}}),require_message_cache=__commonJS({"node_modules/libp2p-gossipsub/src/message-cache.js"(e){init_node_globals();var o=e&&e.__awaiter||function(n,s,u,l){function f(a){return a instanceof u?a:new u(function(c){c(a)})}return new(u||(u=Promise))(function(a,c){function d(p){try{g(l.next(p))}catch(_){c(_)}}function h(p){try{g(l.throw(p))}catch(_){c(_)}}function g(p){p.done?a(p.value):f(p.value).then(d,h)}g((l=l.apply(n,s||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageCache=void 0;var r=require_utils10(),t=class{constructor(n,s){this.msgs=new Map,this.peertx=new Map,this.history=[];for(let u=0;u<s;u++)this.history[u]=[];this.gossip=n}put(n,s){return o(this,void 0,void 0,function*(){this.msgs.set(s,n);const u=r.messageIdFromString(s);this.history[0].push({msgId:u,topics:n.topicIDs})})}get(n){return this.msgs.get(r.messageIdToString(n))}getForPeer(n,s){const u=this.msgs.get(n);if(!u)return[void 0,0];let l=this.peertx.get(n);l||(l=new Map,this.peertx.set(n,l));const f=(l.get(s)||0)+1;return l.set(s,f),[u,f]}getGossipIDs(n){const s=[];for(let u=0;u<this.gossip;u++)this.history[u].forEach(l=>{for(const f of l.topics)if(f===n){s.push(l.msgId);break}});return s}shift(){this.history[this.history.length-1].forEach(s=>{const u=r.messageIdToString(s.msgId);this.msgs.delete(u),this.peertx.delete(u)}),this.history.pop(),this.history.unshift([])}};e.MessageCache=t}}),require_rpc3=__commonJS({"node_modules/libp2p-gossipsub/src/message/rpc.js"(e,o){init_node_globals(),function(r,t){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],t):typeof __require=="function"&&typeof o=="object"&&o&&o.exports&&(o.exports=t(require_minimal2()))}(e,function(r){var t=r.Reader,n=r.Writer,s=r.util,u=r.roots.default||(r.roots.default={});return u.RPC=function(){function l(a){if(this.subscriptions=[],this.msgs=[],a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}l.prototype.subscriptions=s.emptyArray,l.prototype.msgs=s.emptyArray,l.prototype.control=null;var f;return Object.defineProperty(l.prototype,"_control",{get:s.oneOfGetter(f=["control"]),set:s.oneOfSetter(f)}),l.encode=function(c,d){if(d||(d=n.create()),c.subscriptions!=null&&c.subscriptions.length)for(var h=0;h<c.subscriptions.length;++h)u.RPC.SubOpts.encode(c.subscriptions[h],d.uint32(10).fork()).ldelim();if(c.msgs!=null&&c.msgs.length)for(var h=0;h<c.msgs.length;++h)u.RPC.Message.encode(c.msgs[h],d.uint32(18).fork()).ldelim();return c.control!=null&&Object.hasOwnProperty.call(c,"control")&&u.RPC.ControlMessage.encode(c.control,d.uint32(26).fork()).ldelim(),d},l.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.RPC;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.subscriptions&&g.subscriptions.length||(g.subscriptions=[]),g.subscriptions.push(u.RPC.SubOpts.decode(c,c.uint32()));break;case 2:g.msgs&&g.msgs.length||(g.msgs=[]),g.msgs.push(u.RPC.Message.decode(c,c.uint32()));break;case 3:g.control=u.RPC.ControlMessage.decode(c,c.uint32());break;default:c.skipType(p&7);break}}return g},l.fromObject=function(c){if(c instanceof u.RPC)return c;var d=new u.RPC;if(c.subscriptions){if(!Array.isArray(c.subscriptions))throw TypeError(".RPC.subscriptions: array expected");d.subscriptions=[];for(var h=0;h<c.subscriptions.length;++h){if(typeof c.subscriptions[h]!="object")throw TypeError(".RPC.subscriptions: object expected");d.subscriptions[h]=u.RPC.SubOpts.fromObject(c.subscriptions[h])}}if(c.msgs){if(!Array.isArray(c.msgs))throw TypeError(".RPC.msgs: array expected");d.msgs=[];for(var h=0;h<c.msgs.length;++h){if(typeof c.msgs[h]!="object")throw TypeError(".RPC.msgs: object expected");d.msgs[h]=u.RPC.Message.fromObject(c.msgs[h])}}if(c.control!=null){if(typeof c.control!="object")throw TypeError(".RPC.control: object expected");d.control=u.RPC.ControlMessage.fromObject(c.control)}return d},l.toObject=function(c,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.subscriptions=[],h.msgs=[]),c.subscriptions&&c.subscriptions.length){h.subscriptions=[];for(var g=0;g<c.subscriptions.length;++g)h.subscriptions[g]=u.RPC.SubOpts.toObject(c.subscriptions[g],d)}if(c.msgs&&c.msgs.length){h.msgs=[];for(var g=0;g<c.msgs.length;++g)h.msgs[g]=u.RPC.Message.toObject(c.msgs[g],d)}return c.control!=null&&c.hasOwnProperty("control")&&(h.control=u.RPC.ControlMessage.toObject(c.control,d),d.oneofs&&(h._control="control")),h},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.SubOpts=function(){function a(d){if(d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.subscribe=null,a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_subscribe",{get:s.oneOfGetter(c=["subscribe"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_topicID",{get:s.oneOfGetter(c=["topicID"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){return g||(g=n.create()),h.subscribe!=null&&Object.hasOwnProperty.call(h,"subscribe")&&g.uint32(8).bool(h.subscribe),h.topicID!=null&&Object.hasOwnProperty.call(h,"topicID")&&g.uint32(18).string(h.topicID),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.SubOpts;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.subscribe=h.bool();break;case 2:_.topicID=h.string();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.SubOpts)return h;var g=new u.RPC.SubOpts;return h.subscribe!=null&&(g.subscribe=Boolean(h.subscribe)),h.topicID!=null&&(g.topicID=String(h.topicID)),g},a.toObject=function(h,g){g||(g={});var p={};return h.subscribe!=null&&h.hasOwnProperty("subscribe")&&(p.subscribe=h.subscribe,g.oneofs&&(p._subscribe="subscribe")),h.topicID!=null&&h.hasOwnProperty("topicID")&&(p.topicID=h.topicID,g.oneofs&&(p._topicID="topicID")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.Message=function(){function a(d){if(this.topicIDs=[],d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.from=null,a.prototype.data=null,a.prototype.seqno=null,a.prototype.topicIDs=s.emptyArray,a.prototype.signature=null,a.prototype.key=null;var c;return Object.defineProperty(a.prototype,"_from",{get:s.oneOfGetter(c=["from"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_data",{get:s.oneOfGetter(c=["data"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_seqno",{get:s.oneOfGetter(c=["seqno"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signature",{get:s.oneOfGetter(c=["signature"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_key",{get:s.oneOfGetter(c=["key"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){if(g||(g=n.create()),h.from!=null&&Object.hasOwnProperty.call(h,"from")&&g.uint32(10).bytes(h.from),h.data!=null&&Object.hasOwnProperty.call(h,"data")&&g.uint32(18).bytes(h.data),h.seqno!=null&&Object.hasOwnProperty.call(h,"seqno")&&g.uint32(26).bytes(h.seqno),h.topicIDs!=null&&h.topicIDs.length)for(var p=0;p<h.topicIDs.length;++p)g.uint32(34).string(h.topicIDs[p]);return h.signature!=null&&Object.hasOwnProperty.call(h,"signature")&&g.uint32(42).bytes(h.signature),h.key!=null&&Object.hasOwnProperty.call(h,"key")&&g.uint32(50).bytes(h.key),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.Message;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.from=h.bytes();break;case 2:_.data=h.bytes();break;case 3:_.seqno=h.bytes();break;case 4:_.topicIDs&&_.topicIDs.length||(_.topicIDs=[]),_.topicIDs.push(h.string());break;case 5:_.signature=h.bytes();break;case 6:_.key=h.bytes();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.Message)return h;var g=new u.RPC.Message;if(h.from!=null&&(typeof h.from=="string"?s.base64.decode(h.from,g.from=s.newBuffer(s.base64.length(h.from)),0):h.from.length&&(g.from=h.from)),h.data!=null&&(typeof h.data=="string"?s.base64.decode(h.data,g.data=s.newBuffer(s.base64.length(h.data)),0):h.data.length&&(g.data=h.data)),h.seqno!=null&&(typeof h.seqno=="string"?s.base64.decode(h.seqno,g.seqno=s.newBuffer(s.base64.length(h.seqno)),0):h.seqno.length&&(g.seqno=h.seqno)),h.topicIDs){if(!Array.isArray(h.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");g.topicIDs=[];for(var p=0;p<h.topicIDs.length;++p)g.topicIDs[p]=String(h.topicIDs[p])}return h.signature!=null&&(typeof h.signature=="string"?s.base64.decode(h.signature,g.signature=s.newBuffer(s.base64.length(h.signature)),0):h.signature.length&&(g.signature=h.signature)),h.key!=null&&(typeof h.key=="string"?s.base64.decode(h.key,g.key=s.newBuffer(s.base64.length(h.key)),0):h.key.length&&(g.key=h.key)),g},a.toObject=function(h,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.topicIDs=[]),h.from!=null&&h.hasOwnProperty("from")&&(p.from=g.bytes===String?s.base64.encode(h.from,0,h.from.length):g.bytes===Array?Array.prototype.slice.call(h.from):h.from,g.oneofs&&(p._from="from")),h.data!=null&&h.hasOwnProperty("data")&&(p.data=g.bytes===String?s.base64.encode(h.data,0,h.data.length):g.bytes===Array?Array.prototype.slice.call(h.data):h.data,g.oneofs&&(p._data="data")),h.seqno!=null&&h.hasOwnProperty("seqno")&&(p.seqno=g.bytes===String?s.base64.encode(h.seqno,0,h.seqno.length):g.bytes===Array?Array.prototype.slice.call(h.seqno):h.seqno,g.oneofs&&(p._seqno="seqno")),h.topicIDs&&h.topicIDs.length){p.topicIDs=[];for(var _=0;_<h.topicIDs.length;++_)p.topicIDs[_]=h.topicIDs[_]}return h.signature!=null&&h.hasOwnProperty("signature")&&(p.signature=g.bytes===String?s.base64.encode(h.signature,0,h.signature.length):g.bytes===Array?Array.prototype.slice.call(h.signature):h.signature,g.oneofs&&(p._signature="signature")),h.key!=null&&h.hasOwnProperty("key")&&(p.key=g.bytes===String?s.base64.encode(h.key,0,h.key.length):g.bytes===Array?Array.prototype.slice.call(h.key):h.key,g.oneofs&&(p._key="key")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.ControlMessage=function(){function a(c){if(this.ihave=[],this.iwant=[],this.graft=[],this.prune=[],c)for(var d=Object.keys(c),h=0;h<d.length;++h)c[d[h]]!=null&&(this[d[h]]=c[d[h]])}return a.prototype.ihave=s.emptyArray,a.prototype.iwant=s.emptyArray,a.prototype.graft=s.emptyArray,a.prototype.prune=s.emptyArray,a.encode=function(d,h){if(h||(h=n.create()),d.ihave!=null&&d.ihave.length)for(var g=0;g<d.ihave.length;++g)u.RPC.ControlIHave.encode(d.ihave[g],h.uint32(10).fork()).ldelim();if(d.iwant!=null&&d.iwant.length)for(var g=0;g<d.iwant.length;++g)u.RPC.ControlIWant.encode(d.iwant[g],h.uint32(18).fork()).ldelim();if(d.graft!=null&&d.graft.length)for(var g=0;g<d.graft.length;++g)u.RPC.ControlGraft.encode(d.graft[g],h.uint32(26).fork()).ldelim();if(d.prune!=null&&d.prune.length)for(var g=0;g<d.prune.length;++g)u.RPC.ControlPrune.encode(d.prune[g],h.uint32(34).fork()).ldelim();return h},a.decode=function(d,h){d instanceof t||(d=t.create(d));for(var g=h===void 0?d.len:d.pos+h,p=new u.RPC.ControlMessage;d.pos<g;){var _=d.uint32();switch(_>>>3){case 1:p.ihave&&p.ihave.length||(p.ihave=[]),p.ihave.push(u.RPC.ControlIHave.decode(d,d.uint32()));break;case 2:p.iwant&&p.iwant.length||(p.iwant=[]),p.iwant.push(u.RPC.ControlIWant.decode(d,d.uint32()));break;case 3:p.graft&&p.graft.length||(p.graft=[]),p.graft.push(u.RPC.ControlGraft.decode(d,d.uint32()));break;case 4:p.prune&&p.prune.length||(p.prune=[]),p.prune.push(u.RPC.ControlPrune.decode(d,d.uint32()));break;default:d.skipType(_&7);break}}return p},a.fromObject=function(d){if(d instanceof u.RPC.ControlMessage)return d;var h=new u.RPC.ControlMessage;if(d.ihave){if(!Array.isArray(d.ihave))throw TypeError(".RPC.ControlMessage.ihave: array expected");h.ihave=[];for(var g=0;g<d.ihave.length;++g){if(typeof d.ihave[g]!="object")throw TypeError(".RPC.ControlMessage.ihave: object expected");h.ihave[g]=u.RPC.ControlIHave.fromObject(d.ihave[g])}}if(d.iwant){if(!Array.isArray(d.iwant))throw TypeError(".RPC.ControlMessage.iwant: array expected");h.iwant=[];for(var g=0;g<d.iwant.length;++g){if(typeof d.iwant[g]!="object")throw TypeError(".RPC.ControlMessage.iwant: object expected");h.iwant[g]=u.RPC.ControlIWant.fromObject(d.iwant[g])}}if(d.graft){if(!Array.isArray(d.graft))throw TypeError(".RPC.ControlMessage.graft: array expected");h.graft=[];for(var g=0;g<d.graft.length;++g){if(typeof d.graft[g]!="object")throw TypeError(".RPC.ControlMessage.graft: object expected");h.graft[g]=u.RPC.ControlGraft.fromObject(d.graft[g])}}if(d.prune){if(!Array.isArray(d.prune))throw TypeError(".RPC.ControlMessage.prune: array expected");h.prune=[];for(var g=0;g<d.prune.length;++g){if(typeof d.prune[g]!="object")throw TypeError(".RPC.ControlMessage.prune: object expected");h.prune[g]=u.RPC.ControlPrune.fromObject(d.prune[g])}}return h},a.toObject=function(d,h){h||(h={});var g={};if((h.arrays||h.defaults)&&(g.ihave=[],g.iwant=[],g.graft=[],g.prune=[]),d.ihave&&d.ihave.length){g.ihave=[];for(var p=0;p<d.ihave.length;++p)g.ihave[p]=u.RPC.ControlIHave.toObject(d.ihave[p],h)}if(d.iwant&&d.iwant.length){g.iwant=[];for(var p=0;p<d.iwant.length;++p)g.iwant[p]=u.RPC.ControlIWant.toObject(d.iwant[p],h)}if(d.graft&&d.graft.length){g.graft=[];for(var p=0;p<d.graft.length;++p)g.graft[p]=u.RPC.ControlGraft.toObject(d.graft[p],h)}if(d.prune&&d.prune.length){g.prune=[];for(var p=0;p<d.prune.length;++p)g.prune[p]=u.RPC.ControlPrune.toObject(d.prune[p],h)}return g},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.ControlIHave=function(){function a(d){if(this.messageIDs=[],d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.topicID=null,a.prototype.messageIDs=s.emptyArray;var c;return Object.defineProperty(a.prototype,"_topicID",{get:s.oneOfGetter(c=["topicID"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){if(g||(g=n.create()),h.topicID!=null&&Object.hasOwnProperty.call(h,"topicID")&&g.uint32(10).string(h.topicID),h.messageIDs!=null&&h.messageIDs.length)for(var p=0;p<h.messageIDs.length;++p)g.uint32(18).bytes(h.messageIDs[p]);return g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.ControlIHave;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.topicID=h.string();break;case 2:_.messageIDs&&_.messageIDs.length||(_.messageIDs=[]),_.messageIDs.push(h.bytes());break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.ControlIHave)return h;var g=new u.RPC.ControlIHave;if(h.topicID!=null&&(g.topicID=String(h.topicID)),h.messageIDs){if(!Array.isArray(h.messageIDs))throw TypeError(".RPC.ControlIHave.messageIDs: array expected");g.messageIDs=[];for(var p=0;p<h.messageIDs.length;++p)typeof h.messageIDs[p]=="string"?s.base64.decode(h.messageIDs[p],g.messageIDs[p]=s.newBuffer(s.base64.length(h.messageIDs[p])),0):h.messageIDs[p].length&&(g.messageIDs[p]=h.messageIDs[p])}return g},a.toObject=function(h,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.messageIDs=[]),h.topicID!=null&&h.hasOwnProperty("topicID")&&(p.topicID=h.topicID,g.oneofs&&(p._topicID="topicID")),h.messageIDs&&h.messageIDs.length){p.messageIDs=[];for(var _=0;_<h.messageIDs.length;++_)p.messageIDs[_]=g.bytes===String?s.base64.encode(h.messageIDs[_],0,h.messageIDs[_].length):g.bytes===Array?Array.prototype.slice.call(h.messageIDs[_]):h.messageIDs[_]}return p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.ControlIWant=function(){function a(c){if(this.messageIDs=[],c)for(var d=Object.keys(c),h=0;h<d.length;++h)c[d[h]]!=null&&(this[d[h]]=c[d[h]])}return a.prototype.messageIDs=s.emptyArray,a.encode=function(d,h){if(h||(h=n.create()),d.messageIDs!=null&&d.messageIDs.length)for(var g=0;g<d.messageIDs.length;++g)h.uint32(10).bytes(d.messageIDs[g]);return h},a.decode=function(d,h){d instanceof t||(d=t.create(d));for(var g=h===void 0?d.len:d.pos+h,p=new u.RPC.ControlIWant;d.pos<g;){var _=d.uint32();switch(_>>>3){case 1:p.messageIDs&&p.messageIDs.length||(p.messageIDs=[]),p.messageIDs.push(d.bytes());break;default:d.skipType(_&7);break}}return p},a.fromObject=function(d){if(d instanceof u.RPC.ControlIWant)return d;var h=new u.RPC.ControlIWant;if(d.messageIDs){if(!Array.isArray(d.messageIDs))throw TypeError(".RPC.ControlIWant.messageIDs: array expected");h.messageIDs=[];for(var g=0;g<d.messageIDs.length;++g)typeof d.messageIDs[g]=="string"?s.base64.decode(d.messageIDs[g],h.messageIDs[g]=s.newBuffer(s.base64.length(d.messageIDs[g])),0):d.messageIDs[g].length&&(h.messageIDs[g]=d.messageIDs[g])}return h},a.toObject=function(d,h){h||(h={});var g={};if((h.arrays||h.defaults)&&(g.messageIDs=[]),d.messageIDs&&d.messageIDs.length){g.messageIDs=[];for(var p=0;p<d.messageIDs.length;++p)g.messageIDs[p]=h.bytes===String?s.base64.encode(d.messageIDs[p],0,d.messageIDs[p].length):h.bytes===Array?Array.prototype.slice.call(d.messageIDs[p]):d.messageIDs[p]}return g},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.ControlGraft=function(){function a(d){if(d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.topicID=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:s.oneOfGetter(c=["topicID"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){return g||(g=n.create()),h.topicID!=null&&Object.hasOwnProperty.call(h,"topicID")&&g.uint32(10).string(h.topicID),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.ControlGraft;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.topicID=h.string();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.ControlGraft)return h;var g=new u.RPC.ControlGraft;return h.topicID!=null&&(g.topicID=String(h.topicID)),g},a.toObject=function(h,g){g||(g={});var p={};return h.topicID!=null&&h.hasOwnProperty("topicID")&&(p.topicID=h.topicID,g.oneofs&&(p._topicID="topicID")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.ControlPrune=function(){function a(d){if(this.peers=[],d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.topicID=null,a.prototype.peers=s.emptyArray,a.prototype.backoff=null;var c;return Object.defineProperty(a.prototype,"_topicID",{get:s.oneOfGetter(c=["topicID"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_backoff",{get:s.oneOfGetter(c=["backoff"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){if(g||(g=n.create()),h.topicID!=null&&Object.hasOwnProperty.call(h,"topicID")&&g.uint32(10).string(h.topicID),h.peers!=null&&h.peers.length)for(var p=0;p<h.peers.length;++p)u.RPC.PeerInfo.encode(h.peers[p],g.uint32(18).fork()).ldelim();return h.backoff!=null&&Object.hasOwnProperty.call(h,"backoff")&&g.uint32(24).uint64(h.backoff),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.ControlPrune;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.topicID=h.string();break;case 2:_.peers&&_.peers.length||(_.peers=[]),_.peers.push(u.RPC.PeerInfo.decode(h,h.uint32()));break;case 3:_.backoff=h.uint64();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.ControlPrune)return h;var g=new u.RPC.ControlPrune;if(h.topicID!=null&&(g.topicID=String(h.topicID)),h.peers){if(!Array.isArray(h.peers))throw TypeError(".RPC.ControlPrune.peers: array expected");g.peers=[];for(var p=0;p<h.peers.length;++p){if(typeof h.peers[p]!="object")throw TypeError(".RPC.ControlPrune.peers: object expected");g.peers[p]=u.RPC.PeerInfo.fromObject(h.peers[p])}}return h.backoff!=null&&(s.Long?(g.backoff=s.Long.fromValue(h.backoff)).unsigned=!0:typeof h.backoff=="string"?g.backoff=parseInt(h.backoff,10):typeof h.backoff=="number"?g.backoff=h.backoff:typeof h.backoff=="object"&&(g.backoff=new s.LongBits(h.backoff.low>>>0,h.backoff.high>>>0).toNumber(!0))),g},a.toObject=function(h,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.peers=[]),h.topicID!=null&&h.hasOwnProperty("topicID")&&(p.topicID=h.topicID,g.oneofs&&(p._topicID="topicID")),h.peers&&h.peers.length){p.peers=[];for(var _=0;_<h.peers.length;++_)p.peers[_]=u.RPC.PeerInfo.toObject(h.peers[_],g)}return h.backoff!=null&&h.hasOwnProperty("backoff")&&(typeof h.backoff=="number"?p.backoff=g.longs===String?String(h.backoff):h.backoff:p.backoff=g.longs===String?s.Long.prototype.toString.call(h.backoff):g.longs===Number?new s.LongBits(h.backoff.low>>>0,h.backoff.high>>>0).toNumber(!0):h.backoff,g.oneofs&&(p._backoff="backoff")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l.PeerInfo=function(){function a(d){if(d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.peerID=null,a.prototype.signedPeerRecord=null;var c;return Object.defineProperty(a.prototype,"_peerID",{get:s.oneOfGetter(c=["peerID"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_signedPeerRecord",{get:s.oneOfGetter(c=["signedPeerRecord"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){return g||(g=n.create()),h.peerID!=null&&Object.hasOwnProperty.call(h,"peerID")&&g.uint32(10).bytes(h.peerID),h.signedPeerRecord!=null&&Object.hasOwnProperty.call(h,"signedPeerRecord")&&g.uint32(18).bytes(h.signedPeerRecord),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.RPC.PeerInfo;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.peerID=h.bytes();break;case 2:_.signedPeerRecord=h.bytes();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.RPC.PeerInfo)return h;var g=new u.RPC.PeerInfo;return h.peerID!=null&&(typeof h.peerID=="string"?s.base64.decode(h.peerID,g.peerID=s.newBuffer(s.base64.length(h.peerID)),0):h.peerID.length&&(g.peerID=h.peerID)),h.signedPeerRecord!=null&&(typeof h.signedPeerRecord=="string"?s.base64.decode(h.signedPeerRecord,g.signedPeerRecord=s.newBuffer(s.base64.length(h.signedPeerRecord)),0):h.signedPeerRecord.length&&(g.signedPeerRecord=h.signedPeerRecord)),g},a.toObject=function(h,g){g||(g={});var p={};return h.peerID!=null&&h.hasOwnProperty("peerID")&&(p.peerID=g.bytes===String?s.base64.encode(h.peerID,0,h.peerID.length):g.bytes===Array?Array.prototype.slice.call(h.peerID):h.peerID,g.oneofs&&(p._peerID="peerID")),h.signedPeerRecord!=null&&h.hasOwnProperty("signedPeerRecord")&&(p.signedPeerRecord=g.bytes===String?s.base64.encode(h.signedPeerRecord,0,h.signedPeerRecord.length):g.bytes===Array?Array.prototype.slice.call(h.signedPeerRecord):h.signedPeerRecord,g.oneofs&&(p._signedPeerRecord="signedPeerRecord")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l}(),u})}}),require_get_gossip_peers=__commonJS({"node_modules/libp2p-gossipsub/src/get-gossip-peers.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.getGossipPeers=void 0;var o=require_utils10();function r(t,n,s,u=()=>!0){const l=t.topics.get(n);if(!l)return new Set;let f=[];return l.forEach(a=>{const c=t.peers.get(a);!c||o.hasGossipProtocol(c.protocol)&&u(a)&&f.push(a)}),f=o.shuffle(f),s>0&&f.length>s&&(f=f.slice(0,s)),new Set(f)}e.getGossipPeers=r}}),require_heartbeat=__commonJS({"node_modules/libp2p-gossipsub/src/heartbeat.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(f,a,c,d){d===void 0&&(d=c),Object.defineProperty(f,d,{enumerable:!0,get:function(){return a[c]}})}:function(f,a,c,d){d===void 0&&(d=c),f[d]=a[c]}),r=e&&e.__setModuleDefault||(Object.create?function(f,a){Object.defineProperty(f,"default",{enumerable:!0,value:a})}:function(f,a){f.default=a}),t=e&&e.__importStar||function(f){if(f&&f.__esModule)return f;var a={};if(f!=null)for(var c in f)c!=="default"&&Object.prototype.hasOwnProperty.call(f,c)&&o(a,f,c);return r(a,f),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Heartbeat=void 0;var n=t(require_constants3()),s=require_get_gossip_peers(),u=require_utils10(),l=class{constructor(f){this.gossipsub=f}start(){if(this._heartbeatTimer)return;const f=this._heartbeat.bind(this),a=setTimeout(()=>{f(),this._heartbeatTimer.runPeriodically(f,this.gossipsub._options.heartbeatInterval)},n.GossipsubHeartbeatInitialDelay);this._heartbeatTimer={_intervalId:void 0,runPeriodically:(c,d)=>{this._heartbeatTimer._intervalId=setInterval(c,d)},cancel:()=>{clearTimeout(a),clearInterval(this._heartbeatTimer._intervalId)}}}stop(){!this._heartbeatTimer||(this._heartbeatTimer.cancel(),this._heartbeatTimer=null)}_heartbeat(){const{D:f,Dlo:a,Dhi:c,Dscore:d,Dout:h,fanoutTTL:g}=this.gossipsub._options;this.gossipsub.heartbeatTicks++;const p=new Map,_=b=>{let T=p.get(b);return T===void 0&&(T=this.gossipsub.score.score(b),p.set(b,T)),T},m=new Map,v=new Map,w=new Map;this.gossipsub._clearBackoff(),this.gossipsub.peerhave.clear(),this.gossipsub.iasked.clear(),this.gossipsub._applyIwantPenalties(),this.gossipsub._directConnect(),this.gossipsub.mesh.forEach((b,T)=>{const R=E=>{this.gossipsub.log("HEARTBEAT: Remove mesh link to %s in %s",E,T),this.gossipsub.score.prune(E,T),this.gossipsub._addBackoff(E,T),b.delete(E);const A=v.get(E);A?A.push(T):v.set(E,[T])},S=E=>{this.gossipsub.log("HEARTBEAT: Add mesh link to %s in %s",E,T),this.gossipsub.score.graft(E,T),b.add(E);const A=m.get(E);A?A.push(T):m.set(E,[T])};if(b.forEach(E=>{const A=_(E);A<0&&(this.gossipsub.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",E,A,T),R(E),w.set(E,!0))}),b.size<a){const E=this.gossipsub.backoff.get(T),A=f-b.size;s.getGossipPeers(this.gossipsub,T,A,I=>!b.has(I)&&!this.gossipsub.direct.has(I)&&(!E||!E.has(I))&&_(I)>=0).forEach(S)}if(b.size>c){let E=Array.from(b);E.sort((C,I)=>_(I)-_(C)),E=E.slice(0,d).concat(u.shuffle(E.slice(d)));let A=0;if(E.slice(0,f).forEach(C=>{this.gossipsub.outbound.get(C)&&A++}),A<h){const C=P=>{const O=E[P];for(let k=P;k>0;k--)E[k]=E[k-1];E[0]=O};if(A>0){let P=A;for(let O=1;O<f&&P>0;O++)this.gossipsub.outbound.get(E[O])&&(C(O),P--)}let I=f-A;for(let P=f;P<E.length&&I>0;P++)this.gossipsub.outbound.get(E[P])&&(C(P),I--)}E.slice(f).forEach(R)}if(b.size>=a){let E=0;if(b.forEach(A=>{this.gossipsub.outbound.get(A)&&E++}),E<h){const A=h-E,C=this.gossipsub.backoff.get(T);s.getGossipPeers(this.gossipsub,T,A,I=>!b.has(I)&&!this.gossipsub.direct.has(I)&&(!C||!C.has(I))&&_(I)>=0).forEach(S)}}if(this.gossipsub.heartbeatTicks%n.GossipsubOpportunisticGraftTicks==0&&b.size>1){const E=Array.from(b).sort((I,P)=>_(I)-_(P)),A=Math.floor(b.size/2),C=_(E[A]);if(C<this.gossipsub._options.scoreThresholds.opportunisticGraftThreshold){const I=this.gossipsub.backoff.get(T);s.getGossipPeers(this.gossipsub,T,n.GossipsubOpportunisticGraftPeers,O=>b.has(O)&&!this.gossipsub.direct.has(O)&&(!I||!I.has(O))&&_(O)>C).forEach(O=>{this.gossipsub.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",O,T),S(O)})}}this.gossipsub._emitGossip(T,b)});const y=this.gossipsub._now();this.gossipsub.lastpub.forEach((b,T)=>{b+g<y&&(this.gossipsub.fanout.delete(T),this.gossipsub.lastpub.delete(T))}),this.gossipsub.fanout.forEach((b,T)=>{const R=this.gossipsub.topics.get(T);if(b.forEach(S=>{(!R.has(S)||_(S)<this.gossipsub._options.scoreThresholds.publishThreshold)&&b.delete(S)}),b.size<f){const S=f-b.size;s.getGossipPeers(this.gossipsub,T,S,A=>!b.has(A)&&!this.gossipsub.direct.has(A)&&_(A)>=this.gossipsub._options.scoreThresholds.publishThreshold).forEach(A=>{b.add(A)})}this.gossipsub._emitGossip(T,b)}),this.gossipsub._sendGraftPrune(m,v,w),this.gossipsub._flush(),this.gossipsub.messageCache.shift(),this.gossipsub.emit("gossipsub:heartbeat")}};e.Heartbeat=l}}),require_constants4=__commonJS({"node_modules/libp2p-gossipsub/src/score/constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.ERR_INVALID_PEER_SCORE_THRESHOLDS=e.ERR_INVALID_PEER_SCORE_PARAMS=void 0,e.ERR_INVALID_PEER_SCORE_PARAMS="ERR_INVALID_PEER_SCORE_PARAMS",e.ERR_INVALID_PEER_SCORE_THRESHOLDS="ERR_INVALID_PEER_SCORE_THRESHOLDS"}}),require_peer_score_params=__commonJS({"node_modules/libp2p-gossipsub/src/score/peer-score-params.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopicScoreParams=e.validatePeerScoreParams=e.createTopicScoreParams=e.createPeerScoreParams=e.defaultTopicScoreParams=e.defaultPeerScoreParams=void 0;var o=require_constants4(),r=require_err_code();e.defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},e.defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function t(l={}){return Object.assign(Object.assign(Object.assign({},e.defaultPeerScoreParams),l),{topics:l.topics?Object.entries(l.topics).reduce((f,[a,c])=>(f[a]=n(c),f),{}):{}})}e.createPeerScoreParams=t;function n(l={}){return Object.assign(Object.assign({},e.defaultTopicScoreParams),l)}e.createTopicScoreParams=n;function s(l){for(const[f,a]of Object.entries(l.topics))try{u(a)}catch(c){throw r(new Error(`invalid score parameters for topic ${f}: ${c.message}`),o.ERR_INVALID_PEER_SCORE_PARAMS)}if(l.topicScoreCap<0)throw r(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.appSpecificScore===null||l.appSpecificScore===void 0)throw r(new Error("missing application specific score function"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.IPColocationFactorWeight>0)throw r(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.IPColocationFactorWeight!==0&&l.IPColocationFactorThreshold<1)throw r(new Error("invalid IPColocationFactorThreshold; must be at least 1"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.behaviourPenaltyWeight>0)throw r(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.behaviourPenaltyWeight!==0&&(l.behaviourPenaltyDecay<=0||l.behaviourPenaltyDecay>=1))throw r(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.decayInterval<1e3)throw r(new Error("invalid DecayInterval; must be at least 1s"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.decayToZero<=0||l.decayToZero>=1)throw r(new Error("invalid DecayToZero; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS)}e.validatePeerScoreParams=s;function u(l){if(l.topicWeight<0)throw r(new Error("invalid topic weight; must be >= 0"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.timeInMeshQuantum===0)throw r(new Error("invalid TimeInMeshQuantum; must be non zero"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.timeInMeshWeight<0)throw r(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.timeInMeshWeight!==0&&l.timeInMeshQuantum<=0)throw r(new Error("invalid TimeInMeshQuantum; must be positive"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.timeInMeshWeight!==0&&l.timeInMeshCap<=0)throw r(new Error("invalid TimeInMeshCap; must be positive"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.firstMessageDeliveriesWeight<0)throw r(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.firstMessageDeliveriesWeight!==0&&(l.firstMessageDeliveriesDecay<=0||l.firstMessageDeliveriesDecay>=1))throw r(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.firstMessageDeliveriesWeight!==0&&l.firstMessageDeliveriesCap<=0)throw r(new Error("invalid FirstMessageDeliveriesCap; must be positive"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWeight>0)throw r(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWeight!==0&&(l.meshMessageDeliveriesDecay<=0||l.meshMessageDeliveriesDecay>=1))throw r(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWeight!==0&&l.meshMessageDeliveriesCap<=0)throw r(new Error("invalid MeshMessageDeliveriesCap; must be positive"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWeight!==0&&l.meshMessageDeliveriesThreshold<=0)throw r(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWindow<0)throw r(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshMessageDeliveriesWeight!==0&&l.meshMessageDeliveriesActivation<1e3)throw r(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshFailurePenaltyWeight>0)throw r(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.meshFailurePenaltyWeight!==0&&(l.meshFailurePenaltyDecay<=0||l.meshFailurePenaltyDecay>=1))throw r(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.invalidMessageDeliveriesWeight>0)throw r(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),o.ERR_INVALID_PEER_SCORE_PARAMS);if(l.invalidMessageDeliveriesDecay<=0||l.invalidMessageDeliveriesDecay>=1)throw r(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),o.ERR_INVALID_PEER_SCORE_PARAMS)}e.validateTopicScoreParams=u}}),require_peer_score_thresholds=__commonJS({"node_modules/libp2p-gossipsub/src/score/peer-score-thresholds.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.validatePeerScoreThresholds=e.createPeerScoreThresholds=e.defaultPeerScoreThresholds=void 0;var o=require_constants4(),r=require_err_code();e.defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function t(s={}){return Object.assign(Object.assign({},e.defaultPeerScoreThresholds),s)}e.createPeerScoreThresholds=t;function n(s){if(s.gossipThreshold>0)throw r(new Error("invalid gossip threshold; it must be <= 0"),o.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(s.publishThreshold>0||s.publishThreshold>s.gossipThreshold)throw r(new Error("invalid publish threshold; it must be <= 0 and <= gossip threshold"),o.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(s.graylistThreshold>0||s.graylistThreshold>s.publishThreshold)throw r(new Error("invalid graylist threshold; it must be <= 0 and <= publish threshold"),o.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(s.acceptPXThreshold<0)throw r(new Error("invalid accept PX threshold; it must be >= 0"),o.ERR_INVALID_PEER_SCORE_THRESHOLDS);if(s.opportunisticGraftThreshold<0)throw r(new Error("invalid opportunistic grafting threshold; it must be >= 0"),o.ERR_INVALID_PEER_SCORE_THRESHOLDS)}e.validatePeerScoreThresholds=n}}),require_peer_stats=__commonJS({"node_modules/libp2p-gossipsub/src/score/peer-stats.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.ensureTopicStats=e.createTopicStats=e.createPeerStats=void 0;function o(n={}){return Object.assign(Object.assign({connected:!1,expire:0,ips:[],behaviourPenalty:0},n),{topics:n.topics?Object.entries(n.topics).reduce((s,[u,l])=>(s[u]=r(l),s),{}):{}})}e.createPeerStats=o;function r(n={}){return Object.assign({inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},n)}e.createTopicStats=r;function t(n,s,u){let l=s.topics[n];if(l)return l;if(!!u.topics[n])return s.topics[n]=l=r(),l}e.ensureTopicStats=t}}),require_compute_score=__commonJS({"node_modules/libp2p-gossipsub/src/score/compute-score.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.computeScore=void 0;function o(r,t,n,s){let u=0;return Object.entries(t.topics).forEach(([a,c])=>{const d=n.topics[a];if(!d)return;let h=0;if(c.inMesh){let m=c.meshTime/d.timeInMeshQuantum;m>d.timeInMeshCap&&(m=d.timeInMeshCap),h+=m*d.timeInMeshWeight}if(h+=c.firstMessageDeliveries*d.firstMessageDeliveriesWeight,c.meshMessageDeliveriesActive&&c.meshMessageDeliveries<d.meshMessageDeliveriesThreshold){const m=d.meshMessageDeliveriesThreshold-c.meshMessageDeliveries;h+=m*m*d.meshMessageDeliveriesWeight}h+=c.meshFailurePenalty*d.meshFailurePenaltyWeight,h+=c.invalidMessageDeliveries*c.invalidMessageDeliveries*d.invalidMessageDeliveriesWeight,u+=h*d.topicWeight}),n.topicScoreCap>0&&u>n.topicScoreCap&&(u=n.topicScoreCap),u+=n.appSpecificScore(r)*n.appSpecificWeight,t.ips.forEach(a=>{if(n.IPColocationFactorWhitelist.has(a))return;const c=s.get(a),d=c?c.size:0;if(d>n.IPColocationFactorThreshold){const h=d-n.IPColocationFactorThreshold;u+=h*h*n.IPColocationFactorWeight}}),u+=t.behaviourPenalty*t.behaviourPenalty*n.behaviourPenaltyWeight,u}e.computeScore=o}}),require_denque=__commonJS({"node_modules/denque/index.js"(e,o){init_node_globals();function r(t,n){var n=n||{};this._head=0,this._tail=0,this._capacity=n.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}r.prototype.peekAt=function(n){var s=n;if(s===(s|0)){var u=this.size();if(!(s>=u||s<-u))return s<0&&(s+=u),s=this._head+s&this._capacityMask,this._list[s]}},r.prototype.get=function(n){return this.peekAt(n)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(n){if(n===void 0)return this.size();var s=this._list.length;return this._head=this._head-1+s&this._capacityMask,this._list[this._head]=n,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.shift=function(){var n=this._head;if(n!==this._tail){var s=this._list[n];return this._list[n]=void 0,this._head=n+1&this._capacityMask,n<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),s}},r.prototype.push=function(n){if(n===void 0)return this.size();var s=this._tail;return this._list[s]=n,this._tail=s+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var n=this._tail;if(n!==this._head){var s=this._list.length;this._tail=n-1+s&this._capacityMask;var u=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&n>1e4&&n<=s>>>2&&this._shrinkArray(),u}},r.prototype.removeOne=function(n){var s=n;if(s===(s|0)&&this._head!==this._tail){var u=this.size(),l=this._list.length;if(!(s>=u||s<-u)){s<0&&(s+=u),s=this._head+s&this._capacityMask;var f=this._list[s],a;if(n<u/2){for(a=n;a>0;a--)this._list[s]=this._list[s=s-1+l&this._capacityMask];this._list[s]=void 0,this._head=this._head+1+l&this._capacityMask}else{for(a=u-1-n;a>0;a--)this._list[s]=this._list[s=s+1+l&this._capacityMask];this._list[s]=void 0,this._tail=this._tail-1+l&this._capacityMask}return f}}},r.prototype.remove=function(n,s){var u=n,l,f=s;if(u===(u|0)&&this._head!==this._tail){var a=this.size(),c=this._list.length;if(!(u>=a||u<-a||s<1)){if(u<0&&(u+=a),s===1||!s)return l=new Array(1),l[0]=this.removeOne(u),l;if(u===0&&u+s>=a)return l=this.toArray(),this.clear(),l;u+s>a&&(s=a-u);var d;for(l=new Array(s),d=0;d<s;d++)l[d]=this._list[this._head+u+d&this._capacityMask];if(u=this._head+u&this._capacityMask,n+s===a){for(this._tail=this._tail-s+c&this._capacityMask,d=s;d>0;d--)this._list[u=u+1+c&this._capacityMask]=void 0;return l}if(n===0){for(this._head=this._head+s+c&this._capacityMask,d=s-1;d>0;d--)this._list[u=u+1+c&this._capacityMask]=void 0;return l}if(u<a/2){for(this._head=this._head+n+s+c&this._capacityMask,d=n;d>0;d--)this.unshift(this._list[u=u-1+c&this._capacityMask]);for(u=this._head-1+c&this._capacityMask;f>0;)this._list[u=u-1+c&this._capacityMask]=void 0,f--;n<0&&(this._tail=u)}else{for(this._tail=u,u=u+s+c&this._capacityMask,d=a-(s+n);d>0;d--)this.push(this._list[u++]);for(u=this._tail;f>0;)this._list[u=u+1+c&this._capacityMask]=void 0,f--}return this._head<2&&this._tail>1e4&&this._tail<=c>>>2&&this._shrinkArray(),l}}},r.prototype.splice=function(n,s){var u=n;if(u===(u|0)){var l=this.size();if(u<0&&(u+=l),!(u>l))if(arguments.length>2){var f,a,c,d=arguments.length,h=this._list.length,g=2;if(!l||u<l/2){for(a=new Array(u),f=0;f<u;f++)a[f]=this._list[this._head+f&this._capacityMask];for(s===0?(c=[],u>0&&(this._head=this._head+u+h&this._capacityMask)):(c=this.remove(u,s),this._head=this._head+u+h&this._capacityMask);d>g;)this.unshift(arguments[--d]);for(f=u;f>0;f--)this.unshift(a[f-1])}else{a=new Array(l-(u+s));var p=a.length;for(f=0;f<p;f++)a[f]=this._list[this._head+u+s+f&this._capacityMask];for(s===0?(c=[],u!=l&&(this._tail=this._head+u+h&this._capacityMask)):(c=this.remove(u,s),this._tail=this._tail-p+h&this._capacityMask);g<d;)this.push(arguments[g++]);for(f=0;f<p;f++)this.push(a[f])}return c}else return this.remove(u,s)}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(n){for(var s=0;s<n.length;s++)this.push(n[s])},r.prototype._copyArray=function(n){var s=[],u=this._list,l=u.length,f;if(n||this._head>this._tail){for(f=this._head;f<l;f++)s.push(u[f]);for(f=0;f<this._tail;f++)s.push(u[f])}else for(f=this._head;f<this._tail;f++)s.push(u[f]);return s},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},o.exports=r}}),require_message_deliveries=__commonJS({"node_modules/libp2p-gossipsub/src/score/message-deliveries.js"(e){init_node_globals();var o=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDeliveries=e.DeliveryRecordStatus=void 0;var r=require_constants3(),t=o(require_denque()),n;(function(u){u[u.unknown=0]="unknown",u[u.valid=1]="valid",u[u.invalid=2]="invalid",u[u.ignored=3]="ignored"})(n=e.DeliveryRecordStatus||(e.DeliveryRecordStatus={}));var s=class{constructor(){this.records=new Map,this.queue=new t.default}ensureRecord(u){let l=this.records.get(u);if(l)return l;l={status:n.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(u,l);const f={msgId:u,expire:Date.now()+r.TimeCacheDuration};return this.queue.push(f),l}gc(){const u=Date.now();let l=this.queue.peekFront();for(;l&&l.expire<u;)this.records.delete(l.msgId),this.queue.shift(),l=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}};e.MessageDeliveries=s}}),require_peer_score=__commonJS({"node_modules/libp2p-gossipsub/src/score/peer-score.js"(e){init_node_globals();var o=e&&e.__awaiter||function(_,m,v,w){function y(b){return b instanceof v?b:new v(function(T){T(b)})}return new(v||(v=Promise))(function(b,T){function R(A){try{E(w.next(A))}catch(C){T(C)}}function S(A){try{E(w.throw(A))}catch(C){T(C)}}function E(A){A.done?b(A.value):y(A.value).then(R,S)}E((w=w.apply(_,m||[])).next())})},r=e&&e.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.PeerScore=void 0;var t=require_peer_score_params(),n=require_peer_stats(),s=require_compute_score(),u=require_message_deliveries(),l=require_constants3(),f=r(require_src5()),a=require_browser2(),c=require_errors3(),{ERR_INVALID_SIGNATURE:d,ERR_MISSING_SIGNATURE:h}=c.codes,g=a("libp2p:gossipsub:score"),p=class{constructor(_,m){t.validatePeerScoreParams(_),this.params=_,this._connectionManager=m,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new u.MessageDeliveries}start(){if(this._backgroundInterval){g("Peer score already running");return}this._backgroundInterval=setInterval(()=>this.background(),this.params.decayInterval),g("started")}stop(){if(!this._backgroundInterval){g("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),g("stopped")}background(){this._refreshScores(),this._updateIPs(),this.deliveryRecords.gc()}_refreshScores(){const _=Date.now(),m=this.params.decayToZero;this.peerStats.forEach((v,w)=>{if(!v.connected){_>v.expire&&(this._removeIPs(w,v.ips),this.peerStats.delete(w));return}Object.entries(v.topics).forEach(([y,b])=>{const T=this.params.topics[y];!T||(b.firstMessageDeliveries*=T.firstMessageDeliveriesDecay,b.firstMessageDeliveries<m&&(b.firstMessageDeliveries=0),b.meshMessageDeliveries*=T.meshMessageDeliveriesDecay,b.meshMessageDeliveries<m&&(b.meshMessageDeliveries=0),b.meshFailurePenalty*=T.meshFailurePenaltyDecay,b.meshFailurePenalty<m&&(b.meshFailurePenalty=0),b.invalidMessageDeliveries*=T.invalidMessageDeliveriesDecay,b.invalidMessageDeliveries<m&&(b.invalidMessageDeliveries=0),b.inMesh&&(b.meshTime=_-b.graftTime,b.meshTime>T.meshMessageDeliveriesActivation&&(b.meshMessageDeliveriesActive=!0)))}),v.behaviourPenalty*=this.params.behaviourPenaltyDecay,v.behaviourPenalty<m&&(v.behaviourPenalty=0),this.scoreCache.set(w,{score:null,cacheUntil:0})})}score(_){const m=this.peerStats.get(_);if(!m)return 0;const v=Date.now();let w=this.scoreCache.get(_);w===void 0&&(w={score:null,cacheUntil:0},this.scoreCache.set(_,w));const{score:y,cacheUntil:b}=w;return b>v&&y!==null?y:(w.score=s.computeScore(_,m,this.params,this.peerIPs),w.cacheUntil=v+this.params.decayInterval,w.score)}addPenalty(_,m){const v=this.peerStats.get(_);!v||(v.behaviourPenalty+=m,this.scoreCache.set(_,{score:null,cacheUntil:0}))}addPeer(_){const m=n.createPeerStats({connected:!0});this.peerStats.set(_,m);const v=this._getIPs(_);this._setIPs(_,v,m.ips),m.ips=v}removePeer(_){const m=this.peerStats.get(_);if(!!m){if(this.score(_)>0){this._removeIPs(_,m.ips),this.peerStats.delete(_);return}this.scoreCache.delete(_),Object.entries(m.topics).forEach(([v,w])=>{w.firstMessageDeliveries=0;const y=this.params.topics[v].meshMessageDeliveriesThreshold;if(w.inMesh&&w.meshMessageDeliveriesActive&&w.meshMessageDeliveries<y){const b=y-w.meshMessageDeliveries;w.meshFailurePenalty+=b*b}w.inMesh=!1}),m.connected=!1,m.expire=Date.now()+this.params.retainScore}}graft(_,m){const v=this.peerStats.get(_);if(!v)return;const w=n.ensureTopicStats(m,v,this.params);!w||(w.inMesh=!0,w.graftTime=Date.now(),w.meshTime=0,w.meshMessageDeliveriesActive=!1,this.scoreCache.set(_,{score:null,cacheUntil:0}))}prune(_,m){const v=this.peerStats.get(_);if(!v)return;const w=n.ensureTopicStats(m,v,this.params);if(!w)return;const y=this.params.topics[m].meshMessageDeliveriesThreshold;if(w.meshMessageDeliveriesActive&&w.meshMessageDeliveries<y){const b=y-w.meshMessageDeliveries;w.meshFailurePenalty+=b*b}w.inMesh=!1,this.scoreCache.set(_,{score:null,cacheUntil:0})}validateMessage(_){return o(this,void 0,void 0,function*(){this.deliveryRecords.ensureRecord(_)})}deliverMessage(_,m){return o(this,void 0,void 0,function*(){const v=_.receivedFrom;this._markFirstMessageDelivery(v,_);const w=this.deliveryRecords.ensureRecord(m),y=Date.now();if(w.status!==u.DeliveryRecordStatus.unknown){g("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",v,y-w.firstSeen,u.DeliveryRecordStatus[w.status]);return}w.status=u.DeliveryRecordStatus.valid,w.validated=y,w.peers.forEach(b=>{b!==v&&this._markDuplicateMessageDelivery(b,_)})})}rejectMessage(_,m,v){return o(this,void 0,void 0,function*(){const w=_.receivedFrom;switch(v){case h:case d:this._markInvalidMessageDelivery(w,_);return}const y=this.deliveryRecords.ensureRecord(m);if(y.status!==u.DeliveryRecordStatus.unknown){g("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",w,Date.now()-y.firstSeen,u.DeliveryRecordStatus[y.status]);return}switch(v){case l.ERR_TOPIC_VALIDATOR_IGNORE:y.status=u.DeliveryRecordStatus.ignored;return}y.status=u.DeliveryRecordStatus.invalid,this._markInvalidMessageDelivery(w,_),y.peers.forEach(b=>{this._markInvalidMessageDelivery(b,_)})})}duplicateMessage(_,m){return o(this,void 0,void 0,function*(){const v=_.receivedFrom,w=this.deliveryRecords.ensureRecord(m);if(!w.peers.has(v))switch(w.status){case u.DeliveryRecordStatus.unknown:w.peers.add(v);break;case u.DeliveryRecordStatus.valid:w.peers.add(v),this._markDuplicateMessageDelivery(v,_,w.validated);break;case u.DeliveryRecordStatus.invalid:this._markInvalidMessageDelivery(v,_);break}})}_markInvalidMessageDelivery(_,m){const v=this.peerStats.get(_);!v||(m.topicIDs.forEach(w=>{const y=n.ensureTopicStats(w,v,this.params);!y||(y.invalidMessageDeliveries+=1)}),this.scoreCache.set(_,{score:null,cacheUntil:0}))}_markFirstMessageDelivery(_,m){const v=this.peerStats.get(_);!v||(m.topicIDs.forEach(w=>{const y=n.ensureTopicStats(w,v,this.params);if(!y)return;let b=this.params.topics[w].firstMessageDeliveriesCap;y.firstMessageDeliveries+=1,y.firstMessageDeliveries>b&&(y.firstMessageDeliveries=b),!!y.inMesh&&(b=this.params.topics[w].meshMessageDeliveriesCap,y.meshMessageDeliveries+=1,y.meshMessageDeliveries>b&&(y.meshMessageDeliveries=b))}),this.scoreCache.set(_,{score:null,cacheUntil:0}))}_markDuplicateMessageDelivery(_,m,v=0){const w=this.peerStats.get(_);if(!w)return;const y=v?Date.now():0;m.topicIDs.forEach(b=>{const T=n.ensureTopicStats(b,w,this.params);if(!T||!T.inMesh)return;const R=this.params.topics[b];if(v&&y>v+R.meshMessageDeliveriesWindow)return;const S=R.meshMessageDeliveriesCap;T.meshMessageDeliveries+=1,T.meshMessageDeliveries>S&&(T.meshMessageDeliveries=S)}),this.scoreCache.set(_,{score:null,cacheUntil:0})}_getIPs(_){return this._connectionManager.getAll(f.default.createFromB58String(_)).map(m=>m.remoteAddr.toOptions().host)}_setIPs(_,m,v){e:for(const w of m){for(const b of v)if(w===b)continue e;let y=this.peerIPs.get(w);y||(y=new Set,this.peerIPs.set(w,y)),y.add(_)}e:for(const w of v){for(const b of m)if(w===b)continue e;const y=this.peerIPs.get(w);!y||(y.delete(_),y.size||this.peerIPs.delete(w))}this.scoreCache.set(_,{score:null,cacheUntil:0})}_removeIPs(_,m){m.forEach(v=>{const w=this.peerIPs.get(v);!w||(w.delete(_),w.size||this.peerIPs.delete(v))}),this.scoreCache.set(_,{score:null,cacheUntil:0})}_updateIPs(){this.peerStats.forEach((_,m)=>{const v=this._getIPs(m);this._setIPs(m,v,_.ips),_.ips=v,this.scoreCache.set(m,{score:null,cacheUntil:0})})}};e.PeerScore=p}}),require_score=__commonJS({"node_modules/libp2p-gossipsub/src/score/index.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(t,n,s,u){u===void 0&&(u=s),Object.defineProperty(t,u,{enumerable:!0,get:function(){return n[s]}})}:function(t,n,s,u){u===void 0&&(u=s),t[u]=n[s]}),r=e&&e.__exportStar||function(t,n){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&o(n,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(require_peer_score_params(),e),r(require_peer_score_thresholds(),e),r(require_peer_score(),e)}}),require_tracer=__commonJS({"node_modules/libp2p-gossipsub/src/tracer.js"(e){init_node_globals();var o=e&&e.__awaiter||function(f,a,c,d){function h(g){return g instanceof c?g:new c(function(p){p(g)})}return new(c||(c=Promise))(function(g,p){function _(w){try{v(d.next(w))}catch(y){p(y)}}function m(w){try{v(d.throw(w))}catch(y){p(y)}}function v(w){w.done?g(w.value):h(w.value).then(_,m)}v((d=d.apply(f,a||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.IWantTracer=void 0;var r=require_constants3(),t=require_utils10(),n=require_errors3(),{ERR_INVALID_SIGNATURE:s,ERR_MISSING_SIGNATURE:u}=n.codes,l=class{constructor(){this.promises=new Map}addPromise(f,a){const c=Math.floor(Math.random()*a.length),d=a[c],h=t.messageIdToString(d);let g=this.promises.get(h);g||(g=new Map,this.promises.set(h,g)),g.has(f)||g.set(f,Date.now()+r.GossipsubIWantFollowupTime)}getBrokenPromises(){const f=Date.now(),a=new Map;return this.promises.forEach((c,d)=>{c.forEach((h,g)=>{h<f&&(a.set(g,(a.get(g)||0)+1),c.delete(g))}),c.size||this.promises.delete(d)}),a}deliverMessage(f){return o(this,void 0,void 0,function*(){this.promises.delete(f)})}rejectMessage(f,a){return o(this,void 0,void 0,function*(){switch(a){case s:case u:return}this.promises.delete(f)})}clear(){this.promises.clear()}};e.IWantTracer=l}}),require_time_cache=__commonJS({"node_modules/libp2p-gossipsub/src/utils/time-cache.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleTimeCache=void 0;var o=class{constructor(r){this.lastPruneTime=0,this.entries=new Map,this.validityMs=r.validityMs}put(r,t){this.entries.set(r,{value:t,validUntilMs:Date.now()+this.validityMs}),this.prune()}prune(){const r=Date.now();if(!(r-this.lastPruneTime<200)){this.lastPruneTime=r;for(const[t,n]of this.entries.entries())if(n.validUntilMs<r)this.entries.delete(t);else break}}has(r){return this.entries.has(r)}get(r){const t=this.entries.get(r);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries=new Map,this.lastPruneTime=0}};e.SimpleTimeCache=o}}),require_errors4=__commonJS({"node_modules/libp2p/src/errors.js"(e){init_node_globals(),e.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available",CONN_ENCRYPTION_REQUIRED:"At least one connection encryption module is required",NOT_FOUND:"Not found"},e.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",DHT_NOT_STARTED:"ERR_DHT_NOT_STARTED",CONN_ENCRYPTION_REQUIRED:"ERR_CONN_ENCRYPTION_REQUIRED",ERR_PEER_DIAL_INTERCEPTED:"ERR_PEER_DIAL_INTERCEPTED",ERR_CONNECTION_INTERCEPTED:"ERR_CONNECTION_INTERCEPTED",ERR_INVALID_PROTOCOLS_FOR_STREAM:"ERR_INVALID_PROTOCOLS_FOR_STREAM",ERR_CONNECTION_ENDED:"ERR_CONNECTION_ENDED",ERR_CONNECTION_FAILED:"ERR_CONNECTION_FAILED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_ALREADY_ABORTED:"ERR_ALREADY_ABORTED",ERR_TOO_MANY_ADDRESSES:"ERR_TOO_MANY_ADDRESSES",ERR_NO_VALID_ADDRESSES:"ERR_NO_VALID_ADDRESSES",ERR_RELAYED_DIAL:"ERR_RELAYED_DIAL",ERR_DIALED_SELF:"ERR_DIALED_SELF",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF",ERR_DUPLICATE_TRANSPORT:"ERR_DUPLICATE_TRANSPORT",ERR_ENCRYPTION_FAILED:"ERR_ENCRYPTION_FAILED",ERR_HOP_REQUEST_FAILED:"ERR_HOP_REQUEST_FAILED",ERR_INVALID_KEY:"ERR_INVALID_KEY",ERR_INVALID_MESSAGE:"ERR_INVALID_MESSAGE",ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS",ERR_INVALID_PEER:"ERR_INVALID_PEER",ERR_MUXER_UNAVAILABLE:"ERR_MUXER_UNAVAILABLE",ERR_NOT_FOUND:"ERR_NOT_FOUND",ERR_TIMEOUT:"ERR_TIMEOUT",ERR_TRANSPORT_UNAVAILABLE:"ERR_TRANSPORT_UNAVAILABLE",ERR_TRANSPORT_DIAL_FAILED:"ERR_TRANSPORT_DIAL_FAILED",ERR_UNSUPPORTED_PROTOCOL:"ERR_UNSUPPORTED_PROTOCOL",ERR_INVALID_MULTIADDR:"ERR_INVALID_MULTIADDR",ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID",ERR_FIND_SELF:"ERR_FIND_SELF",ERR_NO_ROUTERS_AVAILABLE:"ERR_NO_ROUTERS_AVAILABLE",ERR_CONNECTION_NOT_MULTIPLEXED:"ERR_CONNECTION_NOT_MULTIPLEXED",ERR_NO_DIAL_TOKENS:"ERR_NO_DIAL_TOKENS",ERR_KEYCHAIN_REQUIRED:"ERR_KEYCHAIN_REQUIRED",ERR_INVALID_CMS:"ERR_INVALID_CMS",ERR_MISSING_KEYS:"ERR_MISSING_KEYS",ERR_NO_KEY:"ERR_NO_KEY",ERR_INVALID_KEY_NAME:"ERR_INVALID_KEY_NAME",ERR_INVALID_KEY_TYPE:"ERR_INVALID_KEY_TYPE",ERR_KEY_ALREADY_EXISTS:"ERR_KEY_ALREADY_EXISTS",ERR_INVALID_KEY_SIZE:"ERR_INVALID_KEY_SIZE",ERR_KEY_NOT_FOUND:"ERR_KEY_NOT_FOUND",ERR_OLD_KEY_NAME_INVALID:"ERR_OLD_KEY_NAME_INVALID",ERR_NEW_KEY_NAME_INVALID:"ERR_NEW_KEY_NAME_INVALID",ERR_PASSWORD_REQUIRED:"ERR_PASSWORD_REQUIRED",ERR_PEM_REQUIRED:"ERR_PEM_REQUIRED",ERR_CANNOT_READ_KEY:"ERR_CANNOT_READ_KEY",ERR_MISSING_PRIVATE_KEY:"ERR_MISSING_PRIVATE_KEY",ERR_INVALID_OLD_PASS_TYPE:"ERR_INVALID_OLD_PASS_TYPE",ERR_INVALID_NEW_PASS_TYPE:"ERR_INVALID_NEW_PASS_TYPE",ERR_INVALID_PASS_LENGTH:"ERR_INVALID_PASS_LENGTH",ERR_NOT_IMPLEMENTED:"ERR_NOT_IMPLEMENTED",ERR_WRONG_PING_ACK:"ERR_WRONG_PING_ACK"}}}),require_envelope=__commonJS({"node_modules/libp2p/src/record/envelope/envelope.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-envelope"]||(r.roots["libp2p-envelope"]={});u.Envelope=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.publicKey=s.newBuffer([]),l.prototype.payloadType=s.newBuffer([]),l.prototype.payload=s.newBuffer([]),l.prototype.signature=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),a.publicKey!=null&&Object.hasOwnProperty.call(a,"publicKey")&&c.uint32(10).bytes(a.publicKey),a.payloadType!=null&&Object.hasOwnProperty.call(a,"payloadType")&&c.uint32(18).bytes(a.payloadType),a.payload!=null&&Object.hasOwnProperty.call(a,"payload")&&c.uint32(26).bytes(a.payload),a.signature!=null&&Object.hasOwnProperty.call(a,"signature")&&c.uint32(42).bytes(a.signature),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.Envelope;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.publicKey=a.bytes();break;case 2:h.payloadType=a.bytes();break;case 3:h.payload=a.bytes();break;case 5:h.signature=a.bytes();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.Envelope)return a;var c=new u.Envelope;return a.publicKey!=null&&(typeof a.publicKey=="string"?s.base64.decode(a.publicKey,c.publicKey=s.newBuffer(s.base64.length(a.publicKey)),0):a.publicKey.length&&(c.publicKey=a.publicKey)),a.payloadType!=null&&(typeof a.payloadType=="string"?s.base64.decode(a.payloadType,c.payloadType=s.newBuffer(s.base64.length(a.payloadType)),0):a.payloadType.length&&(c.payloadType=a.payloadType)),a.payload!=null&&(typeof a.payload=="string"?s.base64.decode(a.payload,c.payload=s.newBuffer(s.base64.length(a.payload)),0):a.payload.length&&(c.payload=a.payload)),a.signature!=null&&(typeof a.signature=="string"?s.base64.decode(a.signature,c.signature=s.newBuffer(s.base64.length(a.signature)),0):a.signature.length&&(c.signature=a.signature)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(c.bytes===String?d.publicKey="":(d.publicKey=[],c.bytes!==Array&&(d.publicKey=s.newBuffer(d.publicKey))),c.bytes===String?d.payloadType="":(d.payloadType=[],c.bytes!==Array&&(d.payloadType=s.newBuffer(d.payloadType))),c.bytes===String?d.payload="":(d.payload=[],c.bytes!==Array&&(d.payload=s.newBuffer(d.payload))),c.bytes===String?d.signature="":(d.signature=[],c.bytes!==Array&&(d.signature=s.newBuffer(d.signature)))),a.publicKey!=null&&a.hasOwnProperty("publicKey")&&(d.publicKey=c.bytes===String?s.base64.encode(a.publicKey,0,a.publicKey.length):c.bytes===Array?Array.prototype.slice.call(a.publicKey):a.publicKey),a.payloadType!=null&&a.hasOwnProperty("payloadType")&&(d.payloadType=c.bytes===String?s.base64.encode(a.payloadType,0,a.payloadType.length):c.bytes===Array?Array.prototype.slice.call(a.payloadType):a.payloadType),a.payload!=null&&a.hasOwnProperty("payload")&&(d.payload=c.bytes===String?s.base64.encode(a.payload,0,a.payload.length):c.bytes===Array?Array.prototype.slice.call(a.payload):a.payload),a.signature!=null&&a.hasOwnProperty("signature")&&(d.signature=c.bytes===String?s.base64.encode(a.signature,0,a.signature.length):c.bytes===Array?Array.prototype.slice.call(a.signature):a.signature),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_envelope2=__commonJS({"node_modules/libp2p/src/record/envelope/index.js"(e,o){init_node_globals();var r=require_err_code(),{concat:t}=(init_concat(),__toCommonJS(concat_exports)),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports)),s=require_keys2(),u=require_src5(),l=require_varint(),{equals:f}=(init_equals(),__toCommonJS(equals_exports)),{codes:a}=require_errors4(),{Envelope:c}=require_envelope(),d=class{constructor({peerId:g,payloadType:p,payload:_,signature:m}){this.peerId=g,this.payloadType=p,this.payload=_,this.signature=m,this._marshal=void 0}marshal(){if(this._marshal)return this._marshal;const g=s.marshalPublicKey(this.peerId.pubKey);return this._marshal=c.encode({publicKey:g,payloadType:this.payloadType,payload:this.payload,signature:this.signature}).finish(),this._marshal}equals(g){return f(this.peerId.pubKey.bytes,g.peerId.pubKey.bytes)&&f(this.payloadType,g.payloadType)&&f(this.payload,g.payload)&&f(this.signature,g.signature)}validate(g){const p=h(g,this.payloadType,this.payload);return this.peerId.pubKey.verify(p,this.signature)}},h=(g,p,_)=>{const m=n(g),v=l.encode(m.byteLength),w=l.encode(p.length),y=l.encode(_.length);return t([new Uint8Array(v),m,new Uint8Array(w),p,new Uint8Array(y),_])};d.createFromProtobuf=async g=>{const p=c.decode(g),_=await u.createFromPubKey(p.publicKey);return new d({peerId:_,payloadType:p.payloadType,payload:p.payload,signature:p.signature})},d.seal=async(g,p)=>{const _=g.domain,m=g.codec,v=g.marshal(),w=h(_,m,v),y=await p.privKey.sign(w);return new d({peerId:p,payloadType:m,payload:v,signature:y})},d.openAndCertify=async(g,p)=>{const _=await d.createFromProtobuf(g);if(!await _.validate(p))throw r(new Error("envelope signature is not valid for the given domain"),a.ERR_SIGNATURE_NOT_VALID);return _},o.exports=d}}),require_src12=__commonJS({"node_modules/libp2p-gossipsub/src/index.js"(e,o){init_node_globals();var r=e&&e.__createBinding||(Object.create?function(b,T,R,S){S===void 0&&(S=R),Object.defineProperty(b,S,{enumerable:!0,get:function(){return T[R]}})}:function(b,T,R,S){S===void 0&&(S=R),b[S]=T[R]}),t=e&&e.__setModuleDefault||(Object.create?function(b,T){Object.defineProperty(b,"default",{enumerable:!0,value:T})}:function(b,T){b.default=T}),n=e&&e.__importStar||function(b){if(b&&b.__esModule)return b;var T={};if(b!=null)for(var R in b)R!=="default"&&Object.prototype.hasOwnProperty.call(b,R)&&r(T,b,R);return t(T,b),T},s=e&&e.__awaiter||function(b,T,R,S){function E(A){return A instanceof R?A:new R(function(C){C(A)})}return new(R||(R=Promise))(function(A,C){function I(k){try{O(S.next(k))}catch(N){C(N)}}function P(k){try{O(S.throw(k))}catch(N){C(N)}}function O(k){k.done?A(k.value):E(k.value).then(I,P)}O((S=S.apply(b,T||[])).next())})},u=n(require_pubsub2()),l=require_message_cache(),f=require_rpc3(),a=n(require_constants3()),c=require_heartbeat(),d=require_get_gossip_peers(),h=require_utils10(),g=require_score(),p=require_tracer(),_=require_time_cache(),m=require_src5(),v=require_envelope2(),w=require_constants3(),y=class extends u.default{constructor(b,T={}){var R;const S=[a.GossipsubIDv11,a.GossipsubIDv10],E=Object.assign(Object.assign({gossipIncoming:!0,fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:a.GossipsubD,Dlo:a.GossipsubDlo,Dhi:a.GossipsubDhi,Dscore:a.GossipsubDscore,Dout:a.GossipsubDout,Dlazy:a.GossipsubDlazy,heartbeatInterval:a.GossipsubHeartbeatInterval,fanoutTTL:a.GossipsubFanoutTTL,mcacheLength:a.GossipsubHistoryLength,mcacheGossip:a.GossipsubHistoryGossip,seenTTL:a.GossipsubSeenTTL},T),{scoreParams:g.createPeerScoreParams(T.scoreParams),scoreThresholds:g.createPeerScoreThresholds(T.scoreThresholds)});E.fallbackToFloodsub&&S.push(a.FloodsubID);super(Object.assign({debugName:"libp2p:gossipsub",multicodecs:S,libp2p:b},E));this._options=E,this.direct=new Set(E.directPeers.map(A=>A.id.toB58String())),this.acceptFromWhitelist=new Map,E.directPeers.forEach(A=>{b.peerStore.addressBook.add(A.id,A.addrs)}),this.seenCache=new _.SimpleTimeCache({validityMs:E.seenTTL}),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.messageCache=T.messageCache||new l.MessageCache(E.mcacheGossip,E.mcacheLength),this.getFastMsgIdStr=(R=T.fastMsgIdFn)!==null&&R!==void 0?R:void 0,this.fastMsgIdCache=T.fastMsgIdFn?new _.SimpleTimeCache({validityMs:E.seenTTL}):void 0,this.heartbeat=new c.Heartbeat(this),this.heartbeatTicks=0,this.gossipTracer=new p.IWantTracer,this._libp2p=b,this.score=new g.PeerScore(this._options.scoreParams,b.connectionManager)}_decodeRpc(b){return f.RPC.decode(b)}_encodeRpc(b){return f.RPC.encode(b).finish()}_addPeer(b,T){const R=super._addPeer(b,T);this.score.addPeer(b.toB58String());let S=!1;for(const E of this._libp2p.connectionManager.getAll(b))if(E.stat.direction==="outbound"&&Array.from(E.registry.values()).some(A=>T===A.protocol)){S=!0;break}return this.outbound.set(R.id.toB58String(),S),R}_removePeer(b){const T=super._removePeer(b),R=b.toB58String();for(const S of this.mesh.values())S.delete(R);for(const S of this.fanout.values())S.delete(R);return this.gossip.delete(R),this.control.delete(R),this.outbound.delete(R),this.score.removePeer(R),this.acceptFromWhitelist.delete(R),T}_processRpc(b,T,R){const S=Object.create(null,{_processRpc:{get:()=>super._processRpc}});return s(this,void 0,void 0,function*(){return(yield S._processRpc.call(this,b,T,R))?(R.control&&(yield this._processRpcControlMessage(b,R.control)),!0):!1})}_processRpcControlMessage(b,T){return s(this,void 0,void 0,function*(){if(!T)return;const R=T.ihave?this._handleIHave(b,T.ihave):[],S=T.iwant?this._handleIWant(b,T.iwant):[],E=T.graft?yield this._handleGraft(b,T.graft):[];if(T.prune&&this._handlePrune(b,T.prune),!R.length&&!S.length&&!E.length)return;const A=h.createGossipRpc(S,{iwant:R,prune:E});this._sendRpc(b,A)})}_processRpcMessage(b){const T=Object.create(null,{_processRpcMessage:{get:()=>super._processRpcMessage}});return s(this,void 0,void 0,function*(){let R;if(this.getFastMsgIdStr&&this.fastMsgIdCache){const S=yield this.getFastMsgIdStr(b);if(R=this.fastMsgIdCache.get(S),R!==void 0){this.score.duplicateMessage(b,R);return}R=h.messageIdToString(yield this.getMsgId(b)),this.fastMsgIdCache.put(S,R)}else if(R=h.messageIdToString(yield this.getMsgId(b)),this.seenCache.has(R)){this.score.duplicateMessage(b,R);return}this.seenCache.put(R),yield this.score.validateMessage(R),yield T._processRpcMessage.call(this,b)})}_acceptFrom(b){if(this.direct.has(b))return!0;const T=Date.now(),R=this.acceptFromWhitelist.get(b);if(R&&R.messagesAccepted<w.ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&R.acceptUntil>=T)return R.messagesAccepted+=1,!0;const S=this.score.score(b);return S>=w.ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(b,{messagesAccepted:0,acceptUntil:T+w.ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(b),S>=this._options.scoreThresholds.graylistThreshold}validate(b){const T=Object.create(null,{validate:{get:()=>super.validate}});return s(this,void 0,void 0,function*(){try{yield T.validate.call(this,b)}catch(R){const S=yield this.getCanonicalMsgIdStr(b);throw this.score.rejectMessage(b,S,R.code),this.gossipTracer.rejectMessage(S,R.code),R}})}_handleIHave(b,T){if(!T.length)return[];const R=this.score.score(b);if(R<this._options.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",b,R),[];const S=(this.peerhave.get(b)||0)+1;if(this.peerhave.set(b,S),S>a.GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",b,S),[];const E=this.iasked.get(b)||0;if(E>=a.GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",b,E),[];const A=new Map;if(T.forEach(({topicID:P,messageIDs:O})=>{!P||!O||!this.mesh.has(P)||O.forEach(k=>{const N=h.messageIdToString(k);this.seenCache.has(N)||A.set(N,k)})}),!A.size)return[];let C=A.size;C+E>a.GossipsubMaxIHaveLength&&(C=a.GossipsubMaxIHaveLength-E),this.log("IHAVE: Asking for %d out of %d messages from %s",C,A.size,b);let I=Array.from(A.values());return h.shuffle(I),I=I.slice(0,C),this.iasked.set(b,E+C),this.gossipTracer.addPromise(b,I),[{messageIDs:I}]}_handleIWant(b,T){if(!T.length)return[];const R=this.score.score(b);if(R<this._options.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",b,R),[];const S=new Map;return T.forEach(({messageIDs:E})=>{E&&E.forEach(A=>{const C=h.messageIdToString(A),[I,P]=this.messageCache.getForPeer(C,b);if(!!I){if(P>a.GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",b,A);return}S.set(C,I)}})}),S.size?(this.log("IWANT: Sending %d messages to %s",S.size,b),Array.from(S.values()).map(u.utils.normalizeOutRpcMessage)):[]}_handleGraft(b,T){return s(this,void 0,void 0,function*(){const R=[],S=this.score.score(b),E=this._now();let A=this._options.doPX;return T.forEach(({topicID:C})=>{var I;if(!C)return;const P=this.mesh.get(C);if(!P){A=!1;return}if(P.has(b))return;if(this.direct.has(b)){this.log("GRAFT: ignoring request from direct peer %s",b),R.push(C),A=!1;return}const O=(I=this.backoff.get(C))===null||I===void 0?void 0:I.get(b);if(typeof O=="number"&&E<O){this.log("GRAFT: ignoring backed off peer %s",b),this.score.addPenalty(b,1),A=!1;const k=O+a.GossipsubGraftFloodThreshold-a.GossipsubPruneBackoff;E<k&&this.score.addPenalty(b,1),this._addBackoff(b,C),R.push(C);return}if(S<0){this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",b,S,C),R.push(C),A=!1,this._addBackoff(b,C);return}if(P.size>=this._options.Dhi&&!this.outbound.get(b)){R.push(C),this._addBackoff(b,C);return}this.log("GRAFT: Add mesh link from %s in %s",b,C),this.score.graft(b,C),P.add(b)}),R.length?Promise.all(R.map(C=>this._makePrune(b,C,A))):[]})}_handlePrune(b,T){const R=this.score.score(b);T.forEach(({topicID:S,backoff:E,peers:A})=>{if(!S)return;const C=this.mesh.get(S);if(!!C&&(this.log("PRUNE: Remove mesh link to %s in %s",b,S),this.score.prune(b,S),C.delete(b),typeof E=="number"&&E>0?this._doAddBackoff(b,S,E*1e3):this._addBackoff(b,S),A&&A.length)){if(R<this._options.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",b,R,S);return}this._pxConnect(A)}})}_addBackoff(b,T){this._doAddBackoff(b,T,a.GossipsubPruneBackoff)}_doAddBackoff(b,T,R){let S=this.backoff.get(T);S||(S=new Map,this.backoff.set(T,S));const E=this._now()+R;(S.get(b)||0)<E&&S.set(b,E)}_applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((b,T)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",T,b),this.score.addPenalty(T,b)})}_clearBackoff(){if(this.heartbeatTicks%a.GossipsubPruneBackoffTicks!=0)return;const b=this._now();this.backoff.forEach((T,R)=>{T.forEach((S,E)=>{S<b&&T.delete(E)}),T.size===0&&this.backoff.delete(R)})}_directConnect(){if(this.heartbeatTicks%a.GossipsubDirectConnectTicks!=0)return;const b=[];this.direct.forEach(T=>{const R=this.peers.get(T);(!R||!R.isWritable)&&b.push(T)}),b.length&&b.forEach(T=>{this._connect(T)})}_pxConnect(b){return s(this,void 0,void 0,function*(){b.length>a.GossipsubPrunePeers&&(h.shuffle(b),b=b.slice(0,a.GossipsubPrunePeers));const T=[];yield Promise.all(b.map(R=>s(this,void 0,void 0,function*(){if(!R.peerID)return;const E=m.createFromBytes(R.peerID).toB58String();if(!this.peers.has(E)){if(!R.signedPeerRecord){T.push(E);return}try{const A=yield v.openAndCertify(R.signedPeerRecord,"libp2p-peer-record"),C=A.peerId.toB58String();if(E!==C){this.log("bogus peer record obtained through px: peer ID %s doesn't match expected peer %s",C,E);return}if(!this._libp2p.peerStore.addressBook.consumePeerRecord(A)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}T.push(E)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}}))),!!T.length&&T.forEach(R=>this._connect(R))})}start(){const b=Object.create(null,{start:{get:()=>super.start}});return s(this,void 0,void 0,function*(){yield b.start.call(this),this.heartbeat.start(),this.score.start(),this._directPeerInitial=setTimeout(()=>{this.direct.forEach(T=>{this._connect(T)})},a.GossipsubDirectConnectInitialDelay)})}stop(){const b=Object.create(null,{stop:{get:()=>super.stop}});return s(this,void 0,void 0,function*(){yield b.stop.call(this),this.heartbeat.stop(),this.score.stop(),this.mesh=new Map,this.fanout=new Map,this.lastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),clearTimeout(this._directPeerInitial)})}_connect(b){this.log("Initiating connection with %s",b),this._libp2p.dialProtocol(m.createFromB58String(b),this.multicodecs)}subscribe(b){super.subscribe(b),this.join(b)}unsubscribe(b){super.unsubscribe(b),this.leave(b)}join(b){if(!this.started)throw new Error("Gossipsub has not started");this.log("JOIN %s",b);const T=this.fanout.get(b);if(T)T.forEach(R=>{this.score.score(R)<0&&T.delete(R)}),T.size<this._options.D&&d.getGossipPeers(this,b,this._options.D-T.size,R=>!T.has(R)&&!this.direct.has(R)&&this.score.score(R)>=0).forEach(R=>T.add(R)),this.mesh.set(b,T),this.fanout.delete(b),this.lastpub.delete(b);else{const R=d.getGossipPeers(this,b,this._options.D,S=>!this.direct.has(S)&&this.score.score(S)>=0);this.mesh.set(b,R)}this.mesh.get(b).forEach(R=>{this.log("JOIN: Add mesh link to %s in %s",R,b),this._sendGraft(R,b)})}leave(b){if(!this.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",b);const T=this.mesh.get(b);T&&(T.forEach(R=>{this.log("LEAVE: Remove mesh link to %s in %s",R,b),this._sendPrune(R,b)}),this.mesh.delete(b))}getCanonicalMsgIdStr(b){var T,R;return s(this,void 0,void 0,function*(){return this.fastMsgIdCache&&this.getFastMsgIdStr?(R=(T=this.getCachedMsgIdStr(b))!==null&&T!==void 0?T:this.fastMsgIdCache.get(this.getFastMsgIdStr(b)))!==null&&R!==void 0?R:h.messageIdToString(yield this.getMsgId(b)):h.messageIdToString(yield this.getMsgId(b))})}getCachedMsgIdStr(b){}_publish(b){return s(this,void 0,void 0,function*(){const T=yield this.getCanonicalMsgIdStr(b);b.receivedFrom!==this.peerId.toB58String()&&(this.score.deliverMessage(b,T),this.gossipTracer.deliverMessage(T)),this.seenCache.put(T),this.messageCache.put(b,T);const R=new Set;b.topicIDs.forEach(E=>{const A=this.topics.get(E);if(!!A)if(this._options.floodPublish&&b.from===this.peerId.toB58String())A.forEach(C=>{(this.direct.has(C)||this.score.score(C)>=this._options.scoreThresholds.publishThreshold)&&R.add(C)});else{this.direct.forEach(I=>{R.add(I)}),A.forEach(I=>{const P=this.score.score(I),O=this.peers.get(I);!O||O.protocol===a.FloodsubID&&P>=this._options.scoreThresholds.publishThreshold&&R.add(I)});let C=this.mesh.get(E);if(!C||!C.size){if(C=this.fanout.get(E),!C){const I=d.getGossipPeers(this,E,this._options.D,P=>this.score.score(P)>=this._options.scoreThresholds.publishThreshold);I.size>0?(C=I,this.fanout.set(E,I)):C=new Set}this.lastpub.set(E,this._now())}C.forEach(I=>{R.add(I)})}});const S=h.createGossipRpc([u.utils.normalizeOutRpcMessage(b)]);R.forEach(E=>{E!==b.from&&this._sendRpc(E,S)})})}_sendGraft(b,T){const R=[{topicID:T}],S=h.createGossipRpc([],{graft:R});this._sendRpc(b,S)}_sendPrune(b,T){return s(this,void 0,void 0,function*(){const R=[yield this._makePrune(b,T,this._options.doPX)],S=h.createGossipRpc([],{prune:R});this._sendRpc(b,S)})}_sendRpc(b,T){const R=this.peers.get(b);if(!R||!R.isWritable)return;const S=this.control.get(b);S&&(this._piggybackControl(b,T,S),this.control.delete(b));const E=this.gossip.get(b);E&&(this._piggybackGossip(b,T,E),this.gossip.delete(b)),R.write(f.RPC.encode(T).finish())}_piggybackControl(b,T,R){const S=(R.graft||[]).filter(({topicID:A})=>(A&&this.mesh.get(A)||new Set).has(b)),E=(R.prune||[]).filter(({topicID:A})=>!(A&&this.mesh.get(A)||new Set).has(b));!S.length&&!E.length||(T.control?(T.control.graft=T.control.graft&&T.control.graft.concat(S),T.control.prune=T.control.prune&&T.control.prune.concat(E)):T.control={ihave:[],iwant:[],graft:S,prune:E})}_piggybackGossip(b,T,R){T.control||(T.control={ihave:[],iwant:[],graft:[],prune:[]}),T.control.ihave=R}_sendGraftPrune(b,T,R){return s(this,void 0,void 0,function*(){const S=this._options.doPX;for(const[E,A]of b){const C=A.map(k=>({topicID:k}));let I=[];const P=T.get(E);P&&(I=yield Promise.all(P.map(k=>this._makePrune(E,k,S&&!R.get(E)))),T.delete(E));const O=h.createGossipRpc([],{graft:C,prune:I});this._sendRpc(E,O)}for(const[E,A]of T){const C=yield Promise.all(A.map(P=>this._makePrune(E,P,S&&!R.get(E)))),I=h.createGossipRpc([],{prune:C});this._sendRpc(E,I)}})}_emitGossip(b,T){const R=this.messageCache.getGossipIDs(b);if(!R.length)return;h.shuffle(R),R.length>a.GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",R.length);const S=[],E=this.topics.get(b);if(!E)return;E.forEach(I=>{const P=this.peers.get(I);!P||!T.has(I)&&!this.direct.has(I)&&h.hasGossipProtocol(P.protocol)&&this.score.score(I)>=this._options.scoreThresholds.gossipThreshold&&S.push(I)});let A=this._options.Dlazy;const C=a.GossipsubGossipFactor*S.length;C>A&&(A=C),A>S.length?A=S.length:h.shuffle(S),S.slice(0,A).forEach(I=>{let P=R;R.length>a.GossipsubMaxIHaveLength&&(P=h.shuffle(P.slice()).slice(0,a.GossipsubMaxIHaveLength)),this._pushGossip(I,{topicID:b,messageIDs:P})})}_flush(){for(const[b,T]of this.gossip.entries()){this.gossip.delete(b);const R=h.createGossipRpc([],{ihave:T});this._sendRpc(b,R)}for(const[b,T]of this.control.entries()){this.control.delete(b);const R=h.createGossipRpc([],{graft:T.graft,prune:T.prune});this._sendRpc(b,R)}}_pushGossip(b,T){this.log("Add gossip to %s",b);const R=this.gossip.get(b)||[];this.gossip.set(b,R.concat(T))}_now(){return Date.now()}_makePrune(b,T,R){return s(this,void 0,void 0,function*(){if(this.peers.get(b).protocol===a.GossipsubIDv10)return{topicID:T,peers:[]};const S=a.GossipsubPruneBackoff/1e3;if(!R)return{topicID:T,peers:[],backoff:S};const E=d.getGossipPeers(this,T,a.GossipsubPrunePeers,C=>C!==b&&this.score.score(C)>=0),A=yield Promise.all(Array.from(E).map(C=>s(this,void 0,void 0,function*(){const I=m.createFromB58String(C);return{peerID:I.toBytes(),signedPeerRecord:yield this._libp2p.peerStore.addressBook.getRawEnvelope(I)}})));return{topicID:T,peers:A,backoff:S}})}};y.multicodec=a.GossipsubIDv11,o.exports=y}}),libp2p_pubsub_routers_browser_exports={};__export(libp2p_pubsub_routers_browser_exports,{routers:()=>routers});var import_libp2p_gossipsub,routers,init_libp2p_pubsub_routers_browser=__esm({"node_modules/ipfs-core-config/esm/src/libp2p-pubsub-routers.browser.js"(){init_node_globals(),import_libp2p_gossipsub=__toESM(require_src12(),1),routers={gossipsub:import_libp2p_gossipsub.default}}}),require_src13=__commonJS({"node_modules/libp2p-delegated-peer-routing/src/index.js"(e,o){init_node_globals();var r=require_src5(),{base58btc:t}=(init_base58(),__toCommonJS(base58_exports)),{default:n}=require_dist(),s=require_p_defer(),u=require_browser2(),l=u("libp2p-delegated-peer-routing");l.error=u("libp2p-delegated-peer-routing:error");var f=3e4,a=4,c=class{constructor(d){if(d==null)throw new Error("missing ipfs http client");this._client=d,this._httpQueue=new n({concurrency:a});const{protocol:h,host:g,port:p}=d.getEndpointConfig();l(`enabled DelegatedPeerRouting via ${h}://${g}:${p}`)}async findPeer(d,h={}){let g=d;r.isPeerId(g)&&(g=d.toB58String()),l("findPeer starts: "+d),h.timeout=h.timeout||f;try{return await this._httpQueue.add(async()=>{const{addrs:p}=await this._client.dht.findPeer(g,{timeout:h.timeout});return{id:d,multiaddrs:p}})}catch(p){if(p.message.includes("not found"))return;throw p}finally{l("findPeer finished: "+d)}}async*getClosestPeers(d,h={}){const g=t.encode(d).substring(1);l("getClosestPeers starts:",g),h.timeout=h.timeout||f;const p=s(),_=s();this._httpQueue.add(()=>(p.resolve(),_.promise));try{await p.promise;for await(const m of this._client.dht.query(g,{timeout:h.timeout}))switch(m.type){case 1:for(const v of m.responses)yield{id:r.parse(v.id),multiaddrs:v.addrs};break;default:l("getClosestPeers unhandled response",m)}}catch(m){throw l.error("getClosestPeers errored:",m),m}finally{_.resolve(),l("getClosestPeers finished:",g)}}};o.exports=c}}),require_src14=__commonJS({"node_modules/libp2p-delegated-content-routing/src/index.js"(e,o){init_node_globals();var r=require_browser2(),t=require_src5(),n=require_it_drain(),{default:s}=require_dist(),u=require_p_defer(),l=r("libp2p-delegated-content-routing");l.error=r("libp2p-delegated-content-routing:error");var f=3e4,a=4,c=class{constructor(d,h){if(d==null)throw new Error("missing self peerId");if(h==null)throw new Error("missing ipfs http client");this._client=h,this.peerId=d;const g={concurrency:a};this._httpQueue=new s(g),this._httpQueueRefs=new s(Object.assign({},g,{concurrency:2}));const{protocol:p,host:_,port:m}=h.getEndpointConfig();l(`enabled DelegatedContentRouting via ${p}://${_}:${m}`)}async*findProviders(d,h={}){l(`findProviders starts: ${d}`),h.timeout=h.timeout||f;let g=0;const p=u(),_=u();this._httpQueue.add(()=>(p.resolve(),_.promise));try{await p.promise;for await(const{id:m,addrs:v}of this._client.dht.findProvs(d,{numProviders:h.numProviders,timeout:h.timeout}))yield{id:t.parse(m),multiaddrs:v},g++}catch(m){throw l.error("findProviders errored:",m),m}finally{_.resolve(),l(`findProviders finished: ${d} found ${g} providers`)}}async provide(d){l(`provide starts: ${d}`),await this._httpQueueRefs.add(async()=>{await this._client.block.stat(d),await n(this._client.dht.provide(d))}),l(`provide finished: ${d}`)}};o.exports=c}}),multibases_exports={};__export(multibases_exports,{Multibases:()=>Multibases});var LOAD_BASE,Multibases,init_multibases=__esm({"node_modules/ipfs-core-utils/esm/src/multibases.js"(){init_node_globals(),LOAD_BASE=e=>Promise.reject(new Error(`No base found for "${e}"`)),Multibases=class{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||LOAD_BASE;for(const o of e.bases)this.addBase(o)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const o=await this._loadBase(e);return this._basesByName[o.name]==null&&this._basesByPrefix[o.prefix]==null&&this.addBase(o),o}listBases(){return Object.values(this._basesByName)}}}}),multicodecs_exports={};__export(multicodecs_exports,{Multicodecs:()=>Multicodecs});var LOAD_CODEC,Multicodecs,init_multicodecs=__esm({"node_modules/ipfs-core-utils/esm/src/multicodecs.js"(){init_node_globals(),LOAD_CODEC=e=>Promise.reject(new Error(`No codec found for "${e}"`)),Multicodecs=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||LOAD_CODEC;for(const o of e.codecs)this.addCodec(o)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const o=typeof e=="string"?this._codecsByName:this._codecsByCode;if(o[e])return o[e];const r=await this._loadCodec(e);return o[e]==null&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}}}),multihashes_exports={};__export(multihashes_exports,{Multihashes:()=>Multihashes});var LOAD_HASHER,Multihashes,init_multihashes=__esm({"node_modules/ipfs-core-utils/esm/src/multihashes.js"(){init_node_globals(),LOAD_HASHER=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),Multihashes=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||LOAD_HASHER;for(const o of e.hashers)this.addHasher(o)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const o=typeof e=="string"?this._hashersByName:this._hashersByCode;if(o[e])return o[e];const r=await this._loadHasher(e);return o[e]==null&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}}}),esm_exports5={};__export(esm_exports5,{code:()=>code8,decode:()=>decode15,encode:()=>encode14,name:()=>name8});function cidEncoder5(e){if(e.asCID!==e)return null;const o=CID.asCID(e);if(!o)return null;const r=new Uint8Array(o.bytes.byteLength+1);return r.set(o.bytes,1),[new Token(Type.tag,CID_CBOR_TAG4),new Token(Type.bytes,r)]}function undefinedEncoder5(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder5(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function cidDecoder4(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(e.subarray(1))}var CID_CBOR_TAG4,encodeOptions5,decodeOptions5,name8,code8,encode14,decode15,init_esm6=__esm({"node_modules/ipfs-http-client/node_modules/@ipld/dag-cbor/esm/index.js"(){init_node_globals(),init_cborg(),init_cid(),CID_CBOR_TAG4=42,encodeOptions5={float64:!0,typeEncoders:{Object:cidEncoder5,undefined:undefinedEncoder5,number:numberEncoder5}},decodeOptions5={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]},decodeOptions5.tags[CID_CBOR_TAG4]=cidDecoder4,name8="dag-cbor",code8=113,encode14=e=>encode4(e,encodeOptions5),decode15=e=>decode6(e,decodeOptions5)}});function toUrlString(e){try{e=(0,import_multiaddr_to_uri.default)(new import_multiaddr2.Multiaddr(e))}catch{}return e=e.toString(),e}var import_multiaddr2,import_multiaddr_to_uri,init_to_url_string=__esm({"node_modules/ipfs-core-utils/esm/src/to-url-string.js"(){init_node_globals(),import_multiaddr2=__toESM(require_src(),1),import_multiaddr_to_uri=__toESM(require_multiaddr_to_uri(),1)}}),agent_browser_default,init_agent_browser=__esm({"node_modules/ipfs-core-utils/esm/src/agent.browser.js"(){init_node_globals(),agent_browser_default=()=>{}}}),import_multiaddr3,import_env,import_debug14,import_http3,log13,merge3,DEFAULT_PROTOCOL,DEFAULT_HOST,DEFAULT_PORT,normalizeOptions,errorHandler,KEBAB_REGEX,kebabCase,parseTimeout,Client,init_core=__esm({"node_modules/ipfs-http-client/esm/src/lib/core.js"(){init_node_globals(),import_multiaddr3=__toESM(require_src(),1),import_env=__toESM(require_env(),1),init_parse_duration(),import_debug14=__toESM(require_browser2(),1),import_http3=__toESM(require_http(),1),init_merge_options(),init_to_url_string(),init_agent_browser(),log13=(0,import_debug14.default)("ipfs-http-client:lib:error-handler"),merge3=merge_options_default.bind({ignoreUndefined:!0}),DEFAULT_PROTOCOL=import_env.isBrowser||import_env.isWebWorker?location.protocol:"http",DEFAULT_HOST=import_env.isBrowser||import_env.isWebWorker?location.hostname:"localhost",DEFAULT_PORT=import_env.isBrowser||import_env.isWebWorker?location.port:"5001",normalizeOptions=(e={})=>{let o,r={},t;if(typeof e=="string"||import_multiaddr3.Multiaddr.isMultiaddr(e))o=new URL(toUrlString(e));else if(e instanceof URL)o=e;else if(typeof e.url=="string"||import_multiaddr3.Multiaddr.isMultiaddr(e.url))o=new URL(toUrlString(e.url)),r=e;else if(e.url instanceof URL)o=e.url,r=e;else{r=e||{};const n=(r.protocol||DEFAULT_PROTOCOL).replace(":",""),s=(r.host||DEFAULT_HOST).split(":")[0],u=r.port||DEFAULT_PORT;o=new URL(`${n}://${s}:${u}`)}if(r.apiPath?o.pathname=r.apiPath:(o.pathname==="/"||o.pathname===void 0)&&(o.pathname="api/v0"),import_env.isNode){const n=agent_browser_default(o);t=r.agent||new n({keepAlive:!0,maxSockets:6})}return $e(Re({},r),{host:o.host,protocol:o.protocol.replace(":",""),port:Number(o.port),apiPath:o.pathname,url:o,agent:t})},errorHandler=async e=>{let o;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const t=await e.json();log13(t),o=t.Message||t.message}else o=await e.text()}catch(t){log13("Failed to parse error response",t),o=t.message}let r=new import_http3.default.HTTPError(e);throw o&&(o.includes("deadline has elapsed")&&(r=new import_http3.default.TimeoutError),o&&o.includes("context deadline exceeded")&&(r=new import_http3.default.TimeoutError)),o&&o.includes("request timed out")&&(r=new import_http3.default.TimeoutError),o&&(r.message=o),r},KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kebabCase=e=>e.replace(KEBAB_REGEX,function(o){return"-"+o.toLowerCase()}),parseTimeout=e=>typeof e=="string"?parse_duration_default(e):e,Client=class extends import_http3.default{constructor(e={}){const o=normalizeOptions(e);super({timeout:parseTimeout(o.timeout||0)||void 0,headers:o.headers,base:`${o.url}`,handleError:errorHandler,transformSearchParams:t=>{const n=new URLSearchParams;for(const[s,u]of t)u!=="undefined"&&u!=="null"&&s!=="signal"&&n.append(kebabCase(s),u),s==="timeout"&&!isNaN(u)&&n.append(kebabCase(s),u);return n},agent:o.agent});delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=(t,n={})=>(typeof t=="string"&&!t.startsWith("/")&&(t=`${o.url}/${t}`),r.call(this,t,merge3(n,{method:"POST"})))}},import_http3.default.HTTPError}}),configure,init_configure=__esm({"node_modules/ipfs-http-client/esm/src/lib/configure.js"(){init_node_globals(),init_core(),configure=e=>o=>e(new Client(o),o)}});function modeToString(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}var init_mode_to_string=__esm({"node_modules/ipfs-http-client/esm/src/lib/mode-to-string.js"(){init_node_globals()}});function parseMtime2(e){if(e==null)return;let o;if(e.secs!=null&&(o={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(o={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(o={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);o={secs:t,nsecs:(r-t*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(o,"secs")){if(o!=null&&o.nsecs!=null&&(o.nsecs<0||o.nsecs>999999999))throw(0,import_err_code30.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return o}}var import_err_code30,init_parse_mtime=__esm({"node_modules/ipfs-http-client/esm/src/lib/parse-mtime.js"(){init_node_globals(),import_err_code30=__toESM(require_err_code(),1)}});function toUrlSearchParams(u={}){var l=u,{arg:e,searchParams:o,hashAlg:r,mtime:t,mode:n}=l,s=Dt(l,["arg","searchParams","hashAlg","mtime","mode"]);o&&(s=Re(Re({},s),o)),r&&(s.hash=r),t!=null&&(t=parseMtime2(t),s.mtime=t.secs,s.mtimeNsecs=t.nsecs),n!=null&&(s.mode=modeToString(n)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const f=new URLSearchParams(s);return e.forEach(a=>f.append("arg",a)),f}var init_to_url_search_params=__esm({"node_modules/ipfs-http-client/esm/src/lib/to-url-search-params.js"(){init_node_globals(),init_mode_to_string(),init_parse_mtime()}}),createWantlist,init_wantlist=__esm({"node_modules/ipfs-http-client/esm/src/bitswap/wantlist.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createWantlist=configure(e=>{async function o(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(n=>CID.parse(n["/"]))}return o})}}),createWantlistForPeer,init_wantlist_for_peer=__esm({"node_modules/ipfs-http-client/esm/src/bitswap/wantlist-for-peer.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createWantlistForPeer=configure(e=>{async function o(r,t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:toUrlSearchParams($e(Re({},t),{peer:r.toString()})),headers:t.headers})).json()).Keys||[]).map(s=>CID.parse(s["/"]))}return o})}});function toCoreInterface(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map(o=>CID.parse(o["/"])),peers:e.Peers||[],blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}var createStat,init_stat=__esm({"node_modules/ipfs-http-client/esm/src/bitswap/stat.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createStat=configure(e=>{async function o(r={}){const t=await e.post("bitswap/stat",{searchParams:toUrlSearchParams(r),signal:r.signal,headers:r.headers});return toCoreInterface(await t.json())}return o})}}),createUnwant,init_unwant=__esm({"node_modules/ipfs-http-client/esm/src/bitswap/unwant.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createUnwant=configure(e=>{async function o(r,t={}){return(await e.post("bitswap/unwant",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers})).json()}return o})}});function createBitswap(e){return{wantlist:createWantlist(e),wantlistForPeer:createWantlistForPeer(e),unwant:createUnwant(e),stat:createStat(e)}}var init_bitswap=__esm({"node_modules/ipfs-http-client/esm/src/bitswap/index.js"(){init_node_globals(),init_wantlist(),init_wantlist_for_peer(),init_stat(),init_unwant()}}),createGet,init_get=__esm({"node_modules/ipfs-http-client/esm/src/block/get.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createGet=configure(e=>{async function o(r,t={}){const n=await e.post("block/get",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers});return new Uint8Array(await n.arrayBuffer())}return o})}});async function normaliseContent2(e){if(isBytes(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(isBlob(e))return e;if(isReadableStream(e)&&(e=(0,import_browser_readablestream_to_it4.default)(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const o=(0,import_it_peekable4.default)(e),{value:r,done:t}=await o.peek();if(t)return itToBlob(o);if(o.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await(0,import_it_all5.default)(o))]);if(isBytes(r)||typeof r=="string"||r instanceof String)return itToBlob(o)}throw(0,import_err_code31.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function itToBlob(e){const o=[];for await(const r of e)o.push(r);return new Blob(o)}var import_err_code31,import_it_peekable4,import_browser_readablestream_to_it4,import_it_all5,init_normalise_content_browser=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-content.browser.js"(){init_node_globals(),import_err_code31=__toESM(require_err_code(),1),import_it_peekable4=__toESM(require_it_peekable(),1),import_browser_readablestream_to_it4=__toESM(require_browser_readablestream_to_it(),1),import_it_all5=__toESM(require_it_all(),1),init_utils4()}});function normaliseInput4(e){return normaliseCandidateMultiple(e,normaliseContent2)}var init_normalise_input_multiple_browser=__esm({"node_modules/ipfs-core-utils/esm/src/files/normalise-input-multiple.browser.js"(){init_node_globals(),init_normalise_content_browser(),init_normalise_candidate_multiple()}});function modeToString2(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}var init_mode_to_string2=__esm({"node_modules/ipfs-core-utils/esm/src/mode-to-string.js"(){init_node_globals()}});async function multipartRequest(e,o,r={}){const t=[],n=new FormData;let s=0,u=0;for await(const{content:l,path:f,mode:a,mtime:c}of normaliseInput4(e)){let d="";const h=l?"file":"dir";s>0&&(d=`-${s}`);let g=h+d;const p=[];if(a!=null&&p.push(`mode=${modeToString2(a)}`),c!=null){const{secs:_,nsecs:m}=c;p.push(`mtime=${_}`),m!=null&&p.push(`mtime-nsecs=${m}`)}if(p.length&&(g=`${g}?${p.join("&")}`),l){n.set(g,l,f!=null?encodeURIComponent(f):void 0);const _=u+l.size;t.push({name:f,start:u,end:_}),u=_}else if(f!=null)n.set(g,new File([""],encodeURIComponent(f),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:u,parts:t,headers:r,body:n}}var init_multipart_request_browser=__esm({"node_modules/ipfs-core-utils/esm/src/multipart-request.browser.js"(){init_node_globals(),init_normalise_input_multiple_browser(),init_mode_to_string2()}});function filter7(e){return e.filter(Boolean)}function abortSignal(...e){return(0,import_any_signal2.anySignal)(filter7(e))}var import_any_signal2,init_abort_signal=__esm({"node_modules/ipfs-http-client/esm/src/lib/abort-signal.js"(){init_node_globals(),import_any_signal2=__toESM(require_any_signal(),1)}}),createPut,init_put=__esm({"node_modules/ipfs-http-client/esm/src/block/put.js"(){init_node_globals(),init_cid(),init_multipart_request_browser(),init_configure(),init_to_url_search_params(),init_abort_signal(),createPut=configure(e=>{async function o(r,t={}){const n=new AbortController,s=abortSignal(n.signal,t.signal);let u;try{u=await(await e.post("block/put",Re({signal:s,searchParams:toUrlSearchParams(t)},await multipartRequest([r],n,t.headers)))).json()}catch(l){if(t.format==="dag-pb")return o(r,$e(Re({},t),{format:"protobuf"}));if(t.format==="dag-cbor")return o(r,$e(Re({},t),{format:"cbor"}));throw l}return CID.parse(u.Key)}return o})}});function toCoreInterface2(e){const o={cid:CID.parse(e.Hash)};return e.Error&&(o.error=new Error(e.Error)),o}var createRm,init_rm=__esm({"node_modules/ipfs-http-client/esm/src/block/rm.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createRm=configure(e=>{async function*o(r,t={}){Array.isArray(r)||(r=[r]);const n=await e.post("block/rm",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.map(s=>s.toString()),"stream-channels":!0},t)),headers:t.headers});for await(const s of n.ndjson())yield toCoreInterface2(s)}return o})}}),createStat2,init_stat2=__esm({"node_modules/ipfs-http-client/esm/src/block/stat.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createStat2=configure(e=>{async function o(r,t={}){const s=await(await e.post("block/stat",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers})).json();return{cid:CID.parse(s.Key),size:s.Size}}return o})}});function createBlock(e){return{get:createGet(e),put:createPut(e),rm:createRm(e),stat:createStat2(e)}}var init_block2=__esm({"node_modules/ipfs-http-client/esm/src/block/index.js"(){init_node_globals(),init_get(),init_put(),init_rm(),init_stat2()}}),import_multiaddr4,createAdd,init_add=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/add.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_multiaddr4=__toESM(require_src(),1),createAdd=configure(e=>{async function o(r,t={}){const n=await e.post("bootstrap/add",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),{Peers:s}=await n.json();return{Peers:s.map(u=>new import_multiaddr4.Multiaddr(u))}}return o})}}),import_multiaddr5,createClear,init_clear=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/clear.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_multiaddr5=__toESM(require_src(),1),createClear=configure(e=>{async function o(r={}){const t=await e.post("bootstrap/rm",{signal:r.signal,searchParams:toUrlSearchParams($e(Re({},r),{all:!0})),headers:r.headers}),{Peers:n}=await t.json();return{Peers:n.map(s=>new import_multiaddr5.Multiaddr(s))}}return o})}}),import_multiaddr6,createList,init_list=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/list.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_multiaddr6=__toESM(require_src(),1),createList=configure(e=>{async function o(r={}){const t=await e.post("bootstrap/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:n}=await t.json();return{Peers:n.map(s=>new import_multiaddr6.Multiaddr(s))}}return o})}}),import_multiaddr7,createReset,init_reset=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/reset.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_multiaddr7=__toESM(require_src(),1),createReset=configure(e=>{async function o(r={}){const t=await e.post("bootstrap/add",{signal:r.signal,searchParams:toUrlSearchParams($e(Re({},r),{default:!0})),headers:r.headers}),{Peers:n}=await t.json();return{Peers:n.map(s=>new import_multiaddr7.Multiaddr(s))}}return o})}}),import_multiaddr8,createRm2,init_rm2=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/rm.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_multiaddr8=__toESM(require_src(),1),createRm2=configure(e=>{async function o(r,t={}){const n=await e.post("bootstrap/rm",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),{Peers:s}=await n.json();return{Peers:s.map(u=>new import_multiaddr8.Multiaddr(u))}}return o})}});function createBootstrap(e){return{add:createAdd(e),clear:createClear(e),list:createList(e),reset:createReset(e),rm:createRm2(e)}}var init_bootstrap=__esm({"node_modules/ipfs-http-client/esm/src/bootstrap/index.js"(){init_node_globals(),init_add(),init_clear(),init_list(),init_reset(),init_rm2()}}),createApply,init_apply=__esm({"node_modules/ipfs-http-client/esm/src/config/profiles/apply.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createApply=configure(e=>{async function o(r,t={}){const s=await(await e.post("config/profile/apply",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return o})}});function objectToCamel(e){if(e==null)return e;const o=/^[A-Z]+$/,r={};return Object.keys(e).reduce((t,n)=>(o.test(n)?t[n.toLowerCase()]=e[n]:o.test(n[0])?t[n[0].toLowerCase()+n.slice(1)]=e[n]:t[n]=e[n],t),r)}var init_object_to_camel=__esm({"node_modules/ipfs-http-client/esm/src/lib/object-to-camel.js"(){init_node_globals()}}),createList2,init_list2=__esm({"node_modules/ipfs-http-client/esm/src/config/profiles/list.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createList2=configure(e=>{async function o(r={}){return(await(await e.post("config/profile/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).map(s=>objectToCamel(s))}return o})}});function createProfiles(e){return{apply:createApply(e),list:createList2(e)}}var init_profiles=__esm({"node_modules/ipfs-http-client/esm/src/config/profiles/index.js"(){init_node_globals(),init_apply(),init_list2()}}),createGet2,init_get2=__esm({"node_modules/ipfs-http-client/esm/src/config/get.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createGet2=configure(e=>async(r,t={})=>{if(!r)throw new Error("key argument is required");return(await(await e.post("config",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json()).Value})}}),createGetAll,init_get_all=__esm({"node_modules/ipfs-http-client/esm/src/config/get-all.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createGetAll=configure(e=>async(r={})=>await(await e.post("config/show",{signal:r.signal,searchParams:toUrlSearchParams(Re({},r)),headers:r.headers})).json())}}),createReplace,init_replace=__esm({"node_modules/ipfs-http-client/esm/src/config/replace.js"(){init_node_globals(),init_from_string(),init_multipart_request_browser(),init_configure(),init_to_url_search_params(),init_abort_signal(),createReplace=configure(e=>async(r,t={})=>{const n=new AbortController,s=abortSignal(n.signal,t.signal);await(await e.post("config/replace",Re({signal:s,searchParams:toUrlSearchParams(t)},await multipartRequest([fromString3(JSON.stringify(r))],n,t.headers)))).text()})}}),createSet,encodeParam,init_set=__esm({"node_modules/ipfs-http-client/esm/src/config/set.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createSet=configure(e=>async(r,t,n={})=>{if(typeof r!="string")throw new Error("Invalid key type");const s=Re(Re({},n),encodeParam(r,t));await(await e.post("config",{signal:n.signal,searchParams:toUrlSearchParams(s),headers:n.headers})).text()}),encodeParam=(e,o)=>{switch(typeof o){case"boolean":return{arg:[e,o.toString()],bool:!0};case"string":return{arg:[e,o]};default:return{arg:[e,JSON.stringify(o)],json:!0}}}}});function createConfig(e){return{getAll:createGetAll(e),get:createGet2(e),set:createSet(e),replace:createReplace(e),profiles:createProfiles(e)}}var init_config2=__esm({"node_modules/ipfs-http-client/esm/src/config/index.js"(){init_node_globals(),init_profiles(),init_get2(),init_get_all(),init_replace(),init_set()}}),createExport,init_export=__esm({"node_modules/ipfs-http-client/esm/src/dag/export.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createExport=configure(e=>{async function*o(r,t={}){yield*(await e.post("dag/export",{signal:t.signal,searchParams:toUrlSearchParams({arg:r.toString()}),headers:t.headers})).iterator()}return o})}});async function*resolve5(e,o,r,t,n){const s=async a=>{const c=await r.getCodec(a.code),d=await t(a,n);return c.decode(d)},u=o.split("/").filter(Boolean);let l=await s(e),f=e;for(;u.length;){const a=u.shift();if(!a)throw(0,import_err_code32.default)(new Error(`Could not resolve path "${o}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(l,a))l=l[a],yield{value:l,remainderPath:u.join("/")};else throw(0,import_err_code32.default)(new Error(`no link named "${a}" under ${f}`),"ERR_NO_LINK");const c=CID.asCID(l);c&&(f=c,l=await s(l))}yield{value:l,remainderPath:""}}var import_err_code32,init_resolve=__esm({"node_modules/ipfs-http-client/esm/src/lib/resolve.js"(){init_node_globals(),init_cid(),import_err_code32=__toESM(require_err_code(),1)}}),import_it_first2,import_it_last2,import_err_code33,createGet3,init_get3=__esm({"node_modules/ipfs-http-client/esm/src/dag/get.js"(){init_node_globals(),init_configure(),init_resolve(),import_it_first2=__toESM(require_it_first(),1),import_it_last2=__toESM(require_it_last(),1),import_err_code33=__toESM(require_err_code(),1),init_get(),createGet3=(e,o)=>configure((t,n)=>{const s=createGet(n);return async(l,f={})=>{if(f.path){const g=f.localResolve?await(0,import_it_first2.default)(resolve5(l,f.path,e,s,f)):await(0,import_it_last2.default)(resolve5(l,f.path,e,s,f));if(!g)throw(0,import_err_code33.default)(new Error("Not found"),"ERR_NOT_FOUND");return g}const a=await e.getCodec(l.code),c=await s(l,f);return{value:a.decode(c),remainderPath:""}}})(o)}}),createImport,init_import=__esm({"node_modules/ipfs-http-client/esm/src/dag/import.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_abort_signal(),init_multipart_request_browser(),init_cid(),createImport=configure(e=>{async function*o(r,t={}){const n=new AbortController,s=abortSignal(n.signal,t.signal),{headers:u,body:l}=await multipartRequest(r,n,t.headers),f=await e.post("dag/import",{signal:s,headers:u,body:l,searchParams:toUrlSearchParams({"pin-roots":t.pinRoots})});for await(const{Root:a}of f.ndjson())if(a!==void 0){const{Cid:{"/":c},PinErrorMsg:d}=a;yield{root:{cid:CID.parse(c),pinErrorMsg:d}}}}return o})}}),createPut2,init_put2=__esm({"node_modules/ipfs-http-client/esm/src/dag/put.js"(){init_node_globals(),init_cid(),init_configure(),init_multipart_request_browser(),init_to_url_search_params(),init_abort_signal(),createPut2=(e,o)=>configure(t=>async(s,u={})=>{const l=Re({storeCodec:"dag-cbor",hashAlg:"sha2-256"},u);let f;if(l.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");f=s}else f=(await e.getCodec(l.storeCodec)).encode(s),l.inputCodec=l.storeCodec;const a=new AbortController,c=abortSignal(a.signal,l.signal),h=await(await t.post("dag/put",Re({timeout:l.timeout,signal:c,searchParams:toUrlSearchParams(l)},await multipartRequest([f],a,l.headers)))).json();return CID.parse(h.Cid["/"])})(o)}}),createResolve,init_resolve2=__esm({"node_modules/ipfs-http-client/esm/src/dag/resolve.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createResolve=configure(e=>async(r,t={})=>{const s=await(await e.post("dag/resolve",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r}${t.path?`/${t.path}`.replace(/\/[/]+/g,"/"):""}`},t)),headers:t.headers})).json();return{cid:CID.parse(s.Cid["/"]),remainderPath:s.RemPath}})}});function createDag(e,o){return{export:createExport(o),get:createGet3(e,o),import:createImport(o),put:createPut2(e,o),resolve:createResolve(o)}}var init_dag=__esm({"node_modules/ipfs-http-client/esm/src/dag/index.js"(){init_node_globals(),init_export(),init_get3(),init_import(),init_put2(),init_resolve2()}}),SendingQuery,PeerResponse,FinalPeer,QueryError,Provider,Value,AddingPeer,DialingPeer,init_response_types=__esm({"node_modules/ipfs-http-client/esm/src/dht/response-types.js"(){init_node_globals(),SendingQuery=0,PeerResponse=1,FinalPeer=2,QueryError=3,Provider=4,Value=5,AddingPeer=6,DialingPeer=7}}),import_multiaddr9,mapEvent,init_map_event=__esm({"node_modules/ipfs-http-client/esm/src/dht/map-event.js"(){init_node_globals(),init_from_string(),init_response_types(),import_multiaddr9=__toESM(require_src(),1),mapEvent=e=>{if(e.Type===SendingQuery)return{to:e.ID,name:"SENDING_QUERY",type:e.Type};if(e.Type===PeerResponse)return{from:e.ID,name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:o,Addrs:r})=>({id:o,multiaddrs:r.map(t=>new import_multiaddr9.Multiaddr(t))})),providers:(e.Responses||[]).map(({ID:o,Addrs:r})=>({id:o,multiaddrs:r.map(t=>new import_multiaddr9.Multiaddr(t))}))};if(e.Type===FinalPeer){let o={id:e.ID,multiaddrs:[]};return e.Responses&&e.Responses.length&&(o={id:e.Responses[0].ID,multiaddrs:e.Responses[0].Addrs.map(r=>new import_multiaddr9.Multiaddr(r))}),{from:e.ID,name:"FINAL_PEER",type:e.Type,peer:o}}if(e.Type===QueryError)return{from:e.ID,name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===Provider)return{from:e.ID,name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:o,Addrs:r})=>({id:o,multiaddrs:r.map(t=>new import_multiaddr9.Multiaddr(t))}))};if(e.Type===Value)return{from:e.ID,name:"VALUE",type:e.Type,value:fromString3(e.Extra,"base64pad")};if(e.Type===AddingPeer){const o=e.Responses.map(({ID:r})=>r);if(!o.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:o[0]}}if(e.Type===DialingPeer)return{name:"DIALING_PEER",type:e.Type,peer:e.ID};throw new Error("Unknown DHT event type")}}}),createFindPeer,init_find_peer=__esm({"node_modules/ipfs-http-client/esm/src/dht/find-peer.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_map_event(),createFindPeer=configure(e=>{async function*o(r,t={}){const n=await e.post("dht/findpeer",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers});for await(const s of n.ndjson())yield mapEvent(s)}return o})}}),createFindProvs,init_find_provs=__esm({"node_modules/ipfs-http-client/esm/src/dht/find-provs.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_map_event(),createFindProvs=configure(e=>{async function*o(r,t={}){const n=await e.post("dht/findprovs",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers});for await(const s of n.ndjson())yield mapEvent(s)}return o})}}),createGet4,init_get4=__esm({"node_modules/ipfs-http-client/esm/src/dht/get.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_map_event(),init_to_string(),createGet4=configure(e=>{async function*o(r,t={}){const n=await e.post("dht/get",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r instanceof Uint8Array?toString3(r):r.toString()},t)),headers:t.headers});for await(const s of n.ndjson())yield mapEvent(s)}return o})}}),createProvide,init_provide=__esm({"node_modules/ipfs-http-client/esm/src/dht/provide.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_map_event(),createProvide=configure(e=>{async function*o(r,t={recursive:!1}){const n=Array.isArray(r)?r:[r],s=await e.post("dht/provide",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:n.map(u=>u.toString())},t)),headers:t.headers});for await(const u of s.ndjson())yield mapEvent(u)}return o})}}),createPut3,init_put3=__esm({"node_modules/ipfs-http-client/esm/src/dht/put.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_multipart_request_browser(),init_abort_signal(),init_to_string(),init_map_event(),createPut3=configure(e=>{async function*o(r,t,n={}){const s=new AbortController,u=abortSignal(s.signal,n.signal),l=await e.post("dht/put",Re({signal:u,searchParams:toUrlSearchParams(Re({arg:r instanceof Uint8Array?toString3(r):r.toString()},n))},await multipartRequest([t],s,n.headers)));for await(const f of l.ndjson())yield mapEvent(f)}return o})}}),createQuery,init_query=__esm({"node_modules/ipfs-http-client/esm/src/dht/query.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_map_event(),createQuery=configure(e=>{async function*o(r,t={}){const n=await e.post("dht/query",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers});for await(const s of n.ndjson())yield mapEvent(s)}return o})}});function createDht(e){return{findPeer:createFindPeer(e),findProvs:createFindProvs(e),get:createGet4(e),provide:createProvide(e),put:createPut3(e),query:createQuery(e)}}var init_dht=__esm({"node_modules/ipfs-http-client/esm/src/dht/index.js"(){init_node_globals(),init_find_peer(),init_find_provs(),init_get4(),init_provide(),init_put3(),init_query()}}),createCmds,init_cmds=__esm({"node_modules/ipfs-http-client/esm/src/diag/cmds.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createCmds=configure(e=>{async function o(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return o})}}),createNet,init_net=__esm({"node_modules/ipfs-http-client/esm/src/diag/net.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createNet=configure(e=>{async function o(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return o})}}),createSys,init_sys=__esm({"node_modules/ipfs-http-client/esm/src/diag/sys.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createSys=configure(e=>{async function o(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()}return o})}});function createDiag(e){return{cmds:createCmds(e),net:createNet(e),sys:createSys(e)}}var init_diag=__esm({"node_modules/ipfs-http-client/esm/src/diag/index.js"(){init_node_globals(),init_cmds(),init_net(),init_sys()}}),createChmod,init_chmod=__esm({"node_modules/ipfs-http-client/esm/src/files/chmod.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createChmod=configure(e=>{async function o(r,t,n={}){await(await e.post("files/chmod",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:r,mode:t},n)),headers:n.headers})).text()}return o})}}),createCp,init_cp=__esm({"node_modules/ipfs-http-client/esm/src/files/cp.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createCp=configure(e=>{async function o(r,t,n={}){const s=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:s.concat(t).map(l=>CID.asCID(l)?`/ipfs/${l}`:l)},n)),headers:n.headers})).text()}return o})}}),createFlush,init_flush=__esm({"node_modules/ipfs-http-client/esm/src/files/flush.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createFlush=configure(e=>{async function o(r,t={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");const s=await(await e.post("files/flush",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json();return CID.parse(s.Cid)}return o})}});function objectToCamelWithMetadata(e){const o=objectToCamel(e);return Object.prototype.hasOwnProperty.call(o,"mode")&&(o.mode=parseInt(o.mode,8)),Object.prototype.hasOwnProperty.call(o,"mtime")&&(o.mtime={secs:o.mtime,nsecs:o.mtimeNsecs||0},delete o.mtimeNsecs),o}var init_object_to_camel_with_metadata=__esm({"node_modules/ipfs-http-client/esm/src/lib/object-to-camel-with-metadata.js"(){init_node_globals(),init_object_to_camel()}});function toCoreInterface3(e){return e.hash&&(e.cid=CID.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}var createLs,init_ls=__esm({"node_modules/ipfs-http-client/esm/src/files/ls.js"(){init_node_globals(),init_cid(),init_object_to_camel_with_metadata(),init_configure(),init_to_url_search_params(),createLs=configure(e=>{async function*o(r,t={}){if(!r)throw new Error("ipfs.files.ls requires a path");const n=await e.post("files/ls",{signal:t.signal,searchParams:toUrlSearchParams($e(Re({arg:CID.asCID(r)?`/ipfs/${r}`:r,long:!0},t),{stream:!0})),headers:t.headers});for await(const s of n.ndjson())if("Entries"in s)for(const u of s.Entries||[])yield toCoreInterface3(objectToCamelWithMetadata(u));else yield toCoreInterface3(objectToCamelWithMetadata(s))}return o})}}),createMkdir,init_mkdir=__esm({"node_modules/ipfs-http-client/esm/src/files/mkdir.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createMkdir=configure(e=>{async function o(r,t={}){await(await e.post("files/mkdir",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).text()}return o})}}),createMv,init_mv=__esm({"node_modules/ipfs-http-client/esm/src/files/mv.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createMv=configure(e=>{async function o(r,t,n={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:r.concat(t)},n)),headers:n.headers})).text()}return o})}}),require_source=__commonJS({"node_modules/stream-to-it/source.js"(e,o){init_node_globals(),o.exports=r=>{if(r[Symbol.asyncIterator])return r;if(r.getReader)return async function*(){const t=r.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)return;yield s}}finally{t.releaseLock()}}();throw new Error("unknown stream")}}}),import_source,createRead,init_read=__esm({"node_modules/ipfs-http-client/esm/src/files/read.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_source=__toESM(require_source(),1),createRead=configure(e=>{async function*o(r,t={}){const n=await e.post("files/read",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r,count:t.length},t)),headers:t.headers});yield*(0,import_source.default)(n.body)}return o})}}),import_http4,createRm3,init_rm3=__esm({"node_modules/ipfs-http-client/esm/src/files/rm.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),import_http4=__toESM(require_http(),1),createRm3=configure(e=>{async function o(r,t={}){const n=await e.post("files/rm",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),s=await n.text();if(s!==""){const u=new import_http4.default.HTTPError(n);throw u.message=s,u}}return o})}});function toCoreInterface4(e){return e.cid=CID.parse(e.hash),delete e.hash,e}var createStat3,init_stat3=__esm({"node_modules/ipfs-http-client/esm/src/files/stat.js"(){init_node_globals(),init_cid(),init_object_to_camel_with_metadata(),init_configure(),init_to_url_search_params(),createStat3=configure(e=>{async function o(r,t={}){const s=await(await e.post("files/stat",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json();return s.WithLocality=s.WithLocality||!1,toCoreInterface4(objectToCamelWithMetadata(s))}return o})}}),createTouch,init_touch=__esm({"node_modules/ipfs-http-client/esm/src/files/touch.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createTouch=configure(e=>{async function o(r,t={}){await(await e.post("files/touch",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).text()}return o})}}),createWrite,init_write=__esm({"node_modules/ipfs-http-client/esm/src/files/write.js"(){init_node_globals(),init_mode_to_string(),init_parse_mtime(),init_configure(),init_multipart_request_browser(),init_to_url_search_params(),init_abort_signal(),createWrite=configure(e=>{async function o(r,t,n={}){const s=new AbortController,u=abortSignal(s.signal,n.signal);await(await e.post("files/write",Re({signal:u,searchParams:toUrlSearchParams(Re({arg:r,streamChannels:!0,count:n.length},n))},await multipartRequest([{content:t,path:"arg",mode:modeToString(n.mode),mtime:parseMtime2(n.mtime)}],s,n.headers)))).text()}return o})}});function createFiles(e){return{chmod:createChmod(e),cp:createCp(e),flush:createFlush(e),ls:createLs(e),mkdir:createMkdir(e),mv:createMv(e),read:createRead(e),rm:createRm3(e),stat:createStat3(e),touch:createTouch(e),write:createWrite(e)}}var init_files=__esm({"node_modules/ipfs-http-client/esm/src/files/index.js"(){init_node_globals(),init_chmod(),init_cp(),init_flush(),init_ls(),init_mkdir(),init_mv(),init_read(),init_rm3(),init_stat3(),init_touch(),init_write()}}),import_err_code34,createExport2,init_export2=__esm({"node_modules/ipfs-http-client/esm/src/key/export.js"(){init_node_globals(),init_configure(),import_err_code34=__toESM(require_err_code(),1),createExport2=configure(e=>async(r,t,n={})=>{throw(0,import_err_code34.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})}}),createGen,init_gen=__esm({"node_modules/ipfs-http-client/esm/src/key/gen.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createGen=configure(e=>{async function o(r,t={type:"rsa",size:2048}){const s=await(await e.post("key/gen",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json();return objectToCamel(s)}return o})}}),createImport2,init_import2=__esm({"node_modules/ipfs-http-client/esm/src/key/import.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createImport2=configure(e=>{async function o(r,t,n,s={}){const l=await(await e.post("key/import",{signal:s.signal,searchParams:toUrlSearchParams(Re({arg:r,pem:t,password:n},s)),headers:s.headers})).json();return objectToCamel(l)}return o})}}),import_err_code35,createInfo,init_info=__esm({"node_modules/ipfs-http-client/esm/src/key/info.js"(){init_node_globals(),init_configure(),import_err_code35=__toESM(require_err_code(),1),createInfo=configure(e=>async(r,t={})=>{throw(0,import_err_code35.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})}}),createList3,init_list3=__esm({"node_modules/ipfs-http-client/esm/src/key/list.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createList3=configure(e=>{async function o(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Keys||[]).map(s=>objectToCamel(s))}return o})}}),createRename,init_rename=__esm({"node_modules/ipfs-http-client/esm/src/key/rename.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createRename=configure(e=>{async function o(r,t,n={}){const s=await e.post("key/rename",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:[r,t]},n)),headers:n.headers});return objectToCamel(await s.json())}return o})}}),createRm4,init_rm4=__esm({"node_modules/ipfs-http-client/esm/src/key/rm.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createRm4=configure(e=>{async function o(r,t={}){const s=await(await e.post("key/rm",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json();return objectToCamel(s.Keys[0])}return o})}});function createKey(e){return{export:createExport2(e),gen:createGen(e),import:createImport2(e),info:createInfo(e),list:createList3(e),rename:createRename(e),rm:createRm4(e)}}var init_key2=__esm({"node_modules/ipfs-http-client/esm/src/key/index.js"(){init_node_globals(),init_export2(),init_gen(),init_import2(),init_info(),init_list3(),init_rename(),init_rm4()}}),createLevel,init_level2=__esm({"node_modules/ipfs-http-client/esm/src/log/level.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createLevel=configure(e=>{async function o(r,t,n={}){const s=await e.post("log/level",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:[r,t]},n)),headers:n.headers});return objectToCamel(await s.json())}return o})}}),createLs2,init_ls2=__esm({"node_modules/ipfs-http-client/esm/src/log/ls.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createLs2=configure(e=>{async function o(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings}return o})}}),createTail,init_tail=__esm({"node_modules/ipfs-http-client/esm/src/log/tail.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createTail=configure(e=>{async function*o(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return o})}});function createLog(e){return{level:createLevel(e),ls:createLs2(e),tail:createTail(e)}}var init_log=__esm({"node_modules/ipfs-http-client/esm/src/log/index.js"(){init_node_globals(),init_level2(),init_ls2(),init_tail()}}),createPublish,init_publish=__esm({"node_modules/ipfs-http-client/esm/src/name/publish.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createPublish=configure(e=>{async function o(r,t={}){const n=await e.post("name/publish",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r}`},t)),headers:t.headers});return objectToCamel(await n.json())}return o})}}),createResolve2,init_resolve3=__esm({"node_modules/ipfs-http-client/esm/src/name/resolve.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createResolve2=configure(e=>{async function*o(r,t={}){const n=await e.post("name/resolve",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r,stream:!0},t)),headers:t.headers});for await(const s of n.ndjson())yield s.Path}return o})}}),createCancel,init_cancel=__esm({"node_modules/ipfs-http-client/esm/src/name/pubsub/cancel.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createCancel=configure(e=>{async function o(r,t={}){const n=await e.post("name/pubsub/cancel",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers});return objectToCamel(await n.json())}return o})}}),createState,init_state=__esm({"node_modules/ipfs-http-client/esm/src/name/pubsub/state.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createState=configure(e=>{async function o(r={}){const t=await e.post("name/pubsub/state",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await t.json())}return o})}}),createSubs,init_subs=__esm({"node_modules/ipfs-http-client/esm/src/name/pubsub/subs.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createSubs=configure(e=>{async function o(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Strings||[]}return o})}});function createPubsub(e){return{cancel:createCancel(e),state:createState(e),subs:createSubs(e)}}var init_pubsub=__esm({"node_modules/ipfs-http-client/esm/src/name/pubsub/index.js"(){init_node_globals(),init_cancel(),init_state(),init_subs()}});function createName(e){return{publish:createPublish(e),resolve:createResolve2(e),pubsub:createPubsub(e)}}var init_name=__esm({"node_modules/ipfs-http-client/esm/src/name/index.js"(){init_node_globals(),init_publish(),init_resolve3(),init_pubsub()}}),createData,init_data=__esm({"node_modules/ipfs-http-client/esm/src/object/data.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createData=configure(e=>{async function o(r,t={}){const s=await(await e.post("object/data",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r instanceof Uint8Array?CID.decode(r):r}`},t)),headers:t.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return o})}}),createGet5,init_get5=__esm({"node_modules/ipfs-http-client/esm/src/object/get.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),init_from_string(),createGet5=configure(e=>{async function o(r,t={}){const s=await(await e.post("object/get",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r instanceof Uint8Array?CID.decode(r):r}`,dataEncoding:"base64"},t)),headers:t.headers})).json();return{Data:fromString3(s.Data,"base64pad"),Links:(s.Links||[]).map(u=>({Name:u.Name,Hash:CID.parse(u.Hash),Tsize:u.Size}))}}return o})}}),createLinks,init_links=__esm({"node_modules/ipfs-http-client/esm/src/object/links.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createLinks=configure(e=>{async function o(r,t={}){return((await(await e.post("object/links",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r instanceof Uint8Array?CID.decode(r):r}`},t)),headers:t.headers})).json()).Links||[]).map(u=>({Name:u.Name,Tsize:u.Size,Hash:CID.parse(u.Hash)}))}return o})}}),createNew,init_new=__esm({"node_modules/ipfs-http-client/esm/src/object/new.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createNew=configure(e=>{async function o(r={}){const t=await e.post("object/new",{signal:r.signal,searchParams:toUrlSearchParams(Re({arg:r.template},r)),headers:r.headers}),{Hash:n}=await t.json();return CID.parse(n)}return o})}}),createPut4,init_put4=__esm({"node_modules/ipfs-http-client/esm/src/object/put.js"(){init_node_globals(),init_configure(),init_put2(),createPut4=(e,o)=>configure(t=>{const n=createPut2(e,o);async function s(u,l={}){return n(u,$e(Re({},l),{storeCodec:"dag-pb",hashAlg:"sha2-256",version:1}))}return s})(o)}}),createStat4,init_stat4=__esm({"node_modules/ipfs-http-client/esm/src/object/stat.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createStat4=configure(e=>{async function o(r,t={}){const s=await(await e.post("object/stat",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r}`},t)),headers:t.headers})).json();return $e(Re({},s),{Hash:CID.parse(s.Hash)})}return o})}}),createAddLink,init_add_link=__esm({"node_modules/ipfs-http-client/esm/src/object/patch/add-link.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createAddLink=configure(e=>{async function o(r,t,n={}){const s=await e.post("object/patch/add-link",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:[`${r}`,t.Name||t.name||"",(t.Hash||t.cid||"").toString()||null]},n)),headers:n.headers}),{Hash:u}=await s.json();return CID.parse(u)}return o})}}),createAppendData,init_append_data=__esm({"node_modules/ipfs-http-client/esm/src/object/patch/append-data.js"(){init_node_globals(),init_cid(),init_multipart_request_browser(),init_configure(),init_to_url_search_params(),init_abort_signal(),createAppendData=configure(e=>{async function o(r,t,n={}){const s=new AbortController,u=abortSignal(s.signal,n.signal),l=await e.post("object/patch/append-data",Re({signal:u,searchParams:toUrlSearchParams(Re({arg:`${r}`},n))},await multipartRequest([t],s,n.headers))),{Hash:f}=await l.json();return CID.parse(f)}return o})}}),createRmLink,init_rm_link=__esm({"node_modules/ipfs-http-client/esm/src/object/patch/rm-link.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createRmLink=configure(e=>{async function o(r,t,n={}){const s=await e.post("object/patch/rm-link",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:[`${r}`,t.Name||t.name||null]},n)),headers:n.headers}),{Hash:u}=await s.json();return CID.parse(u)}return o})}}),createSetData,init_set_data=__esm({"node_modules/ipfs-http-client/esm/src/object/patch/set-data.js"(){init_node_globals(),init_cid(),init_multipart_request_browser(),init_configure(),init_to_url_search_params(),init_abort_signal(),createSetData=configure(e=>{async function o(r,t,n={}){const s=new AbortController,u=abortSignal(s.signal,n.signal),l=await e.post("object/patch/set-data",Re({signal:u,searchParams:toUrlSearchParams(Re({arg:[`${r}`]},n))},await multipartRequest([t],s,n.headers))),{Hash:f}=await l.json();return CID.parse(f)}return o})}});function createPatch(e){return{addLink:createAddLink(e),appendData:createAppendData(e),rmLink:createRmLink(e),setData:createSetData(e)}}var init_patch=__esm({"node_modules/ipfs-http-client/esm/src/object/patch/index.js"(){init_node_globals(),init_add_link(),init_append_data(),init_rm_link(),init_set_data()}});function createObject(e,o){return{data:createData(o),get:createGet5(o),links:createLinks(o),new:createNew(o),put:createPut4(e,o),stat:createStat4(o),patch:createPatch(o)}}var init_object=__esm({"node_modules/ipfs-http-client/esm/src/object/index.js"(){init_node_globals(),init_data(),init_get5(),init_links(),init_new(),init_put4(),init_stat4(),init_patch()}}),createAddAll,init_add_all=__esm({"node_modules/ipfs-http-client/esm/src/pin/add-all.js"(){init_node_globals(),init_cid(),init_configure(),init_normalise_input(),init_to_url_search_params(),createAddAll=configure(e=>{async function*o(r,t={}){for await(const{path:n,recursive:s,metadata:u}of normaliseInput(r)){const l=await e.post("pin/add",{signal:t.signal,searchParams:toUrlSearchParams($e(Re({},t),{arg:n,recursive:s,metadata:u?JSON.stringify(u):void 0,stream:!0})),headers:t.headers});for await(const f of l.ndjson()){if(f.Pins){for(const a of f.Pins)yield CID.parse(a);continue}yield CID.parse(f)}}}return o})}});function createAdd2(e){const o=createAddAll(e);return configure(()=>{async function r(t,n={}){return(0,import_it_last3.default)(o([Re({path:t},n)],n))}return r})(e)}var import_it_last3,init_add2=__esm({"node_modules/ipfs-http-client/esm/src/pin/add.js"(){init_node_globals(),init_add_all(),import_it_last3=__toESM(require_it_last(),1),init_configure()}});function toPin2(e,o,r){const t={type:e,cid:CID.parse(o)};return r&&(t.metadata=r),t}var createLs3,init_ls3=__esm({"node_modules/ipfs-http-client/esm/src/pin/ls.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createLs3=configure(e=>{async function*o(r={}){let t=[];r.paths&&(t=Array.isArray(r.paths)?r.paths:[r.paths]);const n=await e.post("pin/ls",{signal:r.signal,searchParams:toUrlSearchParams($e(Re({},r),{arg:t.map(s=>`${s}`),stream:!0})),headers:r.headers});for await(const s of n.ndjson()){if(s.Keys){for(const u of Object.keys(s.Keys))yield toPin2(s.Keys[u].Type,u,s.Keys[u].Metadata);return}yield toPin2(s.Type,s.Cid,s.Metadata)}}return o})}}),createRmAll,init_rm_all=__esm({"node_modules/ipfs-http-client/esm/src/pin/rm-all.js"(){init_node_globals(),init_cid(),init_configure(),init_normalise_input(),init_to_url_search_params(),createRmAll=configure(e=>{async function*o(r,t={}){for await(const{path:n,recursive:s}of normaliseInput(r)){const u=new URLSearchParams(t.searchParams);u.append("arg",`${n}`),s!=null&&u.set("recursive",String(s));const l=await e.post("pin/rm",{signal:t.signal,headers:t.headers,searchParams:toUrlSearchParams($e(Re({},t),{arg:`${n}`,recursive:s}))});for await(const f of l.ndjson()){if(f.Pins){yield*f.Pins.map(a=>CID.parse(a));continue}yield CID.parse(f)}}}return o})}}),import_it_last4,createRm5,init_rm5=__esm({"node_modules/ipfs-http-client/esm/src/pin/rm.js"(){init_node_globals(),init_rm_all(),import_it_last4=__toESM(require_it_last(),1),init_configure(),createRm5=e=>{const o=createRmAll(e);return configure(()=>{async function r(t,n={}){return(0,import_it_last4.default)(o([Re({path:t},n)],n))}return r})(e)}}}),decodePin,encodeService,encodeCID2,encodeQuery,encodeAddParams,init_utils7=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/utils.js"(){init_node_globals(),init_cid(),init_to_url_search_params(),decodePin=({Name:e,Status:o,Cid:r})=>({cid:CID.parse(r),name:e,status:o}),encodeService=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},encodeCID2=e=>{if(CID.asCID(e))return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},encodeQuery=({service:e,cid:o,name:r,status:t,all:n})=>{const s=toUrlSearchParams({service:encodeService(e),name:r,force:n?!0:void 0});if(o)for(const u of o)s.append("cid",encodeCID2(u));if(t)for(const u of t)s.append("status",u);return s},encodeAddParams=({cid:e,service:o,background:r,name:t,origins:n})=>{const s=toUrlSearchParams({arg:encodeCID2(e),service:encodeService(o),name:t,background:r?!0:void 0});if(n)for(const u of n)s.append("origin",u.toString());return s}}});function createAdd3(e){async function o(r,l){var f=l,{timeout:t,signal:n,headers:s}=f,u=Dt(f,["timeout","signal","headers"]);const a=await e.post("pin/remote/add",{timeout:t,signal:n,headers:s,searchParams:encodeAddParams(Re({cid:r},u))});return decodePin(await a.json())}return o}var init_add3=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/add.js"(){init_node_globals(),init_utils7()}});function createLs4(e){async function*o(u){var l=u,{timeout:r,signal:t,headers:n}=l,s=Dt(l,["timeout","signal","headers"]);const f=await e.post("pin/remote/ls",{timeout:r,signal:t,headers:n,searchParams:encodeQuery(s)});for await(const a of f.ndjson())yield decodePin(a)}return o}var init_ls4=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/ls.js"(){init_node_globals(),init_utils7()}});function createRm6(e){async function o(u){var l=u,{timeout:r,signal:t,headers:n}=l,s=Dt(l,["timeout","signal","headers"]);await e.post("pin/remote/rm",{timeout:r,signal:t,headers:n,searchParams:encodeQuery($e(Re({},s),{all:!1}))})}return o}var init_rm6=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/rm.js"(){init_node_globals(),init_utils7()}});function createRmAll2(e){async function o(u){var l=u,{timeout:r,signal:t,headers:n}=l,s=Dt(l,["timeout","signal","headers"]);await e.post("pin/remote/rm",{timeout:r,signal:t,headers:n,searchParams:encodeQuery($e(Re({},s),{all:!0}))})}return o}var init_rm_all2=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/rm-all.js"(){init_node_globals(),init_utils7()}});function encodeEndpoint(e){const o=String(e);if(o==="undefined")throw Error("endpoint is required");return o[o.length-1]==="/"?o.slice(0,-1):o}function decodeRemoteService(e){return Re({service:e.Service,endpoint:new URL(e.ApiEndpoint)},e.Stat&&{stat:decodeStat(e.Stat)})}function decodeStat(e){switch(e.Status){case"valid":{const{Pinning:o,Pinned:r,Queued:t,Failed:n}=e.PinCount;return{status:"valid",pinCount:{queued:t,pinning:o,pinned:r,failed:n}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}var init_utils8=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/service/utils.js"(){init_node_globals()}});function createAdd4(e){async function o(r,t){const{endpoint:n,key:s,headers:u,timeout:l,signal:f}=t;await e.post("pin/remote/service/add",{timeout:l,signal:f,searchParams:toUrlSearchParams({arg:[r,encodeEndpoint(n),s]}),headers:u})}return o}var init_add4=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/service/add.js"(){init_node_globals(),init_to_url_search_params(),init_utils8()}});function createLs5(e){async function o(r={}){const{stat:t,headers:n,timeout:s,signal:u}=r,l=await e.post("pin/remote/service/ls",{timeout:s,signal:u,headers:n,searchParams:t===!0?toUrlSearchParams({stat:t}):void 0}),{RemoteServices:f}=await l.json();return f.map(decodeRemoteService)}return o}var init_ls5=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/service/ls.js"(){init_node_globals(),init_to_url_search_params(),init_utils8()}});function createRm7(e){async function o(r,t={}){await e.post("pin/remote/service/rm",{signal:t.signal,headers:t.headers,searchParams:toUrlSearchParams({arg:r})})}return o}var init_rm7=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/service/rm.js"(){init_node_globals(),init_to_url_search_params()}});function createService(e){const o=new Client(e);return{add:createAdd4(o),ls:createLs5(o),rm:createRm7(o)}}var init_service=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/service/index.js"(){init_node_globals(),init_core(),init_add4(),init_ls5(),init_rm7()}});function createRemote(e){const o=new Client(e);return{add:createAdd3(o),ls:createLs4(o),rm:createRm6(o),rmAll:createRmAll2(o),service:createService(e)}}var init_remote=__esm({"node_modules/ipfs-http-client/esm/src/pin/remote/index.js"(){init_node_globals(),init_core(),init_add3(),init_ls4(),init_rm6(),init_rm_all2(),init_service()}});function createPin(e){return{addAll:createAddAll(e),add:createAdd2(e),ls:createLs3(e),rmAll:createRmAll(e),rm:createRm5(e),remote:createRemote(e)}}var init_pin2=__esm({"node_modules/ipfs-http-client/esm/src/pin/index.js"(){init_node_globals(),init_add_all(),init_add2(),init_ls3(),init_rm_all(),init_rm5(),init_remote()}}),rpcArrayToTextArray,rpcToText,rpcToBytes,textToUrlSafeRpc,init_http_rpc_wire_format=__esm({"node_modules/ipfs-http-client/esm/src/lib/http-rpc-wire-format.js"(){init_node_globals(),init_from_string(),init_to_string(),init_base64(),rpcArrayToTextArray=e=>Array.isArray(e)?e.map(rpcToText):e,rpcToText=e=>toString3(rpcToBytes(e)),rpcToBytes=e=>base64url.decode(e),textToUrlSafeRpc=e=>base64url.encode(fromString3(e))}}),createLs6,init_ls6=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/ls.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_http_rpc_wire_format(),createLs6=configure(e=>{async function o(r={}){const{Strings:t}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return rpcArrayToTextArray(t)||[]}return o})}}),createPeers,init_peers=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/peers.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_http_rpc_wire_format(),createPeers=configure(e=>{async function o(r,t={}){const n=await e.post("pubsub/peers",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:textToUrlSafeRpc(r)},t)),headers:t.headers}),{Strings:s}=await n.json();return s||[]}return o})}}),createPublish2,init_publish2=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/publish.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),init_multipart_request_browser(),init_abort_signal(),init_http_rpc_wire_format(),createPublish2=configure(e=>{async function o(r,t,n={}){const s=toUrlSearchParams(Re({arg:textToUrlSafeRpc(r)},n)),u=new AbortController,l=abortSignal(u.signal,n.signal);await(await e.post("pubsub/pub",Re({signal:l,searchParams:s},await multipartRequest([t],u,n.headers)))).text()}return o})}});async function readMessages(e,{onMessage:o,onEnd:r,onError:t}){t=t||log14;try{for await(const n of e.ndjson())try{if(!n.from)continue;o({from:n.from,data:rpcToBytes(n.data),seqno:rpcToBytes(n.seqno),topicIDs:rpcArrayToTextArray(n.topicIDs)})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,t(s,!1,n)}}catch(n){isAbortError(n)||t(n,!0)}finally{r()}}var import_debug15,log14,createSubscribe,isAbortError,init_subscribe=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/subscribe.js"(){init_node_globals(),import_debug15=__toESM(require_browser2(),1),init_configure(),init_to_url_search_params(),init_http_rpc_wire_format(),log14=(0,import_debug15.default)("ipfs-http-client:pubsub:subscribe"),createSubscribe=(e,o)=>configure(r=>{async function t(n,s,u={}){u.signal=o.subscribe(n,s,u.signal);let l,f;const a=new Promise((d,h)=>{l=d,f=h}),c=setTimeout(()=>l(),1e3);return r.post("pubsub/sub",{signal:u.signal,searchParams:toUrlSearchParams(Re({arg:textToUrlSafeRpc(n)},u)),headers:u.headers}).catch(d=>{o.unsubscribe(n,s),f(d)}).then(d=>{clearTimeout(c),!!d&&(readMessages(d,{onMessage:s,onEnd:()=>o.unsubscribe(n,s),onError:u.onError}),l())}),a}return t})(e),isAbortError=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}}}}),createUnsubscribe,init_unsubscribe=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/unsubscribe.js"(){init_node_globals(),createUnsubscribe=(e,o)=>{async function r(t,n){o.unsubscribe(t,n)}return r}}}),SubscriptionTracker,init_subscription_tracker=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/subscription-tracker.js"(){init_node_globals(),SubscriptionTracker=class{constructor(){this._subs=new Map}subscribe(e,o,r){const t=this._subs.get(e)||[];if(t.find(s=>s.handler===o))throw new Error(`Already subscribed to ${e} with this handler`);const n=new AbortController;return this._subs.set(e,[{handler:o,controller:n}].concat(t)),r&&r.addEventListener("abort",()=>this.unsubscribe(e,o)),n.signal}unsubscribe(e,o){const r=this._subs.get(e)||[];let t;o?(this._subs.set(e,r.filter(n=>n.handler!==o)),t=r.filter(n=>n.handler===o)):(this._subs.set(e,[]),t=r),(this._subs.get(e)||[]).length||this._subs.delete(e),t.forEach(n=>n.controller.abort())}}}});function createPubsub2(e){const o=new SubscriptionTracker;return{ls:createLs6(e),peers:createPeers(e),publish:createPublish2(e),subscribe:createSubscribe(e,o),unsubscribe:createUnsubscribe(e,o)}}var init_pubsub2=__esm({"node_modules/ipfs-http-client/esm/src/pubsub/index.js"(){init_node_globals(),init_ls6(),init_peers(),init_publish2(),init_subscribe(),init_unsubscribe(),init_subscription_tracker()}}),createLocal,init_local=__esm({"node_modules/ipfs-http-client/esm/src/refs/local.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createLocal=configure(e=>{async function*o(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:objectToCamel,searchParams:toUrlSearchParams(r),headers:r.headers})).ndjson()}return o})}}),createRefs,init_refs=__esm({"node_modules/ipfs-http-client/esm/src/refs/index.js"(){init_node_globals(),init_cid(),init_object_to_camel(),init_configure(),init_to_url_search_params(),init_local(),createRefs=configure((e,o)=>Object.assign(async function*(t,n={}){const s=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:s.map(l=>`${l instanceof Uint8Array?CID.decode(l):l}`)},n)),headers:n.headers,transform:objectToCamel})).ndjson()},{local:createLocal(o)}))}}),createGc,init_gc2=__esm({"node_modules/ipfs-http-client/esm/src/repo/gc.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createGc=configure(e=>{async function*o(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:n=>({err:n.Error?new Error(n.Error):null,cid:(n.Key||{})["/"]?CID.parse(n.Key["/"]):null})})).ndjson()}return o})}}),createStat5,init_stat5=__esm({"node_modules/ipfs-http-client/esm/src/repo/stat.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createStat5=configure(e=>{async function o(r={}){const n=await(await e.post("repo/stat",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}return o})}}),createVersion,init_version3=__esm({"node_modules/ipfs-http-client/esm/src/repo/version.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createVersion=configure(e=>{async function o(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json()).Version}return o})}});function createRepo3(e){return{gc:createGc(e),stat:createStat5(e),version:createVersion(e)}}var init_repo=__esm({"node_modules/ipfs-http-client/esm/src/repo/index.js"(){init_node_globals(),init_gc2(),init_stat5(),init_version3()}}),createBw,init_bw=__esm({"node_modules/ipfs-http-client/esm/src/stats/bw.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createBw=configure(e=>{async function*o(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers,transform:n=>({totalIn:BigInt(n.TotalIn),totalOut:BigInt(n.TotalOut),rateIn:parseFloat(n.RateIn),rateOut:parseFloat(n.RateOut)})})).ndjson()}return o})}});function createStats(e){return{bitswap:createStat(e),repo:createStat5(e),bw:createBw(e)}}var init_stats=__esm({"node_modules/ipfs-http-client/esm/src/stats/index.js"(){init_node_globals(),init_stat(),init_stat5(),init_bw()}}),import_multiaddr10,createAddrs,init_addrs=__esm({"node_modules/ipfs-http-client/esm/src/swarm/addrs.js"(){init_node_globals(),import_multiaddr10=__toESM(require_src(),1),init_configure(),init_to_url_search_params(),createAddrs=configure(e=>{async function o(r={}){const t=await e.post("swarm/addrs",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Addrs:n}=await t.json();return Object.keys(n).map(s=>({id:s,addrs:(n[s]||[]).map(u=>new import_multiaddr10.Multiaddr(u))}))}return o})}}),createConnect,init_connect=__esm({"node_modules/ipfs-http-client/esm/src/swarm/connect.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createConnect=configure(e=>{async function o(r,t={}){const n=await e.post("swarm/connect",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),{Strings:s}=await n.json();return s||[]}return o})}}),createDisconnect,init_disconnect=__esm({"node_modules/ipfs-http-client/esm/src/swarm/disconnect.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createDisconnect=configure(e=>{async function o(r,t={}){const n=await e.post("swarm/disconnect",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),{Strings:s}=await n.json();return s||[]}return o})}}),import_multiaddr11,createLocalAddrs,init_local_addrs=__esm({"node_modules/ipfs-http-client/esm/src/swarm/local-addrs.js"(){init_node_globals(),import_multiaddr11=__toESM(require_src(),1),init_configure(),init_to_url_search_params(),createLocalAddrs=configure(e=>{async function o(r={}){const t=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Strings:n}=await t.json();return(n||[]).map(s=>new import_multiaddr11.Multiaddr(s))}return o})}}),import_multiaddr12,createPeers2,init_peers2=__esm({"node_modules/ipfs-http-client/esm/src/swarm/peers.js"(){init_node_globals(),import_multiaddr12=__toESM(require_src(),1),init_configure(),init_to_url_search_params(),createPeers2=configure(e=>{async function o(r={}){const t=await e.post("swarm/peers",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers}),{Peers:n}=await t.json();return(n||[]).map(s=>({addr:new import_multiaddr12.Multiaddr(s.Addr),peer:s.Peer,muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return o})}});function createSwarm(e){return{addrs:createAddrs(e),connect:createConnect(e),disconnect:createDisconnect(e),localAddrs:createLocalAddrs(e),peers:createPeers2(e)}}var init_swarm=__esm({"node_modules/ipfs-http-client/esm/src/swarm/index.js"(){init_node_globals(),init_addrs(),init_connect(),init_disconnect(),init_local_addrs(),init_peers2()}});function toCoreInterface5({name:e,hash:o,size:r,mode:t,mtime:n,mtimeNsecs:s}){const u={path:e,cid:CID.parse(o),size:parseInt(r)};return t!=null&&(u.mode=parseInt(t,8)),n!=null&&(u.mtime={secs:n,nsecs:s||0}),u}var createAddAll2,createProgressHandler,createOnUploadProgress,init_add_all2=__esm({"node_modules/ipfs-http-client/esm/src/add-all.js"(){init_node_globals(),init_cid(),init_object_to_camel(),init_configure(),init_multipart_request_browser(),init_to_url_search_params(),init_abort_signal(),createAddAll2=configure(e=>{async function*o(r,t={}){const n=new AbortController,s=abortSignal(n.signal,t.signal),{headers:u,body:l,total:f,parts:a}=await multipartRequest(r,n,t.headers),[c,d]=typeof t.progress=="function"?createProgressHandler(f,a,t.progress):[void 0,void 0],h=await e.post("add",{searchParams:toUrlSearchParams($e(Re({"stream-channels":!0},t),{progress:Boolean(c)})),onUploadProgress:d,signal:s,headers:u,body:l});for await(let g of h.ndjson())g=objectToCamel(g),g.hash!==void 0?yield toCoreInterface5(g):c&&c(g.bytes||0,g.name)}return o}),createProgressHandler=(e,o,r)=>o?[void 0,createOnUploadProgress(e,o,r)]:[r,void 0],createOnUploadProgress=(e,o,r)=>{let t=0;const n=o.length;return({loaded:s,total:u})=>{const l=Math.floor(s/u*e);for(;t<n;){const{start:f,end:a,name:c}=o[t];if(l<a){r(l-f,c);break}else r(a-f,c),t+=1}}}}});function createAdd5(e){const o=createAddAll2(e);return configure(()=>{async function r(t,n={}){return await(0,import_it_last5.default)(o(normaliseInput2(t),n))}return r})(e)}var import_it_last5,init_add5=__esm({"node_modules/ipfs-http-client/esm/src/add.js"(){init_node_globals(),init_add_all2(),import_it_last5=__toESM(require_it_last(),1),init_configure(),init_normalise_input_single()}}),createCat,init_cat=__esm({"node_modules/ipfs-http-client/esm/src/cat.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createCat=configure(e=>{async function*o(r,t={}){yield*(await e.post("cat",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r.toString()},t)),headers:t.headers})).iterator()}return o})}}),createCommands,init_commands=__esm({"node_modules/ipfs-http-client/esm/src/commands.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createCommands=configure(e=>async(r={})=>(await e.post("commands",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).json())}}),createDns,init_dns=__esm({"node_modules/ipfs-http-client/esm/src/dns.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createDns=configure(e=>async(r,t={})=>(await(await e.post("dns",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers})).json()).Path)}}),createGetEndpointConfig,init_get_endpoint_config=__esm({"node_modules/ipfs-http-client/esm/src/get-endpoint-config.js"(){init_node_globals(),init_configure(),createGetEndpointConfig=configure(e=>()=>{const o=new URL(e.opts.base||"");return{host:o.hostname,port:o.port,protocol:o.protocol,pathname:o.pathname,"api-path":o.pathname}})}}),createGet6,init_get6=__esm({"node_modules/ipfs-http-client/esm/src/get.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),createGet6=configure(e=>{async function*o(r,t={}){const n=Re({arg:`${r instanceof Uint8Array?CID.decode(r):r}`},t);n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel),yield*(await e.post("get",{signal:t.signal,searchParams:toUrlSearchParams(n),headers:t.headers})).iterator()}return o})}}),import_multiaddr13,createId,init_id=__esm({"node_modules/ipfs-http-client/esm/src/id.js"(){init_node_globals(),init_object_to_camel(),import_multiaddr13=__toESM(require_src(),1),init_configure(),init_to_url_search_params(),createId=configure(e=>{async function o(r={}){const n=await(await e.post("id",{signal:r.signal,searchParams:toUrlSearchParams(Re({arg:r.peerId?r.peerId.toString():void 0},r)),headers:r.headers})).json(),s=Re({},objectToCamel(n));return s.addresses&&(s.addresses=s.addresses.map(u=>new import_multiaddr13.Multiaddr(u))),s}return o})}}),createIsOnline,init_is_online=__esm({"node_modules/ipfs-http-client/esm/src/is-online.js"(){init_node_globals(),init_id(),createIsOnline=e=>{const o=createId(e);async function r(t={}){const n=await o(t);return Boolean(n&&n.addresses&&n.addresses.length)}return r}}});function typeOf(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var createLs7,init_ls7=__esm({"node_modules/ipfs-http-client/esm/src/ls.js"(){init_node_globals(),init_cid(),init_configure(),init_to_url_search_params(),init_stat3(),createLs7=configure((e,o)=>{async function*r(t,n={}){const s=`${t instanceof Uint8Array?CID.decode(t):t}`;async function u(f){let a=f.Hash;if(a.includes("/")){const d=a.startsWith("/ipfs/")?a:`/ipfs/${a}`;a=(await createStat3(o)(d)).cid}else a=CID.parse(a);const c={name:f.Name,path:s+(f.Name?`/${f.Name}`:""),size:f.Size,cid:a,type:typeOf(f)};return f.Mode&&(c.mode=parseInt(f.Mode,8)),f.Mtime!==void 0&&f.Mtime!==null&&(c.mtime={secs:f.Mtime},f.MtimeNsecs!==void 0&&f.MtimeNsecs!==null&&(c.mtime.nsecs=f.MtimeNsecs)),c}const l=await e.post("ls",{signal:n.signal,searchParams:toUrlSearchParams(Re({arg:s},n)),headers:n.headers});for await(let f of l.ndjson()){if(f=f.Objects,!f)throw new Error("expected .Objects in results");if(f=f[0],!f)throw new Error("expected one array in results.Objects");const a=f.Links;if(!Array.isArray(a))throw new Error("expected one array in results.Objects[0].Links");if(!a.length){yield u(f);return}yield*a.map(u)}}return r})}}),createMount,init_mount2=__esm({"node_modules/ipfs-http-client/esm/src/mount.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createMount=configure(e=>{async function o(r={}){const t=await e.post("dns",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return objectToCamel(await t.json())}return o})}}),createPing,init_ping=__esm({"node_modules/ipfs-http-client/esm/src/ping.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createPing=configure(e=>{async function*o(r,t={}){yield*(await e.post("ping",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:`${r}`},t)),headers:t.headers,transform:objectToCamel})).ndjson()}return o})}}),createResolve3,init_resolve4=__esm({"node_modules/ipfs-http-client/esm/src/resolve.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createResolve3=configure(e=>{async function o(r,t={}){const n=await e.post("resolve",{signal:t.signal,searchParams:toUrlSearchParams(Re({arg:r},t)),headers:t.headers}),{Path:s}=await n.json();return s}return o})}}),import_err_code36,createStart,init_start=__esm({"node_modules/ipfs-http-client/esm/src/start.js"(){init_node_globals(),init_configure(),import_err_code36=__toESM(require_err_code(),1),createStart=configure(e=>async(r={})=>{throw(0,import_err_code36.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})}}),createStop,init_stop=__esm({"node_modules/ipfs-http-client/esm/src/stop.js"(){init_node_globals(),init_configure(),init_to_url_search_params(),createStop=configure(e=>{async function o(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers})).text()}return o})}}),createVersion2,init_version4=__esm({"node_modules/ipfs-http-client/esm/src/version.js"(){init_node_globals(),init_object_to_camel(),init_configure(),init_to_url_search_params(),createVersion2=configure(e=>{async function o(r={}){const t=await e.post("version",{signal:r.signal,searchParams:toUrlSearchParams(r),headers:r.headers});return $e(Re({},objectToCamel(await t.json())),{"ipfs-http-client":"1.0.0"})}return o})}}),require_glob_source=__commonJS({"(disabled):node_modules/ipfs-utils/src/files/glob-source.js"(){init_node_globals()}}),require_url_source=__commonJS({"node_modules/ipfs-utils/src/files/url-source.js"(e,o){init_node_globals();var r=require_http(),t=(s,u)=>({path:decodeURIComponent(new URL(s).pathname.split("/").pop()||""),content:n(s,u)});async function*n(s,u){yield*(await new r().get(s,u)).iterator()}o.exports=t}}),src_exports9={};__export(src_exports9,{CID:()=>CID,create:()=>create6,globSource:()=>globSource,multiaddr:()=>import_multiaddr14.Multiaddr,urlSource:()=>import_url_source.default});function create6(e={}){const o={name:identity.name,code:identity.code,encode:a=>a,decode:a=>a},r=Object.values(bases);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(a=>r.push(a));const t=new Multibases({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),n=Object.values(codecs);[src_exports2,esm_exports5,esm_exports2,dagJOSE,o].concat(e.ipld&&e.ipld.codecs||[]).forEach(a=>n.push(a));const s=new Multicodecs({codecs:n,loadCodec:e.ipld&&e.ipld.loadCodec}),u=Object.values(hashes);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(a=>u.push(a));const l=new Multihashes({hashers:u,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:createAdd5(e),addAll:createAddAll2(e),bitswap:createBitswap(e),block:createBlock(e),bootstrap:createBootstrap(e),cat:createCat(e),commands:createCommands(e),config:createConfig(e),dag:createDag(s,e),dht:createDht(e),diag:createDiag(e),dns:createDns(e),files:createFiles(e),get:createGet6(e),getEndpointConfig:createGetEndpointConfig(e),id:createId(e),isOnline:createIsOnline(e),key:createKey(e),log:createLog(e),ls:createLs7(e),mount:createMount(e),name:createName(e),object:createObject(s,e),pin:createPin(e),ping:createPing(e),pubsub:createPubsub2(e),refs:createRefs(e),repo:createRepo3(e),resolve:createResolve3(e),start:createStart(e),stats:createStats(e),stop:createStop(e),swarm:createSwarm(e),version:createVersion2(e),bases:t,codecs:s,hashers:l}}var dagJOSE,import_glob_source,import_multiaddr14,import_url_source,globSource,init_src14=__esm({"node_modules/ipfs-http-client/esm/src/index.js"(){init_node_globals(),init_multibases(),init_multicodecs(),init_multihashes(),init_src2(),init_esm6(),init_esm2(),dagJOSE=__toESM(require_lib(),1),init_identity(),init_basics(),init_bitswap(),init_block2(),init_bootstrap(),init_config2(),init_dag(),init_dht(),init_diag(),init_files(),init_key2(),init_log(),init_name(),init_object(),init_pin2(),init_pubsub2(),init_refs(),init_repo(),init_stats(),init_swarm(),init_add5(),init_add_all2(),init_cat(),init_commands(),init_dns(),init_get_endpoint_config(),init_get6(),init_id(),init_is_online(),init_ls7(),init_mount2(),init_ping(),init_resolve4(),init_start(),init_stop(),init_version4(),import_glob_source=__toESM(require_glob_source(),1),init_cid(),import_multiaddr14=__toESM(require_src(),1),import_url_source=__toESM(require_url_source(),1),globSource=import_glob_source.default}}),require_browser7=__commonJS({"(disabled):node_modules/ws/browser.js"(){init_node_globals()}}),require_web_socket=__commonJS({"node_modules/it-ws/web-socket.js"(e,o){init_node_globals(),o.exports=typeof WebSocket=="undefined"?require_browser7():WebSocket}}),require_event_iterator=__commonJS({"node_modules/event-iterator/lib/event-iterator.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=class{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(t){if(this.isStopped)return;const n={value:t,done:!1};if(this.pullQueue.length){const s=this.pullQueue.shift();s&&s.resolve(n)}else this.pushQueue.push(Promise.resolve(n)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const t of this.pullQueue)t.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(t){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const n of this.pullQueue)n.reject(t);this.pullQueue.length=0}else{const n=Promise.reject(t);n.catch(()=>{}),this.pushQueue.push(n)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:t=>{const n=this.pushQueue.shift();return n?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),n):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((s,u)=>{this.pullQueue.push({resolve:s,reject:u})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}},r=class{constructor(t,{highWaterMark:n=100,lowWaterMark:s=1}={}){const u=new o;u.highWaterMark=n,u.lowWaterMark=s,u.removeCallback=t({push:l=>u.push(l),stop:()=>u.stop(),fail:l=>u.fail(l),on:(l,f)=>{u.eventHandlers[l]=f}})||(()=>{}),this[Symbol.asyncIterator]=()=>u[Symbol.asyncIterator](),Object.freeze(this)}};e.EventIterator=r,e.default=r}}),require_dom=__commonJS({"node_modules/event-iterator/lib/dom.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_event_iterator();e.EventIterator=o.EventIterator;function r(t,n,s){return new o.EventIterator(({push:u})=>(this.addEventListener(t,u,n),()=>this.removeEventListener(t,u,n)),s)}e.subscribe=r,e.default=o.EventIterator}}),require_source2=__commonJS({"node_modules/it-ws/source.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),{EventIterator:t}=require_dom();function n(s){return s instanceof ArrayBuffer||s!=null&&s.constructor!=null&&s.constructor.name==="ArrayBuffer"&&typeof s.byteLength=="number"}o.exports=s=>{const u=s.removeEventListener||s.removeListener,l=async function*(){const c=new t(({push:d,stop:h,fail:g})=>(s.addEventListener("message",d),s.addEventListener("error",g),s.addEventListener("close",h),()=>{u.call(s,"message",d),u.call(s,"error",g),u.call(s,"close",h)}),{highWaterMark:1/0});for await(const{data:d}of c)yield n(d)?r.from(d):d}();let f=s.readyState===1,a;return s.addEventListener("open",()=>{f=!0,a=null}),s.addEventListener("close",()=>{f=!1,a=null}),s.addEventListener("error",c=>{f||(a=c)}),l.connected=()=>new Promise((c,d)=>{if(f)return c();if(a)return d(a);const h=_=>{u.call(s,"open",g),u.call(s,"error",p),_()},g=()=>h(c),p=_=>h(()=>d(_));s.addEventListener("open",g),s.addEventListener("error",p)}),l}}}),require_ready=__commonJS({"node_modules/it-ws/ready.js"(e,o){init_node_globals(),o.exports=async r=>{if(r.readyState>=2)throw new Error("socket closed");if(r.readyState!==1)return new Promise((t,n)=>{const s=r&&(r.removeEventListener||r.removeListener);function u(){typeof s=="function"&&(s.call(r,"open",l),s.call(r,"error",f))}function l(){u(),t()}function f(a){u(),n(a)}r.addEventListener("open",l),r.addEventListener("error",f)})}}}),require_sink=__commonJS({"node_modules/it-ws/sink.js"(e,o){init_node_globals();var r=require_ready();o.exports=(t,n)=>(n=n||{},n.closeOnEnd=n.closeOnEnd!==!1,async s=>{for await(const u of s){try{await r(t)}catch(l){if(l.message==="socket closed")break;throw l}t.send(u)}if(n.closeOnEnd&&t.readyState<=1)return new Promise((u,l)=>{t.addEventListener("close",f=>{if(f.wasClean||f.code===1006)u();else{const a=Object.assign(new Error("ws error"),{event:f});l(a)}}),setTimeout(()=>t.close())})})}}),require_duplex=__commonJS({"node_modules/it-ws/duplex.js"(e,o){init_node_globals();var r=require_source2(),t=require_sink();o.exports=(n,s)=>{s=s||{},s.binaryType?n.binaryType=s.binaryType:s.binary&&(n.binaryType="arraybuffer");const u={sink:t(n,s),source:r(n,s),connected:()=>u.source.connected()};return u}}}),require_ws_url=__commonJS({"node_modules/it-ws/ws-url.js"(e,o){init_node_globals();var{relative:r}=require_iso_url(),t={http:"ws",https:"wss"},n="ws";o.exports=(s,u)=>r(s,u,t,n)}}),require_client=__commonJS({"node_modules/it-ws/client.js"(e,o){init_node_globals();var r=require_web_socket(),t=require_duplex(),n=require_ws_url();o.exports=function(s,u={}){const l=typeof window=="undefined"?{}:window.location,f=n(s,l),a=new r(f,u.websocket),c=t(a,u);return c.remoteAddress=f,c.close=()=>new Promise((d,h)=>{a.addEventListener("close",d),a.close()}),c.destroy=()=>{a.terminate?a.terminate():a.close()},c.socket=a,c},o.exports.connect=o.exports}}),require_listener_browser=__commonJS({"node_modules/libp2p-websockets/src/listener.browser.js"(e,o){init_node_globals(),o.exports=function(){throw new Error("WebSocket Servers can not be created in the browser!")}}}),require_constants5=__commonJS({"node_modules/libp2p-websockets/src/constants.js"(e){init_node_globals(),e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CODE_TCP=6,e.CODE_WS=477,e.CODE_WSS=478,e.CLOSE_TIMEOUT=2e3}}),require_common5=__commonJS({"node_modules/ip-address/dist/cjs/lib/common.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.isCorrect=e.isInSubnet=void 0;function o(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}e.isInSubnet=o;function r(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}e.isCorrect=r}}),require_constants6=__commonJS({"node_modules/ip-address/dist/cjs/lib/v4/constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.RE_SUBNET_STRING=e.RE_ADDRESS=e.GROUPS=e.BITS=void 0,e.BITS=32,e.GROUPS=4,e.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.RE_SUBNET_STRING=/\/\d{1,2}$/}}),require_address_error=__commonJS({"node_modules/ip-address/dist/cjs/lib/address-error.js"(e){init_node_globals();var o=e&&e.__extends||function(){var t=function(n,s){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(u[f]=l[f])},t(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");t(n,s);function u(){this.constructor=n}n.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AddressError=void 0;var r=function(t){o(n,t);function n(s,u){var l=t.call(this,s)||this;return l.name="AddressError",u!==null&&(l.parseMessage=u),l}return n}(Error);e.AddressError=r}}),require_jsbn2=__commonJS({"node_modules/jsbn/index.js"(e,o){init_node_globals(),function(){var r,t=244837814094590,n=(t&16777215)==15715070;function s(Q,ne,ge){Q!=null&&(typeof Q=="number"?this.fromNumber(Q,ne,ge):ne==null&&typeof Q!="string"?this.fromString(Q,256):this.fromString(Q,ne))}function u(){return new s(null)}function l(Q,ne,ge,Ce,je,Ke){for(;--Ke>=0;){var Ge=ne*this[Q++]+ge[Ce]+je;je=Math.floor(Ge/67108864),ge[Ce++]=Ge&67108863}return je}function f(Q,ne,ge,Ce,je,Ke){for(var Ge=ne&32767,Ye=ne>>15;--Ke>=0;){var nt=this[Q]&32767,lt=this[Q++]>>15,St=Ye*nt+lt*Ge;nt=Ge*nt+((St&32767)<<15)+ge[Ce]+(je&1073741823),je=(nt>>>30)+(St>>>15)+Ye*lt+(je>>>30),ge[Ce++]=nt&1073741823}return je}function a(Q,ne,ge,Ce,je,Ke){for(var Ge=ne&16383,Ye=ne>>14;--Ke>=0;){var nt=this[Q]&16383,lt=this[Q++]>>14,St=Ye*nt+lt*Ge;nt=Ge*nt+((St&16383)<<14)+ge[Ce]+je,je=(nt>>28)+(St>>14)+Ye*lt,ge[Ce++]=nt&268435455}return je}var c=typeof navigator!="undefined";c&&n&&navigator.appName=="Microsoft Internet Explorer"?(s.prototype.am=f,r=30):c&&n&&navigator.appName!="Netscape"?(s.prototype.am=l,r=26):(s.prototype.am=a,r=28),s.prototype.DB=r,s.prototype.DM=(1<<r)-1,s.prototype.DV=1<<r;var d=52;s.prototype.FV=Math.pow(2,d),s.prototype.F1=d-r,s.prototype.F2=2*r-d;var h="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array,p,_;for(p="0".charCodeAt(0),_=0;_<=9;++_)g[p++]=_;for(p="a".charCodeAt(0),_=10;_<36;++_)g[p++]=_;for(p="A".charCodeAt(0),_=10;_<36;++_)g[p++]=_;function m(Q){return h.charAt(Q)}function v(Q,ne){var ge=g[Q.charCodeAt(ne)];return ge==null?-1:ge}function w(Q){for(var ne=this.t-1;ne>=0;--ne)Q[ne]=this[ne];Q.t=this.t,Q.s=this.s}function y(Q){this.t=1,this.s=Q<0?-1:0,Q>0?this[0]=Q:Q<-1?this[0]=Q+this.DV:this.t=0}function b(Q){var ne=u();return ne.fromInt(Q),ne}function T(Q,ne){var ge;if(ne==16)ge=4;else if(ne==8)ge=3;else if(ne==256)ge=8;else if(ne==2)ge=1;else if(ne==32)ge=5;else if(ne==4)ge=2;else{this.fromRadix(Q,ne);return}this.t=0,this.s=0;for(var Ce=Q.length,je=!1,Ke=0;--Ce>=0;){var Ge=ge==8?Q[Ce]&255:v(Q,Ce);if(Ge<0){Q.charAt(Ce)=="-"&&(je=!0);continue}je=!1,Ke==0?this[this.t++]=Ge:Ke+ge>this.DB?(this[this.t-1]|=(Ge&(1<<this.DB-Ke)-1)<<Ke,this[this.t++]=Ge>>this.DB-Ke):this[this.t-1]|=Ge<<Ke,Ke+=ge,Ke>=this.DB&&(Ke-=this.DB)}ge==8&&(Q[0]&128)!=0&&(this.s=-1,Ke>0&&(this[this.t-1]|=(1<<this.DB-Ke)-1<<Ke)),this.clamp(),je&&s.ZERO.subTo(this,this)}function R(){for(var Q=this.s&this.DM;this.t>0&&this[this.t-1]==Q;)--this.t}function S(Q){if(this.s<0)return"-"+this.negate().toString(Q);var ne;if(Q==16)ne=4;else if(Q==8)ne=3;else if(Q==2)ne=1;else if(Q==32)ne=5;else if(Q==4)ne=2;else return this.toRadix(Q);var ge=(1<<ne)-1,Ce,je=!1,Ke="",Ge=this.t,Ye=this.DB-Ge*this.DB%ne;if(Ge-- >0)for(Ye<this.DB&&(Ce=this[Ge]>>Ye)>0&&(je=!0,Ke=m(Ce));Ge>=0;)Ye<ne?(Ce=(this[Ge]&(1<<Ye)-1)<<ne-Ye,Ce|=this[--Ge]>>(Ye+=this.DB-ne)):(Ce=this[Ge]>>(Ye-=ne)&ge,Ye<=0&&(Ye+=this.DB,--Ge)),Ce>0&&(je=!0),je&&(Ke+=m(Ce));return je?Ke:"0"}function E(){var Q=u();return s.ZERO.subTo(this,Q),Q}function A(){return this.s<0?this.negate():this}function C(Q){var ne=this.s-Q.s;if(ne!=0)return ne;var ge=this.t;if(ne=ge-Q.t,ne!=0)return this.s<0?-ne:ne;for(;--ge>=0;)if((ne=this[ge]-Q[ge])!=0)return ne;return 0}function I(Q){var ne=1,ge;return(ge=Q>>>16)!=0&&(Q=ge,ne+=16),(ge=Q>>8)!=0&&(Q=ge,ne+=8),(ge=Q>>4)!=0&&(Q=ge,ne+=4),(ge=Q>>2)!=0&&(Q=ge,ne+=2),(ge=Q>>1)!=0&&(Q=ge,ne+=1),ne}function P(){return this.t<=0?0:this.DB*(this.t-1)+I(this[this.t-1]^this.s&this.DM)}function O(Q,ne){var ge;for(ge=this.t-1;ge>=0;--ge)ne[ge+Q]=this[ge];for(ge=Q-1;ge>=0;--ge)ne[ge]=0;ne.t=this.t+Q,ne.s=this.s}function k(Q,ne){for(var ge=Q;ge<this.t;++ge)ne[ge-Q]=this[ge];ne.t=Math.max(this.t-Q,0),ne.s=this.s}function N(Q,ne){var ge=Q%this.DB,Ce=this.DB-ge,je=(1<<Ce)-1,Ke=Math.floor(Q/this.DB),Ge=this.s<<ge&this.DM,Ye;for(Ye=this.t-1;Ye>=0;--Ye)ne[Ye+Ke+1]=this[Ye]>>Ce|Ge,Ge=(this[Ye]&je)<<ge;for(Ye=Ke-1;Ye>=0;--Ye)ne[Ye]=0;ne[Ke]=Ge,ne.t=this.t+Ke+1,ne.s=this.s,ne.clamp()}function K(Q,ne){ne.s=this.s;var ge=Math.floor(Q/this.DB);if(ge>=this.t){ne.t=0;return}var Ce=Q%this.DB,je=this.DB-Ce,Ke=(1<<Ce)-1;ne[0]=this[ge]>>Ce;for(var Ge=ge+1;Ge<this.t;++Ge)ne[Ge-ge-1]|=(this[Ge]&Ke)<<je,ne[Ge-ge]=this[Ge]>>Ce;Ce>0&&(ne[this.t-ge-1]|=(this.s&Ke)<<je),ne.t=this.t-ge,ne.clamp()}function U(Q,ne){for(var ge=0,Ce=0,je=Math.min(Q.t,this.t);ge<je;)Ce+=this[ge]-Q[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;if(Q.t<this.t){for(Ce-=Q.s;ge<this.t;)Ce+=this[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;Ce+=this.s}else{for(Ce+=this.s;ge<Q.t;)Ce-=Q[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;Ce-=Q.s}ne.s=Ce<0?-1:0,Ce<-1?ne[ge++]=this.DV+Ce:Ce>0&&(ne[ge++]=Ce),ne.t=ge,ne.clamp()}function L(Q,ne){var ge=this.abs(),Ce=Q.abs(),je=ge.t;for(ne.t=je+Ce.t;--je>=0;)ne[je]=0;for(je=0;je<Ce.t;++je)ne[je+ge.t]=ge.am(0,Ce[je],ne,je,0,ge.t);ne.s=0,ne.clamp(),this.s!=Q.s&&s.ZERO.subTo(ne,ne)}function re(Q){for(var ne=this.abs(),ge=Q.t=2*ne.t;--ge>=0;)Q[ge]=0;for(ge=0;ge<ne.t-1;++ge){var Ce=ne.am(ge,ne[ge],Q,2*ge,0,1);(Q[ge+ne.t]+=ne.am(ge+1,2*ne[ge],Q,2*ge+1,Ce,ne.t-ge-1))>=ne.DV&&(Q[ge+ne.t]-=ne.DV,Q[ge+ne.t+1]=1)}Q.t>0&&(Q[Q.t-1]+=ne.am(ge,ne[ge],Q,2*ge,0,1)),Q.s=0,Q.clamp()}function Z(Q,ne,ge){var Ce=Q.abs();if(!(Ce.t<=0)){var je=this.abs();if(je.t<Ce.t){ne!=null&&ne.fromInt(0),ge!=null&&this.copyTo(ge);return}ge==null&&(ge=u());var Ke=u(),Ge=this.s,Ye=Q.s,nt=this.DB-I(Ce[Ce.t-1]);nt>0?(Ce.lShiftTo(nt,Ke),je.lShiftTo(nt,ge)):(Ce.copyTo(Ke),je.copyTo(ge));var lt=Ke.t,St=Ke[lt-1];if(St!=0){var wt=St*(1<<this.F1)+(lt>1?Ke[lt-2]>>this.F2:0),Pt=this.FV/wt,qt=(1<<this.F1)/wt,Tt=1<<this.F2,Rt=ge.t,Mt=Rt-lt,kt=ne==null?u():ne;for(Ke.dlShiftTo(Mt,kt),ge.compareTo(kt)>=0&&(ge[ge.t++]=1,ge.subTo(kt,ge)),s.ONE.dlShiftTo(lt,kt),kt.subTo(Ke,Ke);Ke.t<lt;)Ke[Ke.t++]=0;for(;--Mt>=0;){var Yt=ge[--Rt]==St?this.DM:Math.floor(ge[Rt]*Pt+(ge[Rt-1]+Tt)*qt);if((ge[Rt]+=Ke.am(0,Yt,ge,Mt,0,lt))<Yt)for(Ke.dlShiftTo(Mt,kt),ge.subTo(kt,ge);ge[Rt]<--Yt;)ge.subTo(kt,ge)}ne!=null&&(ge.drShiftTo(lt,ne),Ge!=Ye&&s.ZERO.subTo(ne,ne)),ge.t=lt,ge.clamp(),nt>0&&ge.rShiftTo(nt,ge),Ge<0&&s.ZERO.subTo(ge,ge)}}}function V(Q){var ne=u();return this.abs().divRemTo(Q,null,ne),this.s<0&&ne.compareTo(s.ZERO)>0&&Q.subTo(ne,ne),ne}function ee(Q){this.m=Q}function fe(Q){return Q.s<0||Q.compareTo(this.m)>=0?Q.mod(this.m):Q}function _e(Q){return Q}function ce(Q){Q.divRemTo(this.m,null,Q)}function Ee(Q,ne,ge){Q.multiplyTo(ne,ge),this.reduce(ge)}function Ie(Q,ne){Q.squareTo(ne),this.reduce(ne)}ee.prototype.convert=fe,ee.prototype.revert=_e,ee.prototype.reduce=ce,ee.prototype.mulTo=Ee,ee.prototype.sqrTo=Ie;function ue(){if(this.t<1)return 0;var Q=this[0];if((Q&1)==0)return 0;var ne=Q&3;return ne=ne*(2-(Q&15)*ne)&15,ne=ne*(2-(Q&255)*ne)&255,ne=ne*(2-((Q&65535)*ne&65535))&65535,ne=ne*(2-Q*ne%this.DV)%this.DV,ne>0?this.DV-ne:-ne}function pe(Q){this.m=Q,this.mp=Q.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<Q.DB-15)-1,this.mt2=2*Q.t}function Ae(Q){var ne=u();return Q.abs().dlShiftTo(this.m.t,ne),ne.divRemTo(this.m,null,ne),Q.s<0&&ne.compareTo(s.ZERO)>0&&this.m.subTo(ne,ne),ne}function Y(Q){var ne=u();return Q.copyTo(ne),this.reduce(ne),ne}function se(Q){for(;Q.t<=this.mt2;)Q[Q.t++]=0;for(var ne=0;ne<this.m.t;++ne){var ge=Q[ne]&32767,Ce=ge*this.mpl+((ge*this.mph+(Q[ne]>>15)*this.mpl&this.um)<<15)&Q.DM;for(ge=ne+this.m.t,Q[ge]+=this.m.am(0,Ce,Q,ne,0,this.m.t);Q[ge]>=Q.DV;)Q[ge]-=Q.DV,Q[++ge]++}Q.clamp(),Q.drShiftTo(this.m.t,Q),Q.compareTo(this.m)>=0&&Q.subTo(this.m,Q)}function F(Q,ne){Q.squareTo(ne),this.reduce(ne)}function j(Q,ne,ge){Q.multiplyTo(ne,ge),this.reduce(ge)}pe.prototype.convert=Ae,pe.prototype.revert=Y,pe.prototype.reduce=se,pe.prototype.mulTo=j,pe.prototype.sqrTo=F;function B(){return(this.t>0?this[0]&1:this.s)==0}function $(Q,ne){if(Q>4294967295||Q<1)return s.ONE;var ge=u(),Ce=u(),je=ne.convert(this),Ke=I(Q)-1;for(je.copyTo(ge);--Ke>=0;)if(ne.sqrTo(ge,Ce),(Q&1<<Ke)>0)ne.mulTo(Ce,je,ge);else{var Ge=ge;ge=Ce,Ce=Ge}return ne.revert(ge)}function G(Q,ne){var ge;return Q<256||ne.isEven()?ge=new ee(ne):ge=new pe(ne),this.exp(Q,ge)}s.prototype.copyTo=w,s.prototype.fromInt=y,s.prototype.fromString=T,s.prototype.clamp=R,s.prototype.dlShiftTo=O,s.prototype.drShiftTo=k,s.prototype.lShiftTo=N,s.prototype.rShiftTo=K,s.prototype.subTo=U,s.prototype.multiplyTo=L,s.prototype.squareTo=re,s.prototype.divRemTo=Z,s.prototype.invDigit=ue,s.prototype.isEven=B,s.prototype.exp=$,s.prototype.toString=S,s.prototype.negate=E,s.prototype.abs=A,s.prototype.compareTo=C,s.prototype.bitLength=P,s.prototype.mod=V,s.prototype.modPowInt=G,s.ZERO=b(0),s.ONE=b(1);function X(){var Q=u();return this.copyTo(Q),Q}function H(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function he(){return this.t==0?this.s:this[0]<<24>>24}function we(){return this.t==0?this.s:this[0]<<16>>16}function Te(Q){return Math.floor(Math.LN2*this.DB/Math.log(Q))}function De(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Me(Q){if(Q==null&&(Q=10),this.signum()==0||Q<2||Q>36)return"0";var ne=this.chunkSize(Q),ge=Math.pow(Q,ne),Ce=b(ge),je=u(),Ke=u(),Ge="";for(this.divRemTo(Ce,je,Ke);je.signum()>0;)Ge=(ge+Ke.intValue()).toString(Q).substr(1)+Ge,je.divRemTo(Ce,je,Ke);return Ke.intValue().toString(Q)+Ge}function Be(Q,ne){this.fromInt(0),ne==null&&(ne=10);for(var ge=this.chunkSize(ne),Ce=Math.pow(ne,ge),je=!1,Ke=0,Ge=0,Ye=0;Ye<Q.length;++Ye){var nt=v(Q,Ye);if(nt<0){Q.charAt(Ye)=="-"&&this.signum()==0&&(je=!0);continue}Ge=ne*Ge+nt,++Ke>=ge&&(this.dMultiply(Ce),this.dAddOffset(Ge,0),Ke=0,Ge=0)}Ke>0&&(this.dMultiply(Math.pow(ne,Ke)),this.dAddOffset(Ge,0)),je&&s.ZERO.subTo(this,this)}function Le(Q,ne,ge){if(typeof ne=="number")if(Q<2)this.fromInt(1);else for(this.fromNumber(Q,ge),this.testBit(Q-1)||this.bitwiseTo(s.ONE.shiftLeft(Q-1),de,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(ne);)this.dAddOffset(2,0),this.bitLength()>Q&&this.subTo(s.ONE.shiftLeft(Q-1),this);else{var Ce=new Array,je=Q&7;Ce.length=(Q>>3)+1,ne.nextBytes(Ce),je>0?Ce[0]&=(1<<je)-1:Ce[0]=0,this.fromString(Ce,256)}}function W(){var Q=this.t,ne=new Array;ne[0]=this.s;var ge=this.DB-Q*this.DB%8,Ce,je=0;if(Q-- >0)for(ge<this.DB&&(Ce=this[Q]>>ge)!=(this.s&this.DM)>>ge&&(ne[je++]=Ce|this.s<<this.DB-ge);Q>=0;)ge<8?(Ce=(this[Q]&(1<<ge)-1)<<8-ge,Ce|=this[--Q]>>(ge+=this.DB-8)):(Ce=this[Q]>>(ge-=8)&255,ge<=0&&(ge+=this.DB,--Q)),(Ce&128)!=0&&(Ce|=-256),je==0&&(this.s&128)!=(Ce&128)&&++je,(je>0||Ce!=this.s)&&(ne[je++]=Ce);return ne}function q(Q){return this.compareTo(Q)==0}function M(Q){return this.compareTo(Q)<0?this:Q}function ie(Q){return this.compareTo(Q)>0?this:Q}function ve(Q,ne,ge){var Ce,je,Ke=Math.min(Q.t,this.t);for(Ce=0;Ce<Ke;++Ce)ge[Ce]=ne(this[Ce],Q[Ce]);if(Q.t<this.t){for(je=Q.s&this.DM,Ce=Ke;Ce<this.t;++Ce)ge[Ce]=ne(this[Ce],je);ge.t=this.t}else{for(je=this.s&this.DM,Ce=Ke;Ce<Q.t;++Ce)ge[Ce]=ne(je,Q[Ce]);ge.t=Q.t}ge.s=ne(this.s,Q.s),ge.clamp()}function D(Q,ne){return Q&ne}function z(Q){var ne=u();return this.bitwiseTo(Q,D,ne),ne}function de(Q,ne){return Q|ne}function be(Q){var ne=u();return this.bitwiseTo(Q,de,ne),ne}function le(Q,ne){return Q^ne}function ye(Q){var ne=u();return this.bitwiseTo(Q,le,ne),ne}function J(Q,ne){return Q&~ne}function qe(Q){var ne=u();return this.bitwiseTo(Q,J,ne),ne}function Ue(){for(var Q=u(),ne=0;ne<this.t;++ne)Q[ne]=this.DM&~this[ne];return Q.t=this.t,Q.s=~this.s,Q}function x(Q){var ne=u();return Q<0?this.rShiftTo(-Q,ne):this.lShiftTo(Q,ne),ne}function ke(Q){var ne=u();return Q<0?this.lShiftTo(-Q,ne):this.rShiftTo(Q,ne),ne}function Ne(Q){if(Q==0)return-1;var ne=0;return(Q&65535)==0&&(Q>>=16,ne+=16),(Q&255)==0&&(Q>>=8,ne+=8),(Q&15)==0&&(Q>>=4,ne+=4),(Q&3)==0&&(Q>>=2,ne+=2),(Q&1)==0&&++ne,ne}function ae(){for(var Q=0;Q<this.t;++Q)if(this[Q]!=0)return Q*this.DB+Ne(this[Q]);return this.s<0?this.t*this.DB:-1}function Se(Q){for(var ne=0;Q!=0;)Q&=Q-1,++ne;return ne}function Oe(){for(var Q=0,ne=this.s&this.DM,ge=0;ge<this.t;++ge)Q+=Se(this[ge]^ne);return Q}function He(Q){var ne=Math.floor(Q/this.DB);return ne>=this.t?this.s!=0:(this[ne]&1<<Q%this.DB)!=0}function Ve(Q,ne){var ge=s.ONE.shiftLeft(Q);return this.bitwiseTo(ge,ne,ge),ge}function ze(Q){return this.changeBit(Q,de)}function Xe(Q){return this.changeBit(Q,J)}function ct(Q){return this.changeBit(Q,le)}function Ze(Q,ne){for(var ge=0,Ce=0,je=Math.min(Q.t,this.t);ge<je;)Ce+=this[ge]+Q[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;if(Q.t<this.t){for(Ce+=Q.s;ge<this.t;)Ce+=this[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;Ce+=this.s}else{for(Ce+=this.s;ge<Q.t;)Ce+=Q[ge],ne[ge++]=Ce&this.DM,Ce>>=this.DB;Ce+=Q.s}ne.s=Ce<0?-1:0,Ce>0?ne[ge++]=Ce:Ce<-1&&(ne[ge++]=this.DV+Ce),ne.t=ge,ne.clamp()}function Qe(Q){var ne=u();return this.addTo(Q,ne),ne}function rt(Q){var ne=u();return this.subTo(Q,ne),ne}function st(Q){var ne=u();return this.multiplyTo(Q,ne),ne}function it(){var Q=u();return this.squareTo(Q),Q}function At(Q){var ne=u();return this.divRemTo(Q,ne,null),ne}function ht(Q){var ne=u();return this.divRemTo(Q,null,ne),ne}function tt(Q){var ne=u(),ge=u();return this.divRemTo(Q,ne,ge),new Array(ne,ge)}function ut(Q){this[this.t]=this.am(0,Q-1,this,0,0,this.t),++this.t,this.clamp()}function ot(Q,ne){if(Q!=0){for(;this.t<=ne;)this[this.t++]=0;for(this[ne]+=Q;this[ne]>=this.DV;)this[ne]-=this.DV,++ne>=this.t&&(this[this.t++]=0),++this[ne]}}function dt(){}function _t(Q){return Q}function Nt(Q,ne,ge){Q.multiplyTo(ne,ge)}function xt(Q,ne){Q.squareTo(ne)}dt.prototype.convert=_t,dt.prototype.revert=_t,dt.prototype.mulTo=Nt,dt.prototype.sqrTo=xt;function Ct(Q){return this.exp(Q,new dt)}function jt(Q,ne,ge){var Ce=Math.min(this.t+Q.t,ne);for(ge.s=0,ge.t=Ce;Ce>0;)ge[--Ce]=0;var je;for(je=ge.t-this.t;Ce<je;++Ce)ge[Ce+this.t]=this.am(0,Q[Ce],ge,Ce,0,this.t);for(je=Math.min(Q.t,ne);Ce<je;++Ce)this.am(0,Q[Ce],ge,Ce,0,ne-Ce);ge.clamp()}function Ut(Q,ne,ge){--ne;var Ce=ge.t=this.t+Q.t-ne;for(ge.s=0;--Ce>=0;)ge[Ce]=0;for(Ce=Math.max(ne-this.t,0);Ce<Q.t;++Ce)ge[this.t+Ce-ne]=this.am(ne-Ce,Q[Ce],ge,0,0,this.t+Ce-ne);ge.clamp(),ge.drShiftTo(1,ge)}function It(Q){this.r2=u(),this.q3=u(),s.ONE.dlShiftTo(2*Q.t,this.r2),this.mu=this.r2.divide(Q),this.m=Q}function Ft(Q){if(Q.s<0||Q.t>2*this.m.t)return Q.mod(this.m);if(Q.compareTo(this.m)<0)return Q;var ne=u();return Q.copyTo(ne),this.reduce(ne),ne}function Kt(Q){return Q}function $t(Q){for(Q.drShiftTo(this.m.t-1,this.r2),Q.t>this.m.t+1&&(Q.t=this.m.t+1,Q.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Q.compareTo(this.r2)<0;)Q.dAddOffset(1,this.m.t+1);for(Q.subTo(this.r2,Q);Q.compareTo(this.m)>=0;)Q.subTo(this.m,Q)}function Vt(Q,ne){Q.squareTo(ne),this.reduce(ne)}function Jt(Q,ne,ge){Q.multiplyTo(ne,ge),this.reduce(ge)}It.prototype.convert=Ft,It.prototype.revert=Kt,It.prototype.reduce=$t,It.prototype.mulTo=Jt,It.prototype.sqrTo=Vt;function zt(Q,ne){var ge=Q.bitLength(),Ce,je=b(1),Ke;if(ge<=0)return je;ge<18?Ce=1:ge<48?Ce=3:ge<144?Ce=4:ge<768?Ce=5:Ce=6,ge<8?Ke=new ee(ne):ne.isEven()?Ke=new It(ne):Ke=new pe(ne);var Ge=new Array,Ye=3,nt=Ce-1,lt=(1<<Ce)-1;if(Ge[1]=Ke.convert(this),Ce>1){var St=u();for(Ke.sqrTo(Ge[1],St);Ye<=lt;)Ge[Ye]=u(),Ke.mulTo(St,Ge[Ye-2],Ge[Ye]),Ye+=2}var wt=Q.t-1,Pt,qt=!0,Tt=u(),Rt;for(ge=I(Q[wt])-1;wt>=0;){for(ge>=nt?Pt=Q[wt]>>ge-nt&lt:(Pt=(Q[wt]&(1<<ge+1)-1)<<nt-ge,wt>0&&(Pt|=Q[wt-1]>>this.DB+ge-nt)),Ye=Ce;(Pt&1)==0;)Pt>>=1,--Ye;if((ge-=Ye)<0&&(ge+=this.DB,--wt),qt)Ge[Pt].copyTo(je),qt=!1;else{for(;Ye>1;)Ke.sqrTo(je,Tt),Ke.sqrTo(Tt,je),Ye-=2;Ye>0?Ke.sqrTo(je,Tt):(Rt=je,je=Tt,Tt=Rt),Ke.mulTo(Tt,Ge[Pt],je)}for(;wt>=0&&(Q[wt]&1<<ge)==0;)Ke.sqrTo(je,Tt),Rt=je,je=Tt,Tt=Rt,--ge<0&&(ge=this.DB-1,--wt)}return Ke.revert(je)}function mt(Q){var ne=this.s<0?this.negate():this.clone(),ge=Q.s<0?Q.negate():Q.clone();if(ne.compareTo(ge)<0){var Ce=ne;ne=ge,ge=Ce}var je=ne.getLowestSetBit(),Ke=ge.getLowestSetBit();if(Ke<0)return ne;for(je<Ke&&(Ke=je),Ke>0&&(ne.rShiftTo(Ke,ne),ge.rShiftTo(Ke,ge));ne.signum()>0;)(je=ne.getLowestSetBit())>0&&ne.rShiftTo(je,ne),(je=ge.getLowestSetBit())>0&&ge.rShiftTo(je,ge),ne.compareTo(ge)>=0?(ne.subTo(ge,ne),ne.rShiftTo(1,ne)):(ge.subTo(ne,ge),ge.rShiftTo(1,ge));return Ke>0&&ge.lShiftTo(Ke,ge),ge}function Ht(Q){if(Q<=0)return 0;var ne=this.DV%Q,ge=this.s<0?Q-1:0;if(this.t>0)if(ne==0)ge=this[0]%Q;else for(var Ce=this.t-1;Ce>=0;--Ce)ge=(ne*ge+this[Ce])%Q;return ge}function Gt(Q){var ne=Q.isEven();if(this.isEven()&&ne||Q.signum()==0)return s.ZERO;for(var ge=Q.clone(),Ce=this.clone(),je=b(1),Ke=b(0),Ge=b(0),Ye=b(1);ge.signum()!=0;){for(;ge.isEven();)ge.rShiftTo(1,ge),ne?((!je.isEven()||!Ke.isEven())&&(je.addTo(this,je),Ke.subTo(Q,Ke)),je.rShiftTo(1,je)):Ke.isEven()||Ke.subTo(Q,Ke),Ke.rShiftTo(1,Ke);for(;Ce.isEven();)Ce.rShiftTo(1,Ce),ne?((!Ge.isEven()||!Ye.isEven())&&(Ge.addTo(this,Ge),Ye.subTo(Q,Ye)),Ge.rShiftTo(1,Ge)):Ye.isEven()||Ye.subTo(Q,Ye),Ye.rShiftTo(1,Ye);ge.compareTo(Ce)>=0?(ge.subTo(Ce,ge),ne&&je.subTo(Ge,je),Ke.subTo(Ye,Ke)):(Ce.subTo(ge,Ce),ne&&Ge.subTo(je,Ge),Ye.subTo(Ke,Ye))}if(Ce.compareTo(s.ONE)!=0)return s.ZERO;if(Ye.compareTo(Q)>=0)return Ye.subtract(Q);if(Ye.signum()<0)Ye.addTo(Q,Ye);else return Ye;return Ye.signum()<0?Ye.add(Q):Ye}var ft=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Wt=(1<<26)/ft[ft.length-1];function te(Q){var ne,ge=this.abs();if(ge.t==1&&ge[0]<=ft[ft.length-1]){for(ne=0;ne<ft.length;++ne)if(ge[0]==ft[ne])return!0;return!1}if(ge.isEven())return!1;for(ne=1;ne<ft.length;){for(var Ce=ft[ne],je=ne+1;je<ft.length&&Ce<Wt;)Ce*=ft[je++];for(Ce=ge.modInt(Ce);ne<je;)if(Ce%ft[ne++]==0)return!1}return ge.millerRabin(Q)}function oe(Q){var ne=this.subtract(s.ONE),ge=ne.getLowestSetBit();if(ge<=0)return!1;var Ce=ne.shiftRight(ge);Q=Q+1>>1,Q>ft.length&&(Q=ft.length);for(var je=u(),Ke=0;Ke<Q;++Ke){je.fromInt(ft[Math.floor(Math.random()*ft.length)]);var Ge=je.modPow(Ce,this);if(Ge.compareTo(s.ONE)!=0&&Ge.compareTo(ne)!=0){for(var Ye=1;Ye++<ge&&Ge.compareTo(ne)!=0;)if(Ge=Ge.modPowInt(2,this),Ge.compareTo(s.ONE)==0)return!1;if(Ge.compareTo(ne)!=0)return!1}}return!0}s.prototype.chunkSize=Te,s.prototype.toRadix=Me,s.prototype.fromRadix=Be,s.prototype.fromNumber=Le,s.prototype.bitwiseTo=ve,s.prototype.changeBit=Ve,s.prototype.addTo=Ze,s.prototype.dMultiply=ut,s.prototype.dAddOffset=ot,s.prototype.multiplyLowerTo=jt,s.prototype.multiplyUpperTo=Ut,s.prototype.modInt=Ht,s.prototype.millerRabin=oe,s.prototype.clone=X,s.prototype.intValue=H,s.prototype.byteValue=he,s.prototype.shortValue=we,s.prototype.signum=De,s.prototype.toByteArray=W,s.prototype.equals=q,s.prototype.min=M,s.prototype.max=ie,s.prototype.and=z,s.prototype.or=be,s.prototype.xor=ye,s.prototype.andNot=qe,s.prototype.not=Ue,s.prototype.shiftLeft=x,s.prototype.shiftRight=ke,s.prototype.getLowestSetBit=ae,s.prototype.bitCount=Oe,s.prototype.testBit=He,s.prototype.setBit=ze,s.prototype.clearBit=Xe,s.prototype.flipBit=ct,s.prototype.add=Qe,s.prototype.subtract=rt,s.prototype.multiply=st,s.prototype.divide=At,s.prototype.remainder=ht,s.prototype.divideAndRemainder=tt,s.prototype.modPow=zt,s.prototype.modInverse=Gt,s.prototype.pow=Ct,s.prototype.gcd=mt,s.prototype.isProbablePrime=te,s.prototype.square=it,s.prototype.Barrett=It;var me,Pe,xe;function Fe(Q){Pe[xe++]^=Q&255,Pe[xe++]^=Q>>8&255,Pe[xe++]^=Q>>16&255,Pe[xe++]^=Q>>24&255,xe>=Et&&(xe-=Et)}function We(){Fe(new Date().getTime())}if(Pe==null){Pe=new Array,xe=0;var Je;if(typeof window!="undefined"&&window.crypto){if(window.crypto.getRandomValues){var et=new Uint8Array(32);for(window.crypto.getRandomValues(et),Je=0;Je<32;++Je)Pe[xe++]=et[Je]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var at=window.crypto.random(32);for(Je=0;Je<at.length;++Je)Pe[xe++]=at.charCodeAt(Je)&255}}for(;xe<Et;)Je=Math.floor(65536*Math.random()),Pe[xe++]=Je>>>8,Pe[xe++]=Je&255;xe=0,We()}function gt(){if(me==null){for(We(),me=Bt(),me.init(Pe),xe=0;xe<Pe.length;++xe)Pe[xe]=0;xe=0}return me.next()}function pt(Q){var ne;for(ne=0;ne<Q.length;++ne)Q[ne]=gt()}function yt(){}yt.prototype.nextBytes=pt;function Ot(){this.i=0,this.j=0,this.S=new Array}function vt(Q){var ne,ge,Ce;for(ne=0;ne<256;++ne)this.S[ne]=ne;for(ge=0,ne=0;ne<256;++ne)ge=ge+this.S[ne]+Q[ne%Q.length]&255,Ce=this.S[ne],this.S[ne]=this.S[ge],this.S[ge]=Ce;this.i=0,this.j=0}function bt(){var Q;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,Q=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=Q,this.S[Q+this.S[this.i]&255]}Ot.prototype.init=vt,Ot.prototype.next=bt;function Bt(){return new Ot}var Et=256;typeof e!="undefined"?e=o.exports={default:s,BigInteger:s,SecureRandom:yt}:this.jsbn={BigInteger:s,SecureRandom:yt}}.call(e)}}),require_sprintf=__commonJS({"node_modules/ip-address/node_modules/sprintf-js/src/sprintf.js"(e){init_node_globals(),function(){var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(l){return n(u(l),arguments)}function t(l,f){return r.apply(null,[l].concat(f||[]))}function n(l,f){var a=1,c=l.length,d,h="",g,p,_,m,v,w,y,b;for(g=0;g<c;g++)if(typeof l[g]=="string")h+=l[g];else if(typeof l[g]=="object"){if(_=l[g],_.keys)for(d=f[a],p=0;p<_.keys.length;p++){if(d==null)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[p],_.keys[p-1]));d=d[_.keys[p]]}else _.param_no?d=f[_.param_no]:d=f[a++];if(o.not_type.test(_.type)&&o.not_primitive.test(_.type)&&d instanceof Function&&(d=d()),o.numeric_arg.test(_.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(r("[sprintf] expecting number but found %T",d));switch(o.number.test(_.type)&&(y=d>=0),_.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,_.width?parseInt(_.width):0);break;case"e":d=_.precision?parseFloat(d).toExponential(_.precision):parseFloat(d).toExponential();break;case"f":d=_.precision?parseFloat(d).toFixed(_.precision):parseFloat(d);break;case"g":d=_.precision?String(Number(d.toPrecision(_.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=_.precision?d.substring(0,_.precision):d;break;case"t":d=String(!!d),d=_.precision?d.substring(0,_.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=_.precision?d.substring(0,_.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=_.precision?d.substring(0,_.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}o.json.test(_.type)?h+=d:(o.number.test(_.type)&&(!y||_.sign)?(b=y?"+":"-",d=d.toString().replace(o.sign,"")):b="",v=_.pad_char?_.pad_char==="0"?"0":_.pad_char.charAt(1):" ",w=_.width-(b+d).length,m=_.width&&w>0?v.repeat(w):"",h+=_.align?b+d+m:v==="0"?b+m+d:m+b+d)}return h}var s=Object.create(null);function u(l){if(s[l])return s[l];for(var f=l,a,c=[],d=0;f;){if((a=o.text.exec(f))!==null)c.push(a[0]);else if((a=o.modulo.exec(f))!==null)c.push("%");else if((a=o.placeholder.exec(f))!==null){if(a[2]){d|=1;var h=[],g=a[2],p=[];if((p=o.key.exec(g))!==null)for(h.push(p[1]);(g=g.substring(p[0].length))!=="";)if((p=o.key_access.exec(g))!==null)h.push(p[1]);else if((p=o.index_access.exec(g))!==null)h.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");a[2]=h}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");f=f.substring(a[0].length)}return s[l]=c}typeof e!="undefined"&&(e.sprintf=r,e.vsprintf=t),typeof window!="undefined"&&(window.sprintf=r,window.vsprintf=t,typeof define=="function"&&define.amd&&define(function(){return{sprintf:r,vsprintf:t}}))}()}}),require_ipv4=__commonJS({"node_modules/ip-address/dist/cjs/lib/ipv4.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(c,d,h,g){g===void 0&&(g=h),Object.defineProperty(c,g,{enumerable:!0,get:function(){return d[h]}})}:function(c,d,h,g){g===void 0&&(g=h),c[g]=d[h]}),r=e&&e.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),t=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&o(d,c,h);return r(d,c),d};Object.defineProperty(e,"__esModule",{value:!0}),e.Address4=void 0;var n=t(require_common5()),s=t(require_constants6()),u=require_address_error(),l=require_jsbn2(),f=require_sprintf(),a=function(){function c(d){this.groups=s.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=n.isCorrect(s.BITS),this.isInSubnet=n.isInSubnet,this.address=d;var h=s.RE_SUBNET_STRING.exec(d);if(h){if(this.parsedSubnet=h[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,this.subnetMask<0||this.subnetMask>s.BITS)throw new u.AddressError("Invalid subnet mask.");d=d.replace(s.RE_SUBNET_STRING,"")}this.addressMinusSuffix=d,this.parsedAddress=this.parse(d)}return c.isValid=function(d){try{return new c(d),!0}catch{return!1}},c.prototype.parse=function(d){var h=d.split(".");if(!d.match(s.RE_ADDRESS))throw new u.AddressError("Invalid IPv4 address.");return h},c.prototype.correctForm=function(){return this.parsedAddress.map(function(d){return parseInt(d,10)}).join(".")},c.fromHex=function(d){var h=d.replace(/:/g,"").padStart(8,"0"),g=[],p;for(p=0;p<8;p+=2){var _=h.slice(p,p+2);g.push(parseInt(_,16))}return new c(g.join("."))},c.fromInteger=function(d){return c.fromHex(d.toString(16))},c.fromArpa=function(d){var h=d.replace(/(\.in-addr\.arpa)?\.$/,""),g=h.split(".").reverse().join(".");return new c(g)},c.prototype.toHex=function(){return this.parsedAddress.map(function(d){return f.sprintf("%02x",parseInt(d,10))}).join(":")},c.prototype.toArray=function(){return this.parsedAddress.map(function(d){return parseInt(d,10)})},c.prototype.toGroup6=function(){var d=[],h;for(h=0;h<s.GROUPS;h+=2){var g=f.sprintf("%02x%02x",parseInt(this.parsedAddress[h],10),parseInt(this.parsedAddress[h+1],10));d.push(f.sprintf("%x",parseInt(g,16)))}return d.join(":")},c.prototype.bigInteger=function(){return new l.BigInteger(this.parsedAddress.map(function(d){return f.sprintf("%02x",parseInt(d,10))}).join(""),16)},c.prototype._startAddress=function(){return new l.BigInteger(this.mask()+"0".repeat(s.BITS-this.subnetMask),2)},c.prototype.startAddress=function(){return c.fromBigInteger(this._startAddress())},c.prototype.startAddressExclusive=function(){var d=new l.BigInteger("1");return c.fromBigInteger(this._startAddress().add(d))},c.prototype._endAddress=function(){return new l.BigInteger(this.mask()+"1".repeat(s.BITS-this.subnetMask),2)},c.prototype.endAddress=function(){return c.fromBigInteger(this._endAddress())},c.prototype.endAddressExclusive=function(){var d=new l.BigInteger("1");return c.fromBigInteger(this._endAddress().subtract(d))},c.fromBigInteger=function(d){return c.fromInteger(parseInt(d.toString(),10))},c.prototype.mask=function(d){return d===void 0&&(d=this.subnetMask),this.getBitsBase2(0,d)},c.prototype.getBitsBase2=function(d,h){return this.binaryZeroPad().slice(d,h)},c.prototype.reverseForm=function(d){d||(d={});var h=this.correctForm().split(".").reverse().join(".");return d.omitSuffix?h:f.sprintf("%s.in-addr.arpa.",h)},c.prototype.isMulticast=function(){return this.isInSubnet(new c("224.0.0.0/4"))},c.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(s.BITS,"0")},c.prototype.groupForV6=function(){var d=this.parsedAddress;return this.address.replace(s.RE_ADDRESS,f.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',d.slice(0,2).join("."),d.slice(2,4).join(".")))},c}();e.Address4=a}}),require_constants7=__commonJS({"node_modules/ip-address/dist/cjs/lib/v6/constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.RE_URL_WITH_PORT=e.RE_URL=e.RE_ZONE_STRING=e.RE_SUBNET_STRING=e.RE_BAD_ADDRESS=e.RE_BAD_CHARACTERS=e.TYPES=e.SCOPES=e.GROUPS=e.BITS=void 0,e.BITS=128,e.GROUPS=8,e.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.RE_ZONE_STRING=/%.*$/,e.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),e.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}}),require_helpers=__commonJS({"node_modules/ip-address/dist/cjs/lib/v6/helpers.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.simpleGroup=e.spanLeadingZeroes=e.spanAll=e.spanAllZeroes=void 0;var o=require_sprintf();function r(l){return l.replace(/(0+)/g,'<span class="zero">$1</span>')}e.spanAllZeroes=r;function t(l,f){f===void 0&&(f=0);var a=l.split("");return a.map(function(c,d){return o.sprintf('<span class="digit value-%s position-%d">%s</span>',c,d+f,r(c))}).join("")}e.spanAll=t;function n(l){return l.replace(/^(0+)/,'<span class="zero">$1</span>')}function s(l){var f=l.split(":");return f.map(function(a){return n(a)}).join(":")}e.spanLeadingZeroes=s;function u(l,f){f===void 0&&(f=0);var a=l.split(":");return a.map(function(c,d){return/group-v4/.test(c)?c:o.sprintf('<span class="hover-group group-%d">%s</span>',d+f,n(c))})}e.simpleGroup=u}}),require_regular_expressions=__commonJS({"node_modules/ip-address/dist/cjs/lib/v6/regular-expressions.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(c,d,h,g){g===void 0&&(g=h),Object.defineProperty(c,g,{enumerable:!0,get:function(){return d[h]}})}:function(c,d,h,g){g===void 0&&(g=h),c[g]=d[h]}),r=e&&e.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),t=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var h in c)h!=="default"&&Object.prototype.hasOwnProperty.call(c,h)&&o(d,c,h);return r(d,c),d};Object.defineProperty(e,"__esModule",{value:!0}),e.possibleElisions=e.simpleRegularExpression=e.ADDRESS_BOUNDARY=e.padGroup=e.groupPossibilities=void 0;var n=t(require_constants7()),s=require_sprintf();function u(c){return s.sprintf("(%s)",c.join("|"))}e.groupPossibilities=u;function l(c){return c.length<4?s.sprintf("0{0,%d}%s",4-c.length,c):c}e.padGroup=l,e.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function f(c){var d=[];c.forEach(function(g,p){var _=parseInt(g,16);_===0&&d.push(p)});var h=d.map(function(g){return c.map(function(p,_){if(_===g){var m=_===0||_===n.GROUPS-1?":":"";return u([l(p),m])}return l(p)}).join(":")});return h.push(c.map(l).join(":")),u(h)}e.simpleRegularExpression=f;function a(c,d,h){var g=d?"":":",p=h?"":":",_=[];!d&&!h&&_.push("::"),d&&h&&_.push(""),(h&&!d||!h&&d)&&_.push(":"),_.push(s.sprintf("%s(:0{1,4}){1,%d}",g,c-1)),_.push(s.sprintf("(0{1,4}:){1,%d}%s",c-1,p)),_.push(s.sprintf("(0{1,4}:){%d}0{1,4}",c-1));for(var m=1;m<c-1;m++)for(var v=1;v<c-m;v++)_.push(s.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",v,c-v-m-1));return u(_)}e.possibleElisions=a}}),require_ipv6=__commonJS({"node_modules/ip-address/dist/cjs/lib/ipv6.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(T,R,S,E){E===void 0&&(E=S),Object.defineProperty(T,E,{enumerable:!0,get:function(){return R[S]}})}:function(T,R,S,E){E===void 0&&(E=S),T[E]=R[S]}),r=e&&e.__setModuleDefault||(Object.create?function(T,R){Object.defineProperty(T,"default",{enumerable:!0,value:R})}:function(T,R){T.default=R}),t=e&&e.__importStar||function(T){if(T&&T.__esModule)return T;var R={};if(T!=null)for(var S in T)S!=="default"&&Object.prototype.hasOwnProperty.call(T,S)&&o(R,T,S);return r(R,T),R},n=e&&e.__spreadArray||function(T,R){for(var S=0,E=R.length,A=T.length;S<E;S++,A++)T[A]=R[S];return T};Object.defineProperty(e,"__esModule",{value:!0}),e.Address6=void 0;var s=t(require_common5()),u=t(require_constants6()),l=t(require_constants7()),f=t(require_helpers()),a=require_ipv4(),c=require_regular_expressions(),d=require_address_error(),h=require_jsbn2(),g=require_sprintf();function p(T){if(!T)throw new Error("Assertion failed.")}function _(T){for(var R=/(\d+)(\d{3})/;R.test(T);)T=T.replace(R,"$1,$2");return T}function m(T){return T=T.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),T=T.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),T}function v(T,R){var S=[],E=[],A;for(A=0;A<T.length;A++)A<R[0]?S.push(T[A]):A>R[1]&&E.push(T[A]);return S.concat(["compact"]).concat(E)}function w(T){return g.sprintf("%04x",parseInt(T,16))}function y(T){return T&255}var b=function(){function T(R,S){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=s.isInSubnet,this.isCorrect=s.isCorrect(l.BITS),S===void 0?this.groups=l.GROUPS:this.groups=S,this.address=R;var E=l.RE_SUBNET_STRING.exec(R);if(E){if(this.parsedSubnet=E[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet="/"+this.subnetMask,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>l.BITS)throw new d.AddressError("Invalid subnet mask.");R=R.replace(l.RE_SUBNET_STRING,"")}else if(/\//.test(R))throw new d.AddressError("Invalid subnet mask.");var A=l.RE_ZONE_STRING.exec(R);A&&(this.zone=A[0],R=R.replace(l.RE_ZONE_STRING,"")),this.addressMinusSuffix=R,this.parsedAddress=this.parse(this.addressMinusSuffix)}return T.isValid=function(R){try{return new T(R),!0}catch{return!1}},T.fromBigInteger=function(R){var S=R.toString(16).padStart(32,"0"),E=[],A;for(A=0;A<l.GROUPS;A++)E.push(S.slice(A*4,(A+1)*4));return new T(E.join(":"))},T.fromURL=function(R){var S,E=null,A;if(R.indexOf("[")!==-1&&R.indexOf("]:")!==-1){if(A=l.RE_URL_WITH_PORT.exec(R),A===null)return{error:"failed to parse address with port",address:null,port:null};S=A[1],E=A[2]}else if(R.indexOf("/")!==-1){if(R=R.replace(/^[a-z0-9]+:\/\//,""),A=l.RE_URL.exec(R),A===null)return{error:"failed to parse address from URL",address:null,port:null};S=A[1]}else S=R;return E?(E=parseInt(E,10),(E<0||E>65536)&&(E=null)):E=null,{address:new T(S),port:E}},T.fromAddress4=function(R){var S=new a.Address4(R),E=l.BITS-(u.BITS-S.subnetMask);return new T("::ffff:"+S.correctForm()+"/"+E)},T.fromArpa=function(R){var S=R.replace(/(\.ip6\.arpa)?\.$/,""),E=7;if(S.length!==63)throw new d.AddressError("Invalid 'ip6.arpa' form.");for(var A=S.split(".").reverse(),C=E;C>0;C--){var I=C*4;A.splice(I,0,":")}return S=A.join(""),new T(S)},T.prototype.microsoftTranscription=function(){return g.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))},T.prototype.mask=function(R){return R===void 0&&(R=this.subnetMask),this.getBitsBase2(0,R)},T.prototype.possibleSubnets=function(R){R===void 0&&(R=128);var S=l.BITS-this.subnetMask,E=Math.abs(R-l.BITS),A=S-E;return A<0?"0":_(new h.BigInteger("2",10).pow(A).toString(10))},T.prototype._startAddress=function(){return new h.BigInteger(this.mask()+"0".repeat(l.BITS-this.subnetMask),2)},T.prototype.startAddress=function(){return T.fromBigInteger(this._startAddress())},T.prototype.startAddressExclusive=function(){var R=new h.BigInteger("1");return T.fromBigInteger(this._startAddress().add(R))},T.prototype._endAddress=function(){return new h.BigInteger(this.mask()+"1".repeat(l.BITS-this.subnetMask),2)},T.prototype.endAddress=function(){return T.fromBigInteger(this._endAddress())},T.prototype.endAddressExclusive=function(){var R=new h.BigInteger("1");return T.fromBigInteger(this._endAddress().subtract(R))},T.prototype.getScope=function(){var R=l.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&R!=="Link local"&&(R="Global"),R||"Unknown"},T.prototype.getType=function(){for(var R=0,S=Object.keys(l.TYPES);R<S.length;R++){var E=S[R];if(this.isInSubnet(new T(E)))return l.TYPES[E]}return"Global unicast"},T.prototype.getBits=function(R,S){return new h.BigInteger(this.getBitsBase2(R,S),2)},T.prototype.getBitsBase2=function(R,S){return this.binaryZeroPad().slice(R,S)},T.prototype.getBitsBase16=function(R,S){var E=S-R;if(E%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(R,S).toString(16).padStart(E/4,"0")},T.prototype.getBitsPastSubnet=function(){return this.getBitsBase2(this.subnetMask,l.BITS)},T.prototype.reverseForm=function(R){R||(R={});var S=Math.floor(this.subnetMask/4),E=this.canonicalForm().replace(/:/g,"").split("").slice(0,S).reverse().join(".");return S>0?R.omitSuffix?E:g.sprintf("%s.ip6.arpa.",E):R.omitSuffix?"":"ip6.arpa."},T.prototype.correctForm=function(){var R,S=[],E=0,A=[];for(R=0;R<this.parsedAddress.length;R++){var C=parseInt(this.parsedAddress[R],16);C===0&&E++,C!==0&&E>0&&(E>1&&A.push([R-E,R-1]),E=0)}E>1&&A.push([this.parsedAddress.length-E,this.parsedAddress.length-1]);var I=A.map(function(k){return k[1]-k[0]+1});if(A.length>0){var P=I.indexOf(Math.max.apply(Math,I));S=v(this.parsedAddress,A[P])}else S=this.parsedAddress;for(R=0;R<S.length;R++)S[R]!=="compact"&&(S[R]=parseInt(S[R],16).toString(16));var O=S.join(":");return O=O.replace(/^compact$/,"::"),O=O.replace(/^compact|compact$/,":"),O=O.replace(/compact/,""),O},T.prototype.binaryZeroPad=function(){return this.bigInteger().toString(2).padStart(l.BITS,"0")},T.prototype.parse4in6=function(R){var S=R.split(":"),E=S.slice(-1)[0],A=E.match(u.RE_ADDRESS);if(A){this.parsedAddress4=A[0],this.address4=new a.Address4(this.parsedAddress4);for(var C=0;C<this.address4.groups;C++)if(/^0[0-9]+/.test(this.address4.parsedAddress[C]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",R.replace(u.RE_ADDRESS,this.address4.parsedAddress.map(m).join(".")));this.v4=!0,S[S.length-1]=this.address4.toGroup6(),R=S.join(":")}return R},T.prototype.parse=function(R){R=this.parse4in6(R);var S=R.match(l.RE_BAD_CHARACTERS);if(S)throw new d.AddressError(g.sprintf("Bad character%s detected in address: %s",S.length>1?"s":"",S.join("")),R.replace(l.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));var E=R.match(l.RE_BAD_ADDRESS);if(E)throw new d.AddressError(g.sprintf("Address failed regex: %s",E.join("")),R.replace(l.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));var A=[],C=R.split("::");if(C.length===2){var I=C[0].split(":"),P=C[1].split(":");I.length===1&&I[0]===""&&(I=[]),P.length===1&&P[0]===""&&(P=[]);var O=this.groups-(I.length+P.length);if(!O)throw new d.AddressError("Error parsing groups");this.elidedGroups=O,this.elisionBegin=I.length,this.elisionEnd=I.length+this.elidedGroups,A=A.concat(I);for(var k=0;k<O;k++)A.push("0");A=A.concat(P)}else if(C.length===1)A=R.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if(A=A.map(function(N){return g.sprintf("%x",parseInt(N,16))}),A.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return A},T.prototype.canonicalForm=function(){return this.parsedAddress.map(w).join(":")},T.prototype.decimal=function(){return this.parsedAddress.map(function(R){return g.sprintf("%05d",parseInt(R,16))}).join(":")},T.prototype.bigInteger=function(){return new h.BigInteger(this.parsedAddress.map(w).join(""),16)},T.prototype.to4=function(){var R=this.binaryZeroPad().split("");return a.Address4.fromHex(new h.BigInteger(R.slice(96,128).join(""),2).toString(16))},T.prototype.to4in6=function(){var R=this.to4(),S=new T(this.parsedAddress.slice(0,6).join(":"),6),E=S.correctForm(),A="";return/:$/.test(E)||(A=":"),E+A+R.address},T.prototype.inspectTeredo=function(){var R=this.getBitsBase16(0,32),S=this.getBits(80,96).xor(new h.BigInteger("ffff",16)).toString(),E=a.Address4.fromHex(this.getBitsBase16(32,64)),A=a.Address4.fromHex(this.getBits(96,128).xor(new h.BigInteger("ffffffff",16)).toString(16)),C=this.getBits(64,80),I=this.getBitsBase2(64,80),P=C.testBit(15),O=C.testBit(14),k=C.testBit(8),N=C.testBit(9),K=new h.BigInteger(I.slice(2,6)+I.slice(8,16),2).toString(10);return{prefix:g.sprintf("%s:%s",R.slice(0,4),R.slice(4,8)),server4:E.address,client4:A.address,flags:I,coneNat:P,microsoft:{reserved:O,universalLocal:N,groupIndividual:k,nonce:K},udpPort:S}},T.prototype.inspect6to4=function(){var R=this.getBitsBase16(0,16),S=a.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:g.sprintf("%s",R.slice(0,4)),gateway:S.address}},T.prototype.to6to4=function(){if(!this.is4())return null;var R=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new T(R)},T.prototype.toByteArray=function(){var R=this.bigInteger().toByteArray();return R.length===17&&R[0]===0?R.slice(1):R},T.prototype.toUnsignedByteArray=function(){return this.toByteArray().map(y)},T.fromByteArray=function(R){return this.fromUnsignedByteArray(R.map(y))},T.fromUnsignedByteArray=function(R){for(var S=new h.BigInteger("256",10),E=new h.BigInteger("0",10),A=new h.BigInteger("1",10),C=R.length-1;C>=0;C--)E=E.add(A.multiply(new h.BigInteger(R[C].toString(10),10))),A=A.multiply(S);return T.fromBigInteger(E)},T.prototype.isCanonical=function(){return this.addressMinusSuffix===this.canonicalForm()},T.prototype.isLinkLocal=function(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"},T.prototype.isMulticast=function(){return this.getType()==="Multicast"},T.prototype.is4=function(){return this.v4},T.prototype.isTeredo=function(){return this.isInSubnet(new T("2001::/32"))},T.prototype.is6to4=function(){return this.isInSubnet(new T("2002::/16"))},T.prototype.isLoopback=function(){return this.getType()==="Loopback"},T.prototype.href=function(R){return R===void 0?R="":R=g.sprintf(":%s",R),g.sprintf("http://[%s]%s/",this.correctForm(),R)},T.prototype.link=function(R){R||(R={}),R.className===void 0&&(R.className=""),R.prefix===void 0&&(R.prefix="/#address="),R.v4===void 0&&(R.v4=!1);var S=this.correctForm;return R.v4&&(S=this.to4in6),R.className?g.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',R.prefix,S.call(this),R.className):g.sprintf('<a href="%1$s%2$s">%2$s</a>',R.prefix,S.call(this))},T.prototype.group=function(){if(this.elidedGroups===0)return f.simpleGroup(this.address).join(":");p(typeof this.elidedGroups=="number"),p(typeof this.elisionBegin=="number");var R=[],S=this.address.split("::"),E=S[0],A=S[1];E.length?R.push.apply(R,f.simpleGroup(E)):R.push("");for(var C=["hover-group"],I=this.elisionBegin;I<this.elisionBegin+this.elidedGroups;I++)C.push(g.sprintf("group-%d",I));return R.push(g.sprintf('<span class="%s"></span>',C.join(" "))),A.length?R.push.apply(R,f.simpleGroup(A,this.elisionEnd)):R.push(""),this.is4()&&(p(this.address4 instanceof a.Address4),R.pop(),R.push(this.address4.groupForV6())),R.join(":")},T.prototype.regularExpressionString=function(R){R===void 0&&(R=!1);var S=[],E=new T(this.correctForm());if(E.elidedGroups===0)S.push(c.simpleRegularExpression(E.parsedAddress));else if(E.elidedGroups===l.GROUPS)S.push(c.possibleElisions(l.GROUPS));else{var A=E.address.split("::");A[0].length&&S.push(c.simpleRegularExpression(A[0].split(":"))),p(typeof E.elidedGroups=="number"),S.push(c.possibleElisions(E.elidedGroups,A[0].length!==0,A[1].length!==0)),A[1].length&&S.push(c.simpleRegularExpression(A[1].split(":"))),S=[S.join(":")]}return R||(S=n(n(["(?=^|",c.ADDRESS_BOUNDARY,"|[^\\w\\:])("],S),[")(?=[^\\w\\:]|",c.ADDRESS_BOUNDARY,"|$)"])),S.join("")},T.prototype.regularExpression=function(R){return R===void 0&&(R=!1),new RegExp(this.regularExpressionString(R),"i")},T}();e.Address6=b}}),require_ip_address=__commonJS({"node_modules/ip-address/dist/cjs/ip-address.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(f,a,c,d){d===void 0&&(d=c),Object.defineProperty(f,d,{enumerable:!0,get:function(){return a[c]}})}:function(f,a,c,d){d===void 0&&(d=c),f[d]=a[c]}),r=e&&e.__setModuleDefault||(Object.create?function(f,a){Object.defineProperty(f,"default",{enumerable:!0,value:a})}:function(f,a){f.default=a}),t=e&&e.__importStar||function(f){if(f&&f.__esModule)return f;var a={};if(f!=null)for(var c in f)c!=="default"&&Object.prototype.hasOwnProperty.call(f,c)&&o(a,f,c);return r(a,f),a};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;var n=require_ipv4();Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return n.Address4}});var s=require_ipv6();Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return s.Address6}});var u=require_address_error();Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return u.AddressError}});var l=t(require_helpers());e.v6={helpers:l}}}),require_ip_port_to_multiaddr=__commonJS({"node_modules/libp2p-utils/src/ip-port-to-multiaddr.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:ip-port-to-multiaddr"),{error:r("libp2p:ip-port-to-multiaddr:err")}),{Multiaddr:n}=require_src(),s=require_err_code(),{Address4:u,Address6:l}=require_ip_address(),f={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function a(c,d){if(typeof c!="string")throw s(new Error(`invalid ip provided: ${c}`),f.ERR_INVALID_IP_PARAMETER);if(typeof d=="string"&&(d=parseInt(d)),isNaN(d))throw s(new Error(`invalid port provided: ${d}`),f.ERR_INVALID_PORT_PARAMETER);try{return new u(c),new n(`/ip4/${c}/tcp/${d}`)}catch{}try{const h=new l(c);return h.is4()?new n(`/ip4/${h.to4().correctForm()}/tcp/${d}`):new n(`/ip6/${c}/tcp/${d}`)}catch{const g=`invalid ip:port for creating a multiaddr: ${c}:${d}`;throw t.error(g),s(new Error(g),f.ERR_INVALID_IP)}}o.exports=a,o.exports.Errors=f}}),require_p_timeout2=__commonJS({"node_modules/p-timeout/index.js"(e,o){init_node_globals();var r=class extends Error{constructor(n){super(n);this.name="TimeoutError"}},t=(n,s,u,l)=>{let f;const a=new Promise((c,d)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){c(n);return}l=Re({customTimers:{setTimeout,clearTimeout}},l),f=l.customTimers.setTimeout.call(void 0,()=>{if(typeof u=="function"){try{c(u())}catch(p){d(p)}return}const h=typeof u=="string"?u:`Promise timed out after ${s} milliseconds`,g=u instanceof Error?u:new r(h);typeof n.cancel=="function"&&n.cancel(),d(g)},s),(async()=>{try{c(await n)}catch(h){d(h)}finally{l.customTimers.clearTimeout.call(void 0,f)}})()});return a.clear=()=>{clearTimeout(f),f=void 0},a};o.exports=t,o.exports.default=t,o.exports.TimeoutError=r}}),require_socket_to_conn=__commonJS({"node_modules/libp2p-websockets/src/socket-to-conn.js"(e,o){init_node_globals();var r=require_abortable_iterator(),{CLOSE_TIMEOUT:t}=require_constants5(),n=require_ip_port_to_multiaddr(),s=require_p_timeout2(),u=require_browser2(),l=u("libp2p:websockets:socket");l.error=u("libp2p:websockets:socket:error"),o.exports=(f,a={})=>{const c={async sink(d){a.signal&&(d=r(d,a.signal));try{await f.sink(async function*(){for await(const h of d)yield h instanceof Uint8Array?h:h.slice()}())}catch(h){h.type!=="aborted"&&l.error(h)}},source:a.signal?r(f.source,a.signal):f.source,conn:f,localAddr:a.localAddr||(f.localAddress&&f.localPort?n(f.localAddress,f.localPort):void 0),remoteAddr:a.remoteAddr||n(f.remoteAddress,f.remotePort),timeline:{open:Date.now()},async close(){const d=Date.now();try{await s(f.close(),t)}catch{const{host:g,port:p}=c.remoteAddr.toOptions();l("timeout closing stream to %s:%s after %dms, destroying it manually",g,p,Date.now()-d),f.destroy()}finally{c.timeline.close=Date.now()}}};return f.socket.once&&f.socket.once("close",()=>{c.timeline.close||(c.timeline.close=Date.now())}),c}}}),require_filters=__commonJS({"node_modules/libp2p-websockets/src/filters.js"(e,o){init_node_globals();var r=require_src2(),{CODE_CIRCUIT:t,CODE_P2P:n,CODE_TCP:s,CODE_WS:u,CODE_WSS:l}=require_constants5();o.exports={all:f=>f.filter(a=>{if(a.protoCodes().includes(t))return!1;const c=a.decapsulateCode(n);return r.WebSockets.matches(c)||r.WebSocketsSecure.matches(c)}),dnsWss:f=>f.filter(a=>{if(a.protoCodes().includes(t))return!1;const c=a.decapsulateCode(n);return r.WebSocketsSecure.matches(c)&&r.DNS.matches(c.decapsulateCode(s).decapsulateCode(l))}),dnsWsOrWss:f=>f.filter(a=>{if(a.protoCodes().includes(t))return!1;const c=a.decapsulateCode(n);return r.WebSockets.matches(c)?r.DNS.matches(c.decapsulateCode(s).decapsulateCode(u)):r.WebSocketsSecure.matches(c)&&r.DNS.matches(c.decapsulateCode(s).decapsulateCode(l))})}}}),require_src15=__commonJS({"node_modules/libp2p-websockets/src/index.js"(e,o){init_node_globals();var r=require_client(),t=require_class_is(),n=require_multiaddr_to_uri(),{AbortError:s}=require_abortable_iterator(),u=require_p_defer(),l=require_browser2(),f=l("libp2p:websockets");f.error=l("libp2p:websockets:error");var a=require_env(),c=require_listener_browser(),d=require_socket_to_conn(),h=require_filters(),g=class{constructor({upgrader:p,filter:_}){if(!p)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=p,this._filter=_}async dial(p,_={}){f("dialing %s",p);const m=await this._connect(p,_),v=d(m,{remoteAddr:p,signal:_.signal});f("new outbound connection %s",v.remoteAddr);const w=await this._upgrader.upgradeOutbound(v);return f("outbound connection %s upgraded",v.remoteAddr),w}async _connect(p,_={}){if(_.signal&&_.signal.aborted)throw new s;const m=p.toOptions();f("dialing %s:%s",m.host,m.port);const v=u(),w=R=>{const S=`connection error: ${R.message}`;f.error(S),v.reject(R)},y=r(n(p),Object.assign({binary:!0},_));if(y.socket.on?y.socket.on("error",w):y.socket.onerror=w,!_.signal)return await Promise.race([y.connected(),v.promise]),f("connected %s",p),y;let b;const T=new Promise((R,S)=>{if(b=()=>{S(new s),setTimeout(()=>{y.close()})},_.signal.aborted)return b();_.signal.addEventListener("abort",b)});try{await Promise.race([T,v.promise,y.connected()])}finally{_.signal.removeEventListener("abort",b)}return f("connected %s",p),y}createListener(p={},_){return typeof p=="function"&&(_=p,p={}),c({handler:_,upgrader:this._upgrader},p)}filter(p){return p=Array.isArray(p)?p:[p],this._filter?this._filter(p):a.isBrowser||a.isWebWorker?h.dnsWss(p):h.all(p)}};o.exports=t(g,{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})}}),require_get_browser_rtc=__commonJS({"node_modules/get-browser-rtc/index.js"(e,o){init_node_globals(),o.exports=function(){if(typeof globalThis=="undefined")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null}}}),require_browser8=__commonJS({"node_modules/randombytes/browser.js"(e,o){init_node_globals();var r=65536,t=4294967295;function n(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var s=require_safe_buffer().Buffer,u=global.crypto||global.msCrypto;u&&u.getRandomValues?o.exports=l:o.exports=n;function l(f,a){if(f>t)throw new RangeError("requested too many random bytes");var c=s.allocUnsafe(f);if(f>0)if(f>r)for(var d=0;d<f;d+=r)u.getRandomValues(c.slice(d,d+r));else u.getRandomValues(c);return typeof a=="function"?process.nextTick(function(){a(null,c)}):c}}}),require_err_code2=__commonJS({"node_modules/libp2p-webrtc-peer/node_modules/err-code/index.js"(e,o){init_node_globals();function r(n,s){for(const u in s)Object.defineProperty(n,u,{value:s[u],enumerable:!0,configurable:!0});return n}function t(n,s,u){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof s=="object"&&(u=s,s=void 0),s!=null&&(u.code=s);try{return r(n,u)}catch{u.message=n.message,u.stack=n.stack;const f=function(){};return f.prototype=Object.create(Object.getPrototypeOf(n)),r(new f,u)}}o.exports=t}}),require_libp2p_webrtc_peer=__commonJS({"node_modules/libp2p-webrtc-peer/index.js"(e,o){init_node_globals();var r=require_browser2()("simple-peer"),t=require_get_browser_rtc(),n=require_browser8(),s=require_readable_browser(),u=require_queue_microtask(),l=require_err_code2(),f=64*1024,a=5*1e3,c=5*1e3;function d(p){return p.replace(/a=ice-options:trickle\s\n/g,"")}function h(p){console.warn(p)}var g=class extends s.Duplex{constructor(p){p=Object.assign({allowHalfOpen:!1},p);super(p);if(this._id=n(4).toString("hex").slice(0,7),this._debug("new peer %o",p),this.channelName=p.initiator?p.channelName||n(20).toString("hex"):null,this.initiator=p.initiator||!1,this.channelConfig=p.channelConfig||g.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},g.config,p.config),this.offerOptions=p.offerOptions||{},this.answerOptions=p.answerOptions||{},this.sdpTransform=p.sdpTransform||(_=>_),this.streams=p.streams||(p.stream?[p.stream]:[]),this.trickle=p.trickle!==void 0?p.trickle:!0,this.allowHalfTrickle=p.allowHalfTrickle!==void 0?p.allowHalfTrickle:!1,this.iceCompleteTimeout=p.iceCompleteTimeout||a,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=p.wrtc&&typeof p.wrtc=="object"?p.wrtc:t(),!this._wrtc)throw l(typeof window=="undefined"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=this.negotiated?!1:!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(_){u(()=>this.destroy(l(_,"ERR_PC_CONSTRUCTOR")));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=_=>{this._onIceCandidate(_)},this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=_=>{this._setupData(_)},this.streams&&this.streams.forEach(_=>{this.addStream(_)}),this._pc.ontrack=_=>{this._onTrack(_)},this.initiator&&this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(p){if(this.destroyed)throw l(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if(typeof p=="string")try{p=JSON.parse(p)}catch{p={}}this._debug("signal()"),p.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),p.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(p.transceiverRequest.kind,p.transceiverRequest.init)),p.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(p.candidate):this._pendingCandidates.push(p.candidate)),p.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(p)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(_=>{this._addIceCandidate(_)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(_=>{this.destroy(l(_,"ERR_SET_REMOTE_DESCRIPTION"))}),!p.sdp&&!p.candidate&&!p.renegotiate&&!p.transceiverRequest&&this.destroy(l(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(p){var _=new this._wrtc.RTCIceCandidate(p);this._pc.addIceCandidate(_).catch(m=>{!_.address||_.address.endsWith(".local")?h("Ignoring unsupported ICE candidate."):this.destroy(l(m,"ERR_ADD_ICE_CANDIDATE"))})}send(p){this._channel.send(p)}addTransceiver(p,_){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(p,_),this._needsNegotiation()}catch(m){this.destroy(l(m,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:p,init:_}})}addStream(p){this._debug("addStream()"),p.getTracks().forEach(_=>{this.addTrack(_,p)})}addTrack(p,_){this._debug("addTrack()");var m=this._senderMap.get(p)||new Map,v=m.get(_);if(!v)v=this._pc.addTrack(p,_),m.set(_,v),this._senderMap.set(p,m),this._needsNegotiation();else throw v.removed?l(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):l(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(p,_,m){this._debug("replaceTrack()");var v=this._senderMap.get(p),w=v?v.get(m):null;if(!w)throw l(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");_&&this._senderMap.set(_,v),w.replaceTrack!=null?w.replaceTrack(_):this.destroy(l(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(p,_){this._debug("removeSender()");var m=this._senderMap.get(p),v=m?m.get(_):null;if(!v)throw l(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{v.removed=!0,this._pc.removeTrack(v)}catch(w){w.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(v):this.destroy(l(w,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(p){this._debug("removeSenders()"),p.getTracks().forEach(_=>{this.removeTrack(_,p)})}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,u(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}_destroy(p,_){if(this._debug("destroy (error: %s)",p&&(p.message||p)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,_(p)}_setupData(p){if(!p.channel)return this.destroy(l(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=p.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=f),this.channelName=this._channel.label,this._channel.onmessage=m=>{this._onChannelMessage(m)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=m=>{this.destroy(l(m,"ERR_DATA_CHANNEL"))};var _=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(_&&this._onChannelClose(),_=!0):_=!1},c)}_read(){}_write(p,_,m){if(this.destroyed)return m(l(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(p)}catch(v){return this.destroy(l(v,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>f?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=m):m(null)}else this._debug("write before connect"),this._chunk=p,this._cb=m}_onFinish(){if(this.destroyed)return;const p=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?p():this.once("connect",p)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(p=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(p.sdp=d(p.sdp)),p.sdp=this.sdpTransform(p.sdp);const _=()=>{if(!this.destroyed){var w=this._pc.localDescription||p;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp})}},m=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))},v=w=>{this.destroy(l(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(p).then(m).catch(v)}).catch(p=>{this.destroy(l(p,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(p=>{!p.mid&&p.sender.track&&!p.requested&&(p.requested=!0,this.addTransceiver(p.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(p=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(p.sdp=d(p.sdp)),p.sdp=this.sdpTransform(p.sdp);const _=()=>{if(!this.destroyed){var w=this._pc.localDescription||p;this._debug("signal"),this.emit("signal",{type:w.type,sdp:w.sdp}),this.initiator||this._requestMissingTransceivers()}},m=()=>{this.destroyed||(this.trickle||this._iceComplete?_():this.once("_iceComplete",_))},v=w=>{this.destroy(l(w,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(p).then(m).catch(v)}).catch(p=>{this.destroy(l(p,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(l(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var p=this._pc.iceConnectionState,_=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",p,_),this.emit("iceStateChange",p,_),(p==="connected"||p==="completed")&&(this._pcReady=!0,this._maybeReady()),p==="failed"&&this.destroy(l(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),p==="closed"&&this.destroy(l(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(p){const _=m=>(Object.prototype.toString.call(m.values)==="[object Array]"&&m.values.forEach(v=>{Object.assign(m,v)}),m);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(m=>{var v=[];m.forEach(w=>{v.push(_(w))}),p(null,v)},m=>p(m)):this._pc.getStats.length>0?this._pc.getStats(m=>{if(!this.destroyed){var v=[];m.result().forEach(w=>{var y={};w.names().forEach(b=>{y[b]=w.stat(b)}),y.id=w.id,y.type=w.type,y.timestamp=w.timestamp,v.push(_(y))}),p(null,v)}},m=>p(m)):p(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const p=()=>{this.destroyed||this.getStats((_,m)=>{if(this.destroyed)return;_&&(m=[]);var v={},w={},y={},b=!1;m.forEach(S=>{(S.type==="remotecandidate"||S.type==="remote-candidate")&&(v[S.id]=S),(S.type==="localcandidate"||S.type==="local-candidate")&&(w[S.id]=S),(S.type==="candidatepair"||S.type==="candidate-pair")&&(y[S.id]=S)});const T=S=>{b=!0;var E=w[S.localCandidateId];E&&(E.ip||E.address)?(this.localAddress=E.ip||E.address,this.localPort=Number(E.port)):E&&E.ipAddress?(this.localAddress=E.ipAddress,this.localPort=Number(E.portNumber)):typeof S.googLocalAddress=="string"&&(E=S.googLocalAddress.split(":"),this.localAddress=E[0],this.localPort=Number(E[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var A=v[S.remoteCandidateId];A&&(A.ip||A.address)?(this.remoteAddress=A.ip||A.address,this.remotePort=Number(A.port)):A&&A.ipAddress?(this.remoteAddress=A.ipAddress,this.remotePort=Number(A.portNumber)):typeof S.googRemoteAddress=="string"&&(A=S.googRemoteAddress.split(":"),this.remoteAddress=A[0],this.remotePort=Number(A[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(m.forEach(S=>{S.type==="transport"&&S.selectedCandidatePairId&&T(y[S.selectedCandidatePairId]),(S.type==="googCandidatePair"&&S.googActiveConnection==="true"||(S.type==="candidatepair"||S.type==="candidate-pair")&&S.selected)&&T(S)}),!b&&(!Object.keys(y).length||Object.keys(w).length)){setTimeout(p,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(S){return this.destroy(l(S,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var R=this._cb;this._cb=null,R(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};p()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>f||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&!this._firstStable&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(p=>{this._pc.removeTrack(p),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(p){this.destroyed||(p.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:p.candidate.candidate,sdpMLineIndex:p.candidate.sdpMLineIndex,sdpMid:p.candidate.sdpMid}}):!p.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),p.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(p){if(!this.destroyed){var _=p.data;_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),this.push(_)}}_onChannelBufferedAmountLow(){if(!(this.destroyed||!this._cb)){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var p=this._cb;this._cb=null,p(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(p){this.destroyed||p.streams.forEach(_=>{this._debug("on track"),this.emit("track",p.track,_),this._remoteTracks.push({track:p.track,stream:_}),!this._remoteStreams.some(m=>m.id===_.id)&&(this._remoteStreams.push(_),u(()=>{this.emit("stream",_)}))})}_debug(){var p=[].slice.call(arguments);p[0]="["+this._id+"] "+p[0],r.apply(null,p)}};g.WEBRTC_SUPPORT=!!t(),g.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},g.channelConfig={},o.exports=g}}),require_supports=__commonJS({"node_modules/ipfs-utils/src/supports.js"(e,o){init_node_globals(),o.exports={supportsFileReader:typeof self!="undefined"&&"FileReader"in self,supportsWebRTC:"RTCPeerConnection"in globalThis&&typeof navigator!="undefined"&&typeof navigator.mediaDevices!="undefined"&&"getUserMedia"in navigator.mediaDevices,supportsWebRTCDataChannels:"RTCPeerConnection"in globalThis}}}),require_constants8=__commonJS({"node_modules/libp2p-webrtc-star/src/constants.js"(e){init_node_globals(),e.CODE_P2P=421,e.CODE_CIRCUIT=290,e.CLOSE_TIMEOUT=2e3}}),require_parseuri=__commonJS({"node_modules/parseuri/index.js"(e,o){init_node_globals();var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];o.exports=function(l){var f=l,a=l.indexOf("["),c=l.indexOf("]");a!=-1&&c!=-1&&(l=l.substring(0,a)+l.substring(a,c).replace(/:/g,";")+l.substring(c,l.length));for(var d=r.exec(l||""),h={},g=14;g--;)h[t[g]]=d[g]||"";return a!=-1&&c!=-1&&(h.source=f,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h.pathNames=n(h,h.path),h.queryKey=s(h,h.query),h};function n(u,l){var f=/\/{2,9}/g,a=l.replace(f,"/").split("/");return(l.substr(0,1)=="/"||l.length===0)&&a.splice(0,1),l.substr(l.length-1,1)=="/"&&a.splice(a.length-1,1),a}function s(u,l){var f={};return l.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,c,d){c&&(f[c]=d)}),f}}}),require_url=__commonJS({"node_modules/socket.io-client/build/cjs/url.js"(e){init_node_globals();var o=e&&e.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;var r=o(require_parseuri()),t=o(require_browser2()),n=t.default("socket.io-client:url");function s(u,l="",f){let a=u;f=f||typeof location!="undefined"&&location,u==null&&(u=f.protocol+"//"+f.host),typeof u=="string"&&(u.charAt(0)==="/"&&(u.charAt(1)==="/"?u=f.protocol+u:u=f.host+u),/^(https?|wss?):\/\//.test(u)||(n("protocol-less url %s",u),typeof f!="undefined"?u=f.protocol+"//"+u:u="https://"+u),n("parse %s",u),a=r.default(u)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const d=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+d+":"+a.port+l,a.href=a.protocol+"://"+d+(f&&f.port===a.port?"":":"+a.port),a}e.url=s}}),require_has_cors=__commonJS({"node_modules/has-cors/index.js"(e,o){init_node_globals();try{o.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{o.exports=!1}}}),require_globalThis_browser=__commonJS({"node_modules/engine.io-client/build/cjs/globalThis.browser.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())()}}),require_xmlhttprequest_browser=__commonJS({"node_modules/engine.io-client/build/cjs/transports/xmlhttprequest.browser.js"(e){init_node_globals();var o=e&&e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(require_has_cors()),t=o(require_globalThis_browser());function n(s){const u=s.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!u||r.default))return new XMLHttpRequest}catch{}if(!u)try{return new t.default[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}e.default=n}}),require_util6=__commonJS({"node_modules/engine.io-client/build/cjs/util.js"(e){init_node_globals();var o=e&&e.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.pick=void 0;var r=o(require_globalThis_browser());function t(l,...f){return f.reduce((a,c)=>(l.hasOwnProperty(c)&&(a[c]=l[c]),a),{})}e.pick=t;var n=setTimeout,s=clearTimeout;function u(l,f){f.useNativeTimers?(l.setTimeoutFn=n.bind(r.default),l.clearTimeoutFn=s.bind(r.default)):(l.setTimeoutFn=setTimeout.bind(r.default),l.clearTimeoutFn=clearTimeout.bind(r.default))}e.installTimerFunctions=u}}),require_component_emitter=__commonJS({"node_modules/@socket.io/component-emitter/index.js"(e){init_node_globals(),e.Emitter=o;function o(t){if(t)return r(t)}function r(t){for(var n in o.prototype)t[n]=o.prototype[n];return t}o.prototype.on=o.prototype.addEventListener=function(t,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(n),this},o.prototype.once=function(t,n){function s(){this.off(t,s),n.apply(this,arguments)}return s.fn=n,this.on(t,s),this},o.prototype.off=o.prototype.removeListener=o.prototype.removeAllListeners=o.prototype.removeEventListener=function(t,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var u,l=0;l<s.length;l++)if(u=s[l],u===n||u.fn===n){s.splice(l,1);break}return s.length===0&&delete this._callbacks["$"+t],this},o.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),s=this._callbacks["$"+t],u=1;u<arguments.length;u++)n[u-1]=arguments[u];if(s){s=s.slice(0);for(var u=0,l=s.length;u<l;++u)s[u].apply(this,n)}return this},o.prototype.emitReserved=o.prototype.emit,o.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},o.prototype.hasListeners=function(t){return!!this.listeners(t).length}}}),require_commons=__commonJS({"node_modules/engine.io-parser/build/cjs/commons.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;var o=Object.create(null);e.PACKET_TYPES=o,o.open="0",o.close="1",o.ping="2",o.pong="3",o.message="4",o.upgrade="5",o.noop="6";var r=Object.create(null);e.PACKET_TYPES_REVERSE=r,Object.keys(o).forEach(n=>{r[o[n]]=n});var t={type:"error",data:"parser error"};e.ERROR_PACKET=t}}),require_encodePacket_browser=__commonJS({"node_modules/engine.io-parser/build/cjs/encodePacket.browser.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_commons(),r=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",t=typeof ArrayBuffer=="function",n=l=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(l):l&&l.buffer instanceof ArrayBuffer,s=({type:l,data:f},a,c)=>r&&f instanceof Blob?a?c(f):u(f,c):t&&(f instanceof ArrayBuffer||n(f))?a?c(f):u(new Blob([f]),c):c(o.PACKET_TYPES[l]+(f||"")),u=(l,f)=>{const a=new FileReader;return a.onload=function(){const c=a.result.split(",")[1];f("b"+c)},a.readAsDataURL(l)};e.default=s}}),base64_arraybuffer_es5_exports={};__export(base64_arraybuffer_es5_exports,{decode:()=>decode16,encode:()=>encode15});var chars,lookup,i,encode15,decode16,init_base64_arraybuffer_es5=__esm({"node_modules/@socket.io/base64-arraybuffer/dist/base64-arraybuffer.es5.js"(){for(init_node_globals(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;encode15=function(e){var o=new Uint8Array(e),r,t=o.length,n="";for(r=0;r<t;r+=3)n+=chars[o[r]>>2],n+=chars[(o[r]&3)<<4|o[r+1]>>4],n+=chars[(o[r+1]&15)<<2|o[r+2]>>6],n+=chars[o[r+2]&63];return t%3==2?n=n.substring(0,n.length-1)+"=":t%3==1&&(n=n.substring(0,n.length-2)+"=="),n},decode16=function(e){var o=e.length*.75,r=e.length,t,n=0,s,u,l,f;e[e.length-1]==="="&&(o--,e[e.length-2]==="="&&o--);var a=new ArrayBuffer(o),c=new Uint8Array(a);for(t=0;t<r;t+=4)s=lookup[e.charCodeAt(t)],u=lookup[e.charCodeAt(t+1)],l=lookup[e.charCodeAt(t+2)],f=lookup[e.charCodeAt(t+3)],c[n++]=s<<2|u>>4,c[n++]=(u&15)<<4|l>>2,c[n++]=(l&3)<<6|f&63;return a}}}),require_decodePacket_browser=__commonJS({"node_modules/engine.io-parser/build/cjs/decodePacket.browser.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_commons(),r=(init_base64_arraybuffer_es5(),__toCommonJS(base64_arraybuffer_es5_exports)),t=typeof ArrayBuffer=="function",n=(l,f)=>{if(typeof l!="string")return{type:"message",data:u(l,f)};const a=l.charAt(0);return a==="b"?{type:"message",data:s(l.substring(1),f)}:o.PACKET_TYPES_REVERSE[a]?l.length>1?{type:o.PACKET_TYPES_REVERSE[a],data:l.substring(1)}:{type:o.PACKET_TYPES_REVERSE[a]}:o.ERROR_PACKET},s=(l,f)=>{if(t){const a=(0,r.decode)(l);return u(a,f)}else return{base64:!0,data:l}},u=(l,f)=>{switch(f){case"blob":return l instanceof ArrayBuffer?new Blob([l]):l;case"arraybuffer":default:return l}};e.default=n}}),require_cjs=__commonJS({"node_modules/engine.io-parser/build/cjs/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;var o=require_encodePacket_browser();e.encodePacket=o.default;var r=require_decodePacket_browser();e.decodePacket=r.default;var t=String.fromCharCode(30),n=(u,l)=>{const f=u.length,a=new Array(f);let c=0;u.forEach((d,h)=>{(0,o.default)(d,!1,g=>{a[h]=g,++c===f&&l(a.join(t))})})};e.encodePayload=n;var s=(u,l)=>{const f=u.split(t),a=[];for(let c=0;c<f.length;c++){const d=(0,r.default)(f[c],l);if(a.push(d),d.type==="error")break}return a};e.decodePayload=s,e.protocol=4}}),require_transport=__commonJS({"node_modules/engine.io-client/build/cjs/transport.js"(e){init_node_globals();var o=e&&e.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;var r=require_cjs(),t=require_component_emitter(),n=require_util6(),s=o(require_browser2()),u=(0,s.default)("engine.io-client:transport"),l=class extends t.Emitter{constructor(f){super();this.writable=!1,(0,n.installTimerFunctions)(this,f),this.opts=f,this.query=f.query,this.readyState="",this.socket=f.socket}onError(f,a){const c=new Error(f);return c.type="TransportError",c.description=a,super.emit("error",c),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(f){this.readyState==="open"?this.write(f):u("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(f){const a=(0,r.decodePacket)(f,this.socket.binaryType);this.onPacket(a)}onPacket(f){super.emit("packet",f)}onClose(){this.readyState="closed",super.emit("close")}};e.Transport=l}}),require_yeast=__commonJS({"node_modules/yeast/index.js"(e,o){init_node_globals();var r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),t=64,n={},s=0,u=0,l;function f(d){var h="";do h=r[d%t]+h,d=Math.floor(d/t);while(d>0);return h}function a(d){var h=0;for(u=0;u<d.length;u++)h=h*t+n[d.charAt(u)];return h}function c(){var d=f(+new Date);return d!==l?(s=0,l=d):d+"."+f(s++)}for(;u<t;u++)n[r[u]]=u;c.encode=f,c.decode=a,o.exports=c}}),require_parseqs=__commonJS({"node_modules/parseqs/index.js"(e){init_node_globals(),e.encode=function(o){var r="";for(var t in o)o.hasOwnProperty(t)&&(r.length&&(r+="&"),r+=encodeURIComponent(t)+"="+encodeURIComponent(o[t]));return r},e.decode=function(o){for(var r={},t=o.split("&"),n=0,s=t.length;n<s;n++){var u=t[n].split("=");r[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return r}}}),require_polling=__commonJS({"node_modules/engine.io-client/build/cjs/transports/polling.js"(e){init_node_globals();var o=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.Polling=void 0;var r=require_transport(),t=o(require_browser2()),n=o(require_yeast()),s=o(require_parseqs()),u=require_cjs(),l=(0,t.default)("engine.io-client:polling"),f=class extends r.Transport{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(a){this.readyState="pausing";const c=()=>{l("paused"),this.readyState="paused",a()};if(this.polling||!this.writable){let d=0;this.polling&&(l("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){l("pre-pause polling complete"),--d||c()})),this.writable||(l("we are currently writing - waiting to pause"),d++,this.once("drain",function(){l("pre-pause writing complete"),--d||c()}))}else c()}poll(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(a){l("polling got data %s",a);const c=d=>{if(this.readyState==="opening"&&d.type==="open"&&this.onOpen(),d.type==="close")return this.onClose(),!1;this.onPacket(d)};(0,u.decodePayload)(a,this.socket.binaryType).forEach(c),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():l('ignoring poll - transport state "%s"',this.readyState))}doClose(){const a=()=>{l("writing close packet"),this.write([{type:"close"}])};this.readyState==="open"?(l("transport open - closing"),a()):(l("transport not open - deferring close"),this.once("open",a))}write(a){this.writable=!1,(0,u.encodePayload)(a,c=>{this.doWrite(c,()=>{this.writable=!0,this.emit("drain")})})}uri(){let a=this.query||{};const c=this.opts.secure?"https":"http";let d="";this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=(0,n.default)()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.opts.port&&(c==="https"&&Number(this.opts.port)!==443||c==="http"&&Number(this.opts.port)!==80)&&(d=":"+this.opts.port);const h=s.default.encode(a),g=this.opts.hostname.indexOf(":")!==-1;return c+"://"+(g?"["+this.opts.hostname+"]":this.opts.hostname)+d+this.opts.path+(h.length?"?"+h:"")}};e.Polling=f}}),require_polling_xhr=__commonJS({"node_modules/engine.io-client/build/cjs/transports/polling-xhr.js"(e){init_node_globals();var o=e&&e.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.XHR=void 0;var r=o(require_xmlhttprequest_browser()),t=o(require_browser2()),n=o(require_globalThis_browser()),s=require_util6(),u=require_component_emitter(),l=require_polling(),f=(0,t.default)("engine.io-client:polling-xhr");function a(){}var c=function(){return new r.default({xdomain:!1}).responseType!=null}(),d=class extends l.Polling{constructor(p){super(p);if(typeof location!="undefined"){const m=location.protocol==="https:";let v=location.port;v||(v=m?"443":"80"),this.xd=typeof location!="undefined"&&p.hostname!==location.hostname||v!==p.port,this.xs=p.secure!==m}const _=p&&p.forceBase64;this.supportsBinary=c&&!_}request(p={}){return Object.assign(p,{xd:this.xd,xs:this.xs},this.opts),new h(this.uri(),p)}doWrite(p,_){const m=this.request({method:"POST",data:p});m.on("success",_),m.on("error",v=>{this.onError("xhr post error",v)})}doPoll(){f("xhr poll");const p=this.request();p.on("data",this.onData.bind(this)),p.on("error",_=>{this.onError("xhr poll error",_)}),this.pollXhr=p}};e.XHR=d;var h=class extends u.Emitter{constructor(p,_){super();(0,s.installTimerFunctions)(this,_),this.opts=_,this.method=_.method||"GET",this.uri=p,this.async=_.async!==!1,this.data=_.data!==void 0?_.data:null,this.create()}create(){const p=(0,s.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");p.xdomain=!!this.opts.xd,p.xscheme=!!this.opts.xs;const _=this.xhr=new r.default(p);try{f("xhr open %s: %s",this.method,this.uri),_.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){_.setDisableHeaderCheck&&_.setDisableHeaderCheck(!0);for(let m in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(m)&&_.setRequestHeader(m,this.opts.extraHeaders[m])}}catch{}if(this.method==="POST")try{_.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{_.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in _&&(_.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(_.timeout=this.opts.requestTimeout),_.onreadystatechange=()=>{_.readyState===4&&(_.status===200||_.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof _.status=="number"?_.status:0)},0))},f("xhr data %s",this.data),_.send(this.data)}catch(m){this.setTimeoutFn(()=>{this.onError(m)},0);return}typeof document!="undefined"&&(this.index=h.requestsCount++,h.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(p){this.emit("data",p),this.onSuccess()}onError(p){this.emit("error",p),this.cleanup(!0)}cleanup(p){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=a,p)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete h.requests[this.index],this.xhr=null}}onLoad(){const p=this.xhr.responseText;p!==null&&this.onData(p)}abort(){this.cleanup()}};if(e.Request=h,h.requestsCount=0,h.requests={},typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",g);else if(typeof addEventListener=="function"){const p="onpagehide"in n.default?"pagehide":"unload";addEventListener(p,g,!1)}}function g(){for(let p in h.requests)h.requests.hasOwnProperty(p)&&h.requests[p].abort()}}}),require_websocket_constructor_browser=__commonJS({"node_modules/engine.io-client/build/cjs/transports/websocket-constructor.browser.js"(e){init_node_globals();var o=e&&e.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;var r=o(require_globalThis_browser());e.nextTick=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?n=>Promise.resolve().then(n):(n,s)=>s(n,0))(),e.WebSocket=r.default.WebSocket||r.default.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"}}),require_websocket=__commonJS({"node_modules/engine.io-client/build/cjs/transports/websocket.js"(e){init_node_globals();var o=e&&e.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;var r=require_transport(),t=o(require_parseqs()),n=o(require_yeast()),s=require_util6(),u=require_websocket_constructor_browser(),l=o(require_browser2()),f=require_cjs(),a=(0,l.default)("engine.io-client:websocket"),c=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",d=class extends r.Transport{constructor(h){super(h);this.supportsBinary=!h.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const h=this.uri(),g=this.opts.protocols,p=c?{}:(0,s.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(p.headers=this.opts.extraHeaders);try{this.ws=u.usingBrowserWebSocket&&!c?g?new u.WebSocket(h,g):new u.WebSocket(h):new u.WebSocket(h,g,p)}catch(_){return this.emit("error",_)}this.ws.binaryType=this.socket.binaryType||u.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=h=>this.onData(h.data),this.ws.onerror=h=>this.onError("websocket error",h)}write(h){this.writable=!1;for(let g=0;g<h.length;g++){const p=h[g],_=g===h.length-1;(0,f.encodePacket)(p,this.supportsBinary,m=>{const v={};u.usingBrowserWebSocket||(p.options&&(v.compress=p.options.compress),this.opts.perMessageDeflate&&(typeof m=="string"?Buffer.byteLength(m):m.length)<this.opts.perMessageDeflate.threshold&&(v.compress=!1));try{u.usingBrowserWebSocket?this.ws.send(m):this.ws.send(m,v)}catch{a("websocket closed before onclose event")}_&&(0,u.nextTick)(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let h=this.query||{};const g=this.opts.secure?"wss":"ws";let p="";this.opts.port&&(g==="wss"&&Number(this.opts.port)!==443||g==="ws"&&Number(this.opts.port)!==80)&&(p=":"+this.opts.port),this.opts.timestampRequests&&(h[this.opts.timestampParam]=(0,n.default)()),this.supportsBinary||(h.b64=1);const _=t.default.encode(h),m=this.opts.hostname.indexOf(":")!==-1;return g+"://"+(m?"["+this.opts.hostname+"]":this.opts.hostname)+p+this.opts.path+(_.length?"?"+_:"")}check(){return!!u.WebSocket&&!("__initialize"in u.WebSocket&&this.name===d.prototype.name)}};e.WS=d}}),require_transports=__commonJS({"node_modules/engine.io-client/build/cjs/transports/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;var o=require_polling_xhr(),r=require_websocket();e.transports={websocket:r.WS,polling:o.XHR}}}),require_socket=__commonJS({"node_modules/engine.io-client/build/cjs/socket.js"(e){init_node_globals();var o=e&&e.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var r=require_transports(),t=require_util6(),n=o(require_parseqs()),s=o(require_parseuri()),u=o(require_browser2()),l=require_component_emitter(),f=require_cjs(),a=(0,u.default)("engine.io-client:socket"),c=class extends l.Emitter{constructor(h,g={}){super();h&&typeof h=="object"&&(g=h,h=null),h?(h=(0,s.default)(h),g.hostname=h.host,g.secure=h.protocol==="https"||h.protocol==="wss",g.port=h.port,h.query&&(g.query=h.query)):g.host&&(g.hostname=(0,s.default)(g.host).host),(0,t.installTimerFunctions)(this,g),this.secure=g.secure!=null?g.secure:typeof location!="undefined"&&location.protocol==="https:",g.hostname&&!g.port&&(g.port=this.secure?"443":"80"),this.hostname=g.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=g.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=g.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},g),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=n.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(h){a('creating transport "%s"',h);const g=d(this.opts.query);g.EIO=f.protocol,g.transport=h,this.id&&(g.sid=this.id);const p=Object.assign({},this.opts.transportOptions[h],this.opts,{query:g,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return a("options: %j",p),new r.transports[h](p)}open(){let h;if(this.opts.rememberUpgrade&&c.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)h="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else h=this.transports[0];this.readyState="opening";try{h=this.createTransport(h)}catch(g){a("error while creating transport: %s",g),this.transports.shift(),this.open();return}h.open(),this.setTransport(h)}setTransport(h){a("setting transport %s",h.name),this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=h,h.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(h){a('probing transport "%s"',h);let g=this.createTransport(h),p=!1;c.priorWebsocketSuccess=!1;const _=()=>{p||(a('probe transport "%s" opened',h),g.send([{type:"ping",data:"probe"}]),g.once("packet",R=>{if(!p)if(R.type==="pong"&&R.data==="probe"){if(a('probe transport "%s" pong',h),this.upgrading=!0,this.emitReserved("upgrading",g),!g)return;c.priorWebsocketSuccess=g.name==="websocket",a('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{p||this.readyState!=="closed"&&(a("changing transport and sending upgrade packet"),T(),this.setTransport(g),g.send([{type:"upgrade"}]),this.emitReserved("upgrade",g),g=null,this.upgrading=!1,this.flush())})}else{a('probe transport "%s" failed',h);const S=new Error("probe error");S.transport=g.name,this.emitReserved("upgradeError",S)}}))};function m(){p||(p=!0,T(),g.close(),g=null)}const v=R=>{const S=new Error("probe error: "+R);S.transport=g.name,m(),a('probe transport "%s" failed because of error: %s',h,R),this.emitReserved("upgradeError",S)};function w(){v("transport closed")}function y(){v("socket closed")}function b(R){g&&R.name!==g.name&&(a('"%s" works - aborting "%s"',R.name,g.name),m())}const T=()=>{g.removeListener("open",_),g.removeListener("error",v),g.removeListener("close",w),this.off("close",y),this.off("upgrading",b)};g.once("open",_),g.once("error",v),g.once("close",w),this.once("close",y),this.once("upgrading",b),g.open()}onOpen(){if(a("socket open"),this.readyState="open",c.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){a("starting upgrade probes");let h=0;const g=this.upgrades.length;for(;h<g;h++)this.probe(this.upgrades[h])}}onPacket(h){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(a('socket receive: type "%s", data "%s"',h.type,h.data),this.emitReserved("packet",h),this.emitReserved("heartbeat"),h.type){case"open":this.onHandshake(JSON.parse(h.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const g=new Error("server error");g.code=h.data,this.onError(g);break;case"message":this.emitReserved("data",h.data),this.emitReserved("message",h.data);break}else a('packet received with socket readyState "%s"',this.readyState)}onHandshake(h){this.emitReserved("handshake",h),this.id=h.sid,this.transport.query.sid=h.sid,this.upgrades=this.filterUpgrades(h.upgrades),this.pingInterval=h.pingInterval,this.pingTimeout=h.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(h,g,p){return this.sendPacket("message",h,g,p),this}send(h,g,p){return this.sendPacket("message",h,g,p),this}sendPacket(h,g,p,_){if(typeof g=="function"&&(_=g,g=void 0),typeof p=="function"&&(_=p,p=null),this.readyState==="closing"||this.readyState==="closed")return;p=p||{},p.compress=p.compress!==!1;const m={type:h,data:g,options:p};this.emitReserved("packetCreate",m),this.writeBuffer.push(m),_&&this.once("flush",_),this.flush()}close(){const h=()=>{this.onClose("forced close"),a("socket closing - telling transport to close"),this.transport.close()},g=()=>{this.off("upgrade",g),this.off("upgradeError",g),h()},p=()=>{this.once("upgrade",g),this.once("upgradeError",g)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?p():h()}):this.upgrading?p():h()),this}onError(h){a("socket error %j",h),c.priorWebsocketSuccess=!1,this.emitReserved("error",h),this.onClose("transport error",h)}onClose(h,g){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(a('socket close with reason: "%s"',h),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",h,g),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(h){const g=[];let p=0;const _=h.length;for(;p<_;p++)~this.transports.indexOf(h[p])&&g.push(h[p]);return g}};e.Socket=c,c.protocol=f.protocol;function d(h){const g={};for(let p in h)h.hasOwnProperty(p)&&(g[p]=h[p]);return g}}}),require_cjs2=__commonJS({"node_modules/engine.io-client/build/cjs/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;var o=require_socket();Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}}),e.protocol=o.Socket.protocol;var r=require_transport();Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return r.Transport}});var t=require_transports();Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return t.transports}});var n=require_util6();Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return n.installTimerFunctions}})}}),require_is_binary=__commonJS({"node_modules/socket.io-parser/build/cjs/is-binary.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;var o=typeof ArrayBuffer=="function",r=f=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(f):f.buffer instanceof ArrayBuffer,t=Object.prototype.toString,n=typeof Blob=="function"||typeof Blob!="undefined"&&t.call(Blob)==="[object BlobConstructor]",s=typeof File=="function"||typeof File!="undefined"&&t.call(File)==="[object FileConstructor]";function u(f){return o&&(f instanceof ArrayBuffer||r(f))||n&&f instanceof Blob||s&&f instanceof File}e.isBinary=u;function l(f,a){if(!f||typeof f!="object")return!1;if(Array.isArray(f)){for(let c=0,d=f.length;c<d;c++)if(l(f[c]))return!0;return!1}if(u(f))return!0;if(f.toJSON&&typeof f.toJSON=="function"&&arguments.length===1)return l(f.toJSON(),!0);for(const c in f)if(Object.prototype.hasOwnProperty.call(f,c)&&l(f[c]))return!0;return!1}e.hasBinary=l}}),require_binary=__commonJS({"node_modules/socket.io-parser/build/cjs/binary.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;var o=require_is_binary();function r(u){const l=[],f=u.data,a=u;return a.data=t(f,l),a.attachments=l.length,{packet:a,buffers:l}}e.deconstructPacket=r;function t(u,l){if(!u)return u;if(o.isBinary(u)){const f={_placeholder:!0,num:l.length};return l.push(u),f}else if(Array.isArray(u)){const f=new Array(u.length);for(let a=0;a<u.length;a++)f[a]=t(u[a],l);return f}else if(typeof u=="object"&&!(u instanceof Date)){const f={};for(const a in u)u.hasOwnProperty(a)&&(f[a]=t(u[a],l));return f}return u}function n(u,l){return u.data=s(u.data,l),u.attachments=void 0,u}e.reconstructPacket=n;function s(u,l){if(!u)return u;if(u&&u._placeholder)return l[u.num];if(Array.isArray(u))for(let f=0;f<u.length;f++)u[f]=s(u[f],l);else if(typeof u=="object")for(const f in u)u.hasOwnProperty(f)&&(u[f]=s(u[f],l));return u}}}),require_cjs3=__commonJS({"node_modules/socket.io-parser/build/cjs/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;var o=require_component_emitter(),r=require_binary(),t=require_is_binary(),n=require_browser2(),s=n.default("socket.io-parser");e.protocol=5;var u;(function(d){d[d.CONNECT=0]="CONNECT",d[d.DISCONNECT=1]="DISCONNECT",d[d.EVENT=2]="EVENT",d[d.ACK=3]="ACK",d[d.CONNECT_ERROR=4]="CONNECT_ERROR",d[d.BINARY_EVENT=5]="BINARY_EVENT",d[d.BINARY_ACK=6]="BINARY_ACK"})(u=e.PacketType||(e.PacketType={}));var l=class{encode(d){return s("encoding packet %j",d),(d.type===u.EVENT||d.type===u.ACK)&&t.hasBinary(d)?(d.type=d.type===u.EVENT?u.BINARY_EVENT:u.BINARY_ACK,this.encodeAsBinary(d)):[this.encodeAsString(d)]}encodeAsString(d){let h=""+d.type;return(d.type===u.BINARY_EVENT||d.type===u.BINARY_ACK)&&(h+=d.attachments+"-"),d.nsp&&d.nsp!=="/"&&(h+=d.nsp+","),d.id!=null&&(h+=d.id),d.data!=null&&(h+=JSON.stringify(d.data)),s("encoded %j as %s",d,h),h}encodeAsBinary(d){const h=r.deconstructPacket(d),g=this.encodeAsString(h.packet),p=h.buffers;return p.unshift(g),p}};e.Encoder=l;var f=class extends o.Emitter{constructor(){super()}add(d){let h;if(typeof d=="string")h=this.decodeString(d),h.type===u.BINARY_EVENT||h.type===u.BINARY_ACK?(this.reconstructor=new c(h),h.attachments===0&&super.emitReserved("decoded",h)):super.emitReserved("decoded",h);else if(t.isBinary(d)||d.base64)if(this.reconstructor)h=this.reconstructor.takeBinaryData(d),h&&(this.reconstructor=null,super.emitReserved("decoded",h));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+d)}decodeString(d){let h=0;const g={type:Number(d.charAt(0))};if(u[g.type]===void 0)throw new Error("unknown packet type "+g.type);if(g.type===u.BINARY_EVENT||g.type===u.BINARY_ACK){const _=h+1;for(;d.charAt(++h)!=="-"&&h!=d.length;);const m=d.substring(_,h);if(m!=Number(m)||d.charAt(h)!=="-")throw new Error("Illegal attachments");g.attachments=Number(m)}if(d.charAt(h+1)==="/"){const _=h+1;for(;++h&&!(d.charAt(h)===","||h===d.length););g.nsp=d.substring(_,h)}else g.nsp="/";const p=d.charAt(h+1);if(p!==""&&Number(p)==p){const _=h+1;for(;++h;){const m=d.charAt(h);if(m==null||Number(m)!=m){--h;break}if(h===d.length)break}g.id=Number(d.substring(_,h+1))}if(d.charAt(++h)){const _=a(d.substr(h));if(f.isPayloadValid(g.type,_))g.data=_;else throw new Error("invalid payload")}return s("decoded %s as %j",d,g),g}static isPayloadValid(d,h){switch(d){case u.CONNECT:return typeof h=="object";case u.DISCONNECT:return h===void 0;case u.CONNECT_ERROR:return typeof h=="string"||typeof h=="object";case u.EVENT:case u.BINARY_EVENT:return Array.isArray(h)&&h.length>0;case u.ACK:case u.BINARY_ACK:return Array.isArray(h)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}};e.Decoder=f;function a(d){try{return JSON.parse(d)}catch{return!1}}var c=class{constructor(d){this.packet=d,this.buffers=[],this.reconPack=d}takeBinaryData(d){if(this.buffers.push(d),this.buffers.length===this.reconPack.attachments){const h=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),h}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}}}),require_on=__commonJS({"node_modules/socket.io-client/build/cjs/on.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0;function o(r,t,n){return r.on(t,n),function(){r.off(t,n)}}e.on=o}}),require_socket2=__commonJS({"node_modules/socket.io-client/build/cjs/socket.js"(e){init_node_globals();var o=e&&e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;var r=require_cjs3(),t=require_on(),n=require_component_emitter(),s=o(require_browser2()),u=s.default("socket.io-client:socket"),l=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),f=class extends n.Emitter{constructor(a,c,d){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=c,d&&d.auth&&(this.auth=d.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const a=this.io;this.subs=[t.on(a,"open",this.onopen.bind(this)),t.on(a,"packet",this.onpacket.bind(this)),t.on(a,"error",this.onerror.bind(this)),t.on(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...c){if(l.hasOwnProperty(a))throw new Error('"'+a+'" is a reserved event name');c.unshift(a);const d={type:r.PacketType.EVENT,data:c};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof c[c.length-1]=="function"){const p=this.ids++;u("emitting packet with ack id %d",p);const _=c.pop();this._registerAckCallback(p,_),d.id=p}const h=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!h||!this.connected)?u("discard packet as the transport is not currently writable"):this.connected?this.packet(d):this.sendBuffer.push(d),this.flags={},this}_registerAckCallback(a,c){const d=this.flags.timeout;if(d===void 0){this.acks[a]=c;return}const h=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let g=0;g<this.sendBuffer.length;g++)this.sendBuffer[g].id===a&&(u("removing packet with ack id %d from the buffer",a),this.sendBuffer.splice(g,1));u("event with ack id %d has timed out after %d ms",a,d),c.call(this,new Error("operation has timed out"))},d);this.acks[a]=(...g)=>{this.io.clearTimeoutFn(h),c.apply(this,[null,...g])}}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){u("transport is open - connecting"),typeof this.auth=="function"?this.auth(a=>{this.packet({type:r.PacketType.CONNECT,data:a})}):this.packet({type:r.PacketType.CONNECT,data:this.auth})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a){u("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",a)}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case r.PacketType.CONNECT:if(a.data&&a.data.sid){const h=a.data.sid;this.onconnect(h)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case r.PacketType.EVENT:this.onevent(a);break;case r.PacketType.BINARY_EVENT:this.onevent(a);break;case r.PacketType.ACK:this.onack(a);break;case r.PacketType.BINARY_ACK:this.onack(a);break;case r.PacketType.DISCONNECT:this.ondisconnect();break;case r.PacketType.CONNECT_ERROR:this.destroy();const d=new Error(a.data.message);d.data=a.data.data,this.emitReserved("connect_error",d);break}}onevent(a){const c=a.data||[];u("emitting event %j",c),a.id!=null&&(u("attaching ack callback to event"),c.push(this.ack(a.id))),this.connected?this.emitEvent(c):this.receiveBuffer.push(Object.freeze(c))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length){const c=this._anyListeners.slice();for(const d of c)d.apply(this,a)}super.emit.apply(this,a)}ack(a){const c=this;let d=!1;return function(...h){d||(d=!0,u("sending ack %j",h),c.packet({type:r.PacketType.ACK,id:a,data:h}))}}onack(a){const c=this.acks[a.id];typeof c=="function"?(u("calling ack %s with %j",a.id,a.data),c.apply(this,a.data),delete this.acks[a.id]):u("bad ack %s",a.id)}onconnect(a){u("socket connected with id %s",a),this.id=a,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>this.packet(a)),this.sendBuffer=[]}ondisconnect(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){const c=this._anyListeners;for(let d=0;d<c.length;d++)if(a===c[d])return c.splice(d,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}};e.Socket=f}}),require_backo2=__commonJS({"node_modules/backo2/index.js"(e,o){init_node_globals(),o.exports=r;function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),s=Math.floor(n*this.jitter*t);t=(Math.floor(n*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}}),require_manager=__commonJS({"node_modules/socket.io-client/build/cjs/manager.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(p,_,m,v){v===void 0&&(v=m),Object.defineProperty(p,v,{enumerable:!0,get:function(){return _[m]}})}:function(p,_,m,v){v===void 0&&(v=m),p[v]=_[m]}),r=e&&e.__setModuleDefault||(Object.create?function(p,_){Object.defineProperty(p,"default",{enumerable:!0,value:_})}:function(p,_){p.default=_}),t=e&&e.__importStar||function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var m in p)m!=="default"&&Object.prototype.hasOwnProperty.call(p,m)&&o(_,p,m);return r(_,p),_},n=e&&e.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;var s=require_cjs2(),u=require_socket2(),l=t(require_cjs3()),f=require_on(),a=n(require_backo2()),c=require_component_emitter(),d=n(require_browser2()),h=d.default("socket.io-client:manager"),g=class extends c.Emitter{constructor(p,_){var m;super();this.nsps={},this.subs=[],p&&typeof p=="object"&&(_=p,p=void 0),_=_||{},_.path=_.path||"/socket.io",this.opts=_,s.installTimerFunctions(this,_),this.reconnection(_.reconnection!==!1),this.reconnectionAttempts(_.reconnectionAttempts||1/0),this.reconnectionDelay(_.reconnectionDelay||1e3),this.reconnectionDelayMax(_.reconnectionDelayMax||5e3),this.randomizationFactor((m=_.randomizationFactor)!==null&&m!==void 0?m:.5),this.backoff=new a.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(_.timeout==null?2e4:_.timeout),this._readyState="closed",this.uri=p;const v=_.parser||l;this.encoder=new v.Encoder,this.decoder=new v.Decoder,this._autoConnect=_.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(p){return arguments.length?(this._reconnection=!!p,this):this._reconnection}reconnectionAttempts(p){return p===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=p,this)}reconnectionDelay(p){var _;return p===void 0?this._reconnectionDelay:(this._reconnectionDelay=p,(_=this.backoff)===null||_===void 0||_.setMin(p),this)}randomizationFactor(p){var _;return p===void 0?this._randomizationFactor:(this._randomizationFactor=p,(_=this.backoff)===null||_===void 0||_.setJitter(p),this)}reconnectionDelayMax(p){var _;return p===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=p,(_=this.backoff)===null||_===void 0||_.setMax(p),this)}timeout(p){return arguments.length?(this._timeout=p,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(p){if(h("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=new s.Socket(this.uri,this.opts);const _=this.engine,m=this;this._readyState="opening",this.skipReconnect=!1;const v=f.on(_,"open",function(){m.onopen(),p&&p()}),w=f.on(_,"error",y=>{h("error"),m.cleanup(),m._readyState="closed",this.emitReserved("error",y),p?p(y):m.maybeReconnectOnOpen()});if(this._timeout!==!1){const y=this._timeout;h("connect attempt will timeout after %d",y),y===0&&v();const b=this.setTimeoutFn(()=>{h("connect attempt timed out after %d",y),v(),_.close(),_.emit("error",new Error("timeout"))},y);this.opts.autoUnref&&b.unref(),this.subs.push(function(){clearTimeout(b)})}return this.subs.push(v),this.subs.push(w),this}connect(p){return this.open(p)}onopen(){h("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const p=this.engine;this.subs.push(f.on(p,"ping",this.onping.bind(this)),f.on(p,"data",this.ondata.bind(this)),f.on(p,"error",this.onerror.bind(this)),f.on(p,"close",this.onclose.bind(this)),f.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(p){this.decoder.add(p)}ondecoded(p){this.emitReserved("packet",p)}onerror(p){h("error",p),this.emitReserved("error",p)}socket(p,_){let m=this.nsps[p];return m||(m=new u.Socket(this,p,_),this.nsps[p]=m),m}_destroy(p){const _=Object.keys(this.nsps);for(const m of _)if(this.nsps[m].active){h("socket %s is still active, skipping close",m);return}this._close()}_packet(p){h("writing packet %j",p);const _=this.encoder.encode(p);for(let m=0;m<_.length;m++)this.engine.write(_[m],p.options)}cleanup(){h("cleanup"),this.subs.forEach(p=>p()),this.subs.length=0,this.decoder.destroy()}_close(){h("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(p){h("closed due to %s",p),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",p),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const p=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const _=this.backoff.duration();h("will wait %dms before reconnect attempt",_),this._reconnecting=!0;const m=this.setTimeoutFn(()=>{p.skipReconnect||(h("attempting reconnect"),this.emitReserved("reconnect_attempt",p.backoff.attempts),!p.skipReconnect&&p.open(v=>{v?(h("reconnect attempt error"),p._reconnecting=!1,p.reconnect(),this.emitReserved("reconnect_error",v)):(h("reconnect success"),p.onreconnect())}))},_);this.opts.autoUnref&&m.unref(),this.subs.push(function(){clearTimeout(m)})}}onreconnect(){const p=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",p)}};e.Manager=g}}),require_cjs4=__commonJS({"node_modules/socket.io-client/build/cjs/index.js"(e,o){init_node_globals();var r=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;var t=require_url(),n=require_manager();Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return n.Manager}});var s=require_socket2();Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return s.Socket}});var u=r(require_browser2()),l=u.default("socket.io-client"),f={};function a(d,h){typeof d=="object"&&(h=d,d=void 0),h=h||{};const g=t.url(d,h.path||"/socket.io"),p=g.source,_=g.id,m=g.path,v=f[_]&&m in f[_].nsps,w=h.forceNew||h["force new connection"]||h.multiplex===!1||v;let y;return w?(l("ignoring socket cache for %s",p),y=new n.Manager(p,h)):(f[_]||(l("new io instance for %s",p),f[_]=new n.Manager(p,h)),y=f[_]),g.query&&!h.query&&(h.query=g.queryKey),y.socket(g.path,h)}e.io=a,e.connect=a,e.default=a,Object.assign(a,{Manager:n.Manager,Socket:s.Socket,io:a,connect:a});var c=require_cjs3();Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return c.protocol}}),o.exports=a}}),require_sink2=__commonJS({"node_modules/stream-to-it/sink.js"(e,o){init_node_globals();var r=require_get_iterator();o.exports=t=>async n=>{n=r(n);const s=b=>{typeof b.return=="function"&&b.return()};let u=null,l=null;const f=b=>{u=b,l&&l(b),s(n)};let a=null,c=!1;const d=()=>{c=!0,a&&a()};let h=null,g=!1;const p=()=>{g=!0,h&&h()};let _=null;const m=()=>{_&&_()},v=()=>new Promise((b,T)=>{a=_=b,l=T,t.once("drain",m)}),w=()=>(s(n),new Promise((b,T)=>{if(c||g||u)return b();h=a=b,l=T})),y=()=>{t.removeListener("error",f),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",m)};t.once("error",f),t.once("close",d),t.once("finish",p);try{for await(const b of n){if(!t.writable||t.destroyed||u)break;t.write(b)===!1&&await v()}}catch(b){u||t.destroy(),u=b}try{if(t.writable&&t.end(),await w(),u)throw u}finally{y()}}}}),require_duplex2=__commonJS({"node_modules/stream-to-it/duplex.js"(e,o){init_node_globals();var r=require_sink2(),t=require_source();o.exports=n=>({sink:r(n),source:t(n)})}}),require_transform=__commonJS({"node_modules/stream-to-it/transform.js"(e,o){init_node_globals();var r=require_duplex2();o.exports=t=>async function*(n){const s=r(t);let u;if(s.sink(n).catch(l=>{u=l}),yield*s.source,u)throw u}}}),require_stream_to_it=__commonJS({"node_modules/stream-to-it/index.js"(e,o){init_node_globals(),o.exports=require_source(),o.exports.source=require_source(),o.exports.sink=require_sink2(),o.exports.transform=require_transform(),o.exports.duplex=require_duplex2()}}),require_socket_to_conn2=__commonJS({"node_modules/libp2p-webrtc-star/src/socket-to-conn.js"(e,o){init_node_globals();var r=require_abortable_iterator(),t=require_stream_to_it(),{CLOSE_TIMEOUT:n}=require_constants8(),s=require_ip_port_to_multiaddr(),u=require_browser2(),l=u("libp2p:webrtc-star:socket");l.error=u("libp2p:webrtc-star:socket:error");var f=(a,c)=>{if(!(!a||!c))try{return s(a,c)}catch(d){return l.error(d),s("0.0.0.0",c)}};o.exports=(a,c={})=>{const{sink:d,source:h}=t.duplex(a),g=c.remoteAddr||f(a.remoteAddress,a.remotePort),p=f(a.localAddress,a.localPort),_={async sink(m){c.signal&&(m=r(m,c.signal));try{await d(async function*(){for await(const v of m)yield v instanceof Uint8Array?v:v.slice()}())}catch(v){v.type!=="aborted"&&l.error(v)}},source:c.signal?r(h,c.signal):h,conn:a,localAddr:p,remoteAddr:g,timeline:{open:Date.now()},close(){if(!a.destroyed)return new Promise((m,v)=>{const w=Date.now(),y=setTimeout(()=>{if(_.remoteAddr){const{host:b,port:T}=_.remoteAddr.toOptions();l("timeout closing socket to %s:%s after %dms, destroying it manually",b,T,Date.now()-w)}a.destroyed||a.destroy()},n);a.once("close",()=>{m()}),a.end(b=>{if(clearTimeout(y),_.timeline.close=Date.now(),b)return v(b)})})}};return a.once("close",()=>{_.timeline.close||(_.timeline.close=Date.now())}),_}}}),require_utils11=__commonJS({"node_modules/libp2p-webrtc-star/src/utils.js"(e,o){init_node_globals();var{Multiaddr:r}=require_src();function t(s){const u=s.toString().split("/"),l=s.protos()[1].name,f=s.protos()[2].name,a=s.stringTuples()[1][1];if(l!=="tcp"||f!=="ws"&&f!=="wss")throw new Error("invalid multiaddr: "+s.toString());if(!r.isName(s))return"http://"+u[2]+":"+u[4];if(f==="ws")return"http://"+u[2]+(a==="80"?"":":"+a);if(f==="wss")return"https://"+u[2]+(a==="443"?"":":"+a)}function n(s){const u="/libp2p-webrtc-star";if(s.indexOf(u)!==-1){s=s.substring(u.length,s.length);let l=new r(s);const f=l.stringTuples().filter(a=>a[0]===421)[0];l=l.decapsulate("p2p"),l=l.encapsulate("/p2p-webrtc-star"),l=l.encapsulate(`/p2p/${f[1]}`),s=l.toString()}return s}o.exports={cleanUrlSIO:t,cleanMultiaddr:n}}}),require_listener=__commonJS({"node_modules/libp2p-webrtc-star/src/listener.js"(e,o){init_node_globals();var r=require_events(),t=require_browser2(),n=t("libp2p:webrtc-star:listener");n.error=t("libp2p:webrtc-star:listener:error");var s=require_err_code(),u=require_cjs4(),l=require_libp2p_webrtc_peer(),f=require_p_defer(),a=require_socket_to_conn2(),{cleanUrlSIO:c}=require_utils11(),{CODE_P2P:d}=require_constants8(),h={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};o.exports=({handler:p,upgrader:_},m,v={})=>{const w=new r;let y,b;return w.__connections=[],w.__spChannels=new Map,w.__pendingIntents=new Map,w.listen=T=>{if(y)throw s(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const R=f();y=T;let S;!T.protoCodes().includes(d)&&_.localPeer?S=T.encapsulate(`/p2p/${_.localPeer.toB58String()}`):S=T,w.on("error",()=>R.reject()),b=c(T),n("Dialing to Signalling Server on: "+b),w.io=u.connect(b,h);const E=A=>{if(A.answer||A.err||!A.intentId)return;const C=A.intentId;let I=w.__pendingIntents.get(C);I||(I=[],w.__pendingIntents.set(C,I));let P=w.__spChannels.get(C);if(P){P.signal(A.signal);return}else if(A.signal.type!=="offer"){I.push(A);return}const O=Re({trickle:!1},v);m.wrtc&&(O.wrtc=m.wrtc),P=new l(O);const k=N=>{n.error("incoming connection errored",N)};P.on("error",k),P.once("close",(...N)=>{P.removeListener("error",k)}),P.on("signal",N=>{A.signal=N,A.answer=!0,w.io.emit("ss-handshake",A)}),P.signal(A.signal);for(const N of I)P.signal(N.signal);w.__pendingIntents.set(C,[]),P.once("connect",async()=>{const N=a(P);n("new inbound connection %s",N.remoteAddr);let K;try{K=await _.upgradeInbound(N)}catch(U){return n.error("inbound connection failed to upgrade",U),N.close()}if(!K.remoteAddr)try{K.remoteAddr=T.decapsulateCode(d).encapsulate(`/p2p/${K.remotePeer.toB58String()}`)}catch(U){n.error("could not determine remote address",U)}n("inbound connection %s upgraded",N.remoteAddr),g(w,N,C),w.emit("connection",K),p(K)}),w.__spChannels.set(C,P)};return w.io.once("connect_error",A=>R.reject(A)),w.io.once("error",A=>{w.emit("error",A),w.emit("close")}),w.io.on("ws-handshake",E),w.io.on("ws-peer",m._peerDiscovered),w.io.on("connect",()=>{w.io.emit("ss-join",S.toString())}),w.io.once("connect",()=>{w.emit("listening"),R.resolve()}),m.sigReferences.set(b,{listener:w,signallingAddr:S}),R.promise},w.close=async()=>{const T=m.sigReferences.get(b);T&&T.listener.io&&(T.listener.io.emit("ss-leave"),T.listener.io.close()),await Promise.all(w.__connections.map(R=>R.close())),w.emit("close"),w.removeAllListeners(),y=void 0,m.sigReferences.delete(b)},w.getAddrs=()=>[y],w};function g(p,_,m){p.__connections.push(_);const v=()=>{p.__connections=p.__connections.filter(w=>w!==_),p.__spChannels.delete(m),p.__pendingIntents.delete(m)};_.conn.once("close",v)}}}),require_src16=__commonJS({"node_modules/libp2p-webrtc-star/src/index.js"(e,o){init_node_globals();var r=require_browser2(),t=r("libp2p:webrtc-star");t.error=r("libp2p:webrtc-star:error");var{EventEmitter:n}=require_events(),s=require_err_code(),u=require_class_is(),{AbortError:l}=require_abortable_iterator(),f=require_libp2p_webrtc_peer(),{supportsWebRTCDataChannels:a}=require_supports(),{Multiaddr:c}=require_src(),d=require_src2(),h=require_src5(),{CODE_CIRCUIT:g}=require_constants8(),p=require_listener(),_=require_socket_to_conn2(),{cleanMultiaddr:m,cleanUrlSIO:v}=require_utils11();function w(){}var y=class{constructor(b={}){if(!b.upgrader)throw new Error("An upgrader must be provided. See https://github.com/libp2p/interface-transport#upgrader.");this._upgrader=b.upgrader,this.sioOptions={transports:["websocket"],"force new connection":!0},b.wrtc&&(this.wrtc=b.wrtc),this.sigReferences=new Map,this.discovery=new n,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=()=>{this.discovery._isStarted=!0},this.discovery.stop=()=>{this.discovery._isStarted=!1},this._peerDiscovered=this._peerDiscovered.bind(this)}async dial(b,T={}){const R=await this._connect(b,T),S=_(R,{remoteAddr:b,signal:T.signal});t("new outbound connection %s",S.remoteAddr);const E=await this._upgrader.upgradeOutbound(S);return t("outbound connection %s upgraded",S.remoteAddr),E}_connect(b,T={}){if(T.signal&&T.signal.aborted)throw new l;const R=Re({initiator:!0,trickle:!1},T.spOptions||{});this.wrtc&&(R.wrtc=this.wrtc);const S=b.toOptions(),E=(~~(Math.random()*1e9)).toString(36)+Date.now();return new Promise((A,C)=>{const I=this.sigReferences.get(v(b));if(!I||!I.listener)return C(s(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));const P=I.listener.io,O=Date.now();let k;t("dialing %s:%s",S.host,S.port);const N=new f(R),K=V=>{if(!k){const ee=`connection error ${S.host}:${S.port}: ${V.message}`;t.error(ee),Z(V)}},U=()=>{t("connnection timeout %s:%s",S.host,S.port);const V=s(new Error(`connection timeout after ${Date.now()-O}ms`),"ERR_CONNECT_TIMEOUT");N.emit("error",V)},L=()=>{k=!0,t("connection opened %s:%s",S.host,S.port),Z(null)},re=()=>{t.error("connection aborted %s:%s",S.host,S.port),N.destroy(),Z(new l)},Z=V=>{N.removeListener("timeout",U),N.removeListener("connect",L),T.signal&&T.signal.removeEventListener("abort",re),V?C(V):A(N)};N.on("error",K),N.once("timeout",U),N.once("connect",L),N.on("close",()=>{N.removeListener("error",K)}),T.signal&&T.signal.addEventListener("abort",re),N.on("signal",V=>{P.emit("ss-handshake",{intentId:E,srcMultiaddr:I.signallingAddr.toString(),dstMultiaddr:b.toString(),signal:V})}),P.on("ws-handshake",V=>{V.intentId===E&&V.err&&(N.destroy(),C(s(V.err instanceof Error?V.err:new Error(V.err),"ERR_SIGNALLING_FAILED"))),!(V.intentId!==E||!V.answer||N.destroyed)&&N.signal(V.signal)})})}createListener(b={},T){if(!a&&!this.wrtc)throw s(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return typeof b=="function"&&(T=b,b={}),T=T||w,p({handler:T,upgrader:this._upgrader},this,b)}filter(b){return b=Array.isArray(b)?b:[b],b.filter(T=>T.protoCodes().includes(g)?!1:d.WebRTCStar.matches(T))}_peerDiscovered(b){if(!this.discovery._isStarted)return;t("Peer Discovered:",b),b=m(b);const T=new c(b),R=h.createFromB58String(T.getPeerId());this.discovery.emit("peer",{id:R,multiaddrs:[T]})}};o.exports=u(y,{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})}}),require_encode_browser=__commonJS({"node_modules/libp2p-mplex/src/coder/encode.browser.js"(e,o){init_node_globals();var r=require_varint(),t=require_BufferList(),n=10*1024,s=class{constructor(){this._pool=new Uint8Array(n),this._poolOffset=0}write(l){const f=this._pool;let a=this._poolOffset;r.encode(l.id<<3|l.type,f,a),a+=r.encode.bytes,r.encode(l.data?l.data.length:0,f,a),a+=r.encode.bytes;const c=f.subarray(this._poolOffset,a);return n-a<100?(this._pool=new Uint8Array(n),this._poolOffset=0):this._poolOffset=a,l.data?[c,l.data]:c}},u=new s;o.exports=l=>async function*(){for await(const a of l)Array.isArray(a)?yield new t(a.map(c=>u.write(c))):yield new t(u.write(a))}()}}),require_decode3=__commonJS({"node_modules/libp2p-mplex/src/coder/decode.js"(e,o){init_node_globals();var r=require_varint(),t=require_BufferList();o.exports=s=>async function*(){const l=new n;for await(const f of s){const a=l.write(f);a.length&&(yield a)}}();var n=class{constructor(){this._buffer=new t,this._bufferProxy=new Proxy({},{get:(s,u)=>u[0]==="l"?this._buffer[u]:this._buffer.get(parseInt(u))}),this._headerInfo=null}write(s){if(!s||!s.length)return[];this._buffer.append(s);const u=[];for(;this._buffer.length;){if(!this._headerInfo)try{this._headerInfo=this._decodeHeader(this._bufferProxy)}catch{break}const{id:l,type:f,length:a,offset:c}=this._headerInfo;if(this._buffer.length-c<a)break;u.push({id:l,type:f,data:this._buffer.shallowSlice(c,c+a)}),this._buffer.consume(c+a),this._headerInfo=null}return u}_decodeHeader(s){const u=r.decode(s);let l=r.decode.bytes;const f=r.decode(s,l);return l+=r.decode.bytes,{id:u>>3,type:u&7,offset:l,length:f}}}}}),require_coder=__commonJS({"node_modules/libp2p-mplex/src/coder/index.js"(e){init_node_globals(),e.encode=require_encode_browser(),e.decode=require_decode3()}}),require_restrict_size=__commonJS({"node_modules/libp2p-mplex/src/restrict-size.js"(e,o){init_node_globals();var r=1<<20;o.exports=t=>{t=t||r;const n=s=>{if(s.data&&s.data.length>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return s=>async function*(){for await(const l of s)Array.isArray(l)?l.forEach(n):n(l),yield l}()},o.exports.MAX_MSG_SIZE=r}}),require_message_types=__commonJS({"node_modules/libp2p-mplex/src/message-types.js"(e){init_node_globals();var o=Object.freeze({NEW_STREAM:0,MESSAGE_RECEIVER:1,MESSAGE_INITIATOR:2,CLOSE_RECEIVER:3,CLOSE_INITIATOR:4,RESET_RECEIVER:5,RESET_INITIATOR:6});e.MessageTypes=o,e.InitiatorMessageTypes=Object.freeze({NEW_STREAM:o.NEW_STREAM,MESSAGE:o.MESSAGE_INITIATOR,CLOSE:o.CLOSE_INITIATOR,RESET:o.RESET_INITIATOR}),e.ReceiverMessageTypes=Object.freeze({MESSAGE:o.MESSAGE_RECEIVER,CLOSE:o.CLOSE_RECEIVER,RESET:o.RESET_RECEIVER}),e.MessageTypeNames=Object.freeze(Object.entries(o).reduce((r,t)=>(r[t[1]]=t[0],r),{}))}}),require_stream=__commonJS({"node_modules/libp2p-mplex/src/stream.js"(e,o){init_node_globals();var r=require_abortable_iterator(),t=require_browser2()("libp2p:mplex:stream"),n=require_it_pushable(),s=require_BufferList(),u=require_err_code(),{MAX_MSG_SIZE:l}=require_restrict_size(),{InitiatorMessageTypes:f,ReceiverMessageTypes:a}=require_message_types(),c="ERR_MPLEX_STREAM_RESET",d="ERR_MPLEX_STREAM_ABORT";o.exports=({id:h,name:g,send:p,onEnd:_=()=>{},type:m="initiator",maxMsgSize:v=l})=>{const w=new AbortController,y=new AbortController,b=m==="initiator"?f:a,T=m==="initiator"?`i${h}`:`r${h}`;g=String(g==null?h:g);let R=!1,S=!1,E;const A=P=>{R||(R=!0,t("%s stream %s source end",m,g,P),P&&!E&&(E=P),S&&(I.timeline.close=Date.now(),_(E)))},C=P=>{S||(S=!0,t("%s stream %s sink end",m,g,P),P&&!E&&(E=P),R&&(I.timeline.close=Date.now(),_(E)))},I={close:()=>I.source.end(),abort:P=>{t("%s stream %s abort",m,g,P),I.source.end(P),w.abort(),C(P)},reset:()=>{const P=u(new Error("stream reset"),c);y.abort(),I.source.end(P),C(P)},sink:async P=>{P=r(P,[{signal:w.signal,options:{abortMessage:"stream aborted",abortCode:d}},{signal:y.signal,options:{abortMessage:"stream reset",abortCode:c}}]),m==="initiator"&&p({id:h,type:b.NEW_STREAM,data:g});try{for await(let O of P)for(;O.length;){if(O.length<=v){p({id:h,type:b.MESSAGE,data:O});break}O=s.isBufferList(O)?O:new s(O),p({id:h,type:b.MESSAGE,data:O.shallowSlice(0,v)}),O.consume(v)}}catch(O){return O.code===c?t("%s stream %s reset",m,g):(t("%s stream %s error",m,g,O),p({id:h,type:b.RESET})),I.source.end(O),C(O)}p({id:h,type:b.CLOSE}),C()},source:n(A),timeline:{open:Date.now(),close:null},id:T};return I}}}),require_mplex=__commonJS({"node_modules/libp2p-mplex/src/mplex.js"(e,o){init_node_globals();var r=require_it_pipe(),t=require_it_pushable(),n=require_browser2()("libp2p:mplex"),s=require_abortable_iterator(),u=require_coder(),l=require_restrict_size(),{MessageTypes:f,MessageTypeNames:a}=require_message_types(),c=require_stream(),d=class{constructor(h){h=h||{},h=typeof h=="function"?{onStream:h}:h,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._options=h,this.sink=this._createSink(),this.source=this._createSource(),this.onStream=h.onStream,this.onStreamEnd=h.onStreamEnd}get streams(){const h=[];return this._streams.initiators.forEach(g=>{h.push(g)}),this._streams.receivers.forEach(g=>{h.push(g)}),h}newStream(h){const g=this._streamId++;h=h==null?g.toString():String(h);const p=this._streams.initiators;return this._newStream({id:g,name:h,type:"initiator",registry:p})}_newReceiverStream({id:h,name:g}){const p=this._streams.receivers;return this._newStream({id:h,name:g,type:"receiver",registry:p})}_newStream({id:h,name:g,type:p,registry:_}){if(_.has(h))throw new Error(`${p} stream ${h} already exists!`);n("new %s stream %s %s",p,h,g);const w=c({id:h,name:g,send:y=>(n.enabled&&n("%s stream %s %s send",p,h,g,$e(Re({},y),{type:a[y.type],data:y.data&&y.data.slice()})),this.source.push(y)),type:p,onEnd:()=>{n("%s stream %s %s ended",p,h,g),_.delete(h),this.onStreamEnd&&this.onStreamEnd(w)},maxMsgSize:this._options.maxMsgSize});return _.set(h,w),w}_createSink(){return async h=>{this._options.signal&&(h=s(h,this._options.signal));try{await r(h,u.decode,l(this._options.maxMsgSize),async g=>{for await(const p of g)for(const _ of p)this._handleIncoming(_)})}catch(g){return n("error in sink",g),this.source.end(g)}this.source.end()}}_createSource(){const g=t({onEnd:p=>{const{initiators:_,receivers:m}=this._streams;for(const v of _.values())v.abort(p);for(const v of m.values())v.abort(p)},writev:!0});return Object.assign(u.encode(g),{push:g.push,end:g.end,return:g.return})}_handleIncoming({id:h,type:g,data:p}){if(n.enabled&&n("incoming message",{id:h,type:a[g],data:p.slice()}),g===f.NEW_STREAM&&this.onStream){const v=this._newReceiverStream({id:h,name:p.toString()});return this.onStream(v)}const m=(g&1?this._streams.initiators:this._streams.receivers).get(h);if(!m)return n("missing stream %s",h);switch(g){case f.MESSAGE_INITIATOR:case f.MESSAGE_RECEIVER:m.source.push(p);break;case f.CLOSE_INITIATOR:case f.CLOSE_RECEIVER:m.close();break;case f.RESET_INITIATOR:case f.RESET_RECEIVER:m.reset();break;default:n("unknown message type %s",g)}}};d.multicodec="/mplex/6.7.0",o.exports=d}}),require_src17=__commonJS({"node_modules/libp2p-mplex/src/index.js"(e,o){init_node_globals(),o.exports=require_mplex()}}),require_browser9=__commonJS({"node_modules/@stablelib/random/lib/source/browser.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=65536,r=function(){function t(){this.isAvailable=!1,this.isInstantiated=!1;var n=typeof self!="undefined"?self.crypto||self.msCrypto:null;n&&n.getRandomValues&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}return t.prototype.randomBytes=function(n){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");for(var s=new Uint8Array(n),u=0;u<s.length;u+=o)this._crypto.getRandomValues(s.subarray(u,u+Math.min(s.length-u,o)));return s},t}();e.BrowserRandomSource=r}}),require_wipe=__commonJS({"node_modules/@stablelib/wipe/lib/wipe.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(r){for(var t=0;t<r.length;t++)r[t]=0;return r}e.wipe=o}}),require_node2=__commonJS({"node_modules/@stablelib/random/lib/source/node.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_wipe(),r=function(){function t(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof __require!="undefined"){var n=require_crypto();n&&n.randomBytes&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}}return t.prototype.randomBytes=function(n){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");var s=this._crypto.randomBytes(n);if(s.length!==n)throw new Error("NodeRandomSource: got fewer bytes than requested");for(var u=new Uint8Array(n),l=0;l<u.length;l++)u[l]=s[l];return o.wipe(s),u},t}();e.NodeRandomSource=r}}),require_system=__commonJS({"node_modules/@stablelib/random/lib/source/system.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser9(),r=require_node2(),t=function(){function n(){if(this.isAvailable=!1,this.name="",this._source=new o.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new r.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}return n.prototype.randomBytes=function(s){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(s)},n}();e.SystemRandomSource=t}}),require_int=__commonJS({"node_modules/@stablelib/int/lib/int.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(l,f){var a=l>>>16&65535,c=l&65535,d=f>>>16&65535,h=f&65535;return c*h+(a*h+c*d<<16>>>0)|0}e.mul=Math.imul||o;function r(l,f){return l+f|0}e.add=r;function t(l,f){return l-f|0}e.sub=t;function n(l,f){return l<<f|l>>>32-f}e.rotl=n;function s(l,f){return l<<32-f|l>>>f}e.rotr=s;function u(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}e.isInteger=Number.isInteger||u,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(l){return e.isInteger(l)&&l>=-e.MAX_SAFE_INTEGER&&l<=e.MAX_SAFE_INTEGER}}}),require_binary2=__commonJS({"node_modules/@stablelib/binary/lib/binary.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_int();function r(K,U){return U===void 0&&(U=0),(K[U+0]<<8|K[U+1])<<16>>16}e.readInt16BE=r;function t(K,U){return U===void 0&&(U=0),(K[U+0]<<8|K[U+1])>>>0}e.readUint16BE=t;function n(K,U){return U===void 0&&(U=0),(K[U+1]<<8|K[U])<<16>>16}e.readInt16LE=n;function s(K,U){return U===void 0&&(U=0),(K[U+1]<<8|K[U])>>>0}e.readUint16LE=s;function u(K,U,L){return U===void 0&&(U=new Uint8Array(2)),L===void 0&&(L=0),U[L+0]=K>>>8,U[L+1]=K>>>0,U}e.writeUint16BE=u,e.writeInt16BE=u;function l(K,U,L){return U===void 0&&(U=new Uint8Array(2)),L===void 0&&(L=0),U[L+0]=K>>>0,U[L+1]=K>>>8,U}e.writeUint16LE=l,e.writeInt16LE=l;function f(K,U){return U===void 0&&(U=0),K[U]<<24|K[U+1]<<16|K[U+2]<<8|K[U+3]}e.readInt32BE=f;function a(K,U){return U===void 0&&(U=0),(K[U]<<24|K[U+1]<<16|K[U+2]<<8|K[U+3])>>>0}e.readUint32BE=a;function c(K,U){return U===void 0&&(U=0),K[U+3]<<24|K[U+2]<<16|K[U+1]<<8|K[U]}e.readInt32LE=c;function d(K,U){return U===void 0&&(U=0),(K[U+3]<<24|K[U+2]<<16|K[U+1]<<8|K[U])>>>0}e.readUint32LE=d;function h(K,U,L){return U===void 0&&(U=new Uint8Array(4)),L===void 0&&(L=0),U[L+0]=K>>>24,U[L+1]=K>>>16,U[L+2]=K>>>8,U[L+3]=K>>>0,U}e.writeUint32BE=h,e.writeInt32BE=h;function g(K,U,L){return U===void 0&&(U=new Uint8Array(4)),L===void 0&&(L=0),U[L+0]=K>>>0,U[L+1]=K>>>8,U[L+2]=K>>>16,U[L+3]=K>>>24,U}e.writeUint32LE=g,e.writeInt32LE=g;function p(K,U){U===void 0&&(U=0);var L=f(K,U),re=f(K,U+4);return L*4294967296+re-(re>>31)*4294967296}e.readInt64BE=p;function _(K,U){U===void 0&&(U=0);var L=a(K,U),re=a(K,U+4);return L*4294967296+re}e.readUint64BE=_;function m(K,U){U===void 0&&(U=0);var L=c(K,U),re=c(K,U+4);return re*4294967296+L-(L>>31)*4294967296}e.readInt64LE=m;function v(K,U){U===void 0&&(U=0);var L=d(K,U),re=d(K,U+4);return re*4294967296+L}e.readUint64LE=v;function w(K,U,L){return U===void 0&&(U=new Uint8Array(8)),L===void 0&&(L=0),h(K/4294967296>>>0,U,L),h(K>>>0,U,L+4),U}e.writeUint64BE=w,e.writeInt64BE=w;function y(K,U,L){return U===void 0&&(U=new Uint8Array(8)),L===void 0&&(L=0),g(K>>>0,U,L),g(K/4294967296>>>0,U,L+4),U}e.writeUint64LE=y,e.writeInt64LE=y;function b(K,U,L){if(L===void 0&&(L=0),K%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(K/8>U.length-L)throw new Error("readUintBE: array is too short for the given bitLength");for(var re=0,Z=1,V=K/8+L-1;V>=L;V--)re+=U[V]*Z,Z*=256;return re}e.readUintBE=b;function T(K,U,L){if(L===void 0&&(L=0),K%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(K/8>U.length-L)throw new Error("readUintLE: array is too short for the given bitLength");for(var re=0,Z=1,V=L;V<L+K/8;V++)re+=U[V]*Z,Z*=256;return re}e.readUintLE=T;function R(K,U,L,re){if(L===void 0&&(L=new Uint8Array(K/8)),re===void 0&&(re=0),K%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!o.isSafeInteger(U))throw new Error("writeUintBE value must be an integer");for(var Z=1,V=K/8+re-1;V>=re;V--)L[V]=U/Z&255,Z*=256;return L}e.writeUintBE=R;function S(K,U,L,re){if(L===void 0&&(L=new Uint8Array(K/8)),re===void 0&&(re=0),K%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!o.isSafeInteger(U))throw new Error("writeUintLE value must be an integer");for(var Z=1,V=re;V<re+K/8;V++)L[V]=U/Z&255,Z*=256;return L}e.writeUintLE=S;function E(K,U){U===void 0&&(U=0);var L=new DataView(K.buffer,K.byteOffset,K.byteLength);return L.getFloat32(U)}e.readFloat32BE=E;function A(K,U){U===void 0&&(U=0);var L=new DataView(K.buffer,K.byteOffset,K.byteLength);return L.getFloat32(U,!0)}e.readFloat32LE=A;function C(K,U){U===void 0&&(U=0);var L=new DataView(K.buffer,K.byteOffset,K.byteLength);return L.getFloat64(U)}e.readFloat64BE=C;function I(K,U){U===void 0&&(U=0);var L=new DataView(K.buffer,K.byteOffset,K.byteLength);return L.getFloat64(U,!0)}e.readFloat64LE=I;function P(K,U,L){U===void 0&&(U=new Uint8Array(4)),L===void 0&&(L=0);var re=new DataView(U.buffer,U.byteOffset,U.byteLength);return re.setFloat32(L,K),U}e.writeFloat32BE=P;function O(K,U,L){U===void 0&&(U=new Uint8Array(4)),L===void 0&&(L=0);var re=new DataView(U.buffer,U.byteOffset,U.byteLength);return re.setFloat32(L,K,!0),U}e.writeFloat32LE=O;function k(K,U,L){U===void 0&&(U=new Uint8Array(8)),L===void 0&&(L=0);var re=new DataView(U.buffer,U.byteOffset,U.byteLength);return re.setFloat64(L,K),U}e.writeFloat64BE=k;function N(K,U,L){U===void 0&&(U=new Uint8Array(8)),L===void 0&&(L=0);var re=new DataView(U.buffer,U.byteOffset,U.byteLength);return re.setFloat64(L,K,!0),U}e.writeFloat64LE=N}}),require_random2=__commonJS({"node_modules/@stablelib/random/lib/random.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_system(),r=require_binary2(),t=require_wipe();e.defaultRandomSource=new o.SystemRandomSource;function n(a,c){return c===void 0&&(c=e.defaultRandomSource),c.randomBytes(a)}e.randomBytes=n;function s(a){a===void 0&&(a=e.defaultRandomSource);var c=n(4,a),d=r.readUint32LE(c);return t.wipe(c),d}e.randomUint32=s;var u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(a,c,d){if(c===void 0&&(c=u),d===void 0&&(d=e.defaultRandomSource),c.length<2)throw new Error("randomString charset is too short");if(c.length>256)throw new Error("randomString charset is too long");for(var h="",g=c.length,p=256-256%g;a>0;){for(var _=n(Math.ceil(a*256/p),d),m=0;m<_.length&&a>0;m++){var v=_[m];v<p&&(h+=c.charAt(v%g),a--)}t.wipe(_)}return h}e.randomString=l;function f(a,c,d){c===void 0&&(c=u),d===void 0&&(d=e.defaultRandomSource);var h=Math.ceil(a/(Math.log(c.length)/Math.LN2));return l(h,c,d)}e.randomStringForEntropy=f}}),require_x25519=__commonJS({"node_modules/@stablelib/x25519/lib/x25519.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_random2(),r=require_wipe();e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function t(b){var T=new Float64Array(16);if(b)for(var R=0;R<b.length;R++)T[R]=b[R];return T}var n=new Uint8Array(32);n[0]=9;var s=t([56129,1]);function u(b){for(var T=1,R=0;R<16;R++){var S=b[R]+T+65535;T=Math.floor(S/65536),b[R]=S-T*65536}b[0]+=T-1+37*(T-1)}function l(b,T,R){for(var S=~(R-1),E=0;E<16;E++){var A=S&(b[E]^T[E]);b[E]^=A,T[E]^=A}}function f(b,T){for(var R=t(),S=t(),E=0;E<16;E++)S[E]=T[E];u(S),u(S),u(S);for(var A=0;A<2;A++){R[0]=S[0]-65517;for(var E=1;E<15;E++)R[E]=S[E]-65535-(R[E-1]>>16&1),R[E-1]&=65535;R[15]=S[15]-32767-(R[14]>>16&1);var C=R[15]>>16&1;R[14]&=65535,l(S,R,1-C)}for(var E=0;E<16;E++)b[2*E]=S[E]&255,b[2*E+1]=S[E]>>8}function a(b,T){for(var R=0;R<16;R++)b[R]=T[2*R]+(T[2*R+1]<<8);b[15]&=32767}function c(b,T,R){for(var S=0;S<16;S++)b[S]=T[S]+R[S]}function d(b,T,R){for(var S=0;S<16;S++)b[S]=T[S]-R[S]}function h(b,T,R){var S,E,A=0,C=0,I=0,P=0,O=0,k=0,N=0,K=0,U=0,L=0,re=0,Z=0,V=0,ee=0,fe=0,_e=0,ce=0,Ee=0,Ie=0,ue=0,pe=0,Ae=0,Y=0,se=0,F=0,j=0,B=0,$=0,G=0,X=0,H=0,he=R[0],we=R[1],Te=R[2],De=R[3],Me=R[4],Be=R[5],Le=R[6],W=R[7],q=R[8],M=R[9],ie=R[10],ve=R[11],D=R[12],z=R[13],de=R[14],be=R[15];S=T[0],A+=S*he,C+=S*we,I+=S*Te,P+=S*De,O+=S*Me,k+=S*Be,N+=S*Le,K+=S*W,U+=S*q,L+=S*M,re+=S*ie,Z+=S*ve,V+=S*D,ee+=S*z,fe+=S*de,_e+=S*be,S=T[1],C+=S*he,I+=S*we,P+=S*Te,O+=S*De,k+=S*Me,N+=S*Be,K+=S*Le,U+=S*W,L+=S*q,re+=S*M,Z+=S*ie,V+=S*ve,ee+=S*D,fe+=S*z,_e+=S*de,ce+=S*be,S=T[2],I+=S*he,P+=S*we,O+=S*Te,k+=S*De,N+=S*Me,K+=S*Be,U+=S*Le,L+=S*W,re+=S*q,Z+=S*M,V+=S*ie,ee+=S*ve,fe+=S*D,_e+=S*z,ce+=S*de,Ee+=S*be,S=T[3],P+=S*he,O+=S*we,k+=S*Te,N+=S*De,K+=S*Me,U+=S*Be,L+=S*Le,re+=S*W,Z+=S*q,V+=S*M,ee+=S*ie,fe+=S*ve,_e+=S*D,ce+=S*z,Ee+=S*de,Ie+=S*be,S=T[4],O+=S*he,k+=S*we,N+=S*Te,K+=S*De,U+=S*Me,L+=S*Be,re+=S*Le,Z+=S*W,V+=S*q,ee+=S*M,fe+=S*ie,_e+=S*ve,ce+=S*D,Ee+=S*z,Ie+=S*de,ue+=S*be,S=T[5],k+=S*he,N+=S*we,K+=S*Te,U+=S*De,L+=S*Me,re+=S*Be,Z+=S*Le,V+=S*W,ee+=S*q,fe+=S*M,_e+=S*ie,ce+=S*ve,Ee+=S*D,Ie+=S*z,ue+=S*de,pe+=S*be,S=T[6],N+=S*he,K+=S*we,U+=S*Te,L+=S*De,re+=S*Me,Z+=S*Be,V+=S*Le,ee+=S*W,fe+=S*q,_e+=S*M,ce+=S*ie,Ee+=S*ve,Ie+=S*D,ue+=S*z,pe+=S*de,Ae+=S*be,S=T[7],K+=S*he,U+=S*we,L+=S*Te,re+=S*De,Z+=S*Me,V+=S*Be,ee+=S*Le,fe+=S*W,_e+=S*q,ce+=S*M,Ee+=S*ie,Ie+=S*ve,ue+=S*D,pe+=S*z,Ae+=S*de,Y+=S*be,S=T[8],U+=S*he,L+=S*we,re+=S*Te,Z+=S*De,V+=S*Me,ee+=S*Be,fe+=S*Le,_e+=S*W,ce+=S*q,Ee+=S*M,Ie+=S*ie,ue+=S*ve,pe+=S*D,Ae+=S*z,Y+=S*de,se+=S*be,S=T[9],L+=S*he,re+=S*we,Z+=S*Te,V+=S*De,ee+=S*Me,fe+=S*Be,_e+=S*Le,ce+=S*W,Ee+=S*q,Ie+=S*M,ue+=S*ie,pe+=S*ve,Ae+=S*D,Y+=S*z,se+=S*de,F+=S*be,S=T[10],re+=S*he,Z+=S*we,V+=S*Te,ee+=S*De,fe+=S*Me,_e+=S*Be,ce+=S*Le,Ee+=S*W,Ie+=S*q,ue+=S*M,pe+=S*ie,Ae+=S*ve,Y+=S*D,se+=S*z,F+=S*de,j+=S*be,S=T[11],Z+=S*he,V+=S*we,ee+=S*Te,fe+=S*De,_e+=S*Me,ce+=S*Be,Ee+=S*Le,Ie+=S*W,ue+=S*q,pe+=S*M,Ae+=S*ie,Y+=S*ve,se+=S*D,F+=S*z,j+=S*de,B+=S*be,S=T[12],V+=S*he,ee+=S*we,fe+=S*Te,_e+=S*De,ce+=S*Me,Ee+=S*Be,Ie+=S*Le,ue+=S*W,pe+=S*q,Ae+=S*M,Y+=S*ie,se+=S*ve,F+=S*D,j+=S*z,B+=S*de,$+=S*be,S=T[13],ee+=S*he,fe+=S*we,_e+=S*Te,ce+=S*De,Ee+=S*Me,Ie+=S*Be,ue+=S*Le,pe+=S*W,Ae+=S*q,Y+=S*M,se+=S*ie,F+=S*ve,j+=S*D,B+=S*z,$+=S*de,G+=S*be,S=T[14],fe+=S*he,_e+=S*we,ce+=S*Te,Ee+=S*De,Ie+=S*Me,ue+=S*Be,pe+=S*Le,Ae+=S*W,Y+=S*q,se+=S*M,F+=S*ie,j+=S*ve,B+=S*D,$+=S*z,G+=S*de,X+=S*be,S=T[15],_e+=S*he,ce+=S*we,Ee+=S*Te,Ie+=S*De,ue+=S*Me,pe+=S*Be,Ae+=S*Le,Y+=S*W,se+=S*q,F+=S*M,j+=S*ie,B+=S*ve,$+=S*D,G+=S*z,X+=S*de,H+=S*be,A+=38*ce,C+=38*Ee,I+=38*Ie,P+=38*ue,O+=38*pe,k+=38*Ae,N+=38*Y,K+=38*se,U+=38*F,L+=38*j,re+=38*B,Z+=38*$,V+=38*G,ee+=38*X,fe+=38*H,E=1,S=A+E+65535,E=Math.floor(S/65536),A=S-E*65536,S=C+E+65535,E=Math.floor(S/65536),C=S-E*65536,S=I+E+65535,E=Math.floor(S/65536),I=S-E*65536,S=P+E+65535,E=Math.floor(S/65536),P=S-E*65536,S=O+E+65535,E=Math.floor(S/65536),O=S-E*65536,S=k+E+65535,E=Math.floor(S/65536),k=S-E*65536,S=N+E+65535,E=Math.floor(S/65536),N=S-E*65536,S=K+E+65535,E=Math.floor(S/65536),K=S-E*65536,S=U+E+65535,E=Math.floor(S/65536),U=S-E*65536,S=L+E+65535,E=Math.floor(S/65536),L=S-E*65536,S=re+E+65535,E=Math.floor(S/65536),re=S-E*65536,S=Z+E+65535,E=Math.floor(S/65536),Z=S-E*65536,S=V+E+65535,E=Math.floor(S/65536),V=S-E*65536,S=ee+E+65535,E=Math.floor(S/65536),ee=S-E*65536,S=fe+E+65535,E=Math.floor(S/65536),fe=S-E*65536,S=_e+E+65535,E=Math.floor(S/65536),_e=S-E*65536,A+=E-1+37*(E-1),E=1,S=A+E+65535,E=Math.floor(S/65536),A=S-E*65536,S=C+E+65535,E=Math.floor(S/65536),C=S-E*65536,S=I+E+65535,E=Math.floor(S/65536),I=S-E*65536,S=P+E+65535,E=Math.floor(S/65536),P=S-E*65536,S=O+E+65535,E=Math.floor(S/65536),O=S-E*65536,S=k+E+65535,E=Math.floor(S/65536),k=S-E*65536,S=N+E+65535,E=Math.floor(S/65536),N=S-E*65536,S=K+E+65535,E=Math.floor(S/65536),K=S-E*65536,S=U+E+65535,E=Math.floor(S/65536),U=S-E*65536,S=L+E+65535,E=Math.floor(S/65536),L=S-E*65536,S=re+E+65535,E=Math.floor(S/65536),re=S-E*65536,S=Z+E+65535,E=Math.floor(S/65536),Z=S-E*65536,S=V+E+65535,E=Math.floor(S/65536),V=S-E*65536,S=ee+E+65535,E=Math.floor(S/65536),ee=S-E*65536,S=fe+E+65535,E=Math.floor(S/65536),fe=S-E*65536,S=_e+E+65535,E=Math.floor(S/65536),_e=S-E*65536,A+=E-1+37*(E-1),b[0]=A,b[1]=C,b[2]=I,b[3]=P,b[4]=O,b[5]=k,b[6]=N,b[7]=K,b[8]=U,b[9]=L,b[10]=re,b[11]=Z,b[12]=V,b[13]=ee,b[14]=fe,b[15]=_e}function g(b,T){h(b,T,T)}function p(b,T){for(var R=t(),S=0;S<16;S++)R[S]=T[S];for(var S=253;S>=0;S--)g(R,R),S!==2&&S!==4&&h(R,R,T);for(var S=0;S<16;S++)b[S]=R[S]}function _(b,T){for(var R=new Uint8Array(32),S=new Float64Array(80),E=t(),A=t(),C=t(),I=t(),P=t(),O=t(),k=0;k<31;k++)R[k]=b[k];R[31]=b[31]&127|64,R[0]&=248,a(S,T);for(var k=0;k<16;k++)A[k]=S[k];E[0]=I[0]=1;for(var k=254;k>=0;--k){var N=R[k>>>3]>>>(k&7)&1;l(E,A,N),l(C,I,N),c(P,E,C),d(E,E,C),c(C,A,I),d(A,A,I),g(I,P),g(O,E),h(E,C,E),h(C,A,P),c(P,E,C),d(E,E,C),g(A,E),d(C,I,O),h(E,C,s),c(E,E,I),h(C,C,E),h(E,I,O),h(I,A,S),g(A,P),l(E,A,N),l(C,I,N)}for(var k=0;k<16;k++)S[k+16]=E[k],S[k+32]=C[k],S[k+48]=A[k],S[k+64]=I[k];var K=S.subarray(32),U=S.subarray(16);p(K,K),h(U,U,K);var L=new Uint8Array(32);return f(L,U),L}e.scalarMult=_;function m(b){return _(b,n)}e.scalarMultBase=m;function v(b){if(b.length!==e.SECRET_KEY_LENGTH)throw new Error("x25519: seed must be "+e.SECRET_KEY_LENGTH+" bytes");var T=new Uint8Array(b),R=m(T);return{publicKey:R,secretKey:T}}e.generateKeyPairFromSeed=v;function w(b){var T=o.randomBytes(32,b),R=v(T);return r.wipe(T),R}e.generateKeyPair=w;function y(b,T,R){if(R===void 0&&(R=!1),b.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(T.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");var S=_(b,T);if(R){for(var E=0,A=0;A<S.length;A++)E|=S[A];if(E===0)throw new Error("X25519: invalid shared key")}return S}e.sharedKey=y}}),require_src18=__commonJS({"node_modules/it-handshake/src/index.js"(e,o){init_node_globals();var r=require_it_reader(),t=require_it_pushable(),n=require_p_defer();o.exports=s=>{const u=t(),l=r(s.source),f=n();let a;const c=s.sink(async function*(){yield*u,yield*await f.promise}());return c.catch(h=>{a=h}),{reader:l,writer:u,stream:{sink:h=>a?Promise.reject(a):(f.resolve(h),c),source:l},rest:()=>u.end(),write:u.push,read:async()=>(await l.next()).value}}}}),require_src19=__commonJS({"node_modules/it-pb-rpc/src/index.js"(e,o){init_node_globals();var r=require_src18(),t=require_src11();o.exports=(n,s={})=>{const u=r(n),l=t.decode.fromReader(u.reader,s),f={read:async a=>{const{value:c,done:d}=await u.reader.next(a);if(d&&c.length<a)throw new Error("Couldn't read enough bytes");if(!c)throw new Error("Value is null");return c},readLP:async()=>{const{value:a,done:c}=await l.next();if(!a)throw new Error("Value is null");return a},readPB:async a=>{const c=await f.readLP();if(!c)throw new Error("Value is null");const d=c instanceof Uint8Array?c:c.slice();return a.decode(d)},write:a=>{u.writer.push(a)},writeLP:a=>{f.write(t.encode.single(a,s))},writePB:(a,c)=>{f.writeLP(c.encode(a))},pb:a=>({read:()=>f.readPB(a),write:c=>f.writePB(c,a)}),unwrap:()=>(u.rest(),u.stream)};return f}}}),require_it_pair=__commonJS({"node_modules/it-pair/index.js"(e,o){init_node_globals();var r=require_get_iterator();o.exports=function(){let n,s;const u=async f=>{if(n)throw new Error("already piped");n=r(f),s&&s(n)},l={[Symbol.asyncIterator](){return this},next(){return n?n.next():new Promise(f=>{s=a=>{s=null,f(a.next())}})}};return{sink:u,source:l}}}}),require_duplex3=__commonJS({"node_modules/it-pair/duplex.js"(e,o){init_node_globals();var r=require_it_pair();o.exports=function(){var t=r(),n=r();return[{source:t.source,sink:n.sink},{source:n.source,sink:t.sink}]}}}),require_it_buffer=__commonJS({"node_modules/it-buffer/index.js"(e,o){init_node_globals();var{Buffer:r}=require_buffer(),t=require_BufferList();o.exports=async function*(n){for await(const s of n)r.isBuffer(s)?yield s:t.isBufferList(s)?yield s.slice():yield r.from(s)},o.exports.toBuffer=o.exports,o.exports.toList=async function*(n){for await(const s of n)r.isBuffer(s)?yield new t().append(s):t.isBufferList(s)?yield s:yield new t().append(r.from(s))}}}),require_hash=__commonJS({"node_modules/@stablelib/hash/lib/hash.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(r){return typeof r.saveState!="undefined"&&typeof r.restoreState!="undefined"&&typeof r.cleanSavedState!="undefined"}e.isSerializableHash=o}}),require_constant_time=__commonJS({"node_modules/@stablelib/constant-time/lib/constant-time.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});function o(s,u,l){return~(s-1)&u|s-1&l}e.select=o;function r(s,u){return(s|0)-(u|0)-1>>>31&1}e.lessOrEqual=r;function t(s,u){if(s.length!==u.length)return 0;for(var l=0,f=0;f<s.length;f++)l|=s[f]^u[f];return 1&l-1>>>8}e.compare=t;function n(s,u){return s.length===0||u.length===0?!1:t(s,u)!==0}e.equal=n}}),require_hmac2=__commonJS({"node_modules/@stablelib/hmac/lib/hmac.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_hash(),r=require_constant_time(),t=require_wipe(),n=function(){function u(l,f){this._finished=!1,this._inner=new l,this._outer=new l,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var a=new Uint8Array(this.blockSize);f.length>this.blockSize?this._inner.update(f).finish(a).clean():a.set(f);for(var c=0;c<a.length;c++)a[c]^=54;this._inner.update(a);for(var c=0;c<a.length;c++)a[c]^=54^92;this._outer.update(a),o.isSerializableHash(this._inner)&&o.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t.wipe(a)}return u.prototype.reset=function(){if(!o.isSerializableHash(this._inner)||!o.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},u.prototype.clean=function(){o.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),o.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},u.prototype.update=function(l){return this._inner.update(l),this},u.prototype.finish=function(l){return this._finished?(this._outer.finish(l),this):(this._inner.finish(l),this._outer.update(l.subarray(0,this.digestLength)).finish(l),this._finished=!0,this)},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(!o.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},u.prototype.restoreState=function(l){if(!o.isSerializableHash(this._inner)||!o.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(l),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},u.prototype.cleanSavedState=function(l){if(!o.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(l)},u}();e.HMAC=n;function s(u,l,f){var a=new n(u,l);a.update(f);var c=a.digest();return a.clean(),c}e.hmac=s,e.equal=r.equal}}),require_hkdf=__commonJS({"node_modules/@stablelib/hkdf/lib/hkdf.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_hmac2(),r=require_wipe(),t=function(){function n(s,u,l,f){l===void 0&&(l=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=s,this._info=f;var a=o.hmac(this._hash,l,u);this._hmac=new o.HMAC(s,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var s=this._counter[0];if(s===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),s>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(s){for(var u=new Uint8Array(s),l=0;l<u.length;l++)this._bufpos===this._buffer.length&&this._fillBuffer(),u[l]=this._buffer[this._bufpos++];return u},n.prototype.clean=function(){this._hmac.clean(),r.wipe(this._buffer),r.wipe(this._counter),this._bufpos=0},n}();e.HKDF=t}}),require_sha2562=__commonJS({"node_modules/@stablelib/sha256/lib/sha256.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_binary2(),r=require_wipe();e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var t=function(){function l(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},l.prototype.update=function(f,a){if(a===void 0&&(a=f.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var c=0;if(this._bytesHashed+=a,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&a>0;)this._buffer[this._bufferLength++]=f[c++],a--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(a>=this.blockSize&&(c=s(this._temp,this._state,f,c,a),a%=this.blockSize);a>0;)this._buffer[this._bufferLength++]=f[c++],a--;return this},l.prototype.finish=function(f){if(!this._finished){var a=this._bytesHashed,c=this._bufferLength,d=a/536870912|0,h=a<<3,g=a%64<56?64:128;this._buffer[c]=128;for(var p=c+1;p<g-8;p++)this._buffer[p]=0;o.writeUint32BE(d,this._buffer,g-8),o.writeUint32BE(h,this._buffer,g-4),s(this._temp,this._state,this._buffer,0,g),this._finished=!0}for(var p=0;p<this.digestLength/4;p++)o.writeUint32BE(this._state[p],f,p*4);return this},l.prototype.digest=function(){var f=new Uint8Array(this.digestLength);return this.finish(f),f},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(f){return this._state.set(f.state),this._bufferLength=f.bufferLength,f.buffer&&this._buffer.set(f.buffer),this._bytesHashed=f.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(f){r.wipe(f.state),f.buffer&&r.wipe(f.buffer),f.bufferLength=0,f.bytesHashed=0},l}();e.SHA256=t;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(l,f,a,c,d){for(;d>=64;){for(var h=f[0],g=f[1],p=f[2],_=f[3],m=f[4],v=f[5],w=f[6],y=f[7],b=0;b<16;b++){var T=c+b*4;l[b]=o.readUint32BE(a,T)}for(var b=16;b<64;b++){var R=l[b-2],S=(R>>>17|R<<32-17)^(R>>>19|R<<32-19)^R>>>10;R=l[b-15];var E=(R>>>7|R<<32-7)^(R>>>18|R<<32-18)^R>>>3;l[b]=(S+l[b-7]|0)+(E+l[b-16]|0)}for(var b=0;b<64;b++){var S=(((m>>>6|m<<32-6)^(m>>>11|m<<32-11)^(m>>>25|m<<32-25))+(m&v^~m&w)|0)+(y+(n[b]+l[b]|0)|0)|0,E=((h>>>2|h<<32-2)^(h>>>13|h<<32-13)^(h>>>22|h<<32-22))+(h&g^h&p^g&p)|0;y=w,w=v,v=m,m=_+S|0,_=p,p=g,g=h,h=S+E|0}f[0]+=h,f[1]+=g,f[2]+=p,f[3]+=_,f[4]+=m,f[5]+=v,f[6]+=w,f[7]+=y,c+=64,d-=64}return c}function u(l){var f=new t;f.update(l);var a=f.digest();return f.clean(),a}e.hash=u}}),require_payload=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/proto/payload.js"(e,o){init_node_globals(),function(r,t){typeof define=="function"&&define.amd?define(["protobufjs/minimal"],t):typeof __require=="function"&&typeof o=="object"&&o&&o.exports&&(o.exports=t(require_minimal2()))}(e,function(r){var t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-noise"]||(r.roots["libp2p-noise"]={});return u.pb=function(){var l={};return l.NoiseHandshakePayload=function(){function f(a){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}return f.prototype.identityKey=s.newBuffer([]),f.prototype.identitySig=s.newBuffer([]),f.prototype.data=s.newBuffer([]),f.create=function(c){return new f(c)},f.encode=function(c,d){return d||(d=n.create()),c.identityKey!=null&&Object.hasOwnProperty.call(c,"identityKey")&&d.uint32(10).bytes(c.identityKey),c.identitySig!=null&&Object.hasOwnProperty.call(c,"identitySig")&&d.uint32(18).bytes(c.identitySig),c.data!=null&&Object.hasOwnProperty.call(c,"data")&&d.uint32(26).bytes(c.data),d},f.encodeDelimited=function(c,d){return this.encode(c,d).ldelim()},f.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.pb.NoiseHandshakePayload;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.identityKey=c.bytes();break;case 2:g.identitySig=c.bytes();break;case 3:g.data=c.bytes();break;default:c.skipType(p&7);break}}return g},f.decodeDelimited=function(c){return c instanceof t||(c=new t(c)),this.decode(c,c.uint32())},f.verify=function(c){return typeof c!="object"||c===null?"object expected":c.identityKey!=null&&c.hasOwnProperty("identityKey")&&!(c.identityKey&&typeof c.identityKey.length=="number"||s.isString(c.identityKey))?"identityKey: buffer expected":c.identitySig!=null&&c.hasOwnProperty("identitySig")&&!(c.identitySig&&typeof c.identitySig.length=="number"||s.isString(c.identitySig))?"identitySig: buffer expected":c.data!=null&&c.hasOwnProperty("data")&&!(c.data&&typeof c.data.length=="number"||s.isString(c.data))?"data: buffer expected":null},f.fromObject=function(c){if(c instanceof u.pb.NoiseHandshakePayload)return c;var d=new u.pb.NoiseHandshakePayload;return c.identityKey!=null&&(typeof c.identityKey=="string"?s.base64.decode(c.identityKey,d.identityKey=s.newBuffer(s.base64.length(c.identityKey)),0):c.identityKey.length&&(d.identityKey=c.identityKey)),c.identitySig!=null&&(typeof c.identitySig=="string"?s.base64.decode(c.identitySig,d.identitySig=s.newBuffer(s.base64.length(c.identitySig)),0):c.identitySig.length&&(d.identitySig=c.identitySig)),c.data!=null&&(typeof c.data=="string"?s.base64.decode(c.data,d.data=s.newBuffer(s.base64.length(c.data)),0):c.data.length&&(d.data=c.data)),d},f.toObject=function(c,d){d||(d={});var h={};return d.defaults&&(d.bytes===String?h.identityKey="":(h.identityKey=[],d.bytes!==Array&&(h.identityKey=s.newBuffer(h.identityKey))),d.bytes===String?h.identitySig="":(h.identitySig=[],d.bytes!==Array&&(h.identitySig=s.newBuffer(h.identitySig))),d.bytes===String?h.data="":(h.data=[],d.bytes!==Array&&(h.data=s.newBuffer(h.data)))),c.identityKey!=null&&c.hasOwnProperty("identityKey")&&(h.identityKey=d.bytes===String?s.base64.encode(c.identityKey,0,c.identityKey.length):d.bytes===Array?Array.prototype.slice.call(c.identityKey):c.identityKey),c.identitySig!=null&&c.hasOwnProperty("identitySig")&&(h.identitySig=d.bytes===String?s.base64.encode(c.identitySig,0,c.identitySig.length):d.bytes===Array?Array.prototype.slice.call(c.identitySig):c.identitySig),c.data!=null&&c.hasOwnProperty("data")&&(h.data=d.bytes===String?s.base64.encode(c.data,0,c.data.length):d.bytes===Array?Array.prototype.slice.call(c.data):c.data),h},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f}(),l}(),u})}}),require_utils12=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/utils.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(A,C,I,P){P===void 0&&(P=I),Object.defineProperty(A,P,{enumerable:!0,get:function(){return C[I]}})}:function(A,C,I,P){P===void 0&&(P=I),A[P]=C[I]}),r=e&&e.__setModuleDefault||(Object.create?function(A,C){Object.defineProperty(A,"default",{enumerable:!0,value:C})}:function(A,C){A.default=C}),t=e&&e.__importStar||function(A){if(A&&A.__esModule)return A;var C={};if(A!=null)for(var I in A)I!=="default"&&Object.prototype.hasOwnProperty.call(A,I)&&o(C,A,I);return r(C,A),C},n=e&&e.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(e,"__esModule",{value:!0}),e.isValidPublicKey=e.getHkdf=e.verifySignedPayload=e.getHandshakePayload=e.decodePayload=e.getPeerIdFromPayload=e.signPayload=e.createHandshakePayload=e.getPayload=e.generateKeypair=void 0;var s=require_hkdf(),u=require_sha2562(),l=t(require_x25519()),f=n(require_src5()),a=require_payload(),c=(init_equals(),__toCommonJS(equals_exports)),d=(init_from_string(),__toCommonJS(from_string_exports)),h=(init_concat(),__toCommonJS(concat_exports)),g=a.pb.NoiseHandshakePayload;function p(){const A=l.generateKeyPair();return{publicKey:A.publicKey,privateKey:A.secretKey}}e.generateKeypair=p;async function _(A,C,I){const P=await v(A,b(C)),O=I!=null?I:new Uint8Array(0);return m(A.marshalPubKey(),P,O)}e.getPayload=_;function m(A,C,I){const P=g.create({identityKey:A,identitySig:C,data:I!=null?I:null});return g.encode(P).finish()}e.createHandshakePayload=m;async function v(A,C){return await A.privKey.sign(C)}e.signPayload=v;async function w(A){return await f.default.createFromPubKey(A.identityKey)}e.getPeerIdFromPayload=w;function y(A){return g.toObject(g.decode(A))}e.decodePayload=y;function b(A){const C=(0,d.fromString)("noise-libp2p-static-key:");return(0,h.concat)([C,A],C.length+A.length)}e.getHandshakePayload=b;async function T(A,C){const I=await f.default.createFromPubKey(C);return(0,c.equals)(I.id,A)}async function R(A,C,I){const P=C.identityKey;if(!await T(I.id,P))throw new Error("Peer ID doesn't match libp2p public key.");const O=b(A),k=await f.default.createFromPubKey(P);if(!C.identitySig||!k.pubKey.verify(O,C.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return k}e.verifySignedPayload=R;function S(A,C){const O=new s.HKDF(u.SHA256,C,A).expand(96),k=O.slice(0,32),N=O.slice(32,64),K=O.slice(64,96);return[k,N,K]}e.getHkdf=S;function E(A){return!(!(A instanceof Uint8Array)||A.length!==32)}e.isValidPublicKey=E}}),require_chacha=__commonJS({"node_modules/@stablelib/chacha/lib/chacha.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_binary2(),r=require_wipe(),t=20;function n(f,a,c){for(var d=1634760805,h=857760878,g=2036477234,p=1797285236,_=c[3]<<24|c[2]<<16|c[1]<<8|c[0],m=c[7]<<24|c[6]<<16|c[5]<<8|c[4],v=c[11]<<24|c[10]<<16|c[9]<<8|c[8],w=c[15]<<24|c[14]<<16|c[13]<<8|c[12],y=c[19]<<24|c[18]<<16|c[17]<<8|c[16],b=c[23]<<24|c[22]<<16|c[21]<<8|c[20],T=c[27]<<24|c[26]<<16|c[25]<<8|c[24],R=c[31]<<24|c[30]<<16|c[29]<<8|c[28],S=a[3]<<24|a[2]<<16|a[1]<<8|a[0],E=a[7]<<24|a[6]<<16|a[5]<<8|a[4],A=a[11]<<24|a[10]<<16|a[9]<<8|a[8],C=a[15]<<24|a[14]<<16|a[13]<<8|a[12],I=d,P=h,O=g,k=p,N=_,K=m,U=v,L=w,re=y,Z=b,V=T,ee=R,fe=S,_e=E,ce=A,Ee=C,Ie=0;Ie<t;Ie+=2)I=I+N|0,fe^=I,fe=fe>>>32-16|fe<<16,re=re+fe|0,N^=re,N=N>>>32-12|N<<12,P=P+K|0,_e^=P,_e=_e>>>32-16|_e<<16,Z=Z+_e|0,K^=Z,K=K>>>32-12|K<<12,O=O+U|0,ce^=O,ce=ce>>>32-16|ce<<16,V=V+ce|0,U^=V,U=U>>>32-12|U<<12,k=k+L|0,Ee^=k,Ee=Ee>>>32-16|Ee<<16,ee=ee+Ee|0,L^=ee,L=L>>>32-12|L<<12,O=O+U|0,ce^=O,ce=ce>>>32-8|ce<<8,V=V+ce|0,U^=V,U=U>>>32-7|U<<7,k=k+L|0,Ee^=k,Ee=Ee>>>32-8|Ee<<8,ee=ee+Ee|0,L^=ee,L=L>>>32-7|L<<7,P=P+K|0,_e^=P,_e=_e>>>32-8|_e<<8,Z=Z+_e|0,K^=Z,K=K>>>32-7|K<<7,I=I+N|0,fe^=I,fe=fe>>>32-8|fe<<8,re=re+fe|0,N^=re,N=N>>>32-7|N<<7,I=I+K|0,Ee^=I,Ee=Ee>>>32-16|Ee<<16,V=V+Ee|0,K^=V,K=K>>>32-12|K<<12,P=P+U|0,fe^=P,fe=fe>>>32-16|fe<<16,ee=ee+fe|0,U^=ee,U=U>>>32-12|U<<12,O=O+L|0,_e^=O,_e=_e>>>32-16|_e<<16,re=re+_e|0,L^=re,L=L>>>32-12|L<<12,k=k+N|0,ce^=k,ce=ce>>>32-16|ce<<16,Z=Z+ce|0,N^=Z,N=N>>>32-12|N<<12,O=O+L|0,_e^=O,_e=_e>>>32-8|_e<<8,re=re+_e|0,L^=re,L=L>>>32-7|L<<7,k=k+N|0,ce^=k,ce=ce>>>32-8|ce<<8,Z=Z+ce|0,N^=Z,N=N>>>32-7|N<<7,P=P+U|0,fe^=P,fe=fe>>>32-8|fe<<8,ee=ee+fe|0,U^=ee,U=U>>>32-7|U<<7,I=I+K|0,Ee^=I,Ee=Ee>>>32-8|Ee<<8,V=V+Ee|0,K^=V,K=K>>>32-7|K<<7;o.writeUint32LE(I+d|0,f,0),o.writeUint32LE(P+h|0,f,4),o.writeUint32LE(O+g|0,f,8),o.writeUint32LE(k+p|0,f,12),o.writeUint32LE(N+_|0,f,16),o.writeUint32LE(K+m|0,f,20),o.writeUint32LE(U+v|0,f,24),o.writeUint32LE(L+w|0,f,28),o.writeUint32LE(re+y|0,f,32),o.writeUint32LE(Z+b|0,f,36),o.writeUint32LE(V+T|0,f,40),o.writeUint32LE(ee+R|0,f,44),o.writeUint32LE(fe+S|0,f,48),o.writeUint32LE(_e+E|0,f,52),o.writeUint32LE(ce+A|0,f,56),o.writeUint32LE(Ee+C|0,f,60)}function s(f,a,c,d,h){if(h===void 0&&(h=0),f.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(d.length<c.length)throw new Error("ChaCha: destination is shorter than source");var g,p;if(h===0){if(a.length!==8&&a.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");g=new Uint8Array(16),p=g.length-a.length,g.set(a,p)}else{if(a.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");g=a,p=h}for(var _=new Uint8Array(64),m=0;m<c.length;m+=64){n(_,g,f);for(var v=m;v<m+64&&v<c.length;v++)d[v]=c[v]^_[v-m];l(g,0,p)}return r.wipe(_),h===0&&r.wipe(g),d}e.streamXOR=s;function u(f,a,c,d){return d===void 0&&(d=0),r.wipe(c),s(f,a,c,c,d)}e.stream=u;function l(f,a,c){for(var d=1;c--;)d=d+(f[a]&255)|0,f[a]=d&255,d>>>=8,a++;if(d>0)throw new Error("ChaCha: counter overflow")}}}),require_poly1305=__commonJS({"node_modules/@stablelib/poly1305/lib/poly1305.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_constant_time(),r=require_wipe();e.DIGEST_LENGTH=16;var t=function(){function u(l){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var f=l[0]|l[1]<<8;this._r[0]=f&8191;var a=l[2]|l[3]<<8;this._r[1]=(f>>>13|a<<3)&8191;var c=l[4]|l[5]<<8;this._r[2]=(a>>>10|c<<6)&7939;var d=l[6]|l[7]<<8;this._r[3]=(c>>>7|d<<9)&8191;var h=l[8]|l[9]<<8;this._r[4]=(d>>>4|h<<12)&255,this._r[5]=h>>>1&8190;var g=l[10]|l[11]<<8;this._r[6]=(h>>>14|g<<2)&8191;var p=l[12]|l[13]<<8;this._r[7]=(g>>>11|p<<5)&8065;var _=l[14]|l[15]<<8;this._r[8]=(p>>>8|_<<8)&8191,this._r[9]=_>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return u.prototype._blocks=function(l,f,a){for(var c=this._fin?0:1<<11,d=this._h[0],h=this._h[1],g=this._h[2],p=this._h[3],_=this._h[4],m=this._h[5],v=this._h[6],w=this._h[7],y=this._h[8],b=this._h[9],T=this._r[0],R=this._r[1],S=this._r[2],E=this._r[3],A=this._r[4],C=this._r[5],I=this._r[6],P=this._r[7],O=this._r[8],k=this._r[9];a>=16;){var N=l[f+0]|l[f+1]<<8;d+=N&8191;var K=l[f+2]|l[f+3]<<8;h+=(N>>>13|K<<3)&8191;var U=l[f+4]|l[f+5]<<8;g+=(K>>>10|U<<6)&8191;var L=l[f+6]|l[f+7]<<8;p+=(U>>>7|L<<9)&8191;var re=l[f+8]|l[f+9]<<8;_+=(L>>>4|re<<12)&8191,m+=re>>>1&8191;var Z=l[f+10]|l[f+11]<<8;v+=(re>>>14|Z<<2)&8191;var V=l[f+12]|l[f+13]<<8;w+=(Z>>>11|V<<5)&8191;var ee=l[f+14]|l[f+15]<<8;y+=(V>>>8|ee<<8)&8191,b+=ee>>>5|c;var fe=0,_e=fe;_e+=d*T,_e+=h*(5*k),_e+=g*(5*O),_e+=p*(5*P),_e+=_*(5*I),fe=_e>>>13,_e&=8191,_e+=m*(5*C),_e+=v*(5*A),_e+=w*(5*E),_e+=y*(5*S),_e+=b*(5*R),fe+=_e>>>13,_e&=8191;var ce=fe;ce+=d*R,ce+=h*T,ce+=g*(5*k),ce+=p*(5*O),ce+=_*(5*P),fe=ce>>>13,ce&=8191,ce+=m*(5*I),ce+=v*(5*C),ce+=w*(5*A),ce+=y*(5*E),ce+=b*(5*S),fe+=ce>>>13,ce&=8191;var Ee=fe;Ee+=d*S,Ee+=h*R,Ee+=g*T,Ee+=p*(5*k),Ee+=_*(5*O),fe=Ee>>>13,Ee&=8191,Ee+=m*(5*P),Ee+=v*(5*I),Ee+=w*(5*C),Ee+=y*(5*A),Ee+=b*(5*E),fe+=Ee>>>13,Ee&=8191;var Ie=fe;Ie+=d*E,Ie+=h*S,Ie+=g*R,Ie+=p*T,Ie+=_*(5*k),fe=Ie>>>13,Ie&=8191,Ie+=m*(5*O),Ie+=v*(5*P),Ie+=w*(5*I),Ie+=y*(5*C),Ie+=b*(5*A),fe+=Ie>>>13,Ie&=8191;var ue=fe;ue+=d*A,ue+=h*E,ue+=g*S,ue+=p*R,ue+=_*T,fe=ue>>>13,ue&=8191,ue+=m*(5*k),ue+=v*(5*O),ue+=w*(5*P),ue+=y*(5*I),ue+=b*(5*C),fe+=ue>>>13,ue&=8191;var pe=fe;pe+=d*C,pe+=h*A,pe+=g*E,pe+=p*S,pe+=_*R,fe=pe>>>13,pe&=8191,pe+=m*T,pe+=v*(5*k),pe+=w*(5*O),pe+=y*(5*P),pe+=b*(5*I),fe+=pe>>>13,pe&=8191;var Ae=fe;Ae+=d*I,Ae+=h*C,Ae+=g*A,Ae+=p*E,Ae+=_*S,fe=Ae>>>13,Ae&=8191,Ae+=m*R,Ae+=v*T,Ae+=w*(5*k),Ae+=y*(5*O),Ae+=b*(5*P),fe+=Ae>>>13,Ae&=8191;var Y=fe;Y+=d*P,Y+=h*I,Y+=g*C,Y+=p*A,Y+=_*E,fe=Y>>>13,Y&=8191,Y+=m*S,Y+=v*R,Y+=w*T,Y+=y*(5*k),Y+=b*(5*O),fe+=Y>>>13,Y&=8191;var se=fe;se+=d*O,se+=h*P,se+=g*I,se+=p*C,se+=_*A,fe=se>>>13,se&=8191,se+=m*E,se+=v*S,se+=w*R,se+=y*T,se+=b*(5*k),fe+=se>>>13,se&=8191;var F=fe;F+=d*k,F+=h*O,F+=g*P,F+=p*I,F+=_*C,fe=F>>>13,F&=8191,F+=m*A,F+=v*E,F+=w*S,F+=y*R,F+=b*T,fe+=F>>>13,F&=8191,fe=(fe<<2)+fe|0,fe=fe+_e|0,_e=fe&8191,fe=fe>>>13,ce+=fe,d=_e,h=ce,g=Ee,p=Ie,_=ue,m=pe,v=Ae,w=Y,y=se,b=F,f+=16,a-=16}this._h[0]=d,this._h[1]=h,this._h[2]=g,this._h[3]=p,this._h[4]=_,this._h[5]=m,this._h[6]=v,this._h[7]=w,this._h[8]=y,this._h[9]=b},u.prototype.finish=function(l,f){f===void 0&&(f=0);var a=new Uint16Array(10),c,d,h,g;if(this._leftover){for(g=this._leftover,this._buffer[g++]=1;g<16;g++)this._buffer[g]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(c=this._h[1]>>>13,this._h[1]&=8191,g=2;g<10;g++)this._h[g]+=c,c=this._h[g]>>>13,this._h[g]&=8191;for(this._h[0]+=c*5,c=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=c,c=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=c,a[0]=this._h[0]+5,c=a[0]>>>13,a[0]&=8191,g=1;g<10;g++)a[g]=this._h[g]+c,c=a[g]>>>13,a[g]&=8191;for(a[9]-=1<<13,d=(c^1)-1,g=0;g<10;g++)a[g]&=d;for(d=~d,g=0;g<10;g++)this._h[g]=this._h[g]&d|a[g];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,h=this._h[0]+this._pad[0],this._h[0]=h&65535,g=1;g<8;g++)h=(this._h[g]+this._pad[g]|0)+(h>>>16)|0,this._h[g]=h&65535;return l[f+0]=this._h[0]>>>0,l[f+1]=this._h[0]>>>8,l[f+2]=this._h[1]>>>0,l[f+3]=this._h[1]>>>8,l[f+4]=this._h[2]>>>0,l[f+5]=this._h[2]>>>8,l[f+6]=this._h[3]>>>0,l[f+7]=this._h[3]>>>8,l[f+8]=this._h[4]>>>0,l[f+9]=this._h[4]>>>8,l[f+10]=this._h[5]>>>0,l[f+11]=this._h[5]>>>8,l[f+12]=this._h[6]>>>0,l[f+13]=this._h[6]>>>8,l[f+14]=this._h[7]>>>0,l[f+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(l){var f=0,a=l.length,c;if(this._leftover){c=16-this._leftover,c>a&&(c=a);for(var d=0;d<c;d++)this._buffer[this._leftover+d]=l[f+d];if(a-=c,f+=c,this._leftover+=c,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(a>=16&&(c=a-a%16,this._blocks(l,f,c),f+=c,a-=c),a){for(var d=0;d<a;d++)this._buffer[this._leftover+d]=l[f+d];this._leftover+=a}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},u.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();e.Poly1305=t;function n(u,l){var f=new t(u);f.update(l);var a=f.digest();return f.clean(),a}e.oneTimeAuth=n;function s(u,l){return u.length!==e.DIGEST_LENGTH||l.length!==e.DIGEST_LENGTH?!1:o.equal(u,l)}e.equal=s}}),require_chacha20poly1305=__commonJS({"node_modules/@stablelib/chacha20poly1305/lib/chacha20poly1305.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_chacha(),r=require_poly1305(),t=require_wipe(),n=require_binary2(),s=require_constant_time();e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var u=new Uint8Array(16),l=function(){function f(a){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,a.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(a)}return f.prototype.seal=function(a,c,d,h){if(a.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(a,g.length-a.length);var p=new Uint8Array(32);o.stream(this._key,g,p,4);var _=c.length+this.tagLength,m;if(h){if(h.length!==_)throw new Error("ChaCha20Poly1305: incorrect destination length");m=h}else m=new Uint8Array(_);return o.streamXOR(this._key,g,c,m,4),this._authenticate(m.subarray(m.length-this.tagLength,m.length),p,m.subarray(0,m.length-this.tagLength),d),t.wipe(g),m},f.prototype.open=function(a,c,d,h){if(a.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(c.length<this.tagLength)return null;var g=new Uint8Array(16);g.set(a,g.length-a.length);var p=new Uint8Array(32);o.stream(this._key,g,p,4);var _=new Uint8Array(this.tagLength);if(this._authenticate(_,p,c.subarray(0,c.length-this.tagLength),d),!s.equal(_,c.subarray(c.length-this.tagLength,c.length)))return null;var m=c.length-this.tagLength,v;if(h){if(h.length!==m)throw new Error("ChaCha20Poly1305: incorrect destination length");v=h}else v=new Uint8Array(m);return o.streamXOR(this._key,g,c.subarray(0,c.length-this.tagLength),v,4),t.wipe(g),v},f.prototype.clean=function(){return t.wipe(this._key),this},f.prototype._authenticate=function(a,c,d,h){var g=new r.Poly1305(c);h&&(g.update(h),h.length%16>0&&g.update(u.subarray(h.length%16))),g.update(d),d.length%16>0&&g.update(u.subarray(d.length%16));var p=new Uint8Array(8);h&&n.writeUint64LE(h.length,p),g.update(p),n.writeUint64LE(d.length,p),g.update(p);for(var _=g.digest(),m=0;m<_.length;m++)a[m]=_[m];g.clean(),t.wipe(_),t.wipe(p)},f}();e.ChaCha20Poly1305=l}}),xor_exports={};__export(xor_exports,{xor:()=>xor});function xor(e,o){if(e.length!==o.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[t]^o[t];return r}var init_xor=__esm({"node_modules/uint8arrays/esm/src/xor.js"(){init_node_globals()}}),src_exports10={};__export(src_exports10,{compare:()=>compare2,concat:()=>concat2,equals:()=>equals3,fromString:()=>fromString3,toString:()=>toString3,xor:()=>xor});var init_src15=__esm({"node_modules/uint8arrays/esm/src/index.js"(){init_node_globals(),init_compare(),init_concat(),init_equals(),init_from_string(),init_to_string(),init_xor()}}),require_constants9=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/constants.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.DUMP_SESSION_KEYS=e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES=void 0,e.NOISE_MSG_MAX_LENGTH_BYTES=65535,e.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=e.NOISE_MSG_MAX_LENGTH_BYTES-16,e.DUMP_SESSION_KEYS={}.DUMP_SESSION_KEYS}}),require_logger=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/logger.js"(e){init_node_globals();var o=e&&e.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.logCipherState=e.logRemoteEphemeralKey=e.logRemoteStaticKey=e.logLocalEphemeralKeys=e.logLocalStaticKeys=e.logger=void 0;var r=o(require_browser2()),t=require_constants9(),n=(init_to_string(),__toCommonJS(to_string_exports));e.logger=(0,r.default)("libp2p:noise");var s;t.DUMP_SESSION_KEYS?s=e.logger:s=()=>{};function u(d){s(`LOCAL_STATIC_PUBLIC_KEY ${(0,n.toString)(d.publicKey,"hex")}`),s(`LOCAL_STATIC_PRIVATE_KEY ${(0,n.toString)(d.privateKey,"hex")}`)}e.logLocalStaticKeys=u;function l(d){d?(s(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,n.toString)(d.publicKey,"hex")}`),s(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,n.toString)(d.privateKey,"hex")}`)):s("Missing local ephemeral keys.")}e.logLocalEphemeralKeys=l;function f(d){s(`REMOTE_STATIC_PUBLIC_KEY ${(0,n.toString)(d,"hex")}`)}e.logRemoteStaticKey=f;function a(d){s(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,n.toString)(d,"hex")}`)}e.logRemoteEphemeralKey=a;function c(d){d.cs1&&d.cs2?(s(`CIPHER_STATE_1 ${d.cs1.n} ${(0,n.toString)(d.cs1.k,"hex")}`),s(`CIPHER_STATE_2 ${d.cs2.n} ${(0,n.toString)(d.cs2.k,"hex")}`)):s("Missing cipher state.")}e.logCipherState=c}}),require_abstract_handshake=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshakes/abstract-handshake.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(p,_,m,v){v===void 0&&(v=m),Object.defineProperty(p,v,{enumerable:!0,get:function(){return _[m]}})}:function(p,_,m,v){v===void 0&&(v=m),p[v]=_[m]}),r=e&&e.__setModuleDefault||(Object.create?function(p,_){Object.defineProperty(p,"default",{enumerable:!0,value:_})}:function(p,_){p.default=_}),t=e&&e.__importStar||function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var m in p)m!=="default"&&Object.prototype.hasOwnProperty.call(p,m)&&o(_,p,m);return r(_,p),_};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractHandshake=e.MAX_NONCE=e.MIN_NONCE=void 0;var n=t(require_x25519()),s=t(require_sha2562()),u=require_chacha20poly1305(),l=(init_equals(),__toCommonJS(equals_exports)),f=(init_concat(),__toCommonJS(concat_exports)),a=(init_src15(),__toCommonJS(src_exports10)),c=require_utils12(),d=require_logger();e.MIN_NONCE=0,e.MAX_NONCE=Number.MAX_SAFE_INTEGER;var h="Cipherstate has reached maximum n, a new handshake must be performed",g=class{encryptWithAd(p,_,m){const v=this.encrypt(p.k,p.n,_,m);return this.setNonce(p,this.incrementNonce(p.n)),v}decryptWithAd(p,_,m){const{plaintext:v,valid:w}=this.decrypt(p.k,p.n,_,m);return this.setNonce(p,this.incrementNonce(p.n)),{plaintext:v,valid:w}}hasKey(p){return!this.isEmptyKey(p.k)}setNonce(p,_){p.n=_}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(p){const _=this.createEmptyKey();return(0,l.equals)(_,p)}incrementNonce(p){return p+1}nonceToBytes(p){const _=new Uint8Array(12);return new DataView(_.buffer,_.byteOffset,_.byteLength).setUint32(4,p,!0),_}encrypt(p,_,m,v){if(_>e.MAX_NONCE)throw new Error(h);const w=this.nonceToBytes(_);return new u.ChaCha20Poly1305(p).seal(w,v,m)}encryptAndHash(p,_){let m;return this.hasKey(p.cs)?m=this.encryptWithAd(p.cs,p.h,_):m=_,this.mixHash(p,m),m}decrypt(p,_,m,v){if(_>e.MAX_NONCE)throw new Error(h);const w=this.nonceToBytes(_),b=new u.ChaCha20Poly1305(p).open(w,v,m);return b?{plaintext:b,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(p,_){let m,v=!0;return this.hasKey(p.cs)?{plaintext:m,valid:v}=this.decryptWithAd(p.cs,p.h,_):m=_,this.mixHash(p,_),{plaintext:m,valid:v}}dh(p,_){try{const m=n.sharedKey(p,_);return m.length===32?m:m.slice(0,32)}catch(m){return(0,d.logger)(m.message),new Uint8Array(32)}}mixHash(p,_){p.h=this.getHash(p.h,_)}getHash(p,_){return s.hash((0,f.concat)([p,_],p.length+_.length))}mixKey(p,_){const[m,v]=(0,c.getHkdf)(p.ck,_);p.cs=this.initializeKey(v),p.ck=m}initializeKey(p){const _=e.MIN_NONCE;return{k:p,n:_}}initializeSymmetric(p){const _=(0,a.fromString)(p,"utf-8"),m=this.hashProtocolName(_),v=m,w=this.createEmptyKey();return{cs:this.initializeKey(w),ck:v,h:m}}hashProtocolName(p){if(p.length<=32){const _=new Uint8Array(32);return _.set(p),_}else return this.getHash(p,new Uint8Array(0))}split(p){const[_,m]=(0,c.getHkdf)(p.ck,new Uint8Array(0)),v=this.initializeKey(_),w=this.initializeKey(m);return{cs1:v,cs2:w}}writeMessageRegular(p,_){const m=this.encryptWithAd(p,new Uint8Array(0),_),v=this.createEmptyKey(),w=new Uint8Array(0);return{ne:v,ns:w,ciphertext:m}}readMessageRegular(p,_){return this.decryptWithAd(p,new Uint8Array(0),_.ciphertext)}};e.AbstractHandshake=g}}),require_xx=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshakes/xx.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.XX=void 0;var o=require_utils12(),r=require_abstract_handshake(),t=class extends r.AbstractHandshake{initializeInitiator(n,s,u,l){const f="Noise_XX_25519_ChaChaPoly_SHA256",a=this.initializeSymmetric(f);this.mixHash(a,n);const c=new Uint8Array(32);return{ss:a,s,rs:u,psk:l,re:c}}initializeResponder(n,s,u,l){const f="Noise_XX_25519_ChaChaPoly_SHA256",a=this.initializeSymmetric(f);this.mixHash(a,n);const c=new Uint8Array(32);return{ss:a,s,rs:u,psk:l,re:c}}writeMessageA(n,s,u){const l=new Uint8Array(0);u!==void 0?n.e=u:n.e=(0,o.generateKeypair)();const f=n.e.publicKey;this.mixHash(n.ss,f);const a=this.encryptAndHash(n.ss,s);return{ne:f,ns:l,ciphertext:a}}writeMessageB(n,s){n.e=(0,o.generateKeypair)();const u=n.e.publicKey;this.mixHash(n.ss,u),this.mixKey(n.ss,this.dh(n.e.privateKey,n.re));const l=n.s.publicKey,f=this.encryptAndHash(n.ss,l);this.mixKey(n.ss,this.dh(n.s.privateKey,n.re));const a=this.encryptAndHash(n.ss,s);return{ne:u,ns:f,ciphertext:a}}writeMessageC(n,s){const u=n.s.publicKey,l=this.encryptAndHash(n.ss,u);this.mixKey(n.ss,this.dh(n.s.privateKey,n.re));const f=this.encryptAndHash(n.ss,s),c={ne:this.createEmptyKey(),ns:l,ciphertext:f},{cs1:d,cs2:h}=this.split(n.ss);return{h:n.ss.h,messageBuffer:c,cs1:d,cs2:h}}readMessageA(n,s){return(0,o.isValidPublicKey)(s.ne)&&(n.re=s.ne),this.mixHash(n.ss,n.re),this.decryptAndHash(n.ss,s.ciphertext)}readMessageB(n,s){if((0,o.isValidPublicKey)(s.ne)&&(n.re=s.ne),this.mixHash(n.ss,n.re),!n.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(n.ss,this.dh(n.e.privateKey,n.re));const{plaintext:u,valid:l}=this.decryptAndHash(n.ss,s.ns);l&&u.length===32&&(0,o.isValidPublicKey)(u)&&(n.rs=u),this.mixKey(n.ss,this.dh(n.e.privateKey,n.rs));const{plaintext:f,valid:a}=this.decryptAndHash(n.ss,s.ciphertext);return{plaintext:f,valid:l&&a}}readMessageC(n,s){const{plaintext:u,valid:l}=this.decryptAndHash(n.ss,s.ns);if(l&&u.length===32&&(0,o.isValidPublicKey)(u)&&(n.rs=u),!n.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(n.ss,this.dh(n.e.privateKey,n.rs));const{plaintext:f,valid:a}=this.decryptAndHash(n.ss,s.ciphertext),{cs1:c,cs2:d}=this.split(n.ss);return{h:n.ss.h,plaintext:f,valid:l&&a,cs1:c,cs2:d}}initSession(n,s,u){const l=this.createEmptyKey(),f=new Uint8Array(32);let a;return n?a=this.initializeInitiator(s,u,f,l):a=this.initializeResponder(s,u,f,l),{hs:a,i:n,mc:0}}sendMessage(n,s,u){let l;if(n.mc===0)l=this.writeMessageA(n.hs,s,u);else if(n.mc===1)l=this.writeMessageB(n.hs,s);else if(n.mc===2){const{h:f,messageBuffer:a,cs1:c,cs2:d}=this.writeMessageC(n.hs,s);l=a,n.h=f,n.cs1=c,n.cs2=d}else if(n.mc>2)if(n.i){if(!n.cs1)throw new Error("CS1 (cipher state) is not defined");l=this.writeMessageRegular(n.cs1,s)}else{if(!n.cs2)throw new Error("CS2 (cipher state) is not defined");l=this.writeMessageRegular(n.cs2,s)}else throw new Error("Session invalid.");return n.mc++,l}recvMessage(n,s){let u=new Uint8Array(0),l=!1;if(n.mc===0)({plaintext:u,valid:l}=this.readMessageA(n.hs,s));else if(n.mc===1)({plaintext:u,valid:l}=this.readMessageB(n.hs,s));else if(n.mc===2){const{h:f,plaintext:a,valid:c,cs1:d,cs2:h}=this.readMessageC(n.hs,s);u=a,l=c,n.h=f,n.cs1=d,n.cs2=h}return n.mc++,{plaintext:u,valid:l}}};e.XX=t}}),require_encoder=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/encoder.js"(e){init_node_globals();var o=e&&e.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0}),e.decode2=e.decode1=e.decode0=e.encode2=e.encode1=e.encode0=e.uint16BEDecode=e.uint16BEEncode=void 0;var r=o(require_BufferList()),t=(init_concat(),__toCommonJS(concat_exports)),n=g=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(g):new Uint8Array(g),s=(g,p,_)=>(p=p||n(2),new DataView(p.buffer,p.byteOffset,p.byteLength).setUint16(_,g,!1),p);e.uint16BEEncode=s,e.uint16BEEncode.bytes=2;var u=g=>{if(g.length<2)throw RangeError("Could not decode int16BE");return g instanceof r.default?g.readUInt16BE(0):new DataView(g.buffer,g.byteOffset,g.byteLength).getUint16(0,!1)};e.uint16BEDecode=u,e.uint16BEDecode.bytes=2;function l(g){return(0,t.concat)([g.ne,g.ciphertext],g.ne.length+g.ciphertext.length)}e.encode0=l;function f(g){return(0,t.concat)([g.ne,g.ns,g.ciphertext],g.ne.length+g.ns.length+g.ciphertext.length)}e.encode1=f;function a(g){return(0,t.concat)([g.ns,g.ciphertext],g.ns.length+g.ciphertext.length)}e.encode2=a;function c(g){if(g.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:g.slice(0,32),ciphertext:g.slice(32,g.length),ns:new Uint8Array(0)}}e.decode0=c;function d(g){if(g.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:g.slice(0,32),ns:g.slice(32,80),ciphertext:g.slice(80,g.length)}}e.decode1=d;function h(g){if(g.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:g.slice(0,48),ciphertext:g.slice(48,g.length)}}e.decode2=h}}),require_handshake_xx=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshake-xx.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.XXHandshake=void 0;var o=require_xx(),r=require_utils12(),t=require_logger(),n=require_encoder(),s=class{constructor(u,l,f,a,c,d,h){this.isInitiator=u,this.payload=l,this.prologue=f,this.staticKeypair=a,this.connection=c,d&&(this.remotePeer=d),this.xx=h!=null?h:new o.XX,this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if((0,t.logLocalStaticKeys)(this.session.hs.s),this.isInitiator){(0,t.logger)("Stage 0 - Initiator starting to send first message.");const u=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP((0,n.encode0)(u)),(0,t.logger)("Stage 0 - Initiator finished sending first message."),(0,t.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,t.logger)("Stage 0 - Responder waiting to receive first message...");const u=(0,n.decode0)((await this.connection.readLP()).slice()),{valid:l}=this.xx.recvMessage(this.session,u);if(!l)throw new Error("xx handshake stage 0 validation fail");(0,t.logger)("Stage 0 - Responder received first message."),(0,t.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){(0,t.logger)("Stage 1 - Initiator waiting to receive first message from responder...");const u=(0,n.decode1)((await this.connection.readLP()).slice()),{plaintext:l,valid:f}=this.xx.recvMessage(this.session,u);if(!f)throw new Error("xx handshake stage 1 validation fail");(0,t.logger)("Stage 1 - Initiator received the message."),(0,t.logRemoteEphemeralKey)(this.session.hs.re),(0,t.logRemoteStaticKey)(this.session.hs.rs),(0,t.logger)("Initiator going to check remote's signature...");try{const a=await(0,r.decodePayload)(l);this.remotePeer=this.remotePeer||await(0,r.getPeerIdFromPayload)(a),this.remotePeer=await(0,r.verifySignedPayload)(u.ns,a,this.remotePeer),this.setRemoteEarlyData(a.data)}catch(a){const c=a;throw new Error(`Error occurred while verifying signed payload: ${c.message}`)}(0,t.logger)("All good with the signature!")}else{(0,t.logger)("Stage 1 - Responder sending out first message with signed payload and static key.");const u=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,n.encode1)(u)),(0,t.logger)("Stage 1 - Responder sent the second handshake message with signed payload."),(0,t.logLocalEphemeralKeys)(this.session.hs.e)}}async finish(){if(this.isInitiator){(0,t.logger)("Stage 2 - Initiator sending third handshake message.");const u=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP((0,n.encode2)(u)),(0,t.logger)("Stage 2 - Initiator sent message with signed payload.")}else{(0,t.logger)("Stage 2 - Responder waiting for third handshake message...");const u=(0,n.decode2)((await this.connection.readLP()).slice()),{plaintext:l,valid:f}=this.xx.recvMessage(this.session,u);if(!f)throw new Error("xx handshake stage 2 validation fail");(0,t.logger)("Stage 2 - Responder received the message, finished handshake.");try{const a=await(0,r.decodePayload)(l);this.remotePeer=this.remotePeer||await(0,r.getPeerIdFromPayload)(a),await(0,r.verifySignedPayload)(this.session.hs.rs,a,this.remotePeer),this.setRemoteEarlyData(a.data)}catch(a){const c=a;throw new Error(`Error occurred while verifying signed payload: ${c.message}`)}}(0,t.logCipherState)(this.session)}encrypt(u,l){const f=this.getCS(l);return this.xx.encryptWithAd(f,new Uint8Array(0),u)}decrypt(u,l){const f=this.getCS(l,!1);return this.xx.decryptWithAd(f,new Uint8Array(0),u)}getRemoteStaticKey(){return this.session.hs.rs}getCS(u,l=!0){if(!u.cs1||!u.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?l?u.cs1:u.cs2:l?u.cs2:u.cs1}setRemoteEarlyData(u){u&&(this.remoteEarlyData=u)}};e.XXHandshake=s}}),require_ik=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshakes/ik.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.IK=void 0;var o=require_utils12(),r=require_abstract_handshake(),t=class extends r.AbstractHandshake{initSession(n,s,u,l){const f=this.createEmptyKey();let a;return n?a=this.initializeInitiator(s,u,l,f):a=this.initializeResponder(s,u,l,f),{hs:a,i:n,mc:0}}sendMessage(n,s){let u;if(n.mc===0)u=this.writeMessageA(n.hs,s);else if(n.mc===1){const{messageBuffer:l,h:f,cs1:a,cs2:c}=this.writeMessageB(n.hs,s);u=l,n.h=f,n.cs1=a,n.cs2=c}else if(n.mc>1)if(n.i){if(!n.cs1)throw new Error("CS1 (cipher state) is not defined");u=this.writeMessageRegular(n.cs1,s)}else{if(!n.cs2)throw new Error("CS2 (cipher state) is not defined");u=this.writeMessageRegular(n.cs2,s)}else throw new Error("Session invalid.");return n.mc++,u}recvMessage(n,s){let u=new Uint8Array(0),l=!1;if(n.mc===0&&({plaintext:u,valid:l}=this.readMessageA(n.hs,s)),n.mc===1){const{plaintext:f,valid:a,h:c,cs1:d,cs2:h}=this.readMessageB(n.hs,s);u=f,l=a,n.h=c,n.cs1=d,n.cs2=h}return n.mc++,{plaintext:u,valid:l}}writeMessageA(n,s){n.e=(0,o.generateKeypair)();const u=n.e.publicKey;this.mixHash(n.ss,u),this.mixKey(n.ss,this.dh(n.e.privateKey,n.rs));const l=n.s.publicKey,f=this.encryptAndHash(n.ss,l);this.mixKey(n.ss,this.dh(n.s.privateKey,n.rs));const a=this.encryptAndHash(n.ss,s);return{ne:u,ns:f,ciphertext:a}}writeMessageB(n,s){n.e=(0,o.generateKeypair)();const u=n.e.publicKey;this.mixHash(n.ss,u),this.mixKey(n.ss,this.dh(n.e.privateKey,n.re)),this.mixKey(n.ss,this.dh(n.e.privateKey,n.rs));const l=this.encryptAndHash(n.ss,s),f=this.createEmptyKey(),a={ne:u,ns:f,ciphertext:l},{cs1:c,cs2:d}=this.split(n.ss);return{messageBuffer:a,cs1:c,cs2:d,h:n.ss.h}}readMessageA(n,s){(0,o.isValidPublicKey)(s.ne)&&(n.re=s.ne),this.mixHash(n.ss,n.re),this.mixKey(n.ss,this.dh(n.s.privateKey,n.re));const{plaintext:u,valid:l}=this.decryptAndHash(n.ss,s.ns);l&&u.length===32&&(0,o.isValidPublicKey)(u)&&(n.rs=u),this.mixKey(n.ss,this.dh(n.s.privateKey,n.rs));const{plaintext:f,valid:a}=this.decryptAndHash(n.ss,s.ciphertext);return{plaintext:f,valid:l&&a}}readMessageB(n,s){if((0,o.isValidPublicKey)(s.ne)&&(n.re=s.ne),this.mixHash(n.ss,n.re),!n.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(n.ss,this.dh(n.e.privateKey,n.re)),this.mixKey(n.ss,this.dh(n.s.privateKey,n.re));const{plaintext:u,valid:l}=this.decryptAndHash(n.ss,s.ciphertext),{cs1:f,cs2:a}=this.split(n.ss);return{h:n.ss.h,valid:l,plaintext:u,cs1:f,cs2:a}}initializeInitiator(n,s,u,l){const f="Noise_IK_25519_ChaChaPoly_SHA256",a=this.initializeSymmetric(f);this.mixHash(a,n),this.mixHash(a,u);const c=new Uint8Array(32);return{ss:a,s,rs:u,re:c,psk:l}}initializeResponder(n,s,u,l){const f="Noise_IK_25519_ChaChaPoly_SHA256",a=this.initializeSymmetric(f);this.mixHash(a,n),this.mixHash(a,s.publicKey);const c=new Uint8Array(32);return{ss:a,s,rs:u,re:c,psk:l}}};e.IK=t}}),require_errors5=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/errors.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.FailedIKError=void 0;var o=class extends Error{constructor(r,t){super(t);this.initialMsg=r,this.name="FailedIKhandshake"}};e.FailedIKError=o}}),require_handshake_ik=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshake-ik.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.IKHandshake=void 0;var o=require_ik(),r=require_encoder(),t=require_utils12(),n=require_errors5(),s=require_logger(),u=class{constructor(l,f,a,c,d,h,g,p){this.isInitiator=l,this.payload=f,this.prologue=a,this.staticKeypair=c,this.connection=d,g&&(this.remotePeer=g),this.ik=p!=null?p:new o.IK,this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,h),this.remoteEarlyData=new Uint8Array}async stage0(){if((0,s.logLocalStaticKeys)(this.session.hs.s),(0,s.logRemoteStaticKey)(this.session.hs.rs),this.isInitiator){(0,s.logger)("IK Stage 0 - Initiator sending message...");const l=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,r.encode1)(l)),(0,s.logger)("IK Stage 0 - Initiator sent message."),(0,s.logLocalEphemeralKeys)(this.session.hs.e)}else{(0,s.logger)("IK Stage 0 - Responder receiving message...");const l=await this.connection.readLP();try{const f=(0,r.decode1)(l.slice()),{plaintext:a,valid:c}=this.ik.recvMessage(this.session,f);if(!c)throw new Error("ik handshake stage 0 decryption validation fail");(0,s.logger)("IK Stage 0 - Responder got message, going to verify payload.");const d=await(0,t.decodePayload)(a);this.remotePeer=this.remotePeer||await(0,t.getPeerIdFromPayload)(d),await(0,t.verifySignedPayload)(this.session.hs.rs,d,this.remotePeer),this.setRemoteEarlyData(d.data),(0,s.logger)("IK Stage 0 - Responder successfully verified payload!"),(0,s.logRemoteEphemeralKey)(this.session.hs.re)}catch(f){const a=f;throw(0,s.logger)("Responder breaking up with IK handshake in stage 0."),new n.FailedIKError(l,`Error occurred while verifying initiator's signed payload: ${a.message}`)}}}async stage1(){if(this.isInitiator){(0,s.logger)("IK Stage 1 - Initiator receiving message...");const l=(await this.connection.readLP()).slice(),f=(0,r.decode0)(l),{plaintext:a,valid:c}=this.ik.recvMessage(this.session,f);(0,s.logger)("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!c)throw new Error("ik stage 1 decryption validation fail");const d=await(0,t.decodePayload)(a);this.remotePeer=this.remotePeer||await(0,t.getPeerIdFromPayload)(d),await(0,t.verifySignedPayload)(f.ns.slice(0,32),d,this.remotePeer),this.setRemoteEarlyData(d.data),(0,s.logger)("IK Stage 1 - Initiator successfully verified payload!"),(0,s.logRemoteEphemeralKey)(this.session.hs.re)}catch(d){const h=d;throw(0,s.logger)("Initiator breaking up with IK handshake in stage 1."),new n.FailedIKError(l,`Error occurred while verifying responder's signed payload: ${h.message}`)}}else{(0,s.logger)("IK Stage 1 - Responder sending message...");const l=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP((0,r.encode0)(l)),(0,s.logger)("IK Stage 1 - Responder sent message..."),(0,s.logLocalEphemeralKeys)(this.session.hs.e)}(0,s.logCipherState)(this.session)}decrypt(l,f){const a=this.getCS(f,!1);return this.ik.decryptWithAd(a,new Uint8Array(0),l)}encrypt(l,f){const a=this.getCS(f);return this.ik.encryptWithAd(a,new Uint8Array(0),l)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(l,f=!0){if(!l.cs1||!l.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?f?l.cs1:l.cs2:f?l.cs2:l.cs1}setRemoteEarlyData(l){l&&(this.remoteEarlyData=l)}};e.IKHandshake=u}}),require_handshake_xx_fallback=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/handshake-xx-fallback.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.XXFallbackHandshake=void 0;var o=require_handshake_xx(),r=require_utils12(),t=require_logger(),n=require_encoder(),s=class extends o.XXHandshake{constructor(u,l,f,a,c,d,h,g,p){super(u,l,f,a,c,h,p);g&&(this.ephemeralKeys=g),this.initialMsg=d}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),(0,t.logger)("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),(0,t.logLocalEphemeralKeys)(this.session.hs.e);else{(0,t.logger)("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const u=(0,n.decode0)(this.initialMsg),{valid:l}=this.xx.recvMessage(this.session,{ne:u.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!l)throw new Error("xx fallback stage 0 decryption validation fail");(0,t.logger)("XX Fallback Stage 0 - Responder used received message from IK."),(0,t.logRemoteEphemeralKey)(this.session.hs.re)}}async exchange(){if(this.isInitiator){const u=(0,n.decode1)(this.initialMsg),{plaintext:l,valid:f}=this.xx.recvMessage(this.session,u);if(!f)throw new Error("xx fallback stage 1 decryption validation fail");(0,t.logger)("XX Fallback Stage 1 - Initiator used received message from IK."),(0,t.logRemoteEphemeralKey)(this.session.hs.re),(0,t.logRemoteStaticKey)(this.session.hs.rs),(0,t.logger)("Initiator going to check remote's signature...");try{const a=await(0,r.decodePayload)(l);this.remotePeer=this.remotePeer||await(0,r.getPeerIdFromPayload)(a),await(0,r.verifySignedPayload)(this.session.hs.rs,a,this.remotePeer),this.setRemoteEarlyData(a.data)}catch(a){const c=a;throw new Error(`Error occurred while verifying signed payload from responder: ${c.message}`)}(0,t.logger)("All good with the signature!")}else(0,t.logger)("XX Fallback Stage 1 - Responder start"),await super.exchange(),(0,t.logger)("XX Fallback Stage 1 - Responder end")}};e.XXFallbackHandshake=s}}),require_crypto2=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/crypto.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.decryptStream=e.encryptStream=void 0;var o=require_constants9();function r(n){return async function*(s){for await(const u of s)for(let l=0;l<u.length;l+=o.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let f=l+o.NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;f>u.length&&(f=u.length),yield n.encrypt(u.slice(l,f),n.session)}}}e.encryptStream=r;function t(n){return async function*(s){for await(const u of s)for(let l=0;l<u.length;l+=o.NOISE_MSG_MAX_LENGTH_BYTES){let f=l+o.NOISE_MSG_MAX_LENGTH_BYTES;f>u.length&&(f=u.length);const{plaintext:a,valid:c}=await n.decrypt(u.slice(l,f),n.session);if(!c)throw new Error("Failed to validate decrypted chunk");yield a}}}e.decryptStream=t}}),require_keycache=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/keycache.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCache=void 0;var o=class{constructor(){this.storage=new Map}store(t,n){this.storage.set(t.id,n)}load(t){var n;return t&&(n=this.storage.get(t.id))!==null&&n!==void 0?n:null}resetStorage(){this.storage.clear()}},r=new o;e.KeyCache=r}}),require_noise=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/noise.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(T,R,S,E){E===void 0&&(E=S),Object.defineProperty(T,E,{enumerable:!0,get:function(){return R[S]}})}:function(T,R,S,E){E===void 0&&(E=S),T[E]=R[S]}),r=e&&e.__setModuleDefault||(Object.create?function(T,R){Object.defineProperty(T,"default",{enumerable:!0,value:R})}:function(T,R){T.default=R}),t=e&&e.__importStar||function(T){if(T&&T.__esModule)return T;var R={};if(T!=null)for(var S in T)S!=="default"&&Object.prototype.hasOwnProperty.call(T,S)&&o(R,T,S);return r(R,T),R},n=e&&e.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;var s=t(require_x25519()),u=n(require_src19()),l=n(require_duplex3()),f=n(require_it_buffer()),a=n(require_it_pipe()),c=require_src11(),d=require_handshake_xx(),h=require_handshake_ik(),g=require_handshake_xx_fallback(),p=require_utils12(),_=require_encoder(),m=require_crypto2(),v=require_keycache(),w=require_logger(),y=require_constants9(),b=class{constructor(T,R){if(this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=R!=null?R:new Uint8Array(0),this.useNoisePipes=!1,T){const S=s.generateKeyPairFromSeed(T);this.staticKeys={privateKey:S.secretKey,publicKey:S.publicKey}}else this.staticKeys=(0,p.generateKeypair)()}async secureOutbound(T,R,S){const E=(0,u.default)(R,{lengthEncoder:_.uint16BEEncode,lengthDecoder:_.uint16BEDecode,maxDataLength:y.NOISE_MSG_MAX_LENGTH_BYTES}),A=await this.performHandshake({connection:E,isInitiator:!0,localPeer:T,remotePeer:S});return{conn:await this.createSecureConnection(E,A),remoteEarlyData:A.remoteEarlyData,remotePeer:A.remotePeer}}async secureInbound(T,R,S){const E=(0,u.default)(R,{lengthEncoder:_.uint16BEEncode,lengthDecoder:_.uint16BEDecode,maxDataLength:y.NOISE_MSG_MAX_LENGTH_BYTES}),A=await this.performHandshake({connection:E,isInitiator:!1,localPeer:T,remotePeer:S});return{conn:await this.createSecureConnection(E,A),remoteEarlyData:A.remoteEarlyData,remotePeer:A.remotePeer}}async performHandshake(T){var R;const S=await(0,p.getPayload)(T.localPeer,this.staticKeys.publicKey,this.earlyData);let E=this.useNoisePipes;if(T.isInitiator&&v.KeyCache.load(T.remotePeer)===null&&(E=!1),E){const{remotePeer:A,connection:C,isInitiator:I}=T,P=new h.IKHandshake(I,S,this.prologue,this.staticKeys,C,(R=v.KeyCache.load(T.remotePeer))!==null&&R!==void 0?R:new Uint8Array(32),A);try{return await this.performIKHandshake(P)}catch(O){let k;return T.isInitiator&&(k=P.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(T,S,O.initialMsg,k)}}else return await this.performXXHandshake(T,S)}async performXXFallbackHandshake(T,R,S,E){const{isInitiator:A,remotePeer:C,connection:I}=T,P=new g.XXFallbackHandshake(A,R,this.prologue,this.staticKeys,I,S,C,E);try{await P.propose(),await P.exchange(),await P.finish()}catch(O){(0,w.logger)(O);const k=O;throw new Error(`Error occurred during XX Fallback handshake: ${k.message}`)}return P}async performXXHandshake(T,R){const{isInitiator:S,remotePeer:E,connection:A}=T,C=new d.XXHandshake(S,R,this.prologue,this.staticKeys,A,E);try{await C.propose(),await C.exchange(),await C.finish(),this.useNoisePipes&&C.remotePeer&&v.KeyCache.store(C.remotePeer,C.getRemoteStaticKey())}catch(I){const P=I;throw new Error(`Error occurred during XX handshake: ${P.message}`)}return C}async performIKHandshake(T){return await T.stage0(),await T.stage1(),T}async createSecureConnection(T,R){const[S,E]=(0,l.default)(),A=T.unwrap();return await(0,a.default)(S,f.default,(0,m.encryptStream)(R),(0,c.encode)({lengthEncoder:_.uint16BEEncode}),A,(0,c.decode)({lengthDecoder:_.uint16BEDecode}),f.default,(0,m.decryptStream)(R),S),E}};e.Noise=b}}),require_src20=__commonJS({"node_modules/@chainsafe/libp2p-noise/dist/src/index.js"(e){init_node_globals();var o=e&&e.__createBinding||(Object.create?function(n,s,u,l){l===void 0&&(l=u),Object.defineProperty(n,l,{enumerable:!0,get:function(){return s[u]}})}:function(n,s,u,l){l===void 0&&(l=u),n[l]=s[u]}),r=e&&e.__exportStar||function(n,s){for(var u in n)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&o(s,n,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.NOISE=void 0;var t=require_noise();r(require_noise(),e),e.NOISE=new t.Noise}}),require_k_bucket=__commonJS({"node_modules/k-bucket/index.js"(e,o){init_node_globals();var r=require_browser8(),{EventEmitter:t}=require_events();function n(f,a){if(f===a)return!0;if(f.length!==a.length)return!1;for(let c=0,d=f.length;c<d;++c)if(f[c]!==a[c])return!1;return!0}function s(){return{contacts:[],dontSplit:!1,left:null,right:null}}function u(f,a){if(!(a instanceof Uint8Array))throw new TypeError(f+" is not a Uint8Array")}var l=class extends t{constructor(f={}){super();this.localNodeId=f.localNodeId||r(20),this.numberOfNodesPerKBucket=f.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=f.numberOfNodesToPing||3,this.distance=f.distance||l.distance,this.arbiter=f.arbiter||l.arbiter,this.metadata=Object.assign({},f.metadata),u("option.localNodeId as parameter 1",this.localNodeId),this.root=s()}static arbiter(f,a){return f.vectorClock>a.vectorClock?f:a}static distance(f,a){let c=0,d=0;const h=Math.min(f.length,a.length),g=Math.max(f.length,a.length);for(;d<h;++d)c=c*256+(f[d]^a[d]);for(;d<g;++d)c=c*256+255;return c}add(f){u("contact.id",(f||{}).id);let a=0,c=this.root;for(;c.contacts===null;)c=this._determineNode(c,f.id,a++);const d=this._indexOf(c,f.id);return d>=0?(this._update(c,d,f),this):c.contacts.length<this.numberOfNodesPerKBucket?(c.contacts.push(f),this.emit("added",f),this):c.dontSplit?(this.emit("ping",c.contacts.slice(0,this.numberOfNodesToPing),f),this):(this._split(c,a),this.add(f))}closest(f,a=1/0){if(u("id",f),!Number.isInteger(a)&&a!==1/0||a<=0)throw new TypeError("n is not positive number");let c=[];for(let d=[this.root],h=0;d.length>0&&c.length<a;){const g=d.pop();if(g.contacts===null){const p=this._determineNode(g,f,h++);d.push(g.left===p?g.right:g.left),d.push(p)}else c=c.concat(g.contacts)}return c.map(d=>[this.distance(d.id,f),d]).sort((d,h)=>d[0]-h[0]).slice(0,a).map(d=>d[1])}count(){let f=0;for(const a=[this.root];a.length>0;){const c=a.pop();c.contacts===null?a.push(c.right,c.left):f+=c.contacts.length}return f}_determineNode(f,a,c){const d=c>>3,h=c%8;return a.length<=d&&h!==0?f.left:a[d]&1<<7-h?f.right:f.left}get(f){u("id",f);let a=0,c=this.root;for(;c.contacts===null;)c=this._determineNode(c,f,a++);const d=this._indexOf(c,f);return d>=0?c.contacts[d]:null}_indexOf(f,a){for(let c=0;c<f.contacts.length;++c)if(n(f.contacts[c].id,a))return c;return-1}remove(f){u("the id as parameter 1",f);let a=0,c=this.root;for(;c.contacts===null;)c=this._determineNode(c,f,a++);const d=this._indexOf(c,f);if(d>=0){const h=c.contacts.splice(d,1)[0];this.emit("removed",h)}return this}_split(f,a){f.left=s(),f.right=s();for(const h of f.contacts)this._determineNode(f,h.id,a).contacts.push(h);f.contacts=null;const c=this._determineNode(f,this.localNodeId,a),d=f.left===c?f.right:f.left;d.dontSplit=!0}toArray(){let f=[];for(const a=[this.root];a.length>0;){const c=a.pop();c.contacts===null?a.push(c.right,c.left):f=f.concat(c.contacts)}return f}*toIterable(){for(const f=[this.root];f.length>0;){const a=f.pop();a.contacts===null?f.push(a.right,a.left):yield*a.contacts}}_update(f,a,c){if(!n(f.contacts[a].id,c.id))throw new Error("wrong index for _update");const d=f.contacts[a],h=this.arbiter(d,c);h===d&&d!==c||(f.contacts.splice(a,1),f.contacts.push(h),this.emit("updated",d,h))}};o.exports=l}}),require_netmask=__commonJS({"node_modules/netmask/lib/netmask.js"(e){init_node_globals(),function(){var o,r,t,n,s,u,l,f;f=function(a){var c,d,h,g;return c=(a&255<<24)>>>24,d=(a&255<<16)>>>16,h=(a&255<<8)>>>8,g=a&255,[c,d,h,g].join(".")},l=function(a){var c,d,h,g,p,_;for(c=[],h=g=0;g<=3&&a.length!==0;h=++g){if(h>0){if(a[0]!==".")throw new Error("Invalid IP");a=a.substring(1)}_=r(a),p=_[0],d=_[1],a=a.substring(d),c.push(p)}if(a.length!==0)throw new Error("Invalid IP");switch(c.length){case 1:if(c[0]>4294967295)throw new Error("Invalid IP");return c[0]>>>0;case 2:if(c[0]>255||c[1]>16777215)throw new Error("Invalid IP");return(c[0]<<24|c[1])>>>0;case 3:if(c[0]>255||c[1]>255||c[2]>65535)throw new Error("Invalid IP");return(c[0]<<24|c[1]<<16|c[2])>>>0;case 4:if(c[0]>255||c[1]>255||c[2]>255||c[3]>255)throw new Error("Invalid IP");return(c[0]<<24|c[1]<<16|c[2]<<8|c[3])>>>0;default:throw new Error("Invalid IP")}},t=function(a){return a.charCodeAt(0)},n=t("0"),u=t("a"),s=t("A"),r=function(a){var c,d,h,g,p;for(g=0,c=10,d="9",h=0,a.length>1&&a[h]==="0"&&(a[h+1]==="x"||a[h+1]==="X"?(h+=2,c=16):"0"<=a[h+1]&&a[h+1]<="9"&&(h++,c=8,d="7")),p=h;h<a.length;){if("0"<=a[h]&&a[h]<=d)g=g*c+(t(a[h])-n)>>>0;else if(c===16)if("a"<=a[h]&&a[h]<="f")g=g*c+(10+t(a[h])-u)>>>0;else if("A"<=a[h]&&a[h]<="F")g=g*c+(10+t(a[h])-s)>>>0;else break;else break;if(g>4294967295)throw new Error("too large");h++}if(h===p)throw new Error("empty octet");return[g,h]},o=function(){function a(c,d){var h,g,p;if(typeof c!="string")throw new Error("Missing `net' parameter");if(d||(p=c.split("/",2),c=p[0],d=p[1]),d||(d=32),typeof d=="string"&&d.indexOf(".")>-1){try{this.maskLong=l(d)}catch{throw new Error("Invalid mask: "+d)}for(h=g=32;g>=0;h=--g)if(this.maskLong===4294967295<<32-h>>>0){this.bitmask=h;break}}else if(d||d===0)this.bitmask=parseInt(d,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(l(c)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+c)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+d);this.size=Math.pow(2,32-this.bitmask),this.base=f(this.netLong),this.mask=f(this.maskLong),this.hostmask=f(~this.maskLong),this.first=this.bitmask<=30?f(this.netLong+1):this.base,this.last=this.bitmask<=30?f(this.netLong+this.size-2):f(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?f(this.netLong+this.size-1):void 0}return a.prototype.contains=function(c){return typeof c=="string"&&(c.indexOf("/")>0||c.split(".").length!==4)&&(c=new a(c)),c instanceof a?this.contains(c.base)&&this.contains(c.broadcast||c.last):(l(c)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},a.prototype.next=function(c){return c==null&&(c=1),new a(f(this.netLong+this.size*c),this.mask)},a.prototype.forEach=function(c){var d,h,g;for(g=l(this.first),h=l(this.last),d=0;g<=h;)c(f(g),g,d),d++,g++},a.prototype.toString=function(){return this.base+"/"+this.bitmask},a}(),e.ip2long=l,e.long2ip=f,e.Netmask=o}.call(e)}}),require_ipaddr=__commonJS({"node_modules/ipaddr.js/lib/ipaddr.js"(e,o){init_node_globals(),function(r){const t="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},s=new RegExp("^0[0-7]+$","i"),u=new RegExp("^0x[a-f0-9]+$","i"),l="%[0-9a-z]{1,}",f="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(l,"i"),native:new RegExp(`^(::)?(${f})?([0-9a-f]+)?(::)?(${l})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${l})?)$`,"i"),transitional:new RegExp(`^((?:${f})|(?:::)(?:${f})?)${t}\\.${t}\\.${t}\\.${t}(${l})?$`,"i")};function c(_,m){if(_.indexOf("::")!==_.lastIndexOf("::"))return null;let v=0,w=-1,y=(_.match(a.zoneIndex)||[])[0],b,T;for(y&&(y=y.substring(1),_=_.replace(/%.+$/,""));(w=_.indexOf(":",w+1))>=0;)v++;if(_.substr(0,2)==="::"&&v--,_.substr(-2,2)==="::"&&v--,v>m)return null;for(T=m-v,b=":";T--;)b+="0:";return _=_.replace("::",b),_[0]===":"&&(_=_.slice(1)),_[_.length-1]===":"&&(_=_.slice(0,-1)),m=function(){const R=_.split(":"),S=[];for(let E=0;E<R.length;E++)S.push(parseInt(R[E],16));return S}(),{parts:m,zoneId:y}}function d(_,m,v,w){if(_.length!==m.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let y=0,b;for(;w>0;){if(b=v-w,b<0&&(b=0),_[y]>>b!=m[y]>>b)return!1;w-=v,y+=1}return!0}function h(_){if(u.test(_))return parseInt(_,16);if(_[0]==="0"&&!isNaN(parseInt(_[1],10))){if(s.test(_))return parseInt(_,8);throw new Error(`ipaddr: cannot parse ${_} as octal`)}return parseInt(_,10)}function g(_,m){for(;_.length<m;)_=`0${_}`;return _}const p={};p.IPv4=function(){function _(m){if(m.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let v,w;for(v=0;v<m.length;v++)if(w=m[v],!(0<=w&&w<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=m}return _.prototype.SpecialRanges={unspecified:[[new _([0,0,0,0]),8]],broadcast:[[new _([255,255,255,255]),32]],multicast:[[new _([224,0,0,0]),4]],linkLocal:[[new _([169,254,0,0]),16]],loopback:[[new _([127,0,0,0]),8]],carrierGradeNat:[[new _([100,64,0,0]),10]],private:[[new _([10,0,0,0]),8],[new _([172,16,0,0]),12],[new _([192,168,0,0]),16]],reserved:[[new _([192,0,0,0]),24],[new _([192,0,2,0]),24],[new _([192,88,99,0]),24],[new _([198,51,100,0]),24],[new _([203,0,113,0]),24],[new _([240,0,0,0]),4]]},_.prototype.kind=function(){return"ipv4"},_.prototype.match=function(m,v){let w;if(v===void 0&&(w=m,m=w[0],v=w[1]),m.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return d(this.octets,m.octets,8,v)},_.prototype.prefixLengthFromSubnetMask=function(){let m=0,v=!1;const w={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let y,b,T;for(y=3;y>=0;y-=1)if(b=this.octets[y],b in w){if(T=w[b],v&&T!==0)return null;T!==8&&(v=!0),m+=T}else return null;return 32-m},_.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},_.prototype.toByteArray=function(){return this.octets.slice(0)},_.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},_.prototype.toNormalizedString=function(){return this.toString()},_.prototype.toString=function(){return this.octets.join(".")},_}(),p.IPv4.broadcastAddressFromCIDR=function(_){try{const m=this.parseCIDR(_),v=m[0].toByteArray(),w=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),y=[];let b=0;for(;b<4;)y.push(parseInt(v[b],10)|parseInt(w[b],10)^255),b++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(_){return this.parser(_)!==null},p.IPv4.isValid=function(_){try{return new this(this.parser(_)),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(_){return!!(p.IPv4.isValid(_)&&_.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(_){let m,v,w,y,b;try{for(m=this.parseCIDR(_),w=m[0].toByteArray(),b=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),y=[],v=0;v<4;)y.push(parseInt(w[v],10)&parseInt(b[v],10)),v++;return new this(y)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(_){const m=this.parser(_);if(m===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(m)},p.IPv4.parseCIDR=function(_){let m;if(m=_.match(/^(.+)\/(\d+)$/)){const v=parseInt(m[2]);if(v>=0&&v<=32){const w=[this.parse(m[1]),v];return Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(_){let m,v,w;if(m=_.match(n.fourOctet))return function(){const y=m.slice(1,6),b=[];for(let T=0;T<y.length;T++)v=y[T],b.push(h(v));return b}();if(m=_.match(n.longValue)){if(w=h(m[1]),w>4294967295||w<0)throw new Error("ipaddr: address outside defined range");return function(){const y=[];let b;for(b=0;b<=24;b+=8)y.push(w>>b&255);return y}().reverse()}else return(m=_.match(n.twoOctet))?function(){const y=m.slice(1,4),b=[];if(w=h(y[1]),w>16777215||w<0)throw new Error("ipaddr: address outside defined range");return b.push(h(y[0])),b.push(w>>16&255),b.push(w>>8&255),b.push(w&255),b}():(m=_.match(n.threeOctet))?function(){const y=m.slice(1,5),b=[];if(w=h(y[2]),w>65535||w<0)throw new Error("ipaddr: address outside defined range");return b.push(h(y[0])),b.push(h(y[1])),b.push(w>>8&255),b.push(w&255),b}():null},p.IPv4.subnetMaskFromPrefixLength=function(_){if(_=parseInt(_),_<0||_>32)throw new Error("ipaddr: invalid IPv4 prefix length");const m=[0,0,0,0];let v=0;const w=Math.floor(_/8);for(;v<w;)m[v]=255,v++;return w<4&&(m[w]=Math.pow(2,_%8)-1<<8-_%8),new this(m)},p.IPv6=function(){function _(m,v){let w,y;if(m.length===16)for(this.parts=[],w=0;w<=14;w+=2)this.parts.push(m[w]<<8|m[w+1]);else if(m.length===8)this.parts=m;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(w=0;w<this.parts.length;w++)if(y=this.parts[w],!(0<=y&&y<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");v&&(this.zoneId=v)}return _.prototype.SpecialRanges={unspecified:[new _([0,0,0,0,0,0,0,0]),128],linkLocal:[new _([65152,0,0,0,0,0,0,0]),10],multicast:[new _([65280,0,0,0,0,0,0,0]),8],loopback:[new _([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new _([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new _([0,0,0,0,0,65535,0,0]),96],rfc6145:[new _([0,0,0,0,65535,0,0,0]),96],rfc6052:[new _([100,65435,0,0,0,0,0,0]),96],"6to4":[new _([8194,0,0,0,0,0,0,0]),16],teredo:[new _([8193,0,0,0,0,0,0,0]),32],reserved:[[new _([8193,3512,0,0,0,0,0,0]),32]]},_.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},_.prototype.kind=function(){return"ipv6"},_.prototype.match=function(m,v){let w;if(v===void 0&&(w=m,m=w[0],v=w[1]),m.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return d(this.parts,m.parts,16,v)},_.prototype.prefixLengthFromSubnetMask=function(){let m=0,v=!1;const w={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let y,b;for(let T=7;T>=0;T-=1)if(y=this.parts[T],y in w){if(b=w[y],v&&b!==0)return null;b!==16&&(v=!0),m+=b}else return null;return 128-m},_.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},_.prototype.toByteArray=function(){let m;const v=[],w=this.parts;for(let y=0;y<w.length;y++)m=w[y],v.push(m>>8),v.push(m&255);return v},_.prototype.toFixedLengthString=function(){const m=function(){const w=[];for(let y=0;y<this.parts.length;y++)w.push(g(this.parts[y].toString(16),4));return w}.call(this).join(":");let v="";return this.zoneId&&(v=`%${this.zoneId}`),m+v},_.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const m=this.parts.slice(-2),v=m[0],w=m[1];return new p.IPv4([v>>8,v&255,w>>8,w&255])},_.prototype.toNormalizedString=function(){const m=function(){const w=[];for(let y=0;y<this.parts.length;y++)w.push(this.parts[y].toString(16));return w}.call(this).join(":");let v="";return this.zoneId&&(v=`%${this.zoneId}`),m+v},_.prototype.toRFC5952String=function(){const m=/((^|:)(0(:|$)){2,})/g,v=this.toNormalizedString();let w=0,y=-1,b;for(;b=m.exec(v);)b[0].length>y&&(w=b.index,y=b[0].length);return y<0?v:`${v.substring(0,w)}::${v.substring(w+y)}`},_.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},_}(),p.IPv6.broadcastAddressFromCIDR=function(_){try{const m=this.parseCIDR(_),v=m[0].toByteArray(),w=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),y=[];let b=0;for(;b<16;)y.push(parseInt(v[b],10)|parseInt(w[b],10)^255),b++;return new this(y)}catch(m){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${m})`)}},p.IPv6.isIPv6=function(_){return this.parser(_)!==null},p.IPv6.isValid=function(_){if(typeof _=="string"&&_.indexOf(":")===-1)return!1;try{const m=this.parser(_);return new this(m.parts,m.zoneId),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(_){let m,v,w,y,b;try{for(m=this.parseCIDR(_),w=m[0].toByteArray(),b=this.subnetMaskFromPrefixLength(m[1]).toByteArray(),y=[],v=0;v<16;)y.push(parseInt(w[v],10)&parseInt(b[v],10)),v++;return new this(y)}catch(T){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${T})`)}},p.IPv6.parse=function(_){const m=this.parser(_);if(m.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(m.parts,m.zoneId)},p.IPv6.parseCIDR=function(_){let m,v,w;if((v=_.match(/^(.+)\/(\d+)$/))&&(m=parseInt(v[2]),m>=0&&m<=128))return w=[this.parse(v[1]),m],Object.defineProperty(w,"toString",{value:function(){return this.join("/")}}),w;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(_){let m,v,w,y,b,T;if(w=_.match(a.deprecatedTransitional))return this.parser(`::ffff:${w[1]}`);if(a.native.test(_))return c(_,8);if((w=_.match(a.transitional))&&(T=w[6]||"",m=c(w[1].slice(0,-1)+T,6),m.parts)){for(b=[parseInt(w[2]),parseInt(w[3]),parseInt(w[4]),parseInt(w[5])],v=0;v<b.length;v++)if(y=b[v],!(0<=y&&y<=255))return null;return m.parts.push(b[0]<<8|b[1]),m.parts.push(b[2]<<8|b[3]),{parts:m.parts,zoneId:m.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(_){if(_=parseInt(_),_<0||_>128)throw new Error("ipaddr: invalid IPv6 prefix length");const m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let v=0;const w=Math.floor(_/8);for(;v<w;)m[v]=255,v++;return w<16&&(m[w]=Math.pow(2,_%8)-1<<8-_%8),new this(m)},p.fromByteArray=function(_){const m=_.length;if(m===4)return new p.IPv4(_);if(m===16)return new p.IPv6(_);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(_){return p.IPv6.isValid(_)||p.IPv4.isValid(_)},p.parse=function(_){if(p.IPv6.isValid(_))return p.IPv6.parse(_);if(p.IPv4.isValid(_))return p.IPv4.parse(_);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(_){try{return p.IPv6.parseCIDR(_)}catch{try{return p.IPv4.parseCIDR(_)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(_){const m=this.parse(_);return m.kind()==="ipv6"&&m.isIPv4MappedAddress()?m.toIPv4Address():m},p.subnetMatch=function(_,m,v){let w,y,b,T;v==null&&(v="unicast");for(y in m)if(Object.prototype.hasOwnProperty.call(m,y)){for(b=m[y],b[0]&&!(b[0]instanceof Array)&&(b=[b]),w=0;w<b.length;w++)if(T=b[w],_.kind()===T[0].kind()&&_.match.apply(_,T))return y}return v},typeof o!="undefined"&&o.exports?o.exports=p:r.ipaddr=p}(e)}}),require_lib6=__commonJS({"node_modules/private-ip/lib/index.js"(e){init_node_globals();var o=e&&e.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var r=require_netmask(),t=o(require_ip_regex()),n=o(require_is_ip()),s=require_ipaddr(),u=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],l=u.map(c=>new r.Netmask(c));function f(c){for(let d of l)if(d.contains(c))return!0;return!1}function a(c){return/^::$/.test(c)||/^::1$/.test(c)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(c)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(c)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(c)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(c)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(c)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(c)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(c)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(c)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(c)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(c)||/^ff([0-9a-fA-F]{2,2}):/i.test(c)}e.default=c=>{if(s.isValid(c)){const d=s.parse(c);if(d.kind()==="ipv4")return f(d.toNormalizedString());if(d.kind()==="ipv6")return a(c)}else if(n.default(c)&&t.default.v6().test(c))return a(c)}}}),require_private_ip=__commonJS({"node_modules/private-ip/index.js"(e,o){init_node_globals(),o.exports=require_lib6().default}}),require_utils13=__commonJS({"node_modules/libp2p-kad-dht/src/utils.js"(e,o){init_node_globals();var r=require_browser2(),{sha256:t}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),{base58btc:n}=(init_base58(),__toCommonJS(base58_exports)),{base32:s}=(init_base32(),__toCommonJS(base32_exports)),{Key:u}=(init_key(),__toCommonJS(key_exports)),{Record:l}=require_src7(),f=require_src5(),{fromString:a}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:c}=(init_to_string(),__toCommonJS(to_string_exports)),{concat:d}=(init_concat(),__toCommonJS(concat_exports)),h=require_private_ip(),g=a("/pk/");function p({id:A,multiaddrs:C}){return{id:A,multiaddrs:C.filter(I=>{const[[P,O]]=I.stringTuples();return P!==4&&P!==6?!1:!h(O)})}}function _({id:A,multiaddrs:C}){return{id:A,multiaddrs:C.filter(I=>{const[[P,O]]=I.stringTuples();return P!==4&&P!==6?!1:h(O)})}}var m=async A=>(await t.digest(A)).digest,v=async A=>(await t.digest(A.id)).digest,w=A=>new u("/"+c(A,"base32"),!1),y=A=>d([g,A.id]),b=A=>c(A.slice(0,4))==="/pk/",T=A=>c(A.slice(0,4))==="/ipns/",R=A=>new f(A.slice(4)),S=(A,C)=>{const I=new Date;return new l(A,C,I).serialize()},E=A=>(r.formatters.b=I=>n.baseEncode(I),r.formatters.t=I=>s.baseEncode(I),r.formatters.p=I=>I.toB58String(),Object.assign(r(A),{error:r(`${A}:error`)}));o.exports={removePrivateAddresses:p,removePublicAddresses:_,convertBuffer:m,convertPeerId:v,bufferToKey:w,keyForPublicKey:y,isPublicKeyKey:b,isIPNSKey:T,fromPublicKeyKey:R,createPutRecord:S,logger:E}}}),require_constants10=__commonJS({"node_modules/libp2p-kad-dht/src/constants.js"(e){init_node_globals();var o=e.second=1e3,r=e.minute=60*o,t=e.hour=60*r;e.MAX_RECORD_AGE=36*t,e.PROTOCOL_DHT="/kad/1.0.0",e.RECORD_KEY_PREFIX="/dht/record",e.PROVIDER_KEY_PREFIX="/dht/provider",e.PROVIDERS_LRU_CACHE_SIZE=256,e.PROVIDERS_VALIDITY=24*t,e.PROVIDERS_CLEANUP_INTERVAL=t,e.READ_MESSAGE_TIMEOUT=10*o,e.GET_MANY_RECORD_COUNT=16,e.K=20,e.ALPHA=3,e.QUERY_SELF_INTERVAL=Number(5*r),e.QUERY_SELF_TIMEOUT=Number(30*o),e.TABLE_REFRESH_INTERVAL=Number(5*r),e.TABLE_REFRESH_QUERY_TIMEOUT=Number(30*o),e.DEFAULT_QUERY_TIMEOUT=Number(30*o)}}),require_routing_table=__commonJS({"node_modules/libp2p-kad-dht/src/routing-table/index.js"(e,o){init_node_globals();var r=require_k_bucket(),t=require_utils13(),{default:n}=require_dist(),{PROTOCOL_DHT:s}=require_constants10(),{TimeoutController:u}=require_timeout_abort_controller(),l="routing-table-size",f=class{constructor({peerId:a,dialer:c,kBucketSize:d,pingTimeout:h,lan:g,metrics:p}){this._log=t.logger(`libp2p:kad-dht:${g?"lan":"wan"}:routing-table`),this._peerId=a,this._dialer=c,this._kBucketSize=d||20,this._pingTimeout=h||1e4,this._lan=g,this._metrics=p,this.kb,this.commonPrefixLengthRefreshedAt=[],this._onPing=this._onPing.bind(this),this._pingQueue=new n({concurrency:1}),this._running=!1}async start(){this._running=!0,this.kb=new r({localNodeId:await t.convertPeerId(this._peerId),numberOfNodesPerKBucket:this._kBucketSize,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)}async stop(){this._running=!1,this._pingQueue.clear()}_onPing(a,c){this._pingQueue.add(async()=>{if(!this._running)return;let d=0;try{await Promise.all(a.map(async h=>{let g;try{g=new u(this._pingTimeout),this._log(`pinging old contact ${h.peer}`);const{stream:p}=await this._dialer.dialProtocol(h.peer,s,{signal:g.signal});await p.close(),d++}catch(p){this._running&&(this._log.error("could not ping peer %p",h.peer,p),this._log(`evicting old contact after ping failed ${h.peer}`),this.kb.remove(h.id))}finally{g&&g.clear(),this._metrics&&this._metrics.updateComponentMetric({component:`kad-dht-${this._lan?"lan":"wan"}`,metric:l,value:this.size})}})),this._running&&d<a.length&&(this._log(`adding new contact ${c.peer}`),this.kb.add(c))}catch(h){this._log.error("could not process k-bucket ping event",h)}})}get size(){return this.kb.count()}async find(a){const c=await t.convertPeerId(a),d=this.closestPeer(c);if(d&&a.equals(d))return d}closestPeer(a){const c=this.closestPeers(a,1);if(c.length>0)return c[0]}closestPeers(a,c=this._kBucketSize){return this.kb.closest(a,c).map(h=>h.peer)}async add(a){const c=await t.convertPeerId(a);this.kb.add({id:c,peer:a}),this._log("added %p with kad id %b",a,c),this._metrics&&this._metrics.updateComponentMetric({component:`kad-dht-${this._lan?"lan":"wan"}`,metric:l,value:this.size})}async remove(a){const c=await t.convertPeerId(a);this.kb.remove(c),this._metrics&&this._metrics.updateComponentMetric({component:`kad-dht-${this._lan?"lan":"wan"}`,metric:l,value:this.size})}};o.exports.RoutingTable=f}}),require_generated_prefix_list_browser=__commonJS({"node_modules/libp2p-kad-dht/src/routing-table/generated-prefix-list-browser.json"(e,o){o.exports=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782]}}),require_refresh=__commonJS({"node_modules/libp2p-kad-dht/src/routing-table/refresh.js"(e,o){init_node_globals();var{xor:r}=(init_xor(),__toCommonJS(xor_exports)),t=require_generated_prefix_list_browser(),{sha256:n}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports)),s=require_src6(),u=require_src5(),l=require_utils13(),f=require_it_length(),{TimeoutController:a}=require_timeout_abort_controller(),{TABLE_REFRESH_INTERVAL:c,TABLE_REFRESH_QUERY_TIMEOUT:d}=require_constants10(),h=15,g=class{constructor({peerRouting:p,routingTable:_,refreshInterval:m,refreshQueryTimeout:v,lan:w}){this._log=l.logger(`libp2p:kad-dht:${w?"lan":"wan"}:routing-table:refresh`),this._peerRouting=p,this._routingTable=_,this._refreshInterval=m||c,this._refreshQueryTimeout=v||d,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async start(){this._log(`refreshing routing table every ${this._refreshInterval}ms`),await this.refreshTable(!0)}async stop(){this._refreshTimeoutId&&clearTimeout(this._refreshTimeoutId)}async refreshTable(p){this._log("refreshing routing table");const _=this._maxCommonPrefix(),m=this._getTrackedCommonPrefixLengthsForRefresh(_);this._log(`max common prefix length ${_}`),this._log(`tracked CPLs [ ${m.map(v=>v.toISOString()).join(", ")} ]`),await Promise.all(m.map(async(v,w)=>{try{if(await this._refreshCommonPrefixLength(w,v,p===!0),this._numPeersForCpl(_)===0){const y=Math.min(2*(w+1),m.length-1);for(let b=w+1;b<y+1;b++)try{await this._refreshCommonPrefixLength(b,v,p===!0)}catch(T){this._log.error(T)}}}catch(y){this._log.error(y)}})),this._refreshTimeoutId=setTimeout(this.refreshTable,this._refreshInterval),this._refreshTimeoutId.unref&&this._refreshTimeoutId.unref()}async _refreshCommonPrefixLength(p,_,m){if(!m&&_.getTime()>Date.now()-this._refreshInterval){this._log("not running refresh for cpl %s as time since last refresh not above interval",p);return}const v=await this._generateRandomPeerId(p);this._log("starting refreshing cpl %s with key %p (routing table size was %s)",p,v,this._routingTable.kb.count());const w=new a(this._refreshQueryTimeout);try{const y=await f(this._peerRouting.getClosestPeers(v.toBytes(),{signal:w.signal}));this._log(`found ${y} peers that were close to imaginary peer %p`,v),this._log("finished refreshing cpl %s with key %p (routing table size is now %s)",p,v,this._routingTable.kb.count())}finally{w.clear()}}_getTrackedCommonPrefixLengthsForRefresh(p){p>h&&(p=h);const _=[];for(let m=0;m<=p;m++)_[m]=this.commonPrefixLengthRefreshedAt[m]||new Date;return _}async _generateRandomPeerId(p){const _=s.randomBytes(2),m=(_[1]<<8)+_[0],v=await this._makePeerId(this._routingTable.kb.localNodeId,m,p);return u.createFromBytes(v)}async _makePeerId(p,_,m){if(m>h)throw new Error(`Cannot generate peer ID for common prefix length greater than ${h}`);const y=new DataView(p.buffer,p.byteOffset,p.byteLength).getUint16(0,!1)^32768>>m,b=65535<<16-(m+1),T=y&b|_&~b,R=t[T],S=new ArrayBuffer(34),E=new DataView(S,0,S.byteLength);return E.setUint8(0,n.code),E.setUint8(1,32),E.setUint32(2,R,!1),new Uint8Array(E.buffer,E.byteOffset,E.byteLength)}_maxCommonPrefix(){let p=0;for(const _ of this._prefixLengths())_>p&&(p=_);return p}_numPeersForCpl(p){let _=0;for(const m of this._prefixLengths())m===p&&_++;return _}*_prefixLengths(){if(!!this._routingTable.kb)for(const{id:p}of this._routingTable.kb.toIterable()){const _=r(this._routingTable.kb.localNodeId,p);let m=0;for(const v of _)if(v===0)m++;else break;yield m}}};o.exports.RoutingTableRefresh=g}}),require_dht=__commonJS({"node_modules/libp2p-kad-dht/src/message/dht.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-dht-message"]||(r.roots["libp2p-dht-message"]={});u.Record=function(){function l(a){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}l.prototype.key=null,l.prototype.value=null,l.prototype.author=null,l.prototype.signature=null,l.prototype.timeReceived=null;var f;return Object.defineProperty(l.prototype,"_key",{get:s.oneOfGetter(f=["key"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_value",{get:s.oneOfGetter(f=["value"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_author",{get:s.oneOfGetter(f=["author"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_signature",{get:s.oneOfGetter(f=["signature"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_timeReceived",{get:s.oneOfGetter(f=["timeReceived"]),set:s.oneOfSetter(f)}),l.encode=function(c,d){return d||(d=n.create()),c.key!=null&&Object.hasOwnProperty.call(c,"key")&&d.uint32(10).bytes(c.key),c.value!=null&&Object.hasOwnProperty.call(c,"value")&&d.uint32(18).bytes(c.value),c.author!=null&&Object.hasOwnProperty.call(c,"author")&&d.uint32(26).bytes(c.author),c.signature!=null&&Object.hasOwnProperty.call(c,"signature")&&d.uint32(34).bytes(c.signature),c.timeReceived!=null&&Object.hasOwnProperty.call(c,"timeReceived")&&d.uint32(42).string(c.timeReceived),d},l.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.Record;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.key=c.bytes();break;case 2:g.value=c.bytes();break;case 3:g.author=c.bytes();break;case 4:g.signature=c.bytes();break;case 5:g.timeReceived=c.string();break;default:c.skipType(p&7);break}}return g},l.fromObject=function(c){if(c instanceof u.Record)return c;var d=new u.Record;return c.key!=null&&(typeof c.key=="string"?s.base64.decode(c.key,d.key=s.newBuffer(s.base64.length(c.key)),0):c.key.length&&(d.key=c.key)),c.value!=null&&(typeof c.value=="string"?s.base64.decode(c.value,d.value=s.newBuffer(s.base64.length(c.value)),0):c.value.length&&(d.value=c.value)),c.author!=null&&(typeof c.author=="string"?s.base64.decode(c.author,d.author=s.newBuffer(s.base64.length(c.author)),0):c.author.length&&(d.author=c.author)),c.signature!=null&&(typeof c.signature=="string"?s.base64.decode(c.signature,d.signature=s.newBuffer(s.base64.length(c.signature)),0):c.signature.length&&(d.signature=c.signature)),c.timeReceived!=null&&(d.timeReceived=String(c.timeReceived)),d},l.toObject=function(c,d){d||(d={});var h={};return c.key!=null&&c.hasOwnProperty("key")&&(h.key=d.bytes===String?s.base64.encode(c.key,0,c.key.length):d.bytes===Array?Array.prototype.slice.call(c.key):c.key,d.oneofs&&(h._key="key")),c.value!=null&&c.hasOwnProperty("value")&&(h.value=d.bytes===String?s.base64.encode(c.value,0,c.value.length):d.bytes===Array?Array.prototype.slice.call(c.value):c.value,d.oneofs&&(h._value="value")),c.author!=null&&c.hasOwnProperty("author")&&(h.author=d.bytes===String?s.base64.encode(c.author,0,c.author.length):d.bytes===Array?Array.prototype.slice.call(c.author):c.author,d.oneofs&&(h._author="author")),c.signature!=null&&c.hasOwnProperty("signature")&&(h.signature=d.bytes===String?s.base64.encode(c.signature,0,c.signature.length):d.bytes===Array?Array.prototype.slice.call(c.signature):c.signature,d.oneofs&&(h._signature="signature")),c.timeReceived!=null&&c.hasOwnProperty("timeReceived")&&(h.timeReceived=c.timeReceived,d.oneofs&&(h._timeReceived="timeReceived")),h},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),u.Message=function(){function l(a){if(this.closerPeers=[],this.providerPeers=[],a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}l.prototype.type=null,l.prototype.clusterLevelRaw=null,l.prototype.key=null,l.prototype.record=null,l.prototype.closerPeers=s.emptyArray,l.prototype.providerPeers=s.emptyArray;var f;return Object.defineProperty(l.prototype,"_type",{get:s.oneOfGetter(f=["type"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_clusterLevelRaw",{get:s.oneOfGetter(f=["clusterLevelRaw"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_key",{get:s.oneOfGetter(f=["key"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_record",{get:s.oneOfGetter(f=["record"]),set:s.oneOfSetter(f)}),l.encode=function(c,d){if(d||(d=n.create()),c.type!=null&&Object.hasOwnProperty.call(c,"type")&&d.uint32(8).int32(c.type),c.key!=null&&Object.hasOwnProperty.call(c,"key")&&d.uint32(18).bytes(c.key),c.record!=null&&Object.hasOwnProperty.call(c,"record")&&d.uint32(26).bytes(c.record),c.closerPeers!=null&&c.closerPeers.length)for(var h=0;h<c.closerPeers.length;++h)u.Message.Peer.encode(c.closerPeers[h],d.uint32(66).fork()).ldelim();if(c.providerPeers!=null&&c.providerPeers.length)for(var h=0;h<c.providerPeers.length;++h)u.Message.Peer.encode(c.providerPeers[h],d.uint32(74).fork()).ldelim();return c.clusterLevelRaw!=null&&Object.hasOwnProperty.call(c,"clusterLevelRaw")&&d.uint32(80).int32(c.clusterLevelRaw),d},l.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.Message;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.type=c.int32();break;case 10:g.clusterLevelRaw=c.int32();break;case 2:g.key=c.bytes();break;case 3:g.record=c.bytes();break;case 8:g.closerPeers&&g.closerPeers.length||(g.closerPeers=[]),g.closerPeers.push(u.Message.Peer.decode(c,c.uint32()));break;case 9:g.providerPeers&&g.providerPeers.length||(g.providerPeers=[]),g.providerPeers.push(u.Message.Peer.decode(c,c.uint32()));break;default:c.skipType(p&7);break}}return g},l.fromObject=function(c){if(c instanceof u.Message)return c;var d=new u.Message;switch(c.type){case"PUT_VALUE":case 0:d.type=0;break;case"GET_VALUE":case 1:d.type=1;break;case"ADD_PROVIDER":case 2:d.type=2;break;case"GET_PROVIDERS":case 3:d.type=3;break;case"FIND_NODE":case 4:d.type=4;break;case"PING":case 5:d.type=5;break}if(c.clusterLevelRaw!=null&&(d.clusterLevelRaw=c.clusterLevelRaw|0),c.key!=null&&(typeof c.key=="string"?s.base64.decode(c.key,d.key=s.newBuffer(s.base64.length(c.key)),0):c.key.length&&(d.key=c.key)),c.record!=null&&(typeof c.record=="string"?s.base64.decode(c.record,d.record=s.newBuffer(s.base64.length(c.record)),0):c.record.length&&(d.record=c.record)),c.closerPeers){if(!Array.isArray(c.closerPeers))throw TypeError(".Message.closerPeers: array expected");d.closerPeers=[];for(var h=0;h<c.closerPeers.length;++h){if(typeof c.closerPeers[h]!="object")throw TypeError(".Message.closerPeers: object expected");d.closerPeers[h]=u.Message.Peer.fromObject(c.closerPeers[h])}}if(c.providerPeers){if(!Array.isArray(c.providerPeers))throw TypeError(".Message.providerPeers: array expected");d.providerPeers=[];for(var h=0;h<c.providerPeers.length;++h){if(typeof c.providerPeers[h]!="object")throw TypeError(".Message.providerPeers: object expected");d.providerPeers[h]=u.Message.Peer.fromObject(c.providerPeers[h])}}return d},l.toObject=function(c,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.closerPeers=[],h.providerPeers=[]),c.type!=null&&c.hasOwnProperty("type")&&(h.type=d.enums===String?u.Message.MessageType[c.type]:c.type,d.oneofs&&(h._type="type")),c.key!=null&&c.hasOwnProperty("key")&&(h.key=d.bytes===String?s.base64.encode(c.key,0,c.key.length):d.bytes===Array?Array.prototype.slice.call(c.key):c.key,d.oneofs&&(h._key="key")),c.record!=null&&c.hasOwnProperty("record")&&(h.record=d.bytes===String?s.base64.encode(c.record,0,c.record.length):d.bytes===Array?Array.prototype.slice.call(c.record):c.record,d.oneofs&&(h._record="record")),c.closerPeers&&c.closerPeers.length){h.closerPeers=[];for(var g=0;g<c.closerPeers.length;++g)h.closerPeers[g]=u.Message.Peer.toObject(c.closerPeers[g],d)}if(c.providerPeers&&c.providerPeers.length){h.providerPeers=[];for(var g=0;g<c.providerPeers.length;++g)h.providerPeers[g]=u.Message.Peer.toObject(c.providerPeers[g],d)}return c.clusterLevelRaw!=null&&c.hasOwnProperty("clusterLevelRaw")&&(h.clusterLevelRaw=c.clusterLevelRaw,d.oneofs&&(h._clusterLevelRaw="clusterLevelRaw")),h},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.MessageType=function(){var a={},c=Object.create(a);return c[a[0]="PUT_VALUE"]=0,c[a[1]="GET_VALUE"]=1,c[a[2]="ADD_PROVIDER"]=2,c[a[3]="GET_PROVIDERS"]=3,c[a[4]="FIND_NODE"]=4,c[a[5]="PING"]=5,c}(),l.ConnectionType=function(){var a={},c=Object.create(a);return c[a[0]="NOT_CONNECTED"]=0,c[a[1]="CONNECTED"]=1,c[a[2]="CAN_CONNECT"]=2,c[a[3]="CANNOT_CONNECT"]=3,c}(),l.Peer=function(){function a(d){if(this.addrs=[],d)for(var h=Object.keys(d),g=0;g<h.length;++g)d[h[g]]!=null&&(this[h[g]]=d[h[g]])}a.prototype.id=null,a.prototype.addrs=s.emptyArray,a.prototype.connection=null;var c;return Object.defineProperty(a.prototype,"_id",{get:s.oneOfGetter(c=["id"]),set:s.oneOfSetter(c)}),Object.defineProperty(a.prototype,"_connection",{get:s.oneOfGetter(c=["connection"]),set:s.oneOfSetter(c)}),a.encode=function(h,g){if(g||(g=n.create()),h.id!=null&&Object.hasOwnProperty.call(h,"id")&&g.uint32(10).bytes(h.id),h.addrs!=null&&h.addrs.length)for(var p=0;p<h.addrs.length;++p)g.uint32(18).bytes(h.addrs[p]);return h.connection!=null&&Object.hasOwnProperty.call(h,"connection")&&g.uint32(24).int32(h.connection),g},a.decode=function(h,g){h instanceof t||(h=t.create(h));for(var p=g===void 0?h.len:h.pos+g,_=new u.Message.Peer;h.pos<p;){var m=h.uint32();switch(m>>>3){case 1:_.id=h.bytes();break;case 2:_.addrs&&_.addrs.length||(_.addrs=[]),_.addrs.push(h.bytes());break;case 3:_.connection=h.int32();break;default:h.skipType(m&7);break}}return _},a.fromObject=function(h){if(h instanceof u.Message.Peer)return h;var g=new u.Message.Peer;if(h.id!=null&&(typeof h.id=="string"?s.base64.decode(h.id,g.id=s.newBuffer(s.base64.length(h.id)),0):h.id.length&&(g.id=h.id)),h.addrs){if(!Array.isArray(h.addrs))throw TypeError(".Message.Peer.addrs: array expected");g.addrs=[];for(var p=0;p<h.addrs.length;++p)typeof h.addrs[p]=="string"?s.base64.decode(h.addrs[p],g.addrs[p]=s.newBuffer(s.base64.length(h.addrs[p])),0):h.addrs[p].length&&(g.addrs[p]=h.addrs[p])}switch(h.connection){case"NOT_CONNECTED":case 0:g.connection=0;break;case"CONNECTED":case 1:g.connection=1;break;case"CAN_CONNECT":case 2:g.connection=2;break;case"CANNOT_CONNECT":case 3:g.connection=3;break}return g},a.toObject=function(h,g){g||(g={});var p={};if((g.arrays||g.defaults)&&(p.addrs=[]),h.id!=null&&h.hasOwnProperty("id")&&(p.id=g.bytes===String?s.base64.encode(h.id,0,h.id.length):g.bytes===Array?Array.prototype.slice.call(h.id):h.id,g.oneofs&&(p._id="id")),h.addrs&&h.addrs.length){p.addrs=[];for(var _=0;_<h.addrs.length;++_)p.addrs[_]=g.bytes===String?s.base64.encode(h.addrs[_],0,h.addrs[_].length):g.bytes===Array?Array.prototype.slice.call(h.addrs[_]):h.addrs[_]}return h.connection!=null&&h.hasOwnProperty("connection")&&(p.connection=g.enums===String?u.Message.ConnectionType[h.connection]:h.connection,g.oneofs&&(p._connection="connection")),p},a.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},a}(),l}(),o.exports=u}}),require_message=__commonJS({"node_modules/libp2p-kad-dht/src/message/index.js"(e,o){init_node_globals();var r=require_src5(),{Multiaddr:t}=require_src(),{Record:n}=require_src7(),s=require_dht(),u=s.Message.MessageType,l=s.Message.ConnectionType,f=Object.keys(u),a=class{constructor(h,g,p){if(g&&!(g instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=h,this.key=g,this._clusterLevelRaw=p,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const h=this._clusterLevelRaw-1;return h<0?0:h}set clusterLevel(h){this._clusterLevelRaw=h}serialize(){const h={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(c),providerPeers:this.providerPeers.map(c),record:void 0};return this.record&&(this.record instanceof Uint8Array?h.record=this.record:h.record=this.record.serialize()),s.Message.encode(h).finish()}static deserialize(h){const g=s.Message.decode(h),p=new a(g.type||0,g.key||Uint8Array.from([]),g.clusterLevelRaw||0);return p.closerPeers=g.closerPeers.map(d),p.providerPeers=g.providerPeers.map(d),g.record&&g.record.length&&(p.record=n.deserialize(g.record)),p}};a.TYPES=u,a.CONNECTION_TYPES=l;function c(h){return{id:h.id.id,addrs:(h.multiaddrs||[]).map(p=>p.bytes),connection:l.CONNECTED}}function d(h){return{id:new r(h.id),multiaddrs:(h.addrs||[]).map(g=>new t(g))}}o.exports.Message=a,o.exports.MESSAGE_TYPE=u,o.exports.MESSAGE_TYPE_LOOKUP=f}}),require_events2=__commonJS({"node_modules/libp2p-kad-dht/src/query/events.js"(e,o){init_node_globals();var{MESSAGE_TYPE_LOOKUP:r}=require_message(),t=["PUT_VALUE","GET_VALUE","ADD_PROVIDER","GET_PROVIDERS","FIND_NODE","PING"];function n(h){return $e(Re({},h),{name:"SENDING_QUERY",type:0,messageName:r[h.type],messageType:h.type})}function s(h){return $e(Re({},h),{name:"PEER_RESPONSE",type:1,messageName:t[h.messageType],closer:h.closer?h.closer:[],providers:h.providers?h.providers:[]})}function u(h){return $e(Re({},h),{name:"FINAL_PEER",type:2})}function l(h){return $e(Re({},h),{name:"QUERY_ERROR",type:3})}function f(h){return $e(Re({},h),{name:"PROVIDER",type:4})}function a(h){return $e(Re({},h),{name:"VALUE",type:5})}function c(h){return $e(Re({},h),{name:"ADDING_PEER",type:6})}function d(h){return $e(Re({},h),{name:"DIALING_PEER",type:7})}o.exports={sendingQueryEvent:n,peerResponseEvent:s,finalPeerEvent:u,queryErrorEvent:l,providerEvent:f,valueEvent:a,addingPeerEvent:c,dialingPeerEvent:d}}}),require_network=__commonJS({"node_modules/libp2p-kad-dht/src/network.js"(e,o){init_node_globals();var r=require_err_code(),{pipe:t}=require_it_pipe(),n=require_src11(),s=require_it_drain(),u=require_it_first(),{Message:l,MESSAGE_TYPE_LOOKUP:f}=require_message(),a=require_utils13(),{EventEmitter:c}=require_events(),{dialingPeerEvent:d,sendingQueryEvent:h,peerResponseEvent:g,queryErrorEvent:p}=require_events2(),_=class extends c{constructor({dialer:m,protocol:v,lan:w}){super();this._log=a.logger(`libp2p:kad-dht:${w?"lan":"wan"}:network`),this._running=!1,this._dialer=m,this._protocol=v}start(){this._running||(this._running=!0)}stop(){this._running=!1}get isStarted(){return this._running}async*sendRequest(m,v,w={}){if(!!this._running){this._log("sending %s to %p",f[v.type],m);try{yield d({peer:m});const{stream:y}=await this._dialer.dialProtocol(m,this._protocol,w);yield h({to:m,type:v.type});const b=await this._writeReadMessage(y,v.serialize(),w);yield g({from:m,messageType:b.type,closer:b.closerPeers,providers:b.providerPeers,record:b.record})}catch(y){yield p({from:m,error:y})}}}async*sendMessage(m,v,w={}){if(!this._running)return;this._log("sending %s to %p",f[v.type],m),yield d({peer:m});const{stream:y}=await this._dialer.dialProtocol(m,this._protocol,w);yield h({to:m,type:v.type});try{await this._writeMessage(y,v.serialize(),w),yield g({from:m,messageType:v.type})}catch(b){yield p({from:m,error:b})}}async _writeMessage(m,v,w={}){await t([v],n.encode(),m,s)}async _writeReadMessage(m,v,w={}){const y=await t([v],n.encode(),m,n.decode(),async T=>{const R=await u(T);if(R)return R.slice()});if(y.length===0)throw r(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED");const b=l.deserialize(y);return b.closerPeers.forEach(T=>{this.emit("peer",T)}),b.providerPeers.forEach(T=>{this.emit("peer",T)}),b}};o.exports.Network=_}}),require_content_fetching=__commonJS({"node_modules/libp2p-kad-dht/src/content-fetching/index.js"(e,o){init_node_globals();var r=require_err_code(),{equals:t}=(init_equals(),__toCommonJS(equals_exports)),{toString:n}=(init_to_string(),__toCommonJS(to_string_exports)),s=require_src7(),{ALPHA:u}=require_constants10(),l=require_utils13(),f=s.Record,a=require_it_parallel(),c=require_it_map(),{valueEvent:d,queryErrorEvent:h}=require_events2(),{Message:g}=require_message(),{pipe:p}=require_it_pipe(),_=class{constructor({peerId:m,records:v,validators:w,selectors:y,peerRouting:b,queryManager:T,routingTable:R,network:S,lan:E}){this._log=l.logger(`libp2p:kad-dht:${E?"lan":"wan"}:content-fetching`),this._peerId=m,this._records=v,this._validators=w,this._selectors=y,this._peerRouting=b,this._queryManager=T,this._routingTable=R,this._network=S}async putLocal(m,v){return this._records.put(l.bufferToKey(m),v)}async getLocal(m){this._log(`getLocal ${n(m,"base32")}`);const v=l.bufferToKey(m);this._log(`fetching record for key ${v}`);const w=await this._records.get(v);this._log(`found ${v} in local datastore`);const y=f.deserialize(w);return await s.validator.verifyRecord(this._validators,y),y}async*sendCorrectionRecord(m,v,w,y={}){this._log("sendCorrection for %b",m);const b=await l.createPutRecord(m,w);for(const{value:T,from:R}of v){if(t(T,w)){this._log("record was ok");continue}if(this._peerId.equals(R)){try{const A=l.bufferToKey(m);this._log(`Storing corrected record for key ${A}`),await this._records.put(A,b)}catch(A){this._log.error("Failed error correcting self",A)}continue}let S=!1;const E=new g(g.TYPES.PUT_VALUE,m,0);E.record=f.deserialize(b);for await(const A of this._network.sendRequest(R,E,y))A.name==="PEER_RESPONSE"&&A.record&&t(A.record.value,f.deserialize(b).value)&&(S=!0),yield A;S||(yield h({from:R,error:r(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this._log.error("Failed error correcting entry")}}async*put(m,v,w={}){this._log("put key %b value %b",m,v);const y=await l.createPutRecord(m,v),b=l.bufferToKey(m);this._log(`storing record for key ${b}`),await this._records.put(b,y),yield*p(this._peerRouting.getClosestPeers(m,{signal:w.signal}),T=>c(T,R=>async()=>{if(R.name!=="FINAL_PEER")return[R];const S=[],E=new g(g.TYPES.PUT_VALUE,m,0);E.record=f.deserialize(y);for await(const A of this._network.sendRequest(R.peer.id,E,w))S.push(A),A.name==="PEER_RESPONSE"&&(A.record&&t(A.record.value,f.deserialize(y).value)||S.push(h({from:R.peer.id,error:r(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return S}),T=>a(T,{ordered:!1,concurrency:u}),async function*(T){for await(const R of T)yield*R})}async*get(m,v={}){this._log("get %b",m);const w=[];for await(const R of this.getMany(m,v))R.name==="VALUE"&&w.push(R),yield R;if(!w.length)return;const y=w.map(R=>R.value);let b=0;try{b=s.selection.bestRecord(this._selectors,m,y)}catch(R){if(R.code!=="ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")throw R}const T=y[b];if(this._log("GetValue %b %b",m,T),!T)throw r(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(m,w,T,v),yield w[b]}async*getMany(m,v={}){this._log("getMany values for %t",m);try{const R=await this.getLocal(m);yield d({value:R.value,from:this._peerId})}catch(R){this._log("error getting local value for %b",m,R)}const w=await l.convertBuffer(m),y=this._routingTable.closestPeers(w);this._log("found %d peers in routing table",y.length);const b=this,T=async function*({peer:R,signal:S}){for await(const E of b._peerRouting.getValueOrPeers(R,m,{signal:S}))yield E,E.name==="PEER_RESPONSE"&&E.record&&(yield d({from:R,value:E.record.value}))};yield*this._queryManager.run(m,y,T,v)}};o.exports.ContentFetching=_}}),require_content_routing=__commonJS({"node_modules/libp2p-kad-dht/src/content-routing/index.js"(e,o){init_node_globals();var{Message:r}=require_message(),t=require_it_parallel(),n=require_it_map(),{convertBuffer:s,logger:u}=require_utils13(),{ALPHA:l}=require_constants10(),{pipe:f}=require_it_pipe(),{queryErrorEvent:a,peerResponseEvent:c,providerEvent:d}=require_events2(),{Message:{MessageType:h}}=require_dht(),g=class{constructor({peerId:p,network:_,peerRouting:m,queryManager:v,routingTable:w,providers:y,peerStore:b,lan:T}){this._log=u(`libp2p:kad-dht:${T?"lan":"wan"}:content-routing`),this._peerId=p,this._network=_,this._peerRouting=m,this._queryManager=v,this._routingTable=w,this._providers=y,this._peerStore=b}async*provide(p,_,m={}){this._log("provide %s",p),await this._providers.addProvider(p,this._peerId);const v=new r(r.TYPES.ADD_PROVIDER,p.bytes,0);v.providerPeers=[{id:this._peerId,multiaddrs:_}];let w=0;const y=b=>async()=>{if(b.name!=="FINAL_PEER")return[b];const T=[];this._log("putProvider %s to %p",p,b.peer.id);try{this._log("sending provider record for %s to %p",p,b.peer.id);for await(const R of this._network.sendMessage(b.peer.id,v,m))R.name==="PEER_RESPONSE"&&(this._log("sent provider record for %s to %p",p,b.peer.id),w++),T.push(R)}catch(R){this._log.error("error sending provide record to peer %p",b.peer.id,R),T.push(a({from:b.peer.id,error:R}))}return T};yield*f(this._peerRouting.getClosestPeers(p.multihash.bytes,m),b=>n(b,T=>y(T)),b=>t(b,{ordered:!1,concurrency:l}),async function*(b){for await(const T of b)yield*T}),this._log("sent provider records to %d peers",w)}async*findProviders(p,_={maxNumProviders:5}){const m=_.maxNumProviders||this._routingTable._kBucketSize,v=p.multihash.bytes,w=await s(v),y=this;this._log(`findProviders ${p}`);const b=await this._providers.getProviders(p);if(b.length){const S=[];for(const E of b.slice(0,m))S.push({id:E,multiaddrs:(await this._peerStore.addressBook.get(E)||[]).map(A=>A.multiaddr)});yield c({from:this._peerId,messageType:h.GET_PROVIDERS,providers:S}),yield d({from:this._peerId,providers:S})}if(b.length>=m)return;const T=async function*({peer:S,signal:E}){const A=new r(r.TYPES.GET_PROVIDERS,v,0);yield*y._network.sendRequest(S,A,{signal:E})},R=new Set(b.map(S=>S.toB58String()));for await(const S of this._queryManager.run(v,this._routingTable.closestPeers(w),T,_))if(yield S,S.name==="PEER_RESPONSE"){this._log(`Found ${S.providers.length} provider entries for ${p} and ${S.closer.length} closer peers`);const E=[];for(const A of S.providers)R.has(A.id.toB58String())||(R.add(A.id.toB58String()),E.push(A));if(E.length&&(yield d({from:S.from,providers:E})),R.size===m)return}}};o.exports.ContentRouting=g}}),require_indent_string=__commonJS({"node_modules/indent-string/index.js"(e,o){init_node_globals(),o.exports=(r,t=1,n)=>{if(n=Re({indent:" ",includeEmptyLines:!1},n),typeof r!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof r}\``);if(typeof t!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if(typeof n.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof n.indent}\``);if(t===0)return r;const s=n.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return r.replace(s,n.indent.repeat(t))}}}),require_os=__commonJS({"(disabled):os"(){init_node_globals()}}),require_clean_stack=__commonJS({"node_modules/clean-stack/index.js"(e,o){init_node_globals();var r=require_os(),t=/\s+at.*(?:\(|\s)(.*)\)?/,n=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,s=typeof r.homedir=="undefined"?"":r.homedir();o.exports=(u,l)=>(l=Object.assign({pretty:!1},l),u.replace(/\\/g,"/").split(`
`).filter(f=>{const a=f.match(t);if(a===null||!a[1])return!0;const c=a[1];return c.includes(".app/Contents/Resources/electron.asar")||c.includes(".app/Contents/Resources/default_app.asar")?!1:!n.test(c)}).filter(f=>f.trim()!=="").map(f=>l.pretty?f.replace(t,(a,c)=>a.replace(c,c.replace(s,"~"))):f).join(`
`))}}),require_aggregate_error=__commonJS({"node_modules/aggregate-error/index.js"(e,o){init_node_globals();var r=require_indent_string(),t=require_clean_stack(),n=u=>u.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""),s=class extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);u=[...u].map(f=>f instanceof Error?f:f!==null&&typeof f=="object"?Object.assign(new Error(f.message),f):new Error(f));let l=u.map(f=>typeof f.stack=="string"?n(t(f.stack)):String(f)).join(`
`);l=`
`+r(l,4);super(l);this.name="AggregateError",Object.defineProperty(this,"_errors",{value:u})}*[Symbol.iterator](){for(const u of this._errors)yield u}};o.exports=s}}),require_p_map=__commonJS({"node_modules/p-map/index.js"(e,o){init_node_globals();var r=require_aggregate_error();o.exports=async(t,n,{concurrency:s=1/0,stopOnError:u=!0}={})=>new Promise((l,f)=>{if(typeof n!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(s)||s===1/0)&&s>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${s}\` (${typeof s})`);const a=[],c=[],d=t[Symbol.iterator]();let h=!1,g=!1,p=0,_=0;const m=()=>{if(h)return;const v=d.next(),w=_;if(_++,v.done){g=!0,p===0&&(!u&&c.length!==0?f(new r(c)):l(a));return}p++,(async()=>{try{const y=await v.value;a[w]=await n(y,w),p--,m()}catch(y){u?(h=!0,f(y)):(c.push(y),p--,m())}})()};for(let v=0;v<s&&(m(),!g);v++);})}}),require_peer_distance_list=__commonJS({"node_modules/libp2p-kad-dht/src/peer-list/peer-distance-list.js"(e,o){init_node_globals();var r=require_utils13(),t=require_p_map(),{compare:n}=(init_compare(),__toCommonJS(compare_exports)),{xor:s}=(init_xor(),__toCommonJS(xor_exports)),u=class{constructor(l,f){this.originDhtKey=l,this.capacity=f,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(l=>l.peerId)}async add(l){if(this.peerDistances.find(c=>c.peerId.equals(l)))return;const f=await r.convertPeerId(l),a={peerId:l,distance:s(this.originDhtKey,f)};this.peerDistances.push(a),this.peerDistances.sort((c,d)=>n(c.distance,d.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(l){if(!l.length)return!1;if(!this.length)return!0;const f=await t(l,c=>r.convertPeerId(c)),a=this.peerDistances[this.peerDistances.length-1].distance;for(const c of f){const d=s(this.originDhtKey,c);if(n(d,a)<0)return!0}return!1}};o.exports=u}}),require_peer_routing=__commonJS({"node_modules/libp2p-kad-dht/src/peer-routing/index.js"(e,o){init_node_globals();var r=require_err_code(),{validator:t}=require_src7(),n=require_src5(),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports)),{Message:u}=require_message(),l=require_utils13(),{queryErrorEvent:f,finalPeerEvent:a,valueEvent:c}=require_events2(),d=require_peer_distance_list(),{Record:h}=require_src7(),g=class{constructor({peerId:p,routingTable:_,peerStore:m,network:v,validators:w,queryManager:y,lan:b}){this._peerId=p,this._routingTable=_,this._peerStore=m,this._network=v,this._validators=w,this._queryManager=y,this._log=l.logger(`libp2p:kad-dht:${b?"lan":"wan"}:peer-routing`)}async findPeerLocal(p){let _;const m=await this._routingTable.find(p);if(m){this._log("findPeerLocal found %p in routing table",p);try{_=await this._peerStore.get(m)}catch(v){if(v.code!=="ERR_NOT_FOUND")throw v}}if(!_)try{_=await this._peerStore.get(p)}catch(v){if(v.code!=="ERR_NOT_FOUND")throw v}if(_)return this._log("findPeerLocal found %p in peer store",p),{id:_.id,multiaddrs:_.addresses.map(v=>v.multiaddr)}}async*_getValueSingle(p,_,m={}){const v=new u(u.TYPES.GET_VALUE,_,0);yield*this._network.sendRequest(p,v,m)}async*getPublicKeyFromNode(p,_){const m=l.keyForPublicKey(p);for await(const v of this._getValueSingle(p,m,_))if(yield v,v.name==="PEER_RESPONSE"&&v.record){const w=await n.createFromPubKey(v.record.value);if(!w.equals(p))throw r(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");yield c({from:p,value:w.pubKey.bytes})}throw r(new Error(`Node not responding with its public key: ${p.toB58String()}`),"ERR_INVALID_RECORD")}async*findPeer(p,_={}){this._log("findPeer %p",p);const m=await this.findPeerLocal(p);if(m!=null){this._log("found local"),yield a({from:this._peerId,peer:m});return}const v=await l.convertPeerId(p),w=this._routingTable.closestPeers(v);if(w.find(S=>S.equals(p)))try{const S=await this._peerStore.get(p);this._log("found in peerStore"),yield a({from:this._peerId,peer:{id:S.id,multiaddrs:S.addresses.map(E=>E.multiaddr)}});return}catch(S){if(S.code!=="ERR_NOT_FOUND")throw S}const b=this,T=async function*({peer:S,signal:E}){const A=new u(u.TYPES.FIND_NODE,p.toBytes(),0);for await(const C of b._network.sendRequest(S,A,{signal:E}))if(yield C,C.name==="PEER_RESPONSE"){const I=C.closer.find(P=>P.id.equals(p));I&&(yield a({from:C.from,peer:I}))}};let R=!1;for await(const S of this._queryManager.run(p.id,w,T,_))S.name==="FINAL_PEER"&&(R=!0),yield S;R||(yield f({from:this._peerId,error:r(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(p,_={}){this._log("getClosestPeers to %b",p);const m=await l.convertBuffer(p),v=this._routingTable.closestPeers(m),w=this,y=new d(m,this._routingTable._kBucketSize);v.forEach(T=>y.add(T));const b=async function*({peer:T,signal:R}){w._log("closerPeersSingle %s from %p",s(p,"base32"),T);const S=new u(u.TYPES.FIND_NODE,p,0);yield*w._network.sendRequest(T,S,{signal:R})};for await(const T of this._queryManager.run(p,v,b,_))yield T,T.name==="PEER_RESPONSE"&&T.closer.forEach(R=>{y.add(R.id)});this._log("found %d peers close to %b",y.length,p);for(const T of y.peers)yield a({from:this._peerId,peer:{id:T,multiaddrs:(await this._peerStore.addressBook.get(T)||[]).map(R=>R.multiaddr)}})}async*getValueOrPeers(p,_,m={}){for await(const v of this._getValueSingle(p,_,m)){if(v.name==="PEER_RESPONSE"&&v.record)try{await this._verifyRecordOnline(v.record)}catch{const y="invalid record received, discarded";this._log(y),yield f({from:v.from,error:r(new Error(y),"ERR_INVALID_RECORD")});continue}yield v}}async _verifyRecordOnline({key:p,value:_,timeReceived:m}){await t.verifyRecord(this._validators,new h(p,_,m))}async getCloserPeersOffline(p,_){const m=await l.convertBuffer(p),v=this._routingTable.closestPeers(m),w=[];for(const y of v)if(!y.equals(_))try{const b=await this._peerStore.addressBook.get(y);w.push({id:y,multiaddrs:b.map(T=>T.multiaddr)})}catch(b){if(b.code!=="ERR_NOT_FOUND")throw b}return w.length?this._log("getCloserPeersOffline found %d peer(s) closer to %b than %p",w.length,p,_):this._log("getCloserPeersOffline could not find peer closer to %b than %p",p,_),w}};o.exports.PeerRouting=g}}),require_providers=__commonJS({"node_modules/libp2p-kad-dht/src/providers.js"(e,o){init_node_globals();var r=require_hashlru(),t=require_varint(),n=require_src5(),{Key:s}=(init_key(),__toCommonJS(key_exports)),{default:u}=require_dist(),{PROVIDERS_CLEANUP_INTERVAL:l,PROVIDERS_VALIDITY:f,PROVIDERS_LRU_CACHE_SIZE:a,PROVIDER_KEY_PREFIX:c}=require_constants10(),d=require_utils13(),{toString:h}=(init_to_string(),__toCommonJS(to_string_exports)),g=d.logger("libp2p:kad-dht:providers"),p=class{constructor({providers:b,cacheSize:T,cleanupInterval:R,provideValidity:S}){this.datastore=b,this.cleanupInterval=R||l,this.provideValidity=S||f,this.cache=r(T||a),this.syncQueue=new u({concurrency:1})}start(){this._started||(this._started=!0,this._cleaner=setInterval(()=>this._cleanup(),this.cleanupInterval))}stop(){this._started=!1,this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add(async()=>{const b=Date.now();let T=0,R=0;const S=new Map,E=this.datastore.batch(),A=this.datastore.query({prefix:c});for await(const C of A)try{const{cid:I,peerId:P}=v(C.key),O=y(C.value),k=Date.now(),N=k-O,K=N>this.provideValidity;if(g("comparing: %d - %d = %d > %d %s",k,O,N,this.provideValidity,K?"(expired)":""),K){R++,E.delete(C.key);const U=S.get(I)||new Set;U.add(P),S.set(I,U)}T++}catch(I){g.error(I.message)}S.size?(g("deleting %d / %d entries",R,T),await E.commit()):g("nothing to delete");for(const[C,I]of S){const P=_(C),O=this.cache.get(P);if(O){for(const k of I)O.delete(k);O.size===0?this.cache.remove(P):this.cache.set(P,O)}}g("Cleanup successful (%dms)",Date.now()-b)})}async _getProvidersMap(b){const T=_(b);let R=this.cache.get(T);return R||(R=await w(this.datastore,b),this.cache.set(T,R)),R}async addProvider(b,T){return this.syncQueue.add(async()=>{g("%p provides %s",T,b);const R=await this._getProvidersMap(b);g("loaded %s provs",R.size);const S=new Date;R.set(T.toString(),S);const E=_(b);return this.cache.set(E,R),m(this.datastore,b,T,S)})}async getProviders(b){return this.syncQueue.add(async()=>(g("get providers for %s",b),[...(await this._getProvidersMap(b)).keys()].map(R=>n.parse(R))))}};function _(b){return b=typeof b=="string"?b:h(b.multihash.bytes,"base32"),`${c}/${b}`}async function m(b,T,R,S){const E=[_(T),"/",R.toString()].join(""),A=new s(E),C=Uint8Array.from(t.encode(S.getTime()));return b.put(A,C)}function v(b){const T=b.toString().split("/");if(T.length!==5)throw new Error("incorrectly formatted provider entry key in datastore: "+b);return{cid:T[3],peerId:T[4]}}async function w(b,T){const R=new Map,S=b.query({prefix:_(T)});for await(const E of S){const{peerId:A}=v(E.key);R.set(A,y(E.value))}return R}function y(b){return t.decode(b)}o.exports.Providers=p}}),require_query_path=__commonJS({"node_modules/libp2p-kad-dht/src/query/query-path.js"(e,o){init_node_globals();var{default:r}=require_dist(),{xor:t}=(init_xor(),__toCommonJS(xor_exports)),{toString:n}=(init_to_string(),__toCommonJS(to_string_exports)),s=require_p_defer(),u=require_err_code(),{convertPeerId:l,convertBuffer:f}=require_utils13(),{TimeoutController:a}=require_timeout_abort_controller(),{anySignal:c}=require_any_signal(),{queryErrorEvent:d}=require_events2(),h=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");o.exports.queryPath=async function*({key:_,startingPeer:m,ourPeerId:v,signal:w,query:y,alpha:b,pathIndex:T,numPaths:R,cleanUp:S,queryFuncTimeout:E,log:A}){const C=new r({concurrency:b}),I=await f(_),P=new Set;function O(k,N){if(!k)return;P.add(k.toB58String());const K=BigInt("0x"+n(t(N,I),"base16"));C.add(async()=>{let U;const L=[w];E!=null&&(U=new a(E),L.push(U.signal));const re=c(L);try{for await(const Z of y({key:_,peer:k,signal:re,pathIndex:T,numPaths:R})){if(re.aborted)return;if(Z.name==="PEER_RESPONSE")for(const V of Z.closer){if(P.has(V.id.toB58String())){A("already seen %p in query",V.id);continue}if(v.equals(V.id)){A("not querying ourselves");continue}const ee=await l(V.id);if(BigInt("0x"+n(t(ee,I),"base16"))>K){A("skipping %p as they are not closer to %b than %p",V.id,_,k);continue}A("querying closer peer %p",V.id),O(V.id,ee)}C.emit("completed",Z)}U&&U.clear()}catch(Z){w.aborted?C.emit("error",Z):C.emit("completed",d({from:k,error:Z}))}finally{U&&U.clear()}},{priority:h-K})}O(m,await l(m)),yield*g(C,w,S,A)};async function*g(p,_,m,v){let w=s(),y=!0;const b=[],T=()=>{!y||(v("clean up queue, results %d, queue size %d, pending tasks %d",b.length,p.size,p.pending),y=!1,p.clear(),b.splice(0,b.length))};for(p.on("completed",R=>{b.push(R),w.resolve()}),p.on("error",R=>{v("queue error",R),T(),w.reject(R)}),p.on("idle",()=>{v("queue idle"),y=!1,w.resolve()}),_.addEventListener("abort",()=>{v("abort queue");const R=y;T(),R&&w.reject(u(new Error("Query aborted"),"ERR_QUERY_ABORTED"))}),m.on("cleanup",()=>{T(),w.resolve()});y;)for(await w.promise,w=s();b.length;){const R=b.shift();R&&(yield R)}yield*b}}}),require_manager2=__commonJS({"node_modules/libp2p-kad-dht/src/query/manager.js"(e,o){init_node_globals();var{TimeoutController:r}=require_timeout_abort_controller(),{anySignal:t}=require_any_signal(),{ALPHA:n,K:s,DEFAULT_QUERY_TIMEOUT:u}=require_constants10(),{toString:l}=(init_to_string(),__toCommonJS(to_string_exports)),{logger:f}=require_utils13(),{queryPath:a}=require_query_path(),c=require_it_merge(),{EventEmitter:d,setMaxListeners:h}=require_events(),g="running-queries",p=class{constructor({peerId:_,lan:m,metrics:v,disjointPaths:w=s,alpha:y=n}){this._peerId=_,this._disjointPaths=w||s,this._controllers=new Set,this._running=!1,this._alpha=y||n,this._lan=m,this._metrics=v,this._queries=0}start(){this._running=!0}stop(){this._running=!1;for(const _ of this._controllers)_.abort();this._controllers.clear()}async*run(_,m,v,w={}){if(!this._running)throw new Error("QueryManager not started");let y;w.signal||(y=new r(u),w.signal=y.signal);const b=new AbortController;this._controllers.add(b);const T=[b.signal];w.signal&&T.push(w.signal);const R=t(T);try{h&&h(0,R)}catch{}const S=f(`libp2p:kad-dht:${this._lan?"lan":"wan"}:query:`+l(_,"base58btc")),E=m.slice(0,Math.min(this._disjointPaths,m.length)),A=Date.now(),C=new d;try{if(S("query:start"),this._queries++,this._metrics&&this._metrics.updateComponentMetric({component:`kad-dht-${this._lan?"lan":"wan"}`,metric:g,value:this._queries}),m.length===0){S.error("Running query with no peers");return}const I=E.map((P,O)=>a({key:_,startingPeer:P,ourPeerId:this._peerId,signal:R,query:v,pathIndex:O,numPaths:E.length,alpha:this._alpha,cleanUp:C,queryFuncTimeout:w.queryFuncTimeout,log:S}));for await(const P of c(...I))yield P,P.name==="QUERY_ERROR"&&P.error&&S("error",P.error)}catch(I){if(!(!this._running&&I.code==="ERR_QUERY_ABORTED"))throw I}finally{this._controllers.delete(b),y&&y.clear(),this._queries--,this._metrics&&this._metrics.updateComponentMetric({component:`kad-dht-${this._lan?"lan":"wan"}`,metric:g,value:this._queries}),C.emit("cleanup"),S(`query:done in ${Date.now()-(A||0)}ms`)}}};o.exports.QueryManager=p}}),require_add_provider=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/add-provider.js"(e,o){init_node_globals();var{CID:r}=(init_cid(),__toCommonJS(cid_exports)),t=require_err_code(),n=require_utils13(),s=n.logger("libp2p:kad-dht:rpc:handlers:add-provider"),u=class{constructor({peerId:l,providers:f,peerStore:a}){this._peerId=l,this._providers=f,this._peerStore=a}async handle(l,f){if(s("start"),!f.key||f.key.length===0)throw t(new Error("Missing key"),"ERR_MISSING_KEY");let a;try{a=r.decode(f.key)}catch(c){const d=`Invalid CID: ${c.message}`;throw t(new Error(d),"ERR_INVALID_CID")}(!f.providerPeers||!f.providerPeers.length)&&s.error("no providers found in message"),await Promise.all(f.providerPeers.map(async c=>{if(!c.id.equals(l)){s("invalid provider peer %p from %p",c.id,l);return}if(c.multiaddrs.length<1){s("no valid addresses for provider %p. Ignore",l);return}s("received provider %p for %s (addrs %s)",l,a,c.multiaddrs.map(d=>d.toString())),this._peerId.equals(c.id)||(await this._peerStore.addressBook.add(c.id,c.multiaddrs),await this._providers.addProvider(a,c.id))}))}};o.exports.AddProviderHandler=u}}),require_find_node=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/find-node.js"(e,o){init_node_globals();var{Message:r}=require_message(),t=require_utils13(),n=t.logger("libp2p:kad-dht:rpc:handlers:find-node"),{removePrivateAddresses:s,removePublicAddresses:u}=require_utils13(),l=class{constructor({peerId:f,addressable:a,peerRouting:c,lan:d}){this._peerId=f,this._addressable=a,this._peerRouting=c,this._lan=Boolean(d)}async handle(f,a){n("incoming request from %p for peers closer to %b",f,a.key);let c;this._peerId.equals(a.key)?c=[{id:this._peerId,multiaddrs:this._addressable.multiaddrs}]:c=await this._peerRouting.getCloserPeersOffline(a.key,f),c=c.map(this._lan?u:s).filter(({multiaddrs:h})=>h.length);const d=new r(a.type,new Uint8Array(0),a.clusterLevel);return c.length>0?d.closerPeers=c:n("could not find any peers closer to %p",f),d}};o.exports.FindNodeHandler=l}}),require_get_providers=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/get-providers.js"(e,o){init_node_globals();var{CID:r}=(init_cid(),__toCommonJS(cid_exports)),t=require_err_code(),{Message:n}=require_message(),s=require_utils13(),u=s.logger("libp2p:kad-dht:rpc:handlers:get-providers"),{removePrivateAddresses:l,removePublicAddresses:f}=require_utils13(),a=class{constructor({peerId:c,peerRouting:d,providers:h,peerStore:g,addressable:p,lan:_}){this._peerId=c,this._peerRouting=d,this._providers=h,this._peerStore=g,this._addressable=p,this._lan=Boolean(_)}async handle(c,d){let h;try{h=r.decode(d.key)}catch(w){throw t(new Error(`Invalid CID: ${w.message}`),"ERR_INVALID_CID")}u("%p asking for providers for %s",c,h);const[g,p]=await Promise.all([this._providers.getProviders(h),this._peerRouting.getCloserPeersOffline(d.key,c)]),_=await this._getPeers(g),m=await this._getPeers(p.map(({id:w})=>w)),v=new n(d.type,d.key,d.clusterLevel);return _.length>0&&(v.providerPeers=_),m.length>0&&(v.closerPeers=m),u("got %s providers %s closerPeers",_.length,m.length),v}async _getAddresses(c){return this._peerId.equals(c)?this._addressable.multiaddrs:(await this._peerStore.addressBook.get(c)||[]).map(d=>d.multiaddr)}async _getPeers(c){const d=[],h=this._lan?f:l;for(const g of c){const p=h({id:g,multiaddrs:await this._getAddresses(g)});p.multiaddrs.length&&d.push(p)}return d}};o.exports.GetProvidersHandler=a}}),require_get_value=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/get-value.js"(e,o){init_node_globals();var{Record:r}=require_src7(),t=require_err_code(),{Message:n}=require_message(),{MAX_RECORD_AGE:s}=require_constants10(),u=require_utils13(),l=u.logger("libp2p:kad-dht:rpc:handlers:get-value"),f=class{constructor({peerId:a,peerStore:c,peerRouting:d,records:h}){this._peerId=a,this._peerStore=c,this._peerRouting=d,this._records=h}async handle(a,c){const d=c.key;if(l("%p asked for key %b",a,d),!d||d.length===0)throw t(new Error("Invalid key"),"ERR_INVALID_KEY");const h=new n(n.TYPES.GET_VALUE,d,c.clusterLevel);if(u.isPublicKeyKey(d)){l("is public key");const _=u.fromPublicKeyKey(d);let m;if(this._peerId.equals(_))m=this._peerId.pubKey;else try{m=await this._peerStore.keyBook.get(_)}catch(v){if(v.code!=="ERR_NOT_FOUND")throw v}if(m!=null)return l("returning found public key"),h.record=new r(d,m.bytes),h}const[g,p]=await Promise.all([this._checkLocalDatastore(d),this._peerRouting.getCloserPeersOffline(c.key,a)]);return g&&(l("had record for %b in local datastore",d),h.record=g),p.length>0&&(l("had %s closer peers in routing table",p.length),h.closerPeers=p),h}async _checkLocalDatastore(a){l("checkLocalDatastore looking for %b",a);const c=u.bufferToKey(a);let d;try{d=await this._records.get(c)}catch(g){if(g.code==="ERR_NOT_FOUND")return;throw g}const h=r.deserialize(d);if(!h)throw t(new Error("Invalid record"),"ERR_INVALID_RECORD");if(h.timeReceived==null||Date.now()-h.timeReceived.getTime()>s){await this._records.delete(c);return}return h}};o.exports.GetValueHandler=f}}),require_ping=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/ping.js"(e,o){init_node_globals();var r=require_utils13(),t=r.logger("libp2p:kad-dht:rpc:handlers:ping"),n=class{async handle(s,u){return t(`ping from ${s}`),u}};o.exports.PingHandler=n}}),require_put_value=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/put-value.js"(e,o){init_node_globals();var r=require_utils13(),t=require_err_code(),n=require_src7(),s=r.logger("libp2p:kad-dht:rpc:handlers:put-value"),u=class{constructor({validators:l,records:f}){this._validators=l,this._records=f}async handle(l,f){const a=f.key;s("%p asked to store value for key %b",l,a);const c=f.record;if(!c){const h=`Empty record from: ${l.toB58String()}`;throw s.error(h),t(new Error(h),"ERR_EMPTY_RECORD")}await n.validator.verifyRecord(this._validators,c),c.timeReceived=new Date;const d=r.bufferToKey(c.key);return await this._records.put(d,c.serialize()),f}};o.exports.PutValueHandler=u}}),require_handlers=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/handlers/index.js"(e,o){init_node_globals();var{Message:r}=require_message(),{AddProviderHandler:t}=require_add_provider(),{FindNodeHandler:n}=require_find_node(),{GetProvidersHandler:s}=require_get_providers(),{GetValueHandler:u}=require_get_value(),{PingHandler:l}=require_ping(),{PutValueHandler:f}=require_put_value();o.exports=({peerId:a,providers:c,peerStore:d,addressable:h,peerRouting:g,records:p,validators:_,lan:m})=>{const v={[r.TYPES.GET_VALUE]:new u({peerId:a,peerStore:d,peerRouting:g,records:p}),[r.TYPES.PUT_VALUE]:new f({validators:_,records:p}),[r.TYPES.FIND_NODE]:new n({peerId:a,addressable:h,peerRouting:g,lan:m}),[r.TYPES.ADD_PROVIDER]:new t({peerId:a,providers:c,peerStore:d}),[r.TYPES.GET_PROVIDERS]:new s({peerId:a,peerRouting:g,providers:c,peerStore:d,addressable:h,lan:m}),[r.TYPES.PING]:new l};function w(y){return v[y]}return w}}}),require_rpc4=__commonJS({"node_modules/libp2p-kad-dht/src/rpc/index.js"(e,o){init_node_globals();var{pipe:r}=require_it_pipe(),t=require_src11(),{Message:n,MESSAGE_TYPE_LOOKUP:s}=require_message(),u=require_handlers(),l=require_utils13(),f=l.logger("libp2p:kad-dht:rpc"),a=class{constructor(c){this._messageHandler=u(c),this._routingTable=c.routingTable}async handleMessage(c,d){const h=this._messageHandler(d.type);try{await this._routingTable.add(c)}catch(g){f.error("Failed to update the kbucket store",g)}if(!h){f.error(`no handler found for message type: ${d.type}`);return}return h.handle(c,d)}async onIncomingStream({stream:c,connection:d}){const h=d.remotePeer;try{await this._routingTable.add(h)}catch(p){f.error(p)}const g=this;await r(c.source,t.decode(),p=>async function*(){for await(const _ of p){const m=n.deserialize(_.slice());f("incoming %s from %p",s[m.type],h);const v=await g.handleMessage(h,m);v&&(yield v.serialize())}}(),t.encode(),c.sink)}};o.exports.RPC=a}}),require_topology_listener=__commonJS({"node_modules/libp2p-kad-dht/src/topology-listener.js"(e,o){init_node_globals();var r=require_multicodec_topology(),{EventEmitter:t}=require_events(),n=require_utils13(),s=class extends t{constructor({registrar:u,protocol:l,lan:f}){super();this._log=n.logger(`libp2p:kad-dht:topology-listener:${f?"lan":"wan"}:network`),this._running=!1,this._registrar=u,this._protocol=l}async start(){if(this._running)return;this._running=!0;const u=new r({multicodecs:[this._protocol],handlers:{onConnect:l=>{this._log("observed peer that with protocol %s %p",this._protocol,l),this.emit("peer",l)},onDisconnect:()=>{}}});this._registrarId=await this._registrar.register(u)}stop(){this._running=!1,this._registrarId&&this._registrar.unregister(this._registrarId)}};o.exports.TopologyListener=s}}),require_query_self=__commonJS({"node_modules/libp2p-kad-dht/src/query-self.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),t=require_it_take(),n=require_it_length(),{QUERY_SELF_INTERVAL:s,QUERY_SELF_TIMEOUT:u,K:l}=require_constants10(),f=require_utils13(),{TimeoutController:a}=require_timeout_abort_controller(),{anySignal:c}=require_any_signal(),{setMaxListeners:d}=require_events(),h=class extends r{constructor({peerId:g,peerRouting:p,lan:_,count:m=l,interval:v=s,queryTimeout:w=u}){super();this._log=f.logger(`libp2p:kad-dht:${_?"lan":"wan"}:query-self`),this._running=!1,this._peerId=g,this._peerRouting=p,this._count=m||l,this._interval=v||s,this._queryTimeout=w||u}start(){this._running||(this._running=!0,this._querySelf())}stop(){this._running=!1,this._timeoutId&&clearTimeout(this._timeoutId),this._controller&&this._controller.abort()}async _querySelf(){const g=new a(this._queryTimeout);try{this._controller=new AbortController;const p=c([this._controller.signal,g.signal]);try{d&&d(1/0,p)}catch{}const _=await n(await t(this._peerRouting.getClosestPeers(this._peerId.toBytes(),{signal:p}),this._count));this._log("query ran successfully - found %d peers",_)}catch(p){this._log("query error",p)}finally{this._timeoutId=setTimeout(this._querySelf.bind(this),this._interval),g.clear()}}};o.exports.QuerySelf=h}}),require_kad_dht=__commonJS({"node_modules/libp2p-kad-dht/src/kad-dht.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),t=require_src6(),n=require_src7(),{MemoryDatastore:s}=(init_memory(),__toCommonJS(memory_exports)),{RoutingTable:u}=require_routing_table(),{RoutingTableRefresh:l}=require_refresh(),f=require_utils13(),{K:a,QUERY_SELF_INTERVAL:c,RECORD_KEY_PREFIX:d}=require_constants10(),{Network:h}=require_network(),{ContentFetching:g}=require_content_fetching(),{ContentRouting:p}=require_content_routing(),{PeerRouting:_}=require_peer_routing(),{Providers:m}=require_providers(),{QueryManager:v}=require_manager2(),{RPC:w}=require_rpc4(),{TopologyListener:y}=require_topology_listener(),{QuerySelf:b}=require_query_self(),{removePrivateAddresses:T,removePublicAddresses:R}=require_utils13(),{KeyTransformDatastore:S}=(init_src6(),__toCommonJS(src_exports4)),{Key:E}=(init_key(),__toCommonJS(key_exports)),A=class{constructor(I){this._prefix=I,this._prefix.startsWith("/")&&(this._prefix=this._prefix.substring(1))}convert(I){return new E(`/${this._prefix}${I}`)}invert(I){const P=I.namespaces();return P[0]===this._prefix&&P.shift(),E.withNamespaces(P)}},C=class extends r{constructor({libp2p:I,kBucketSize:P=a,clientMode:O=!0,validators:k={},selectors:N={},querySelfInterval:K=c,lan:U=!0,protocol:L="/ipfs/lan/kad/1.0.0",bootstrapPeers:re=[]}){super();this._running=!1,this._log=f.logger(`libp2p:kad-dht:${U?"lan":"wan"}`),this._libp2p=I,this._protocol=L,this._kBucketSize=P,this._clientMode=O,this._bootstrapPeers=re,this._routingTable=new u({peerId:I.peerId,dialer:I,kBucketSize:P,metrics:I.metrics,lan:U});const Z=I.datastore||new s,V=new S(Z,new A(d));this._providers=new m({providers:Z}),this._lan=U,this._validators=Re({pk:n.validator.validators.pk},k),this._selectors=Re({pk:n.selection.selectors.pk},N),this._network=new h({dialer:I,protocol:this._protocol,lan:U}),this._queryManager=new v({peerId:I.peerId,disjointPaths:Math.ceil(P/2),metrics:I.metrics,lan:U}),this._peerRouting=new _({peerId:I.peerId,routingTable:this._routingTable,peerStore:I.peerStore,network:this._network,validators:this._validators,queryManager:this._queryManager,lan:U}),this._contentFetching=new g({peerId:I.peerId,records:V,validators:this._validators,selectors:this._selectors,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,network:this._network,lan:U}),this._contentRouting=new p({peerId:I.peerId,network:this._network,peerRouting:this._peerRouting,queryManager:this._queryManager,routingTable:this._routingTable,providers:this._providers,peerStore:I.peerStore,lan:U}),this._routingTableRefresh=new l({peerRouting:this._peerRouting,routingTable:this._routingTable,lan:U}),this._rpc=new w({routingTable:this._routingTable,peerId:I.peerId,providers:this._providers,peerStore:I.peerStore,addressable:I,peerRouting:this._peerRouting,records:V,validators:this._validators,lan:U}),this._topologyListener=new y({registrar:I.registrar,protocol:this._protocol,lan:U}),this._querySelf=new b({peerId:I.peerId,peerRouting:this._peerRouting,interval:K,lan:U}),this._network.on("peer",ee=>{this.onPeerConnect(ee).catch(fe=>{this._log.error(`could not add ${ee.id} to routing table`,fe)}),this.emit("peer",ee)}),this._topologyListener.on("peer",async ee=>{const fe=await this._libp2p.peerStore.addressBook.get(ee),_e={id:ee,multiaddrs:fe.map(ce=>ce.multiaddr)};this.onPeerConnect(_e).catch(ce=>{this._log.error(`could not add ${_e.id} to routing table`,ce)})})}async onPeerConnect(I){if(this._log("peer %p connected",I.id),this._lan?I=R(I):I=T(I),!I.multiaddrs.length){this._log("ignoring %p as they do not have any %s addresses in %s",I.id,this._lan?"private":"public",I.multiaddrs.map(P=>P.toString()));return}try{await this._routingTable.add(I.id)}catch(P){this._log.error("could not add %p to routing table",I.id,P)}}isStarted(){return this._running}isServer(){return!this._clientMode}async enableServerMode(){this._log("enabling server mode"),this._clientMode=!1,await this._libp2p.handle(this._protocol,this._rpc.onIncomingStream.bind(this._rpc))}async enableClientMode(){this._log("enabling client mode"),this._clientMode=!0,await this._libp2p.unhandle(this._protocol)}async start(){this._running=!0,this._clientMode?await this.enableClientMode():await this.enableServerMode(),await Promise.all([this._providers.start(),this._queryManager.start(),this._network.start(),this._routingTable.start(),this._topologyListener.start(),this._querySelf.start()]),await Promise.all(this._bootstrapPeers.map(I=>this._routingTable.add(I.id))),await this._routingTableRefresh.start(),await this.refreshRoutingTable()}async stop(){this._running=!1,await Promise.all([this._providers.stop(),this._queryManager.stop(),this._network.stop(),this._routingTable.stop(),this._routingTableRefresh.stop(),this._topologyListener.stop(),this._querySelf.stop()])}async*put(I,P,O={}){yield*this._contentFetching.put(I,P,O)}async*get(I,P={}){yield*this._contentFetching.get(I,P)}async*provide(I,P={}){yield*this._contentRouting.provide(I,this._libp2p.multiaddrs,P)}async*findProviders(I,P={maxNumProviders:5}){yield*this._contentRouting.findProviders(I,P)}async*findPeer(I,P={}){yield*this._peerRouting.findPeer(I,P)}async*getClosestPeers(I,P={}){yield*this._peerRouting.getClosestPeers(I,P)}async getPublicKey(I,P={}){this._log("getPublicKey %p",I);for await(const k of this._peerRouting.getPublicKeyFromNode(I,P))if(k.name==="VALUE")return t.keys.unmarshalPublicKey(k.value);const O=f.keyForPublicKey(I);for await(const k of this.get(O,P))if(k.name==="VALUE")return t.keys.unmarshalPublicKey(k.value)}async refreshRoutingTable(){await this._routingTableRefresh.refreshTable(!0)}};o.exports={KadDHT:C}}}),require_dual_kad_dht=__commonJS({"node_modules/libp2p-kad-dht/src/dual-kad-dht.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),t=require_src5(),n=require_utils13(),s=require_err_code(),u=require_it_merge(),{queryErrorEvent:l}=require_events2(),f=n.logger("libp2p:kad-dht"),a=class extends r{constructor(c,d,h){super();this._wan=c,this._lan=d,this._libp2p=h,this._wan.on("peer",g=>{this.emit("peer",g)}),this._lan.on("peer",g=>{this.emit("peer",g)})}isStarted(){return this._wan.isStarted()&&this._lan.isStarted()}async enableServerMode(){await this._wan.enableServerMode()}async enableClientMode(){await this._wan.enableClientMode()}async start(){await Promise.all([this._lan.start(),this._wan.start()])}async stop(){await Promise.all([this._lan.stop(),this._wan.stop()])}async*put(c,d,h={}){let g=0,p=0;for await(const m of u(this._lan.put(c,d,h),this._wan.put(c,d,h)))yield m,m.name==="SENDING_QUERY"&&m.messageName==="PUT_VALUE"&&g++,m.name==="PEER_RESPONSE"&&m.messageName==="PUT_VALUE"&&p++;const _=h.minPeers==null?g||1:h.minPeers;if(p<_){const m=s(new Error(`Failed to put value to enough peers: ${p}/${_}`),"ERR_NOT_ENOUGH_PUT_PEERS");throw f.error(m),m}}async*get(c,d={}){let h=!1,g=!1;for await(const p of u(this._lan.get(c,d),this._wan.get(c,d)))yield p,p.name==="DIALING_PEER"&&(h=!0),p.name==="VALUE"&&(h=!0,p.value!=null&&(g=!0)),p.name==="SENDING_QUERY"&&(h=!0);if(!h)throw s(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");g||(yield l({from:this._libp2p.peerId,error:s(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(c,d={}){let h=0,g=0;const p=[],_=[this._lan];this._wan.isServer()&&_.push(this._wan);for await(const m of u(..._.map(v=>v.provide(c,d))))yield m,m.name==="SENDING_QUERY"&&h++,m.name==="QUERY_ERROR"&&p.push(m.error),m.name==="PEER_RESPONSE"&&m.messageName==="ADD_PROVIDER"&&(f("sent provider record for %s to %p",c,m.from.id),g++);if(g===0)throw p.length?s(new Error(`Failed to provide to ${p.length} of ${h} peers`),"ERR_PROVIDES_FAILED",{errors:p}):s(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}async*findProviders(c,d={maxNumProviders:5}){yield*u(this._lan.findProviders(c,d),this._wan.findProviders(c,d))}async*findPeer(c,d={}){let h=!1;for await(const g of u(this._lan.findPeer(c,d),this._wan.findPeer(c,d)))yield g,(g.name==="SENDING_QUERY"||g.name==="FINAL_PEER")&&(h=!0);if(!h)throw s(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(c,d={}){yield*u(this._lan.getClosestPeers(c,d),this._wan.getClosestPeers(c,d))}async getPublicKey(c,d={}){f("getPublicKey %p",c);let h;try{if(h=await this._libp2p.peerStore.get(c),h.pubKey)return f("getPublicKey: found local copy"),h.pubKey;if(h.id.pubKey)return f("getPublicKey: found local copy"),h.id.pubKey}catch(v){if(v.code!=="ERR_NOT_FOUND")throw v}const g=await Promise.all([this._lan.getPublicKey(c,d),this._wan.getPublicKey(c,d)]);if(g[0]&&g[1]&&!g[0].equals(g[1]))throw s(new Error("Inconsistent public key loaded from wan and lan DHTs"),"ERR_FAILED_TO_LOAD_KEY");const p=g[0]||g[1];if(!p)throw s(new Error("Failed to load public key"),"ERR_FAILED_TO_LOAD_KEY");const _=new t(c.id,void 0,p),m=(h&&h.addresses||[]).map(v=>v.multiaddr);return await this._libp2p.peerStore.addressBook.add(_,m),await this._libp2p.peerStore.keyBook.set(_,p),p}async refreshRoutingTable(){await Promise.all([this._lan.refreshRoutingTable(),this._wan.refreshRoutingTable()])}};o.exports={DualKadDHT:a}}}),require_src21=__commonJS({"node_modules/libp2p-kad-dht/src/index.js"(e,o){init_node_globals();var{KadDHT:r}=require_kad_dht(),{DualKadDHT:t}=require_dual_kad_dht();o.exports={create:n=>new t(new r($e(Re({},n),{protocol:"/ipfs/kad/1.0.0",lan:!1})),new r($e(Re({},n),{protocol:"/ipfs/lan/kad/1.0.0",clientMode:!1,lan:!0})),n.libp2p)}}});function selector(e,o){return validator.select(o[0],o[1])}var validator2,init_ipns2=__esm({"node_modules/ipfs-core-config/esm/src/utils/ipns.js"(){init_node_globals(),init_src4(),validator2={func:(e,o)=>validator.validate(o,e)}}}),libp2p_browser_exports={};__export(libp2p_browser_exports,{libp2pConfig:()=>libp2pConfig});function libp2pConfig(){return{dialer:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4},modules:{transport:[import_libp2p_websockets.default,import_libp2p_webrtc_star.default],streamMuxer:[import_libp2p_mplex.default],connEncryption:[import_libp2p_noise.NOISE],peerDiscovery:[],dht:import_libp2p_kad_dht.default,pubsub:import_libp2p_gossipsub2.default},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0},webRTCStar:{enabled:!0}},dht:{kBucketSize:20,enabled:!0,clientMode:!0,validators:{ipns:validator2},selectors:{ipns:selector}},pubsub:{enabled:!0,emitSelf:!0},nat:{enabled:!1}},metrics:{enabled:!0},peerStore:{persistence:!0}}}var import_libp2p_websockets,import_libp2p_webrtc_star,import_libp2p_mplex,import_libp2p_noise,import_libp2p_kad_dht,import_libp2p_gossipsub2,init_libp2p_browser=__esm({"node_modules/ipfs-core-config/esm/src/libp2p.browser.js"(){init_node_globals(),import_libp2p_websockets=__toESM(require_src15(),1),import_libp2p_webrtc_star=__toESM(require_src16(),1),import_libp2p_mplex=__toESM(require_src17(),1),import_libp2p_noise=__toESM(require_src20(),1),import_libp2p_kad_dht=__toESM(require_src21(),1),import_libp2p_gossipsub2=__toESM(require_src12(),1),init_ipns2()}}),require_src22=__commonJS({"node_modules/libp2p-bootstrap/src/index.js"(e,o){init_node_globals();var r=require_src5(),{Multiaddr:t}=require_src(),n=require_src2(),{EventEmitter:s}=require_events(),u=require_browser2(),l=Object.assign(u("libp2p:bootstrap"),{error:u("libp2p:bootstrap:error")}),f=class extends s{constructor(a={list:[]}){if(!a.list||!a.list.length)throw new Error("Bootstrap requires a list of peer addresses");super();this._list=a.list,this._interval=a.interval||1e4,this._timer=null}start(){this._timer||(this._timer=setInterval(()=>this._discoverBootstrapPeers(),this._interval),l("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){!this._timer||this._list.forEach(a=>{if(!n.P2P.matches(a))return l.error("Invalid multiaddr");const c=new t(a),d=c.getPeerId();if(!d){l.error("Invalid bootstrap multiaddr without peer id");return}const h=r.createFromB58String(d);try{this.emit("peer",{id:h,multiaddrs:[c]})}catch(g){l.error("Invalid bootstrap peer id",g)}})}stop(){this._timer&&clearInterval(this._timer),this._timer=null}};e=o.exports=f,e.tag="bootstrap"}}),require_utils14=__commonJS({"node_modules/libp2p/src/content-routing/utils.js"(e,o){init_node_globals();var r=require_err_code(),t=require_it_filter(),n=require_it_map(),s=require_it_take();async function*u(c,d){yield*n(c,async h=>(await d.addressBook.add(h.id,h.multiaddrs),h))}function l(c){const d=new Set;return t(c,h=>d.has(h.id.toString())?!1:(d.add(h.id.toString()),!0))}async function*f(c,d=1){let h=0;for await(const g of c)h++,yield g;if(h<d)throw r(new Error("not found"),"NOT_FOUND")}function a(c,d){return d?s(c,d):c}o.exports={storeAddresses:u,uniquePeers:l,requirePeers:f,maybeLimitSource:a}}}),require_src23=__commonJS({"node_modules/set-delayed-interval/src/index.js"(e,o){init_node_globals();var r=new Map,t=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function n(l,f,a){for(;r.get(a);){try{await l()}catch(c){setTimeout(()=>{throw c},1);break}if(!r.get(a))break;await new Promise(c=>{const d=setTimeout(c,f);r.set(a,d)})}}function s(l,f,a){a=a||f;const c=t(),d=setTimeout(()=>{n(l,f,c)},a);return r.set(c,d),c}function u(l){const f=r.get(l);f&&(clearTimeout(f),r.delete(l))}o.exports={setDelayedInterval:s,clearDelayedInterval:u}}}),require_dht_peer_routing=__commonJS({"node_modules/libp2p/src/dht/dht-peer-routing.js"(e,o){init_node_globals();var r=require_err_code(),{messages:t,codes:n}=require_errors4(),s=class{constructor(u){this._dht=u}async findPeer(u,l={}){for await(const f of this._dht.findPeer(u,l))if(f.name==="FINAL_PEER")return f.peer;throw r(new Error(t.NOT_FOUND),n.ERR_NOT_FOUND)}async*getClosestPeers(u,l={}){for await(const f of this._dht.getClosestPeers(u,l))f.name==="PEER_RESPONSE"&&(yield*f.closer)}};o.exports={DHTPeerRouting:s}}}),require_peer_routing2=__commonJS({"node_modules/libp2p/src/peer-routing.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:peer-routing"),{error:r("libp2p:peer-routing:err")}),n=require_err_code(),s=require_errors4(),{storeAddresses:u,uniquePeers:l,requirePeers:f}=require_utils14(),{TimeoutController:a}=require_timeout_abort_controller(),c=require_it_merge(),{pipe:d}=require_it_pipe(),h=require_it_first(),g=require_it_drain(),p=require_it_filter(),{setDelayedInterval:_,clearDelayedInterval:m}=require_src23(),{DHTPeerRouting:v}=require_dht_peer_routing(),{setMaxListeners:w}=require_events(),y=class{constructor(b){this._peerId=b.peerId,this._peerStore=b.peerStore,this._routers=b._modules.peerRouting||[],b._dht&&b._config.dht.enabled&&this._routers.push(new v(b._dht)),this._refreshManagerOptions=b._options.peerRouting.refreshManager,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}start(){!this._routers.length||this._timeoutId||!this._refreshManagerOptions.enabled||(this._timeoutId=_(this._findClosestPeersTask,this._refreshManagerOptions.interval,this._refreshManagerOptions.bootDelay))}async _findClosestPeersTask(){try{await g(this.getClosestPeers(this._peerId.id,{timeout:this._refreshManagerOptions.timeout||1e4}))}catch(b){t.error(b)}}stop(){m(this._timeoutId)}async findPeer(b,T){if(!this._routers.length)throw n(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(b.toB58String()===this._peerId.toB58String())throw n(new Error("Should not try to find self"),s.codes.ERR_FIND_SELF);const R=await d(c(...this._routers.map(S=>async function*(){try{yield await S.findPeer(b,T)}catch(E){t.error(E)}}())),S=>p(S,Boolean),S=>u(S,this._peerStore),S=>h(S));if(R)return R;throw n(new Error(s.messages.NOT_FOUND),s.codes.ERR_NOT_FOUND)}async*getClosestPeers(b,T={timeout:3e4}){if(!this._routers.length)throw n(new Error("No peer routers available"),s.codes.ERR_NO_ROUTERS_AVAILABLE);if(T.timeout){const R=new a(T.timeout);try{w&&w(1/0,R.signal)}catch{}T.signal=R.signal}yield*d(c(...this._routers.map(R=>R.getClosestPeers(b,T))),R=>u(R,this._peerStore),R=>l(R),R=>f(R))}};o.exports=y}}),require_dht_content_routing=__commonJS({"node_modules/libp2p/src/dht/dht-content-routing.js"(e,o){init_node_globals();var r=require_it_drain(),t=class{constructor(n){this._dht=n}async provide(n){await r(this._dht.provide(n))}async*findProviders(n,s){for await(const u of this._dht.findProviders(n,s))u.name==="PROVIDER"&&(yield*u.providers)}};o.exports={DHTContentRouting:t}}}),require_content_routing2=__commonJS({"node_modules/libp2p/src/content-routing/index.js"(e,o){init_node_globals();var r=require_err_code(),{messages:t,codes:n}=require_errors4(),{storeAddresses:s,uniquePeers:u,requirePeers:l,maybeLimitSource:f}=require_utils14(),a=require_it_drain(),c=require_it_merge(),{pipe:d}=require_it_pipe(),{DHTContentRouting:h}=require_dht_content_routing(),g=class{constructor(p){this.libp2p=p,this.routers=p._modules.contentRouting||[],this.dht=p._dht,this.dht&&p._config.dht.enabled&&this.routers.push(new h(this.dht))}async*findProviders(p,_={}){if(!this.routers.length)throw r(new Error("No content this.routers available"),n.ERR_NO_ROUTERS_AVAILABLE);yield*d(c(...this.routers.map(m=>m.findProviders(p,_))),m=>s(m,this.libp2p.peerStore),m=>u(m),m=>f(m,_.maxNumProviders),m=>l(m))}async provide(p){if(!this.routers.length)throw r(new Error("No content routers available"),n.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map(_=>_.provide(p)))}async put(p,_,m){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(t.NOT_STARTED_YET),n.DHT_NOT_STARTED);await a(this.dht.put(p,_,m))}async get(p,_){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(t.NOT_STARTED_YET),n.DHT_NOT_STARTED);for await(const m of this.dht.get(p,_))if(m.name==="VALUE")return{from:m.peerId,val:m.value};throw r(new Error(t.NOT_FOUND),n.ERR_NOT_FOUND)}async*getMany(p,_,m){if(!this.libp2p.isStarted()||!this.dht.isStarted)throw r(new Error(t.NOT_STARTED_YET),n.DHT_NOT_STARTED);if(!_)return;let v=0;for await(const w of this.dht.get(p,m))if(w.name==="VALUE"&&(yield{from:w.peerId,val:w.value},v++,v===_))break;if(v===0)throw r(new Error(t.NOT_FOUND),n.ERR_NOT_FOUND)}};o.exports=g}}),require_get_peer=__commonJS({"node_modules/libp2p/src/get-peer.js"(e,o){init_node_globals();var r=require_src5(),{Multiaddr:t}=require_src(),n=require_err_code(),{codes:s}=require_errors4();function u(l){typeof l=="string"&&(l=new t(l));let f;if(t.isMultiaddr(l)){f=l;const a=l.getPeerId();if(!a)throw n(new Error(`${l} does not have a valid peer type`),s.ERR_INVALID_MULTIADDR);try{l=r.createFromB58String(a)}catch{throw n(new Error(`${l} is not a valid peer type`),s.ERR_INVALID_MULTIADDR)}}return{id:l,multiaddrs:f?[f]:void 0}}o.exports=u}}),require_receptacle=__commonJS({"node_modules/receptacle/index.js"(e,o){init_node_globals(),o.exports=u;var r=require_ms(),t=u.prototype,n=new Date%1e9;function s(){return(Math.random()*1e9>>>0)+n++}function u(l){l=l||{},this.id=l.id||s(),this.max=l.max||1/0,this.items=l.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(l.lastModified||new Date);for(var f,a,c=this.items.length;c--;)f=this.items[c],a=new Date(f.expires)-new Date,this._lookup[f.key]=f,a>0?this.expire(f.key,a):a<=0&&this.delete(f.key)}t.has=function(l){return l in this._lookup},t.get=function(l){if(!this.has(l))return null;var f=this._lookup[l];return f.refresh&&this.expire(l,f.refresh),this.items.splice(this.items.indexOf(f),1),this.items.push(f),f.value},t.meta=function(l){if(!this.has(l))return null;var f=this._lookup[l];return"meta"in f?f.meta:null},t.set=function(l,f,a){var c=this._lookup[l],d=this._lookup[l]={key:l,value:f};return this.lastModified=new Date,c?(clearTimeout(c.timeout),this.items.splice(this.items.indexOf(c),1,d)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(d),this.size++),a&&("ttl"in a&&this.expire(l,a.ttl),"meta"in a&&(d.meta=a.meta),a.refresh&&(d.refresh=a.ttl)),this},t.delete=function(l){var f=this._lookup[l];return f?(this.lastModified=new Date,this.items.splice(this.items.indexOf(f),1),clearTimeout(f.timeout),delete this._lookup[l],this.size--,this):!1},t.expire=function(l,f){var a=f||0,c=this._lookup[l];if(!c)return this;if(typeof a=="string"&&(a=r(f)),typeof a!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(c.timeout),c.timeout=setTimeout(this.delete.bind(this,c.key),a),c.expires=Number(new Date)+a,this},t.clear=function(){for(var l=this.items.length;l--;)this.delete(this.items[l].key);return this},t.toJSON=function(){for(var l=new Array(this.items.length),f,a=l.length;a--;)f=this.items[a],l[a]={key:f.key,meta:f.meta,value:f.value,expires:f.expires,refresh:f.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:l}}}}),require_utils15=__commonJS({"node_modules/dns-over-http-resolver/src/utils.js"(e,o){init_node_globals();var{default:r,Headers:t}=require_src4();function n({serverResolver:l,hostname:f,recordType:a}){return`${l}?name=${f}&type=${a}`}function s(l){return r(l,{headers:new t({accept:"application/dns-json"})})}function u(l,f){return`${f}_${l}`}o.exports={buildResource:n,fetch:s,getCacheKey:u}}}),require_src24=__commonJS({"node_modules/dns-over-http-resolver/src/index.js"(e,o){init_node_globals();var r=require_browser2(),t=r("dns-over-http-resolver");t.error=r("dns-over-http-resolver:error");var n=require_receptacle(),s=require_utils15(),u=class{constructor({maxCache:l=100}={}){this._cache=new n({max:l}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"]}getServers(){return this._servers}_getShuffledServers(){const l=[].concat(this._servers);for(let f=l.length-1;f>0;f--){const a=Math.floor(Math.random()*f),c=l[f];l[f]=l[a],l[a]=c}return l}setServers(l){this._servers=l}resolve(l,f="A"){switch(f){case"A":return this.resolve4(l);case"AAAA":return this.resolve6(l);case"TXT":return this.resolveTxt(l);default:throw new Error(`${f} is not supported`)}}async resolve4(l){const f="A",a=this._cache.get(s.getCacheKey(l,f));if(a)return a;for(const c of this._getShuffledServers())try{const h=await(await s.fetch(s.buildResource({serverResolver:c,hostname:l,recordType:f}))).json(),g=h.Answer.map(_=>_.data),p=Math.min(h.Answer.map(_=>_.TTL));return this._cache.set(s.getCacheKey(l,f),g,{ttl:p}),g}catch{t.error(`${c} could not resolve ${l} record ${f}`)}throw new Error(`Could not resolve ${l} record ${f}`)}async resolve6(l){const f="AAAA",a=this._cache.get(s.getCacheKey(l,f));if(a)return a;for(const c of this._getShuffledServers())try{const h=await(await s.fetch(s.buildResource({serverResolver:c,hostname:l,recordType:f}))).json(),g=h.Answer.map(_=>_.data),p=Math.min(h.Answer.map(_=>_.TTL));return this._cache.set(s.getCacheKey(l,f),g,{ttl:p}),g}catch{t.error(`${c} could not resolve ${l} record ${f}`)}throw new Error(`Could not resolve ${l} record ${f}`)}async resolveTxt(l){const f="TXT",a=this._cache.get(s.getCacheKey(l,f));if(a)return a;for(const c of this._getShuffledServers())try{const h=await(await s.fetch(s.buildResource({serverResolver:c,hostname:l,recordType:f}))).json(),g=h.Answer.map(_=>[_.data.replace(/['"]+/g,"")]),p=Math.min(h.Answer.map(_=>_.TTL));return this._cache.set(s.getCacheKey(l,f),g,{ttl:p}),g}catch{t.error(`${c} could not resolve ${l} record ${f}`)}throw new Error(`Could not resolve ${l} record ${f}`)}};u.Resolver=u,o.exports=u}}),require_dns_browser=__commonJS({"node_modules/multiaddr/src/resolvers/dns.browser.js"(e,o){init_node_globals();var r=require_src24();o.exports=r}}),require_resolvers=__commonJS({"node_modules/multiaddr/src/resolvers/index.js"(e,o){init_node_globals();var r=require_protocols_table(),{code:t}=r("dnsaddr");async function n(s){const u=require_dns_browser(),l=new u,f=s.getPeerId(),[,a]=s.stringTuples().find(([h])=>h===t)||[];let d=(await l.resolveTxt(`_dnsaddr.${a}`)).flat().map(h=>h.split("=")[1]);return f&&(d=d.filter(h=>h.includes(f))),d}o.exports={dnsaddrResolver:n}}}),require_constants11=__commonJS({"node_modules/libp2p/src/constants.js"(e,o){init_node_globals(),o.exports={DIAL_TIMEOUT:3e4,MAX_PARALLEL_DIALS:100,MAX_PER_PEER_DIALS:4,MAX_ADDRS_TO_DIAL:25,METRICS:{computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3],maxOldPeersRetention:50}}}}),require_package=__commonJS({"node_modules/libp2p/package.json"(e,o){o.exports={name:"libp2p",version:"0.36.2",description:"JavaScript implementation of libp2p, a modular peer to peer network stack",leadMaintainer:"Jacob Heun <jacobheun@gmail.com>",main:"src/index.js",types:"dist/src/index.d.ts",typesVersions:{"*":{"src/*":["dist/src/*","dist/src/*/index"]}},files:["dist","src"],scripts:{lint:"aegir lint",build:"aegir build","build:proto":"npm run build:proto:circuit && npm run build:proto:fetch && npm run build:proto:identify && npm run build:proto:plaintext && npm run build:proto:address-book && npm run build:proto:proto-book && npm run build:proto:peer && npm run build:proto:peer-record && npm run build:proto:envelope","build:proto:circuit":"pbjs -t static-module -w commonjs -r libp2p-circuit --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/circuit/protocol/index.js ./src/circuit/protocol/index.proto","build:proto:fetch":"pbjs -t static-module -w commonjs -r libp2p-fetch --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/fetch/proto.js ./src/fetch/proto.proto","build:proto:identify":"pbjs -t static-module -w commonjs -r libp2p-identify --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/identify/message.js ./src/identify/message.proto","build:proto:plaintext":"pbjs -t static-module -w commonjs -r libp2p-plaintext --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/insecure/proto.js ./src/insecure/proto.proto","build:proto:peer":"pbjs -t static-module -w commonjs -r libp2p-peer --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/peer-store/pb/peer.js ./src/peer-store/pb/peer.proto","build:proto:peer-record":"pbjs -t static-module -w commonjs -r libp2p-peer-record --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/peer-record/peer-record.js ./src/record/peer-record/peer-record.proto","build:proto:envelope":"pbjs -t static-module -w commonjs -r libp2p-envelope --force-number --no-verify --no-delimited --no-create --no-beautify --no-defaults --lint eslint-disable -o src/record/envelope/envelope.js ./src/record/envelope/envelope.proto","build:proto-types":"npm run build:proto-types:circuit && npm run build:proto-types:fetch && npm run build:proto-types:identify && npm run build:proto-types:plaintext && npm run build:proto-types:address-book && npm run build:proto-types:proto-book && npm run build:proto-types:peer && npm run build:proto-types:peer-record && npm run build:proto-types:envelope","build:proto-types:circuit":"pbts -o src/circuit/protocol/index.d.ts src/circuit/protocol/index.js","build:proto-types:fetch":"pbts -o src/fetch/proto.d.ts src/fetch/proto.js","build:proto-types:identify":"pbts -o src/identify/message.d.ts src/identify/message.js","build:proto-types:plaintext":"pbts -o src/insecure/proto.d.ts src/insecure/proto.js","build:proto-types:peer":"pbts -o src/peer-store/pb/peer.d.ts src/peer-store/pb/peer.js","build:proto-types:peer-record":"pbts -o src/record/peer-record/peer-record.d.ts src/record/peer-record/peer-record.js","build:proto-types:envelope":"pbts -o src/record/envelope/envelope.d.ts src/record/envelope/envelope.js",test:"aegir test","test:ts":"aegir build --no-bundle && npm run test --prefix test/ts-use","test:node":'aegir test -t node -f "./test/**/*.{node,spec}.js"',"test:browser":"aegir test -t browser","test:examples":"cd examples && npm run test:all","test:interop":"LIBP2P_JS=$PWD npx aegir test -t node -f ./node_modules/libp2p-interop/test/*",prepare:"npm run build",coverage:"nyc --reporter=text --reporter=lcov npm run test:node"},repository:{type:"git",url:"https://github.com/libp2p/js-libp2p.git"},keywords:["libp2p","network","p2p","peer","peer-to-peer","IPFS"],bugs:{url:"https://github.com/libp2p/js-libp2p/issues"},homepage:"https://libp2p.io",license:"MIT",engines:{node:">=15.0.0"},browser:{"nat-api":!1},eslintConfig:{extends:"ipfs",ignorePatterns:["!.aegir.js","test/ts-use","*.d.ts"]},dependencies:{"@vascosantos/moving-average":"^1.1.0","abortable-iterator":"^3.0.0","aggregate-error":"^3.1.0","any-signal":"^3.0.0","bignumber.js":"^9.0.1","class-is":"^1.1.0","datastore-core":"^7.0.0",debug:"^4.3.1","err-code":"^3.0.0","es6-promisify":"^7.0.0",events:"^3.3.0",hashlru:"^2.3.0","interface-datastore":"^6.0.2","it-all":"^1.0.4","it-buffer":"^0.1.2","it-drain":"^1.0.3","it-filter":"^1.0.1","it-first":"^1.0.4","it-foreach":"^0.1.1","it-handshake":"^2.0.0","it-length-prefixed":"^5.0.2","it-map":"^1.0.4","it-merge":"^1.0.0","it-pipe":"^1.1.0","it-sort":"^1.0.1","it-take":"^1.0.0","libp2p-crypto":"^0.21.2","libp2p-interfaces":"^4.0.0","libp2p-utils":"^0.4.0",mafmt:"^10.0.0","merge-options":"^3.0.4",mortice:"^2.0.1",multiaddr:"^10.0.0",multiformats:"^9.0.0","multistream-select":"^3.0.0","mutable-proxy":"^1.0.0","nat-api":"^0.3.1","node-forge":"^1.2.1","p-any":"^3.0.0","p-fifo":"^1.0.0","p-retry":"^4.4.0","p-settle":"^4.1.1","peer-id":"^0.16.0","private-ip":"^2.1.0",protobufjs:"^6.10.2",retimer:"^3.0.0","sanitize-filename":"^1.6.3","set-delayed-interval":"^1.0.0","streaming-iterables":"^6.0.0","timeout-abort-controller":"^3.0.0",uint8arrays:"^3.0.0",varint:"^6.0.0",wherearewe:"^1.0.0",xsalsa20:"^1.1.0"},devDependencies:{"@chainsafe/libp2p-noise":"^5.0.0","@nodeutils/defaults-deep":"^1.1.0","@types/es6-promisify":"^6.0.0","@types/node":"^16.0.1","@types/node-forge":"^1.0.0","@types/varint":"^6.0.0",aegir:"^36.0.0",buffer:"^6.0.3",delay:"^5.0.0","into-stream":"^6.0.0","ipfs-http-client":"^54.0.2","it-concat":"^2.0.0","it-pair":"^1.0.0","it-pushable":"^1.4.0",libp2p:".","libp2p-bootstrap":"^0.14.0","libp2p-delegated-content-routing":"^0.11.0","libp2p-delegated-peer-routing":"^0.11.1","libp2p-interfaces-compliance-tests":"^4.0.8","libp2p-interop":"^0.7.1","libp2p-kad-dht":"^0.28.6","libp2p-mdns":"^0.18.0","libp2p-mplex":"^0.10.4","libp2p-tcp":"^0.17.0","libp2p-webrtc-star":"^0.25.0","libp2p-websockets":"^0.16.0",nock:"^13.0.3","p-defer":"^3.0.0","p-times":"^3.0.0","p-wait-for":"^3.2.0",rimraf:"^3.0.2",sinon:"^12.0.1",util:"^0.12.3"},contributors:["Vasco Santos <vasco.santos@moxy.studio>","David Dias <daviddias.p@gmail.com>","Jacob Heun <jacobheun@gmail.com>","Alex Potsides <alex@achingbrain.net>","Alan Shaw <alan@tableflip.io>","Cayman <caymannava@gmail.com>","Pedro Teixeira <i@pgte.me>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Maciej Kr\xFCger <mkg20001@gmail.com>","Hugo Dias <mail@hugodias.me>","dirkmc <dirkmdev@gmail.com>","Volker Mische <volker.mische@gmail.com>","Chris Dostert <chrisdostert@users.noreply.github.com>","zeim839 <50573884+zeim839@users.noreply.github.com>","Robert Kiel <robert.kiel@hoprnet.org>","Richard Littauer <richard.littauer@gmail.com>","a1300 <matthias-knopp@gmx.net>","Ryan Bell <ryan@piing.net>","\u1D20\u026A\u1D04\u1D1B\u1D0F\u0280 \u0299\u1D0A\u1D07\u029F\u1D0B\u029C\u1D0F\u029F\u1D0D <victorbjelkholm@gmail.com>","Andrew Nesbitt <andrewnez@gmail.com>","Franck Royer <franck@royer.one>","Thomas Eizinger <thomas@eizinger.io>","V\xEDt Habada <vithabada93@gmail.com>","Giovanni T. Parra <fiatjaf@gmail.com>","acolytec3 <17355484+acolytec3@users.noreply.github.com>","Alan Smithee <ggnore.alan.smithee@gmail.com>","Elven <mon.samuel@qq.com>","Samlior <samlior@foxmail.com>","Didrik Nordstr\xF6m <didrik.nordstrom@gmail.com>","Aditya Bose <13054902+adbose@users.noreply.github.com>","TJKoury <TJKoury@gmail.com>","TheStarBoys <41286328+TheStarBoys@users.noreply.github.com>","Tiago Alves <alvesjtiago@gmail.com>","Tim Daubensch\xFCtz <tim@daubenschuetz.de>","XiaoZhang <zxinmyth@gmail.com>","Yusef Napora <yusef@napora.org>","Zane Starr <zcstarr@gmail.com>","ebinks <elizabethjbinks@gmail.com>","greenSnot <greenSnot@users.noreply.github.com>","isan_rivkin <isanrivkin@gmail.com>","mayerwin <mayerwin@users.noreply.github.com>","mcclure <andi.m.mcclure@gmail.com>","patrickwoodhead <91056047+patrickwoodhead@users.noreply.github.com>","phillmac <phillmac@users.noreply.github.com>","robertkiel <robert.kiel@validitylabs.org>","shresthagrawal <34920931+shresthagrawal@users.noreply.github.com>","swedneck <40505480+swedneck@users.noreply.github.com>","tuyennhv <vutuyen2636@gmail.com>","S\xF6nke Hahn <soenkehahn@gmail.com>","Aleksei <vozhdb@gmail.com>","Bernd Strehl <bernd.strehl@gmail.com>","Chris Bratlien <chrisbratlien@gmail.com>","Cindy Wu <ciindy.wu@gmail.com>","Daijiro Wachi <daijiro.wachi@gmail.com>","Diogo Silva <fsdiogo@gmail.com>","Dmitriy Ryajov <dryajov@gmail.com>","Ethan Lam <elmemphis2000@gmail.com>","Fei Liu <liu.feiwood@gmail.com>","Felipe Martins <felipebrasil93@gmail.com>","Florian-Merle <florian.david.merle@gmail.com>","Francis Gulotta <wizard@roborooter.com>","Guy Sviry <32539816+guysv@users.noreply.github.com>","Henrique Dias <hacdias@gmail.com>","Irakli Gozalishvili <rfobic@gmail.com>","Joel Gustafson <joelg@mit.edu>","John Rees <johnrees@users.noreply.github.com>","Jo\xE3o Santos <joaosantos15@users.noreply.github.com>","Julien Bouquillon <contact@revolunet.com>","Kevin Kwok <antimatter15@gmail.com>","Kevin Lacker <lacker@gmail.com>","Lars Gierth <lgierth@users.noreply.github.com>","Leask Wong <i@leaskh.com>","Marcin Tojek <mtojek@users.noreply.github.com>","Marston Connell <34043723+TheMarstonConnell@users.noreply.github.com>","Michael Burns <5170+mburns@users.noreply.github.com>","Miguel Mota <miguelmota2@gmail.com>","Nuno Nogueira <nunofmn@gmail.com>","Philipp Muens <raute1337@gmx.de>","RasmusErik Voel Jensen <github@solsort.com>","Smite Chow <xiaopengyou@live.com>","Soeren <nikorpoulsen@gmail.com>"]}}}),require_consts=__commonJS({"node_modules/libp2p/src/identify/consts.js"(e,o){init_node_globals();var r=require_package().version;o.exports.PROTOCOL_VERSION="ipfs/0.1.0",o.exports.AGENT_VERSION=`js-libp2p/${r}`,o.exports.MULTICODEC_IDENTIFY="/ipfs/id/1.0.0",o.exports.MULTICODEC_IDENTIFY_PUSH="/ipfs/id/push/1.0.0",o.exports.IDENTIFY_PROTOCOL_VERSION="0.1.0",o.exports.MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",o.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",o.exports.MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",o.exports.MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0"}}),require_constants12=__commonJS({"node_modules/libp2p/src/circuit/constants.js"(e,o){init_node_globals();var r=60*1e3;o.exports={ADVERTISE_BOOT_DELAY:15*r,ADVERTISE_TTL:30*r,CIRCUIT_PROTO_CODE:290,HOP_METADATA_KEY:"hop_relay",HOP_METADATA_VALUE:"true",RELAY_RENDEZVOUS_NS:"/libp2p/relay"}}}),require_is_private=__commonJS({"node_modules/libp2p-utils/src/multiaddr/is-private.js"(e,o){init_node_globals();var r=require_private_ip();function t(n){const{address:s}=n.nodeAddress();return r(s)}o.exports=t}}),require_address_sort=__commonJS({"node_modules/libp2p-utils/src/address-sort.js"(e,o){init_node_globals();var r=require_is_private();function t(s,u){const l=r(s.multiaddr),f=r(u.multiaddr);return l&&!f?1:!l&&f||s.isCertified&&!u.isCertified?-1:!s.isCertified&&u.isCertified?1:0}function n(s){return[...s].sort(t)}o.exports.publicAddressesFirst=n}}),require_p_reflect=__commonJS({"node_modules/p-reflect/index.js"(e,o){init_node_globals();var r=async t=>{try{const n=await t;return{isFulfilled:!0,isRejected:!1,value:n}}catch(n){return{isFulfilled:!1,isRejected:!0,reason:n}}};o.exports=r,o.exports.default=r}}),require_p_try=__commonJS({"node_modules/p-try/index.js"(e,o){init_node_globals();var r=(t,...n)=>new Promise(s=>{s(t(...n))});o.exports=r,o.exports.default=r}}),require_p_limit=__commonJS({"node_modules/p-limit/index.js"(e,o){init_node_globals();var r=require_p_try(),t=n=>{if(!((Number.isInteger(n)||n===1/0)&&n>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const s=[];let u=0;const l=()=>{u--,s.length>0&&s.shift()()},f=(d,h,...g)=>{u++;const p=r(d,...g);h(p),p.then(l,l)},a=(d,h,...g)=>{u<n?f(d,h,...g):s.push(f.bind(null,d,h,...g))},c=(d,...h)=>new Promise(g=>a(d,g,...h));return Object.defineProperties(c,{activeCount:{get:()=>u},pendingCount:{get:()=>s.length},clearQueue:{value:()=>{s.length=0}}}),c};o.exports=t,o.exports.default=t}}),require_p_settle=__commonJS({"node_modules/p-settle/index.js"(e,o){init_node_globals();var r=require_p_reflect(),t=require_p_limit();o.exports=async(n,s={})=>{const{concurrency:u=1/0}=s,l=t(u);return Promise.all(n.map(f=>f&&typeof f.then=="function"?r(f):r(typeof f=="function"?l(()=>f()):Promise.resolve(f))))}}}),require_array_equals=__commonJS({"node_modules/libp2p-utils/src/array-equals.js"(e,o){init_node_globals();function r(t,n){return t.length===n.length&&n.sort()&&t.sort().every((s,u)=>n[u].equals(s))}o.exports=r}}),require_peer_record=__commonJS({"node_modules/libp2p/src/record/peer-record/peer-record.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-peer-record"]||(r.roots["libp2p-peer-record"]={});u.PeerRecord=function(){function l(f){if(this.addresses=[],f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.peerId=s.newBuffer([]),l.prototype.seq=s.Long?s.Long.fromBits(0,0,!0):0,l.prototype.addresses=s.emptyArray,l.encode=function(a,c){if(c||(c=n.create()),a.peerId!=null&&Object.hasOwnProperty.call(a,"peerId")&&c.uint32(10).bytes(a.peerId),a.seq!=null&&Object.hasOwnProperty.call(a,"seq")&&c.uint32(16).uint64(a.seq),a.addresses!=null&&a.addresses.length)for(var d=0;d<a.addresses.length;++d)u.PeerRecord.AddressInfo.encode(a.addresses[d],c.uint32(26).fork()).ldelim();return c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.PeerRecord;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.peerId=a.bytes();break;case 2:h.seq=a.uint64();break;case 3:h.addresses&&h.addresses.length||(h.addresses=[]),h.addresses.push(u.PeerRecord.AddressInfo.decode(a,a.uint32()));break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.PeerRecord)return a;var c=new u.PeerRecord;if(a.peerId!=null&&(typeof a.peerId=="string"?s.base64.decode(a.peerId,c.peerId=s.newBuffer(s.base64.length(a.peerId)),0):a.peerId.length&&(c.peerId=a.peerId)),a.seq!=null&&(s.Long?(c.seq=s.Long.fromValue(a.seq)).unsigned=!0:typeof a.seq=="string"?c.seq=parseInt(a.seq,10):typeof a.seq=="number"?c.seq=a.seq:typeof a.seq=="object"&&(c.seq=new s.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0))),a.addresses){if(!Array.isArray(a.addresses))throw TypeError(".PeerRecord.addresses: array expected");c.addresses=[];for(var d=0;d<a.addresses.length;++d){if(typeof a.addresses[d]!="object")throw TypeError(".PeerRecord.addresses: object expected");c.addresses[d]=u.PeerRecord.AddressInfo.fromObject(a.addresses[d])}}return c},l.toObject=function(a,c){c||(c={});var d={};if((c.arrays||c.defaults)&&(d.addresses=[]),c.defaults)if(c.bytes===String?d.peerId="":(d.peerId=[],c.bytes!==Array&&(d.peerId=s.newBuffer(d.peerId))),s.Long){var h=new s.Long(0,0,!0);d.seq=c.longs===String?h.toString():c.longs===Number?h.toNumber():h}else d.seq=c.longs===String?"0":0;if(a.peerId!=null&&a.hasOwnProperty("peerId")&&(d.peerId=c.bytes===String?s.base64.encode(a.peerId,0,a.peerId.length):c.bytes===Array?Array.prototype.slice.call(a.peerId):a.peerId),a.seq!=null&&a.hasOwnProperty("seq")&&(typeof a.seq=="number"?d.seq=c.longs===String?String(a.seq):a.seq:d.seq=c.longs===String?s.Long.prototype.toString.call(a.seq):c.longs===Number?new s.LongBits(a.seq.low>>>0,a.seq.high>>>0).toNumber(!0):a.seq),a.addresses&&a.addresses.length){d.addresses=[];for(var g=0;g<a.addresses.length;++g)d.addresses[g]=u.PeerRecord.AddressInfo.toObject(a.addresses[g],c)}return d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.AddressInfo=function(){function f(a){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}return f.prototype.multiaddr=s.newBuffer([]),f.encode=function(c,d){return d||(d=n.create()),c.multiaddr!=null&&Object.hasOwnProperty.call(c,"multiaddr")&&d.uint32(10).bytes(c.multiaddr),d},f.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.PeerRecord.AddressInfo;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.multiaddr=c.bytes();break;default:c.skipType(p&7);break}}return g},f.fromObject=function(c){if(c instanceof u.PeerRecord.AddressInfo)return c;var d=new u.PeerRecord.AddressInfo;return c.multiaddr!=null&&(typeof c.multiaddr=="string"?s.base64.decode(c.multiaddr,d.multiaddr=s.newBuffer(s.base64.length(c.multiaddr)),0):c.multiaddr.length&&(d.multiaddr=c.multiaddr)),d},f.toObject=function(c,d){d||(d={});var h={};return d.defaults&&(d.bytes===String?h.multiaddr="":(h.multiaddr=[],d.bytes!==Array&&(h.multiaddr=s.newBuffer(h.multiaddr)))),c.multiaddr!=null&&c.hasOwnProperty("multiaddr")&&(h.multiaddr=d.bytes===String?s.base64.encode(c.multiaddr,0,c.multiaddr.length):d.bytes===Array?Array.prototype.slice.call(c.multiaddr):c.multiaddr),h},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f}(),l}(),o.exports=u}}),require_consts2=__commonJS({"node_modules/libp2p/src/record/peer-record/consts.js"(e,o){init_node_globals();var r="libp2p-peer-record",t=Uint8Array.from([3,1]);o.exports={ENVELOPE_DOMAIN_PEER_RECORD:r,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:t}}}),require_peer_record2=__commonJS({"node_modules/libp2p/src/record/peer-record/index.js"(e,o){init_node_globals();var{Multiaddr:r}=require_src(),t=require_src5(),n=require_array_equals(),{PeerRecord:s}=require_peer_record(),{ENVELOPE_DOMAIN_PEER_RECORD:u,ENVELOPE_PAYLOAD_TYPE_PEER_RECORD:l}=require_consts2(),f=class{constructor({peerId:a,multiaddrs:c=[],seqNumber:d=Date.now()}){this.domain=u,this.codec=l,this.peerId=a,this.multiaddrs=c,this.seqNumber=d,this._marshal=void 0}marshal(){return this._marshal?this._marshal:(this._marshal=s.encode({peerId:this.peerId.toBytes(),seq:this.seqNumber,addresses:this.multiaddrs.map(a=>({multiaddr:a.bytes}))}).finish(),this._marshal)}equals(a){return!(!(a instanceof f)||!this.peerId.equals(a.peerId)||this.seqNumber!==a.seqNumber||!n(this.multiaddrs,a.multiaddrs))}};f.createFromProtobuf=a=>{const c=s.decode(a),d=t.createFromBytes(c.peerId),h=(c.addresses||[]).map(p=>new r(p.multiaddr)),g=Number(c.seq);return new f({peerId:d,multiaddrs:h,seqNumber:g})},f.DOMAIN=u,o.exports=f}}),require_utils16=__commonJS({"node_modules/libp2p/src/record/utils.js"(e,o){init_node_globals();var r=require_envelope2(),t=require_peer_record2();async function n(s){const u=new t({peerId:s.peerId,multiaddrs:s.multiaddrs}),l=await r.seal(u,s.peerId);await s.peerStore.addressBook.consumePeerRecord(l)}o.exports.updateSelfPeerRecord=n}}),require_transport_manager=__commonJS({"node_modules/libp2p/src/transport-manager.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:transports"),{error:r("libp2p:transports:err")}),n=require_p_settle(),{codes:s}=require_errors4(),u=require_err_code(),{updateSelfPeerRecord:l}=require_utils16(),f=class{constructor({libp2p:c,upgrader:d,faultTolerance:h=a.FATAL_ALL}){this.libp2p=c,this.upgrader=d,this._transports=new Map,this._listeners=new Map,this._listenerOptions=new Map,this.faultTolerance=h}add(c,d,h={}){if(t("adding %s",c),!c)throw u(new Error(`Transport must have a valid key, was given '${c}'`),s.ERR_INVALID_KEY);if(this._transports.has(c))throw u(new Error("There is already a transport with this key"),s.ERR_DUPLICATE_TRANSPORT);const g=new d($e(Re({},h),{libp2p:this.libp2p,upgrader:this.upgrader}));this._transports.set(c,g),this._listenerOptions.set(c,h.listenerOptions||{}),this._listeners.has(c)||this._listeners.set(c,[])}async close(){const c=[];for(const[d,h]of this._listeners)for(t("closing listeners for %s",d);h.length;){const g=h.pop();g.removeAllListeners("listening"),g.removeAllListeners("close"),c.push(g.close())}await Promise.all(c),t("all listeners closed");for(const d of this._listeners.keys())this._listeners.set(d,[])}async dial(c,d){const h=this.transportForMultiaddr(c);if(!h)throw u(new Error(`No transport available for address ${String(c)}`),s.ERR_TRANSPORT_UNAVAILABLE);try{return await h.dial(c,d)}catch(g){throw g.code||(g.code=s.ERR_TRANSPORT_DIAL_FAILED),g}}getAddrs(){let c=[];for(const d of this._listeners.values())for(const h of d)c=[...c,...h.getAddrs()];return c}getTransports(){return this._transports.values()}transportForMultiaddr(c){for(const d of this._transports.values())if(d.filter([c]).length)return d;return null}async listen(c){if(!c||c.length===0){t("no addresses were provided for listening, this node is dial only");return}const d=[];for(const[h,g]of this._transports.entries()){const p=g.filter(c),_=[];for(const w of p){t("creating listener for %s on %s",h,w);const y=g.createListener(this._listenerOptions.get(h));this._listeners.get(h).push(y),y.on("listening",()=>l(this.libp2p)),y.on("close",()=>l(this.libp2p)),_.push(y.listen(w))}if(_.length===0){d.push(h);continue}if(!(await n(_)).find(w=>w.isFulfilled===!0)&&this.faultTolerance!==a.NO_FATAL)throw u(new Error(`Transport (${h}) could not listen on any available address`),s.ERR_NO_VALID_ADDRESSES)}if(d.length===this._transports.size){const h=`no valid addresses were provided for transports [${d}]`;if(this.faultTolerance===a.FATAL_ALL)throw u(new Error(h),s.ERR_NO_VALID_ADDRESSES);t(`libp2p in dial mode only: ${h}`)}}async remove(c){if(t("removing %s",c),this._listeners.has(c))for(const d of this._listeners.get(c))d.removeAllListeners("listening"),d.removeAllListeners("close"),await d.close();this._transports.delete(c),this._listeners.delete(c)}async removeAll(){const c=[];for(const d of this._transports.keys())c.push(this.remove(d));await Promise.all(c)}},a={FATAL_ALL:0,NO_FATAL:1};f.FaultTolerance=a,o.exports=f}}),require_config3=__commonJS({"node_modules/libp2p/src/config.js"(e,o){init_node_globals();var r=require_merge_options(),{dnsaddrResolver:t}=require_resolvers(),n=require_constants11(),{AGENT_VERSION:s}=require_consts(),u=require_constants12(),{publicAddressesFirst:l}=require_address_sort(),{FaultTolerance:f}=require_transport_manager(),a={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:c=>c},connectionManager:{minConnections:25},connectionGater:{},transportManager:{faultTolerance:f.FATAL_ALL},dialer:{maxParallelDials:n.MAX_PARALLEL_DIALS,maxDialsPerPeer:n.MAX_PER_PEER_DIALS,dialTimeout:n.DIAL_TIMEOUT,resolvers:{dnsaddr:t},addressSorter:l},host:{agentVersion:s},metrics:{enabled:!1},peerStore:{persistence:!1,threshold:5},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},config:{protocolPrefix:"ipfs",dht:{enabled:!1,kBucketSize:20},nat:{enabled:!0,ttl:7200,keepAlive:!0,gateway:null,externalIp:null,pmp:{enabled:!1}},peerDiscovery:{autoDial:!0},pubsub:{enabled:!0},relay:{enabled:!0,advertise:{bootDelay:u.ADVERTISE_BOOT_DELAY,enabled:!1,ttl:u.ADVERTISE_TTL},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},transport:{}}};o.exports.validate=c=>{const d=r(a,c);if(d.modules.transport.length<1)throw new Error("'options.modules.transport' must contain at least 1 transport");return d}}}),require_address_manager=__commonJS({"node_modules/libp2p/src/address-manager/index.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),{Multiaddr:t}=require_src(),n=require_src5(),s=class extends r{constructor(u,{listen:l=[],announce:f=[]}={}){super();this.peerId=u,this.listen=new Set(l.map(a=>a.toString())),this.announce=new Set(f.map(a=>a.toString())),this.observed=new Set}getListenAddrs(){return Array.from(this.listen).map(u=>new t(u))}getAnnounceAddrs(){return Array.from(this.announce).map(u=>new t(u))}getObservedAddrs(){return Array.from(this.observed).map(u=>new t(u))}addObservedAddr(u){let l=new t(u);const f=l.getPeerId();f&&n.createFromB58String(f).equals(this.peerId)&&(l=l.decapsulate(new t(`/p2p/${this.peerId}`)));const a=l.toString();this.observed.has(a)||(this.observed.add(a),this.emit("change:addresses"))}};o.exports=s}}),require_visibility_change_emitter=__commonJS({"node_modules/libp2p/src/connection-manager/visibility-change-emitter.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),t=require_browser2()("latency-monitor:VisibilityChangeEmitter"),n=class extends r{constructor(){super();if(typeof document=="undefined"){t('This is not a browser, no "document" found. Stopping.');return}this._initializeVisibilityVarNames(),this._addVisibilityChangeListener()}_initializeVisibilityVarNames(){let s,u;typeof document.hidden!="undefined"?(s="hidden",u="visibilitychange"):typeof document.mozHidden!="undefined"?(s="mozHidden",u="mozvisibilitychange"):typeof document.msHidden!="undefined"?(s="msHidden",u="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(s="webkitHidden",u="webkitvisibilitychange"),this._hidden=s,this._visibilityChange=u}_addVisibilityChangeListener(){typeof document.addEventListener=="undefined"||typeof document[this._hidden]=="undefined"?t("Checking page visibility requires a browser that supports the Page Visibility API."):document.addEventListener(this._visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(!(this._hidden===void 0||document[this._hidden]===void 0))return!document[this._hidden]}_handleVisibilityChange(){const s=!document[this._hidden];t(s?"Page Visible":"Page Hidden"),this.emit("visibilityChange",s)}};o.exports=n}}),require_latency_monitor=__commonJS({"node_modules/libp2p/src/connection-manager/latency-monitor.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),t=require_visibility_change_emitter(),n=require_browser2()("latency-monitor:LatencyMonitor"),s=class extends r{constructor({latencyCheckIntervalMs:l,dataEmitIntervalMs:f,asyncTestFn:a,latencyRandomPercentage:c}={}){super();const d=this;d.latencyCheckIntervalMs=l||500,d.latencyRandomPercentage=c||10,d._latecyCheckMultiply=2*(d.latencyRandomPercentage/100)*d.latencyCheckIntervalMs,d._latecyCheckSubtract=d._latecyCheckMultiply/2,d.dataEmitIntervalMs=f===null||f===0?void 0:f||5*1e3,n("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",d.latencyCheckIntervalMs,d.dataEmitIntervalMs),d.dataEmitIntervalMs?n("Expecting ~%s events per summary",d.latencyCheckIntervalMs/d.dataEmitIntervalMs):n("Not emitting summaries"),d.asyncTestFn=a}start(){globalThis.process&&globalThis.process.hrtime?(n("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=l=>{const f=this.now(l);return f[0]*1e3+f[1]/1e6}):typeof window!="undefined"&&window.performance&&window.performance.now?(n("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=l=>Math.round(this.now()-l)):(n("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=l=>this.now()-l),this._latencyData=this._initLatencyData(),u()&&(this._visibilityChangeEmitter=new t,this._visibilityChangeEmitter.on("visibilityChange",l=>{l?this._startTimers():(this._emitSummary(),this._stopTimers())})),(!this._visibilityChangeEmitter||this._visibilityChangeEmitter.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){this._checkLatencyID||(this._checkLatency(),this.dataEmitIntervalMs&&(this._emitIntervalID=setInterval(()=>this._emitSummary(),this.dataEmitIntervalMs),typeof this._emitIntervalID.unref=="function"&&this._emitIntervalID.unref()))}_stopTimers(){this._checkLatencyID&&(clearTimeout(this._checkLatencyID),this._checkLatencyID=void 0),this._emitIntervalID&&(clearInterval(this._emitIntervalID),this._emitIntervalID=void 0)}_emitSummary(){const l=this.getSummary();l.events>0&&this.emit("data",l)}getSummary(){const l={events:this._latencyData.events,minMs:this._latencyData.minMs,maxMs:this._latencyData.maxMs,avgMs:this._latencyData.events?this._latencyData.totalMs/this._latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this._latencyData.startTime)};return this._latencyData=this._initLatencyData(),n("Summary: %O",l),l}_checkLatency(){const l=this,f=Math.random()*l._latecyCheckMultiply-l._latecyCheckSubtract,a={deltaOffset:Math.ceil(l.latencyCheckIntervalMs+f),startTime:l.now()},c=()=>{if(!this._checkLatencyID)return;const d=l.getDeltaMS(a.startTime)-a.deltaOffset;l._checkLatency(),l._latencyData.events++,l._latencyData.minMs=Math.min(l._latencyData.minMs,d),l._latencyData.maxMs=Math.max(l._latencyData.maxMs,d),l._latencyData.totalMs+=d,n("MS: %s Data: %O",d,l._latencyData)};n("localData: %O",a),this._checkLatencyID=setTimeout(()=>{l.asyncTestFn?(a.deltaOffset=0,a.startTime=l.now(),l.asyncTestFn(c)):(a.deltaOffset-=1,c())},a.deltaOffset),typeof this._checkLatencyID.unref=="function"&&this._checkLatencyID.unref()}_initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}};function u(){return typeof window!="undefined"}o.exports=s}}),require_tracked_map=__commonJS({"node_modules/libp2p/src/metrics/tracked-map.js"(e,o){init_node_globals();var r=class extends Map{constructor(t){super();const{system:n,component:s,metric:u,metrics:l}=t;this._system=n,this._component=s,this._metric=u,this._metrics=l,this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}set(t,n){return super.set(t,n),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),this}delete(t){const n=super.delete(t);return this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size}),n}clear(){super.clear(),this._metrics.updateComponentMetric({system:this._system,component:this._component,metric:this._metric,value:this.size})}};o.exports=({system:t="libp2p",component:n,metric:s,metrics:u})=>{let l;return u?l=new r({system:t,component:n,metric:s,metrics:u}):l=new Map,l}}}),require_connection_manager=__commonJS({"node_modules/libp2p/src/connection-manager/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:connection-manager"),{error:r("libp2p:connection-manager:err")}),n=require_err_code(),s=require_merge_options(),u=require_latency_monitor(),l=require_retimer(),{EventEmitter:f}=require_events(),a=require_tracked_map(),c=require_src5(),{codes:{ERR_INVALID_PARAMETERS:d}}=require_errors4(),h={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:1},g="connection-manager",p="peer-connections",_="peer-values",m=class extends f{constructor(v,w={}){super();if(this._libp2p=v,this._peerId=v.peerId.toB58String(),this._options=s.call({ignoreUndefined:!0},h,w),this._options.maxConnections<this._options.minConnections)throw n(new Error("Connection Manager maxConnections must be greater than minConnections"),d);t("options: %j",this._options),this._peerValues=a({component:g,metric:_,metrics:this._libp2p.metrics}),this.connections=a({component:g,metric:p,metrics:this._libp2p.metrics}),this._started=!1,this._timer=null,this._checkMetrics=this._checkMetrics.bind(this),this._latencyMonitor=new u({latencyCheckIntervalMs:this._options.pollInterval,dataEmitIntervalMs:this._options.pollInterval}),this.setMaxListeners(1/0)}get size(){return Array.from(this.connections.values()).reduce((v,w)=>v+w.length,0)}start(){this._libp2p.metrics&&(this._timer=this._timer||l(this._checkMetrics,this._options.pollInterval)),this._latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure),this._started=!0,t("started")}async stop(){this._timer&&this._timer.clear(),this._latencyMonitor.removeListener("data",this._onLatencyMeasure),this._latencyMonitor.stop(),this._started=!1,await this._close(),t("stopped")}async _close(){const v=[];for(const w of this.connections.values())for(const y of w)v.push(y.close());await Promise.all(v),this.connections.clear()}setPeerValue(v,w){if(w<0||w>1)throw new Error("value should be a number between 0 and 1");this._peerValues.set(v.toB58String(),w)}async _checkMetrics(){if(this._libp2p.metrics)try{const v=this._libp2p.metrics.global.movingAverages,w=v.dataReceived[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxReceivedData",w);const y=v.dataSent[this._options.movingAverageInterval].movingAverage();await this._checkMaxLimit("maxSentData",y);const b=w+y;await this._checkMaxLimit("maxData",b),t("metrics update",b)}finally{this._timer=l(this._checkMetrics,this._options.pollInterval)}}async onConnect(v){if(!this._started){await v.close();return}const w=v.remotePeer,y=w.toB58String(),b=this.connections.get(y);this.emit("peer:connect",v),b?b.push(v):this.connections.set(y,[v]),await this._libp2p.peerStore.keyBook.set(w,w.pubKey),this._peerValues.has(y)||this._peerValues.set(y,this._options.defaultPeerValue),await this._checkMaxLimit("maxConnections",this.size)}onDisconnect(v){if(!this._started)return;const w=v.remotePeer.toB58String();let y=this.connections.get(w);y&&y.length>1?(y=y.filter(b=>b.id!==v.id),this.connections.set(w,y)):y&&(this.connections.delete(w),this._peerValues.delete(v.remotePeer.toB58String()),this.emit("peer:disconnect",v),this._libp2p.metrics&&this._libp2p.metrics.onPeerDisconnected(v.remotePeer))}get(v){const w=this.getAll(v);return w.length?w[0]:null}getAll(v){if(!c.isPeerId(v))throw n(new Error("peerId must be an instance of peer-id"),d);const w=v.toB58String(),y=this.connections.get(w);return y?y.filter(b=>b.stat.status==="open"):[]}_onLatencyMeasure(v){this._checkMaxLimit("maxEventLoopDelay",v.avgMs).catch(w=>{t.error(w)})}async _checkMaxLimit(v,w){const y=this._options[v];t("checking limit of %s. current value: %d of %d",v,w,y),w>y&&(t("%s: limit exceeded: %s, %d",this._peerId,v,w),await this._maybeDisconnectOne())}async _maybeDisconnectOne(){if(this._options.minConnections<this.connections.size){const v=Array.from(new Map([...this._peerValues.entries()].sort((y,b)=>y[1]-b[1])));t("%s: sorted peer values: %j",this._peerId,v);const w=v[0];if(w){const y=w[0];t("%s: lowest value peer is %s",this._peerId,y),t("%s: closing a connection to %j",this._peerId,y);for(const b of this.connections.values())if(b[0].remotePeer.toB58String()===y){b[0].close().catch(T=>{t.error(T)}),this.onDisconnect(b[0]);break}}}}};o.exports=m}}),require_auto_dialler=__commonJS({"node_modules/libp2p/src/connection-manager/auto-dialler.js"(e,o){init_node_globals();var r=require_browser2(),t=require_merge_options(),n=require_retimer(),s=require_it_all(),{pipe:u}=require_it_pipe(),l=require_it_filter(),f=require_it_sort(),a=Object.assign(r("libp2p:connection-manager:auto-dialler"),{error:r("libp2p:connection-manager:auto-dialler:err")}),c={enabled:!0,minConnections:0,autoDialInterval:1e4},d=class{constructor(h,g={}){this._options=t.call({ignoreUndefined:!0},c,g),this._libp2p=h,this._running=!1,this._autoDialTimeout=null,this._autoDial=this._autoDial.bind(this),a("options: %j",this._options)}async start(){if(!this._options.enabled){a("not enabled");return}this._running=!0,this._autoDial().catch(h=>{a.error("could start autodial",h)}),a("started")}async stop(){if(!this._options.enabled){a("not enabled");return}this._running=!1,this._autoDialTimeout&&this._autoDialTimeout.clear(),a("stopped")}async _autoDial(){const h=this._options.minConnections;if(this._libp2p.connections.size>=h){this._autoDialTimeout=n(this._autoDial,this._options.autoDialInterval);return}const g=await u(this._libp2p.peerStore.getPeers(),p=>l(p,_=>!_.id.equals(this._libp2p.peerId)),p=>f(p,(_,m)=>m.protocols&&m.protocols.length&&(!_.protocols||!_.protocols.length)||m.id.pubKey&&!_.id.pubKey?1:-1),p=>s(p));for(let p=0;this._running&&p<g.length&&this._libp2p.connections.size<h;p++){const _=g[p];if(!this._libp2p.connectionManager.get(_.id)){a("connecting to a peerStore stored peer %s",_.id.toB58String());try{await this._libp2p.dialer.connectToPeer(_.id)}catch(m){a.error("could not connect to peerStore stored peer",m)}}}!this._running||(this._autoDialTimeout=n(this._autoDial,this._options.autoDialInterval))}};o.exports=d}}),require_protocol=__commonJS({"node_modules/libp2p/src/circuit/protocol/index.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-circuit"]||(r.roots["libp2p-circuit"]={});u.CircuitRelay=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.type=1,l.prototype.srcPeer=null,l.prototype.dstPeer=null,l.prototype.code=100,l.encode=function(a,c){return c||(c=n.create()),a.type!=null&&Object.hasOwnProperty.call(a,"type")&&c.uint32(8).int32(a.type),a.srcPeer!=null&&Object.hasOwnProperty.call(a,"srcPeer")&&u.CircuitRelay.Peer.encode(a.srcPeer,c.uint32(18).fork()).ldelim(),a.dstPeer!=null&&Object.hasOwnProperty.call(a,"dstPeer")&&u.CircuitRelay.Peer.encode(a.dstPeer,c.uint32(26).fork()).ldelim(),a.code!=null&&Object.hasOwnProperty.call(a,"code")&&c.uint32(32).int32(a.code),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.CircuitRelay;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.type=a.int32();break;case 2:h.srcPeer=u.CircuitRelay.Peer.decode(a,a.uint32());break;case 3:h.dstPeer=u.CircuitRelay.Peer.decode(a,a.uint32());break;case 4:h.code=a.int32();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.CircuitRelay)return a;var c=new u.CircuitRelay;switch(a.type){case"HOP":case 1:c.type=1;break;case"STOP":case 2:c.type=2;break;case"STATUS":case 3:c.type=3;break;case"CAN_HOP":case 4:c.type=4;break}if(a.srcPeer!=null){if(typeof a.srcPeer!="object")throw TypeError(".CircuitRelay.srcPeer: object expected");c.srcPeer=u.CircuitRelay.Peer.fromObject(a.srcPeer)}if(a.dstPeer!=null){if(typeof a.dstPeer!="object")throw TypeError(".CircuitRelay.dstPeer: object expected");c.dstPeer=u.CircuitRelay.Peer.fromObject(a.dstPeer)}switch(a.code){case"SUCCESS":case 100:c.code=100;break;case"HOP_SRC_ADDR_TOO_LONG":case 220:c.code=220;break;case"HOP_DST_ADDR_TOO_LONG":case 221:c.code=221;break;case"HOP_SRC_MULTIADDR_INVALID":case 250:c.code=250;break;case"HOP_DST_MULTIADDR_INVALID":case 251:c.code=251;break;case"HOP_NO_CONN_TO_DST":case 260:c.code=260;break;case"HOP_CANT_DIAL_DST":case 261:c.code=261;break;case"HOP_CANT_OPEN_DST_STREAM":case 262:c.code=262;break;case"HOP_CANT_SPEAK_RELAY":case 270:c.code=270;break;case"HOP_CANT_RELAY_TO_SELF":case 280:c.code=280;break;case"STOP_SRC_ADDR_TOO_LONG":case 320:c.code=320;break;case"STOP_DST_ADDR_TOO_LONG":case 321:c.code=321;break;case"STOP_SRC_MULTIADDR_INVALID":case 350:c.code=350;break;case"STOP_DST_MULTIADDR_INVALID":case 351:c.code=351;break;case"STOP_RELAY_REFUSED":case 390:c.code=390;break;case"MALFORMED_MESSAGE":case 400:c.code=400;break}return c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.type=c.enums===String?"HOP":1,d.srcPeer=null,d.dstPeer=null,d.code=c.enums===String?"SUCCESS":100),a.type!=null&&a.hasOwnProperty("type")&&(d.type=c.enums===String?u.CircuitRelay.Type[a.type]:a.type),a.srcPeer!=null&&a.hasOwnProperty("srcPeer")&&(d.srcPeer=u.CircuitRelay.Peer.toObject(a.srcPeer,c)),a.dstPeer!=null&&a.hasOwnProperty("dstPeer")&&(d.dstPeer=u.CircuitRelay.Peer.toObject(a.dstPeer,c)),a.code!=null&&a.hasOwnProperty("code")&&(d.code=c.enums===String?u.CircuitRelay.Status[a.code]:a.code),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.Status=function(){var f={},a=Object.create(f);return a[f[100]="SUCCESS"]=100,a[f[220]="HOP_SRC_ADDR_TOO_LONG"]=220,a[f[221]="HOP_DST_ADDR_TOO_LONG"]=221,a[f[250]="HOP_SRC_MULTIADDR_INVALID"]=250,a[f[251]="HOP_DST_MULTIADDR_INVALID"]=251,a[f[260]="HOP_NO_CONN_TO_DST"]=260,a[f[261]="HOP_CANT_DIAL_DST"]=261,a[f[262]="HOP_CANT_OPEN_DST_STREAM"]=262,a[f[270]="HOP_CANT_SPEAK_RELAY"]=270,a[f[280]="HOP_CANT_RELAY_TO_SELF"]=280,a[f[320]="STOP_SRC_ADDR_TOO_LONG"]=320,a[f[321]="STOP_DST_ADDR_TOO_LONG"]=321,a[f[350]="STOP_SRC_MULTIADDR_INVALID"]=350,a[f[351]="STOP_DST_MULTIADDR_INVALID"]=351,a[f[390]="STOP_RELAY_REFUSED"]=390,a[f[400]="MALFORMED_MESSAGE"]=400,a}(),l.Type=function(){var f={},a=Object.create(f);return a[f[1]="HOP"]=1,a[f[2]="STOP"]=2,a[f[3]="STATUS"]=3,a[f[4]="CAN_HOP"]=4,a}(),l.Peer=function(){function f(a){if(this.addrs=[],a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}return f.prototype.id=s.newBuffer([]),f.prototype.addrs=s.emptyArray,f.encode=function(c,d){if(d||(d=n.create()),d.uint32(10).bytes(c.id),c.addrs!=null&&c.addrs.length)for(var h=0;h<c.addrs.length;++h)d.uint32(18).bytes(c.addrs[h]);return d},f.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.CircuitRelay.Peer;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.id=c.bytes();break;case 2:g.addrs&&g.addrs.length||(g.addrs=[]),g.addrs.push(c.bytes());break;default:c.skipType(p&7);break}}if(!g.hasOwnProperty("id"))throw s.ProtocolError("missing required 'id'",{instance:g});return g},f.fromObject=function(c){if(c instanceof u.CircuitRelay.Peer)return c;var d=new u.CircuitRelay.Peer;if(c.id!=null&&(typeof c.id=="string"?s.base64.decode(c.id,d.id=s.newBuffer(s.base64.length(c.id)),0):c.id.length&&(d.id=c.id)),c.addrs){if(!Array.isArray(c.addrs))throw TypeError(".CircuitRelay.Peer.addrs: array expected");d.addrs=[];for(var h=0;h<c.addrs.length;++h)typeof c.addrs[h]=="string"?s.base64.decode(c.addrs[h],d.addrs[h]=s.newBuffer(s.base64.length(c.addrs[h])),0):c.addrs[h].length&&(d.addrs[h]=c.addrs[h])}return d},f.toObject=function(c,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.addrs=[]),d.defaults&&(d.bytes===String?h.id="":(h.id=[],d.bytes!==Array&&(h.id=s.newBuffer(h.id)))),c.id!=null&&c.hasOwnProperty("id")&&(h.id=d.bytes===String?s.base64.encode(c.id,0,c.id.length):d.bytes===Array?Array.prototype.slice.call(c.id):c.id),c.addrs&&c.addrs.length){h.addrs=[];for(var g=0;g<c.addrs.length;++g)h.addrs[g]=d.bytes===String?s.base64.encode(c.addrs[g],0,c.addrs[g].length):d.bytes===Array?Array.prototype.slice.call(c.addrs[g]):c.addrs[g]}return h},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f}(),l}(),o.exports=u}}),require_stream_to_ma_conn=__commonJS({"node_modules/libp2p-utils/src/stream-to-ma-conn.js"(e,o){init_node_globals();var{source:r}=require_abortable_iterator(),t=require_browser2(),n=t("libp2p:stream:converter");function s({stream:u,remoteAddr:l,localAddr:f},a={}){const{sink:c,source:d}=u,h={async sink(p){a.signal&&(p=r(p,a.signal));try{await c(p)}catch(_){_.type!=="aborted"&&n(_)}g()},source:a.signal?r(d,a.signal):d,conn:u,localAddr:f,remoteAddr:l,timeline:{open:Date.now(),close:void 0},close(){return c(new Uint8Array(0)),g()}};function g(){return h.timeline.close||(h.timeline.close=Date.now()),Promise.resolve()}return h}o.exports=s}}),require_multicodec=__commonJS({"node_modules/libp2p/src/circuit/multicodec.js"(e,o){init_node_globals(),o.exports={relay:"/libp2p/circuit/relay/0.1.0"}}}),require_listener2=__commonJS({"node_modules/libp2p/src/circuit/listener.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),{Multiaddr:t}=require_src();o.exports=n=>{const s=new Map;async function u(a){const c=String(a).split("/p2p-circuit").find(g=>g!==""),d=await n.dial(new t(c)),h=d.remoteAddr.encapsulate("/p2p-circuit");s.set(d.remotePeer.toB58String(),h),f.emit("listening")}function l(){const a=[];for(const c of s.values())a.push(c);return a}const f=Object.assign(new r,{close:()=>Promise.resolve(),listen:u,getAddrs:l});return n.connectionManager.on("peer:disconnect",a=>{s.delete(a.remotePeer.toB58String())&&f.emit("close")}),f}}}),require_utils17=__commonJS({"node_modules/libp2p/src/circuit/circuit/utils.js"(e,o){init_node_globals();var{Multiaddr:r}=require_src(),{CircuitRelay:t}=require_protocol();function n(u,l){u.write({type:t.Type.STATUS,code:l})}function s(u,l){try{u.dstPeer&&u.dstPeer.addrs&&u.dstPeer.addrs.forEach(f=>new r(f))}catch(f){throw n(l,u.type===t.Type.HOP?t.Status.HOP_DST_MULTIADDR_INVALID:t.Status.STOP_DST_MULTIADDR_INVALID),f}try{u.srcPeer&&u.srcPeer.addrs&&u.srcPeer.addrs.forEach(f=>new r(f))}catch(f){throw n(l,u.type===t.Type.HOP?t.Status.HOP_SRC_MULTIADDR_INVALID:t.Status.STOP_SRC_MULTIADDR_INVALID),f}}o.exports={validateAddrs:s}}}),require_stream_handler=__commonJS({"node_modules/libp2p/src/circuit/circuit/stream-handler.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:circuit:stream-handler"),{error:r("libp2p:circuit:stream-handler:err")}),n=require_src11(),s=require_src18(),{CircuitRelay:u}=require_protocol(),l=class{constructor({stream:f,maxLength:a=4096}){this.stream=f,this.shake=s(this.stream),this.decoder=n.decode.fromReader(this.shake.reader,{maxDataLength:a})}async read(){const f=await this.decoder.next();if(f.value){const a=u.decode(f.value.slice());return t("read message type",a.type),a}t("read received no value, closing stream"),this.close()}write(f){t("write message type %s",f.type),this.shake.write(n.encode.single(u.encode(f).finish()))}rest(){return this.shake.rest(),this.shake.stream}end(f){this.write(f),this.close()}close(){t("closing the stream"),this.rest().sink([])}};o.exports=l}}),require_stop2=__commonJS({"node_modules/libp2p/src/circuit/circuit/stop.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:circuit:stop"),{error:r("libp2p:circuit:stop:err")}),{CircuitRelay:n}=require_protocol(),s=require_multicodec(),u=require_stream_handler(),{validateAddrs:l}=require_utils17();o.exports.handleStop=function({connection:a,request:c,streamHandler:d}){try{l(c,d)}catch(h){return t.error("invalid stop request via peer %s",a.remotePeer.toB58String(),h)}return t("stop request is valid"),d.write({type:n.Type.STATUS,code:n.Status.SUCCESS}),d.rest()},o.exports.stop=async function({connection:a,request:c}){const{stream:d}=await a.newStream([s.relay]);t("starting stop request to %s",a.remotePeer.toB58String());const h=new u({stream:d});h.write(c);const g=await h.read();if(!g)return h.close();if(g.code===n.Status.SUCCESS)return t("stop request to %s was successful",a.remotePeer.toB58String()),h.rest();t("stop request failed with code %d",g.code),h.close()}}}),require_hop=__commonJS({"node_modules/libp2p/src/circuit/circuit/hop.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:circuit:hop"),{error:r("libp2p:circuit:hop:err")}),n=require_err_code(),s=require_src5(),{validateAddrs:u}=require_utils17(),l=require_stream_handler(),{CircuitRelay:f}=require_protocol(),{pipe:a}=require_it_pipe(),{codes:c}=require_errors4(),{stop:d}=require_stop2(),h=require_multicodec();async function g({connection:v,request:w,streamHandler:y,circuit:b}){if(!b._options.hop.enabled)return t("HOP request received but we are not acting as a relay"),y.end({type:f.Type.STATUS,code:f.Status.HOP_CANT_SPEAK_RELAY});try{u(w,y)}catch(C){return t.error("invalid hop request via peer %s",v.remotePeer.toB58String(),C)}if(!w.dstPeer){t("HOP request received but we do not receive a dstPeer");return}const T=new s(w.dstPeer.id),R=b._connectionManager.get(T);if(!R&&!b._options.hop.active)return t("HOP request received but we are not connected to the destination peer"),y.end({type:f.Type.STATUS,code:f.Status.HOP_NO_CONN_TO_DST});if(!R)return;const S={type:f.Type.STOP,dstPeer:w.dstPeer,srcPeer:w.srcPeer};let E;try{E=await d({connection:R,request:S})}catch(C){return t.error(C)}t("hop request from %s is valid",v.remotePeer.toB58String()),y.write({type:f.Type.STATUS,code:f.Status.SUCCESS});const A=y.rest();return a(A,E,A)}async function p({connection:v,request:w}){const{stream:y}=await v.newStream([h.relay]),b=new l({stream:y});b.write(w);const T=await b.read();if(!T)throw n(new Error("HOP request had no response"),c.ERR_HOP_REQUEST_FAILED);if(T.code===f.Status.SUCCESS)return t("hop request was successful"),b.rest();throw t("hop request failed with code %d, closing stream",T.code),b.close(),n(new Error(`HOP request failed with code ${T.code}`),c.ERR_HOP_REQUEST_FAILED)}async function _({connection:v}){const{stream:w}=await v.newStream([h.relay]),y=new l({stream:w});y.write({type:f.Type.CAN_HOP});const b=await y.read();return await y.close(),!(!b||b.code!==f.Status.SUCCESS)}function m({connection:v,streamHandler:w,circuit:y}){const b=y._options.hop.enabled;t("can hop (%s) request from %s",b,v.remotePeer.toB58String()),w.end({type:f.Type.STATUS,code:b?f.Status.SUCCESS:f.Status.HOP_CANT_SPEAK_RELAY})}o.exports={handleHop:g,hop:p,canHop:_,handleCanHop:m}}}),require_transport2=__commonJS({"node_modules/libp2p/src/circuit/transport.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:circuit"),{error:r("libp2p:circuit:err")}),n=require_err_code(),s=require_src2(),{Multiaddr:u}=require_src(),l=require_src5(),{CircuitRelay:f}=require_protocol(),{codes:a}=require_errors4(),c=require_stream_to_ma_conn(),{relay:d}=require_multicodec(),h=require_listener2(),{handleCanHop:g,handleHop:p,hop:_}=require_hop(),{handleStop:m}=require_stop2(),v=require_stream_handler(),w=Symbol.for("@libp2p/js-libp2p-circuit/circuit"),y=class{constructor({libp2p:b,upgrader:T}){this._dialer=b.dialer,this._registrar=b.registrar,this._connectionManager=b.connectionManager,this._upgrader=T,this._options=b._config.relay,this._libp2p=b,this.peerId=b.peerId,this._registrar.handle(d,this._onProtocol.bind(this))}async _onProtocol({connection:b,stream:T}){const R=new v({stream:T}),S=await R.read();if(!S)return;const E=this;let A;switch(S.type){case f.Type.CAN_HOP:{t("received CAN_HOP request from %s",b.remotePeer.toB58String()),await g({circuit:E,connection:b,streamHandler:R});break}case f.Type.HOP:{t("received HOP request from %s",b.remotePeer.toB58String()),A=await p({connection:b,request:S,streamHandler:R,circuit:E});break}case f.Type.STOP:{t("received STOP request from %s",b.remotePeer.toB58String()),A=await m({connection:b,request:S,streamHandler:R});break}default:t("Request of type %s not supported",S.type)}if(A){const C=new u(S.dstPeer.addrs[0]),I=new u(S.srcPeer.addrs[0]),P=c({stream:A,remoteAddr:C,localAddr:I}),O=S.type===f.Type.HOP?"relay":"inbound";t("new %s connection %s",O,P.remoteAddr);const k=await this._upgrader.upgradeInbound(P);t("%s connection %s upgraded",O,P.remoteAddr),this.handler&&this.handler(k)}}async dial(b,T){const R=b.toString().split("/p2p-circuit"),S=new u(R[0]),E=new u(R[R.length-1]),A=S.getPeerId(),C=E.getPeerId();if(!A||!C){const N="Circuit relay dial failed as addresses did not have peer id";throw t.error(N),n(new Error(N),a.ERR_RELAYED_DIAL)}const I=l.createFromB58String(A),P=l.createFromB58String(C);let O=!1,k=this._connectionManager.get(I);k||(k=await this._dialer.connectToPeer(S,T),O=!0);try{const N=await _({connection:k,request:{type:f.Type.HOP,srcPeer:{id:this.peerId.toBytes(),addrs:this._libp2p.multiaddrs.map(L=>L.bytes)},dstPeer:{id:P.toBytes(),addrs:[new u(E).bytes]}}}),K=S.encapsulate(`/p2p-circuit/p2p/${this.peerId.toB58String()}`),U=c({stream:N,remoteAddr:b,localAddr:K});return t("new outbound connection %s",U.remoteAddr),this._upgrader.upgradeOutbound(U)}catch(N){throw t.error("Circuit relay dial failed",N),O&&await k.close(),N}}createListener(b,T){return typeof b=="function"&&(T=b,b={}),this.handler=T,h(this._libp2p)}filter(b){return b=Array.isArray(b)?b:[b],b.filter(T=>s.Circuit.matches(T))}get[Symbol.toStringTag](){return"Circuit"}static isTransport(b){return Boolean(b&&b[w])}};o.exports=y}}),require_utils18=__commonJS({"node_modules/libp2p/src/circuit/utils.js"(e,o){init_node_globals();var{CID:r}=(init_cid(),__toCommonJS(cid_exports)),{sha256:t}=(init_sha2_browser(),__toCommonJS(sha2_browser_exports));o.exports.namespaceToCid=async n=>{const s=new TextEncoder().encode(n),u=await t.digest(s);return r.createV0(u)}}}),require_auto_relay=__commonJS({"node_modules/libp2p/src/circuit/auto-relay.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:auto-relay"),{error:r("libp2p:auto-relay:err")}),{fromString:n}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:s}=(init_to_string(),__toCommonJS(to_string_exports)),{Multiaddr:u}=require_src(),l=require_it_all(),{relay:f}=require_multicodec(),{canHop:a}=require_hop(),{namespaceToCid:c}=require_utils18(),{CIRCUIT_PROTO_CODE:d,HOP_METADATA_KEY:h,HOP_METADATA_VALUE:g,RELAY_RENDEZVOUS_NS:p}=require_constants12(),_=class{constructor({libp2p:m,maxListeners:v=1,onError:w}){this._libp2p=m,this._peerId=m.peerId,this._peerStore=m.peerStore,this._connectionManager=m.connectionManager,this._transportManager=m.transportManager,this._addressSorter=m.dialer.addressSorter,this.maxListeners=v,this._listenRelays=new Set,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this._peerStore.on("change:protocols",this._onProtocolChange),this._connectionManager.on("peer:disconnect",this._onPeerDisconnected),this._onError=(y,b)=>{t.error(b||y),w&&w(y,b)}}async _onProtocolChange({peerId:m,protocols:v}){const w=m.toB58String(),y=v.find(b=>b===f);if(!y&&this._listenRelays.has(w)){await this._removeListenRelay(w);return}else if(!y||this._listenRelays.has(w))return;try{const b=this._connectionManager.get(m);if(!b)return;if(b.remoteAddr.protoCodes().includes(d)){t(`relayed connection to ${w} will not be used to hop on`);return}await a({connection:b})&&(await this._peerStore.metadataBook.setValue(m,h,n(g)),await this._addListenRelay(b,w))}catch(b){this._onError(b)}}_onPeerDisconnected(m){const w=m.remotePeer.toB58String();!this._listenRelays.has(w)||this._removeListenRelay(w).catch(y=>{t.error(y)})}async _addListenRelay(m,v){try{if(this._listenRelays.size>=this.maxListeners)return;const w=await this._peerStore.addressBook.getMultiaddrsForPeer(m.remotePeer,this._addressSorter);(await Promise.all(w.map(async b=>{try{return await this._transportManager.listen([new u(`${b.toString()}/p2p-circuit`)]),!0}catch(T){this._onError(T)}return!1}))).includes(!0)&&this._listenRelays.add(v)}catch(w){this._onError(w),this._listenRelays.delete(v)}}async _removeListenRelay(m){this._listenRelays.delete(m)&&await this._listenOnAvailableHopRelays([m])}async _listenOnAvailableHopRelays(m=[]){if(this._listenRelays.size>=this.maxListeners)return;const v=[],w=await l(this._peerStore.getPeers());for await(const{id:y,metadata:b}of w){const T=y.toB58String();if(this._listenRelays.has(T)||m.includes(T))continue;const R=b.get(h);if(!R||s(R)!==g)continue;const S=this._connectionManager.get(y);if(!S){v.push(y);continue}if(await this._addListenRelay(S,T),this._listenRelays.size>=this.maxListeners)return}for(const y of v)if(await this._tryToListenOnRelay(y),this._listenRelays.size>=this.maxListeners)return;try{const y=await c(p);for await(const b of this._libp2p.contentRouting.findProviders(y)){if(!b.multiaddrs.length)continue;const T=b.id;if(await this._peerStore.addressBook.add(T,b.multiaddrs),await this._tryToListenOnRelay(T),this._listenRelays.size>=this.maxListeners)return}}catch(y){this._onError(y)}}async _tryToListenOnRelay(m){try{const v=await this._libp2p.dial(m);await this._addListenRelay(v,m.toB58String())}catch(v){this._onError(v,`could not connect and listen on known hop relay ${m.toB58String()}`)}}};o.exports=_}}),require_circuit=__commonJS({"node_modules/libp2p/src/circuit/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:relay"),{error:r("libp2p:relay:err")}),{codes:n}=require_errors4(),{setDelayedInterval:s,clearDelayedInterval:u}=require_src23(),l=require_auto_relay(),{namespaceToCid:f}=require_utils18(),{RELAY_RENDEZVOUS_NS:a}=require_constants12(),c=class{constructor(d){this._libp2p=d,this._options=Re({},d._config.relay),this._autoRelay=this._options.autoRelay.enabled&&new l(Re({libp2p:d},this._options.autoRelay)),this._advertiseService=this._advertiseService.bind(this)}start(){this._options.hop.enabled&&this._options.advertise.enabled&&(this._timeout=s(this._advertiseService,this._options.advertise.ttl,this._options.advertise.bootDelay))}stop(){u(this._timeout)}async _advertiseService(){try{const d=await f(a);await this._libp2p.contentRouting.provide(d)}catch(d){d.code===n.ERR_NO_ROUTERS_AVAILABLE?(t.error("a content router, such as a DHT, must be provided in order to advertise the relay service",d),this.stop()):t.error(d)}}};o.exports=c}}),require_p_fifo=__commonJS({"node_modules/p-fifo/index.js"(e,o){init_node_globals();var r=require_fast_fifo(),t=require_p_defer();o.exports=class{constructor(){this._buffer=new r,this._waitingConsumers=new r}push(s){const{promise:u,resolve:l}=t();return this._buffer.push({chunk:s,resolve:l}),this._consume(),u}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const s=this._waitingConsumers.shift(),u=this._buffer.shift();s.resolve(u.chunk),u.resolve()}}shift(){const{promise:s,resolve:u}=t();return this._waitingConsumers.push({resolve:u}),this._consume(),s}isEmpty(){return this._buffer.isEmpty()}}}}),require_p_cancelable=__commonJS({"node_modules/p-cancelable/index.js"(e,o){init_node_globals();var r=class extends Error{constructor(n){super(n||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},t=class{static fn(n){return(...s)=>new t((u,l,f)=>{s.push(f),n(...s).then(u,l)})}constructor(n){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((s,u)=>{this._reject=u;const l=c=>{(!this._isCanceled||!a.shouldReject)&&(this._isPending=!1,s(c))},f=c=>{this._isPending=!1,u(c)},a=c=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(c)};return Object.defineProperties(a,{shouldReject:{get:()=>this._rejectOnCancel,set:c=>{this._rejectOnCancel=c}}}),n(l,f,a)})}then(n,s){return this._promise.then(n,s)}catch(n){return this._promise.catch(n)}finally(n){return this._promise.finally(n)}cancel(n){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const s of this._cancelHandlers)s()}catch(s){this._reject(s);return}this._rejectOnCancel&&this._reject(new r(n))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(t.prototype,Promise.prototype),o.exports=t,o.exports.CancelError=r}}),require_p_some=__commonJS({"node_modules/p-some/index.js"(e,o){init_node_globals();var r=require_aggregate_error(),t=require_p_cancelable(),n=class extends Error{},s=(u,l)=>new t((f,a,c)=>{const{count:d,filter:h=()=>!0}=l;if(!Number.isFinite(d)){a(new TypeError(`Expected a finite number, got ${typeof l.count}`));return}const g=[],p=[];let _=0,m=!1;const v=new Set,w=()=>(g.length===d&&(f(g),m=!0),_-p.length<d&&(a(new r(p)),m=!0),m),y=()=>{for(const b of u)!v.has(b)&&typeof b.cancel=="function"&&b.cancel()};c(y);for(const b of u)_++,(async()=>{try{const T=await b;if(m)return;if(!h(T))throw new n("Value does not satisfy filter");g.push(T)}catch(T){p.push(T)}finally{v.add(b),!m&&w()&&y()}})();d>_&&(a(new RangeError(`Expected input to contain at least ${l.count} items, but contains ${_} items`)),y())});o.exports=s,o.exports.AggregateError=r,o.exports.FilterError=n}}),require_p_any=__commonJS({"node_modules/p-any/index.js"(e,o){init_node_globals();var r=require_p_some(),t=require_p_cancelable();o.exports=(n,s)=>{const u=r(n,$e(Re({},s),{count:1}));return t.fn(async l=>{l(()=>{u.cancel()});const[f]=await u;return f})()},o.exports.AggregateError=r.AggregateError}}),require_dial_request=__commonJS({"node_modules/libp2p/src/dialer/dial-request.js"(e,o){init_node_globals();var r=require_err_code(),{anySignal:t}=require_any_signal(),n=require_p_fifo(),s=require_p_any(),{setMaxListeners:u}=require_events(),{codes:l}=require_errors4(),f=class{constructor({addrs:a,dialAction:c,dialer:d}){this.addrs=a,this.dialer=d,this.dialAction=c}async run(a={}){const c=this.dialer.getTokens(this.addrs.length);if(c.length<1)throw r(new Error("No dial tokens available"),l.ERR_NO_DIAL_TOKENS);const d=new n;c.forEach(p=>d.push(p));const h=this.addrs.map(()=>{const p=new AbortController;try{u&&u(1/0,p.signal)}catch{}return p});let g=0;try{return await s(this.addrs.map(async(p,_)=>{const m=await d.shift();let v;try{const w=h[_].signal;v=await this.dialAction(p,$e(Re({},a),{signal:a.signal?t([w,a.signal]):w})),h.splice(_,1)}finally{g++,this.addrs.length-g>=c.length?d.push(m):this.dialer.releaseToken(c.splice(c.indexOf(m),1)[0])}return v}))}finally{h.map(p=>p.abort()),c.forEach(p=>this.dialer.releaseToken(p))}}};o.exports=f}}),require_dialer=__commonJS({"node_modules/libp2p/src/dialer/index.js"(e,o){init_node_globals();var r=require_browser2(),t=require_it_all(),n=require_it_filter(),{pipe:s}=require_it_pipe(),u=Object.assign(r("libp2p:dialer"),{error:r("libp2p:dialer:err")}),l=require_err_code(),{Multiaddr:f}=require_src(),{TimeoutController:a}=require_timeout_abort_controller(),{AbortError:c}=require_abortable_iterator(),{anySignal:d}=require_any_signal(),{setMaxListeners:h}=require_events(),g=require_dial_request(),{publicAddressesFirst:p}=require_address_sort(),_=require_get_peer(),m=require_tracked_map(),{codes:v}=require_errors4(),{DIAL_TIMEOUT:w,MAX_PARALLEL_DIALS:y,MAX_PER_PEER_DIALS:b,MAX_ADDRS_TO_DIAL:T}=require_constants11(),R="dialler",S="pending-dials",E="pending-dial-targets",A=class{constructor({transportManager:C,peerStore:I,connectionGater:P,addressSorter:O=p,maxParallelDials:k=y,maxAddrsToDial:N=T,dialTimeout:K=w,maxDialsPerPeer:U=b,resolvers:L={},metrics:re}){this.connectionGater=P,this.transportManager=C,this.peerStore=I,this.addressSorter=O,this.maxParallelDials=k,this.maxAddrsToDial=N,this.timeout=K,this.maxDialsPerPeer=U,this.tokens=[...new Array(k)].map((Z,V)=>V),this._pendingDials=m({component:R,metric:S,metrics:re}),this._pendingDialTargets=m({component:R,metric:E,metrics:re});for(const[Z,V]of Object.entries(L))f.resolvers.set(Z,V)}destroy(){for(const C of this._pendingDials.values())try{C.controller.abort()}catch(I){u.error(I)}this._pendingDials.clear();for(const C of this._pendingDialTargets.values())C.reject(new c("Dialer was destroyed"));this._pendingDialTargets.clear()}async connectToPeer(C,I={}){const{id:P}=_(C);if(await this.connectionGater.denyDialPeer(P))throw l(new Error("The dial request is blocked by gater.allowDialPeer"),v.ERR_PEER_DIAL_INTERCEPTED);const O=await this._createCancellableDialTarget(C);if(!O.addrs.length)throw l(new Error("The dial request has no valid addresses"),v.ERR_NO_VALID_ADDRESSES);const k=this._pendingDials.get(O.id)||this._createPendingDial(O,I);try{const N=await k.promise;return u("dial succeeded to %s",O.id),N}catch(N){throw k.controller.signal.aborted&&(N.code=v.ERR_TIMEOUT),u.error(N),N}finally{k.destroy()}}async _createCancellableDialTarget(C){const I=`${parseInt(String(Math.random()*1e9),10).toString()+Date.now()}`,P=new Promise((O,k)=>{this._pendingDialTargets.set(I,{resolve:O,reject:k})});try{return await Promise.race([this._createDialTarget(C),P])}finally{this._pendingDialTargets.delete(I)}}async _createDialTarget(C){const{id:I,multiaddrs:P}=_(C);P&&await this.peerStore.addressBook.add(I,P);let O=await s(await this.peerStore.addressBook.getMultiaddrsForPeer(I,this.addressSorter),K=>n(K,async U=>!await this.connectionGater.denyDialMultiaddr(I,U)),K=>t(K));f.isMultiaddr(C)&&(O=O.filter(K=>!C.equals(K)),O.unshift(C));const k=[];for(const K of O)(await this._resolve(K)).forEach(L=>k.push(L));const N=k.filter(K=>this.transportManager.transportForMultiaddr(K));if(N.length>this.maxAddrsToDial)throw await this.peerStore.delete(I),l(new Error("dial with more addresses than allowed"),v.ERR_TOO_MANY_ADDRESSES);return{id:I.toB58String(),addrs:N}}_createPendingDial(C,I={}){const P=(L,re)=>{if(re.signal.aborted)throw l(new Error("already aborted"),v.ERR_ALREADY_ABORTED);return this.transportManager.dial(L,re)},O=new g({addrs:C.addrs,dialAction:P,dialer:this}),k=new a(this.timeout),N=[k.signal];I.signal&&N.push(I.signal);const K=d(N);try{h&&h(1/0,K)}catch{}const U={dialRequest:O,controller:k,promise:O.run($e(Re({},I),{signal:K})),destroy:()=>{k.clear(),this._pendingDials.delete(C.id)}};return this._pendingDials.set(C.id,U),U}getTokens(C){const I=Math.min(C,this.maxDialsPerPeer,this.tokens.length),P=this.tokens.splice(0,I);return u("%d tokens request, returning %d, %d remaining",C,I,this.tokens.length),P}releaseToken(C){this.tokens.indexOf(C)>-1||(u("token %d released",C),this.tokens.push(C))}async _resolve(C){if(!C.protoNames().includes("dnsaddr"))return[C];const P=await this._resolveRecord(C);return(await Promise.all(P.map(N=>this._resolve(N)))).flat().reduce((N,K)=>(N.find(U=>U.equals(K))||N.push(K),N),[])}async _resolveRecord(C){try{return C=new f(C.toString()),await C.resolve()}catch{return u.error(`multiaddr ${C} could not be resolved`),[]}}};o.exports=A}}),require_truncate=__commonJS({"node_modules/truncate-utf8-bytes/lib/truncate.js"(e,o){init_node_globals();function r(n){return n>=55296&&n<=56319}function t(n){return n>=56320&&n<=57343}o.exports=function(s,u,l){if(typeof u!="string")throw new Error("Input must be string");for(var f=u.length,a=0,c,d,h=0;h<f;h+=1){if(c=u.charCodeAt(h),d=u[h],r(c)&&t(u.charCodeAt(h+1))&&(h+=1,d+=u[h]),a+=s(d),a===l)return u.slice(0,h+1);if(a>l)return u.slice(0,h-d.length+1)}return u}}}),require_browser10=__commonJS({"node_modules/utf8-byte-length/browser.js"(e,o){init_node_globals();function r(n){return n>=55296&&n<=56319}function t(n){return n>=56320&&n<=57343}o.exports=function(s){if(typeof s!="string")throw new Error("Input must be string");for(var u=s.length,l=0,f=null,a=null,c=0;c<u;c++)f=s.charCodeAt(c),t(f)?a!=null&&r(a)?l+=1:l+=3:f<=127?l+=1:f>=128&&f<=2047?l+=2:f>=2048&&f<=65535&&(l+=3),a=f;return l}}}),require_browser11=__commonJS({"node_modules/truncate-utf8-bytes/browser.js"(e,o){init_node_globals();var r=require_truncate(),t=require_browser10();o.exports=r.bind(null,t)}}),require_sanitize_filename=__commonJS({"node_modules/sanitize-filename/index.js"(e,o){init_node_globals();var r=require_browser11(),t=/[\/\?<>\\:\*\|"]/g,n=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,u=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,l=/[\. ]+$/;function f(a,c){if(typeof a!="string")throw new Error("Input must be string");var d=a.replace(t,c).replace(n,c).replace(s,c).replace(u,c).replace(l,c);return r(d,255)}o.exports=function(a,c){var d=c&&c.replacement||"",h=f(a,d);return d===""?h:f(h,"")}}}),require_pkcs7asn1=__commonJS({"node_modules/node-forge/lib/pkcs7asn1.js"(e,o){init_node_globals();var r=require_forge();require_asn1(),require_util();var t=r.asn1,n=o.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=n;var s={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};n.contentInfoValidator=s;var u={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};n.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(u)},n.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(u)};var l={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};n.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[l]}]},n.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}}),require_mgf1=__commonJS({"node_modules/node-forge/lib/mgf1.js"(e,o){init_node_globals();var r=require_forge();require_util(),r.mgf=r.mgf||{};var t=o.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{};t.create=function(n){var s={generate:function(u,l){for(var f=new r.util.ByteBuffer,a=Math.ceil(l/n.digestLength),c=0;c<a;c++){var d=new r.util.ByteBuffer;d.putInt32(c),n.start(),n.update(u+d.getBytes()),f.putBuffer(n.digest())}return f.truncate(f.length()-l),f.getBytes()}};return s}}}),require_mgf=__commonJS({"node_modules/node-forge/lib/mgf.js"(e,o){init_node_globals();var r=require_forge();require_mgf1(),o.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1}}),require_pss=__commonJS({"node_modules/node-forge/lib/pss.js"(e,o){init_node_globals();var r=require_forge();require_random(),require_util();var t=o.exports=r.pss=r.pss||{};t.create=function(n){arguments.length===3&&(n={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var s=n.md,u=n.mgf,l=s.digestLength,f=n.salt||null;typeof f=="string"&&(f=r.util.createBuffer(f));var a;if("saltLength"in n)a=n.saltLength;else if(f!==null)a=f.length();else throw new Error("Salt length not specified or specific salt not given.");if(f!==null&&f.length()!==a)throw new Error("Given salt length does not match length of given salt.");var c=n.prng||r.random,d={};return d.encode=function(h,g){var p,_=g-1,m=Math.ceil(_/8),v=h.digest().getBytes();if(m<l+a+2)throw new Error("Message is too long to encrypt.");var w;f===null?w=c.getBytesSync(a):w=f.bytes();var y=new r.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(v),y.putBytes(w),s.start(),s.update(y.getBytes());var b=s.digest().getBytes(),T=new r.util.ByteBuffer;T.fillWithByte(0,m-a-l-2),T.putByte(1),T.putBytes(w);var R=T.getBytes(),S=m-l-1,E=u.generate(b,S),A="";for(p=0;p<S;p++)A+=String.fromCharCode(R.charCodeAt(p)^E.charCodeAt(p));var C=65280>>8*m-_&255;return A=String.fromCharCode(A.charCodeAt(0)&~C)+A.substr(1),A+b+String.fromCharCode(188)},d.verify=function(h,g,p){var _,m=p-1,v=Math.ceil(m/8);if(g=g.substr(-v),v<l+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(g.charCodeAt(v-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var w=v-l-1,y=g.substr(0,w),b=g.substr(w,l),T=65280>>8*v-m&255;if((y.charCodeAt(0)&T)!=0)throw new Error("Bits beyond keysize not zero as expected.");var R=u.generate(b,w),S="";for(_=0;_<w;_++)S+=String.fromCharCode(y.charCodeAt(_)^R.charCodeAt(_));S=String.fromCharCode(S.charCodeAt(0)&~T)+S.substr(1);var E=v-l-a-2;for(_=0;_<E;_++)if(S.charCodeAt(_)!==0)throw new Error("Leftmost octets not zero as expected");if(S.charCodeAt(E)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var A=S.substr(-a),C=new r.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(h),C.putBytes(A),s.start(),s.update(C.getBytes());var I=s.digest().getBytes();return b===I},d}}}),require_x509=__commonJS({"node_modules/node-forge/lib/x509.js"(e,o){init_node_globals();var r=require_forge();require_aes(),require_asn1(),require_des(),require_md(),require_mgf(),require_oids(),require_pem(),require_pss(),require_rsa(),require_util();var t=r.asn1,n=o.exports=r.pki=r.pki||{},s=n.oids,u={};u.CN=s.commonName,u.commonName="CN",u.C=s.countryName,u.countryName="C",u.L=s.localityName,u.localityName="L",u.ST=s.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=s.organizationName,u.organizationName="O",u.OU=s.organizationalUnitName,u.organizationalUnitName="OU",u.E=s.emailAddress,u.emailAddress="E";var l=r.pki.rsa.publicKeyValidator,f={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},a={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},c={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[c,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};n.RDNAttributesAsArray=function(E,A){for(var C=[],I,P,O,k=0;k<E.value.length;++k){I=E.value[k];for(var N=0;N<I.value.length;++N)O={},P=I.value[N],O.type=t.derToOid(P.value[0].value),O.value=P.value[1].value,O.valueTagClass=P.value[1].type,O.type in s&&(O.name=s[O.type],O.name in u&&(O.shortName=u[O.name])),A&&(A.update(O.type),A.update(O.value)),C.push(O)}return C},n.CRIAttributesAsArray=function(E){for(var A=[],C=0;C<E.length;++C)for(var I=E[C],P=t.derToOid(I.value[0].value),O=I.value[1].value,k=0;k<O.length;++k){var N={};if(N.type=P,N.value=O[k].value,N.valueTagClass=O[k].type,N.type in s&&(N.name=s[N.type],N.name in u&&(N.shortName=u[N.name])),N.type===s.extensionRequest){N.extensions=[];for(var K=0;K<N.value.length;++K)N.extensions.push(n.certificateExtensionFromAsn1(N.value[K]))}A.push(N)}return A};function h(E,A){typeof A=="string"&&(A={shortName:A});for(var C=null,I,P=0;C===null&&P<E.attributes.length;++P)I=E.attributes[P],(A.type&&A.type===I.type||A.name&&A.name===I.name||A.shortName&&A.shortName===I.shortName)&&(C=I);return C}var g=function(E,A,C){var I={};if(E!==s["RSASSA-PSS"])return I;C&&(I={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var P={},O=[];if(!t.validate(A,a,P,O)){var k=new Error("Cannot read RSASSA-PSS parameter block.");throw k.errors=O,k}return P.hashOid!==void 0&&(I.hash=I.hash||{},I.hash.algorithmOid=t.derToOid(P.hashOid)),P.maskGenOid!==void 0&&(I.mgf=I.mgf||{},I.mgf.algorithmOid=t.derToOid(P.maskGenOid),I.mgf.hash=I.mgf.hash||{},I.mgf.hash.algorithmOid=t.derToOid(P.maskGenHashOid)),P.saltLength!==void 0&&(I.saltLength=P.saltLength.charCodeAt(0)),I},p=function(E){switch(s[E.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();case"RSASSA-PSS":return r.md.sha256.create();default:var A=new Error("Could not compute "+E.type+" digest. Unknown signature OID.");throw A.signatureOid=E.signatureOid,A}},_=function(E){var A=E.certificate,C;switch(A.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var I,P;if(I=s[A.signatureParameters.mgf.hash.algorithmOid],I===void 0||r.md[I]===void 0){var O=new Error("Unsupported MGF hash function.");throw O.oid=A.signatureParameters.mgf.hash.algorithmOid,O.name=I,O}if(P=s[A.signatureParameters.mgf.algorithmOid],P===void 0||r.mgf[P]===void 0){var O=new Error("Unsupported MGF function.");throw O.oid=A.signatureParameters.mgf.algorithmOid,O.name=P,O}if(P=r.mgf[P].create(r.md[I].create()),I=s[A.signatureParameters.hash.algorithmOid],I===void 0||r.md[I]===void 0){var O=new Error("Unsupported RSASSA-PSS hash function.");throw O.oid=A.signatureParameters.hash.algorithmOid,O.name=I,O}C=r.pss.create(r.md[I].create(),P,A.signatureParameters.saltLength);break}return A.publicKey.verify(E.md.digest().getBytes(),E.signature,C)};n.certificateFromPem=function(E,A,C){var I=r.pem.decode(E)[0];if(I.type!=="CERTIFICATE"&&I.type!=="X509 CERTIFICATE"&&I.type!=="TRUSTED CERTIFICATE"){var P=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw P.headerType=I.type,P}if(I.procType&&I.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var O=t.fromDer(I.body,C);return n.certificateFromAsn1(O,A)},n.certificateToPem=function(E,A){var C={type:"CERTIFICATE",body:t.toDer(n.certificateToAsn1(E)).getBytes()};return r.pem.encode(C,{maxline:A})},n.publicKeyFromPem=function(E){var A=r.pem.decode(E)[0];if(A.type!=="PUBLIC KEY"&&A.type!=="RSA PUBLIC KEY"){var C=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw C.headerType=A.type,C}if(A.procType&&A.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var I=t.fromDer(A.body);return n.publicKeyFromAsn1(I)},n.publicKeyToPem=function(E,A){var C={type:"PUBLIC KEY",body:t.toDer(n.publicKeyToAsn1(E)).getBytes()};return r.pem.encode(C,{maxline:A})},n.publicKeyToRSAPublicKeyPem=function(E,A){var C={type:"RSA PUBLIC KEY",body:t.toDer(n.publicKeyToRSAPublicKey(E)).getBytes()};return r.pem.encode(C,{maxline:A})},n.getPublicKeyFingerprint=function(E,A){A=A||{};var C=A.md||r.md.sha1.create(),I=A.type||"RSAPublicKey",P;switch(I){case"RSAPublicKey":P=t.toDer(n.publicKeyToRSAPublicKey(E)).getBytes();break;case"SubjectPublicKeyInfo":P=t.toDer(n.publicKeyToAsn1(E)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+A.type+'".')}C.start(),C.update(P);var O=C.digest();if(A.encoding==="hex"){var k=O.toHex();return A.delimiter?k.match(/.{2}/g).join(A.delimiter):k}else{if(A.encoding==="binary")return O.getBytes();if(A.encoding)throw new Error('Unknown encoding "'+A.encoding+'".')}return O},n.certificationRequestFromPem=function(E,A,C){var I=r.pem.decode(E)[0];if(I.type!=="CERTIFICATE REQUEST"){var P=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw P.headerType=I.type,P}if(I.procType&&I.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var O=t.fromDer(I.body,C);return n.certificationRequestFromAsn1(O,A)},n.certificationRequestToPem=function(E,A){var C={type:"CERTIFICATE REQUEST",body:t.toDer(n.certificationRequestToAsn1(E)).getBytes()};return r.pem.encode(C,{maxline:A})},n.createCertificate=function(){var E={};return E.version=2,E.serialNumber="00",E.signatureOid=null,E.signature=null,E.siginfo={},E.siginfo.algorithmOid=null,E.validity={},E.validity.notBefore=new Date,E.validity.notAfter=new Date,E.issuer={},E.issuer.getField=function(A){return h(E.issuer,A)},E.issuer.addField=function(A){v([A]),E.issuer.attributes.push(A)},E.issuer.attributes=[],E.issuer.hash=null,E.subject={},E.subject.getField=function(A){return h(E.subject,A)},E.subject.addField=function(A){v([A]),E.subject.attributes.push(A)},E.subject.attributes=[],E.subject.hash=null,E.extensions=[],E.publicKey=null,E.md=null,E.setSubject=function(A,C){v(A),E.subject.attributes=A,delete E.subject.uniqueId,C&&(E.subject.uniqueId=C),E.subject.hash=null},E.setIssuer=function(A,C){v(A),E.issuer.attributes=A,delete E.issuer.uniqueId,C&&(E.issuer.uniqueId=C),E.issuer.hash=null},E.setExtensions=function(A){for(var C=0;C<A.length;++C)w(A[C],{cert:E});E.extensions=A},E.getExtension=function(A){typeof A=="string"&&(A={name:A});for(var C=null,I,P=0;C===null&&P<E.extensions.length;++P)I=E.extensions[P],(A.id&&I.id===A.id||A.name&&I.name===A.name)&&(C=I);return C},E.sign=function(A,C){E.md=C||r.md.sha1.create();var I=s[E.md.algorithm+"WithRSAEncryption"];if(!I){var P=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw P.algorithm=E.md.algorithm,P}E.signatureOid=E.siginfo.algorithmOid=I,E.tbsCertificate=n.getTBSCertificate(E);var O=t.toDer(E.tbsCertificate);E.md.update(O.getBytes()),E.signature=A.sign(E.md)},E.verify=function(A){var C=!1;if(!E.issued(A)){var I=A.issuer,P=E.subject,O=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw O.expectedIssuer=P.attributes,O.actualIssuer=I.attributes,O}var k=A.md;if(k===null){k=p({signatureOid:A.signatureOid,type:"certificate"});var N=A.tbsCertificate||n.getTBSCertificate(A),K=t.toDer(N);k.update(K.getBytes())}return k!==null&&(C=_({certificate:E,md:k,signature:A.signature})),C},E.isIssuer=function(A){var C=!1,I=E.issuer,P=A.subject;if(I.hash&&P.hash)C=I.hash===P.hash;else if(I.attributes.length===P.attributes.length){C=!0;for(var O,k,N=0;C&&N<I.attributes.length;++N)O=I.attributes[N],k=P.attributes[N],(O.type!==k.type||O.value!==k.value)&&(C=!1)}return C},E.issued=function(A){return A.isIssuer(E)},E.generateSubjectKeyIdentifier=function(){return n.getPublicKeyFingerprint(E.publicKey,{type:"RSAPublicKey"})},E.verifySubjectKeyIdentifier=function(){for(var A=s.subjectKeyIdentifier,C=0;C<E.extensions.length;++C){var I=E.extensions[C];if(I.id===A){var P=E.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(I.subjectKeyIdentifier)===P}}return!1},E},n.certificateFromAsn1=function(E,A){var C={},I=[];if(!t.validate(E,f,C,I)){var P=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw P.errors=I,P}var O=t.derToOid(C.publicKeyOid);if(O!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var k=n.createCertificate();k.version=C.certVersion?C.certVersion.charCodeAt(0):0;var N=r.util.createBuffer(C.certSerialNumber);k.serialNumber=N.toHex(),k.signatureOid=r.asn1.derToOid(C.certSignatureOid),k.signatureParameters=g(k.signatureOid,C.certSignatureParams,!0),k.siginfo.algorithmOid=r.asn1.derToOid(C.certinfoSignatureOid),k.siginfo.parameters=g(k.siginfo.algorithmOid,C.certinfoSignatureParams,!1),k.signature=C.certSignature;var K=[];if(C.certValidity1UTCTime!==void 0&&K.push(t.utcTimeToDate(C.certValidity1UTCTime)),C.certValidity2GeneralizedTime!==void 0&&K.push(t.generalizedTimeToDate(C.certValidity2GeneralizedTime)),C.certValidity3UTCTime!==void 0&&K.push(t.utcTimeToDate(C.certValidity3UTCTime)),C.certValidity4GeneralizedTime!==void 0&&K.push(t.generalizedTimeToDate(C.certValidity4GeneralizedTime)),K.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(K.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(k.validity.notBefore=K[0],k.validity.notAfter=K[1],k.tbsCertificate=C.tbsCertificate,A){k.md=p({signatureOid:k.signatureOid,type:"certificate"});var U=t.toDer(k.tbsCertificate);k.md.update(U.getBytes())}var L=r.md.sha1.create(),re=t.toDer(C.certIssuer);L.update(re.getBytes()),k.issuer.getField=function(ee){return h(k.issuer,ee)},k.issuer.addField=function(ee){v([ee]),k.issuer.attributes.push(ee)},k.issuer.attributes=n.RDNAttributesAsArray(C.certIssuer),C.certIssuerUniqueId&&(k.issuer.uniqueId=C.certIssuerUniqueId),k.issuer.hash=L.digest().toHex();var Z=r.md.sha1.create(),V=t.toDer(C.certSubject);return Z.update(V.getBytes()),k.subject.getField=function(ee){return h(k.subject,ee)},k.subject.addField=function(ee){v([ee]),k.subject.attributes.push(ee)},k.subject.attributes=n.RDNAttributesAsArray(C.certSubject),C.certSubjectUniqueId&&(k.subject.uniqueId=C.certSubjectUniqueId),k.subject.hash=Z.digest().toHex(),C.certExtensions?k.extensions=n.certificateExtensionsFromAsn1(C.certExtensions):k.extensions=[],k.publicKey=n.publicKeyFromAsn1(C.subjectPublicKeyInfo),k},n.certificateExtensionsFromAsn1=function(E){for(var A=[],C=0;C<E.value.length;++C)for(var I=E.value[C],P=0;P<I.value.length;++P)A.push(n.certificateExtensionFromAsn1(I.value[P]));return A},n.certificateExtensionFromAsn1=function(E){var A={};if(A.id=t.derToOid(E.value[0].value),A.critical=!1,E.value[1].type===t.Type.BOOLEAN?(A.critical=E.value[1].value.charCodeAt(0)!==0,A.value=E.value[2].value):A.value=E.value[1].value,A.id in s){if(A.name=s[A.id],A.name==="keyUsage"){var C=t.fromDer(A.value),I=0,P=0;C.value.length>1&&(I=C.value.charCodeAt(1),P=C.value.length>2?C.value.charCodeAt(2):0),A.digitalSignature=(I&128)==128,A.nonRepudiation=(I&64)==64,A.keyEncipherment=(I&32)==32,A.dataEncipherment=(I&16)==16,A.keyAgreement=(I&8)==8,A.keyCertSign=(I&4)==4,A.cRLSign=(I&2)==2,A.encipherOnly=(I&1)==1,A.decipherOnly=(P&128)==128}else if(A.name==="basicConstraints"){var C=t.fromDer(A.value);C.value.length>0&&C.value[0].type===t.Type.BOOLEAN?A.cA=C.value[0].value.charCodeAt(0)!==0:A.cA=!1;var O=null;C.value.length>0&&C.value[0].type===t.Type.INTEGER?O=C.value[0].value:C.value.length>1&&(O=C.value[1].value),O!==null&&(A.pathLenConstraint=t.derToInteger(O))}else if(A.name==="extKeyUsage")for(var C=t.fromDer(A.value),k=0;k<C.value.length;++k){var N=t.derToOid(C.value[k].value);N in s?A[s[N]]=!0:A[N]=!0}else if(A.name==="nsCertType"){var C=t.fromDer(A.value),I=0;C.value.length>1&&(I=C.value.charCodeAt(1)),A.client=(I&128)==128,A.server=(I&64)==64,A.email=(I&32)==32,A.objsign=(I&16)==16,A.reserved=(I&8)==8,A.sslCA=(I&4)==4,A.emailCA=(I&2)==2,A.objCA=(I&1)==1}else if(A.name==="subjectAltName"||A.name==="issuerAltName"){A.altNames=[];for(var K,C=t.fromDer(A.value),U=0;U<C.value.length;++U){K=C.value[U];var L={type:K.type,value:K.value};switch(A.altNames.push(L),K.type){case 1:case 2:case 6:break;case 7:L.ip=r.util.bytesToIP(K.value);break;case 8:L.oid=t.derToOid(K.value);break}}}else if(A.name==="subjectKeyIdentifier"){var C=t.fromDer(A.value);A.subjectKeyIdentifier=r.util.bytesToHex(C.value)}}return A},n.certificationRequestFromAsn1=function(E,A){var C={},I=[];if(!t.validate(E,d,C,I)){var P=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw P.errors=I,P}var O=t.derToOid(C.publicKeyOid);if(O!==n.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var k=n.createCertificationRequest();if(k.version=C.csrVersion?C.csrVersion.charCodeAt(0):0,k.signatureOid=r.asn1.derToOid(C.csrSignatureOid),k.signatureParameters=g(k.signatureOid,C.csrSignatureParams,!0),k.siginfo.algorithmOid=r.asn1.derToOid(C.csrSignatureOid),k.siginfo.parameters=g(k.siginfo.algorithmOid,C.csrSignatureParams,!1),k.signature=C.csrSignature,k.certificationRequestInfo=C.certificationRequestInfo,A){k.md=p({signatureOid:k.signatureOid,type:"certification request"});var N=t.toDer(k.certificationRequestInfo);k.md.update(N.getBytes())}var K=r.md.sha1.create();return k.subject.getField=function(U){return h(k.subject,U)},k.subject.addField=function(U){v([U]),k.subject.attributes.push(U)},k.subject.attributes=n.RDNAttributesAsArray(C.certificationRequestInfoSubject,K),k.subject.hash=K.digest().toHex(),k.publicKey=n.publicKeyFromAsn1(C.subjectPublicKeyInfo),k.getAttribute=function(U){return h(k,U)},k.addAttribute=function(U){v([U]),k.attributes.push(U)},k.attributes=n.CRIAttributesAsArray(C.certificationRequestInfoAttributes||[]),k},n.createCertificationRequest=function(){var E={};return E.version=0,E.signatureOid=null,E.signature=null,E.siginfo={},E.siginfo.algorithmOid=null,E.subject={},E.subject.getField=function(A){return h(E.subject,A)},E.subject.addField=function(A){v([A]),E.subject.attributes.push(A)},E.subject.attributes=[],E.subject.hash=null,E.publicKey=null,E.attributes=[],E.getAttribute=function(A){return h(E,A)},E.addAttribute=function(A){v([A]),E.attributes.push(A)},E.md=null,E.setSubject=function(A){v(A),E.subject.attributes=A,E.subject.hash=null},E.setAttributes=function(A){v(A),E.attributes=A},E.sign=function(A,C){E.md=C||r.md.sha1.create();var I=s[E.md.algorithm+"WithRSAEncryption"];if(!I){var P=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw P.algorithm=E.md.algorithm,P}E.signatureOid=E.siginfo.algorithmOid=I,E.certificationRequestInfo=n.getCertificationRequestInfo(E);var O=t.toDer(E.certificationRequestInfo);E.md.update(O.getBytes()),E.signature=A.sign(E.md)},E.verify=function(){var A=!1,C=E.md;if(C===null){C=p({signatureOid:E.signatureOid,type:"certification request"});var I=E.certificationRequestInfo||n.getCertificationRequestInfo(E),P=t.toDer(I);C.update(P.getBytes())}return C!==null&&(A=_({certificate:E,md:C,signature:E.signature})),A},E};function m(E){for(var A=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),C,I,P=E.attributes,O=0;O<P.length;++O){C=P[O];var k=C.value,N=t.Type.PRINTABLESTRING;"valueTagClass"in C&&(N=C.valueTagClass,N===t.Type.UTF8&&(k=r.util.encodeUtf8(k))),I=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.type).getBytes()),t.create(t.Class.UNIVERSAL,N,!1,k)])]),A.value.push(I)}return A}function v(E){for(var A,C=0;C<E.length;++C){if(A=E[C],typeof A.name=="undefined"&&(A.type&&A.type in n.oids?A.name=n.oids[A.type]:A.shortName&&A.shortName in u&&(A.name=n.oids[u[A.shortName]])),typeof A.type=="undefined")if(A.name&&A.name in n.oids)A.type=n.oids[A.name];else{var I=new Error("Attribute type not specified.");throw I.attribute=A,I}if(typeof A.shortName=="undefined"&&A.name&&A.name in u&&(A.shortName=u[A.name]),A.type===s.extensionRequest&&(A.valueConstructed=!0,A.valueTagClass=t.Type.SEQUENCE,!A.value&&A.extensions)){A.value=[];for(var P=0;P<A.extensions.length;++P)A.value.push(n.certificateExtensionToAsn1(w(A.extensions[P])))}if(typeof A.value=="undefined"){var I=new Error("Attribute value not specified.");throw I.attribute=A,I}}}function w(E,A){if(A=A||{},typeof E.name=="undefined"&&E.id&&E.id in n.oids&&(E.name=n.oids[E.id]),typeof E.id=="undefined")if(E.name&&E.name in n.oids)E.id=n.oids[E.name];else{var C=new Error("Extension ID not specified.");throw C.extension=E,C}if(typeof E.value!="undefined")return E;if(E.name==="keyUsage"){var I=0,P=0,O=0;E.digitalSignature&&(P|=128,I=7),E.nonRepudiation&&(P|=64,I=6),E.keyEncipherment&&(P|=32,I=5),E.dataEncipherment&&(P|=16,I=4),E.keyAgreement&&(P|=8,I=3),E.keyCertSign&&(P|=4,I=2),E.cRLSign&&(P|=2,I=1),E.encipherOnly&&(P|=1,I=0),E.decipherOnly&&(O|=128,I=7);var k=String.fromCharCode(I);O!==0?k+=String.fromCharCode(P)+String.fromCharCode(O):P!==0&&(k+=String.fromCharCode(P)),E.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,k)}else if(E.name==="basicConstraints")E.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),E.cA&&E.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in E&&E.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(E.pathLenConstraint).getBytes()));else if(E.name==="extKeyUsage"){E.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var N=E.value.value;for(var K in E)E[K]===!0&&(K in s?N.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(s[K]).getBytes())):K.indexOf(".")!==-1&&N.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(K).getBytes())))}else if(E.name==="nsCertType"){var I=0,P=0;E.client&&(P|=128,I=7),E.server&&(P|=64,I=6),E.email&&(P|=32,I=5),E.objsign&&(P|=16,I=4),E.reserved&&(P|=8,I=3),E.sslCA&&(P|=4,I=2),E.emailCA&&(P|=2,I=1),E.objCA&&(P|=1,I=0);var k=String.fromCharCode(I);P!==0&&(k+=String.fromCharCode(P)),E.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,k)}else if(E.name==="subjectAltName"||E.name==="issuerAltName"){E.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var U,L=0;L<E.altNames.length;++L){U=E.altNames[L];var k=U.value;if(U.type===7&&U.ip){if(k=r.util.bytesFromIP(U.ip),k===null){var C=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw C.extension=E,C}}else U.type===8&&(U.oid?k=t.oidToDer(t.oidToDer(U.oid)):k=t.oidToDer(k));E.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,U.type,!1,k))}}else if(E.name==="nsComment"&&A.cert){if(!/^[\x00-\x7F]*$/.test(E.comment)||E.comment.length<1||E.comment.length>128)throw new Error('Invalid "nsComment" content.');E.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,E.comment)}else if(E.name==="subjectKeyIdentifier"&&A.cert){var re=A.cert.generateSubjectKeyIdentifier();E.subjectKeyIdentifier=re.toHex(),E.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,re.getBytes())}else if(E.name==="authorityKeyIdentifier"&&A.cert){E.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var N=E.value.value;if(E.keyIdentifier){var Z=E.keyIdentifier===!0?A.cert.generateSubjectKeyIdentifier().getBytes():E.keyIdentifier;N.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,Z))}if(E.authorityCertIssuer){var V=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[m(E.authorityCertIssuer===!0?A.cert.issuer:E.authorityCertIssuer)])];N.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,V))}if(E.serialNumber){var ee=r.util.hexToBytes(E.serialNumber===!0?A.cert.serialNumber:E.serialNumber);N.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,ee))}}else if(E.name==="cRLDistributionPoints"){E.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var N=E.value.value,fe=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),_e=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]),U,L=0;L<E.altNames.length;++L){U=E.altNames[L];var k=U.value;if(U.type===7&&U.ip){if(k=r.util.bytesFromIP(U.ip),k===null){var C=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw C.extension=E,C}}else U.type===8&&(U.oid?k=t.oidToDer(t.oidToDer(U.oid)):k=t.oidToDer(k));_e.value.push(t.create(t.Class.CONTEXT_SPECIFIC,U.type,!1,k))}fe.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[_e])),N.push(fe)}if(typeof E.value=="undefined"){var C=new Error("Extension value not specified.");throw C.extension=E,C}return E}function y(E,A){switch(E){case s["RSASSA-PSS"]:var C=[];return A.hash.algorithmOid!==void 0&&C.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(A.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),A.mgf.algorithmOid!==void 0&&C.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(A.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(A.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),A.saltLength!==void 0&&C.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(A.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,C);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function b(E){var A=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(E.attributes.length===0)return A;for(var C=E.attributes,I=0;I<C.length;++I){var P=C[I],O=P.value,k=t.Type.UTF8;"valueTagClass"in P&&(k=P.valueTagClass),k===t.Type.UTF8&&(O=r.util.encodeUtf8(O));var N=!1;"valueConstructed"in P&&(N=P.valueConstructed);var K=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(P.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,k,N,O)])]);A.value.push(K)}return A}var T=new Date("1950-01-01T00:00:00Z"),R=new Date("2050-01-01T00:00:00Z");function S(E){return E>=T&&E<R?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(E)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(E))}n.getTBSCertificate=function(E){var A=S(E.validity.notBefore),C=S(E.validity.notAfter),I=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(E.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(E.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E.siginfo.algorithmOid).getBytes()),y(E.siginfo.algorithmOid,E.siginfo.parameters)]),m(E.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[A,C]),m(E.subject),n.publicKeyToAsn1(E.publicKey)]);return E.issuer.uniqueId&&I.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+E.issuer.uniqueId)])),E.subject.uniqueId&&I.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+E.subject.uniqueId)])),E.extensions.length>0&&I.value.push(n.certificateExtensionsToAsn1(E.extensions)),I},n.getCertificationRequestInfo=function(E){var A=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(E.version).getBytes()),m(E.subject),n.publicKeyToAsn1(E.publicKey),b(E)]);return A},n.distinguishedNameToAsn1=function(E){return m(E)},n.certificateToAsn1=function(E){var A=E.tbsCertificate||n.getTBSCertificate(E);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[A,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E.signatureOid).getBytes()),y(E.signatureOid,E.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+E.signature)])},n.certificateExtensionsToAsn1=function(E){var A=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),C=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);A.value.push(C);for(var I=0;I<E.length;++I)C.value.push(n.certificateExtensionToAsn1(E[I]));return A},n.certificateExtensionToAsn1=function(E){var A=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);A.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E.id).getBytes())),E.critical&&A.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var C=E.value;return typeof E.value!="string"&&(C=t.toDer(C).getBytes()),A.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,C)),A},n.certificationRequestToAsn1=function(E){var A=E.certificationRequestInfo||n.getCertificationRequestInfo(E);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[A,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(E.signatureOid).getBytes()),y(E.signatureOid,E.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+E.signature)])},n.createCaStore=function(E){var A={certs:{}};A.getIssuer=function(k){var N=C(k.issuer);return N},A.addCertificate=function(k){if(typeof k=="string"&&(k=r.pki.certificateFromPem(k)),I(k.subject),!A.hasCertificate(k))if(k.subject.hash in A.certs){var N=A.certs[k.subject.hash];r.util.isArray(N)||(N=[N]),N.push(k),A.certs[k.subject.hash]=N}else A.certs[k.subject.hash]=k},A.hasCertificate=function(k){typeof k=="string"&&(k=r.pki.certificateFromPem(k));var N=C(k.subject);if(!N)return!1;r.util.isArray(N)||(N=[N]);for(var K=t.toDer(n.certificateToAsn1(k)).getBytes(),U=0;U<N.length;++U){var L=t.toDer(n.certificateToAsn1(N[U])).getBytes();if(K===L)return!0}return!1},A.listAllCertificates=function(){var k=[];for(var N in A.certs)if(A.certs.hasOwnProperty(N)){var K=A.certs[N];if(!r.util.isArray(K))k.push(K);else for(var U=0;U<K.length;++U)k.push(K[U])}return k},A.removeCertificate=function(k){var N;if(typeof k=="string"&&(k=r.pki.certificateFromPem(k)),I(k.subject),!A.hasCertificate(k))return null;var K=C(k.subject);if(!r.util.isArray(K))return N=A.certs[k.subject.hash],delete A.certs[k.subject.hash],N;for(var U=t.toDer(n.certificateToAsn1(k)).getBytes(),L=0;L<K.length;++L){var re=t.toDer(n.certificateToAsn1(K[L])).getBytes();U===re&&(N=K[L],K.splice(L,1))}return K.length===0&&delete A.certs[k.subject.hash],N};function C(k){return I(k),A.certs[k.hash]||null}function I(k){if(!k.hash){var N=r.md.sha1.create();k.attributes=n.RDNAttributesAsArray(m(k),N),k.hash=N.digest().toHex()}}if(E)for(var P=0;P<E.length;++P){var O=E[P];A.addCertificate(O)}return A},n.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},n.verifyCertificateChain=function(E,A,C){typeof C=="function"&&(C={verify:C}),C=C||{},A=A.slice(0);var I=A.slice(0),P=C.validityCheckDate;typeof P=="undefined"&&(P=new Date);var O=!0,k=null,N=0;do{var K=A.shift(),U=null,L=!1;if(P&&(P<K.validity.notBefore||P>K.validity.notAfter)&&(k={message:"Certificate is not valid yet or has expired.",error:n.certificateError.certificate_expired,notBefore:K.validity.notBefore,notAfter:K.validity.notAfter,now:P}),k===null){if(U=A[0]||E.getIssuer(K),U===null&&K.isIssuer(K)&&(L=!0,U=K),U){var re=U;r.util.isArray(re)||(re=[re]);for(var Z=!1;!Z&&re.length>0;){U=re.shift();try{Z=U.verify(K)}catch{}}Z||(k={message:"Certificate signature is invalid.",error:n.certificateError.bad_certificate})}k===null&&(!U||L)&&!E.hasCertificate(K)&&(k={message:"Certificate is not trusted.",error:n.certificateError.unknown_ca})}if(k===null&&U&&!K.isIssuer(U)&&(k={message:"Certificate issuer is invalid.",error:n.certificateError.bad_certificate}),k===null)for(var V={keyUsage:!0,basicConstraints:!0},ee=0;k===null&&ee<K.extensions.length;++ee){var fe=K.extensions[ee];fe.critical&&!(fe.name in V)&&(k={message:"Certificate has an unsupported critical extension.",error:n.certificateError.unsupported_certificate})}if(k===null&&(!O||A.length===0&&(!U||L))){var _e=K.getExtension("basicConstraints"),ce=K.getExtension("keyUsage");if(ce!==null&&(!ce.keyCertSign||_e===null)&&(k={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:n.certificateError.bad_certificate}),k===null&&_e!==null&&!_e.cA&&(k={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:n.certificateError.bad_certificate}),k===null&&ce!==null&&"pathLenConstraint"in _e){var Ee=N-1;Ee>_e.pathLenConstraint&&(k={message:"Certificate basicConstraints pathLenConstraint violated.",error:n.certificateError.bad_certificate})}}var Ie=k===null?!0:k.error,ue=C.verify?C.verify(Ie,N,I):Ie;if(ue===!0)k=null;else throw Ie===!0&&(k={message:"The application rejected the certificate.",error:n.certificateError.bad_certificate}),(ue||ue===0)&&(typeof ue=="object"&&!r.util.isArray(ue)?(ue.message&&(k.message=ue.message),ue.error&&(k.error=ue.error)):typeof ue=="string"&&(k.error=ue)),k;O=!1,++N}while(A.length>0);return!0}}}),require_pkcs7=__commonJS({"node_modules/node-forge/lib/pkcs7.js"(e,o){init_node_globals();var r=require_forge();require_aes(),require_asn1(),require_des(),require_oids(),require_pem(),require_pkcs7asn1(),require_random(),require_util(),require_x509();var t=r.asn1,n=o.exports=r.pkcs7=r.pkcs7||{};n.messageFromPem=function(_){var m=r.pem.decode(_)[0];if(m.type!=="PKCS7"){var v=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw v.headerType=m.type,v}if(m.procType&&m.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var w=t.fromDer(m.body);return n.messageFromAsn1(w)},n.messageToPem=function(_,m){var v={type:"PKCS7",body:t.toDer(_.toAsn1()).getBytes()};return r.pem.encode(v,{maxline:m})},n.messageFromAsn1=function(_){var m={},v=[];if(!t.validate(_,n.asn1.contentInfoValidator,m,v)){var w=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw w.errors=v,w}var y=t.derToOid(m.contentType),b;switch(y){case r.pki.oids.envelopedData:b=n.createEnvelopedData();break;case r.pki.oids.encryptedData:b=n.createEncryptedData();break;case r.pki.oids.signedData:b=n.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+y+" is not (yet) supported.")}return b.fromAsn1(m.content.value[0]),b},n.createSignedData=function(){var _=null;return _={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(w){if(g(_,w,n.asn1.signedDataValidator),_.certificates=[],_.crls=[],_.digestAlgorithmIdentifiers=[],_.contentInfo=null,_.signerInfos=[],_.rawCapture.certificates)for(var y=_.rawCapture.certificates.value,b=0;b<y.length;++b)_.certificates.push(r.pki.certificateFromAsn1(y[b]))},toAsn1:function(){_.contentInfo||_.sign();for(var w=[],y=0;y<_.certificates.length;++y)w.push(r.pki.certificateToAsn1(_.certificates[y]));var b=[],T=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(_.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,_.digestAlgorithmIdentifiers),_.contentInfo])]);return w.length>0&&T.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,w)),b.length>0&&T.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,b)),T.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,_.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.type).getBytes()),T])},addSigner:function(w){var y=w.issuer,b=w.serialNumber;if(w.certificate){var T=w.certificate;typeof T=="string"&&(T=r.pki.certificateFromPem(T)),y=T.issuer.attributes,b=T.serialNumber}var R=w.key;if(!R)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof R=="string"&&(R=r.pki.privateKeyFromPem(R));var S=w.digestAlgorithm||r.pki.oids.sha1;switch(S){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+S)}var E=w.authenticatedAttributes||[];if(E.length>0){for(var A=!1,C=!1,I=0;I<E.length;++I){var P=E[I];if(!A&&P.type===r.pki.oids.contentType){if(A=!0,C)break;continue}if(!C&&P.type===r.pki.oids.messageDigest){if(C=!0,A)break;continue}}if(!A||!C)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}_.signers.push({key:R,version:1,issuer:y,serialNumber:b,digestAlgorithm:S,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:E,unauthenticatedAttributes:[]})},sign:function(w){if(w=w||{},(typeof _.content!="object"||_.contentInfo===null)&&(_.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes())]),"content"in _)){var y;_.content instanceof r.util.ByteBuffer?y=_.content.bytes():typeof _.content=="string"&&(y=r.util.encodeUtf8(_.content)),w.detached?_.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y):_.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,y)]))}if(_.signers.length!==0){var b=m();v(b)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(w){typeof w=="string"&&(w=r.pki.certificateFromPem(w)),_.certificates.push(w)},addCertificateRevokationList:function(w){throw new Error("PKCS#7 CRL support not yet implemented.")}},_;function m(){for(var w={},y=0;y<_.signers.length;++y){var b=_.signers[y],T=b.digestAlgorithm;T in w||(w[T]=r.md[r.pki.oids[T]].create()),b.authenticatedAttributes.length===0?b.md=w[T]:b.md=r.md[r.pki.oids[T]].create()}_.digestAlgorithmIdentifiers=[];for(var T in w)_.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(T).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return w}function v(w){var y;if(_.detachedContent?y=_.detachedContent:(y=_.contentInfo.value[1],y=y.value[0]),!y)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var b=t.derToOid(_.contentInfo.value[0].value),T=t.toDer(y);T.getByte(),t.getBerValueLength(T),T=T.getBytes();for(var R in w)w[R].start().update(T);for(var S=new Date,E=0;E<_.signers.length;++E){var A=_.signers[E];if(A.authenticatedAttributes.length===0){if(b!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{A.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var C=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),I=0;I<A.authenticatedAttributes.length;++I){var P=A.authenticatedAttributes[I];P.type===r.pki.oids.messageDigest?P.value=w[A.digestAlgorithm].digest():P.type===r.pki.oids.signingTime&&(P.value||(P.value=S)),C.value.push(d(P)),A.authenticatedAttributesAsn1.value.push(d(P))}T=t.toDer(C).getBytes(),A.md.start().update(T)}A.signature=A.key.sign(A.md,"RSASSA-PKCS1-V1_5")}_.signerInfos=c(_.signers)}},n.createEncryptedData=function(){var _=null;return _={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(m){g(_,m,n.asn1.encryptedDataValidator)},decrypt:function(m){m!==void 0&&(_.encryptedContent.key=m),p(_)}},_},n.createEnvelopedData=function(){var _=null;return _={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(m){var v=g(_,m,n.asn1.envelopedDataValidator);_.recipients=l(v.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(_.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,f(_.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,h(_.encryptedContent))])])])},findRecipient:function(m){for(var v=m.issuer.attributes,w=0;w<_.recipients.length;++w){var y=_.recipients[w],b=y.issuer;if(y.serialNumber===m.serialNumber&&b.length===v.length){for(var T=!0,R=0;R<v.length;++R)if(b[R].type!==v[R].type||b[R].value!==v[R].value){T=!1;break}if(T)return y}}return null},decrypt:function(m,v){if(_.encryptedContent.key===void 0&&m!==void 0&&v!==void 0)switch(m.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var w=v.decrypt(m.encryptedContent.content);_.encryptedContent.key=r.util.createBuffer(w);break;default:throw new Error("Unsupported asymmetric cipher, OID "+m.encryptedContent.algorithm)}p(_)},addRecipient:function(m){_.recipients.push({version:0,issuer:m.issuer.attributes,serialNumber:m.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:m.publicKey}})},encrypt:function(m,v){if(_.encryptedContent.content===void 0){v=v||_.encryptedContent.algorithm,m=m||_.encryptedContent.key;var w,y,b;switch(v){case r.pki.oids["aes128-CBC"]:w=16,y=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:w=24,y=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:w=32,y=16,b=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:w=24,y=8,b=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+v)}if(m===void 0)m=r.util.createBuffer(r.random.getBytes(w));else if(m.length()!=w)throw new Error("Symmetric key has wrong length; got "+m.length()+" bytes, expected "+w+".");_.encryptedContent.algorithm=v,_.encryptedContent.key=m,_.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(y));var T=b(m);if(T.start(_.encryptedContent.parameter.copy()),T.update(_.content),!T.finish())throw new Error("Symmetric encryption failed.");_.encryptedContent.content=T.output}for(var R=0;R<_.recipients.length;++R){var S=_.recipients[R];if(S.encryptedContent.content===void 0)switch(S.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:S.encryptedContent.content=S.encryptedContent.key.encrypt(_.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+S.encryptedContent.algorithm)}}}},_};function s(_){var m={},v=[];if(!t.validate(_,n.asn1.recipientInfoValidator,m,v)){var w=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw w.errors=v,w}return{version:m.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(m.issuer),serialNumber:r.util.createBuffer(m.serial).toHex(),encryptedContent:{algorithm:t.derToOid(m.encAlgorithm),parameter:m.encParameter?m.encParameter.value:void 0,content:m.encKey}}}function u(_){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(_.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:_.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(_.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.encryptedContent.content)])}function l(_){for(var m=[],v=0;v<_.length;++v)m.push(s(_[v]));return m}function f(_){for(var m=[],v=0;v<_.length;++v)m.push(u(_[v]));return m}function a(_){var m=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(_.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:_.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,r.util.hexToBytes(_.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(_.authenticatedAttributesAsn1&&m.value.push(_.authenticatedAttributesAsn1),m.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),m.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.signature)),_.unauthenticatedAttributes.length>0){for(var v=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),w=0;w<_.unauthenticatedAttributes.length;++w){var y=_.unauthenticatedAttributes[w];v.values.push(d(y))}m.value.push(v)}return m}function c(_){for(var m=[],v=0;v<_.length;++v)m.push(a(_[v]));return m}function d(_){var m;if(_.type===r.pki.oids.contentType)m=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.value).getBytes());else if(_.type===r.pki.oids.messageDigest)m=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.value.bytes());else if(_.type===r.pki.oids.signingTime){var v=new Date("1950-01-01T00:00:00Z"),w=new Date("2050-01-01T00:00:00Z"),y=_.value;if(typeof y=="string"){var b=Date.parse(y);isNaN(b)?y.length===13?y=t.utcTimeToDate(y):y=t.generalizedTimeToDate(y):y=new Date(b)}y>=v&&y<w?m=t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(y)):m=t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(y))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[m])])}function h(_){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(_.algorithm).getBytes()),_.parameter?t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.parameter.getBytes()):void 0]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,_.content.getBytes())])]}function g(_,m,v){var w={},y=[];if(!t.validate(m,v,w,y)){var b=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw b.errors=b,b}var T=t.derToOid(w.contentType);if(T!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(w.encryptedContent){var R="";if(r.util.isArray(w.encryptedContent))for(var S=0;S<w.encryptedContent.length;++S){if(w.encryptedContent[S].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");R+=w.encryptedContent[S].value}else R=w.encryptedContent;_.encryptedContent={algorithm:t.derToOid(w.encAlgorithm),parameter:r.util.createBuffer(w.encParameter.value),content:r.util.createBuffer(R)}}if(w.content){var R="";if(r.util.isArray(w.content))for(var S=0;S<w.content.length;++S){if(w.content[S].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");R+=w.content[S].value}else R=w.content;_.content=r.util.createBuffer(R)}return _.version=w.version.charCodeAt(0),_.rawCapture=w,w}function p(_){if(_.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(_.content===void 0){var m;switch(_.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:m=r.aes.createDecryptionCipher(_.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:m=r.des.createDecryptionCipher(_.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+_.encryptedContent.algorithm)}if(m.start(_.encryptedContent.parameter),m.update(_.encryptedContent.content),!m.finish())throw new Error("Symmetric decryption failed.");_.content=m.output}}}}),require_util7=__commonJS({"node_modules/libp2p/src/keychain/util.js"(e,o){init_node_globals(),require_x509();var r=require_forge(),t=r.pki,n=(u,l)=>{const f=t.setRsaPublicKey(l.n,l.e),a=t.createCertificate();a.publicKey=f,a.serialNumber="01",a.validity.notBefore=new Date,a.validity.notAfter=new Date,a.validity.notAfter.setFullYear(a.validity.notBefore.getFullYear()+10);const c=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:u.id}];return a.setSubject(c),a.setIssuer(c),a.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),a.sign(l),a};async function s(u,l){const f=u.map(l),c=(await Promise.all(f)).findIndex(d=>d);return u[c]}o.exports={certificateForKey:n,findAsync:s}}}),require_cms=__commonJS({"node_modules/libp2p/src/keychain/cms.js"(e,o){init_node_globals(),require_pkcs7(),require_pbe();var r=require_forge(),{certificateForKey:t,findAsync:n}=require_util7(),s=require_err_code(),{fromString:u}=(init_from_string(),__toCommonJS(from_string_exports)),{toString:l}=(init_to_string(),__toCommonJS(to_string_exports)),{codes:f}=require_errors4(),a=new WeakMap,c=class{constructor(d,h){if(!d)throw s(new Error("keychain is required"),f.ERR_KEYCHAIN_REQUIRED);this.keychain=d,a.set(this,{dek:h})}async encrypt(d,h){if(!(h instanceof Uint8Array))throw s(new Error("Plain data must be a Uint8Array"),f.ERR_INVALID_PARAMETERS);const g=await this.keychain.findKeyByName(d),p=await this.keychain._getPrivateKey(d),_=a.get(this).dek,m=r.pki.decryptRsaPrivateKey(p,_),v=await t(g,m),w=r.pkcs7.createEnvelopedData();w.addRecipient(v),w.content=r.util.createBuffer(h),w.encrypt();const y=r.asn1.toDer(w.toAsn1()).getBytes();return u(y,"ascii")}async decrypt(d){if(!(d instanceof Uint8Array))throw s(new Error("CMS data is required"),f.ERR_INVALID_PARAMETERS);let h;try{const y=r.util.createBuffer(l(d,"ascii")),b=r.asn1.fromDer(y);h=r.pkcs7.messageFromAsn1(b)}catch(y){throw s(new Error("Invalid CMS: "+y.message),f.ERR_INVALID_CMS)}const g=h.recipients.filter(y=>y.issuer.find(b=>b.shortName==="O"&&b.value==="ipfs")).filter(y=>y.issuer.find(b=>b.shortName==="CN")).map(y=>({recipient:y,keyId:y.issuer.find(b=>b.shortName==="CN").value})),p=await n(g,async y=>{try{if(await this.keychain.findKeyById(y.keyId))return!0}catch{return!1}return!1});if(!p){const y=g.map(b=>b.keyId);throw s(new Error("Decryption needs one of the key(s): "+y.join(", ")),f.ERR_MISSING_KEYS,{missingKeys:y})}const _=await this.keychain.findKeyById(p.keyId);if(!_)throw s(new Error("No key available to decrypto"),f.ERR_NO_KEY);const m=await this.keychain._getPrivateKey(_.name),v=a.get(this).dek,w=r.pki.decryptRsaPrivateKey(m,v);return h.decrypt(p.recipient,w),u(h.content.getBytes(),"ascii")}};o.exports=c}}),require_keychain=__commonJS({"node_modules/libp2p/src/keychain/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:keychain"),{error:r("libp2p:keychain:err")}),n=require_sanitize_filename(),s=require_merge_options(),u=require_src6(),{Key:l}=(init_key(),__toCommonJS(key_exports)),f=require_cms(),a=require_err_code(),{codes:c}=require_errors4(),{toString:d}=(init_to_string(),__toCommonJS(to_string_exports)),{fromString:h}=(init_from_string(),__toCommonJS(from_string_exports));require_sha512();var g="/pkcs8/",p="/info/",_=new WeakMap,m={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},v={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function w(S){return!S||typeof S!="string"?!1:S===n(S.trim())}async function y(S){const E=200,A=1e3,C=Math.random()*(A-E)+E;throw await new Promise(I=>setTimeout(I,C)),S}function b(S){return new l(g+S)}function T(S){return new l(p+S)}var R=class{constructor(S,E){if(!S)throw new Error("store is required");if(this.store=S,this.opts=s(v,E),this.opts.pass&&this.opts.pass.length<20)throw new Error("pass must be least 20 characters");if(this.opts.dek.keyLength<m.minKeyLength)throw new Error(`dek.keyLength must be least ${m.minKeyLength} bytes`);if(this.opts.dek.salt.length<m.minSaltLength)throw new Error(`dek.saltLength must be least ${m.minSaltLength} bytes`);if(this.opts.dek.iterationCount<m.minIterationCount)throw new Error(`dek.iterationCount must be least ${m.minIterationCount}`);const A=this.opts.pass?u.pbkdf2(this.opts.pass,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";_.set(this,{dek:A})}get cms(){return new f(this,_.get(this).dek)}static generateOptions(){const S=Object.assign({},v),E=Math.ceil(m.minSaltLength/3)*3;return S.dek.salt=d(u.randomBytes(E),"base64"),S}static get options(){return v}async createKey(S,E,A=2048){const C=this;if(!w(S)||S==="self")return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));if(typeof E!="string")return y(a(new Error(`Invalid key type '${E}'`),c.ERR_INVALID_KEY_TYPE));const I=b(S);if(await C.store.has(I))return y(a(new Error(`Key '${S}' already exists`),c.ERR_KEY_ALREADY_EXISTS));switch(E.toLowerCase()){case"rsa":if(!Number.isSafeInteger(A)||A<2048)return y(a(new Error(`Invalid RSA key size ${A}`),c.ERR_INVALID_KEY_SIZE));break}let O;try{const k=await u.keys.generateKeyPair(E,A),N=await k.id(),K=_.get(this).dek,U=await k.export(K);O={name:S,id:N};const L=C.store.batch();L.put(I,h(U)),L.put(T(S),h(JSON.stringify(O))),await L.commit()}catch(k){return y(k)}return O}async listKeys(){const S=this,E={prefix:p},A=[];for await(const C of S.store.query(E))A.push(JSON.parse(d(C.value)));return A}async findKeyById(S){try{return(await this.listKeys()).find(A=>A.id===S)}catch(E){return y(E)}}async findKeyByName(S){if(!w(S))return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));const E=T(S);try{const A=await this.store.get(E);return JSON.parse(d(A))}catch(A){return y(a(new Error(`Key '${S}' does not exist. ${A.message}`),c.ERR_KEY_NOT_FOUND))}}async removeKey(S){const E=this;if(!w(S)||S==="self")return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));const A=b(S),C=await E.findKeyByName(S),I=E.store.batch();return I.delete(A),I.delete(T(S)),await I.commit(),C}async renameKey(S,E){const A=this;if(!w(S)||S==="self")return y(a(new Error(`Invalid old key name '${S}'`),c.ERR_OLD_KEY_NAME_INVALID));if(!w(E)||E==="self")return y(a(new Error(`Invalid new key name '${E}'`),c.ERR_NEW_KEY_NAME_INVALID));const C=b(S),I=b(E),P=T(S),O=T(E);if(await A.store.has(I))return y(a(new Error(`Key '${E}' already exists`),c.ERR_KEY_ALREADY_EXISTS));try{const N=await A.store.get(C),K=await A.store.get(P),U=JSON.parse(d(K));U.name=E;const L=A.store.batch();return L.put(I,N),L.put(O,h(JSON.stringify(U))),L.delete(C),L.delete(P),await L.commit(),U}catch(N){return y(N)}}async exportKey(S,E){if(!w(S))return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));if(!E)return y(a(new Error("Password is required"),c.ERR_PASSWORD_REQUIRED));const A=b(S);try{const C=await this.store.get(A),I=d(C),P=_.get(this).dek;return(await u.keys.import(I,P)).export(E)}catch(C){return y(C)}}async importKey(S,E,A){const C=this;if(!w(S)||S==="self")return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));if(!E)return y(a(new Error("PEM encoded key is required"),c.ERR_PEM_REQUIRED));const I=b(S);if(await C.store.has(I))return y(a(new Error(`Key '${S}' already exists`),c.ERR_KEY_ALREADY_EXISTS));let O;try{O=await u.keys.import(E,A)}catch{return y(a(new Error("Cannot read the key, most likely the password is wrong"),c.ERR_CANNOT_READ_KEY))}let k;try{k=await O.id();const U=_.get(this).dek;E=await O.export(U)}catch(U){return y(U)}const N={name:S,id:k},K=C.store.batch();return K.put(I,h(E)),K.put(T(S),h(JSON.stringify(N))),await K.commit(),N}async importPeer(S,E){const A=this;if(!w(S))return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));if(!E||!E.privKey)return y(a(new Error("Peer.privKey is required"),c.ERR_MISSING_PRIVATE_KEY));const C=E.privKey,I=b(S);if(await A.store.has(I))return y(a(new Error(`Key '${S}' already exists`),c.ERR_KEY_ALREADY_EXISTS));try{const O=await C.id(),k=_.get(this).dek,N=await C.export(k),K={name:S,id:O},U=A.store.batch();return U.put(I,h(N)),U.put(T(S),h(JSON.stringify(K))),await U.commit(),K}catch(O){return y(O)}}async _getPrivateKey(S){if(!w(S))return y(a(new Error(`Invalid key name '${S}'`),c.ERR_INVALID_KEY_NAME));try{const E=b(S),A=await this.store.get(E);return d(A)}catch(E){return y(a(new Error(`Key '${S}' does not exist. ${E.message}`),c.ERR_KEY_NOT_FOUND))}}async rotateKeychainPass(S,E){if(typeof S!="string")return y(a(new Error(`Invalid old pass type '${typeof S}'`),c.ERR_INVALID_OLD_PASS_TYPE));if(typeof E!="string")return y(a(new Error(`Invalid new pass type '${typeof E}'`),c.ERR_INVALID_NEW_PASS_TYPE));if(E.length<20)return y(a(new Error(`Invalid pass length ${E.length}`),c.ERR_INVALID_PASS_LENGTH));t("recreating keychain");const A=_.get(this).dek;this.opts.pass=E;const C=E?u.pbkdf2(E,this.opts.dek.salt,this.opts.dek.iterationCount,this.opts.dek.keyLength,this.opts.dek.hash):"";_.set(this,{dek:C});const I=await this.listKeys();for(const P of I){const O=await this.store.get(b(P.name)),k=d(O),N=await u.keys.import(k,A),K=C.toString(),U=await N.export(K),L=this.store.batch(),re={name:P.name,id:P.id};L.put(b(P.name),h(U)),L.put(T(P.name),h(JSON.stringify(re))),await L.commit()}t("keychain reconstructed")}};o.exports=R}}),require_dist2=__commonJS({"node_modules/streaming-iterables/dist/index.js"(e,o){init_node_globals(),function(r,t){typeof e=="object"&&typeof o!="undefined"?t(e):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis!="undefined"?globalThis:r||self,t(r.streamingIterables={}))}(e,function(r){async function*t(j,B){let $=[];for await(const G of B)$.push(G),$.length===j&&(yield $,$=[]);$.length>0&&(yield $)}function*n(j,B){let $=[];for(const G of B)$.push(G),$.length===j&&(yield $,$=[]);$.length>0&&(yield $)}function s(j,B){return B===void 0?$=>s(j,$):B[Symbol.asyncIterator]?t(j,B):n(j,B)}function u(j){if(typeof j.next=="function")return j;if(typeof j[Symbol.iterator]=="function")return j[Symbol.iterator]();if(typeof j[Symbol.asyncIterator]=="function")return j[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function l(){let j,B;return{promise:new Promise((G,X)=>{B=G,j=X}),reject:j,resolve:B}}function f(j,B){const $=u(B),G=[],X=[];let H=!1,he=!1;function we(){for(;X.length>0&&G.length>0;){const Be=X.shift(),{error:Le,value:W}=G.shift();Le?Be.reject(Le):Be.resolve({done:!1,value:W})}for(;X.length>0&&he;){const{resolve:Be}=X.shift();Be({done:!0,value:void 0})}}async function Te(){if(!he&&!H&&!(G.length>=j)){H=!0;try{const{done:Be,value:Le}=await $.next();Be?he=!0:G.push({value:Le})}catch(Be){he=!0,G.push({error:Be})}we(),H=!1,Te()}}async function De(){if(G.length>0){const{error:Le,value:W}=G.shift();if(Le)throw Le;return Te(),{done:!1,value:W}}if(he)return{done:!0,value:void 0};const Be=l();return X.push(Be),Te(),Be.promise}const Me={next:De,[Symbol.asyncIterator]:()=>Me};return Me}function*a(j,B){const $=[];let G;try{for(const X of B)$.push(X),!($.length<=j)&&(yield $.shift())}catch(X){G=X}for(const X of $)yield X;if(G)throw G}function c(j,B){return B===void 0?$=>c(j,$):j===0?B:B[Symbol.asyncIterator]?f(j,B):a(j,B)}async function d(j){const B=[];for await(const $ of j)B.push($);return B}function h(j){return j[Symbol.asyncIterator]?d(j):Array.from(j)}async function*g(j){for await(const B of j)yield*B}function*p(j){for(const B of j)yield*B}function _(...j){return j.find($=>$[Symbol.asyncIterator]!==void 0)?g(j):p(j)}async function m(j){for await(const B of j);}function v(j){if(j[Symbol.asyncIterator])return m(j);for(const B of j);}async function*w(j,B){for await(const $ of B)await j($)&&(yield $)}function y(j,B){return B===void 0?$=>w(j,$):w(j,B)}async function*b(j){for await(const B of j)B&&typeof B!="string"&&(B[Symbol.iterator]||B[Symbol.asyncIterator])?yield*b(B):yield B}async function*T(j,B){for await(const $ of B)yield await j($)}function R(j,B){return B===void 0?$=>T(j,$):T(j,B)}function S(j,B){return B===void 0?$=>S(j,$):y($=>$!=null,b(R(j,B)))}function E(j,B,$){const G=u($),X=[],H=[];let he=!1,we=!1,Te=0,De=null;function Me(){for(;H.length>0&&X.length>0;){const{resolve:M}=H.shift(),ie=X.shift();M({done:!1,value:ie})}for(;H.length>0&&Te===0&&he;){const{resolve:M,reject:ie}=H.shift();De?(ie(De),De=null):M({done:!0,value:void 0})}}async function Be(){if(he){Me();return}if(!we&&!(Te+X.length>=j)){we=!0,Te++;try{const{done:M,value:ie}=await G.next();M?(he=!0,Te--,Me()):Le(ie)}catch(M){he=!0,Te--,De=M,Me()}we=!1,Be()}}async function Le(M){try{const ie=await B(M);if(ie&&ie[Symbol.asyncIterator])for await(const ve of ie)X.push(ve);else X.push(ie)}catch(ie){he=!0,De=ie}Te--,Me(),Be()}async function W(){if(X.length===0){const ie=l();return H.push(ie),Be(),ie.promise}const M=X.shift();return Be(),{done:!1,value:M}}const q={next:W,[Symbol.asyncIterator]:()=>q};return q}function A(j,B,$){return B===void 0?(G,X)=>X?A(j,G,X):A(j,G):$===void 0?G=>A(j,B,G):y(G=>G!=null,b(E(j,B,$)))}async function C(j){return new Promise(B=>{j.once("readable",()=>{B()})})}async function*I(j){for(;;){const B=j.read();if(B!==null){yield B;continue}if(j._readableState.ended)break;await C(j)}}function P(j){return typeof j[Symbol.asyncIterator]=="function"?j:I(j)}async function*O(...j){const B=new Set(j.map(u));for(;B.size>0;)for(const $ of B){const G=await $.next();G.done?B.delete($):yield G.value}}function k(j,...B){let $=j();for(const G of B)$=G($);return $}async function*N(j,B,$){let G=null;const X=Te=>({value:B(Te)}),H=async function*(Te){for await(const De of Te){if(G)return;yield De}},he=k(()=>$,c(1),H,R(X),c(j-1)),we=u(he);for(;;){const{value:Te,done:De}=await we.next();if(De)break;try{const Me=await Te.value;G||(yield Me)}catch(Me){G=Me}}if(G)throw G}function K(j,B,$){return B===void 0?(G,X)=>K(j,G,X):$===void 0?G=>K(j,B,G):j===1?R(B,$):N(j,B,$)}function U(j,B,$){return B===void 0?(G,X)=>X?U(j,G,X):U(j,G):$===void 0?G=>U(j,B,G):y(G=>G!=null,b(K(j,B,$)))}async function*L(...j){const B=j.map(u),$=new Set,G=new Map;let X=null,H=null,he=null;const we=Be=>{X=Be,H&&H(Be)},Te=Be=>{he&&he(Be)},De=()=>new Promise((Be,Le)=>{if(X&&Le(X),G.size>0)return Be();he=Be,H=Le}),Me=Be=>{const Le=Promise.resolve(Be.next()).then(async({done:W,value:q})=>{W||G.set(Be,q),$.delete(Le)});$.add(Le),Le.then(Te,we)};for(const Be of B)Me(Be);for(;;){if($.size===0&&G.size===0)return;await De();for(const[Be,Le]of G)G.delete(Be),yield Le,Me(Be)}}async function re(j,B,$){let G=B;for await(const X of $)G=await j(G,X);return G}function Z(j,B,$){return B===void 0?(G,X)=>X?re(j,G,X):Z(j,G):$===void 0?G=>Z(j,B,G):re(j,B,$)}async function*V(j,B){let $=0;for await(const G of B)if(yield await G,$++,$>=j)break}function*ee(j,B){let $=0;for(const G of B)if(yield G,$++,$>=j)break}function fe(j,B){return B===void 0?$=>fe(j,$):B[Symbol.asyncIterator]?V(j,B):ee(j,B)}async function*_e(j,B){for await(const $ of B)await j($),yield $}function ce(j,B){return B===void 0?$=>_e(j,$):_e(j,B)}function Ee(j,B){let $=j[0]+B[0],G=j[1]+B[1];if(G>=1e9){const X=G%1e9;$+=(G-X)/1e9,G=X}return[$,G]}async function*Ie(j,B){const $=B[Symbol.asyncIterator]();let G=[0,0];for(;;){const X=process.hrtime(),{value:H,done:he}=await $.next(),we=process.hrtime(X);if(G=Ee(G,we),j.progress&&j.progress(we,G),he)return j.total&&j.total(G),H;yield H}}function*ue(j,B){const $=B[Symbol.iterator]();let G=[0,0];for(;;){const X=process.hrtime(),{value:H,done:he}=$.next(),we=process.hrtime(X);if(G=Ee(G,we),j.progress&&j.progress(we,G),he)return j.total&&j.total(G),H;yield H}}function pe(j={},B){return B===void 0?$=>pe(j,$):B[Symbol.asyncIterator]!==void 0?Ie(j,B):ue(j,B)}function Ae(j,B,$){const G=u($),X=[],H=[];let he=!1,we=!1,Te=0,De=null;function Me(){for(;H.length>0&&X.length>0;){const{resolve:M}=H.shift(),ie=X.shift();M({done:!1,value:ie})}for(;H.length>0&&Te===0&&he;){const{resolve:M,reject:ie}=H.shift();De?(ie(De),De=null):M({done:!0,value:void 0})}}async function Be(){if(he){Me();return}if(!we&&!(Te+X.length>=j)){we=!0,Te++;try{const{done:M,value:ie}=await G.next();M?(he=!0,Te--,Me()):Le(ie)}catch(M){he=!0,Te--,De=M,Me()}we=!1,Be()}}async function Le(M){try{const ie=await B(M);X.push(ie)}catch(ie){he=!0,De=ie}Te--,Me(),Be()}async function W(){if(X.length===0){const ie=l();return H.push(ie),Be(),ie.promise}const M=X.shift();return Be(),{done:!1,value:M}}const q={next:W,[Symbol.asyncIterator]:()=>q};return q}function Y(j,B,$){return B===void 0?(G,X)=>X?Y(j,G,X):Y(j,G):$===void 0?G=>Y(j,B,G):Ae(j,B,$)}async function se(j,B){let $=null,G=null,X=null;const H=De=>{$=De,G&&G(De)},he=()=>{X&&X()},we=()=>{j.removeListener("error",H),j.removeListener("drain",he)};j.once("error",H);const Te=()=>new Promise((De,Me)=>{if($)return Me($);j.once("drain",he),X=De,G=Me});for await(const De of B)if(j.write(De)===!1&&await Te(),$)break;if(we(),$)throw $}function F(j,B){return B===void 0?$=>se(j,$):se(j,B)}r.batch=s,r.buffer=c,r.collect=h,r.concat=_,r.consume=v,r.filter=y,r.flatMap=S,r.flatTransform=A,r.flatten=b,r.fromStream=P,r.getIterator=u,r.map=R,r.merge=O,r.parallelFlatMap=U,r.parallelMap=K,r.parallelMerge=L,r.pipeline=k,r.reduce=Z,r.take=fe,r.tap=ce,r.time=pe,r.transform=Y,r.writeToStream=F,Object.defineProperty(r,"__esModule",{value:!0})})}}),require_old_peers=__commonJS({"node_modules/libp2p/src/metrics/old-peers.js"(e,o){init_node_globals();var r=require_hashlru();o.exports=t=>{const n=r(t);return n.delete=n.remove,n}}}),require_bignumber=__commonJS({"node_modules/bignumber.js/bignumber.js"(e,o){init_node_globals(),function(r){var t,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,u=Math.floor,l="[BigNumber Error] ",f=l+"Number primitive has more than 15 significant digits: ",a=1e14,c=14,d=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,p=1e9;function _(S){var E,A,C,I=ce.prototype={constructor:ce,toString:null,valueOf:null},P=new ce(1),O=20,k=4,N=-7,K=21,U=-1e7,L=1e7,re=!1,Z=1,V=0,ee={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",_e=!0;function ce(Y,se){var F,j,B,$,G,X,H,he,we=this;if(!(we instanceof ce))return new ce(Y,se);if(se==null){if(Y&&Y._isBigNumber===!0){we.s=Y.s,!Y.c||Y.e>L?we.c=we.e=null:Y.e<U?we.c=[we.e=0]:(we.e=Y.e,we.c=Y.c.slice());return}if((X=typeof Y=="number")&&Y*0==0){if(we.s=1/Y<0?(Y=-Y,-1):1,Y===~~Y){for($=0,G=Y;G>=10;G/=10,$++);$>L?we.c=we.e=null:(we.e=$,we.c=[Y]);return}he=String(Y)}else{if(!n.test(he=String(Y)))return C(we,he,X);we.s=he.charCodeAt(0)==45?(he=he.slice(1),-1):1}($=he.indexOf("."))>-1&&(he=he.replace(".","")),(G=he.search(/e/i))>0?($<0&&($=G),$+=+he.slice(G+1),he=he.substring(0,G)):$<0&&($=he.length)}else{if(y(se,2,fe.length,"Base"),se==10&&_e)return we=new ce(Y),pe(we,O+we.e+1,k);if(he=String(Y),X=typeof Y=="number"){if(Y*0!=0)return C(we,he,X,se);if(we.s=1/Y<0?(he=he.slice(1),-1):1,ce.DEBUG&&he.replace(/^0\.0*|\./,"").length>15)throw Error(f+Y)}else we.s=he.charCodeAt(0)===45?(he=he.slice(1),-1):1;for(F=fe.slice(0,se),$=G=0,H=he.length;G<H;G++)if(F.indexOf(j=he.charAt(G))<0){if(j=="."){if(G>$){$=H;continue}}else if(!B&&(he==he.toUpperCase()&&(he=he.toLowerCase())||he==he.toLowerCase()&&(he=he.toUpperCase()))){B=!0,G=-1,$=0;continue}return C(we,String(Y),X,se)}X=!1,he=A(he,se,10,we.s),($=he.indexOf("."))>-1?he=he.replace(".",""):$=he.length}for(G=0;he.charCodeAt(G)===48;G++);for(H=he.length;he.charCodeAt(--H)===48;);if(he=he.slice(G,++H)){if(H-=G,X&&ce.DEBUG&&H>15&&(Y>d||Y!==u(Y)))throw Error(f+we.s*Y);if(($=$-G-1)>L)we.c=we.e=null;else if($<U)we.c=[we.e=0];else{if(we.e=$,we.c=[],G=($+1)%c,$<0&&(G+=c),G<H){for(G&&we.c.push(+he.slice(0,G)),H-=c;G<H;)we.c.push(+he.slice(G,G+=c));G=c-(he=he.slice(G)).length}else G-=H;for(;G--;he+="0");we.c.push(+he)}}else we.c=[we.e=0]}ce.clone=_,ce.ROUND_UP=0,ce.ROUND_DOWN=1,ce.ROUND_CEIL=2,ce.ROUND_FLOOR=3,ce.ROUND_HALF_UP=4,ce.ROUND_HALF_DOWN=5,ce.ROUND_HALF_EVEN=6,ce.ROUND_HALF_CEIL=7,ce.ROUND_HALF_FLOOR=8,ce.EUCLID=9,ce.config=ce.set=function(Y){var se,F;if(Y!=null)if(typeof Y=="object"){if(Y.hasOwnProperty(se="DECIMAL_PLACES")&&(F=Y[se],y(F,0,p,se),O=F),Y.hasOwnProperty(se="ROUNDING_MODE")&&(F=Y[se],y(F,0,8,se),k=F),Y.hasOwnProperty(se="EXPONENTIAL_AT")&&(F=Y[se],F&&F.pop?(y(F[0],-p,0,se),y(F[1],0,p,se),N=F[0],K=F[1]):(y(F,-p,p,se),N=-(K=F<0?-F:F))),Y.hasOwnProperty(se="RANGE"))if(F=Y[se],F&&F.pop)y(F[0],-p,-1,se),y(F[1],1,p,se),U=F[0],L=F[1];else if(y(F,-p,p,se),F)U=-(L=F<0?-F:F);else throw Error(l+se+" cannot be zero: "+F);if(Y.hasOwnProperty(se="CRYPTO"))if(F=Y[se],F===!!F)if(F)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=F;else throw re=!F,Error(l+"crypto unavailable");else re=F;else throw Error(l+se+" not true or false: "+F);if(Y.hasOwnProperty(se="MODULO_MODE")&&(F=Y[se],y(F,0,9,se),Z=F),Y.hasOwnProperty(se="POW_PRECISION")&&(F=Y[se],y(F,0,p,se),V=F),Y.hasOwnProperty(se="FORMAT"))if(F=Y[se],typeof F=="object")ee=F;else throw Error(l+se+" not an object: "+F);if(Y.hasOwnProperty(se="ALPHABET"))if(F=Y[se],typeof F=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(F))_e=F.slice(0,10)=="0123456789",fe=F;else throw Error(l+se+" invalid: "+F)}else throw Error(l+"Object expected: "+Y);return{DECIMAL_PLACES:O,ROUNDING_MODE:k,EXPONENTIAL_AT:[N,K],RANGE:[U,L],CRYPTO:re,MODULO_MODE:Z,POW_PRECISION:V,FORMAT:ee,ALPHABET:fe}},ce.isBigNumber=function(Y){if(!Y||Y._isBigNumber!==!0)return!1;if(!ce.DEBUG)return!0;var se,F,j=Y.c,B=Y.e,$=Y.s;e:if({}.toString.call(j)=="[object Array]"){if(($===1||$===-1)&&B>=-p&&B<=p&&B===u(B)){if(j[0]===0){if(B===0&&j.length===1)return!0;break e}if(se=(B+1)%c,se<1&&(se+=c),String(j[0]).length==se){for(se=0;se<j.length;se++)if(F=j[se],F<0||F>=a||F!==u(F))break e;if(F!==0)return!0}}}else if(j===null&&B===null&&($===null||$===1||$===-1))return!0;throw Error(l+"Invalid BigNumber: "+Y)},ce.maximum=ce.max=function(){return Ie(arguments,I.lt)},ce.minimum=ce.min=function(){return Ie(arguments,I.gt)},ce.random=function(){var Y=9007199254740992,se=Math.random()*Y&2097151?function(){return u(Math.random()*Y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(F){var j,B,$,G,X,H=0,he=[],we=new ce(P);if(F==null?F=O:y(F,0,p),G=s(F/c),re)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(G*=2));H<G;)X=j[H]*131072+(j[H+1]>>>11),X>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),j[H]=B[0],j[H+1]=B[1]):(he.push(X%1e14),H+=2);H=G/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(G*=7);H<G;)X=(j[H]&31)*281474976710656+j[H+1]*1099511627776+j[H+2]*4294967296+j[H+3]*16777216+(j[H+4]<<16)+(j[H+5]<<8)+j[H+6],X>=9e15?crypto.randomBytes(7).copy(j,H):(he.push(X%1e14),H+=7);H=G/7}else throw re=!1,Error(l+"crypto unavailable");if(!re)for(;H<G;)X=se(),X<9e15&&(he[H++]=X%1e14);for(G=he[--H],F%=c,G&&F&&(X=h[c-F],he[H]=u(G/X)*X);he[H]===0;he.pop(),H--);if(H<0)he=[$=0];else{for($=-1;he[0]===0;he.splice(0,1),$-=c);for(H=1,X=he[0];X>=10;X/=10,H++);H<c&&($-=c-H)}return we.e=$,we.c=he,we}}(),ce.sum=function(){for(var Y=1,se=arguments,F=new ce(se[0]);Y<se.length;)F=F.plus(se[Y++]);return F},A=function(){var Y="0123456789";function se(F,j,B,$){for(var G,X=[0],H,he=0,we=F.length;he<we;){for(H=X.length;H--;X[H]*=j);for(X[0]+=$.indexOf(F.charAt(he++)),G=0;G<X.length;G++)X[G]>B-1&&(X[G+1]==null&&(X[G+1]=0),X[G+1]+=X[G]/B|0,X[G]%=B)}return X.reverse()}return function(F,j,B,$,G){var X,H,he,we,Te,De,Me,Be,Le=F.indexOf("."),W=O,q=k;for(Le>=0&&(we=V,V=0,F=F.replace(".",""),Be=new ce(j),De=Be.pow(F.length-Le),V=we,Be.c=se(R(v(De.c),De.e,"0"),10,B,Y),Be.e=Be.c.length),Me=se(F,j,B,G?(X=fe,Y):(X=Y,fe)),he=we=Me.length;Me[--we]==0;Me.pop());if(!Me[0])return X.charAt(0);if(Le<0?--he:(De.c=Me,De.e=he,De.s=$,De=E(De,Be,W,q,B),Me=De.c,Te=De.r,he=De.e),H=he+W+1,Le=Me[H],we=B/2,Te=Te||H<0||Me[H+1]!=null,Te=q<4?(Le!=null||Te)&&(q==0||q==(De.s<0?3:2)):Le>we||Le==we&&(q==4||Te||q==6&&Me[H-1]&1||q==(De.s<0?8:7)),H<1||!Me[0])F=Te?R(X.charAt(1),-W,X.charAt(0)):X.charAt(0);else{if(Me.length=H,Te)for(--B;++Me[--H]>B;)Me[H]=0,H||(++he,Me=[1].concat(Me));for(we=Me.length;!Me[--we];);for(Le=0,F="";Le<=we;F+=X.charAt(Me[Le++]));F=R(F,he,X.charAt(0))}return F}}(),E=function(){function Y(j,B,$){var G,X,H,he,we=0,Te=j.length,De=B%g,Me=B/g|0;for(j=j.slice();Te--;)H=j[Te]%g,he=j[Te]/g|0,G=Me*H+he*De,X=De*H+G%g*g+we,we=(X/$|0)+(G/g|0)+Me*he,j[Te]=X%$;return we&&(j=[we].concat(j)),j}function se(j,B,$,G){var X,H;if($!=G)H=$>G?1:-1;else for(X=H=0;X<$;X++)if(j[X]!=B[X]){H=j[X]>B[X]?1:-1;break}return H}function F(j,B,$,G){for(var X=0;$--;)j[$]-=X,X=j[$]<B[$]?1:0,j[$]=X*G+j[$]-B[$];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,B,$,G,X){var H,he,we,Te,De,Me,Be,Le,W,q,M,ie,ve,D,z,de,be,le=j.s==B.s?1:-1,ye=j.c,J=B.c;if(!ye||!ye[0]||!J||!J[0])return new ce(!j.s||!B.s||(ye?J&&ye[0]==J[0]:!J)?NaN:ye&&ye[0]==0||!J?le*0:le/0);for(Le=new ce(le),W=Le.c=[],he=j.e-B.e,le=$+he+1,X||(X=a,he=m(j.e/c)-m(B.e/c),le=le/c|0),we=0;J[we]==(ye[we]||0);we++);if(J[we]>(ye[we]||0)&&he--,le<0)W.push(1),Te=!0;else{for(D=ye.length,de=J.length,we=0,le+=2,De=u(X/(J[0]+1)),De>1&&(J=Y(J,De,X),ye=Y(ye,De,X),de=J.length,D=ye.length),ve=de,q=ye.slice(0,de),M=q.length;M<de;q[M++]=0);be=J.slice(),be=[0].concat(be),z=J[0],J[1]>=X/2&&z++;do{if(De=0,H=se(J,q,de,M),H<0){if(ie=q[0],de!=M&&(ie=ie*X+(q[1]||0)),De=u(ie/z),De>1)for(De>=X&&(De=X-1),Me=Y(J,De,X),Be=Me.length,M=q.length;se(Me,q,Be,M)==1;)De--,F(Me,de<Be?be:J,Be,X),Be=Me.length,H=1;else De==0&&(H=De=1),Me=J.slice(),Be=Me.length;if(Be<M&&(Me=[0].concat(Me)),F(q,Me,M,X),M=q.length,H==-1)for(;se(J,q,de,M)<1;)De++,F(q,de<M?be:J,M,X),M=q.length}else H===0&&(De++,q=[0]);W[we++]=De,q[0]?q[M++]=ye[ve]||0:(q=[ye[ve]],M=1)}while((ve++<D||q[0]!=null)&&le--);Te=q[0]!=null,W[0]||W.splice(0,1)}if(X==a){for(we=1,le=W[0];le>=10;le/=10,we++);pe(Le,$+(Le.e=we+he*c-1)+1,G,Te)}else Le.e=he,Le.r=+Te;return Le}}();function Ee(Y,se,F,j){var B,$,G,X,H;if(F==null?F=k:y(F,0,8),!Y.c)return Y.toString();if(B=Y.c[0],G=Y.e,se==null)H=v(Y.c),H=j==1||j==2&&(G<=N||G>=K)?T(H,G):R(H,G,"0");else if(Y=pe(new ce(Y),se,F),$=Y.e,H=v(Y.c),X=H.length,j==1||j==2&&(se<=$||$<=N)){for(;X<se;H+="0",X++);H=T(H,$)}else if(se-=G,H=R(H,$,"0"),$+1>X){if(--se>0)for(H+=".";se--;H+="0");}else if(se+=$-X,se>0)for($+1==X&&(H+=".");se--;H+="0");return Y.s<0&&B?"-"+H:H}function Ie(Y,se){for(var F,j=1,B=new ce(Y[0]);j<Y.length;j++)if(F=new ce(Y[j]),F.s)se.call(B,F)&&(B=F);else{B=F;break}return B}function ue(Y,se,F){for(var j=1,B=se.length;!se[--B];se.pop());for(B=se[0];B>=10;B/=10,j++);return(F=j+F*c-1)>L?Y.c=Y.e=null:F<U?Y.c=[Y.e=0]:(Y.e=F,Y.c=se),Y}C=function(){var Y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,se=/^([^.]+)\.$/,F=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,G,X,H){var he,we=X?G:G.replace(B,"");if(j.test(we))$.s=isNaN(we)?null:we<0?-1:1;else{if(!X&&(we=we.replace(Y,function(Te,De,Me){return he=(Me=Me.toLowerCase())=="x"?16:Me=="b"?2:8,!H||H==he?De:Te}),H&&(he=H,we=we.replace(se,"$1").replace(F,"0.$1")),G!=we))return new ce(we,he);if(ce.DEBUG)throw Error(l+"Not a"+(H?" base "+H:"")+" number: "+G);$.s=null}$.c=$.e=null}}();function pe(Y,se,F,j){var B,$,G,X,H,he,we,Te=Y.c,De=h;if(Te){e:{for(B=1,X=Te[0];X>=10;X/=10,B++);if($=se-B,$<0)$+=c,G=se,H=Te[he=0],we=H/De[B-G-1]%10|0;else if(he=s(($+1)/c),he>=Te.length)if(j){for(;Te.length<=he;Te.push(0));H=we=0,B=1,$%=c,G=$-c+1}else break e;else{for(H=X=Te[he],B=1;X>=10;X/=10,B++);$%=c,G=$-c+B,we=G<0?0:H/De[B-G-1]%10|0}if(j=j||se<0||Te[he+1]!=null||(G<0?H:H%De[B-G-1]),j=F<4?(we||j)&&(F==0||F==(Y.s<0?3:2)):we>5||we==5&&(F==4||j||F==6&&($>0?G>0?H/De[B-G]:0:Te[he-1])%10&1||F==(Y.s<0?8:7)),se<1||!Te[0])return Te.length=0,j?(se-=Y.e+1,Te[0]=De[(c-se%c)%c],Y.e=-se||0):Te[0]=Y.e=0,Y;if($==0?(Te.length=he,X=1,he--):(Te.length=he+1,X=De[c-$],Te[he]=G>0?u(H/De[B-G]%De[G])*X:0),j)for(;;)if(he==0){for($=1,G=Te[0];G>=10;G/=10,$++);for(G=Te[0]+=X,X=1;G>=10;G/=10,X++);$!=X&&(Y.e++,Te[0]==a&&(Te[0]=1));break}else{if(Te[he]+=X,Te[he]!=a)break;Te[he--]=0,X=1}for($=Te.length;Te[--$]===0;Te.pop());}Y.e>L?Y.c=Y.e=null:Y.e<U&&(Y.c=[Y.e=0])}return Y}function Ae(Y){var se,F=Y.e;return F===null?Y.toString():(se=v(Y.c),se=F<=N||F>=K?T(se,F):R(se,F,"0"),Y.s<0?"-"+se:se)}return I.absoluteValue=I.abs=function(){var Y=new ce(this);return Y.s<0&&(Y.s=1),Y},I.comparedTo=function(Y,se){return w(this,new ce(Y,se))},I.decimalPlaces=I.dp=function(Y,se){var F,j,B,$=this;if(Y!=null)return y(Y,0,p),se==null?se=k:y(se,0,8),pe(new ce($),Y+$.e+1,se);if(!(F=$.c))return null;if(j=((B=F.length-1)-m(this.e/c))*c,B=F[B])for(;B%10==0;B/=10,j--);return j<0&&(j=0),j},I.dividedBy=I.div=function(Y,se){return E(this,new ce(Y,se),O,k)},I.dividedToIntegerBy=I.idiv=function(Y,se){return E(this,new ce(Y,se),0,1)},I.exponentiatedBy=I.pow=function(Y,se){var F,j,B,$,G,X,H,he,we,Te=this;if(Y=new ce(Y),Y.c&&!Y.isInteger())throw Error(l+"Exponent not an integer: "+Ae(Y));if(se!=null&&(se=new ce(se)),X=Y.e>14,!Te.c||!Te.c[0]||Te.c[0]==1&&!Te.e&&Te.c.length==1||!Y.c||!Y.c[0])return we=new ce(Math.pow(+Ae(Te),X?2-b(Y):+Ae(Y))),se?we.mod(se):we;if(H=Y.s<0,se){if(se.c?!se.c[0]:!se.s)return new ce(NaN);j=!H&&Te.isInteger()&&se.isInteger(),j&&(Te=Te.mod(se))}else{if(Y.e>9&&(Te.e>0||Te.e<-1||(Te.e==0?Te.c[0]>1||X&&Te.c[1]>=24e7:Te.c[0]<8e13||X&&Te.c[0]<=9999975e7)))return $=Te.s<0&&b(Y)?-0:0,Te.e>-1&&($=1/$),new ce(H?1/$:$);V&&($=s(V/c+2))}for(X?(F=new ce(.5),H&&(Y.s=1),he=b(Y)):(B=Math.abs(+Ae(Y)),he=B%2),we=new ce(P);;){if(he){if(we=we.times(Te),!we.c)break;$?we.c.length>$&&(we.c.length=$):j&&(we=we.mod(se))}if(B){if(B=u(B/2),B===0)break;he=B%2}else if(Y=Y.times(F),pe(Y,Y.e+1,1),Y.e>14)he=b(Y);else{if(B=+Ae(Y),B===0)break;he=B%2}Te=Te.times(Te),$?Te.c&&Te.c.length>$&&(Te.c.length=$):j&&(Te=Te.mod(se))}return j?we:(H&&(we=P.div(we)),se?we.mod(se):$?pe(we,V,k,G):we)},I.integerValue=function(Y){var se=new ce(this);return Y==null?Y=k:y(Y,0,8),pe(se,se.e+1,Y)},I.isEqualTo=I.eq=function(Y,se){return w(this,new ce(Y,se))===0},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(Y,se){return w(this,new ce(Y,se))>0},I.isGreaterThanOrEqualTo=I.gte=function(Y,se){return(se=w(this,new ce(Y,se)))===1||se===0},I.isInteger=function(){return!!this.c&&m(this.e/c)>this.c.length-2},I.isLessThan=I.lt=function(Y,se){return w(this,new ce(Y,se))<0},I.isLessThanOrEqualTo=I.lte=function(Y,se){return(se=w(this,new ce(Y,se)))===-1||se===0},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&this.c[0]==0},I.minus=function(Y,se){var F,j,B,$,G=this,X=G.s;if(Y=new ce(Y,se),se=Y.s,!X||!se)return new ce(NaN);if(X!=se)return Y.s=-se,G.plus(Y);var H=G.e/c,he=Y.e/c,we=G.c,Te=Y.c;if(!H||!he){if(!we||!Te)return we?(Y.s=-se,Y):new ce(Te?G:NaN);if(!we[0]||!Te[0])return Te[0]?(Y.s=-se,Y):new ce(we[0]?G:k==3?-0:0)}if(H=m(H),he=m(he),we=we.slice(),X=H-he){for(($=X<0)?(X=-X,B=we):(he=H,B=Te),B.reverse(),se=X;se--;B.push(0));B.reverse()}else for(j=($=(X=we.length)<(se=Te.length))?X:se,X=se=0;se<j;se++)if(we[se]!=Te[se]){$=we[se]<Te[se];break}if($&&(B=we,we=Te,Te=B,Y.s=-Y.s),se=(j=Te.length)-(F=we.length),se>0)for(;se--;we[F++]=0);for(se=a-1;j>X;){if(we[--j]<Te[j]){for(F=j;F&&!we[--F];we[F]=se);--we[F],we[j]+=a}we[j]-=Te[j]}for(;we[0]==0;we.splice(0,1),--he);return we[0]?ue(Y,we,he):(Y.s=k==3?-1:1,Y.c=[Y.e=0],Y)},I.modulo=I.mod=function(Y,se){var F,j,B=this;return Y=new ce(Y,se),!B.c||!Y.s||Y.c&&!Y.c[0]?new ce(NaN):!Y.c||B.c&&!B.c[0]?new ce(B):(Z==9?(j=Y.s,Y.s=1,F=E(B,Y,0,3),Y.s=j,F.s*=j):F=E(B,Y,0,Z),Y=B.minus(F.times(Y)),!Y.c[0]&&Z==1&&(Y.s=B.s),Y)},I.multipliedBy=I.times=function(Y,se){var F,j,B,$,G,X,H,he,we,Te,De,Me,Be,Le,W,q=this,M=q.c,ie=(Y=new ce(Y,se)).c;if(!M||!ie||!M[0]||!ie[0])return!q.s||!Y.s||M&&!M[0]&&!ie||ie&&!ie[0]&&!M?Y.c=Y.e=Y.s=null:(Y.s*=q.s,!M||!ie?Y.c=Y.e=null:(Y.c=[0],Y.e=0)),Y;for(j=m(q.e/c)+m(Y.e/c),Y.s*=q.s,H=M.length,Te=ie.length,H<Te&&(Be=M,M=ie,ie=Be,B=H,H=Te,Te=B),B=H+Te,Be=[];B--;Be.push(0));for(Le=a,W=g,B=Te;--B>=0;){for(F=0,De=ie[B]%W,Me=ie[B]/W|0,G=H,$=B+G;$>B;)he=M[--G]%W,we=M[G]/W|0,X=Me*he+we*De,he=De*he+X%W*W+Be[$]+F,F=(he/Le|0)+(X/W|0)+Me*we,Be[$--]=he%Le;Be[$]=F}return F?++j:Be.splice(0,1),ue(Y,Be,j)},I.negated=function(){var Y=new ce(this);return Y.s=-Y.s||null,Y},I.plus=function(Y,se){var F,j=this,B=j.s;if(Y=new ce(Y,se),se=Y.s,!B||!se)return new ce(NaN);if(B!=se)return Y.s=-se,j.minus(Y);var $=j.e/c,G=Y.e/c,X=j.c,H=Y.c;if(!$||!G){if(!X||!H)return new ce(B/0);if(!X[0]||!H[0])return H[0]?Y:new ce(X[0]?j:B*0)}if($=m($),G=m(G),X=X.slice(),B=$-G){for(B>0?(G=$,F=H):(B=-B,F=X),F.reverse();B--;F.push(0));F.reverse()}for(B=X.length,se=H.length,B-se<0&&(F=H,H=X,X=F,se=B),B=0;se;)B=(X[--se]=X[se]+H[se]+B)/a|0,X[se]=a===X[se]?0:X[se]%a;return B&&(X=[B].concat(X),++G),ue(Y,X,G)},I.precision=I.sd=function(Y,se){var F,j,B,$=this;if(Y!=null&&Y!==!!Y)return y(Y,1,p),se==null?se=k:y(se,0,8),pe(new ce($),Y,se);if(!(F=$.c))return null;if(B=F.length-1,j=B*c+1,B=F[B]){for(;B%10==0;B/=10,j--);for(B=F[0];B>=10;B/=10,j++);}return Y&&$.e+1>j&&(j=$.e+1),j},I.shiftedBy=function(Y){return y(Y,-d,d),this.times("1e"+Y)},I.squareRoot=I.sqrt=function(){var Y,se,F,j,B,$=this,G=$.c,X=$.s,H=$.e,he=O+4,we=new ce("0.5");if(X!==1||!G||!G[0])return new ce(!X||X<0&&(!G||G[0])?NaN:G?$:1/0);if(X=Math.sqrt(+Ae($)),X==0||X==1/0?(se=v(G),(se.length+H)%2==0&&(se+="0"),X=Math.sqrt(+se),H=m((H+1)/2)-(H<0||H%2),X==1/0?se="5e"+H:(se=X.toExponential(),se=se.slice(0,se.indexOf("e")+1)+H),F=new ce(se)):F=new ce(X+""),F.c[0]){for(H=F.e,X=H+he,X<3&&(X=0);;)if(B=F,F=we.times(B.plus(E($,B,he,1))),v(B.c).slice(0,X)===(se=v(F.c)).slice(0,X))if(F.e<H&&--X,se=se.slice(X-3,X+1),se=="9999"||!j&&se=="4999"){if(!j&&(pe(B,B.e+O+2,0),B.times(B).eq($))){F=B;break}he+=4,X+=4,j=1}else{(!+se||!+se.slice(1)&&se.charAt(0)=="5")&&(pe(F,F.e+O+2,1),Y=!F.times(F).eq($));break}}return pe(F,F.e+O+1,k,Y)},I.toExponential=function(Y,se){return Y!=null&&(y(Y,0,p),Y++),Ee(this,Y,se,1)},I.toFixed=function(Y,se){return Y!=null&&(y(Y,0,p),Y=Y+this.e+1),Ee(this,Y,se)},I.toFormat=function(Y,se,F){var j,B=this;if(F==null)Y!=null&&se&&typeof se=="object"?(F=se,se=null):Y&&typeof Y=="object"?(F=Y,Y=se=null):F=ee;else if(typeof F!="object")throw Error(l+"Argument not an object: "+F);if(j=B.toFixed(Y,se),B.c){var $,G=j.split("."),X=+F.groupSize,H=+F.secondaryGroupSize,he=F.groupSeparator||"",we=G[0],Te=G[1],De=B.s<0,Me=De?we.slice(1):we,Be=Me.length;if(H&&($=X,X=H,H=$,Be-=$),X>0&&Be>0){for($=Be%X||X,we=Me.substr(0,$);$<Be;$+=X)we+=he+Me.substr($,X);H>0&&(we+=he+Me.slice($)),De&&(we="-"+we)}j=Te?we+(F.decimalSeparator||"")+((H=+F.fractionGroupSize)?Te.replace(new RegExp("\\d{"+H+"}\\B","g"),"$&"+(F.fractionGroupSeparator||"")):Te):we}return(F.prefix||"")+j+(F.suffix||"")},I.toFraction=function(Y){var se,F,j,B,$,G,X,H,he,we,Te,De,Me=this,Be=Me.c;if(Y!=null&&(X=new ce(Y),!X.isInteger()&&(X.c||X.s!==1)||X.lt(P)))throw Error(l+"Argument "+(X.isInteger()?"out of range: ":"not an integer: ")+Ae(X));if(!Be)return new ce(Me);for(se=new ce(P),he=F=new ce(P),j=H=new ce(P),De=v(Be),$=se.e=De.length-Me.e-1,se.c[0]=h[(G=$%c)<0?c+G:G],Y=!Y||X.comparedTo(se)>0?$>0?se:he:X,G=L,L=1/0,X=new ce(De),H.c[0]=0;we=E(X,se,0,1),B=F.plus(we.times(j)),B.comparedTo(Y)!=1;)F=j,j=B,he=H.plus(we.times(B=he)),H=B,se=X.minus(we.times(B=se)),X=B;return B=E(Y.minus(F),j,0,1),H=H.plus(B.times(he)),F=F.plus(B.times(j)),H.s=he.s=Me.s,$=$*2,Te=E(he,j,$,k).minus(Me).abs().comparedTo(E(H,F,$,k).minus(Me).abs())<1?[he,j]:[H,F],L=G,Te},I.toNumber=function(){return+Ae(this)},I.toPrecision=function(Y,se){return Y!=null&&y(Y,1,p),Ee(this,Y,se,2)},I.toString=function(Y){var se,F=this,j=F.s,B=F.e;return B===null?j?(se="Infinity",j<0&&(se="-"+se)):se="NaN":(Y==null?se=B<=N||B>=K?T(v(F.c),B):R(v(F.c),B,"0"):Y===10&&_e?(F=pe(new ce(F),O+B+1,k),se=R(v(F.c),F.e,"0")):(y(Y,2,fe.length,"Base"),se=A(R(v(F.c),B,"0"),10,Y,j,!0)),j<0&&F.c[0]&&(se="-"+se)),se},I.valueOf=I.toJSON=function(){return Ae(this)},I._isBigNumber=!0,S!=null&&ce.set(S),ce}function m(S){var E=S|0;return S>0||S===E?E:E-1}function v(S){for(var E,A,C=1,I=S.length,P=S[0]+"";C<I;){for(E=S[C++]+"",A=c-E.length;A--;E="0"+E);P+=E}for(I=P.length;P.charCodeAt(--I)===48;);return P.slice(0,I+1||1)}function w(S,E){var A,C,I=S.c,P=E.c,O=S.s,k=E.s,N=S.e,K=E.e;if(!O||!k)return null;if(A=I&&!I[0],C=P&&!P[0],A||C)return A?C?0:-k:O;if(O!=k)return O;if(A=O<0,C=N==K,!I||!P)return C?0:!I^A?1:-1;if(!C)return N>K^A?1:-1;for(k=(N=I.length)<(K=P.length)?N:K,O=0;O<k;O++)if(I[O]!=P[O])return I[O]>P[O]^A?1:-1;return N==K?0:N>K^A?1:-1}function y(S,E,A,C){if(S<E||S>A||S!==u(S))throw Error(l+(C||"Argument")+(typeof S=="number"?S<E||S>A?" out of range: ":" not an integer: ":" not a primitive number: ")+String(S))}function b(S){var E=S.c.length-1;return m(S.e/c)==E&&S.c[E]%2!=0}function T(S,E){return(S.length>1?S.charAt(0)+"."+S.slice(1):S)+(E<0?"e":"e+")+E}function R(S,E,A){var C,I;if(E<0){for(I=A+".";++E;I+=A);S=I+S}else if(C=S.length,++E>C){for(I=A,E-=C;--E;I+=A);S+=I}else E<C&&(S=S.slice(0,E)+"."+S.slice(E));return S}t=_(),t.default=t.BigNumber=t,typeof define=="function"&&define.amd?define(function(){return t}):typeof o!="undefined"&&o.exports?o.exports=t:(r||(r=typeof self!="undefined"&&self?self:window),r.BigNumber=t)}(e)}}),require_moving_average=__commonJS({"node_modules/@vascosantos/moving-average/index.js"(e,o){init_node_globals();var r=Math.exp;o.exports=function(n){if(typeof n!="number")throw new Error("must provide a timespan to the moving average constructor");if(n<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let s,u=0,l=0,f=0,a,c={};function d(h,g){return 1-r(-(h-g)/n)}return c.push=function(g,p){if(a){const _=d(g,a),m=p-s,v=_*m;s=_*p+(1-_)*s,u=(1-_)*(u+m*v),l=Math.sqrt(u),f=s+_*m}else s=p;a=g},c.movingAverage=function(){return s},c.variance=function(){return u},c.deviation=function(){return l},c.forecast=function(){return f},c}}}),require_stats2=__commonJS({"node_modules/libp2p/src/metrics/stats.js"(e,o){init_node_globals();var{EventEmitter:r}=require_events(),{BigNumber:t}=require_bignumber(),n=require_moving_average(),s=require_retimer(),u=class extends r{constructor(l,f){super();this._options=f,this._queue=[],this._stats={dataReceived:t(0),dataSent:t(0)},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this);const a=this._options.movingAverageIntervals;for(let c=0;c<l.length;c++){const d=l[c];this._stats[d]=t(0),this._movingAverages[d]={};for(let h=0;h<a.length;h++){const g=a[h];(this._movingAverages[d][g]=n(g)).push(this._frequencyLastTime,0)}}}start(){this._queue.length&&this._resetComputeTimeout()}stop(){this._timeout&&(this._timeout.clear(),this._timeout=null)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}toJSON(){const l=this.snapshot,f=this.movingAverages,a={dataReceived:l.dataReceived.toString(),dataSent:l.dataSent.toString(),movingAverages:{}},c=Object.keys(f);for(const d of c){a.movingAverages[d]={};for(const h of Object.keys(f[d]))a.movingAverages[d][h]=f[d][h].movingAverage()}return a}push(l,f){this._queue.push([l,f,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this._timeout=s(this._update,this._nextTimeout())}_nextTimeout(){const l=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-l),0)}_update(){if(this._timeout=null,this._queue.length){let l;for(l of this._queue)this._applyOp(l);this._queue=[],this._updateFrequency(l[2]),this.emit("update",this._stats)}}_updateFrequency(l){const f=l-this._frequencyLastTime;Object.keys(this._stats).forEach(a=>{this._updateFrequencyFor(a,f,l)}),this._frequencyLastTime=l}_updateFrequencyFor(l,f,a){const c=this._frequencyAccumulators[l]||0;this._frequencyAccumulators[l]=0;const h=c/(f||1)*1e3;let g=this._movingAverages[l];g||(g=this._movingAverages[l]={});const p=this._options.movingAverageIntervals;for(let _=0;_<p.length;_++){const m=p[_];let v=g[m];v||(v=g[m]=n(m)),v.push(a,h)}}_applyOp(l){const f=l[0],a=l[1];if(typeof a!="number")throw new Error(`invalid increment number: ${a}`);let c;Object.prototype.hasOwnProperty.call(this._stats,f)?c=this._stats[f]:c=this._stats[f]=t(0),this._stats[f]=c.plus(a),this._frequencyAccumulators[f]||(this._frequencyAccumulators[f]=0),this._frequencyAccumulators[f]+=a}};o.exports=u}}),require_metrics=__commonJS({"node_modules/libp2p/src/metrics/index.js"(e,o){init_node_globals();var r=require_merge_options(),{pipe:t}=require_it_pipe(),{tap:n}=require_dist2(),s=require_old_peers(),{METRICS:u}=require_constants11(),l=require_stats2(),f=["dataReceived","dataSent"],a={in:"dataReceived",out:"dataSent"},c=class{constructor(d){this._options=r(u,d),this._globalStats=new l(f,this._options),this._peerStats=new Map,this._protocolStats=new Map,this._oldPeers=s(this._options.maxOldPeersRetention),this._running=!1,this._onMessage=this._onMessage.bind(this),this._systems=new Map}start(){this._running=!0}stop(){this._running=!1,this._globalStats.stop();for(const d of this._peerStats.values())d.stop();for(const d of this._protocolStats.values())d.stop()}get global(){return this._globalStats}get peers(){return Array.from(this._peerStats.keys())}getComponentMetrics(){return this._systems}updateComponentMetric({system:d="libp2p",component:h,metric:g,value:p}){this._systems.has(d)||this._systems.set(d,new Map);const _=this._systems.get(d);_.has(h)||_.set(h,new Map),_.get(h).set(g,p)}forPeer(d){const h=d.toB58String();return this._peerStats.get(h)||this._oldPeers.get(h)}get protocols(){return Array.from(this._protocolStats.keys())}forProtocol(d){return this._protocolStats.get(d)}onPeerDisconnected(d){const h=d.toB58String(),g=this._peerStats.get(h);g&&(g.stop(),this._peerStats.delete(h),this._oldPeers.set(h,g))}_onMessage({remotePeer:d,protocol:h,direction:g,dataLength:p}){if(!this._running)return;const _=a[g];let m=this.forPeer(d);if(m||(m=new l(f,this._options),this._peerStats.set(d.toB58String(),m)),m.push(_,p),this._globalStats.push(_,p),h){let v=this.forProtocol(h);v||(v=new l(f,this._options),this._protocolStats.set(h,v)),v.push(_,p)}}updatePlaceholder(d,h){if(!this._running)return;const g=this.forPeer(d),p=h.toB58String(),_=this.forPeer(h);let m=g;_&&(m=c.mergeStats(_,m),this._oldPeers.delete(p)),this._peerStats.delete(d.toB58String()),this._peerStats.set(p,m),m.start()}trackStream({stream:d,remotePeer:h,protocol:g}){const p=this,_=d.source;d.source=n(v=>p._onMessage({remotePeer:h,protocol:g,direction:"in",dataLength:v.length}))(_);const m=d.sink;return d.sink=v=>t(v,n(w=>p._onMessage({remotePeer:h,protocol:g,direction:"out",dataLength:w.length})),m),d}static mergeStats(d,h){return d.stop(),h.stop(),d._queue=[...d._queue,...h._queue],d}};o.exports=c}}),require_multistream=__commonJS({"node_modules/multistream-select/src/multistream.js"(e,o){init_node_globals();var r=require_BufferList(),t=require_src11(),{pipe:n}=require_it_pipe(),s=require_err_code(),{fromString:u}=(init_from_string(),__toCommonJS(from_string_exports)),l=require_it_first(),{source:f}=require_abortable_iterator(),a=u(`
`);function c(p){return t.encode.single(new r([p,a]))}function d(p,_){p.push(c(_))}async function h(p,_){p.push(_.reduce((m,v)=>m.append(c(v)),new r))}async function g(p,_){let m=1;const v={[Symbol.asyncIterator](){return this},next:()=>p.next(m)};let w=v;_&&_.signal&&(w=f(v,_.signal));const y=T=>{m=T},b=await n(w,t.decode({onLength:y}),l);if(b.get(b.length-1)!==a[0])throw s(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return b.shallowSlice(0,-1)}o.exports={encode:c,write:d,writeAll:h,read:g}}}),require_select=__commonJS({"node_modules/multistream-select/src/select.js"(e,o){init_node_globals();var r=require_browser2(),t=require_err_code(),n=require_multistream(),s=require_src18(),u=Object.assign(r("mss:select"),{error:r("mss:select:error")});o.exports=async function(f,a,c,d){a=Array.isArray(a)?[...a]:[a];const{reader:h,writer:g,rest:p,stream:_}=s(f),m=a.shift();if(!m)throw new Error("At least one protocol must be specified");c?(u('select: write ["%s", "%s"]',c,m),n.writeAll(g,[c,m])):(u('select: write "%s"',m),n.write(g,m));let v=(await n.read(h,d)).toString();if(u('select: read "%s"',v),v===c&&(v=(await n.read(h,d)).toString(),u('select: read "%s"',v)),v===m)return p(),{stream:_,protocol:m};for(const w of a){u('select: write "%s"',w),n.write(g,w);const y=(await n.read(h,d)).toString();if(u('select: read "%s" for "%s"',y,w),y===w)return p(),{stream:_,protocol:w}}throw p(),t(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}}}),require_constants13=__commonJS({"node_modules/multistream-select/src/constants.js"(e){init_node_globals(),e.PROTOCOL_ID="/multistream/1.0.0"}}),require_handle=__commonJS({"node_modules/multistream-select/src/handle.js"(e,o){init_node_globals();var r=require_browser2(),t=require_BufferList(),n=require_multistream(),s=require_src18(),{PROTOCOL_ID:u}=require_constants13(),l=Object.assign(r("mss:handle"),{error:r("mss:handle:error")});o.exports=async function(a,c,d){c=Array.isArray(c)?c:[c];const{writer:h,reader:g,rest:p,stream:_}=s(a);for(;;){const m=(await n.read(g,d)).toString();if(l('read "%s"',m),m===u){l('respond with "%s" for "%s"',u,m),n.write(h,u);continue}if(c.includes(m))return n.write(h,m),l('respond with "%s" for "%s"',m,m),p(),{stream:_,protocol:m};if(m==="ls"){n.write(h,new t(c.map(v=>n.encode(v)))),l('respond with "%s" for %s',c,m);continue}n.write(h,"na"),l('respond with "na" for "%s"',m)}}}}),require_ls4=__commonJS({"node_modules/multistream-select/src/ls.js"(e,o){init_node_globals();var r=require_it_reader(),t=require_browser2(),n=require_multistream(),s=require_src18(),u=require_src11(),{pipe:l}=require_it_pipe(),f=Object.assign(t("mss:ls"),{error:t("mss:ls:error")});o.exports=async function(c,d){const{reader:h,writer:g,rest:p,stream:_}=s(c);f('write "ls"'),n.write(g,"ls"),p();const m=await n.read(h,d),v=r([m]),w=[];return await l(v,u.decode(),async b=>{for await(const T of b)w.push(T.shallowSlice(0,-1).toString())}),{stream:_,protocols:w}}}}),require_src25=__commonJS({"node_modules/multistream-select/src/index.js"(e){init_node_globals();var o=require_select(),r=require_handle(),t=require_ls4(),{PROTOCOL_ID:n}=require_constants13();e.PROTOCOL_ID=n;var s=class{constructor(f){this._stream=f,this._shaken=!1}async _handshake(f){if(this._shaken)return;const{stream:a}=await o(this._stream,n,void 0,f);this._stream=a,this._shaken=!0}},u=class extends s{select(f,a){return o(this._stream,f,this._shaken?void 0:n,a)}async ls(f){await this._handshake(f);const a=await t(this._stream,f),{stream:c,protocols:d}=a;return this._stream=c,d}};e.Dialer=u;var l=class extends s{handle(f,a){return r(this._stream,f,a)}};e.Listener=l}}),require_status=__commonJS({"node_modules/libp2p-interfaces/src/connection/status.js"(e,o){init_node_globals();var r={OPEN:"open",CLOSING:"closing",CLOSED:"closed"};o.exports=r}}),require_connection=__commonJS({"node_modules/libp2p-interfaces/src/connection/connection.js"(e,o){init_node_globals();var r=require_src5(),{Multiaddr:t}=require_src(),n=require_err_code(),{OPEN:s,CLOSING:u,CLOSED:l}=require_status(),f=Symbol.for("@libp2p/interface-connection/connection"),a=class{constructor({localAddr:d,remoteAddr:h,localPeer:g,remotePeer:p,newStream:_,close:m,getStreams:v,stat:w}){c(d,g,p,_,m,v,w),this.id=parseInt(String(Math.random()*1e9)).toString(36)+Date.now(),this.localAddr=d,this.remoteAddr=h,this.localPeer=g,this.remotePeer=p,this._stat=$e(Re({},w),{status:s}),this._newStream=_,this._close=m,this._getStreams=v,this.registry=new Map,this.tags=[]}get[Symbol.toStringTag](){return"Connection"}get[f](){return!0}static isConnection(d){return Boolean(d&&d[f])}get stat(){return this._stat}get streams(){return this._getStreams()}async newStream(d){if(this.stat.status===u)throw n(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===l)throw n(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(d)||(d=[d]);const{stream:h,protocol:g}=await this._newStream(d);return this.addStream(h,{protocol:g}),{stream:h,protocol:g}}addStream(d,{protocol:h,metadata:g={}}){this.registry.set(d.id,Re({protocol:h},g))}removeStream(d){this.registry.delete(d)}async close(){if(this.stat.status!==l){if(this._closing)return this._closing;this.stat.status=u,this._closing=await this._close(),this._stat.timeline.close=Date.now(),this.stat.status=l}}};o.exports=a;function c(d,h,g,p,_,m,v){if(d&&!t.isMultiaddr(d))throw n(new Error("localAddr must be an instance of multiaddr"),"ERR_INVALID_PARAMETERS");if(!r.isPeerId(h))throw n(new Error("localPeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(!r.isPeerId(g))throw n(new Error("remotePeer must be an instance of peer-id"),"ERR_INVALID_PARAMETERS");if(typeof p!="function")throw n(new Error("new stream must be a function"),"ERR_INVALID_PARAMETERS");if(typeof _!="function")throw n(new Error("close must be a function"),"ERR_INVALID_PARAMETERS");if(typeof m!="function")throw n(new Error("getStreams must be a function"),"ERR_INVALID_PARAMETERS");if(!v)throw n(new Error("connection metadata object must be provided"),"ERR_INVALID_PARAMETERS");if(v.direction!=="inbound"&&v.direction!=="outbound")throw n(new Error('direction must be "inbound" or "outbound"'),"ERR_INVALID_PARAMETERS");if(!v.timeline)throw n(new Error("connection timeline object must be provided in the stat object"),"ERR_INVALID_PARAMETERS");if(!v.timeline.open)throw n(new Error("connection open timestamp must be provided"),"ERR_INVALID_PARAMETERS");if(!v.timeline.upgraded)throw n(new Error("connection upgraded timestamp must be provided"),"ERR_INVALID_PARAMETERS")}}}),require_connection2=__commonJS({"node_modules/libp2p-interfaces/src/connection/index.js"(e){init_node_globals(),e.Connection=require_connection()}}),require_build=__commonJS({"node_modules/mutable-proxy/build/index.js"(e,o){init_node_globals();function r(t){if(Array.isArray(t)){for(var n=0,s=Array(t.length);n<t.length;n++)s[n]=t[n];return s}else return Array.from(t)}o.exports=function(n){var s=void 0,u=void 0;function l(c){if(!(c instanceof Object))throw new Error('Target "'+c+'" is not an object');u=c}function f(c){Object.keys(c).forEach(function(d){var h=c[d];if(typeof h!="function")throw new Error('Trap "'+d+": "+h+'" is not a function');if(!Reflect[d])throw new Error('Trap "'+d+": "+h+'" is not a valid trap')}),s=c}l(function(){}),n&&l(n),f(Reflect);var a=new Proxy({},{get:function(d,h){return function(){for(var g=arguments.length,p=Array(g),_=0;_<g;_++)p[_]=arguments[_];return s[h].apply(null,[u].concat(r(p.slice(1))))}}});return{setTarget:l,setHandler:f,getTarget:function(){return u},getHandler:function(){return s},proxy:new Proxy(u,a)}}}}),require_upgrader=__commonJS({"node_modules/libp2p/src/upgrader.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:upgrader"),{error:r("libp2p:upgrader:err")}),n=require_err_code(),s=require_src25(),{Connection:u}=require_connection2(),l=require_src5(),{pipe:f}=require_it_pipe(),a=require_build(),{codes:c}=require_errors4(),d=class{constructor({localPeer:h,metrics:g,connectionGater:p,cryptos:_=new Map,muxers:m=new Map,onConnectionEnd:v=()=>{},onConnection:w=()=>{}}){this.connectionGater=p,this.localPeer=h,this.metrics=g,this.cryptos=_,this.muxers=m,this.protector=null,this.protocols=new Map,this.onConnection=w,this.onConnectionEnd=v}async upgradeInbound(h){let g,p,_,m,v,w,y;if(await this.connectionGater.denyInboundConnection(h))throw n(new Error("The multiaddr connection is blocked by gater.acceptConnection"),c.ERR_CONNECTION_INTERCEPTED);if(this.metrics){({setTarget:w,proxy:y}=a());const T=(Math.random()*1e9).toString(36)+Date.now();w({toB58String:()=>T}),h=this.metrics.trackStream({stream:h,remotePeer:y})}t("Starting the inbound connection upgrade");let b=h;this.protector&&(b=await this.protector.protect(h));try{if({conn:g,remotePeer:p,protocol:v}=await this._encryptInbound(this.localPeer,b,this.cryptos),await this.connectionGater.denyInboundEncryptedConnection(p,g))throw n(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),c.ERR_CONNECTION_INTERCEPTED);this.muxers.size?{stream:_,Muxer:m}=await this._multiplexInbound(g,this.muxers):_=g}catch(T){throw t.error("Failed to upgrade inbound connection",T),await h.close(T),T}if(await this.connectionGater.denyInboundUpgradedConnection(p,g))throw n(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),c.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(y,p),w(p)),t("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:v,direction:"inbound",maConn:h,upgradedConn:_,Muxer:m,remotePeer:p})}async upgradeOutbound(h){const g=h.remoteAddr.getPeerId();if(!g)throw n(new Error("outbound connection must have a peer id"),c.ERR_INVALID_MULTIADDR);const p=l.createFromB58String(g);if(await this.connectionGater.denyOutboundConnection(p,h))throw n(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),c.ERR_CONNECTION_INTERCEPTED);let _,m,v,w,y,b,T;if(this.metrics){({setTarget:b,proxy:T}=a());const S=(Math.random()*1e9).toString(36)+Date.now();b({toB58String:()=>S}),h=this.metrics.trackStream({stream:h,remotePeer:T})}t("Starting the outbound connection upgrade");let R=h;this.protector&&(R=await this.protector.protect(h));try{if({conn:_,remotePeer:m,protocol:w}=await this._encryptOutbound(this.localPeer,R,p,this.cryptos),await this.connectionGater.denyOutboundEncryptedConnection(m,_))throw n(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),c.ERR_CONNECTION_INTERCEPTED);this.muxers.size?{stream:v,Muxer:y}=await this._multiplexOutbound(_,this.muxers):v=_}catch(S){throw t.error("Failed to upgrade outbound connection",S),await h.close(S),S}if(await this.connectionGater.denyOutboundUpgradedConnection(m,_))throw n(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),c.ERR_CONNECTION_INTERCEPTED);return this.metrics&&(this.metrics.updatePlaceholder(T,m),b(m)),t("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:w,direction:"outbound",maConn:h,upgradedConn:v,Muxer:y,remotePeer:m})}_createConnection({cryptoProtocol:h,direction:g,maConn:p,upgradedConn:_,Muxer:m,remotePeer:v}){let w,y,b;m&&(w=new m({onStream:async S=>{if(!b)return;const E=new s.Listener(S);try{const{stream:A,protocol:C}=await E.handle(Array.from(this.protocols.keys()));t("%s: incoming stream opened on %s",g,C),this.metrics&&this.metrics.trackStream({stream:A,remotePeer:v,protocol:C}),b.addStream(S,{protocol:C}),this._onStream({connection:b,stream:Re(Re({},S),A),protocol:C})}catch(A){t.error(A)}},onStreamEnd:S=>{b.removeStream(S.id)}}),y=async S=>{t("%s: starting new stream on %s",g,S);const E=w.newStream(),A=new s.Dialer(E);try{const{stream:C,protocol:I}=await A.select(S);return this.metrics&&this.metrics.trackStream({stream:C,remotePeer:v,protocol:I}),{stream:Re(Re({},E),C),protocol:I}}catch(C){throw t.error("could not create new stream",C),n(C,c.ERR_UNSUPPORTED_PROTOCOL)}},f(_,w,_).catch(t.error));const T=p.timeline;p.timeline=new Proxy(T,{set:(...S)=>(b&&S[1]==="close"&&S[2]&&!T.close&&(async()=>{try{b.stat.status==="open"&&await b.close()}catch(E){t.error(E)}finally{this.onConnectionEnd(b)}})().catch(E=>{t.error(E)}),Reflect.set(...S))}),p.timeline.upgraded=Date.now();const R=()=>{throw n(new Error("connection is not multiplexed"),c.ERR_CONNECTION_NOT_MULTIPLEXED)};return b=new u({localAddr:p.localAddr,remoteAddr:p.remoteAddr,localPeer:this.localPeer,remotePeer:v,stat:{direction:g,timeline:p.timeline,multiplexer:m&&m.multicodec,encryption:h},newStream:y||R,getStreams:()=>w?w.streams:R(),close:async()=>{await p.close(),w&&w.streams.map(S=>S.abort())}}),this.onConnection(b),b}_onStream({connection:h,stream:g,protocol:p}){this.protocols.get(p)({connection:h,stream:g,protocol:p})}async _encryptInbound(h,g,p){const _=new s.Listener(g),m=Array.from(p.keys());t("handling inbound crypto protocol selection",m);try{const{stream:v,protocol:w}=await _.handle(m),y=p.get(w);if(t("encrypting inbound connection..."),!y)throw new Error(`no crypto module found for ${w}`);return $e(Re({},await y.secureInbound(h,v)),{protocol:w})}catch(v){throw n(v,c.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(h,g,p,_){const m=new s.Dialer(g),v=Array.from(_.keys());t("selecting outbound crypto protocol",v);try{const{stream:w,protocol:y}=await m.select(v),b=_.get(y);if(t("encrypting outbound connection to %j",p),!b)throw new Error(`no crypto module found for ${y}`);return $e(Re({},await b.secureOutbound(h,w,p)),{protocol:y})}catch(w){throw n(w,c.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(h,g){const p=new s.Dialer(h),_=Array.from(g.keys());t("outbound selecting muxer %s",_);try{const{stream:m,protocol:v}=await p.select(_);t("%s selected as muxer protocol",v);const w=g.get(v);return{stream:m,Muxer:w}}catch(m){throw n(m,c.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(h,g){const p=new s.Listener(h),_=Array.from(g.keys());t("inbound handling muxers %s",_);try{const{stream:m,protocol:v}=await p.handle(_),w=g.get(v);return{stream:m,Muxer:w}}catch(m){throw n(m,c.ERR_MUXER_UNAVAILABLE)}}};o.exports=d}}),require_it_foreach=__commonJS({"node_modules/it-foreach/index.js"(e,o){init_node_globals();var r=async function*(t,n){for await(const s of t)await n(s),yield s};o.exports=r}}),require_address_book=__commonJS({"node_modules/libp2p/src/peer-store/address-book.js"(e,o){init_node_globals();var r=require_browser2(),t=require_err_code(),{Multiaddr:n}=require_src(),s=require_src5(),{codes:u}=require_errors4(),l=require_peer_record2(),f=require_envelope2(),{pipe:a}=require_it_pipe(),c=require_it_all(),d=require_it_filter(),h=require_it_map(),g=require_it_foreach(),p=Object.assign(r("libp2p:peer-store:address-book"),{error:r("libp2p:peer-store:address-book:err")}),_="change:multiaddrs",m=class{constructor(w,y,b){this._emit=w,this._store=y,this._addressFilter=b}async consumePeerRecord(w){p("consumePeerRecord await write lock");const y=await this._store.lock.writeLock();p("consumePeerRecord got write lock");let b,T;try{let R;try{R=l.createFromProtobuf(w.payload)}catch{return p.error("invalid peer record received"),!1}b=R.peerId;const S=R.multiaddrs;if(!b.equals(w.peerId))return p("signing key does not match PeerId in the PeerRecord"),!1;if(!S||!S.length)return!1;if(await this._store.has(b)){const E=await this._store.load(b);if(E.peerRecordEnvelope){const A=await f.createFromProtobuf(E.peerRecordEnvelope);if(l.createFromProtobuf(A.payload).seqNumber>=R.seqNumber)return!1}}T=await this._store.patchOrCreate(b,{addresses:await v(b,S,this._addressFilter,!0),peerRecordEnvelope:w.marshal()}),p(`stored provided peer record for ${R.peerId.toB58String()}`)}finally{p("consumePeerRecord release write lock"),y()}return this._emit(_,{peerId:b,multiaddrs:T.addresses.map(({multiaddr:R})=>R)}),!0}async getRawEnvelope(w){p("getRawEnvelope await read lock");const y=await this._store.lock.readLock();p("getRawEnvelope got read lock");try{return(await this._store.load(w)).peerRecordEnvelope}catch(b){if(b.code!==u.ERR_NOT_FOUND)throw b}finally{p("getRawEnvelope release read lock"),y()}}async getPeerRecord(w){const y=await this.getRawEnvelope(w);if(!!y)return f.createFromProtobuf(y)}async get(w){if(!s.isPeerId(w))throw p.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),u.ERR_INVALID_PARAMETERS);p("get wait for read lock");const y=await this._store.lock.readLock();p("get got read lock");try{return(await this._store.load(w)).addresses}catch(b){if(b.code!==u.ERR_NOT_FOUND)throw b}finally{p("get release read lock"),y()}return[]}async set(w,y){if(!s.isPeerId(w))throw p.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),u.ERR_INVALID_PARAMETERS);if(!Array.isArray(y))throw p.error("multiaddrs must be an array of Multiaddrs"),t(new Error("multiaddrs must be an array of Multiaddrs"),u.ERR_INVALID_PARAMETERS);p("set await write lock");const b=await this._store.lock.writeLock();p("set got write lock");let T=!1,R;try{const S=await v(w,y,this._addressFilter);if(!S.length)return;try{const E=await this._store.load(w);if(T=!0,new Set([...S.map(({multiaddr:A})=>A.toString()),...E.addresses.map(({multiaddr:A})=>A.toString())]).size===E.addresses.length&&S.length===E.addresses.length)return}catch(E){if(E.code!==u.ERR_NOT_FOUND)throw E}R=await this._store.patchOrCreate(w,{addresses:S}),p(`set multiaddrs for ${w.toB58String()}`)}finally{p("set release write lock"),b()}this._emit(_,{peerId:w,multiaddrs:R.addresses.map(S=>S.multiaddr)}),T||this._emit("peer",w)}async add(w,y){if(!s.isPeerId(w))throw p.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),u.ERR_INVALID_PARAMETERS);if(!Array.isArray(y))throw p.error("multiaddrs must be an array of Multiaddrs"),t(new Error("multiaddrs must be an array of Multiaddrs"),u.ERR_INVALID_PARAMETERS);p("add await write lock");const b=await this._store.lock.writeLock();p("add got write lock");let T,R;try{const S=await v(w,y,this._addressFilter);if(!S.length)return;try{const E=await this._store.load(w);if(T=!0,new Set([...S.map(({multiaddr:A})=>A.toString()),...E.addresses.map(({multiaddr:A})=>A.toString())]).size===E.addresses.length)return}catch(E){if(E.code!==u.ERR_NOT_FOUND)throw E}R=await this._store.mergeOrCreate(w,{addresses:S}),p(`added multiaddrs for ${w.toB58String()}`)}finally{p("set release write lock"),b()}this._emit(_,{peerId:w,multiaddrs:R.addresses.map(S=>S.multiaddr)}),T||this._emit("peer",w)}async delete(w){if(!s.isPeerId(w))throw p.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),u.ERR_INVALID_PARAMETERS);p("delete await write lock");const y=await this._store.lock.writeLock();p("delete got write lock");let b;try{b=await this._store.has(w),await this._store.patchOrCreate(w,{addresses:[]})}finally{p("delete release write lock"),y()}b&&this._emit(_,{peerId:w,multiaddrs:[]})}async getMultiaddrsForPeer(w,y=b=>b){const b=await this.get(w);return y(b).map(T=>{const R=T.multiaddr,S=R.getPeerId();return S&&S===w.toB58String()?R:R.encapsulate(`/p2p/${w.toB58String()}`)})}};function v(w,y,b,T=!1){return a(y,R=>g(R,S=>{if(!n.isMultiaddr(S))throw p.error("multiaddr must be an instance of Multiaddr"),t(new Error("multiaddr must be an instance of Multiaddr"),u.ERR_INVALID_PARAMETERS)}),R=>d(R,S=>b(w,S)),R=>h(R,S=>({multiaddr:new n(S.toString()),isCertified:T})),R=>c(R))}o.exports=m}}),require_key_book=__commonJS({"node_modules/libp2p/src/peer-store/key-book.js"(e,o){init_node_globals();var r=require_browser2(),t=require_err_code(),{codes:n}=require_errors4(),s=require_src5(),{equals:u}=(init_equals(),__toCommonJS(equals_exports)),l=Object.assign(r("libp2p:peer-store:key-book"),{error:r("libp2p:peer-store:key-book:err")}),f="change:pubkey",a=class{constructor(c,d){this._emit=c,this._store=d}async set(c,d){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(!d)throw l.error("publicKey must be an instance of PublicKey to store data"),t(new Error("publicKey must be an instance of PublicKey"),n.ERR_INVALID_PARAMETERS);l("set await write lock");const h=await this._store.lock.writeLock();l("set got write lock");let g=!1;try{try{const p=await this._store.load(c);if(p.pubKey&&u(p.pubKey.bytes,d.bytes))return}catch(p){if(p.code!==n.ERR_NOT_FOUND)throw p}await this._store.patchOrCreate(c,{pubKey:d}),g=!0}finally{l("set release write lock"),h()}g&&this._emit(f,{peerId:c,pubKey:d})}async get(c){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("get await write lock");const d=await this._store.lock.readLock();l("get got write lock");try{return(await this._store.load(c)).pubKey}catch(h){if(h.code!==n.ERR_NOT_FOUND)throw h}finally{l("get release write lock"),d()}}async delete(c){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("delete await write lock");const d=await this._store.lock.writeLock();l("delete got write lock");try{await this._store.patchOrCreate(c,{pubKey:void 0})}finally{l("delete release write lock"),d()}this._emit(f,{peerId:c,pubKey:void 0})}};o.exports=a}}),require_metadata_book=__commonJS({"node_modules/libp2p/src/peer-store/metadata-book.js"(e,o){init_node_globals();var r=require_browser2(),t=require_err_code(),{codes:n}=require_errors4(),s=require_src5(),{equals:u}=(init_equals(),__toCommonJS(equals_exports)),l=Object.assign(r("libp2p:peer-store:metadata-book"),{error:r("libp2p:peer-store:metadata-book:err")}),f="change:metadata",a=class{constructor(c,d){this._emit=c,this._store=d}async get(c){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("get await read lock");const d=await this._store.lock.readLock();l("get got read lock");try{return(await this._store.load(c)).metadata}catch(h){if(h.code!==n.ERR_NOT_FOUND)throw h}finally{l("get release read lock"),d()}return new Map}async getValue(c,d){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("getValue await read lock");const h=await this._store.lock.readLock();l("getValue got read lock");try{return(await this._store.load(c)).metadata.get(d)}catch(g){if(g.code!==n.ERR_NOT_FOUND)throw g}finally{l("getValue release write lock"),h()}}async set(c,d){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(!d||!(d instanceof Map))throw l.error("valid metadata must be provided to store data"),t(new Error("valid metadata must be provided"),n.ERR_INVALID_PARAMETERS);l("set await write lock");const h=await this._store.lock.writeLock();l("set got write lock");try{await this._store.mergeOrCreate(c,{metadata:d})}finally{l("set release write lock"),h()}this._emit(f,{peerId:c,metadata:d})}async setValue(c,d,h){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(typeof d!="string"||!(h instanceof Uint8Array))throw l.error("valid key and value must be provided to store data"),t(new Error("valid key and value must be provided"),n.ERR_INVALID_PARAMETERS);l("setValue await write lock");const g=await this._store.lock.writeLock();l("setValue got write lock");let p;try{try{const m=(await this._store.load(c)).metadata.get(d);if(m!=null&&u(h,m))return}catch(_){if(_.code!==n.ERR_NOT_FOUND)throw _}p=await this._store.mergeOrCreate(c,{metadata:new Map([[d,h]])})}finally{l("setValue release write lock"),g()}this._emit(f,{peerId:c,metadata:p.metadata})}async delete(c){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("delete await write lock");const d=await this._store.lock.writeLock();l("delete got write lock");let h;try{h=await this._store.has(c),h&&await this._store.patch(c,{metadata:new Map})}finally{l("delete release write lock"),d()}h&&this._emit(f,{peerId:c,metadata:new Map})}async deleteValue(c,d){if(!s.isPeerId(c))throw l.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);l("deleteValue await write lock");const h=await this._store.lock.writeLock();l("deleteValue got write lock");let g;try{g=(await this._store.load(c)).metadata,g.delete(d),await this._store.patch(c,{metadata:g})}catch(p){if(p.code!==n.ERR_NOT_FOUND)throw p}finally{l("deleteValue release write lock"),h()}g&&this._emit(f,{peerId:c,metadata:g})}};o.exports=a}}),require_proto_book=__commonJS({"node_modules/libp2p/src/peer-store/proto-book.js"(e,o){init_node_globals();var r=require_browser2(),t=require_err_code(),{codes:n}=require_errors4(),s=require_src5(),u=Object.assign(r("libp2p:peer-store:proto-book"),{error:r("libp2p:peer-store:proto-book:err")}),l="change:protocols",f=class{constructor(a,c){this._emit=a,this._store=c}async get(a){u("get wait for read lock");const c=await this._store.lock.readLock();u("get got read lock");try{return(await this._store.load(a)).protocols}catch(d){if(d.code!==n.ERR_NOT_FOUND)throw d}finally{u("get release read lock"),c()}return[]}async set(a,c){if(!s.isPeerId(a))throw u.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(!Array.isArray(c))throw u.error("protocols must be provided to store data"),t(new Error("protocols must be provided"),n.ERR_INVALID_PARAMETERS);u("set await write lock");const d=await this._store.lock.writeLock();u("set got write lock");let h;try{try{const g=await this._store.load(a);if(new Set([...c]).size===g.protocols.length)return}catch(g){if(g.code!==n.ERR_NOT_FOUND)throw g}h=await this._store.patchOrCreate(a,{protocols:c}),u(`stored provided protocols for ${a.toB58String()}`)}finally{u("set release write lock"),d()}this._emit(l,{peerId:a,protocols:h.protocols})}async add(a,c){if(!s.isPeerId(a))throw u.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(!Array.isArray(c))throw u.error("protocols must be provided to store data"),t(new Error("protocols must be provided"),n.ERR_INVALID_PARAMETERS);u("add await write lock");const d=await this._store.lock.writeLock();u("add got write lock");let h;try{try{const g=await this._store.load(a);if(new Set([...g.protocols,...c]).size===g.protocols.length)return}catch(g){if(g.code!==n.ERR_NOT_FOUND)throw g}h=await this._store.mergeOrCreate(a,{protocols:c}),u(`added provided protocols for ${a.toB58String()}`)}finally{u("add release write lock"),d()}this._emit(l,{peerId:a,protocols:h.protocols})}async remove(a,c){if(!s.isPeerId(a))throw u.error("peerId must be an instance of peer-id to store data"),t(new Error("peerId must be an instance of peer-id"),n.ERR_INVALID_PARAMETERS);if(!Array.isArray(c))throw u.error("protocols must be provided to store data"),t(new Error("protocols must be provided"),n.ERR_INVALID_PARAMETERS);u("remove await write lock");const d=await this._store.lock.writeLock();u("remove got write lock");let h;try{try{const g=await this._store.load(a),p=new Set(g.protocols);for(const _ of c)p.delete(_);if(g.protocols.length===p.size)return;c=Array.from(p)}catch(g){if(g.code!==n.ERR_NOT_FOUND)throw g}h=await this._store.patchOrCreate(a,{protocols:c})}finally{u("remove release write lock"),d()}this._emit(l,{peerId:a,protocols:h.protocols})}async delete(a){u("delete await write lock");const c=await this._store.lock.writeLock();u("delete got write lock");let d;try{d=await this._store.has(a),await this._store.patchOrCreate(a,{protocols:[]})}catch(h){if(h.code!==n.ERR_NOT_FOUND)throw h}finally{u("delete release write lock"),c()}d&&this._emit(l,{peerId:a,protocols:[]})}};o.exports=f}}),require_peer=__commonJS({"node_modules/libp2p/src/peer-store/pb/peer.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-peer"]||(r.roots["libp2p-peer"]={});u.Peer=function(){function l(a){if(this.addresses=[],this.protocols=[],this.metadata=[],a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}l.prototype.addresses=s.emptyArray,l.prototype.protocols=s.emptyArray,l.prototype.metadata=s.emptyArray,l.prototype.pubKey=null,l.prototype.peerRecordEnvelope=null;var f;return Object.defineProperty(l.prototype,"_pubKey",{get:s.oneOfGetter(f=["pubKey"]),set:s.oneOfSetter(f)}),Object.defineProperty(l.prototype,"_peerRecordEnvelope",{get:s.oneOfGetter(f=["peerRecordEnvelope"]),set:s.oneOfSetter(f)}),l.encode=function(c,d){if(d||(d=n.create()),c.addresses!=null&&c.addresses.length)for(var h=0;h<c.addresses.length;++h)u.Address.encode(c.addresses[h],d.uint32(10).fork()).ldelim();if(c.protocols!=null&&c.protocols.length)for(var h=0;h<c.protocols.length;++h)d.uint32(18).string(c.protocols[h]);if(c.metadata!=null&&c.metadata.length)for(var h=0;h<c.metadata.length;++h)u.Metadata.encode(c.metadata[h],d.uint32(26).fork()).ldelim();return c.pubKey!=null&&Object.hasOwnProperty.call(c,"pubKey")&&d.uint32(34).bytes(c.pubKey),c.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(c,"peerRecordEnvelope")&&d.uint32(42).bytes(c.peerRecordEnvelope),d},l.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.Peer;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.addresses&&g.addresses.length||(g.addresses=[]),g.addresses.push(u.Address.decode(c,c.uint32()));break;case 2:g.protocols&&g.protocols.length||(g.protocols=[]),g.protocols.push(c.string());break;case 3:g.metadata&&g.metadata.length||(g.metadata=[]),g.metadata.push(u.Metadata.decode(c,c.uint32()));break;case 4:g.pubKey=c.bytes();break;case 5:g.peerRecordEnvelope=c.bytes();break;default:c.skipType(p&7);break}}return g},l.fromObject=function(c){if(c instanceof u.Peer)return c;var d=new u.Peer;if(c.addresses){if(!Array.isArray(c.addresses))throw TypeError(".Peer.addresses: array expected");d.addresses=[];for(var h=0;h<c.addresses.length;++h){if(typeof c.addresses[h]!="object")throw TypeError(".Peer.addresses: object expected");d.addresses[h]=u.Address.fromObject(c.addresses[h])}}if(c.protocols){if(!Array.isArray(c.protocols))throw TypeError(".Peer.protocols: array expected");d.protocols=[];for(var h=0;h<c.protocols.length;++h)d.protocols[h]=String(c.protocols[h])}if(c.metadata){if(!Array.isArray(c.metadata))throw TypeError(".Peer.metadata: array expected");d.metadata=[];for(var h=0;h<c.metadata.length;++h){if(typeof c.metadata[h]!="object")throw TypeError(".Peer.metadata: object expected");d.metadata[h]=u.Metadata.fromObject(c.metadata[h])}}return c.pubKey!=null&&(typeof c.pubKey=="string"?s.base64.decode(c.pubKey,d.pubKey=s.newBuffer(s.base64.length(c.pubKey)),0):c.pubKey.length&&(d.pubKey=c.pubKey)),c.peerRecordEnvelope!=null&&(typeof c.peerRecordEnvelope=="string"?s.base64.decode(c.peerRecordEnvelope,d.peerRecordEnvelope=s.newBuffer(s.base64.length(c.peerRecordEnvelope)),0):c.peerRecordEnvelope.length&&(d.peerRecordEnvelope=c.peerRecordEnvelope)),d},l.toObject=function(c,d){d||(d={});var h={};if((d.arrays||d.defaults)&&(h.addresses=[],h.protocols=[],h.metadata=[]),c.addresses&&c.addresses.length){h.addresses=[];for(var g=0;g<c.addresses.length;++g)h.addresses[g]=u.Address.toObject(c.addresses[g],d)}if(c.protocols&&c.protocols.length){h.protocols=[];for(var g=0;g<c.protocols.length;++g)h.protocols[g]=c.protocols[g]}if(c.metadata&&c.metadata.length){h.metadata=[];for(var g=0;g<c.metadata.length;++g)h.metadata[g]=u.Metadata.toObject(c.metadata[g],d)}return c.pubKey!=null&&c.hasOwnProperty("pubKey")&&(h.pubKey=d.bytes===String?s.base64.encode(c.pubKey,0,c.pubKey.length):d.bytes===Array?Array.prototype.slice.call(c.pubKey):c.pubKey,d.oneofs&&(h._pubKey="pubKey")),c.peerRecordEnvelope!=null&&c.hasOwnProperty("peerRecordEnvelope")&&(h.peerRecordEnvelope=d.bytes===String?s.base64.encode(c.peerRecordEnvelope,0,c.peerRecordEnvelope.length):d.bytes===Array?Array.prototype.slice.call(c.peerRecordEnvelope):c.peerRecordEnvelope,d.oneofs&&(h._peerRecordEnvelope="peerRecordEnvelope")),h},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),u.Address=function(){function l(a){if(a)for(var c=Object.keys(a),d=0;d<c.length;++d)a[c[d]]!=null&&(this[c[d]]=a[c[d]])}l.prototype.multiaddr=s.newBuffer([]),l.prototype.isCertified=null;var f;return Object.defineProperty(l.prototype,"_isCertified",{get:s.oneOfGetter(f=["isCertified"]),set:s.oneOfSetter(f)}),l.encode=function(c,d){return d||(d=n.create()),c.multiaddr!=null&&Object.hasOwnProperty.call(c,"multiaddr")&&d.uint32(10).bytes(c.multiaddr),c.isCertified!=null&&Object.hasOwnProperty.call(c,"isCertified")&&d.uint32(16).bool(c.isCertified),d},l.decode=function(c,d){c instanceof t||(c=t.create(c));for(var h=d===void 0?c.len:c.pos+d,g=new u.Address;c.pos<h;){var p=c.uint32();switch(p>>>3){case 1:g.multiaddr=c.bytes();break;case 2:g.isCertified=c.bool();break;default:c.skipType(p&7);break}}return g},l.fromObject=function(c){if(c instanceof u.Address)return c;var d=new u.Address;return c.multiaddr!=null&&(typeof c.multiaddr=="string"?s.base64.decode(c.multiaddr,d.multiaddr=s.newBuffer(s.base64.length(c.multiaddr)),0):c.multiaddr.length&&(d.multiaddr=c.multiaddr)),c.isCertified!=null&&(d.isCertified=Boolean(c.isCertified)),d},l.toObject=function(c,d){d||(d={});var h={};return d.defaults&&(d.bytes===String?h.multiaddr="":(h.multiaddr=[],d.bytes!==Array&&(h.multiaddr=s.newBuffer(h.multiaddr)))),c.multiaddr!=null&&c.hasOwnProperty("multiaddr")&&(h.multiaddr=d.bytes===String?s.base64.encode(c.multiaddr,0,c.multiaddr.length):d.bytes===Array?Array.prototype.slice.call(c.multiaddr):c.multiaddr),c.isCertified!=null&&c.hasOwnProperty("isCertified")&&(h.isCertified=c.isCertified,d.oneofs&&(h._isCertified="isCertified")),h},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),u.Metadata=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.key="",l.prototype.value=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),a.key!=null&&Object.hasOwnProperty.call(a,"key")&&c.uint32(10).string(a.key),a.value!=null&&Object.hasOwnProperty.call(a,"value")&&c.uint32(18).bytes(a.value),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.Metadata;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.key=a.string();break;case 2:h.value=a.bytes();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.Metadata)return a;var c=new u.Metadata;return a.key!=null&&(c.key=String(a.key)),a.value!=null&&(typeof a.value=="string"?s.base64.decode(a.value,c.value=s.newBuffer(s.base64.length(a.value)),0):a.value.length&&(c.value=a.value)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.key="",c.bytes===String?d.value="":(d.value=[],c.bytes!==Array&&(d.value=s.newBuffer(d.value)))),a.key!=null&&a.hasOwnProperty("key")&&(d.key=a.key),a.value!=null&&a.hasOwnProperty("value")&&(d.value=c.bytes===String?s.base64.encode(a.value,0,a.value.length):c.bytes===Array?Array.prototype.slice.call(a.value):a.value),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_store=__commonJS({"node_modules/libp2p/src/peer-store/store.js"(e,o){init_node_globals();var r=require_browser2(),t=require_src5(),n=require_err_code(),{codes:s}=require_errors4(),{Key:u}=(init_key(),__toCommonJS(key_exports)),{base32:l}=(init_base32(),__toCommonJS(base32_exports)),{keys:{unmarshalPublicKey:f,marshalPublicKey:a}}=require_src6(),{Multiaddr:c}=require_src(),{Peer:d}=require_peer(),h=require_lib5(),{equals:g}=(init_equals(),__toCommonJS(equals_exports)),p=Object.assign(r("libp2p:peer-store:store"),{error:r("libp2p:peer-store:store:err")}),_="/peers/",m=class{constructor(v){this._datastore=v,this.lock=h("peer-store",{singleProcess:!0})}_peerIdToDatastoreKey(v){if(!t.isPeerId(v))throw p.error("peerId must be an instance of peer-id to store data"),n(new Error("peerId must be an instance of peer-id"),s.ERR_INVALID_PARAMETERS);const w=v.toString();return new u(`${_}${w}`)}async has(v){return this._datastore.has(this._peerIdToDatastoreKey(v))}async delete(v){await this._datastore.delete(this._peerIdToDatastoreKey(v))}async load(v){const w=await this._datastore.get(this._peerIdToDatastoreKey(v)),y=d.decode(w),b=y.pubKey?f(y.pubKey):v.pubKey,T=new Map;for(const R of y.metadata)T.set(R.key,R.value);return $e(Re({},y),{id:v,pubKey:b,addresses:y.addresses.map(({multiaddr:R,isCertified:S})=>({multiaddr:new c(R),isCertified:S||!1})),metadata:T,peerRecordEnvelope:y.peerRecordEnvelope||void 0})}async save(v){if(v.pubKey!=null&&v.id.pubKey!=null&&!g(v.pubKey.bytes,v.id.pubKey.bytes))throw p.error("peer publicKey bytes do not match peer id publicKey bytes"),n(new Error("publicKey bytes do not match peer id publicKey bytes"),s.ERR_INVALID_PARAMETERS);const w=new Set,y=d.encode({addresses:v.addresses.filter(b=>w.has(b.multiaddr.toString())?!1:(w.add(b.multiaddr.toString()),!0)).sort((b,T)=>b.multiaddr.toString().localeCompare(T.multiaddr.toString())).map(({multiaddr:b,isCertified:T})=>({multiaddr:b.bytes,isCertified:T})),protocols:v.protocols.sort(),pubKey:v.pubKey?a(v.pubKey):void 0,metadata:[...v.metadata.keys()].sort().map(b=>({key:b,value:v.metadata.get(b)})),peerRecordEnvelope:v.peerRecordEnvelope}).finish();return await this._datastore.put(this._peerIdToDatastoreKey(v.id),y),this.load(v.id)}async patch(v,w){const y=await this.load(v);return await this._patch(v,w,y)}async patchOrCreate(v,w){let y;try{y=await this.load(v)}catch(b){if(b.code!==s.ERR_NOT_FOUND)throw b;y={id:v,addresses:[],protocols:[],metadata:new Map}}return await this._patch(v,w,y)}async _patch(v,w,y){return await this.save($e(Re(Re({},y),w),{id:v}))}async merge(v,w){const y=await this.load(v);return this._merge(v,w,y)}async mergeOrCreate(v,w){let y;try{y=await this.load(v)}catch(b){if(b.code!==s.ERR_NOT_FOUND)throw b;y={id:v,addresses:[],protocols:[],metadata:new Map}}return await this._merge(v,w,y)}async _merge(v,w,y){const b=new Map;return(w.addresses||[]).forEach(T=>{b.set(T.multiaddr.toString(),T.isCertified)}),y.addresses.forEach(({multiaddr:T,isCertified:R})=>{const S=T.toString();b.set(S,Boolean(b.get(S)||R))}),await this.save({id:v,addresses:Array.from(b.entries()).map(([T,R])=>({multiaddr:new c(T),isCertified:R})),protocols:Array.from(new Set([...y.protocols||[],...w.protocols||[]])),metadata:new Map([...y.metadata?y.metadata.entries():[],...w.metadata?w.metadata.entries():[]]),pubKey:w.pubKey||(y!=null?y.pubKey:void 0),peerRecordEnvelope:w.peerRecordEnvelope||(y!=null?y.peerRecordEnvelope:void 0)})}async*all(){for await(const v of this._datastore.queryKeys({prefix:_})){const w=v.toString().split("/")[2],y=l.decode(w);yield this.load(t.createFromBytes(y))}}};o.exports=m}}),require_peer_store=__commonJS({"node_modules/libp2p/src/peer-store/index.js"(e,o){init_node_globals();var r=require_browser2(),{EventEmitter:t}=require_events(),n=require_address_book(),s=require_key_book(),u=require_metadata_book(),l=require_proto_book(),f=require_store(),a=Object.assign(r("libp2p:peer-store"),{error:r("libp2p:peer-store:err")}),c=class extends t{constructor({peerId:d,datastore:h,addressFilter:g}){super();this._peerId=d,this._store=new f(h),this.addressBook=new n(this.emit.bind(this),this._store,g),this.keyBook=new s(this.emit.bind(this),this._store),this.metadataBook=new u(this.emit.bind(this),this._store),this.protoBook=new l(this.emit.bind(this),this._store)}async*getPeers(){a("getPeers await read lock");const d=await this._store.lock.readLock();a("getPeers got read lock");try{for await(const h of this._store.all())h.id.toB58String()!==this._peerId.toB58String()&&(yield h)}finally{a("getPeers release read lock"),d()}}async delete(d){a("delete await write lock");const h=await this._store.lock.writeLock();a("delete got write lock");try{await this._store.delete(d)}finally{a("delete release write lock"),h()}}async get(d){a("get await read lock");const h=await this._store.lock.readLock();a("get got read lock");try{return this._store.load(d)}finally{a("get release read lock"),h()}}async has(d){a("has await read lock");const h=await this._store.lock.readLock();a("has got read lock");try{return this._store.has(d)}finally{a("has release read lock"),h()}}};o.exports=c}}),require_pubsub_adapter=__commonJS({"node_modules/libp2p/src/pubsub-adapter.js"(e,o){init_node_globals();function r(t,n,s){const u=new t(n,s);u._subscribeAdapter=u.subscribe,u._unsubscribeAdapter=u.unsubscribe;function l(a,c){c&&u.on(a,c),u._subscribeAdapter(a)}function f(a,c){c?u.removeListener(a,c):u.removeAllListeners(a),u.listenerCount(a)===0&&u._unsubscribeAdapter(a)}return u.subscribe=l,u.unsubscribe=f,u}o.exports=r}}),require_registrar=__commonJS({"node_modules/libp2p/src/registrar.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:registrar"),{error:r("libp2p:registrar:err")}),n=require_err_code(),{codes:{ERR_INVALID_PARAMETERS:s}}=require_errors4(),u=require_topology(),l=class{constructor({peerStore:f,connectionManager:a}){this.peerStore=f,this.connectionManager=a,this.topologies=new Map,this._handle=void 0,this._onDisconnect=this._onDisconnect.bind(this),this.connectionManager.on("peer:disconnect",this._onDisconnect)}get handle(){return this._handle}set handle(f){this._handle=f}getConnection(f){return this.connectionManager.get(f)}async register(f){if(!u.isTopology(f))throw t.error("topology must be an instance of interfaces/topology"),n(new Error("topology must be an instance of interfaces/topology"),s);const a=(Math.random()*1e9).toString(36)+Date.now();return this.topologies.set(a,f),await f.setRegistrar(this),a}unregister(f){return this.topologies.delete(f)}_onDisconnect(f){for(const[,a]of this.topologies)a.disconnect(f.remotePeer)}};o.exports=l}}),require_message2=__commonJS({"node_modules/libp2p/src/identify/message.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-identify"]||(r.roots["libp2p-identify"]={});u.Identify=function(){function l(f){if(this.listenAddrs=[],this.protocols=[],f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.protocolVersion="",l.prototype.agentVersion="",l.prototype.publicKey=s.newBuffer([]),l.prototype.listenAddrs=s.emptyArray,l.prototype.observedAddr=s.newBuffer([]),l.prototype.protocols=s.emptyArray,l.prototype.signedPeerRecord=s.newBuffer([]),l.encode=function(a,c){if(c||(c=n.create()),a.publicKey!=null&&Object.hasOwnProperty.call(a,"publicKey")&&c.uint32(10).bytes(a.publicKey),a.listenAddrs!=null&&a.listenAddrs.length)for(var d=0;d<a.listenAddrs.length;++d)c.uint32(18).bytes(a.listenAddrs[d]);if(a.protocols!=null&&a.protocols.length)for(var d=0;d<a.protocols.length;++d)c.uint32(26).string(a.protocols[d]);return a.observedAddr!=null&&Object.hasOwnProperty.call(a,"observedAddr")&&c.uint32(34).bytes(a.observedAddr),a.protocolVersion!=null&&Object.hasOwnProperty.call(a,"protocolVersion")&&c.uint32(42).string(a.protocolVersion),a.agentVersion!=null&&Object.hasOwnProperty.call(a,"agentVersion")&&c.uint32(50).string(a.agentVersion),a.signedPeerRecord!=null&&Object.hasOwnProperty.call(a,"signedPeerRecord")&&c.uint32(66).bytes(a.signedPeerRecord),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.Identify;a.pos<d;){var g=a.uint32();switch(g>>>3){case 5:h.protocolVersion=a.string();break;case 6:h.agentVersion=a.string();break;case 1:h.publicKey=a.bytes();break;case 2:h.listenAddrs&&h.listenAddrs.length||(h.listenAddrs=[]),h.listenAddrs.push(a.bytes());break;case 4:h.observedAddr=a.bytes();break;case 3:h.protocols&&h.protocols.length||(h.protocols=[]),h.protocols.push(a.string());break;case 8:h.signedPeerRecord=a.bytes();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.Identify)return a;var c=new u.Identify;if(a.protocolVersion!=null&&(c.protocolVersion=String(a.protocolVersion)),a.agentVersion!=null&&(c.agentVersion=String(a.agentVersion)),a.publicKey!=null&&(typeof a.publicKey=="string"?s.base64.decode(a.publicKey,c.publicKey=s.newBuffer(s.base64.length(a.publicKey)),0):a.publicKey.length&&(c.publicKey=a.publicKey)),a.listenAddrs){if(!Array.isArray(a.listenAddrs))throw TypeError(".Identify.listenAddrs: array expected");c.listenAddrs=[];for(var d=0;d<a.listenAddrs.length;++d)typeof a.listenAddrs[d]=="string"?s.base64.decode(a.listenAddrs[d],c.listenAddrs[d]=s.newBuffer(s.base64.length(a.listenAddrs[d])),0):a.listenAddrs[d].length&&(c.listenAddrs[d]=a.listenAddrs[d])}if(a.observedAddr!=null&&(typeof a.observedAddr=="string"?s.base64.decode(a.observedAddr,c.observedAddr=s.newBuffer(s.base64.length(a.observedAddr)),0):a.observedAddr.length&&(c.observedAddr=a.observedAddr)),a.protocols){if(!Array.isArray(a.protocols))throw TypeError(".Identify.protocols: array expected");c.protocols=[];for(var d=0;d<a.protocols.length;++d)c.protocols[d]=String(a.protocols[d])}return a.signedPeerRecord!=null&&(typeof a.signedPeerRecord=="string"?s.base64.decode(a.signedPeerRecord,c.signedPeerRecord=s.newBuffer(s.base64.length(a.signedPeerRecord)),0):a.signedPeerRecord.length&&(c.signedPeerRecord=a.signedPeerRecord)),c},l.toObject=function(a,c){c||(c={});var d={};if((c.arrays||c.defaults)&&(d.listenAddrs=[],d.protocols=[]),c.defaults&&(c.bytes===String?d.publicKey="":(d.publicKey=[],c.bytes!==Array&&(d.publicKey=s.newBuffer(d.publicKey))),c.bytes===String?d.observedAddr="":(d.observedAddr=[],c.bytes!==Array&&(d.observedAddr=s.newBuffer(d.observedAddr))),d.protocolVersion="",d.agentVersion="",c.bytes===String?d.signedPeerRecord="":(d.signedPeerRecord=[],c.bytes!==Array&&(d.signedPeerRecord=s.newBuffer(d.signedPeerRecord)))),a.publicKey!=null&&a.hasOwnProperty("publicKey")&&(d.publicKey=c.bytes===String?s.base64.encode(a.publicKey,0,a.publicKey.length):c.bytes===Array?Array.prototype.slice.call(a.publicKey):a.publicKey),a.listenAddrs&&a.listenAddrs.length){d.listenAddrs=[];for(var h=0;h<a.listenAddrs.length;++h)d.listenAddrs[h]=c.bytes===String?s.base64.encode(a.listenAddrs[h],0,a.listenAddrs[h].length):c.bytes===Array?Array.prototype.slice.call(a.listenAddrs[h]):a.listenAddrs[h]}if(a.protocols&&a.protocols.length){d.protocols=[];for(var h=0;h<a.protocols.length;++h)d.protocols[h]=a.protocols[h]}return a.observedAddr!=null&&a.hasOwnProperty("observedAddr")&&(d.observedAddr=c.bytes===String?s.base64.encode(a.observedAddr,0,a.observedAddr.length):c.bytes===Array?Array.prototype.slice.call(a.observedAddr):a.observedAddr),a.protocolVersion!=null&&a.hasOwnProperty("protocolVersion")&&(d.protocolVersion=a.protocolVersion),a.agentVersion!=null&&a.hasOwnProperty("agentVersion")&&(d.agentVersion=a.agentVersion),a.signedPeerRecord!=null&&a.hasOwnProperty("signedPeerRecord")&&(d.signedPeerRecord=c.bytes===String?s.base64.encode(a.signedPeerRecord,0,a.signedPeerRecord.length):c.bytes===Array?Array.prototype.slice.call(a.signedPeerRecord):a.signedPeerRecord),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),o.exports=u}}),require_identify=__commonJS({"node_modules/libp2p/src/identify/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:identify"),{error:r("libp2p:identify:err")}),n=require_err_code(),s=require_src11(),{pipe:u}=require_it_pipe(),{collect:l,take:f,consume:a}=require_dist2(),{fromString:c}=(init_from_string(),__toCommonJS(from_string_exports)),d=require_src5(),{Multiaddr:h}=require_src(),{toBuffer:g}=require_it_buffer(),p=require_message2(),_=require_envelope2(),m=require_peer_record2(),{MULTICODEC_IDENTIFY:v,MULTICODEC_IDENTIFY_PUSH:w,IDENTIFY_PROTOCOL_VERSION:y,MULTICODEC_IDENTIFY_PROTOCOL_NAME:b,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME:T,MULTICODEC_IDENTIFY_PROTOCOL_VERSION:R,MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION:S}=require_consts(),{codes:E}=require_errors4(),A=class{static getProtocolStr(I){return{identifyProtocolStr:`/${I._config.protocolPrefix}/${b}/${R}`,identifyPushProtocolStr:`/${I._config.protocolPrefix}/${T}/${S}`}}constructor({libp2p:I}){this._libp2p=I,this.peerStore=I.peerStore,this.addressManager=I.addressManager,this.connectionManager=I.connectionManager,this.peerId=I.peerId,this.handleMessage=this.handleMessage.bind(this);const P=A.getProtocolStr(I);this.identifyProtocolStr=P.identifyProtocolStr,this.identifyPushProtocolStr=P.identifyPushProtocolStr,this._host=Re({protocolVersion:`${I._config.protocolPrefix}/${y}`},I._options.host),this.connectionManager.on("peer:connect",O=>{this.identify(O).catch(t.error)}),this.peerStore.on("change:multiaddrs",({peerId:O})=>{O.toString()===this.peerId.toString()&&this.pushToPeerStore().catch(k=>t.error(k))}),this.peerStore.on("change:protocols",({peerId:O})=>{O.toString()===this.peerId.toString()&&this.pushToPeerStore().catch(k=>t.error(k))})}async start(){await this.peerStore.metadataBook.setValue(this.peerId,"AgentVersion",c(this._host.agentVersion)),await this.peerStore.metadataBook.setValue(this.peerId,"ProtocolVersion",c(this._host.protocolVersion))}async stop(){}async push(I){const P=await this.peerStore.addressBook.getRawEnvelope(this.peerId),O=this._libp2p.multiaddrs.map(K=>K.bytes),k=await this.peerStore.protoBook.get(this.peerId),N=I.map(async K=>{try{const{stream:U}=await K.newStream(this.identifyPushProtocolStr);await u([p.Identify.encode({listenAddrs:O,signedPeerRecord:P,protocols:k}).finish()],s.encode(),U,a)}catch(U){t.error("could not push identify update to peer",U)}});return Promise.all(N)}async pushToPeerStore(){if(!this._libp2p.isStarted())return;const I=[];let P;for await(const O of this.peerStore.getPeers())O.protocols.includes(this.identifyPushProtocolStr)&&(P=this.connectionManager.get(O.id))&&I.push(P);await this.push(I)}async identify(I){const{stream:P}=await I.newStream(this.identifyProtocolStr),[O]=await u([],P,s.decode(),f(1),g,l);if(!O)throw n(new Error("No data could be retrieved"),E.ERR_CONNECTION_ENDED);let k;try{k=p.Identify.decode(O)}catch(ee){throw n(ee,E.ERR_INVALID_MESSAGE)}const{publicKey:N,listenAddrs:K,protocols:U,observedAddr:L,signedPeerRecord:re}=k,Z=await d.createFromPubKey(N);if(I.remotePeer.toB58String()!==Z.toB58String())throw n(new Error("identified peer does not match the expected peer"),E.ERR_INVALID_PEER);const V=A.getCleanMultiaddr(L);try{const ee=await _.openAndCertify(re,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(ee)){await this.peerStore.protoBook.set(Z,U),await this.peerStore.metadataBook.setValue(Z,"AgentVersion",c(k.agentVersion)),await this.peerStore.metadataBook.setValue(Z,"ProtocolVersion",c(k.protocolVersion));return}}catch(ee){t("received invalid envelope, discard it and fallback to listenAddrs is available",ee)}try{await this.peerStore.addressBook.set(Z,K.map(ee=>new h(ee)))}catch(ee){t.error("received invalid addrs",ee)}await this.peerStore.protoBook.set(Z,U),await this.peerStore.metadataBook.setValue(Z,"AgentVersion",c(k.agentVersion)),await this.peerStore.metadataBook.setValue(Z,"ProtocolVersion",c(k.protocolVersion)),t("received observed address of %s",V)}handleMessage({connection:I,stream:P,protocol:O}){switch(O){case this.identifyProtocolStr:return this._handleIdentify({connection:I,stream:P});case this.identifyPushProtocolStr:return this._handlePush({connection:I,stream:P});default:t.error("cannot handle unknown protocol %s",O)}}async _handleIdentify({connection:I,stream:P}){try{let O=new Uint8Array(0);this.peerId.pubKey&&(O=this.peerId.pubKey.bytes);const k=await this.peerStore.addressBook.getRawEnvelope(this.peerId),N=await this.peerStore.protoBook.get(this.peerId),K=p.Identify.encode({protocolVersion:this._host.protocolVersion,agentVersion:this._host.agentVersion,publicKey:O,listenAddrs:this._libp2p.multiaddrs.map(U=>U.bytes),signedPeerRecord:k,observedAddr:I.remoteAddr.bytes,protocols:N}).finish();await u([K],s.encode(),P,a)}catch(O){t.error("could not respond to identify request",O)}}async _handlePush({connection:I,stream:P}){let O;try{const[N]=await u([],P,s.decode(),f(1),g,l);O=p.Identify.decode(N)}catch(N){return t.error("received invalid message",N)}const k=I.remotePeer;try{const N=await _.openAndCertify(O.signedPeerRecord,m.DOMAIN);if(await this.peerStore.addressBook.consumePeerRecord(N)){await this.peerStore.protoBook.set(k,O.protocols);return}}catch(N){t("received invalid envelope, discard it and fallback to listenAddrs is available",N)}try{await this.peerStore.addressBook.set(k,O.listenAddrs.map(N=>new h(N)))}catch(N){t.error("received invalid addrs",N)}try{await this.peerStore.protoBook.set(k,O.protocols)}catch(N){t.error("received invalid protocols",N)}}static getCleanMultiaddr(I){if(I&&I.length>0)try{return new h(I)}catch{return null}return null}},C={IDENTIFY:v,IDENTIFY_PUSH:w};A.multicodecs=C,A.Messsage=p,o.exports=A}}),require_proto2=__commonJS({"node_modules/libp2p/src/fetch/proto.js"(e,o){init_node_globals();var r=require_minimal2(),t=r.Reader,n=r.Writer,s=r.util,u=r.roots["libp2p-fetch"]||(r.roots["libp2p-fetch"]={});u.FetchRequest=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.identifier="",l.encode=function(a,c){return c||(c=n.create()),a.identifier!=null&&Object.hasOwnProperty.call(a,"identifier")&&c.uint32(10).string(a.identifier),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.FetchRequest;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.identifier=a.string();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.FetchRequest)return a;var c=new u.FetchRequest;return a.identifier!=null&&(c.identifier=String(a.identifier)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.identifier=""),a.identifier!=null&&a.hasOwnProperty("identifier")&&(d.identifier=a.identifier),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l}(),u.FetchResponse=function(){function l(f){if(f)for(var a=Object.keys(f),c=0;c<a.length;++c)f[a[c]]!=null&&(this[a[c]]=f[a[c]])}return l.prototype.status=0,l.prototype.data=s.newBuffer([]),l.encode=function(a,c){return c||(c=n.create()),a.status!=null&&Object.hasOwnProperty.call(a,"status")&&c.uint32(8).int32(a.status),a.data!=null&&Object.hasOwnProperty.call(a,"data")&&c.uint32(18).bytes(a.data),c},l.decode=function(a,c){a instanceof t||(a=t.create(a));for(var d=c===void 0?a.len:a.pos+c,h=new u.FetchResponse;a.pos<d;){var g=a.uint32();switch(g>>>3){case 1:h.status=a.int32();break;case 2:h.data=a.bytes();break;default:a.skipType(g&7);break}}return h},l.fromObject=function(a){if(a instanceof u.FetchResponse)return a;var c=new u.FetchResponse;switch(a.status){case"OK":case 0:c.status=0;break;case"NOT_FOUND":case 1:c.status=1;break;case"ERROR":case 2:c.status=2;break}return a.data!=null&&(typeof a.data=="string"?s.base64.decode(a.data,c.data=s.newBuffer(s.base64.length(a.data)),0):a.data.length&&(c.data=a.data)),c},l.toObject=function(a,c){c||(c={});var d={};return c.defaults&&(d.status=c.enums===String?"OK":0,c.bytes===String?d.data="":(d.data=[],c.bytes!==Array&&(d.data=s.newBuffer(d.data)))),a.status!=null&&a.hasOwnProperty("status")&&(d.status=c.enums===String?u.FetchResponse.StatusCode[a.status]:a.status),a.data!=null&&a.hasOwnProperty("data")&&(d.data=c.bytes===String?s.base64.encode(a.data,0,a.data.length):c.bytes===Array?Array.prototype.slice.call(a.data):a.data),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.StatusCode=function(){var f={},a=Object.create(f);return a[f[0]="OK"]=0,a[f[1]="NOT_FOUND"]=1,a[f[2]="ERROR"]=2,a}(),l}(),o.exports=u}}),require_constants14=__commonJS({"node_modules/libp2p/src/fetch/constants.js"(e,o){init_node_globals(),o.exports={PROTOCOL:"/libp2p/fetch/0.0.1"}}}),require_fetch2=__commonJS({"node_modules/libp2p/src/fetch/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:fetch"),{error:r("libp2p:fetch:err")}),n=require_err_code(),{codes:s}=require_errors4(),u=require_src11(),{FetchRequest:l,FetchResponse:f}=require_proto2(),a=require_src18(),{PROTOCOL:c}=require_constants14(),d=class{constructor(h){this._lookupFunctions=new Map,this._libp2p=h,this.handleMessage=this.handleMessage.bind(this)}async fetch(h,g){t("dialing %s to %s",this._protocol,h.toB58String?h.toB58String():h);const p=await this._libp2p.dial(h),{stream:_}=await p.newStream(d.PROTOCOL),m=a(_),v=new l({identifier:g});m.write(u.encode.single(l.encode(v).finish()));const w=f.decode((await u.decode.fromReader(m.reader).next()).value.slice());switch(w.status){case f.StatusCode.OK:return w.data;case f.StatusCode.NOT_FOUND:return null;case f.StatusCode.ERROR:{const y=new TextDecoder().decode(w.data);throw n(new Error("Error in fetch protocol response: "+y),s.ERR_INVALID_PARAMETERS)}default:throw n(new Error("Unknown response status"),s.ERR_INVALID_MESSAGE)}}async handleMessage(h){const{stream:g}=h,p=a(g),_=l.decode((await u.decode.fromReader(p.reader).next()).value.slice());let m;const v=this._getLookupFunction(_.identifier);if(v){const w=await v(_.identifier);w?m=new f({status:f.StatusCode.OK,data:w}):m=new f({status:f.StatusCode.NOT_FOUND})}else{const w=new TextEncoder().encode("No lookup function registered for key: "+_.identifier);m=new f({status:f.StatusCode.ERROR,data:w})}p.write(u.encode.single(f.encode(m).finish()))}_getLookupFunction(h){for(const g of this._lookupFunctions.keys())if(h.startsWith(g))return this._lookupFunctions.get(g);return null}registerLookupFunction(h,g){if(this._lookupFunctions.has(h))throw n(new Error("Fetch protocol handler for key prefix '"+h+"' already registered"),s.ERR_KEY_ALREADY_EXISTS);this._lookupFunctions.set(h,g)}unregisterLookupFunction(h,g){g!=null&&this._lookupFunctions.get(h)!==g||this._lookupFunctions.delete(h)}};d.PROTOCOL=c,o.exports=d}}),require_constants15=__commonJS({"node_modules/libp2p/src/ping/constants.js"(e,o){init_node_globals(),o.exports={PROTOCOL:"/ipfs/ping/1.0.0",PING_LENGTH:32,PROTOCOL_VERSION:"1.0.0",PROTOCOL_NAME:"ping"}}}),require_ping2=__commonJS({"node_modules/libp2p/src/ping/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p:ping"),{error:r("libp2p:ping:err")}),n=require_err_code(),{codes:s}=require_errors4(),u=require_src6(),{pipe:l}=require_it_pipe(),{toBuffer:f}=require_it_buffer(),{collect:a,take:c}=require_dist2(),{equals:d}=(init_equals(),__toCommonJS(equals_exports)),{PROTOCOL_NAME:h,PING_LENGTH:g,PROTOCOL_VERSION:p}=require_constants15(),_=class{static getProtocolStr(m){return`/${m._config.protocolPrefix}/${h}/${p}`}constructor(m){this._libp2p=m}handleMessage({stream:m}){return l(m,m)}async ping(m){const v=`/${this._libp2p._config.protocolPrefix}/${h}/${p}`;t("dialing %s to %s",v,m.toB58String?m.toB58String():m);const w=await this._libp2p.dial(m),{stream:y}=await w.newStream(v),b=Date.now(),T=u.randomBytes(g),[R]=await l([T],y,E=>c(1,E),f,a),S=Date.now();if(!d(T,R))throw n(new Error("Received wrong ping ack"),s.ERR_WRONG_PING_ACK);return S-b}};o.exports=_}}),require_nat_api=__commonJS({"(disabled):node_modules/nat-api/index.js"(){init_node_globals()}}),require_promisify=__commonJS({"node_modules/es6-promisify/dist/promisify.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0}),e.promisify=r;var o="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__";function r(t){if(typeof t!="function")throw new TypeError("Argument to promisify must be a function");var n=t[o],s=r.Promise||Promise;if(typeof s!="function")throw new Error("No Promise implementation found; do you need a polyfill?");return function(){for(var u=this,l=arguments.length,f=Array(l),a=0;a<l;a++)f[a]=arguments[a];return new s(function(c,d){f.push(function(h){if(h)return d(h);for(var g=arguments.length,p=Array(1<g?g-1:0),_=1;_<g;_++)p[_-1]=arguments[_];if(p.length===1||!n)return c(p[0]);var m={};p.forEach(function(v,w){var y=n[w];y&&(m[y]=v)}),c(m)}),t.apply(u,f)})}}r.argumentNames="__ES6-PROMISIFY--CUSTOM-ARGUMENTS__",r.Promise=void 0}}),require_src26=__commonJS({"node_modules/wherearewe/src/index.js"(e,o){init_node_globals();var r=require_is_electron(),t=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,n=r(),s=t&&!n,u=n&&!t,l=n&&t,f=typeof __require=="function"&&typeof process!="undefined"&&typeof process.release!="undefined"&&process.release.name==="node"&&!n,a=typeof importScripts=="function"&&typeof self!="undefined"&&typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,c=typeof process!="undefined"&&typeof process.env!="undefined"&&!1;o.exports={isTest:c,isElectron:n,isElectronMain:u,isElectronRenderer:l,isNode:f,isBrowser:s,isWebWorker:a,isEnvWithDom:t}}}),require_retry_operation=__commonJS({"node_modules/retry/lib/retry_operation.js"(e,o){init_node_globals();function r(t,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}o.exports=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var n=new Date().getTime();if(t&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var s=this._timeouts.shift();if(s===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),s=this._cachedTimeouts.slice(-1);else return!1;var u=this;return this._timer=setTimeout(function(){u._attempts++,u._operationTimeoutCb&&(u._timeout=setTimeout(function(){u._operationTimeoutCb(u._attempts)},u._operationTimeout),u._options.unref&&u._timeout.unref()),u._fn(u._attempts)},s),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(t,n){this._fn=t,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var s=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){s._operationTimeoutCb()},s._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},r.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},n=null,s=0,u=0;u<this._errors.length;u++){var l=this._errors[u],f=l.message,a=(t[f]||0)+1;t[f]=a,a>=s&&(n=l,s=a)}return n}}}),require_retry=__commonJS({"node_modules/retry/lib/retry.js"(e){init_node_globals();var o=require_retry_operation();e.operation=function(r){var t=e.timeouts(r);return new o(t,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(r){if(r instanceof Array)return[].concat(r);var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in r)t[n]=r[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],u=0;u<t.retries;u++)s.push(this.createTimeout(u,t));return r&&r.forever&&!s.length&&s.push(this.createTimeout(u,t)),s.sort(function(l,f){return l-f}),s},e.createTimeout=function(r,t){var n=t.randomize?Math.random()+1:1,s=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,r));return s=Math.min(s,t.maxTimeout),s},e.wrap=function(r,t,n){if(t instanceof Array&&(n=t,t=null),!n){n=[];for(var s in r)typeof r[s]=="function"&&n.push(s)}for(var u=0;u<n.length;u++){var l=n[u],f=r[l];r[l]=function(c){var d=e.operation(t),h=Array.prototype.slice.call(arguments,1),g=h.pop();h.push(function(p){d.retry(p)||(p&&(arguments[0]=d.mainError()),g.apply(this,arguments))}),d.attempt(function(){c.apply(r,h)})}.bind(r,f),r[l].options=t}}}}),require_retry2=__commonJS({"node_modules/retry/index.js"(e,o){init_node_globals(),o.exports=require_retry()}}),require_p_retry=__commonJS({"node_modules/p-retry/index.js"(e,o){init_node_globals();var r=require_retry2(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],n=class extends Error{constructor(f){super();f instanceof Error?(this.originalError=f,{message:f}=f):(this.originalError=new Error(f),this.originalError.stack=this.stack),this.name="AbortError",this.message=f}},s=(f,a,c)=>{const d=c.retries-(a-1);return f.attemptNumber=a,f.retriesLeft=d,f},u=f=>t.includes(f),l=(f,a)=>new Promise((c,d)=>{a=Re({onFailedAttempt:()=>{},retries:10},a);const h=r.operation(a);h.attempt(async g=>{try{c(await f(g))}catch(p){if(!(p instanceof Error)){d(new TypeError(`Non-error was thrown: "${p}". You should only throw errors.`));return}if(p instanceof n)h.stop(),d(p.originalError);else if(p instanceof TypeError&&!u(p.message))h.stop(),d(p);else{s(p,g,a);try{await a.onFailedAttempt(p)}catch(_){d(_);return}h.retry(p)||d(h.mainError())}}})});o.exports=l,o.exports.default=l,o.exports.AbortError=n}}),require_is_loopback_addr=__commonJS({"node_modules/is-loopback-addr/index.js"(e,o){init_node_globals();function r(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}o.exports=r}}),require_is_loopback=__commonJS({"node_modules/libp2p-utils/src/multiaddr/is-loopback.js"(e,o){init_node_globals();var r=require_is_loopback_addr();function t(n){const{address:s}=n.nodeAddress();return r(s)}o.exports=t}}),require_nat_manager=__commonJS({"node_modules/libp2p/src/nat-manager.js"(e,o){init_node_globals();var r=require_nat_api(),t=require_browser2(),{promisify:n}=require_promisify(),{Multiaddr:s}=require_src(),u=Object.assign(t("libp2p:nat"),{error:t("libp2p:nat:err")}),{isBrowser:l}=require_src26(),f=require_p_retry(),a=require_private_ip(),c=require_package(),d=require_err_code(),{codes:{ERR_INVALID_PARAMETERS:h}}=require_errors4(),g=require_is_loopback(),p=7200;function _(v=1024,w=65535){return Math.floor(Math.random()*(w-v+1)+v)}var m=class{constructor(T){var R=T,{peerId:v,addressManager:w,transportManager:y}=R,b=Dt(R,["peerId","addressManager","transportManager"]);if(this._peerId=v,this._addressManager=w,this._transportManager=y,this._enabled=b.enabled,this._externalIp=b.externalIp,this._options={description:b.description||`${c.name}@${c.version} ${this._peerId}`,ttl:b.ttl||p,autoUpdate:b.keepAlive||!0,gateway:b.gateway,enablePMP:Boolean(b.pmp&&b.pmp.enabled)},this._options.ttl<p)throw d(new Error(`NatManager ttl should be at least ${p} seconds`),h)}start(){l||!this._enabled||this._start().catch(v=>{u.error(v)})}async _start(){const v=this._transportManager.getAddrs();for(const w of v){const{family:y,host:b,port:T,transport:R}=w.toOptions();if(!w.isThinWaistAddress()||R!=="tcp"||g(w)||y!==4)continue;const S=this._getClient(),E=this._externalIp||await S.externalIp();if(a(E))throw new Error(`${E} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const A=_();u(`opening uPnP connection from ${E}:${A} to ${b}:${T}`),await S.map({publicPort:A,privatePort:T,protocol:R.toUpperCase()}),this._addressManager.addObservedAddr(s.fromNodeAddress({family:4,address:E,port:A},R))}}_getClient(){if(this._client)return this._client;const v=new r(this._options),w=n(v.map.bind(v)),y=n(v.destroy.bind(v)),b=n(v.externalIp.bind(v));return this._client={map:(...T)=>f(()=>w(...T),{onFailedAttempt:u.error,unref:!0}),destroy:(...T)=>f(()=>y(...T),{onFailedAttempt:u.error,unref:!0}),externalIp:(...T)=>f(()=>b(...T),{onFailedAttempt:u.error,unref:!0})},this._client}async stop(){if(!(l||!this._client))try{await this._client.destroy(),this._client=null}catch(v){u.error(v)}}};o.exports=m}}),require_src27=__commonJS({"node_modules/libp2p/src/index.js"(e,o){init_node_globals();var r=require_browser2(),t=Object.assign(r("libp2p"),{error:r("libp2p:err")}),{EventEmitter:n}=require_events(),s=require_err_code(),u=require_src5(),{Multiaddr:l}=require_src(),{MemoryDatastore:f}=(init_memory(),__toCommonJS(memory_exports)),a=require_peer_routing2(),c=require_content_routing2(),d=require_get_peer(),{validate:h}=require_config3(),{codes:g,messages:p}=require_errors4(),_=require_address_manager(),m=require_connection_manager(),v=require_auto_dialler(),w=require_transport2(),y=require_circuit(),b=require_dialer(),T=require_keychain(),R=require_metrics(),S=require_transport_manager(),E=require_upgrader(),A=require_peer_store(),C=require_pubsub_adapter(),I=require_registrar(),P=require_identify(),O=require_fetch2(),k=require_ping2(),N=require_nat_manager(),{updateSelfPeerRecord:K}=require_utils16(),U=class extends n{static async create(L){if(L.peerId)return new U(L);const re=await u.create();return L.peerId=re,new U(L)}constructor(L){super();if(this._options=h(L),this.peerId=this._options.peerId,this.datastore=this._options.datastore,this._options.metrics.enabled){const Z=new R(Re({},this._options.metrics));this.metrics=Z}if(this.connectionGater=Re({denyDialPeer:async()=>Promise.resolve(!1),denyDialMultiaddr:async()=>Promise.resolve(!1),denyInboundConnection:async()=>Promise.resolve(!1),denyOutboundConnection:async()=>Promise.resolve(!1),denyInboundEncryptedConnection:async()=>Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>Promise.resolve(!1),denyInboundUpgradedConnection:async()=>Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>Promise.resolve(!1),filterMultiaddrForPeer:async()=>Promise.resolve(!0)},this._options.connectionGater),this.peerStore=new A({peerId:this.peerId,datastore:this.datastore&&this._options.peerStore.persistence?this.datastore:new f,addressFilter:this.connectionGater.filterMultiaddrForPeer}),this.addresses=this._options.addresses,this.addressManager=new _(this.peerId,this._options.addresses),this.addressManager.on("change:addresses",()=>{K(this).catch(Z=>{t.error("Error updating self peer record",Z)})}),this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=new Map,this.connectionManager=new m(this,Re({},this._options.connectionManager)),this._autodialler=new v(this,{enabled:this._config.peerDiscovery.autoDial,minConnections:this._options.connectionManager.minConnections,autoDialInterval:this._options.connectionManager.autoDialInterval}),this._options.keychain&&this._options.keychain.datastore){t("creating keychain");const Z=T.generateOptions();this.keychain=new T(this._options.keychain.datastore,Re(Re({},Z),this._options.keychain)),t("keychain constructed")}if(this.upgrader=new E({connectionGater:this.connectionGater,localPeer:this.peerId,metrics:this.metrics,onConnection:Z=>this.connectionManager.onConnect(Z),onConnectionEnd:Z=>this.connectionManager.onDisconnect(Z)}),this.transportManager=new S({libp2p:this,upgrader:this.upgrader,faultTolerance:this._options.transportManager.faultTolerance}),this.natManager=new N(Re({peerId:this.peerId,addressManager:this.addressManager,transportManager:this.transportManager},this._options.config.nat)),this.registrar=new I({peerStore:this.peerStore,connectionManager:this.connectionManager}),this.handle=this.handle.bind(this),this.registrar.handle=this.handle,!this._modules.connEncryption||!this._modules.connEncryption.length)throw s(new Error(p.CONN_ENCRYPTION_REQUIRED),g.CONN_ENCRYPTION_REQUIRED);if(this._modules.connEncryption.forEach(Z=>{this.upgrader.cryptos.set(Z.protocol,Z)}),this.dialer=new b(Re({transportManager:this.transportManager,connectionGater:this.connectionGater,peerStore:this.peerStore,metrics:this.metrics},this._options.dialer)),this._modules.transport.forEach(Z=>{const V=Z.prototype[Symbol.toStringTag],ee=this._config.transport[V];this.transportManager.add(V,Z,ee)}),this._config.relay.enabled&&(this.transportManager.add(w.prototype[Symbol.toStringTag],w),this.relay=new y(this)),this._modules.streamMuxer&&(this._modules.streamMuxer.forEach(V=>{this.upgrader.muxers.set(V.multicodec,V)}),this.identifyService=new P({libp2p:this})),this._modules.connProtector)this.upgrader.protector=this._modules.connProtector;else if(globalThis.process!==void 0&&globalThis.process.env&&{}.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._modules.dht){const Z=this._modules.dht;this._dht=Z.create(Re({libp2p:this},this._config.dht))}if(this._modules.pubsub){const Z=this._modules.pubsub;this.pubsub=C(Z,this,this._config.pubsub)}this.peerRouting=new a(this),this.contentRouting=new c(this),this._onDiscoveryPeer=this._onDiscoveryPeer.bind(this),this.fetchService=new O(this),this.pingService=new k(this)}emit(L,...re){return L==="error"&&!this._events.error?(t.error(re),!1):super.emit(L,...re)}async start(){t("libp2p is starting"),this.identifyService&&await this.handle(Object.values(P.getProtocolStr(this)),this.identifyService.handleMessage),this.fetchService&&await this.handle(O.PROTOCOL,this.fetchService.handleMessage),this.pingService&&await this.handle(k.getProtocolStr(this),this.pingService.handleMessage);try{await this._onStarting(),await this._onDidStart(),t("libp2p has started")}catch(L){throw this.emit("error",L),t.error("An error occurred starting libp2p",L),await this.stop(),L}}async stop(){t("libp2p is stopping");try{this._isStarted=!1,this.identifyService&&await this.identifyService.stop(),this.relay&&this.relay.stop(),this.peerRouting.stop(),await this._autodialler.stop(),await(this._dht&&this._dht.stop());for(const L of this._discovery.values())L.removeListener("peer",this._onDiscoveryPeer);await Promise.all(Array.from(this._discovery.values(),L=>L.stop())),this._discovery=new Map,await this.connectionManager.stop(),await Promise.all([this.pubsub&&this.pubsub.stop(),this.metrics&&this.metrics.stop()]),await this.natManager.stop(),await this.transportManager.close(),await this.unhandle(O.PROTOCOL),await this.unhandle(k.getProtocolStr(this)),this.dialer.destroy()}catch(L){L&&(t.error(L),this.emit("error",L))}t("libp2p has stopped")}async loadKeychain(){if(!!this.keychain)try{await this.keychain.findKeyByName("self")}catch{await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this._isStarted}get connections(){return this.connectionManager.connections}dial(L,re){return this._dial(L,re)}async dialProtocol(L,re,Z){if(!re||!re.length)throw s(new Error("no protocols were provided to open a stream"),g.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this._dial(L,Z)).newStream(re)}async _dial(L,re){const{id:Z,multiaddrs:V}=d(L);if(Z.equals(this.peerId))throw s(new Error("Cannot dial self"),g.ERR_DIALED_SELF);let ee=this.connectionManager.get(Z);return ee?V&&await this.peerStore.addressBook.add(Z,V):ee=await this.dialer.connectToPeer(L,re),ee}get multiaddrs(){let L=this.addressManager.getAnnounceAddrs().map(V=>V.toString());L.length||(L=this.transportManager.getAddrs().map(V=>V.toString())),L=L.concat(this.addressManager.getObservedAddrs().map(V=>V.toString()));const re=this._options.addresses.announceFilter,Z=new Set(L);return re(Array.from(Z).map(V=>new l(V)))}async hangUp(L){const{id:re}=d(L),Z=this.connectionManager.connections.get(re.toB58String());!Z||await Promise.all(Z.map(V=>V.close()))}fetch(L,re){return this.fetchService.fetch(L,re)}ping(L){const{id:re,multiaddrs:Z}=d(L);return Z?this.pingService.ping(Z[0]):this.pingService.ping(re)}async handle(L,re){L=Array.isArray(L)?L:[L],L.forEach(Z=>{this.upgrader.protocols.set(Z,re)}),await this.peerStore.protoBook.add(this.peerId,L)}async unhandle(L){L=Array.isArray(L)?L:[L],L.forEach(re=>{this.upgrader.protocols.delete(re)}),await this.peerStore.protoBook.remove(this.peerId,L)}async _onStarting(){const L=this.addressManager.getListenAddrs();await this.transportManager.listen(L),this.natManager.start(),this._config.pubsub.enabled&&this.pubsub&&await this.pubsub.start(),this._config.dht.enabled&&(this._dht&&await this._dht.start(),this._dht.on("peer",this._onDiscoveryPeer)),this.metrics&&this.metrics.start(),this.identifyService&&await this.identifyService.start()}async _onDidStart(){this._isStarted=!0,this.peerStore.on("peer",L=>{this.emit("peer:discovery",L),this._maybeConnect(L).catch(re=>{t.error(re)})});for await(const L of this.peerStore.getPeers())this.emit("peer:discovery",L.id);this.connectionManager.start(),await this._autodialler.start(),await this._setupPeerDiscovery(),this.relay&&this.relay.start(),this.peerRouting.start()}_onDiscoveryPeer(L){if(L.id.toB58String()===this.peerId.toB58String()){t.error(new Error(g.ERR_DISCOVERED_SELF));return}L.multiaddrs&&this.peerStore.addressBook.add(L.id,L.multiaddrs).catch(re=>t.error(re)),L.protocols&&this.peerStore.protoBook.set(L.id,L.protocols).catch(re=>t.error(re))}async _maybeConnect(L){if(this._config.peerDiscovery.autoDial===!0&&!this.connectionManager.get(L)&&(this._options.connectionManager.minConnections||0)>this.connectionManager.size){t("connecting to discovered peer %s",L.toB58String());try{await this.dialer.connectToPeer(L)}catch(Z){t.error(`could not connect to discovered peer ${L.toB58String()} with ${Z}`)}}}async _setupPeerDiscovery(){const L=re=>{let Z={enabled:!0};if(re.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[re.tag]&&(Z=Re(Re({},Z),this._config.peerDiscovery[re.tag])),Z.enabled&&!this._discovery.has(re.tag)){let V;typeof re=="function"?V=new re(Object.assign({},Z,{peerId:this.peerId,libp2p:this})):V=re,V.on("peer",this._onDiscoveryPeer),this._discovery.set(re.tag,V)}};for(const re of this._modules.peerDiscovery||[])L(re);for(const re of this.transportManager.getTransports())re.discovery&&L(re.discovery);await Promise.all(Array.from(this._discovery.values(),re=>re.start()))}};o.exports=U}}),require_libp2p=__commonJS({"node_modules/ipfs-core/cjs/src/components/libp2p.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_dlv_umd(),r=require_merge_options(),t=require_err_code(),n=(init_libp2p_pubsub_routers_browser(),__toCommonJS(libp2p_pubsub_routers_browser_exports)),s=require_src13(),u=require_src14(),l=(init_src14(),__toCommonJS(src_exports9)),f=require_src(),a=require_version(),c=(init_libp2p_browser(),__toCommonJS(libp2p_browser_exports)),d=require_src22(),h=require_src27(),g=(init_src4(),__toCommonJS(src_exports3));function p(I){return I&&typeof I=="object"&&"default"in I?I:{default:I}}function _(I){if(I&&I.__esModule)return I;var P=Object.create(null);return I&&Object.keys(I).forEach(function(O){if(O!=="default"){var k=Object.getOwnPropertyDescriptor(I,O);Object.defineProperty(P,O,k.get?k:{enumerable:!0,get:function(){return I[O]}})}}),P.default=I,Object.freeze(P)}var m=p(o),v=p(r),w=p(t),y=p(s),b=p(u),T=p(d),R=p(h),S=_(g),E=v.default.bind({ignoreUndefined:!0});function A({options:I={},peerId:P,multiaddrs:O=[],repo:k,keychainConfig:N={},config:K={}}){const{datastore:U,keys:L}=k,re=C({options:I,config:K,datastore:U,keys:L,keychainConfig:N,peerId:P,multiaddrs:O});return typeof I.libp2p=="function"?I.libp2p({libp2pOptions:re,options:I,config:K,datastore:U,peerId:P}):R.default.create(re)}function C({options:I,config:P,datastore:O,keys:k,keychainConfig:N,peerId:K,multiaddrs:U}){const L=()=>{const ce=m.default(P,"Pubsub.Router")||"gossipsub";if(!n.routers[ce])throw w.default(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${ce} router.`),"ERR_NOT_SUPPORTED");return n.routers[ce]},re={datastore:O,peerId:K,modules:{}},Z={modules:{pubsub:L(),contentRouting:[],peerRouting:[]},config:{peerDiscovery:{mdns:{enabled:m.default(I,"config.Discovery.MDNS.Enabled",m.default(P,"Discovery.MDNS.Enabled",!0))},webRTCStar:{enabled:m.default(I,"config.Discovery.webRTCStar.Enabled",m.default(P,"Discovery.webRTCStar.Enabled",!0))},bootstrap:{list:m.default(I,"config.Bootstrap",m.default(P,"Bootstrap",[]))}},relay:{enabled:m.default(I,"relay.enabled",m.default(P,"relay.enabled",!0)),hop:{enabled:m.default(I,"relay.hop.enabled",m.default(P,"relay.hop.enabled",!1)),active:m.default(I,"relay.hop.active",m.default(P,"relay.hop.active",!1))}},dht:{enabled:m.default(P,"Routing.Type","dhtclient")!=="none",clientMode:m.default(P,"Routing.Type","dht")!=="dhtserver",kBucketSize:m.default(I,"dht.kBucketSize",20),validators:{ipns:S.validator}},pubsub:{enabled:m.default(I,"config.Pubsub.Enabled",m.default(P,"Pubsub.Enabled",!0))},nat:{enabled:!m.default(P,"Swarm.DisableNatPortMap",!1)}},addresses:{listen:U.map(ce=>ce.toString()),announce:m.default(I,"addresses.announce",m.default(P,"Addresses.Announce",[])),noAnnounce:m.default(I,"addresses.noAnnounce",m.default(P,"Addresses.NoAnnounce",[]))},connectionManager:m.default(I,"connectionManager",{maxConnections:m.default(I,"config.Swarm.ConnMgr.HighWater",m.default(P,"Swarm.ConnMgr.HighWater")),minConnections:m.default(I,"config.Swarm.ConnMgr.LowWater",m.default(P,"Swarm.ConnMgr.LowWater"))}),keychain:Re({datastore:k},N),host:{agentVersion:`js-ipfs/${a.ipfsCore}`}};let V=m.default(I,"libp2p",void 0);typeof V=="function"&&(V=void 0);const ee=E(re,c.libp2pConfig(),Z,V);m.default(ee,"config.peerDiscovery.bootstrap.list",[]).length>0&&ee.modules.peerDiscovery.push(T.default);const _e=m.default(I,"config.Addresses.Delegates",m.default(P,"Addresses.Delegates",[]));if(_e.length>0){const ce=_e[Math.floor(Math.random()*_e.length)],Ee=new f.Multiaddr(ce).toOptions(),Ie={host:Ee.host,protocol:parseInt(Ee.port)===443?"https":"http",port:Ee.port},ue=l.create(Ie);Z.modules.contentRouting=Z.modules.contentRouting||[],Z.modules.contentRouting.push(new b.default(K,ue)),Z.modules.peerRouting=Z.modules.peerRouting||[],Z.modules.peerRouting.push(new y.default(ue))}return ee}e.createLibp2p=A}}),require_storage=__commonJS({"node_modules/ipfs-core/cjs/src/components/storage.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_browser2(),r=(init_repo_browser(),__toCommonJS(repo_browser_exports)),t=(init_config_browser(),__toCommonJS(config_browser_exports)),n=(init_from_string(),__toCommonJS(from_string_exports)),s=(init_to_string(),__toCommonJS(to_string_exports)),u=require_src5(),l=require_merge_options(),f=require_profiles(),a=require_errors(),c=require_libp2p(),d=(init_errors5(),__toCommonJS(errors_exports4));function h(P){return P&&typeof P=="object"&&"default"in P?P:{default:P}}var g=h(o),p=h(t),_=h(u),m=h(l),v=m.default.bind({ignoreUndefined:!0}),w=g.default("ipfs:components:peer:storage"),y=class{constructor(P,O,k,N,K){this.print=N,this.peerId=P,this.keychain=O,this.repo=k,this.print=N,this.isNew=K}static async start(P,O,k){const{repoAutoMigrate:N,repo:K,onMigrationProgress:U}=k,L=typeof K=="string"||K==null?r.createRepo(P,O,{path:K,autoMigrate:N,onMigrationProgress:U}):K,{peerId:re,keychain:Z,isNew:V}=await b(P,L,k);return new y(re,Z,L,P,V)}},b=async(P,O,k)=>{if(!O.closed)return $e(Re({},await A(O,k)),{isNew:!1});try{return await O.open(),$e(Re({},await A(O,k)),{isNew:!1})}catch(N){if(N.code!==d.ERR_REPO_NOT_INITIALIZED)throw N;if(k.init&&k.init.allowNew===!1)throw new a.NotEnabledError("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return $e(Re({},await T(P,O,k)),{isNew:!0})}},T=async(P,O,k)=>{const N=k.init||{},K=await O.exists();if(w("repo exists?",K),K===!0)throw new Error("repo already exists");const U=N.privateKey?await R(N.privateKey):await S(P,N),L=E(U);w("peer identity: %s",L.PeerID);const re=$e(Re({},v(I(p.default(),N.profiles),k.config)),{Identity:L});await O.init(re),await O.open(),w("repo opened");const Z={pass:k.pass};try{Z.dek=await O.config.get("Keychain.DEK")}catch(ee){if(ee.code!=="ERR_NOT_FOUND")throw ee}const V=await c.createLibp2p({options:void 0,multiaddrs:void 0,peerId:U,repo:O,config:re,keychainConfig:Z});return V.keychain&&V.keychain.opts&&(await V.loadKeychain(),await O.config.set("Keychain",{DEK:V.keychain.opts.dek})),{peerId:U,keychain:V.keychain}},R=P=>(w("using user-supplied private-key"),typeof P=="object"?P:_.default.createFromPrivKey(n.fromString(P,"base64pad"))),S=(P,{algorithm:O="Ed25519",bits:k=2048})=>(P("generating %s keypair...",O),_.default.create({keyType:O,bits:k})),E=P=>({PeerID:P.toB58String(),PrivKey:s.toString(P.privKey.bytes,"base64pad")}),A=async(P,O)=>{const k=O.config,N=O.init&&O.init.profiles||[],K=O.pass,U=await P.config.getAll(),L=C(I(U,N),k);if(U!==L&&await P.config.replace(L),!L.Identity||!L.Identity.PrivKey)throw new a.NotInitializedError("No private key was found in the config, please intialize the repo");const re=await _.default.createFromPrivKey(L.Identity.PrivKey),Z=await c.createLibp2p({options:void 0,multiaddrs:void 0,peerId:re,repo:P,config:L,keychainConfig:Re({pass:K},L.Keychain)});return Z.keychain&&await Z.loadKeychain(),{peerId:re,keychain:Z.keychain}},C=(P,O)=>O?v(P,O):P,I=(P,O)=>(O||[]).reduce((k,N)=>{const K=f.profiles[N];if(!K)throw new Error(`Could not find profile with name '${N}'`);return w("applying profile %s",N),K.transform(k)},P);e.Storage=y}}),require_encode3=__commonJS({"node_modules/varint-decoder/node_modules/varint/encode.js"(e,o){init_node_globals(),o.exports=u;var r=128,t=127,n=~t,s=Math.pow(2,31);function u(l,f,a){f=f||[],a=a||0;for(var c=a;l>=s;)f[a++]=l&255|r,l/=128;for(;l&n;)f[a++]=l&255|r,l>>>=7;return f[a]=l|0,u.bytes=a-c+1,f}}}),require_decode4=__commonJS({"node_modules/varint-decoder/node_modules/varint/decode.js"(e,o){init_node_globals(),o.exports=n;var r=128,t=127;function n(s,u){var l=0,u=u||0,f=0,a=u,c,d=s.length;do{if(a>=d)throw n.bytes=0,new RangeError("Could not decode varint");c=s[a++],l+=f<28?(c&t)<<f:(c&t)*Math.pow(2,f),f+=7}while(c>=r);return n.bytes=a-u,l}}}),require_length2=__commonJS({"node_modules/varint-decoder/node_modules/varint/length.js"(e,o){init_node_globals();var r=Math.pow(2,7),t=Math.pow(2,14),n=Math.pow(2,21),s=Math.pow(2,28),u=Math.pow(2,35),l=Math.pow(2,42),f=Math.pow(2,49),a=Math.pow(2,56),c=Math.pow(2,63);o.exports=function(d){return d<r?1:d<t?2:d<n?3:d<s?4:d<u?5:d<l?6:d<f?7:d<a?8:d<c?9:10}}}),require_varint2=__commonJS({"node_modules/varint-decoder/node_modules/varint/index.js"(e,o){init_node_globals(),o.exports={encode:require_encode3(),decode:require_decode4(),encodingLength:require_length2()}}}),require_src28=__commonJS({"node_modules/varint-decoder/src/index.js"(e,o){init_node_globals();var r=require_varint2();o.exports=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const n=[];for(;t.length>0;){const s=r.decode(t);n.push(s),t=t.slice(r.decode.bytes)}return n}}});function varintEncoder(e){let o=new Uint8Array(e.reduce((t,n)=>t+varint5.default.encodingLength(n),0)),r=0;for(const t of e)o=varint5.encode(t,o,r),r+=varint5.default.encodingLength(t);return o}var varint5,varint_encoder_default,init_varint_encoder=__esm({"node_modules/ipfs-bitswap/esm/src/utils/varint-encoder.js"(){init_node_globals(),varint5=__toESM(require_varint(),1),varint_encoder_default=varintEncoder}}),WantListEntry,init_entry=__esm({"node_modules/ipfs-bitswap/esm/src/wantlist/entry.js"(){init_node_globals(),init_base58(),WantListEntry=class{constructor(e,o,r){this._refCounter=1,this.cid=e,this.priority=o||1,this.wantType=r}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(base58btc)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}}}),import_minimal10,$Reader9,$Writer9,$util9,$root9,Message,init_message=__esm({"node_modules/ipfs-bitswap/esm/src/message/message.js"(){init_node_globals(),import_minimal10=__toESM(require_minimal2(),1),$Reader9=import_minimal10.default.Reader,$Writer9=import_minimal10.default.Writer,$util9=import_minimal10.default.util,$root9=import_minimal10.default.roots["ipfs-bitswap"]||(import_minimal10.default.roots["ipfs-bitswap"]={}),Message=$root9.Message=(()=>{function e(o){if(this.blocks=[],this.payload=[],this.blockPresences=[],o)for(var r=Object.keys(o),t=0;t<r.length;++t)o[r[t]]!=null&&(this[r[t]]=o[r[t]])}return e.prototype.wantlist=null,e.prototype.blocks=$util9.emptyArray,e.prototype.payload=$util9.emptyArray,e.prototype.blockPresences=$util9.emptyArray,e.prototype.pendingBytes=0,e.encode=function(r,t){if(t||(t=$Writer9.create()),r.wantlist!=null&&Object.hasOwnProperty.call(r,"wantlist")&&$root9.Message.Wantlist.encode(r.wantlist,t.uint32(10).fork()).ldelim(),r.blocks!=null&&r.blocks.length)for(var n=0;n<r.blocks.length;++n)t.uint32(18).bytes(r.blocks[n]);if(r.payload!=null&&r.payload.length)for(var n=0;n<r.payload.length;++n)$root9.Message.Block.encode(r.payload[n],t.uint32(26).fork()).ldelim();if(r.blockPresences!=null&&r.blockPresences.length)for(var n=0;n<r.blockPresences.length;++n)$root9.Message.BlockPresence.encode(r.blockPresences[n],t.uint32(34).fork()).ldelim();return r.pendingBytes!=null&&Object.hasOwnProperty.call(r,"pendingBytes")&&t.uint32(40).int32(r.pendingBytes),t},e.decode=function(r,t){r instanceof $Reader9||(r=$Reader9.create(r));for(var n=t===void 0?r.len:r.pos+t,s=new $root9.Message;r.pos<n;){var u=r.uint32();switch(u>>>3){case 1:s.wantlist=$root9.Message.Wantlist.decode(r,r.uint32());break;case 2:s.blocks&&s.blocks.length||(s.blocks=[]),s.blocks.push(r.bytes());break;case 3:s.payload&&s.payload.length||(s.payload=[]),s.payload.push($root9.Message.Block.decode(r,r.uint32()));break;case 4:s.blockPresences&&s.blockPresences.length||(s.blockPresences=[]),s.blockPresences.push($root9.Message.BlockPresence.decode(r,r.uint32()));break;case 5:s.pendingBytes=r.int32();break;default:r.skipType(u&7);break}}return s},e.fromObject=function(r){if(r instanceof $root9.Message)return r;var t=new $root9.Message;if(r.wantlist!=null){if(typeof r.wantlist!="object")throw TypeError(".Message.wantlist: object expected");t.wantlist=$root9.Message.Wantlist.fromObject(r.wantlist)}if(r.blocks){if(!Array.isArray(r.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var n=0;n<r.blocks.length;++n)typeof r.blocks[n]=="string"?$util9.base64.decode(r.blocks[n],t.blocks[n]=$util9.newBuffer($util9.base64.length(r.blocks[n])),0):r.blocks[n].length&&(t.blocks[n]=r.blocks[n])}if(r.payload){if(!Array.isArray(r.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(var n=0;n<r.payload.length;++n){if(typeof r.payload[n]!="object")throw TypeError(".Message.payload: object expected");t.payload[n]=$root9.Message.Block.fromObject(r.payload[n])}}if(r.blockPresences){if(!Array.isArray(r.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(var n=0;n<r.blockPresences.length;++n){if(typeof r.blockPresences[n]!="object")throw TypeError(".Message.blockPresences: object expected");t.blockPresences[n]=$root9.Message.BlockPresence.fromObject(r.blockPresences[n])}}return r.pendingBytes!=null&&(t.pendingBytes=r.pendingBytes|0),t},e.toObject=function(r,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.blocks=[],n.payload=[],n.blockPresences=[]),t.defaults&&(n.wantlist=null,n.pendingBytes=0),r.wantlist!=null&&r.hasOwnProperty("wantlist")&&(n.wantlist=$root9.Message.Wantlist.toObject(r.wantlist,t)),r.blocks&&r.blocks.length){n.blocks=[];for(var s=0;s<r.blocks.length;++s)n.blocks[s]=t.bytes===String?$util9.base64.encode(r.blocks[s],0,r.blocks[s].length):t.bytes===Array?Array.prototype.slice.call(r.blocks[s]):r.blocks[s]}if(r.payload&&r.payload.length){n.payload=[];for(var s=0;s<r.payload.length;++s)n.payload[s]=$root9.Message.Block.toObject(r.payload[s],t)}if(r.blockPresences&&r.blockPresences.length){n.blockPresences=[];for(var s=0;s<r.blockPresences.length;++s)n.blockPresences[s]=$root9.Message.BlockPresence.toObject(r.blockPresences[s],t)}return r.pendingBytes!=null&&r.hasOwnProperty("pendingBytes")&&(n.pendingBytes=r.pendingBytes),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal10.default.util.toJSONOptions)},e.Wantlist=function(){function o(r){if(this.entries=[],r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return o.prototype.entries=$util9.emptyArray,o.prototype.full=!1,o.encode=function(t,n){if(n||(n=$Writer9.create()),t.entries!=null&&t.entries.length)for(var s=0;s<t.entries.length;++s)$root9.Message.Wantlist.Entry.encode(t.entries[s],n.uint32(10).fork()).ldelim();return t.full!=null&&Object.hasOwnProperty.call(t,"full")&&n.uint32(16).bool(t.full),n},o.decode=function(t,n){t instanceof $Reader9||(t=$Reader9.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root9.Message.Wantlist;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.entries&&u.entries.length||(u.entries=[]),u.entries.push($root9.Message.Wantlist.Entry.decode(t,t.uint32()));break;case 2:u.full=t.bool();break;default:t.skipType(l&7);break}}return u},o.fromObject=function(t){if(t instanceof $root9.Message.Wantlist)return t;var n=new $root9.Message.Wantlist;if(t.entries){if(!Array.isArray(t.entries))throw TypeError(".Message.Wantlist.entries: array expected");n.entries=[];for(var s=0;s<t.entries.length;++s){if(typeof t.entries[s]!="object")throw TypeError(".Message.Wantlist.entries: object expected");n.entries[s]=$root9.Message.Wantlist.Entry.fromObject(t.entries[s])}}return t.full!=null&&(n.full=Boolean(t.full)),n},o.toObject=function(t,n){n||(n={});var s={};if((n.arrays||n.defaults)&&(s.entries=[]),n.defaults&&(s.full=!1),t.entries&&t.entries.length){s.entries=[];for(var u=0;u<t.entries.length;++u)s.entries[u]=$root9.Message.Wantlist.Entry.toObject(t.entries[u],n)}return t.full!=null&&t.hasOwnProperty("full")&&(s.full=t.full),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal10.default.util.toJSONOptions)},o.WantType=function(){const r={},t=Object.create(r);return t[r[0]="Block"]=0,t[r[1]="Have"]=1,t}(),o.Entry=function(){function r(t){if(t)for(var n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}return r.prototype.block=$util9.newBuffer([]),r.prototype.priority=0,r.prototype.cancel=!1,r.prototype.wantType=0,r.prototype.sendDontHave=!1,r.encode=function(n,s){return s||(s=$Writer9.create()),n.block!=null&&Object.hasOwnProperty.call(n,"block")&&s.uint32(10).bytes(n.block),n.priority!=null&&Object.hasOwnProperty.call(n,"priority")&&s.uint32(16).int32(n.priority),n.cancel!=null&&Object.hasOwnProperty.call(n,"cancel")&&s.uint32(24).bool(n.cancel),n.wantType!=null&&Object.hasOwnProperty.call(n,"wantType")&&s.uint32(32).int32(n.wantType),n.sendDontHave!=null&&Object.hasOwnProperty.call(n,"sendDontHave")&&s.uint32(40).bool(n.sendDontHave),s},r.decode=function(n,s){n instanceof $Reader9||(n=$Reader9.create(n));for(var u=s===void 0?n.len:n.pos+s,l=new $root9.Message.Wantlist.Entry;n.pos<u;){var f=n.uint32();switch(f>>>3){case 1:l.block=n.bytes();break;case 2:l.priority=n.int32();break;case 3:l.cancel=n.bool();break;case 4:l.wantType=n.int32();break;case 5:l.sendDontHave=n.bool();break;default:n.skipType(f&7);break}}return l},r.fromObject=function(n){if(n instanceof $root9.Message.Wantlist.Entry)return n;var s=new $root9.Message.Wantlist.Entry;switch(n.block!=null&&(typeof n.block=="string"?$util9.base64.decode(n.block,s.block=$util9.newBuffer($util9.base64.length(n.block)),0):n.block.length&&(s.block=n.block)),n.priority!=null&&(s.priority=n.priority|0),n.cancel!=null&&(s.cancel=Boolean(n.cancel)),n.wantType){case"Block":case 0:s.wantType=0;break;case"Have":case 1:s.wantType=1;break}return n.sendDontHave!=null&&(s.sendDontHave=Boolean(n.sendDontHave)),s},r.toObject=function(n,s){s||(s={});var u={};return s.defaults&&(s.bytes===String?u.block="":(u.block=[],s.bytes!==Array&&(u.block=$util9.newBuffer(u.block))),u.priority=0,u.cancel=!1,u.wantType=s.enums===String?"Block":0,u.sendDontHave=!1),n.block!=null&&n.hasOwnProperty("block")&&(u.block=s.bytes===String?$util9.base64.encode(n.block,0,n.block.length):s.bytes===Array?Array.prototype.slice.call(n.block):n.block),n.priority!=null&&n.hasOwnProperty("priority")&&(u.priority=n.priority),n.cancel!=null&&n.hasOwnProperty("cancel")&&(u.cancel=n.cancel),n.wantType!=null&&n.hasOwnProperty("wantType")&&(u.wantType=s.enums===String?$root9.Message.Wantlist.WantType[n.wantType]:n.wantType),n.sendDontHave!=null&&n.hasOwnProperty("sendDontHave")&&(u.sendDontHave=n.sendDontHave),u},r.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal10.default.util.toJSONOptions)},r}(),o}(),e.Block=function(){function o(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return o.prototype.prefix=$util9.newBuffer([]),o.prototype.data=$util9.newBuffer([]),o.encode=function(t,n){return n||(n=$Writer9.create()),t.prefix!=null&&Object.hasOwnProperty.call(t,"prefix")&&n.uint32(10).bytes(t.prefix),t.data!=null&&Object.hasOwnProperty.call(t,"data")&&n.uint32(18).bytes(t.data),n},o.decode=function(t,n){t instanceof $Reader9||(t=$Reader9.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root9.Message.Block;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.prefix=t.bytes();break;case 2:u.data=t.bytes();break;default:t.skipType(l&7);break}}return u},o.fromObject=function(t){if(t instanceof $root9.Message.Block)return t;var n=new $root9.Message.Block;return t.prefix!=null&&(typeof t.prefix=="string"?$util9.base64.decode(t.prefix,n.prefix=$util9.newBuffer($util9.base64.length(t.prefix)),0):t.prefix.length&&(n.prefix=t.prefix)),t.data!=null&&(typeof t.data=="string"?$util9.base64.decode(t.data,n.data=$util9.newBuffer($util9.base64.length(t.data)),0):t.data.length&&(n.data=t.data)),n},o.toObject=function(t,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.prefix="":(s.prefix=[],n.bytes!==Array&&(s.prefix=$util9.newBuffer(s.prefix))),n.bytes===String?s.data="":(s.data=[],n.bytes!==Array&&(s.data=$util9.newBuffer(s.data)))),t.prefix!=null&&t.hasOwnProperty("prefix")&&(s.prefix=n.bytes===String?$util9.base64.encode(t.prefix,0,t.prefix.length):n.bytes===Array?Array.prototype.slice.call(t.prefix):t.prefix),t.data!=null&&t.hasOwnProperty("data")&&(s.data=n.bytes===String?$util9.base64.encode(t.data,0,t.data.length):n.bytes===Array?Array.prototype.slice.call(t.data):t.data),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal10.default.util.toJSONOptions)},o}(),e.BlockPresenceType=function(){const o={},r=Object.create(o);return r[o[0]="Have"]=0,r[o[1]="DontHave"]=1,r}(),e.BlockPresence=function(){function o(r){if(r)for(var t=Object.keys(r),n=0;n<t.length;++n)r[t[n]]!=null&&(this[t[n]]=r[t[n]])}return o.prototype.cid=$util9.newBuffer([]),o.prototype.type=0,o.encode=function(t,n){return n||(n=$Writer9.create()),t.cid!=null&&Object.hasOwnProperty.call(t,"cid")&&n.uint32(10).bytes(t.cid),t.type!=null&&Object.hasOwnProperty.call(t,"type")&&n.uint32(16).int32(t.type),n},o.decode=function(t,n){t instanceof $Reader9||(t=$Reader9.create(t));for(var s=n===void 0?t.len:t.pos+n,u=new $root9.Message.BlockPresence;t.pos<s;){var l=t.uint32();switch(l>>>3){case 1:u.cid=t.bytes();break;case 2:u.type=t.int32();break;default:t.skipType(l&7);break}}return u},o.fromObject=function(t){if(t instanceof $root9.Message.BlockPresence)return t;var n=new $root9.Message.BlockPresence;switch(t.cid!=null&&(typeof t.cid=="string"?$util9.base64.decode(t.cid,n.cid=$util9.newBuffer($util9.base64.length(t.cid)),0):t.cid.length&&(n.cid=t.cid)),t.type){case"Have":case 0:n.type=0;break;case"DontHave":case 1:n.type=1;break}return n},o.toObject=function(t,n){n||(n={});var s={};return n.defaults&&(n.bytes===String?s.cid="":(s.cid=[],n.bytes!==Array&&(s.cid=$util9.newBuffer(s.cid))),s.type=n.enums===String?"Have":0),t.cid!=null&&t.hasOwnProperty("cid")&&(s.cid=n.bytes===String?$util9.base64.encode(t.cid,0,t.cid.length):n.bytes===Array?Array.prototype.slice.call(t.cid):t.cid),t.type!=null&&t.hasOwnProperty("type")&&(s.type=n.enums===String?$root9.Message.BlockPresenceType[t.type]:t.type),s},o.prototype.toJSON=function(){return this.constructor.toObject(this,import_minimal10.default.util.toJSONOptions)},o}(),e})()}}),import_tracked_map,WantType,sortBy,Wantlist,init_wantlist2=__esm({"node_modules/ipfs-bitswap/esm/src/wantlist/index.js"(){init_node_globals(),init_entry(),init_base58(),init_message(),import_tracked_map=__toESM(require_tracked_map(),1),WantType={Block:Message.Wantlist.WantType.Block,Have:Message.Wantlist.WantType.Have},sortBy=(e,o)=>Array.prototype.slice.call(o,0).sort((r,t)=>{const n=e(r),s=e(t);return n<s?-1:n>s?1:0}),Wantlist=class{constructor(e,o){this.set=o?(0,import_tracked_map.default)({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:o.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,o,r){const t=e.toString(base58btc),n=this.set.get(t);n?(n.inc(),n.priority=o,n.wantType===WantType.Have&&r===WantType.Block&&(n.wantType=r)):(this.set.set(t,new WantListEntry(e,o,r)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const o=e.toString(base58btc),r=this.set.get(o);!r||(r.dec(),!r.hasRefs()&&(this.set.delete(o),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(sortBy(e=>e[1].key,Array.from(this.set.entries())))}contains(e){const o=e.toString(base58btc);return this.set.has(o)}get(e){const o=e.toString(base58btc);return this.set.get(o)}},Wantlist.Entry=WantListEntry}}),WantlistEntry,BitswapMessageEntry,init_entry2=__esm({"node_modules/ipfs-bitswap/esm/src/message/entry.js"(){init_node_globals(),init_wantlist2(),init_base58(),WantlistEntry=Wantlist.Entry,BitswapMessageEntry=class{constructor(e,o,r,t,n){this.entry=new WantlistEntry(e,o,r),this.cancel=Boolean(t),this.sendDontHave=Boolean(n)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(base58btc)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}}}),import_debug16,logger,isMapEqual,init_utils9=__esm({"node_modules/ipfs-bitswap/esm/src/utils/index.js"(){init_node_globals(),import_debug16=__toESM(require_browser2(),1),init_equals(),init_entry2(),logger=(e,o)=>{const r=["bitswap"];return o&&r.push(o),e&&r.push(`${e.toB58String().slice(0,8)}`),Object.assign((0,import_debug16.default)(r.join(":")),{error:(0,import_debug16.default)(r.concat(["error"]).join(":"))})},isMapEqual=(e,o)=>{if(e.size!==o.size)return!1;for(const[r,t]of e){const n=o.get(r);if(n===void 0||t instanceof Uint8Array&&n instanceof Uint8Array&&!equals3(t,n)||t instanceof BitswapMessageEntry&&n instanceof BitswapMessageEntry&&!t.equals(n))return!1}return!0}}}),import_varint_decoder,import_err_code37,BitswapMessage,init_message2=__esm({"node_modules/ipfs-bitswap/esm/src/message/index.js"(){init_node_globals(),init_cid(),init_sha2_browser(),init_base58(),import_varint_decoder=__toESM(require_src28(),1),init_varint_encoder(),init_utils9(),init_message(),init_entry2(),import_err_code37=__toESM(require_err_code(),1),BitswapMessage=class{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return this.blocks.size===0&&this.wantlist.size===0&&this.blockPresences.size===0}addEntry(e,o,r,t,n){r==null&&(r=BitswapMessage.WantType.Block);const s=e.toString(base58btc),u=this.wantlist.get(s);u?(u.wantType===r&&(u.priority=o),t&&(u.cancel=Boolean(t)),n&&(u.sendDontHave=Boolean(n)),r===BitswapMessage.WantType.Block&&u.wantType===BitswapMessage.WantType.Have&&(u.wantType=r)):this.wantlist.set(s,new BitswapMessageEntry(e,o,r,t,n))}addBlock(e,o){const r=e.toString(base58btc);this.blocks.set(r,o)}addHave(e){const o=e.toString(base58btc);this.blockPresences.has(o)||this.blockPresences.set(o,BitswapMessage.BlockPresenceType.Have)}addDontHave(e){const o=e.toString(base58btc);this.blockPresences.has(o)||this.blockPresences.set(o,BitswapMessage.BlockPresenceType.DontHave)}cancel(e){const o=e.toString(base58btc);this.wantlist.delete(o),this.addEntry(e,0,BitswapMessage.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(o=>({block:o.cid.bytes,priority:Number(o.priority),cancel:Boolean(o.cancel)})),full:this.full?!0:void 0},blocks:Array.from(this.blocks.values())};return Message.encode(e).finish()}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map(o=>({block:o.cid.bytes,priority:Number(o.priority),wantType:o.wantType,cancel:Boolean(o.cancel),sendDontHave:Boolean(o.sendDontHave)})),full:this.full?!0:void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[o,r]of this.blocks.entries()){const t=CID.parse(o),n=t.version,s=t.code,u=t.multihash.code,l=t.multihash.digest.length,f=varint_encoder_default([n,s,u,l]);e.payload.push(new Message.Block({prefix:f,data:r}))}for(const[o,r]of this.blockPresences)e.blockPresences.push(new Message.BlockPresence({cid:CID.parse(o).bytes,type:r}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),Message.encode(e).finish()}equals(e){return!(this.full!==e.full||this.pendingBytes!==e.pendingBytes||!isMapEqual(this.wantlist,e.wantlist)||!isMapEqual(this.blocks,e.blocks)||!isMapEqual(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),o=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${o}>`}},BitswapMessage.deserialize=async(e,o)=>{const r=Message.decode(e),t=r.wantlist&&r.wantlist.full||!1,n=new BitswapMessage(t);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach(s=>{if(!s.block)return;const u=CID.decode(s.block);n.addEntry(u,s.priority||0,s.wantType,Boolean(s.cancel),Boolean(s.sendDontHave))}),r.blockPresences&&r.blockPresences.forEach(s=>{if(!s.cid)return;const u=CID.decode(s.cid);s.type===BitswapMessage.BlockPresenceType.Have?n.addHave(u):n.addDontHave(u)}),r.blocks.length>0?(await Promise.all(r.blocks.map(async s=>{const u=await sha256.digest(s),l=CID.createV0(u);n.addBlock(l,s)})),n):(r.payload.length>0&&(await Promise.all(r.payload.map(async s=>{if(!s.prefix||!s.data)return;const u=(0,import_varint_decoder.default)(s.prefix),l=u[0],f=u[1],a=u[2],c=a===sha256.code?sha256:o&&await o.getHasher(a);if(!c)throw(0,import_err_code37.default)(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");const d=await c.digest(s.data),h=CID.create(l,f,d);n.addBlock(h,s.data)})),n.setPendingBytes(r.pendingBytes)),n)},BitswapMessage.blockPresenceSize=e=>e.bytes.length+1,BitswapMessage.Entry=BitswapMessageEntry,BitswapMessage.WantType={Block:Message.Wantlist.WantType.Block,Have:Message.Wantlist.WantType.Have},BitswapMessage.BlockPresenceType={Have:Message.BlockPresenceType.Have,DontHave:Message.BlockPresenceType.DontHave}}}),SECOND,maxProvidersPerRequest,providerRequestTimeout,kMaxPriority,maxListeners,wantlistSendDebounceMs,init_constants2=__esm({"node_modules/ipfs-bitswap/esm/src/constants.js"(){init_node_globals(),SECOND=1e3,maxProvidersPerRequest=3,providerRequestTimeout=10*SECOND,kMaxPriority=Math.pow(2,31)-1,maxListeners=1e3,wantlistSendDebounceMs=1}}),require_just_debounce_it=__commonJS({"node_modules/just-debounce-it/index.js"(e,o){init_node_globals(),o.exports=r;function r(t,n,s){var u=null,l=null,f=function(){u&&(clearTimeout(u),l=null,u=null)},a=function(){var d=l;f(),d&&d()},c=function(){if(!n)return t.apply(this,arguments);var d=this,h=arguments,g=s&&!u;if(f(),l=function(){t.apply(d,h)},u=setTimeout(function(){if(u=null,!g){var p=l;return l=null,p()}},n),g)return l()};return c.cancel=f,c.flush=a,c}}}),import_just_debounce_it,MsgQueue,init_msg_queue=__esm({"node_modules/ipfs-bitswap/esm/src/want-manager/msg-queue.js"(){init_node_globals(),import_just_debounce_it=__toESM(require_just_debounce_it(),1),init_message2(),init_utils9(),init_constants2(),MsgQueue=class{constructor(e,o,r){this.peerId=o,this.network=r,this.refcnt=1,this._entries=[],this._log=logger(e,"msgqueue"),this.sendEntries=(0,import_just_debounce_it.default)(this._sendEntries.bind(this),wantlistSendDebounceMs)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new BitswapMessage(!1);this._entries.forEach(o=>{o.cancel?e.cancel(o.cid):e.addEntry(o.cid,o.priority)}),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(o){this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),o.message);return}this._log("sending message to peer %s",this.peerId.toB58String()),this.network.sendMessage(this.peerId,e).catch(o=>{this._log.error("send error: %s",o.message)})}}}}),import_tracked_map2,WantManager,init_want_manager=__esm({"node_modules/ipfs-bitswap/esm/src/want-manager/index.js"(){init_node_globals(),init_message2(),init_wantlist2(),init_constants2(),init_msg_queue(),init_utils9(),init_base58(),import_tracked_map2=__toESM(require_tracked_map(),1),WantManager=class{constructor(e,o,r,t){this.peers=(0,import_tracked_map2.default)({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:t.metrics}),this.wantlist=new Wantlist(r,t),this.network=o,this._stats=r,this._peerId=e,this._log=logger(e,"want")}_addEntries(e,o,r){const t=e.map((n,s)=>new BitswapMessage.Entry(n,kMaxPriority-s,BitswapMessage.WantType.Block,o));t.forEach(n=>{n.cancel?r?this.wantlist.removeForce(n.cid.toString(base58btc)):this.wantlist.remove(n.cid):(this._log("adding to wl"),this.wantlist.add(n.cid,n.priority))});for(const n of this.peers.values())n.addEntries(t)}_startPeerHandler(e){let o=this.peers.get(e.toB58String());if(o){o.refcnt++;return}o=new MsgQueue(this._peerId,e,this.network);const r=new BitswapMessage(!0);for(const t of this.wantlist.entries())r.addEntry(t[1].cid,t[1].priority);return o.addMessage(r),this.peers.set(e.toB58String(),o),o}_stopPeerHandler(e){const o=this.peers.get(e.toB58String());!o||(o.refcnt--,!(o.refcnt>0)&&this.peers.delete(e.toB58String()))}wantBlocks(e,o={}){this._addEntries(e,!1),o&&o.signal&&o.signal.addEventListener("abort",()=>{this.cancelWants(e)})}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach(e=>this.disconnected(e.peerId))}}}});async function writeMessage(e,o,r){try{await(0,import_it_pipe3.pipe)([o],import_it_length_prefixed.default.encode(),e)}catch(t){r(t)}}var import_it_length_prefixed,import_it_pipe3,import_multicodec_topology,BITSWAP100,BITSWAP110,BITSWAP120,Network,init_network=__esm({"node_modules/ipfs-bitswap/esm/src/network.js"(){init_node_globals(),import_it_length_prefixed=__toESM(require_src11(),1),import_it_pipe3=__toESM(require_it_pipe(),1),import_multicodec_topology=__toESM(require_multicodec_topology(),1),init_message2(),init_constants2(),init_utils9(),BITSWAP100="/ipfs/bitswap/1.0.0",BITSWAP110="/ipfs/bitswap/1.1.0",BITSWAP120="/ipfs/bitswap/1.2.0",Network=class{constructor(e,o,r,t={}){this._log=logger(e.peerId,"network"),this._libp2p=e,this._bitswap=o,this._protocols=[BITSWAP100],t.b100Only||(this._protocols.unshift(BITSWAP110),this._protocols.unshift(BITSWAP120)),this._stats=r,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=t.hashLoader}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection);const e=new import_multicodec_topology.default({multicodecs:this._protocols,handlers:{onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect}});this._registrarId=await this._libp2p.registrar.register(e);for await(const o of this._libp2p.peerStore.getPeers()){const r=this._libp2p.connectionManager.get(o.id);r&&this._onPeerConnect(r.remotePeer)}}async stop(){this._running=!1,await this._libp2p.unhandle(this._protocols),this._registrarId!=null&&this._libp2p.registrar.unregister(this._registrarId)}async _onConnection({protocol:e,stream:o,connection:r}){if(!!this._running){this._log("incoming new bitswap %s connection from %s",e,r.remotePeer.toB58String());try{await(0,import_it_pipe3.pipe)(o,import_it_length_prefixed.default.decode(),async t=>{for await(const n of t)try{const s=await BitswapMessage.deserialize(n.slice(),this._hashLoader);await this._bitswap._receiveMessage(r.remotePeer,s)}catch(s){this._bitswap._receiveError(s);break}})}catch(t){this._log(t)}}}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e,o,r={}){return this._libp2p.contentRouting.findProviders(e,{timeout:providerRequestTimeout,maxNumProviders:o})}async findAndConnect(e,o){const r=[];for await(const t of this.findProviders(e,maxProvidersPerRequest,o))this._log(`connecting to provider ${t.id}`),r.push(this.connectTo(t.id,o).catch(n=>{this._log.error(n)}));await Promise.all(r)}async provide(e,o){await this._libp2p.contentRouting.provide(e,o)}async sendMessage(e,o){if(!this._running)throw new Error("network isn't running");const r=e.toB58String();this._log("sendMessage to %s",r,o);const t=await this._libp2p.dial(e),{stream:n,protocol:s}=await t.newStream([BITSWAP120,BITSWAP110,BITSWAP100]);let u;switch(s){case BITSWAP100:u=o.serializeToBitswap100();break;case BITSWAP110:case BITSWAP120:u=o.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+s)}writeMessage(n,u,this._log),this._updateSentStats(e,o.blocks)}async connectTo(e,o){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,o)}_updateSentStats(e,o){const r=e.toB58String();if(this._stats){for(const t of o.values())this._stats.push(r,"dataSent",t.length);this._stats.push(r,"blocksSent",o.size)}}}}}),Ledger,init_ledger=__esm({"node_modules/ipfs-bitswap/esm/src/decision-engine/ledger.js"(){init_node_globals(),init_wantlist2(),Ledger=class{constructor(e){this.partner=e,this.wantlist=new Wantlist,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.accounting.bytesRecv+=e}wants(e,o,r){this.wantlist.add(e,o,r)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}}}),SortedMap,init_sorted_map=__esm({"node_modules/ipfs-bitswap/esm/src/utils/sorted-map.js"(){init_node_globals(),SortedMap=class extends Map{constructor(e,o){super();this._cmp=o||this._defaultSort,this._keys=[];for(const[r,t]of e||[])this.set(r,t)}update(e){if(e<0||e>=this._keys.length)return;const o=this._keys[e];this._keys.splice(e,1);const r=this._find(o);this._keys.splice(r,0,o)}set(e,o){if(this.has(e)){const t=this.indexOf(e);this._keys.splice(t,1)}super.set(e,o);const r=this._find(e);return this._keys.splice(r,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;const o=this.indexOf(e);return this._keys.splice(o,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;const o=this._find(e);if(this._keys[o]===e)return o;for(let r=1;r<this._keys.length;r++){if(this._keys[o+r]===e)return o+r;if(this._keys[o-r]===e)return o-r}return-1}_find(e){let o=0,r=this._keys.length;for(;o<r;){const t=o+r>>>1,n=this._kCmp(this._keys[t],e);if(n<0)o=t+1;else if(n>0)r=t;else return t}return o}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._keys)yield this.get(e)}*entries(){for(const e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,o){if(!!e)for(const r of this._keys)e.apply(o,[[r,this.get(r)]])}_defaultSort(e,o){return e[0]<o[0]?-1:o[0]<e[0]?1:0}_kCmp(e,o){return this._cmp([e,this.get(e)],[o,this.get(o)])}}}}),DefaultTaskMerger,RequestQueue,PeerTasks,PendingTasks,init_req_queue=__esm({"node_modules/ipfs-bitswap/esm/src/decision-engine/req-queue.js"(){init_node_globals(),init_sorted_map(),DefaultTaskMerger={hasNewInfo(){return!1},merge(){}},RequestQueue=class{constructor(e=DefaultTaskMerger){this._taskMerger=e,this._byPeer=new SortedMap([],PeerTasks.compare)}pushTasks(e,o){let r=this._byPeer.get(e.toB58String());r||(r=new PeerTasks(e,this._taskMerger)),r.pushTasks(o),this._byPeer.set(e.toB58String(),r)}popTasks(e){const o=this._head();if(o===void 0)return{tasks:[],pendingSize:0};const{tasks:r,pendingSize:t}=o.popTasks(e);if(r.length===0)return{tasks:r,pendingSize:t};const n=o.peerId;return o.isIdle()?this._byPeer.delete(n.toB58String()):this._byPeer.update(0),{peerId:n,tasks:r,pendingSize:t}}_head(){if(this._byPeer.size!==0)for(const[,e]of this._byPeer)return e}remove(e,o){const r=this._byPeer.get(o.toB58String());r&&r.remove(e)}tasksDone(e,o){const r=this._byPeer.get(e.toB58String());if(!r)return;const t=this._byPeer.indexOf(e.toB58String());for(const n of o)r.taskDone(n);this._byPeer.update(t)}},PeerTasks=class{constructor(e,o){this.peerId=e,this._taskMerger=o,this._activeTotalSize=0,this._pending=new PendingTasks,this._active=new Set}pushTasks(e){for(const o of e)this._pushTask(o)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;const o=this._pending.get(e.topic);if(o){e.priority>o.priority&&this._pending.updatePriority(e.topic,e.priority),this._taskMerger.merge(e,o);return}this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){const o=[];for(const r of this._active)r.topic===e.topic&&o.push(r);return o.length===0?!0:this._taskMerger.hasNewInfo(e,o)}popTasks(e){let o=0;const r=[],t=this._pending.tasks();for(let n=0;n<t.length&&o<e;n++){const s=t[n];r.push(s),o+=s.size,this._pending.delete(s.topic),this._activeTotalSize+=s.size,this._active.add(s)}return{tasks:r,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return this._pending.length===0&&this._active.size===0}static compare(e,o){return e[1]._pending.length===0?1:o[1]._pending.length===0?-1:e[1]._activeTotalSize===o[1]._activeTotalSize?o[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-o[1]._activeTotalSize}},PendingTasks=class{constructor(){this._tasks=new SortedMap([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce((e,o)=>e+o.task.size,0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map(e=>e.task)}updatePriority(e,o){const r=this._tasks.get(e);if(!r)return;const t=this._tasks.indexOf(e);r.task.priority=o,this._tasks.update(t)}_compare(e,o){return e[1].task.priority===o[1].task.priority?e[1].created-o[1].created:o[1].task.priority-e[1].task.priority}}}}),TaskMerger,init_task_merger=__esm({"node_modules/ipfs-bitswap/esm/src/decision-engine/task-merger.js"(){init_node_globals(),TaskMerger={hasNewInfo(e,o){let r=!1,t=!1;for(const n of o)n.data.haveBlock&&(r=!0),n.data.isWantBlock&&(t=!0);return!!(!t&&e.data.isWantBlock||!r&&e.data.haveBlock)},merge(e,o){const r=e.data,t=o.data;!t.haveBlock&&r.haveBlock&&(t.haveBlock=r.haveBlock,t.blockSize=r.blockSize),!t.isWantBlock&&r.isWantBlock&&(t.isWantBlock=!0,(!t.haveBlock||r.haveBlock)&&(t.haveBlock=r.haveBlock,o.size=e.size)),t.isWantBlock&&t.haveBlock&&(o.size=t.blockSize)}}}}),import_tracked_map3,WantType2,TARGET_MESSAGE_SIZE,MAX_SIZE_REPLACE_HAS_WITH_BLOCK,DecisionEngine,init_decision_engine=__esm({"node_modules/ipfs-bitswap/esm/src/decision-engine/index.js"(){init_node_globals(),init_cid(),init_base58(),init_message2(),init_wantlist2(),init_ledger(),init_req_queue(),init_task_merger(),init_utils9(),import_tracked_map3=__toESM(require_tracked_map(),1),WantType2=BitswapMessage.WantType,TARGET_MESSAGE_SIZE=16*1024,MAX_SIZE_REPLACE_HAS_WITH_BLOCK=1024,DecisionEngine=class{constructor(e,o,r,t,n,s={}){this._log=logger(e,"engine"),this.blockstore=o,this.network=r,this._stats=t,this._opts=this._processOpts(s),this.ledgerMap=(0,import_tracked_map3.default)({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:n.metrics}),this._running=!1,this._requestQueue=new RequestQueue(TaskMerger)}_processOpts(e){return Re({maxSizeReplaceHasWithBlock:MAX_SIZE_REPLACE_HAS_WITH_BLOCK,targetMessageSize:TARGET_MESSAGE_SIZE},e)}_scheduleProcessTasks(){setTimeout(()=>{this._processTasks()})}async _processTasks(){if(!this._running)return;const{peerId:e,tasks:o,pendingSize:r}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(o.length===0)return;const t=new BitswapMessage(!1);t.setPendingBytes(r);const n=[],s=new Map;for(const l of o){const f=CID.parse(l.topic);l.data.haveBlock?l.data.isWantBlock?(n.push(f),s.set(l.topic,l.data)):t.addHave(f):t.addDontHave(f)}const u=await this._getBlocks(n);for(const[l,f]of s){const a=CID.parse(l),c=u.get(l);c?t.addBlock(a,c):f.sendDontHave&&t.addDontHave(a)}if(t.empty){e&&this._requestQueue.tasksDone(e,o),this._scheduleProcessTasks();return}try{e&&await this.network.sendMessage(e,t);for(const[l,f]of u.entries())e&&this.messageSent(e,CID.parse(l),f)}catch(l){this._log.error(l)}e&&this._requestQueue.tasksDone(e,o),this._scheduleProcessTasks()}wantlistForPeer(e){const o=e.toB58String(),r=this.ledgerMap.get(o);return r?r.wantlist.sortedEntries():new Map}ledgerForPeer(e){const o=e.toB58String(),r=this.ledgerMap.get(o);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map(e=>e.partner)}receivedBlocks(e){if(!!e.length){for(const o of this.ledgerMap.values())for(const r of e){const t=o.wantlistContains(r.cid);if(!t)continue;const n=r.data.length,s=this._sendAsBlock(t.wantType,n);let u=n;s||(u=BitswapMessage.blockPresenceSize(t.cid)),this._requestQueue.pushTasks(o.partner,[{topic:t.cid.toString(base58btc),priority:t.priority,size:u,data:{blockSize:n,isWantBlock:s,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,o){const r=this._findOrCreate(e);if(o.empty)return;if(o.full&&(r.wantlist=new Wantlist),this._updateBlockAccounting(o.blocks,r),o.wantlist.size===0){this._scheduleProcessTasks();return}const t=[],n=[];o.wantlist.forEach(s=>{s.cancel?(r.cancelWant(s.cid),t.push(s.cid)):(r.wants(s.cid,s.priority,s.wantType),n.push(s))}),this._cancelWants(e,t),await this._addWants(e,n),this._scheduleProcessTasks()}_cancelWants(e,o){for(const r of o)this._requestQueue.remove(r.toString(base58btc),e)}async _addWants(e,o){const r=await this._getBlockSizes(o.map(n=>n.cid)),t=[];for(const n of o){const s=n.cid.toString(base58btc),u=r.get(s);if(u==null)n.sendDontHave&&t.push({topic:s,priority:n.priority,size:BitswapMessage.blockPresenceSize(n.cid),data:{isWantBlock:n.wantType===WantType2.Block,blockSize:0,haveBlock:!1,sendDontHave:n.sendDontHave}});else{const l=this._sendAsBlock(n.wantType,u);let f=u;l||(f=BitswapMessage.blockPresenceSize(n.cid)),t.push({topic:s,priority:n.priority,size:f,data:{isWantBlock:l,blockSize:u,haveBlock:!0,sendDontHave:n.sendDontHave}})}this._requestQueue.pushTasks(e,t)}}_sendAsBlock(e,o){return e===WantType2.Block||o<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){const o=await this._getBlocks(e);return new Map([...o].map(([r,t])=>[r,t.length]))}async _getBlocks(e){const o=new Map;return await Promise.all(e.map(async r=>{try{const t=await this.blockstore.get(r);o.set(r.toString(base58btc),t)}catch(t){t.code!=="ERR_NOT_FOUND"&&this._log.error("failed to query blockstore for %s: %s",r,t)}})),o}_updateBlockAccounting(e,o){for(const r of e.values())this._log("got block (%s bytes)",r.length),o.receivedBytes(r.length)}messageSent(e,o,r){const t=this._findOrCreate(e);t.sentBytes(r.length),t.wantlist.remove(o)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toB58String())}_findOrCreate(e){const o=e.toB58String(),r=this.ledgerMap.get(o);if(r)return r;const t=new Ledger(e);return this.ledgerMap.set(o,t),this._stats&&this._stats.push(o,"peerCount",1),t}start(){this._running=!0}stop(){this._running=!1}}}}),import_events,unwantEvent,blockEvent,Notifications,init_notifications=__esm({"node_modules/ipfs-bitswap/esm/src/notifications.js"(){init_node_globals(),import_events=__toESM(require_events(),1),init_to_string(),init_constants2(),init_utils9(),unwantEvent=e=>`unwant:${toString3(e.multihash.bytes,"base64")}`,blockEvent=e=>`block:${toString3(e.multihash.bytes,"base64")}`,Notifications=class extends import_events.EventEmitter{constructor(e){super();this.setMaxListeners(maxListeners),this._log=logger(e,"notif")}hasBlock(e,o){const r=blockEvent(e);this._log(r),this.emit(r,o)}wantBlock(e,o={}){if(!e)throw new Error("Not a valid cid");const r=blockEvent(e),t=unwantEvent(e);return this._log(`wantBlock:${e}`),new Promise((n,s)=>{const u=()=>{this.removeListener(r,l),s(new Error(`Block for ${e} unwanted`))},l=f=>{this.removeListener(t,u),n(f)};this.once(t,u),this.once(r,l),o&&o.signal&&o.signal.addEventListener("abort",()=>{this.removeListener(r,l),this.removeListener(t,u),s(new Error(`Want for ${e} aborted`))})})}unwantBlock(e){const o=unwantEvent(e);this._log(o),this.emit(o)}}}}),import_events2,import_moving_average,Stat,init_stat6=__esm({"node_modules/ipfs-bitswap/esm/src/stats/stat.js"(){init_node_globals(),import_events2=__toESM(require_events(),1),import_moving_average=__toESM(require_moving_average(),1),Stat=class extends import_events2.EventEmitter{constructor(e,o){super();this._options=o,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach(r=>{this._stats[r]=BigInt(0),this._movingAverages[r]={},this._options.movingAverageIntervals.forEach(t=>{(this._movingAverages[r][t]=(0,import_moving_average.default)(t)).push(this._frequencyLastTime,0)})}),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,o){this._enabled&&(this._queue.push([e,o,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const o=e=this._queue.shift();o&&this._applyOp(o)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const o=e-this._frequencyLastTime;o&&Object.keys(this._stats).forEach(r=>{this._updateFrequencyFor(r,o,e)}),this._frequencyLastTime=e}_updateFrequencyFor(e,o,r){const t=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const n=t/o*1e3;let s=this._movingAverages[e];s||(s=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach(u=>{let l=s[u];l||(l=s[u]=(0,import_moving_average.default)(u)),l.push(r,n)})}_applyOp(e){const o=e[0],r=e[1];if(typeof r!="number")throw new Error(`invalid increment number: ${r}`);Object.prototype.hasOwnProperty.call(this._stats,o)||(this._stats[o]=BigInt(0)),this._stats[o]=BigInt(this._stats[o])+BigInt(r),this._frequencyAccumulators[o]||(this._frequencyAccumulators[o]=0),this._frequencyAccumulators[o]+=r}}}}),import_events3,import_tracked_map4,defaultOptions2,Stats,init_stats2=__esm({"node_modules/ipfs-bitswap/esm/src/stats/index.js"(){init_node_globals(),import_events3=__toESM(require_events(),1),init_stat6(),import_tracked_map4=__toESM(require_tracked_map(),1),defaultOptions2={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[60*1e3,5*60*1e3,15*60*1e3]},Stats=class extends import_events3.EventEmitter{constructor(e,o=[],r=defaultOptions2){super();const t=Object.assign({},defaultOptions2,r);if(typeof t.computeThrottleTimeout!="number")throw new Error("need computeThrottleTimeout");if(typeof t.computeThrottleMaxQueueSize!="number")throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=o,this._options=t,this._enabled=this._options.enabled,this._global=new Stat(o,t),this._global.on("update",n=>this.emit("update",n)),this._peers=(0,import_tracked_map4.default)({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){const o=typeof e!="string"&&e.toB58String?e.toB58String():`${e}`;return this._peers.get(o)}push(e,o,r){if(this._enabled&&(this._global.push(o,r),e)){let t=this._peers.get(e);t||(t=new Stat(this._initialCounters,this._options),this._peers.set(e,t)),t.push(o,r)}}disconnected(e){const o=e.toB58String(),r=this._peers.get(o);r&&(r.stop(),this._peers.delete(o))}}}}),import_any_signal3,defaultOptions3,statsKeys,Bitswap,init_bitswap2=__esm({"node_modules/ipfs-bitswap/esm/src/bitswap.js"(){init_node_globals(),init_want_manager(),init_network(),init_decision_engine(),init_notifications(),init_utils9(),init_stats2(),import_any_signal3=__toESM(require_any_signal(),1),init_base4(),init_cid(),defaultOptions3={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},statsKeys=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"],Bitswap=class extends BaseBlockstore{constructor(e,o,r={}){super();this._libp2p=e,this._log=logger(this.peerId),this._options=Object.assign({},defaultOptions3,r),this._stats=new Stats(e,statsKeys,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new Network(e,this,this._stats,{hashLoader:r.hashLoader}),this.blockstore=o,this.engine=new DecisionEngine(this.peerId,o,this.network,this._stats,e),this.wm=new WantManager(this.peerId,this.network,this._stats,e),this.notifications=new Notifications(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,o){try{await this.engine.messageReceived(e,o)}catch{this._log("failed to receive message",o)}if(o.blocks.size===0)return;const r=[];for(const[t,n]of o.blocks.entries()){const s=CID.parse(t);r.push({wasWanted:this.wm.wantlist.contains(s),cid:s,data:n})}this.wm.cancelWants(r.filter(({wasWanted:t})=>t).map(({cid:t})=>t)),await Promise.all(r.map(({cid:t,wasWanted:n,data:s})=>this._handleReceivedBlock(e,t,s,n)))}async _handleReceivedBlock(e,o,r,t){this._log("received block");const n=await this.blockstore.has(o);this._updateReceiveCounters(e.toB58String(),o,r,n),!!t&&await this.put(o,r)}_updateReceiveCounters(e,o,r,t){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),t&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,o){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e,o={}){const r=(f,a)=>(this.wm.wantBlocks([f],a),this.notifications.wantBlock(f,a));let t=!1;const n=async(f,a)=>{try{return await this.blockstore.get(f,a)}catch(c){if(c.code!=="ERR_NOT_FOUND")throw c;return t||(t=!0,this.network.findAndConnect(f).catch(d=>this._log.error(d))),r(f,a)}},s=new AbortController,u=o.signal?(0,import_any_signal3.anySignal)([o.signal,s.signal]):s.signal,l=await Promise.race([this.notifications.wantBlock(e,{signal:u}),n(e,{signal:u})]);return s.abort(),l}async*getMany(e,o={}){for await(const r of e)yield this.get(r,o)}unwant(e){const o=Array.isArray(e)?e:[e];this.wm.unwantBlocks(o),o.forEach(r=>this.notifications.unwantBlock(r))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,o,r){await this.blockstore.put(e,o),this._sendHaveBlockNotifications(e,o)}async*putMany(e,o){for await(const{key:r,value:t}of this.blockstore.putMany(e,o))this._sendHaveBlockNotifications(r,t),yield{key:r,value:t}}_sendHaveBlockNotifications(e,o){this.notifications.hasBlock(e,o),this.engine.receivedBlocks([{cid:e,data:o}]),this.network.provide(e).catch(r=>{this._log.error("Failed to provide: %s",r.message)})}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}}}}),src_exports11={};__export(src_exports11,{createBitswap:()=>createBitswap2});var createBitswap2,init_src16=__esm({"node_modules/ipfs-bitswap/esm/src/index.js"(){init_node_globals(),init_bitswap2(),createBitswap2=(e,o,r={})=>new Bitswap(e,o,r)}}),errors_exports5={};__export(errors_exports5,{abortedError:()=>abortedError2,notFoundError:()=>notFoundError2});function notFoundError2(e){return e=e||new Error("Not Found"),(0,import_err_code38.default)(e,"ERR_NOT_FOUND")}function abortedError2(e){return e=e||new Error("Aborted"),(0,import_err_code38.default)(e,"ERR_ABORTED")}var import_err_code38,init_errors6=__esm({"node_modules/blockstore-core/esm/src/errors.js"(){init_node_globals(),import_err_code38=__toESM(require_err_code(),1)}}),MemoryBlockstore,init_memory3=__esm({"node_modules/blockstore-core/esm/src/memory.js"(){init_node_globals(),init_base4(),init_base32(),init_raw(),init_cid(),init_digest(),init_errors6(),MemoryBlockstore=class extends BaseBlockstore{constructor(){super();this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,o){this.data[base32.encode(e.multihash.bytes)]=o}async get(e){if(!await this.has(e))throw notFoundError2();return this.data[base32.encode(e.multihash.bytes)]}async has(e){return this.data[base32.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[base32.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,o])=>({key:CID.createV1(code6,decode3(base32.decode(e))),value:o}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>CID.createV1(code6,decode3(base32.decode(e))))}}}}),src_exports12={};__export(src_exports12,{BaseBlockstore:()=>BaseBlockstore,Errors:()=>Errors2,MemoryBlockstore:()=>MemoryBlockstore});var Errors2,init_src17=__esm({"node_modules/blockstore-core/esm/src/index.js"(){init_node_globals(),init_errors6(),init_base4(),init_memory3(),Errors2=Re({},errors_exports5)}}),require_block_storage=__commonJS({"node_modules/ipfs-core/cjs/src/block-storage.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src17(),__toCommonJS(src_exports12)),r=require_it_merge(),t=require_it_pushable(),n=require_it_filter();function s(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var u=s(r),l=s(t),f=s(n),a=class extends o.BaseBlockstore{constructor(c,d){super();this.child=c,this.bitswap=d}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(c,d,h={}){await this.has(c)||(this.bitswap.isStarted()?await this.bitswap.put(c,d,h):await this.child.put(c,d,h))}async*putMany(c,d={}){const h=f.default(c,async({key:g})=>!await this.has(g));this.bitswap.isStarted()?yield*this.bitswap.putMany(h,d):yield*this.child.putMany(h,d)}async get(c,d={}){return!await this.has(c)&&this.bitswap.isStarted()?this.bitswap.get(c,d):this.child.get(c,d)}async*getMany(c,d={}){const h=l.default(),g=l.default();Promise.resolve().then(async()=>{for await(const p of c)!await this.has(p)&&this.bitswap.isStarted()?h.push(p):g.push(p);h.end(),g.end()}),yield*u.default(this.bitswap.getMany(h,d),this.child.getMany(g,d))}async delete(c,d){await this.child.delete(c,d)}async*deleteMany(c,d){yield*this.child.deleteMany(c,d)}async has(c,d={}){return this.child.has(c,d)}async*query(c,d={}){yield*this.child.query(c,d)}async*queryKeys(c,d={}){yield*this.child.queryKeys(c,d)}};e.BlockStorage=a}}),require_network2=__commonJS({"node_modules/ipfs-core/cjs/src/components/network.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_src16(),__toCommonJS(src_exports11)),r=require_libp2p(),t=require_src(),n=require_err_code(),s=require_block_storage();function u(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var l=u(n),f=class{constructor(d,h,g,p,_){this.peerId=d,this.libp2p=h,this.bitswap=g,this.repo=p,this.blockstore=_}static async start({peerId:d,repo:h,print:g,hashers:p,options:_}){h.closed&&await h.open();const m=await h.config.getAll(),v=await r.createLibp2p({options:_,repo:h,peerId:d,multiaddrs:a(d,m),config:m,keychainConfig:void 0});v.keychain&&await v.loadKeychain(),await v.start();for(const b of v.multiaddrs)g(`Swarm listening on ${b}/p2p/${d.toB58String()}`);const w=o.createBitswap(v,h.blocks,{statsEnabled:!0,hashLoader:p});await w.start();const y=new s.BlockStorage(h.blocks,w);return h.blocks=y,h.pins.blockstore=y,new f(d,v,w,h,y)}static async stop(d){d.repo.blocks=d.blockstore.unwrap(),d.repo.pins.blockstore=d.blockstore.unwrap(),await d.bitswap.stop(),await d.libp2p.stop()}},a=(d,h)=>{const g=d.toB58String(),p=[],_=h.Addresses&&h.Addresses.Swarm||[];for(const m of _){let v=new t.Multiaddr(m);if(v.protoCodes().includes(c))throw l.default(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const w=v.getPeerId();w&&w!==g&&(v=v.encapsulate(`/p2p/${g}`)),p.push(v)}return p},c=479;e.Network=f}}),require_addrs=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/addrs.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s={}){const u=[],{libp2p:l}=await t.use(s);for await(const f of l.peerStore.getPeers())u.push({id:f.id.toB58String(),addrs:f.addresses.map(a=>a.multiaddr)});return u}return o.withTimeoutOption(n)}e.createAddrs=r}}),require_connect=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/connect.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s,u={}){const{libp2p:l}=await t.use(u);await l.dial(s,u)}return o.withTimeoutOption(n)}e.createConnect=r}}),require_disconnect=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/disconnect.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s,u={}){const{libp2p:l}=await t.use(u);await l.hangUp(s)}return o.withTimeoutOption(n)}e.createDisconnect=r}}),require_local_addrs=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/local-addrs.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s={}){const{libp2p:u}=await t.use(s);return u.multiaddrs}return o.withTimeoutOption(n)}e.createLocalAddrs=r}}),require_peers=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/peers.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function r({network:t}){async function n(s={}){const{libp2p:u}=await t.use(s),l=[];for(const[f,a]of u.connections)for(const c of a){const d={addr:c.remoteAddr,peer:f};(s.verbose||s.direction)&&(d.direction=c.stat.direction),s.verbose&&(d.muxer=c.stat.multiplexer,d.latency="n/a",d.streams=[]),l.push(d)}return l}return o.withTimeoutOption(n)}e.createPeers=r}}),require_swarm=__commonJS({"node_modules/ipfs-core/cjs/src/components/swarm/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_addrs(),r=require_connect(),t=require_disconnect(),n=require_local_addrs(),s=require_peers(),u=class{constructor({network:l}){this.addrs=o.createAddrs({network:l}),this.connect=r.createConnect({network:l}),this.disconnect=t.createDisconnect({network:l}),this.localAddrs=n.createLocalAddrs({network:l}),this.peers=s.createPeers({network:l})}};e.SwarmAPI=u}}),require_ping3=__commonJS({"node_modules/ipfs-core/cjs/src/components/ping.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src5(),r=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports));function t(l){return l&&typeof l=="object"&&"default"in l?l:{default:l}}var n=t(o),s={success:!0,time:0,text:""};function u({network:l}){async function*f(a,c={}){const{libp2p:d}=await l.use();c.count=c.count||10;const h=n.default.createFromB58String(a),g=await d.peerStore.get(h);let p=g&&g.id;if(!p){yield $e(Re({},s),{text:`Looking up peer ${a}`});const v=await d.peerRouting.findPeer(h);p=v&&v.id}if(!p)throw new Error("Peer was not found");yield $e(Re({},s),{text:`PING ${p.toB58String()}`});let _=0,m=0;for(let v=0;v<c.count;v++)try{const w=await d.ping(p);m+=w,_++,yield $e(Re({},s),{time:w})}catch(w){yield $e(Re({},s),{success:!1,text:w.toString()})}if(_){const v=m/_;yield $e(Re({},s),{text:`Average latency: ${v}ms`})}}return r.withTimeoutOption(f)}e.createPing=u}}),require_dht2=__commonJS({"node_modules/ipfs-core/cjs/src/components/dht.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_src5(),r=require_err_code(),t=require_errors(),n=require_dlv_umd(),s=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),u=require_it_map(),l=(init_cid(),__toCommonJS(cid_exports)),f=(init_base58(),__toCommonJS(base58_exports)),a=(init_base36(),__toCommonJS(base36_exports)),c=(init_concat(),__toCommonJS(concat_exports)),d=(init_from_string(),__toCommonJS(from_string_exports));function h(R){return R&&typeof R=="object"&&"default"in R?R:{default:R}}var g=h(o),p=h(r),_=h(n),m=h(u),v="/ipns/";function w(R){R.startsWith(v)&&(R=R.substring(v.length));let S;if((R[0]==="1"||R[0]==="Q")&&(R=`z${R}`),R[0]==="z"&&(S=f.base58btc.decode(R)),R[0]==="k"&&(S=a.base36.decode(R)),!S)throw new Error("Could not parse string");if(S[0]!==1&&S[1]!==114&&(S=c.concat([[1,114],S])),S.length!==40)throw new Error("Incorrect length "+S.length);return c.concat([d.fromString(v),S.subarray(2)])}function y(R){if(R.name==="SENDING_QUERY")return{type:R.type,name:R.name,to:R.to.toB58String()};if(R.name==="PEER_RESPONSE")return{type:R.type,name:R.name,messageType:R.messageType,messageName:R.messageName,closer:R.closer.map(({id:S,multiaddrs:E})=>({id:S.toB58String(),multiaddrs:E})),providers:R.providers.map(({id:S,multiaddrs:E})=>({id:S.toB58String(),multiaddrs:E})),record:R.record,from:R.from.toB58String()};if(R.name==="FINAL_PEER")return{type:R.type,name:R.name,from:R.from.toB58String(),peer:{id:R.peer.id.toB58String(),multiaddrs:R.peer.multiaddrs}};if(R.name==="QUERY_ERROR")return{type:R.type,name:R.name,error:R.error,from:R.from.toB58String()};if(R.name==="PROVIDER")return{type:R.type,name:R.name,providers:R.providers.map(({id:S,multiaddrs:E})=>({id:S.toB58String(),multiaddrs:E})),from:R.from.toB58String()};if(R.name==="VALUE")return{type:R.type,name:R.name,value:R.value,from:R.from.toB58String()};if(R.name==="ADDING_PEER")return{type:R.type,name:R.name,peer:R.peer.toB58String()};if(R.name==="DIALING_PEER")return{type:R.type,name:R.name,peer:R.peer.toB58String()};throw p.default(new Error("Unknown DHT event type"),"ERR_UNKNOWN_DHT_EVENT")}function b({network:R,repo:S,peerId:E}){const{get:A,put:C,findProvs:I,findPeer:P,provide:O,query:k}={async*get(N,K={}){const{libp2p:U}=await T(R,E,K),L=N instanceof Uint8Array?N:w(N);yield*m.default(U._dht.get(L,K),y)},async*put(N,K,U){const{libp2p:L}=await T(R,E,U),re=N instanceof Uint8Array?N:w(N);yield*m.default(L._dht.put(re,K),y)},async*findProvs(N,K={}){const{libp2p:U}=await T(R,E,K);yield*m.default(U._dht.findProviders(N,{signal:K.signal}),y)},async*findPeer(N,K={}){const{libp2p:U}=await T(R,E,K);yield*m.default(U._dht.findPeer(g.default.parse(N),{signal:K.signal}),y)},async*provide(N,K={recursive:!1}){const{libp2p:U}=await T(R,E,K);if(!await S.blocks.has(N))throw p.default(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(K.recursive)throw p.default(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");yield*m.default(U._dht.provide(N),y)},async*query(N,K={}){const{libp2p:U}=await T(R,E,K);let L;const re=l.CID.asCID(N);re!=null?L=re.multihash.bytes:L=g.default.parse(N.toString()).toBytes(),yield*m.default(U._dht.getClosestPeers(L,K),y)}};return{get:s.withTimeoutOption(A),put:s.withTimeoutOption(C),findProvs:s.withTimeoutOption(I),findPeer:s.withTimeoutOption(P),provide:s.withTimeoutOption(O),query:s.withTimeoutOption(k)}}var T=async(R,S,E)=>{const A=await R.use(E);if(_.default(A.libp2p,"_config.dht.enabled",!1))return A;{const C=async function*(){yield{from:S,name:"QUERY_ERROR",type:3,error:new t.NotEnabledError("dht not enabled")}};return{libp2p:{_dht:{get:C,put:C,findProvs:C,findPeer:C,provide:C,query:C}}}}};e.createDht=b}}),require_pubsub3=__commonJS({"node_modules/ipfs-core/cjs/src/components/pubsub.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=(init_with_timeout_option(),__toCommonJS(with_timeout_option_exports)),r=require_err_code(),t=require_errors(),n=require_dlv_umd();function s(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var u=s(r),l=s(n);function f({network:c,config:d}){const h=l.default(d||{},"Pubsub.Enabled",!0);return{subscribe:h?o.withTimeoutOption(g):a,unsubscribe:h?o.withTimeoutOption(p):a,publish:h?o.withTimeoutOption(_):a,ls:h?o.withTimeoutOption(m):a,peers:h?o.withTimeoutOption(v):a};async function g(w,y,b={}){const{libp2p:T}=await c.use(b);return T.pubsub.subscribe(w,y,b)}async function p(w,y,b={}){const{libp2p:T}=await c.use(b);T.pubsub.unsubscribe(w,y,b)}async function _(w,y,b={}){const{libp2p:T}=await c.use(b);if(!y)throw u.default(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await T.pubsub.publish(w,y)}async function m(w={}){const{libp2p:y}=await c.use(w);return y.pubsub.getTopics()}async function v(w,y={}){const{libp2p:b}=await c.use(y);return b.pubsub.getSubscribers(w)}}var a=async()=>{throw new t.NotEnabledError("pubsub not enabled")};e.createPubsub=f}}),require_components=__commonJS({"node_modules/ipfs-core/cjs/src/components/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_merge_options(),r=require_env(),t=require_browser2(),n=require_err_code(),s=(init_src(),__toCommonJS(src_exports)),u=(init_src2(),__toCommonJS(src_exports2)),l=(init_esm(),__toCommonJS(esm_exports)),f=(init_esm2(),__toCommonJS(esm_exports2)),a=require_lib(),c=(init_identity(),__toCommonJS(identity_exports)),d=(init_basics(),__toCommonJS(basics_exports)),h=(init_init_assets_browser(),__toCommonJS(init_assets_browser_exports)),g=require_errors(),p=(init_from_string(),__toCommonJS(from_string_exports)),_=require_start(),m=require_stop(),v=require_dns(),w=require_is_online(),y=require_resolve(),b=require_pin(),T=require_ipns2(),R=require_name(),S=require_refs(),E=require_local(),A=require_bitswap(),C=require_bootstrap(),I=require_block(),P=require_root(),O=require_version2(),k=require_id(),N=require_config2(),K=require_dag(),U=require_preload(),L=require_mfs_preload(),re=require_files(),Z=require_key(),V=require_object(),ee=require_repo(),fe=require_stats(),_e=require_storage(),ce=require_network2(),Ee=require_service2(),Ie=require_swarm(),ue=require_ping3(),pe=require_dht2(),Ae=require_pubsub3(),Y=(init_multicodecs(),__toCommonJS(multicodecs_exports)),se=(init_multihashes(),__toCommonJS(multihashes_exports)),F=(init_multibases(),__toCommonJS(multibases_exports));function j(M){return M&&typeof M=="object"&&"default"in M?M:{default:M}}function B(M){if(M&&M.__esModule)return M;var ie=Object.create(null);return M&&Object.keys(M).forEach(function(ve){if(ve!=="default"){var D=Object.getOwnPropertyDescriptor(M,ve);Object.defineProperty(ie,ve,D.get?D:{enumerable:!0,get:function(){return M[ve]}})}}),ie.default=M,Object.freeze(ie)}var $=j(o),G=j(t),X=j(n),H=B(u),he=B(l),we=B(f),Te=B(a),De=$.default.bind({ignoreUndefined:!0}),Me=Object.assign(G.default("ipfs"),{error:G.default("ipfs:error")}),Be=class{constructor({print:M,storage:ie,codecs:ve,options:D}){const{peerId:z,repo:de,keychain:be}=ie,le=Ee.Service.create(ce.Network),ye=U.createPreloader(D.preload),J=v.createDns(),qe=w.createIsOnline({network:le}),Ue=new T.IPNSAPI(D),x=Object.values(d.hashes);(D.ipld&&D.ipld.hashers?D.ipld.hashers:[]).forEach(ht=>x.push(ht)),this.hashers=new se.Multihashes({hashers:x,loadHasher:D.ipld&&D.ipld.loadHasher});const ke=Object.values(d.bases);(D.ipld&&D.ipld.bases?D.ipld.bases:[]).forEach(ht=>ke.push(ht)),this.bases=new F.Multibases({bases:ke,loadBase:D.ipld&&D.ipld.loadBase});const Ne=new b.PinAPI({repo:de,codecs:ve}),ae=new I.BlockAPI({codecs:ve,hashers:this.hashers,preload:ye,repo:de}),Se=new R.NameAPI({dns:J,ipns:Ue,repo:de,codecs:ve,peerId:z,isOnline:qe,keychain:be,options:D}),Oe=y.createResolve({repo:de,codecs:ve,bases:this.bases,name:Se}),He=new K.DagAPI({repo:de,codecs:ve,hashers:this.hashers,preload:ye}),Ve=Object.assign(S.createRefs({repo:de,codecs:ve,resolve:Oe,preload:ye}),{local:E.createLocal({repo:ie.repo})}),{add:ze,addAll:Xe,cat:ct,get:Ze,ls:Qe}=new P.RootAPI({preload:ye,repo:de,options:D.EXPERIMENTAL}),rt=re.createFiles({repo:de,preload:ye,hashers:this.hashers,options:D}),st=L.createMfsPreloader({files:rt,preload:ye,options:D.preload});this.preload=ye,this.name=Se,this.ipns=Ue,this.pin=Ne,this.resolve=Oe,this.block=ae,this.refs=Ve,this.start=_.createStart({network:le,peerId:z,repo:de,preload:ye,ipns:Ue,mfsPreload:st,print:M,keychain:be,hashers:this.hashers,options:D}),this.stop=m.createStop({network:le,preload:ye,mfsPreload:st,ipns:Ue,repo:de}),this.dht=pe.createDht({network:le,repo:de,peerId:z}),this.pubsub=Ae.createPubsub({network:le,config:D.config}),this.dns=J,this.isOnline=qe,this.id=k.createId({network:le,peerId:z}),this.version=O.createVersion({repo:de}),this.bitswap=new A.BitswapAPI({network:le}),this.bootstrap=new C.BootstrapAPI({repo:de}),this.config=N.createConfig({repo:de}),this.ping=ue.createPing({network:le}),this.add=ze,this.addAll=Xe,this.cat=ct,this.get=Ze,this.ls=Qe,this.dag=He,this.files=rt,this.key=new Z.KeyAPI({keychain:be}),this.object=new V.ObjectAPI({preload:ye,codecs:ve,repo:de}),this.repo=new ee.RepoAPI({repo:de,hashers:this.hashers}),this.stats=new fe.StatsAPI({repo:de,network:le}),this.swarm=new Ie.SwarmAPI({network:le}),Object.defineProperty(this,"libp2p",{get(){const ht=le.try();return ht?ht.libp2p:void 0}});const it=()=>Promise.reject(X.default(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")),At=async function*(){throw X.default(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};this.commands=it,this.diag={cmds:it,net:it,sys:it},this.log={level:it,ls:it,tail:At},this.mount=it,this.codecs=ve}async init(){throw new g.AlreadyInitializedError}},Le=async M=>{const ie=H.encode({Data:new s.UnixFS({type:"directory"}).marshal(),Links:[]}),ve=await M.block.put(ie,{mhtype:"sha2-256",format:"dag-pb"});return await M.pin.add(ve),ve},W=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!r.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});async function q(M={}){M=De(W(),M);const ie=M.init||{},ve={name:c.identity.name,code:c.identity.code,encode:J=>J,decode:J=>J},D=Object.values(d.codecs);[H,he,we,Te,ve].concat(M.ipld&&M.ipld.codecs||[]).forEach(J=>D.push(J));const z=new Y.Multicodecs({codecs:D,loadCodec:M.ipld&&M.ipld.loadCodec}),de=M.silent?Me:console.log;Me("creating repo");const be=await _e.Storage.start(de,z,M);Me("getting repo config");const le=await be.repo.config.getAll(),ye=new Be({storage:be,print:de,codecs:z,options:$e(Re({},M),{config:le})});if(Me("starting preload"),await ye.preload.start(),Me("starting storage"),ye.ipns.startOffline(be),be.isNew&&!ie.emptyRepo){const J=await Le(ye);Me("adding default assets"),await h.initAssets({addAll:ye.addAll,print:de}),Me("initializing IPNS keyspace"),await ye.ipns.initializeKeyspace(be.peerId.privKey,p.fromString(`/ipfs/${J}`))}return M.start!==!1&&(Me("starting node"),await ye.start()),ye}e.create=q}}),require_src29=__commonJS({"node_modules/ipfs-core/cjs/src/index.js"(e){init_node_globals(),Object.defineProperty(e,"__esModule",{value:!0});var o=require_components(),r=require_src6(),t=require_src3(),n=require_src5(),s=require_glob_source(),u=require_url_source(),l=(init_cid(),__toCommonJS(cid_exports)),f=require_src();function a(T){return T&&typeof T=="object"&&"default"in T?T:{default:T}}var c=a(r),d=a(t),h=a(n),g=a(s),p=a(u),_=o.create,m=c.default,v=d.default,w=h.default,y=g.default,b=p.default;Object.defineProperty(e,"CID",{enumerable:!0,get:function(){return l.CID}}),Object.defineProperty(e,"multiaddr",{enumerable:!0,get:function(){return f.Multiaddr}}),e.PeerId=w,e.create=_,e.crypto=m,e.globSource=y,e.isIPFS=v,e.urlSource=b}}),ipfsCore=require_src29();/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 *//*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 *//*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 *//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *//*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *//*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */export{ipfsCore as default};
