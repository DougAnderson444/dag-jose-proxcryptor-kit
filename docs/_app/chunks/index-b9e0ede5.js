import{S as x,i as ee,s as te,F as ae,L as mt,l as H,M as bt,g as m,d as _,e as E,t as I,k as O,c as S,a as R,h as T,m as U,b as V,G as C,N as Z,O as Ke,H as ce,I as fe,J as ue,q as w,P as ye,Q as pe,R as ve,T as Ne,o as A,U as He,V as ie,W as gt,X as kt,Y as yt,n as M,p as Y,K as g,Z as se,_ as he,j as ne,$ as De,v as de,D as vt,a0 as Ce,w as q,x as le,y as z,B as Q,a1 as Ve,a2 as re,a3 as _e,a4 as me,a5 as Oe,a6 as Ue,a7 as Nt,E as Fe,a8 as wt,a9 as Be,aa as Dt,ab as je}from"./vendor-029b5eca.js";import{_ as ge}from"./preload-helper-c6bb0bca.js";function Ct(o){let e,n,l;return{c(){e=E("textarea")},l(t){e=S(t,"TEXTAREA",{}),R(e).forEach(_)},m(t,r){m(t,e,r),ie(e,o[1]),n||(l=Z(e,"input",o[6]),n=!0)},p(t,r){r&2&&ie(e,t[1])},d(t){t&&_(e),n=!1,l()}}}function Ge(o){let e,n=JSON.stringify(o[0],null,2)+"",l;return{c(){e=new mt,l=H(),this.h()},l(t){e=bt(t),l=H(),this.h()},h(){e.a=l},m(t,r){e.m(n,t,r),m(t,l,r)},p(t,r){r&1&&n!==(n=JSON.stringify(t[0],null,2)+"")&&e.p(n)},d(t){t&&_(l),t&&e.d()}}}function It(o){let e,n,l,t,r,s,i,a,c,u,f,p,b,d;const h=o[5].default,y=ae(h,o,o[4],null),k=y||Ct(o);let D=o[0]&&Ge(o);return{c(){e=E("div"),n=E("h3"),l=I(Ie),t=O(),k&&k.c(),r=O(),s=E("div"),i=E("button"),a=I("Post"),u=O(),D&&D.c(),f=H(),this.h()},l(K){e=S(K,"DIV",{});var L=R(e);n=S(L,"H3",{});var B=R(n);l=T(B,Ie),B.forEach(_),t=U(L),k&&k.l(L),r=U(L),s=S(L,"DIV",{class:!0});var G=R(s);i=S(G,"BUTTON",{});var X=R(i);a=T(X,"Post"),X.forEach(_),G.forEach(_),L.forEach(_),u=U(K),D&&D.l(K),f=H(),this.h()},h(){V(s,"class","submit")},m(K,L){m(K,e,L),C(e,n),C(n,l),C(e,t),k&&k.m(e,null),C(e,r),C(e,s),C(s,i),C(i,a),m(K,u,L),D&&D.m(K,L),m(K,f,L),p=!0,b||(d=Z(i,"click",Ke(o[7])),b=!0)},p(K,[L]){o=K,y?y.p&&(!p||L&16)&&ce(y,h,o,o[4],p?ue(h,o[4],L,null):fe(o[4]),null):k&&k.p&&(!p||L&2)&&k.p(o,p?L:-1),o[0]?D?D.p(o,L):(D=Ge(o),D.c(),D.m(f.parentNode,f)):D&&(D.d(1),D=null)},i(K){p||(w(k,K),ye(()=>{c||(c=pe(e,Ne,{delay:100,duration:400,easing:ve},!0)),c.run(1)}),p=!0)},o(K){A(k,K),c||(c=pe(e,Ne,{delay:100,duration:400,easing:ve},!1)),c.run(0),p=!1},d(K){K&&_(e),k&&k.d(K),K&&c&&c.end(),K&&_(u),D&&D.d(K),K&&_(f),b=!1,d()}}}const Ie="Profile";function Tt(o,e,n){let{$$slots:l={},$$scope:t}=e,{decryptedData:r}=e;const s=He();let i,a;function c(){a=this.value,n(1,a)}const u=()=>s("handleSubmit",{tag:Ie,data:{value:a,schema:i}});return o.$$set=f=>{"decryptedData"in f&&n(0,r=f.decryptedData),"$$scope"in f&&n(4,t=f.$$scope)},[r,a,s,i,t,l,c,u]}class At extends x{constructor(e){super();ee(this,e,Tt,It,te,{decryptedData:0})}}const Et=()=>{const o=gt("__svelte__");return{page:{subscribe:o.page.subscribe},navigating:{subscribe:o.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:o.navigating.subscribe}},session:o.session,updated:o.updated}},St={subscribe(o){return Et().page.subscribe(o)}},Te=32,We=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],Je=new Array(256);for(let o=0;o<256;o++)Je[o]=`${We[o>>>4&15]}${We[o&15]}`;function Me(o){let e="";for(let n=0,l=o.length;n<l;n++)e+=Je[o[n]];return e}function Ye(o){if(!o)return;let e=kt.toByteArray(o);if(e.length===Te)return e;try{let t=yt.decode(o);if(t.length===Te)return t}catch{}let l=(t=>new Uint8Array(t.match(/.{1,2}/g).map(r=>parseInt(r,16))))(o);return l.length===Te?l:!1}async function Ln(o){const e=new TextEncoder().encode(o),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(r=>r.toString(16).padStart(2,"0")).join("")}const Pt=o=>({}),qe=o=>({}),Rt=o=>({}),ze=o=>({}),Lt=o=>({}),Qe=o=>({});function Kt(o){let e,n;return{c(){e=E("span"),n=I("Unknown handle"),this.h()},l(l){e=S(l,"SPAN",{class:!0});var t=R(e);n=T(t,"Unknown handle"),t.forEach(_),this.h()},h(){V(e,"class","missing svelte-rrgue8")},m(l,t){m(l,e,t),C(e,n)},d(l){l&&_(e)}}}function Ht(o){let e,n;return{c(){e=E("span"),n=I("Unknown publicKey"),this.h()},l(l){e=S(l,"SPAN",{class:!0});var t=R(e);n=T(t,"Unknown publicKey"),t.forEach(_),this.h()},h(){V(e,"class","missing svelte-rrgue8")},m(l,t){m(l,e,t),C(e,n)},d(l){l&&_(e)}}}function Vt(o){let e,n;return{c(){e=E("span"),n=I("Unknown latest value"),this.h()},l(l){e=S(l,"SPAN",{class:!0});var t=R(e);n=T(t,"Unknown latest value"),t.forEach(_),this.h()},h(){V(e,"class","missing svelte-rrgue8")},m(l,t){m(l,e,t),C(e,n)},d(l){l&&_(e)}}}function Ot(o){let e,n,l,t,r,s,i;const a=o[1].handle,c=ae(a,o,o[0],Qe),u=c||Kt(),f=o[1].publicKey,p=ae(f,o,o[0],ze),b=p||Ht(),d=o[1].latest,h=ae(d,o,o[0],qe),y=h||Vt();return{c(){e=E("article"),n=E("h2"),u&&u.c(),l=O(),t=E("div"),b&&b.c(),r=O(),s=E("div"),y&&y.c(),this.h()},l(k){e=S(k,"ARTICLE",{class:!0});var D=R(e);n=S(D,"H2",{class:!0});var K=R(n);u&&u.l(K),K.forEach(_),l=U(D),t=S(D,"DIV",{class:!0});var L=R(t);b&&b.l(L),L.forEach(_),r=U(D),s=S(D,"DIV",{class:!0});var B=R(s);y&&y.l(B),B.forEach(_),D.forEach(_),this.h()},h(){V(n,"class","svelte-rrgue8"),V(t,"class","address svelte-rrgue8"),V(s,"class","email svelte-rrgue8"),V(e,"class","contact-card svelte-rrgue8")},m(k,D){m(k,e,D),C(e,n),u&&u.m(n,null),C(e,l),C(e,t),b&&b.m(t,null),C(e,r),C(e,s),y&&y.m(s,null),i=!0},p(k,[D]){c&&c.p&&(!i||D&1)&&ce(c,a,k,k[0],i?ue(a,k[0],D,Lt):fe(k[0]),Qe),p&&p.p&&(!i||D&1)&&ce(p,f,k,k[0],i?ue(f,k[0],D,Rt):fe(k[0]),ze),h&&h.p&&(!i||D&1)&&ce(h,d,k,k[0],i?ue(d,k[0],D,Pt):fe(k[0]),qe)},i(k){i||(w(u,k),w(b,k),w(y,k),i=!0)},o(k){A(u,k),A(b,k),A(y,k),i=!1},d(k){k&&_(e),u&&u.d(k),b&&b.d(k),y&&y.d(k)}}}function Ut(o,e,n){let{$$slots:l={},$$scope:t}=e;return o.$$set=r=>{"$$scope"in r&&n(0,t=r.$$scope)},[t,l]}class Ft extends x{constructor(e){super();ee(this,e,Ut,Ot,te,{})}}const Bt=o=>({latestHypns:o&1}),Xe=o=>({latestHypns:o[0]});function jt(o){let e;return{c(){e=I("Sign message to write to PiperNet...")},l(n){e=T(n,"Sign message to write to PiperNet...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Gt(o){let e,n,l,t={ctx:o,current:null,token:null,hasCatch:!1,pending:zt,then:Mt,catch:Jt,blocks:[,,,]};return se(n=o[2],t),{c(){e=H(),t.block.c()},l(r){e=H(),t.block.l(r)},m(r,s){m(r,e,s),t.block.m(r,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(r,s){o=r,t.ctx=o,s&4&&n!==(n=o[2])&&se(n,t)||he(t,o,s)},i(r){l||(w(t.block),l=!0)},o(r){for(let s=0;s<3;s+=1){const i=t.blocks[s];A(i)}l=!1},d(r){r&&_(e),t.block.d(r),t.token=null,t=null}}}function Wt(o){let e;return{c(){e=I("Loading hypnsInstance...")},l(n){e=T(n,"Loading hypnsInstance...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Jt(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Mt(o){let e,n,l,t,r,s,i;const a=[qt,Yt],c=[];function u(f,p){return f[0]?0:1}return t=u(o),r=c[t]=a[t](o),{c(){e=E("h3"),n=I("\u2714\uFE0F Connected to PiperNet"),l=O(),r.c(),s=H()},l(f){e=S(f,"H3",{});var p=R(e);n=T(p,"\u2714\uFE0F Connected to PiperNet"),p.forEach(_),l=U(f),r.l(f),s=H()},m(f,p){m(f,e,p),C(e,n),m(f,l,p),c[t].m(f,p),m(f,s,p),i=!0},p(f,p){let b=t;t=u(f),t===b?c[t].p(f,p):(M(),A(c[b],1,1,()=>{c[b]=null}),Y(),r=c[t],r?r.p(f,p):(r=c[t]=a[t](f),r.c()),w(r,1),r.m(s.parentNode,s))},i(f){i||(w(r),i=!0)},o(f){A(r),i=!1},d(f){f&&_(e),f&&_(l),c[t].d(f),f&&_(s)}}}function Yt(o){let e;return{c(){e=I("\u26A0\uFE0F No latest value available.")},l(n){e=T(n,"\u26A0\uFE0F No latest value available.")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function qt(o){let e,n,l,t;const r=o[6].default,s=ae(r,o,o[5],Xe);return{c(){e=I("\u2714\uFE0F Lastest Saved Root: "),n=I(o[0]),l=O(),s&&s.c()},l(i){e=T(i,"\u2714\uFE0F Lastest Saved Root: "),n=T(i,o[0]),l=U(i),s&&s.l(i)},m(i,a){m(i,e,a),m(i,n,a),m(i,l,a),s&&s.m(i,a),t=!0},p(i,a){(!t||a&1)&&ne(n,i[0]),s&&s.p&&(!t||a&33)&&ce(s,r,i,i[5],t?ue(r,i[5],a,Bt):fe(i[5]),Xe)},i(i){t||(w(s,i),t=!0)},o(i){A(s,i),t=!1},d(i){i&&_(e),i&&_(n),i&&_(l),s&&s.d(i)}}}function zt(o){let e;return{c(){e=I("Getting instance ready...")},l(n){e=T(n,"Getting instance ready...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Qt(o){let e,n,l,t;const r=[Wt,Gt,jt],s=[];function i(a,c){return a[1]?a[2]?1:2:0}return e=i(o),n=s[e]=r[e](o),{c(){n.c(),l=H()},l(a){n.l(a),l=H()},m(a,c){s[e].m(a,c),m(a,l,c),t=!0},p(a,[c]){let u=e;e=i(a),e===u?s[e].p(a,c):(M(),A(s[u],1,1,()=>{s[u]=null}),Y(),n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),w(n,1),n.m(l.parentNode,l))},i(a){t||(w(n),t=!0)},o(a){A(n),t=!1},d(a){s[e].d(a),a&&_(l)}}}function Xt(o,e,n){let{$$slots:l={},$$scope:t}=e,{pubKey:r}=e,{hypnsNode:s}=e,i,a,c;async function u(f){let p=Me(f);n(1,a=await s.open({keypair:{publicKey:p}})),a.on("update",b=>{n(0,i=b.ipld)}),n(2,c=await a.ready())}return o.$$set=f=>{"pubKey"in f&&n(3,r=f.pubKey),"hypnsNode"in f&&n(4,s=f.hypnsNode),"$$scope"in f&&n(5,t=f.$$scope)},o.$$.update=()=>{o.$$.dirty&24&&!!r&&s&&u(r)},[i,a,c,r,s,t,l]}class Zt extends x{constructor(e){super();ee(this,e,Xt,Qt,te,{pubKey:3,hypnsNode:4})}}function Ze(o,e,n){const l=o.slice();return l[6]=e[n],l}const $t=o=>({tagNode:o&1}),$e=o=>({tagNode:o[6]});function xe(o){let e,n,l,t={ctx:o,current:null,token:null,hasCatch:!1,pending:tl,then:el,catch:xt,value:0,blocks:[,,,]};return se(n=o[0],t),{c(){e=H(),t.block.c()},l(r){e=H(),t.block.l(r)},m(r,s){m(r,e,s),t.block.m(r,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(r,s){o=r,t.ctx=o,s&1&&n!==(n=o[0])&&se(n,t)||he(t,o,s)},i(r){l||(w(t.block),l=!0)},o(r){for(let s=0;s<3;s+=1){const i=t.blocks[s];A(i)}l=!1},d(r){r&&_(e),t.block.d(r),t.token=null,t=null}}}function xt(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function el(o){let e,n,l=o[0],t=[];for(let s=0;s<l.length;s+=1)t[s]=et(Ze(o,l,s));const r=s=>A(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=H()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=H()},m(s,i){for(let a=0;a<t.length;a+=1)t[a].m(s,i);m(s,e,i),n=!0},p(s,i){if(i&9){l=s[0];let a;for(a=0;a<l.length;a+=1){const c=Ze(s,l,a);t[a]?(t[a].p(c,i),w(t[a],1)):(t[a]=et(c),t[a].c(),w(t[a],1),t[a].m(e.parentNode,e))}for(M(),a=l.length;a<t.length;a+=1)r(a);Y()}},i(s){if(!n){for(let i=0;i<l.length;i+=1)w(t[i]);n=!0}},o(s){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)A(t[i]);n=!1},d(s){De(t,s),s&&_(e)}}}function et(o){let e;const n=o[4].default,l=ae(n,o,o[3],$e);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,r){l&&l.m(t,r),e=!0},p(t,r){l&&l.p&&(!e||r&9)&&ce(l,n,t,t[3],e?ue(n,t[3],r,$t):fe(t[3]),$e)},i(t){e||(w(l,t),e=!0)},o(t){A(l,t),e=!1},d(t){l&&l.d(t)}}}function tl(o){let e;return{c(){e=I("Loading tags")},l(n){e=T(n,"Loading tags")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function ll(o){let e,n,l=o[0]&&xe(o);return{c(){l&&l.c(),e=H()},l(t){l&&l.l(t),e=H()},m(t,r){l&&l.m(t,r),m(t,e,r),n=!0},p(t,[r]){t[0]?l?(l.p(t,r),r&1&&w(l,1)):(l=xe(t),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(M(),A(l,1,1,()=>{l=null}),Y())},i(t){n||(w(l),n=!0)},o(t){A(l),n=!1},d(t){l&&l.d(t),t&&_(e)}}}function nl(o,e,n){let{$$slots:l={},$$scope:t}=e,{rootCID:r}=e,{getTagNodes:s}=e,i;async function a(){n(0,i=await s(r))}return o.$$set=c=>{"rootCID"in c&&n(1,r=c.rootCID),"getTagNodes"in c&&n(2,s=c.getTagNodes),"$$scope"in c&&n(3,t=c.$$scope)},o.$$.update=()=>{o.$$.dirty&2&&r&&a()},[i,r,s,t,l]}class ol extends x{constructor(e){super();ee(this,e,nl,ll,te,{rootCID:1,getTagNodes:2})}}function sl(o){let e,n;return{c(){e=I("\u2716\uFE0F You have no access to "),n=I(o[0])},l(l){e=T(l,"\u2716\uFE0F You have no access to "),n=T(l,o[0])},m(l,t){m(l,e,t),m(l,n,t)},p(l,t){t&1&&ne(n,l[0])},d(l){l&&_(e),l&&_(n)}}}function rl(o){let e,n;return{c(){e=I("\u2714\uFE0F You have has access to their "),n=I(o[0])},l(l){e=T(l,"\u2714\uFE0F You have has access to their "),n=T(l,o[0])},m(l,t){m(l,e,t),m(l,n,t)},p(l,t){t&1&&ne(n,l[0])},d(l){l&&_(e),l&&_(n)}}}function il(o){let e;function n(r,s){return r[2]&&r[1]?rl:sl}let l=n(o),t=l(o);return{c(){e=E("div"),t.c()},l(r){e=S(r,"DIV",{});var s=R(e);t.l(s),s.forEach(_)},m(r,s){m(r,e,s),t.m(e,null)},p(r,[s]){l===(l=n(r))&&t?t.p(r,s):(t.d(1),t=l(r),t&&(t.c(),t.m(e,null)))},i:g,o:g,d(r){r&&_(e),t.d()}}}function al(o,e,n){let{tag:l}=e,{pubKey:t}=e,{checkAccess:r}=e,s,i;async function a(){console.log(`Checking access to ${l} for `,{pubKey:t}),n(1,s=await r(l,t)),n(2,i=!0)}return de(async()=>{}),o.$$set=c=>{"tag"in c&&n(0,l=c.tag),"pubKey"in c&&n(3,t=c.pubKey),"checkAccess"in c&&n(4,r=c.checkAccess)},o.$$.update=()=>{o.$$.dirty&9&&!!l&&!!t&&a()},[l,s,i,t,r]}class cl extends x{constructor(e){super();ee(this,e,al,il,te,{tag:0,pubKey:3,checkAccess:4})}}function fl(o){let e,n;return{c(){e=I("\u2716\uFE0F No matches for "),n=I(o[1])},l(l){e=T(l,"\u2716\uFE0F No matches for "),n=T(l,o[1])},m(l,t){m(l,e,t),m(l,n,t)},p(l,t){t&2&&ne(n,l[1])},d(l){l&&_(e),l&&_(n)}}}function ul(o){let e,n=o[2].handle+"",l,t,r,s,i,a;return{c(){e=I("\u2714\uFE0F Matched "),l=I(n),t=O(),r=E("button"),s=I("Grant Access")},l(c){e=T(c,"\u2714\uFE0F Matched "),l=T(c,n),t=U(c),r=S(c,"BUTTON",{});var u=R(r);s=T(u,"Grant Access"),u.forEach(_)},m(c,u){m(c,e,u),m(c,l,u),m(c,t,u),m(c,r,u),C(r,s),i||(a=Z(r,"click",o[4]),i=!0)},p(c,u){u&4&&n!==(n=c[2].handle+"")&&ne(l,n)},d(c){c&&_(e),c&&_(l),c&&_(t),c&&_(r),i=!1,a()}}}function tt(o){let e,n,l={ctx:o,current:null,token:null,hasCatch:!1,pending:pl,then:dl,catch:_l,value:9};return se(n=o[3],l),{c(){e=H(),l.block.c()},l(t){e=H(),l.block.l(t)},m(t,r){m(t,e,r),l.block.m(t,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e},p(t,r){o=t,l.ctx=o,r&8&&n!==(n=o[3])&&se(n,l)||he(l,o,r)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function _l(o){return{c:g,l:g,m:g,p:g,d:g}}function dl(o){let e,n;return{c(){e=I("Access Granted to "),n=I(o[1])},l(l){e=T(l,"Access Granted to "),n=T(l,o[1])},m(l,t){m(l,e,t),m(l,n,t)},p(l,t){t&2&&ne(n,l[1])},d(l){l&&_(e),l&&_(n)}}}function pl(o){let e;return{c(){e=I("Granting access...")},l(n){e=T(n,"Granting access...")},m(n,l){m(n,e,l)},p:g,d(n){n&&_(e)}}}function hl(o){let e,n,l,t,r,s,i,a,c,u;function f(h,y){if(h[2])return ul;if(h[1])return fl}let p=f(o),b=p&&p(o),d=o[3]&&tt(o);return{c(){e=E("div"),n=I("Share "),l=I(o[0]),t=I(" With: "),r=E("input"),s=O(),i=E("div"),b&&b.c(),a=O(),d&&d.c(),this.h()},l(h){e=S(h,"DIV",{});var y=R(e);n=T(y,"Share "),l=T(y,o[0]),t=T(y," With: "),r=S(y,"INPUT",{placeholder:!0}),s=U(y),i=S(y,"DIV",{});var k=R(i);b&&b.l(k),k.forEach(_),a=U(y),d&&d.l(y),y.forEach(_),this.h()},h(){V(r,"placeholder","Enter Handle or Public Key")},m(h,y){m(h,e,y),C(e,n),C(e,l),C(e,t),C(e,r),ie(r,o[1]),C(e,s),C(e,i),b&&b.m(i,null),C(e,a),d&&d.m(e,null),c||(u=Z(r,"input",o[7]),c=!0)},p(h,[y]){y&1&&ne(l,h[0]),y&2&&r.value!==h[1]&&ie(r,h[1]),p===(p=f(h))&&b?b.p(h,y):(b&&b.d(1),b=p&&p(h),b&&(b.c(),b.m(i,null))),h[3]?d?d.p(h,y):(d=tt(h),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:g,o:g,d(h){h&&_(e),b&&b.d(),d&&d.d(),c=!1,u()}}}function ml(o,e,n){let{tag:l}=e,{setAccess:t}=e,{contacts:r}=e,s,i,a;function c(f){n(3,a=t(l,s.pubKey))}function u(){i=this.value,n(1,i)}return o.$$set=f=>{"tag"in f&&n(0,l=f.tag),"setAccess"in f&&n(5,t=f.setAccess),"contacts"in f&&n(6,r=f.contacts)},o.$$.update=()=>{if(o.$$.dirty&66&&i&&r&&r.length){console.log({contacts:r});let f=r==null?void 0:r.find(p=>p.handle===i);n(2,s=f||null)}},[l,i,s,a,c,t,r,u]}class bl extends x{constructor(e){super();ee(this,e,ml,hl,te,{tag:0,setAccess:5,contacts:6})}}function lt(o){let e,n,l,t,r,s;return{c(){e=I("\u2714\uFE0F IPLD Data Saved to: "),n=E("a"),l=I(o[0]),r=O(),s=E("br"),this.h()},l(i){e=T(i,"\u2714\uFE0F IPLD Data Saved to: "),n=S(i,"A",{href:!0,target:!0});var a=R(n);l=T(a,o[0]),a.forEach(_),r=U(i),s=S(i,"BR",{}),this.h()},h(){V(n,"href",t="https://dweb.link/api/v0/dag/get?arg="+o[0]),V(n,"target","_blank")},m(i,a){m(i,e,a),m(i,n,a),C(n,l),m(i,r,a),m(i,s,a)},p(i,a){a&1&&ne(l,i[0]),a&1&&t!==(t="https://dweb.link/api/v0/dag/get?arg="+i[0])&&V(n,"href",t)},d(i){i&&_(e),i&&_(n),i&&_(r),i&&_(s)}}}function gl(o){let e,n=o[0]&&lt(o);return{c(){n&&n.c(),e=H()},l(l){n&&n.l(l),e=H()},m(l,t){n&&n.m(l,t),m(l,e,t)},p(l,[t]){l[0]?n?n.p(l,t):(n=lt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:g,o:g,d(l){n&&n.d(l),l&&_(e)}}}function kl(o,e,n){let{rootCID:l}=e;return o.$$set=t=>{"rootCID"in t&&n(0,l=t.rootCID)},[l]}class yl extends x{constructor(e){super();ee(this,e,kl,gl,te,{rootCID:0})}}const Ae=vt([]),vl=o=>({}),nt=o=>({decryptedData:null}),Nl=o=>({decryptedData:o&32}),ot=o=>({decryptedData:o[5]});function wl(o){let e;const n=o[12].default,l=ae(n,o,o[11],nt);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,r){l&&l.m(t,r),e=!0},p(t,r){l&&l.p&&(!e||r&2048)&&ce(l,n,t,t[11],e?ue(n,t[11],r,vl):fe(t[11]),nt)},i(t){e||(w(l,t),e=!0)},o(t){A(l,t),e=!1},d(t){l&&l.d(t)}}}function Dl(o){let e,n,l,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Tl,then:Il,catch:Cl,value:5,blocks:[,,,]};return se(n=o[5],t),{c(){e=H(),t.block.c()},l(r){e=H(),t.block.l(r)},m(r,s){m(r,e,s),t.block.m(r,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(r,s){o=r,t.ctx=o,s&32&&n!==(n=o[5])&&se(n,t)||he(t,o,s)},i(r){l||(w(t.block),l=!0)},o(r){for(let s=0;s<3;s+=1){const i=t.blocks[s];A(i)}l=!1},d(r){r&&_(e),t.block.d(r),t.token=null,t=null}}}function Cl(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Il(o){let e,n,l;e=new bl({props:{tag:o[0],setAccess:o[1],contacts:o[4]}});const t=o[12].default,r=ae(t,o,o[11],ot);return{c(){q(e.$$.fragment),n=O(),r&&r.c()},l(s){le(e.$$.fragment,s),n=U(s),r&&r.l(s)},m(s,i){z(e,s,i),m(s,n,i),r&&r.m(s,i),l=!0},p(s,i){const a={};i&1&&(a.tag=s[0]),i&2&&(a.setAccess=s[1]),i&16&&(a.contacts=s[4]),e.$set(a),r&&r.p&&(!l||i&2080)&&ce(r,t,s,s[11],l?ue(t,s[11],i,Nl):fe(s[11]),ot)},i(s){l||(w(e.$$.fragment,s),w(r,s),l=!0)},o(s){A(e.$$.fragment,s),A(r,s),l=!1},d(s){Q(e,s),s&&_(n),r&&r.d(s)}}}function Tl(o){let e;return{c(){e=I("Decrypting...")},l(n){e=T(n,"Decrypting...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Al(o){let e,n,l,t;const r=[Dl,wl],s=[];function i(a,c){return a[3]&&a[2]&&a[5]?0:1}return e=i(o),n=s[e]=r[e](o),{c(){n.c(),l=H()},l(a){n.l(a),l=H()},m(a,c){s[e].m(a,c),m(a,l,c),t=!0},p(a,[c]){let u=e;e=i(a),e===u?s[e].p(a,c):(M(),A(s[u],1,1,()=>{s[u]=null}),Y(),n=s[e],n?n.p(a,c):(n=s[e]=r[e](a),n.c()),w(n,1),n.m(l.parentNode,l))},i(a){t||(w(n),t=!0)},o(a){A(n),t=!1},d(a){s[e].d(a),a&&_(l)}}}function El(o,e,n){let l;Ce(o,Ae,y=>n(4,l=y));let{$$slots:t={},$$scope:r}=e,{getTagNode:s}=e,{decrypt:i}=e,{tag:a}=e,{rootCID:c}=e,{setAccess:u}=e,f,p=[],b,d;async function h(){n(3,d=!1),console.log("Common refreshedRootCID for ",a),n(10,b=c),n(2,f=await s(a)),f&&n(5,p=await i(f)),console.log({decryptedData:p}),n(3,d=!0)}return o.$$set=y=>{"getTagNode"in y&&n(6,s=y.getTagNode),"decrypt"in y&&n(7,i=y.decrypt),"tag"in y&&n(0,a=y.tag),"rootCID"in y&&n(8,c=y.rootCID),"setAccess"in y&&n(1,u=y.setAccess),"$$scope"in y&&n(11,r=y.$$scope)},o.$$.update=()=>{o.$$.dirty&1281&&(a||c&&b!==c)&&h()},[a,u,f,d,l,p,s,i,c,h,b,r,t]}class Sl extends x{constructor(e){super();ee(this,e,El,Al,te,{getTagNode:6,decrypt:7,tag:0,rootCID:8,setAccess:1,refreshedRootCID:9})}get refreshedRootCID(){return this.$$.ctx[9]}}const Pl=o=>({decryptedData:o&4194304,getTagNodes:o&128,checkAccess:o&64,setAccess:o&32,decryptFromTagNode:o&16}),st=o=>({handleSubmit:o[10],decryptedData:o[22],getTagNodes:o[7],checkAccess:o[6],setAccess:o[5],decryptFromTagNode:o[4]});function Rl(o){let e;return{c(){e=I("Connect with the Wallet to save encrypted messages.")},l(n){e=T(n,"Connect with the Wallet to save encrypted messages.")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Ll(o){let e,n,l,t,r,s;n=new yl({props:{rootCID:o[0]}});function i(c){o[19](c)}let a={getTagNode:o[11],decrypt:o[9],tag:o[2],rootCID:o[0],setAccess:o[5],$$slots:{default:[Kl,({decryptedData:c})=>({22:c}),({decryptedData:c})=>c?4194304:0]},$$scope:{ctx:o}};return o[8]!==void 0&&(a.refreshedRootCID=o[8]),t=new Sl({props:a}),re.push(()=>_e(t,"refreshedRootCID",i)),{c(){e=E("div"),q(n.$$.fragment),l=O(),q(t.$$.fragment),this.h()},l(c){e=S(c,"DIV",{class:!0});var u=R(e);le(n.$$.fragment,u),l=U(u),le(t.$$.fragment,u),u.forEach(_),this.h()},h(){V(e,"class","")},m(c,u){m(c,e,u),z(n,e,null),C(e,l),z(t,e,null),s=!0},p(c,u){const f={};u&1&&(f.rootCID=c[0]),n.$set(f);const p={};u&4&&(p.tag=c[2]),u&1&&(p.rootCID=c[0]),u&32&&(p.setAccess=c[5]),u&5243120&&(p.$$scope={dirty:u,ctx:c}),!r&&u&256&&(r=!0,p.refreshedRootCID=c[8],me(()=>r=!1)),t.$set(p)},i(c){s||(w(n.$$.fragment,c),w(t.$$.fragment,c),s=!0)},o(c){A(n.$$.fragment,c),A(t.$$.fragment,c),s=!1},d(c){c&&_(e),Q(n),Q(t)}}}function Kl(o){let e;const n=o[18].default,l=ae(n,o,o[20],st);return{c(){l&&l.c()},l(t){l&&l.l(t)},m(t,r){l&&l.m(t,r),e=!0},p(t,r){l&&l.p&&(!e||r&5243120)&&ce(l,n,t,t[20],e?ue(n,t[20],r,Pl):fe(t[20]),st)},i(t){e||(w(l,t),e=!0)},o(t){A(l,t),e=!1},d(t){l&&l.d(t)}}}function Hl(o){let e,n,l,t,r,s,i;const a=[Ll,Rl],c=[];function u(f,p){return f[1]&&f[3]?0:1}return r=u(o),s=c[r]=a[r](o),{c(){e=E("script"),n=I("global = globalThis; // for solana web3 repo"),l=O(),t=E("div"),s.c(),this.h()},l(f){const p=Ve('[data-svelte="svelte-1yyo2jl"]',document.head);e=S(p,"SCRIPT",{});var b=R(e);n=T(b,"global = globalThis; // for solana web3 repo"),b.forEach(_),p.forEach(_),l=U(f),t=S(f,"DIV",{class:!0});var d=R(t);s.l(d),d.forEach(_),this.h()},h(){V(t,"class","main svelte-460y2v")},m(f,p){C(document.head,e),C(e,n),m(f,l,p),m(f,t,p),c[r].m(t,null),i=!0},p(f,[p]){let b=r;r=u(f),r===b?c[r].p(f,p):(M(),A(c[b],1,1,()=>{c[b]=null}),Y(),s=c[r],s?s.p(f,p):(s=c[r]=a[r](f),s.c()),w(s,1),s.m(t,null))},i(f){i||(w(s),i=!0)},o(f){A(s),i=!1},d(f){_(e),f&&_(l),f&&_(t),c[r].d()}}}const rt="__ROOT_CID__";function Vl(o,e,n){let{$$slots:l={},$$scope:t}=e,{rootCID:r}=e,{proxcryptor:s}=e,{ipfsNode:i}=e,{CID:a}=e,{tag:c}=e,u=!1,f,p,b,d,h,y,k,D,K,{onSubmitted:L=()=>{}}=e;de(async()=>{const{ImmortalDB:v}=await ge(()=>import("./index-17ddc90e.js"),[]),{DagJoseCryptor:W}=await ge(()=>import("./dagjosecryptor-6ceef6ec.js"),["chunks/dagjosecryptor-6ceef6ec.js","chunks/vendor-029b5eca.js","chunks/preload-helper-c6bb0bca.js"]);p=async()=>{if(await i,r)return!0;let N=await v.get(rt);return N?(n(0,r=a.asCID(N)||a.parse(N)),console.log("rootCID set in loadRootCID"),!0):(n(0,r=!1),!0)},await p(),n(17,d=async()=>{console.log("Setting setJoseCryptor"),await i,n(16,b=new W(i,s,r)),r||n(3,u=!0)}),n(15,f=async()=>{n(0,r=b.rootCID),console.log("Updating rootCID",{rootCID:r.toString()}),v.set(rt,r.toString()),n(3,u=!0)})});let B=async v=>await b.selfDecrypt(v);const G=async function(v){let W=v.detail.tag||null,N=v.detail.data.schema||"",P=v.detail.data.value||null;!W||!P||(await b.put(P,W,N),n(16,b),L(),K())};y=async(v,W)=>{await b.setTagReKeys(v,W),n(16,b)},k=async(v,W)=>await b.checkAccess(v,W),h=async v=>await b.decryptFromTagNode(v),D=async()=>{if(!i||!r)return;const v=await i.dag.get(r),W=Object.entries(v.value).map(async([P,F])=>P==="prev"||!F?null:(await i.dag.get(F)).value);return(await Promise.all(W)).filter(P=>P)};async function X(v,W=r){if(!(!W||!i||!v))try{const N=(await i.dag.get(W,{path:`/${v}`,localResolve:!0})).value;return(await i.dag.get(N,{localResolve:!0})).value}catch{console.warn(`${v} no DAG data`)}}function oe(v){K=v,n(8,K)}return o.$$set=v=>{"rootCID"in v&&n(0,r=v.rootCID),"proxcryptor"in v&&n(1,s=v.proxcryptor),"ipfsNode"in v&&n(12,i=v.ipfsNode),"CID"in v&&n(13,a=v.CID),"tag"in v&&n(2,c=v.tag),"onSubmitted"in v&&n(14,L=v.onSubmitted),"$$scope"in v&&n(20,t=v.$$scope)},o.$$.update=()=>{o.$$.dirty&131074&&s&&d&&d(),o.$$.dirty&98304&&b&&b.rootCID&&f&&f()},[r,s,c,u,h,y,k,D,K,B,G,X,i,a,L,f,b,d,l,oe,t]}class Ol extends x{constructor(e){super();ee(this,e,Vl,Hl,te,{rootCID:0,proxcryptor:1,ipfsNode:12,CID:13,tag:2,onSubmitted:14})}}function Ul(o){let e,n,l,t,r,s,i,a,c,u,f,p,b;return{c(){e=E("span"),n=I("[QR Code]"),l=O(),t=E("br"),r=O(),s=E("canvas"),c=O(),u=E("br"),this.h()},l(d){e=S(d,"SPAN",{class:!0});var h=R(e);n=T(h,"[QR Code]"),h.forEach(_),l=U(d),t=S(d,"BR",{}),r=U(d),s=S(d,"CANVAS",{width:!0,height:!0,class:!0}),R(s).forEach(_),c=U(d),u=S(d,"BR",{}),this.h()},h(){V(e,"class","svelte-s2soft"),s.hidden=i=!o[1],V(s,"width",32),V(s,"height",32),V(s,"class","svelte-s2soft")},m(d,h){m(d,e,h),C(e,n),m(d,l,h),m(d,t,h),m(d,r,h),m(d,s,h),o[6](s),m(d,c,h),m(d,u,h),f=!0,p||(b=[Z(e,"mouseover",o[4]),Z(s,"mousemove",o[5])],p=!0)},p(d,[h]){(!f||h&2&&i!==(i=!d[1]))&&(s.hidden=i)},i(d){f||(ye(()=>{a||(a=pe(s,Oe,{},!0)),a.run(1)}),f=!0)},o(d){a||(a=pe(s,Oe,{},!1)),a.run(0),f=!1},d(d){d&&_(e),d&&_(l),d&&_(t),d&&_(r),d&&_(s),o[6](null),d&&a&&a.end(),d&&_(c),d&&_(u),p=!1,Ue(b)}}}function Fl(o,e,n){let{value:l}=e,t,r=!1;async function s(){Nt.toCanvas(t,l),n(1,r=!0)}const i=()=>{s()},a=()=>{n(1,r=!1)};function c(u){re[u?"unshift":"push"](()=>{t=u,n(0,t)})}return o.$$set=u=>{"value"in u&&n(3,l=u.value)},[t,r,s,l,i,a,c]}class Bl extends x{constructor(e){super();ee(this,e,Fl,Ul,te,{value:3})}}function it(o){let e,n,l,t,r,s,i;function a(d){o[12](d)}var c=o[2];function u(d){let h={opts:d[8]};return d[0]!==void 0&&(h.hypnsNode=d[0]),{props:h}}c&&(e=new c(u(o)),re.push(()=>_e(e,"hypnsNode",a)));const f=[Gl,jl],p=[];function b(d,h){return d[0]?1:0}return r=b(o),s=p[r]=f[r](o),{c(){e&&q(e.$$.fragment),l=O(),t=E("div"),s.c(),this.h()},l(d){e&&le(e.$$.fragment,d),l=U(d),t=S(d,"DIV",{class:!0});var h=R(t);s.l(h),h.forEach(_),this.h()},h(){V(t,"class","main svelte-52klll")},m(d,h){e&&z(e,d,h),m(d,l,h),m(d,t,h),p[r].m(t,null),i=!0},p(d,h){const y={};if(!n&&h&1&&(n=!0,y.hypnsNode=d[0],me(()=>n=!1)),c!==(c=d[2])){if(e){M();const D=e;A(D.$$.fragment,1,0,()=>{Q(D,1)}),Y()}c?(e=new c(u(d)),re.push(()=>_e(e,"hypnsNode",a)),q(e.$$.fragment),w(e.$$.fragment,1),z(e,l.parentNode,l)):e=null}else c&&e.$set(y);let k=r;r=b(d),r===k?p[r].p(d,h):(M(),A(p[k],1,1,()=>{p[k]=null}),Y(),s=p[r],s?s.p(d,h):(s=p[r]=f[r](d),s.c()),w(s,1),s.m(t,null))},i(d){i||(e&&w(e.$$.fragment,d),w(s),i=!0)},o(d){e&&A(e.$$.fragment,d),A(s),i=!1},d(d){e&&Q(e,d),d&&_(l),d&&_(t),p[r].d()}}}function jl(o){let e=(o[3]?"Last Saved Root: "+o[3]:"Connect to Pin to PiperNet")+"",n,l,t,r,s,i;const a=[Ml,Jl,Wl],c=[];function u(f,p){return f[4]?f[5]?1:2:0}return t=u(o),r=c[t]=a[t](o),{c(){n=I(e),l=O(),r.c(),s=H()},l(f){n=T(f,e),l=U(f),r.l(f),s=H()},m(f,p){m(f,n,p),m(f,l,p),c[t].m(f,p),m(f,s,p),i=!0},p(f,p){(!i||p&8)&&e!==(e=(f[3]?"Last Saved Root: "+f[3]:"Connect to Pin to PiperNet")+"")&&ne(n,e);let b=t;t=u(f),t===b?c[t].p(f,p):(M(),A(c[b],1,1,()=>{c[b]=null}),Y(),r=c[t],r?r.p(f,p):(r=c[t]=a[t](f),r.c()),w(r,1),r.m(s.parentNode,s))},i(f){i||(w(r),i=!0)},o(f){A(r),i=!1},d(f){f&&_(n),f&&_(l),c[t].d(f),f&&_(s)}}}function Gl(o){let e;return{c(){e=I("Loading Hypns...")},l(n){e=T(n,"Loading Hypns...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Wl(o){let e;return{c(){e=I("Sign message to write to PiperNet...")},l(n){e=T(n,"Sign message to write to PiperNet...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Jl(o){let e,n,l,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Xl,then:ql,catch:Yl,blocks:[,,,]};return se(n=o[5],t),{c(){e=H(),t.block.c()},l(r){e=H(),t.block.l(r)},m(r,s){m(r,e,s),t.block.m(r,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(r,s){o=r,t.ctx=o,s&32&&n!==(n=o[5])&&se(n,t)||he(t,o,s)},i(r){l||(w(t.block),l=!0)},o(r){for(let s=0;s<3;s+=1){const i=t.blocks[s];A(i)}l=!1},d(r){r&&_(e),t.block.d(r),t.token=null,t=null}}}function Ml(o){let e,n,l,t;return{c(){e=E("button"),n=I("Pin to PiperNet"),this.h()},l(r){e=S(r,"BUTTON",{class:!0});var s=R(e);n=T(s,"Pin to PiperNet"),s.forEach(_),this.h()},h(){V(e,"class","svelte-52klll")},m(r,s){m(r,e,s),C(e,n),l||(t=Z(e,"click",o[9]),l=!0)},p:g,i:g,o:g,d(r){r&&_(e),l=!1,t()}}}function Yl(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function ql(o){let e,n,l,t,r,s,i,a,c,u,f;function p(h,y){return y&10&&(t=null),t==null&&(t=h[3]===h[1].toV1().toString()),t?Ql:zl}let b=p(o,-1),d=b(o);return u=new Bl({props:{value:`${location.origin+location.pathname}?add=${o[7]}`}}),{c(){e=E("h3"),n=I("\u2714\uFE0F Connected to PiperNet"),l=O(),d.c(),r=I(`\r
\r
					\r
					Connect with others: [`),s=E("a"),i=I("Link"),c=I("] "),q(u.$$.fragment),this.h()},l(h){e=S(h,"H3",{});var y=R(e);n=T(y,"\u2714\uFE0F Connected to PiperNet"),y.forEach(_),l=U(h),d.l(h),r=T(h,`\r
\r
					\r
					Connect with others: [`),s=S(h,"A",{href:!0});var k=R(s);i=T(k,"Link"),k.forEach(_),c=T(h,"] "),le(u.$$.fragment,h),this.h()},h(){V(s,"href",a=""+(location.origin+location.pathname+"?add="+o[7]))},m(h,y){m(h,e,y),C(e,n),m(h,l,y),d.m(h,y),m(h,r,y),m(h,s,y),C(s,i),m(h,c,y),z(u,h,y),f=!0},p(h,y){b===(b=p(h,y))&&d?d.p(h,y):(d.d(1),d=b(h),d&&(d.c(),d.m(r.parentNode,r))),(!f||y&128&&a!==(a=""+(location.origin+location.pathname+"?add="+h[7])))&&V(s,"href",a);const k={};y&128&&(k.value=`${location.origin+location.pathname}?add=${h[7]}`),u.$set(k)},i(h){f||(w(u.$$.fragment,h),f=!0)},o(h){A(u.$$.fragment,h),f=!1},d(h){h&&_(e),h&&_(l),d.d(h),h&&_(r),h&&_(s),h&&_(c),Q(u,h)}}}function zl(o){let e,n,l,t,r,s,i,a;return{c(){e=E("h3"),n=I("\u26A0\uFE0F PiperNet needs updating"),l=O(),t=E("button"),r=I("Publish Latest"),this.h()},l(c){e=S(c,"H3",{});var u=R(e);n=T(u,"\u26A0\uFE0F PiperNet needs updating"),u.forEach(_),l=U(c),t=S(c,"BUTTON",{class:!0});var f=R(t);r=T(f,"Publish Latest"),f.forEach(_),this.h()},h(){t.disabled=s=!o[1]||!o[6],V(t,"class","svelte-52klll")},m(c,u){m(c,e,u),C(e,n),m(c,l,u),m(c,t,u),C(t,r),i||(a=Z(t,"click",o[10]),i=!0)},p(c,u){u&66&&s!==(s=!c[1]||!c[6])&&(t.disabled=s)},d(c){c&&_(e),c&&_(l),c&&_(t),i=!1,a()}}}function Ql(o){let e,n;return{c(){e=E("h3"),n=I("\u2714\uFE0F PiperNet up to date")},l(l){e=S(l,"H3",{});var t=R(e);n=T(t,"\u2714\uFE0F PiperNet up to date"),t.forEach(_)},m(l,t){m(l,e,t),C(e,n)},p:g,d(l){l&&_(e)}}}function Xl(o){let e;return{c(){e=I("Loading instance...")},l(n){e=T(n,"Loading instance...")},m(n,l){m(n,e,l)},p:g,i:g,o:g,d(n){n&&_(e)}}}function Zl(o){let e,n,l=o[2]&&it(o);return{c(){l&&l.c(),e=H()},l(t){l&&l.l(t),e=H()},m(t,r){l&&l.m(t,r),m(t,e,r),n=!0},p(t,[r]){t[2]?l?(l.p(t,r),r&4&&w(l,1)):(l=it(t),l.c(),w(l,1),l.m(e.parentNode,e)):l&&(M(),A(l,1,1,()=>{l=null}),Y())},i(t){n||(w(l),n=!0)},o(t){A(l),n=!1},d(t){l&&l.d(t),t&&_(e)}}}function $l(o,e,n){let{rootCID:l}=e,{wallet:t}=e,{hypnsNode:r}=e,s,i,a,c,u,f,p={persist:!0,swarmOpts:{announceLocalAddress:!0,wsProxy:["wss://hyperswarm.mauve.moe","wss://geut-webrtc-signal-v3.glitch.me","wss://geut-webrtc-signal-v3.herokuapp.com"]}};de(async()=>{ge(()=>import("./index-436b918d.js"),[]).then(k=>{n(2,s=k.default)})});async function b(){const k=await t.proxcryptor.getPublicKey();n(7,f=Me(k))}async function d(){n(4,a=await r.open({keypair:{publicKey:f},wallet:t})),n(5,c=await a.ready()),console.log({instanceReady:c}),n(6,u=()=>{a.publish({ipld:l.toV1().toString()})}),a.on("update",k=>{n(3,i=k.ipld)})}async function h(){u()}function y(k){r=k,n(0,r)}return o.$$set=k=>{"rootCID"in k&&n(1,l=k.rootCID),"wallet"in k&&n(11,t=k.wallet),"hypnsNode"in k&&n(0,r=k.hypnsNode)},o.$$.update=()=>{o.$$.dirty&2049&&t&&r&&b()},[r,l,s,i,a,c,u,f,p,d,h,t,y]}class xl extends x{constructor(e){super();ee(this,e,$l,Zl,te,{rootCID:1,wallet:11,hypnsNode:0})}}function en(o){let e,n=o[0].tag+"",l;return{c(){e=I("\u2716\uFE0F You have no access to "),l=I(n)},l(t){e=T(t,"\u2716\uFE0F You have no access to "),l=T(t,n)},m(t,r){m(t,e,r),m(t,l,r)},p(t,r){r&1&&n!==(n=t[0].tag+"")&&ne(l,n)},d(t){t&&_(e),t&&_(l)}}}function tn(o){let e,n,l={ctx:o,current:null,token:null,hasCatch:!1,pending:on,then:nn,catch:ln,value:1};return se(n=o[1],l),{c(){e=H(),l.block.c()},l(t){e=H(),l.block.l(t)},m(t,r){m(t,e,r),l.block.m(t,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e},p(t,r){o=t,l.ctx=o,r&2&&n!==(n=o[1])&&se(n,l)||he(l,o,r)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function ln(o){return{c:g,l:g,m:g,p:g,d:g}}function nn(o){let e=o[1]+"",n;return{c(){n=I(e)},l(l){n=T(l,e)},m(l,t){m(l,n,t)},p(l,t){t&2&&e!==(e=l[1]+"")&&ne(n,e)},d(l){l&&_(n)}}}function on(o){let e;return{c(){e=I("accessing tagNode...")},l(n){e=T(n,"accessing tagNode...")},m(n,l){m(n,e,l)},p:g,d(n){n&&_(e)}}}function sn(o){let e;function n(r,s){return r[1]?tn:en}let l=n(o),t=l(o);return{c(){e=E("div"),t.c()},l(r){e=S(r,"DIV",{});var s=R(e);t.l(s),s.forEach(_)},m(r,s){m(r,e,s),t.m(e,null)},p(r,[s]){l===(l=n(r))&&t?t.p(r,s):(t.d(1),t=l(r),t&&(t.c(),t.m(e,null)))},i:g,o:g,d(r){r&&_(e),t.d()}}}function rn(o,e,n){let{decryptFromTagNode:l}=e,{tagNode:t}=e,r;async function s(){console.log(`Decrypting data on ${t.tag} `),n(1,r=await l(t))}return de(async()=>{}),o.$$set=i=>{"decryptFromTagNode"in i&&n(2,l=i.decryptFromTagNode),"tagNode"in i&&n(0,t=i.tagNode)},o.$$.update=()=>{o.$$.dirty&1&&t&&s()},[t,r,l]}class an extends x{constructor(e){super();ee(this,e,rn,sn,te,{decryptFromTagNode:2,tagNode:0})}}function at(o,e,n){const l=o.slice();return l[9]=e[n].handle,l[10]=e[n].pubKey,l}function ct(o){let e,n,l,t,r,s,i,a,c;return{c(){e=E("h1"),n=I("Add Nickname"),l=O(),t=E("label"),r=I("Handle:"),s=O(),i=E("input"),this.h()},l(u){e=S(u,"H1",{});var f=R(e);n=T(f,"Add Nickname"),f.forEach(_),l=U(u),t=S(u,"LABEL",{for:!0});var p=R(t);r=T(p,"Handle:"),p.forEach(_),s=U(u),i=S(u,"INPUT",{id:!0,class:!0}),this.h()},h(){V(t,"for","handle"),V(i,"id","handle"),V(i,"class","svelte-1uzs6ik")},m(u,f){m(u,e,f),C(e,n),m(u,l,f),m(u,t,f),C(t,r),m(u,s,f),m(u,i,f),ie(i,o[9]),a||(c=Z(i,"input",o[18]),a=!0)},p(u,f){f&512&&i.value!==u[9]&&ie(i,u[9])},d(u){u&&_(e),u&&_(l),u&&_(t),u&&_(s),u&&_(i),a=!1,c()}}}function ft(o){let e,n,l=o[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=_t(at(o,l,s));const r=s=>A(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=H()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=H()},m(s,i){for(let a=0;a<t.length;a+=1)t[a].m(s,i);m(s,e,i),n=!0},p(s,i){if(i&33562655){l=s[3];let a;for(a=0;a<l.length;a+=1){const c=at(s,l,a);t[a]?(t[a].p(c,i),w(t[a],1)):(t[a]=_t(c),t[a].c(),w(t[a],1),t[a].m(e.parentNode,e))}for(M(),a=l.length;a<t.length;a+=1)r(a);Y()}},i(s){if(!n){for(let i=0;i<l.length;i+=1)w(t[i]);n=!0}},o(s){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)A(t[i]);n=!1},d(s){De(t,s),s&&_(e)}}}function cn(o){let e,n=o[9]+"",l;return{c(){e=E("span"),l=I(n),this.h()},l(t){e=S(t,"SPAN",{slot:!0});var r=R(e);l=T(r,n),r.forEach(_),this.h()},h(){V(e,"slot","handle")},m(t,r){m(t,e,r),C(e,l)},p(t,r){r&8&&n!==(n=t[9]+"")&&ne(l,n)},d(t){t&&_(e)}}}function fn(o){let e,n,l,t=o[10]+"",r;return{c(){e=E("span"),n=I("PubKey: "),l=E("small"),r=I(t),this.h()},l(s){e=S(s,"SPAN",{slot:!0});var i=R(e);n=T(i,"PubKey: "),l=S(i,"SMALL",{});var a=R(l);r=T(a,t),a.forEach(_),i.forEach(_),this.h()},h(){V(e,"slot","publicKey")},m(s,i){m(s,e,i),C(e,n),C(e,l),C(l,r)},p(s,i){i&8&&t!==(t=s[10]+"")&&ne(r,t)},d(s){s&&_(e)}}}function un(o){let e,n;return e=new cl({props:{tag:o[13].tag,pubKey:o[10],checkAccess:o[2]}}),{c(){q(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,t){z(e,l,t),n=!0},p(l,t){const r={};t&8192&&(r.tag=l[13].tag),t&8&&(r.pubKey=l[10]),t&4&&(r.checkAccess=l[2]),e.$set(r)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function ut(o){let e,n;return e=new an({props:{tagNode:o[13],decryptFromTagNode:o[4]}}),{c(){q(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,t){z(e,l,t),n=!0},p(l,t){const r={};t&8192&&(r.tagNode=l[13]),t&16&&(r.decryptFromTagNode=l[4]),e.$set(r)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function _n(o){let e,n,l,t=un(o),r=o[13].tag==="Profile"&&ut(o);return{c(){t&&t.c(),e=O(),r&&r.c(),n=H()},l(s){t&&t.l(s),e=U(s),r&&r.l(s),n=H()},m(s,i){t&&t.m(s,i),m(s,e,i),r&&r.m(s,i),m(s,n,i),l=!0},p(s,i){t.p(s,i),s[13].tag==="Profile"?r?(r.p(s,i),i&8192&&w(r,1)):(r=ut(s),r.c(),w(r,1),r.m(n.parentNode,n)):r&&(M(),A(r,1,1,()=>{r=null}),Y())},i(s){l||(w(t),w(r),l=!0)},o(s){A(t),A(r),l=!1},d(s){t&&t.d(s),s&&_(e),r&&r.d(s),s&&_(n)}}}function dn(o){let e,n;return e=new ol({props:{rootCID:o[25],getTagNodes:o[0],$$slots:{default:[_n,({tagNode:l})=>({13:l}),({tagNode:l})=>l?8192:0]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(l){le(e.$$.fragment,l)},m(l,t){z(e,l,t),n=!0},p(l,t){const r={};t&33554432&&(r.rootCID=l[25]),t&1&&(r.getTagNodes=l[0]),t&67117084&&(r.$$scope={dirty:t,ctx:l}),e.$set(r)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){A(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function pn(o){let e,n,l;return n=new Zt({props:{pubKey:o[10],hypnsNode:o[1],$$slots:{default:[dn,({latestHypns:t})=>({25:t}),({latestHypns:t})=>t?33554432:0]},$$scope:{ctx:o}}}),{c(){e=E("span"),q(n.$$.fragment),this.h()},l(t){e=S(t,"SPAN",{slot:!0});var r=R(e);le(n.$$.fragment,r),r.forEach(_),this.h()},h(){V(e,"slot","latest")},m(t,r){m(t,e,r),z(n,e,null),l=!0},p(t,r){const s={};r&8&&(s.pubKey=t[10]),r&2&&(s.hypnsNode=t[1]),r&100663325&&(s.$$scope={dirty:r,ctx:t}),n.$set(s)},i(t){l||(w(n.$$.fragment,t),l=!0)},o(t){A(n.$$.fragment,t),l=!1},d(t){t&&_(e),Q(n)}}}function _t(o){let e,n,l,t;return n=new Ft({props:{$$slots:{latest:[pn],publicKey:[fn],handle:[cn]},$$scope:{ctx:o}}}),{c(){e=E("div"),q(n.$$.fragment),l=O(),this.h()},l(r){e=S(r,"DIV",{class:!0});var s=R(e);le(n.$$.fragment,s),l=U(s),s.forEach(_),this.h()},h(){V(e,"class","card-container svelte-1uzs6ik")},m(r,s){m(r,e,s),z(n,e,null),C(e,l),t=!0},p(r,s){const i={};s&67108895&&(i.$$scope={dirty:s,ctx:r}),n.$set(i)},i(r){t||(w(n.$$.fragment,r),t=!0)},o(r){A(n.$$.fragment,r),t=!1},d(r){r&&_(e),Q(n)}}}function hn(o){let e,n,l,t,r,s,i,a,c,u,f=(o[7]?"\u2714\uFE0F Valid Public Key":"")+"",p,b,d,h,y,k,D,K,L,B,G,X,oe,v,W,N=o[7]&&ct(o),P=o[3]&&ft(o);return{c(){e=E("div"),n=E("div"),l=E("h1"),t=I(Ee),r=O(),s=E("div"),i=E("input"),a=O(),c=E("div"),u=E("input"),p=I(f),b=O(),N&&N.c(),d=O(),h=E("div"),y=E("label"),k=O(),D=E("button"),K=I("Save"),G=O(),P&&P.c(),X=H(),this.h()},l(F){e=S(F,"DIV",{});var j=R(e);n=S(j,"DIV",{class:!0});var J=R(n);l=S(J,"H1",{class:!0});var $=R(l);t=T($,Ee),$.forEach(_),r=U(J),s=S(J,"DIV",{class:!0});var be=R(s);i=S(be,"INPUT",{placeholder:!0,class:!0}),be.forEach(_),a=U(J),c=S(J,"DIV",{class:!0});var we=R(c);u=S(we,"INPUT",{class:!0}),p=T(we,f),we.forEach(_),b=U(J),N&&N.l(J),d=U(J),h=S(J,"DIV",{class:!0});var ke=R(h);y=S(ke,"LABEL",{for:!0});var ht=R(y);ht.forEach(_),k=U(ke),D=S(ke,"BUTTON",{});var Le=R(D);K=T(Le,"Save"),Le.forEach(_),ke.forEach(_),J.forEach(_),j.forEach(_),G=U(F),P&&P.l(F),X=H(),this.h()},h(){V(l,"class","tag"),V(i,"placeholder","publicKey friends contacts"),i.disabled=!0,V(i,"class","svelte-1uzs6ik"),V(s,"class","tag keywords"),V(u,"class","svelte-1uzs6ik"),V(c,"class","item svelte-1uzs6ik"),V(y,"for","preview"),D.disabled=L=!o[9]||!o[10]||o[8],V(h,"class","submit"),V(n,"class","data-entry svelte-1uzs6ik")},m(F,j){m(F,e,j),C(e,n),C(n,l),C(l,t),C(n,r),C(n,s),C(s,i),ie(i,o[5]),C(n,a),C(n,c),C(c,u),o[16](u),ie(u,o[10]),C(c,p),C(n,b),N&&N.m(n,null),C(n,d),C(n,h),C(h,y),C(h,k),C(h,D),C(D,K),m(F,G,j),P&&P.m(F,j),m(F,X,j),oe=!0,v||(W=[Z(i,"input",o[15]),Z(u,"input",o[17]),Z(u,"input",o[11]),Z(u,"change",o[11]),Z(u,"focus",o[11]),Z(D,"click",Ke(o[12]))],v=!0)},p(F,[j]){o=F,j&32&&i.value!==o[5]&&ie(i,o[5]),j&1024&&u.value!==o[10]&&ie(u,o[10]),(!oe||j&128)&&f!==(f=(o[7]?"\u2714\uFE0F Valid Public Key":"")+"")&&ne(p,f),o[7]?N?N.p(o,j):(N=ct(o),N.c(),N.m(n,d)):N&&(N.d(1),N=null),(!oe||j&1792&&L!==(L=!o[9]||!o[10]||o[8]))&&(D.disabled=L),o[3]?P?(P.p(o,j),j&8&&w(P,1)):(P=ft(o),P.c(),w(P,1),P.m(X.parentNode,X)):P&&(M(),A(P,1,1,()=>{P=null}),Y())},i(F){oe||(ye(()=>{B||(B=pe(e,Ne,{delay:100,duration:400,easing:ve},!0)),B.run(1)}),w(P),oe=!0)},o(F){B||(B=pe(e,Ne,{delay:100,duration:400,easing:ve},!1)),B.run(0),A(P),oe=!1},d(F){F&&_(e),o[16](null),N&&N.d(),F&&B&&B.end(),F&&_(G),P&&P.d(F),F&&_(X),v=!1,Ue(W)}}}const Ee="Contacts";function mn(o,e,n){let l,t;Ce(o,St,v=>n(20,l=v)),Ce(o,Ae,v=>n(21,t=v));let{getTagNodes:r}=e,{hypnsNode:s}=e,{checkAccess:i}=e,{decryptedData:a}=e,{decryptFromTagNode:c}=e;const u=He();let f,p,b,d,h,y,k;de(async()=>{console.log({pageUrl:l.url});let v=new URLSearchParams(location.search);console.log({params:v.get("add")}),l.url.searchParams.has("add")?(n(10,b=l.url.searchParams.get("add")),await Fe(),d.focus()):v.has("add")&&(n(10,b=v.get("add")),await Fe(),d.focus())});function D(){n(8,k=!1),n(9,p=""),n(10,b=""),n(7,y=!1)}function K(){console.log(`Validating ${b}`),!!b&&(Ye(b)?n(7,y=!0):n(7,y=!1))}async function L(){if(!p||!b)return;const v=Ye(b),W=[...a,{handle:p,pubKey:new Uint8Array(v)}];n(8,k=!0),u("handleSubmit",{tag:Ee,data:{value:W,schema:f}})}function B(){f=this.value,n(5,f)}function G(v){re[v?"unshift":"push"](()=>{d=v,n(6,d)})}function X(){b=this.value,n(10,b)}function oe(){p=this.value,n(9,p)}return o.$$set=v=>{"getTagNodes"in v&&n(0,r=v.getTagNodes),"hypnsNode"in v&&n(1,s=v.hypnsNode),"checkAccess"in v&&n(2,i=v.checkAccess),"decryptedData"in v&&n(3,a=v.decryptedData),"decryptFromTagNode"in v&&n(4,c=v.decryptFromTagNode)},o.$$.update=()=>{o.$$.dirty&8&&a&&wt(Ae,t=a,t)},[r,s,i,a,c,f,d,y,k,p,b,K,L,h,D,B,G,X,oe]}class bn extends x{constructor(e){super();ee(this,e,mn,hn,te,{getTagNodes:0,hypnsNode:1,checkAccess:2,decryptedData:3,decryptFromTagNode:4,onSubmitted:14})}get onSubmitted(){return this.$$.ctx[14]}}const Se="Contacts",Pe="Profile",Re={[Se]:{name:Se,component:bn,tag:Se},[Pe]:{name:Pe,component:At,tag:Pe}};function dt(o,e,n){const l=o.slice();return l[21]=e[n][0],l[22]=e[n][1],l}function gn(o){let e,n;return{c(){e=I("Loading Web3 Wallet..."),n=E("br")},l(l){e=T(l,"Loading Web3 Wallet..."),n=S(l,"BR",{})},m(l,t){m(l,e,t),m(l,n,t)},p:g,i:g,o:g,d(l){l&&_(e),l&&_(n)}}}function kn(o){let e,n,l,t;function r(a){o[8](a)}var s=o[6];function i(a){let c={inputUrl:In};return a[0]!==void 0&&(c.wallet=a[0]),{props:c}}return s&&(e=new s(i(o)),re.push(()=>_e(e,"wallet",r))),{c(){e&&q(e.$$.fragment),l=H()},l(a){e&&le(e.$$.fragment,a),l=H()},m(a,c){e&&z(e,a,c),m(a,l,c),t=!0},p(a,c){const u={};if(!n&&c&1&&(n=!0,u.wallet=a[0],me(()=>n=!1)),s!==(s=a[6])){if(e){M();const f=e;A(f.$$.fragment,1,0,()=>{Q(f,1)}),Y()}s?(e=new s(i(a)),re.push(()=>_e(e,"wallet",r)),q(e.$$.fragment),w(e.$$.fragment,1),z(e,l.parentNode,l)):e=null}else s&&e.$set(u)},i(a){t||(e&&w(e.$$.fragment,a),t=!0)},o(a){e&&A(e.$$.fragment,a),t=!1},d(a){a&&_(l),e&&Q(e,a)}}}function pt(o){let e,n=o[21]+"",l,t;return{c(){e=E("option"),l=I(n),this.h()},l(r){e=S(r,"OPTION",{});var s=R(e);l=T(s,n),s.forEach(_),this.h()},h(){e.__value=t=o[22],e.value=e.__value},m(r,s){m(r,e,s),C(e,l)},p:g,d(r){r&&_(e)}}}function yn(o){let e,n;return{c(){e=I("Loading IPFS..."),n=E("br")},l(l){e=T(l,"Loading IPFS..."),n=S(l,"BR",{})},m(l,t){m(l,e,t),m(l,n,t)},p:g,i:g,o:g,d(l){l&&_(e),l&&_(n)}}}function vn(o){let e,n,l;function t(s){o[11](s)}let r={proxcryptor:o[0].proxcryptor,ipfsNode:o[3],CID:o[4],tag:o[2].tag,onSubmitted:o[7],$$slots:{default:[Nn,({decryptedData:s,getTagNodes:i,checkAccess:a,setAccess:c,handleSubmit:u,decryptFromTagNode:f})=>({15:s,16:i,17:a,18:c,19:u,20:f}),({decryptedData:s,getTagNodes:i,checkAccess:a,setAccess:c,handleSubmit:u,decryptFromTagNode:f})=>(s?32768:0)|(i?65536:0)|(a?131072:0)|(c?262144:0)|(u?524288:0)|(f?1048576:0)]},$$scope:{ctx:o}};return o[1]!==void 0&&(r.rootCID=o[1]),e=new Ol({props:r}),re.push(()=>_e(e,"rootCID",t)),{c(){q(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,i){z(e,s,i),l=!0},p(s,i){const a={};i&1&&(a.proxcryptor=s[0].proxcryptor),i&8&&(a.ipfsNode=s[3]),i&16&&(a.CID=s[4]),i&4&&(a.tag=s[2].tag),i&128&&(a.onSubmitted=s[7]),i&35618980&&(a.$$scope={dirty:i,ctx:s}),!n&&i&2&&(n=!0,a.rootCID=s[1],me(()=>n=!1)),e.$set(a)},i(s){l||(w(e.$$.fragment,s),l=!0)},o(s){A(e.$$.fragment,s),l=!1},d(s){Q(e,s)}}}function Nn(o){let e,n,l,t;function r(a){o[10](a)}var s=o[2].component;function i(a){let c={decryptedData:a[15],getTagNodes:a[16],checkAccess:a[17],setAccess:a[18],hypnsNode:a[5],decryptFromTagNode:a[20]};return a[7]!==void 0&&(c.onSubmitted=a[7]),{props:c}}return s&&(e=new s(i(o)),re.push(()=>_e(e,"onSubmitted",r)),e.$on("handleSubmit",function(){je(o[19])&&o[19].apply(this,arguments)})),{c(){e&&q(e.$$.fragment),l=H()},l(a){e&&le(e.$$.fragment,a),l=H()},m(a,c){e&&z(e,a,c),m(a,l,c),t=!0},p(a,c){o=a;const u={};if(c&32768&&(u.decryptedData=o[15]),c&65536&&(u.getTagNodes=o[16]),c&131072&&(u.checkAccess=o[17]),c&262144&&(u.setAccess=o[18]),c&32&&(u.hypnsNode=o[5]),c&1048576&&(u.decryptFromTagNode=o[20]),!n&&c&128&&(n=!0,u.onSubmitted=o[7],me(()=>n=!1)),s!==(s=o[2].component)){if(e){M();const f=e;A(f.$$.fragment,1,0,()=>{Q(f,1)}),Y()}s?(e=new s(i(o)),re.push(()=>_e(e,"onSubmitted",r)),e.$on("handleSubmit",function(){je(o[19])&&o[19].apply(this,arguments)}),q(e.$$.fragment),w(e.$$.fragment,1),z(e,l.parentNode,l)):e=null}else s&&e.$set(u)},i(a){t||(e&&w(e.$$.fragment,a),t=!0)},o(a){e&&A(e.$$.fragment,a),t=!1},d(a){a&&_(l),e&&Q(e,a)}}}function wn(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Dn(o){let e,n,l;function t(s){o[12](s)}let r={wallet:o[0],rootCID:o[1]};return o[5]!==void 0&&(r.hypnsNode=o[5]),e=new xl({props:r}),re.push(()=>_e(e,"hypnsNode",t)),{c(){q(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,i){z(e,s,i),l=!0},p(s,i){const a={};i&1&&(a.wallet=s[0]),i&2&&(a.rootCID=s[1]),!n&&i&32&&(n=!0,a.hypnsNode=s[5],me(()=>n=!1)),e.$set(a)},i(s){l||(w(e.$$.fragment,s),l=!0)},o(s){A(e.$$.fragment,s),l=!1},d(s){Q(e,s)}}}function Cn(o){let e,n,l,t,r,s,i,a,c,u,f,p,b,d,h;const y=[kn,gn],k=[];function D(N,P){return N[6]?0:1}n=D(o),l=k[n]=y[n](o);let K=Object.entries(Re),L=[];for(let N=0;N<K.length;N+=1)L[N]=pt(dt(o,K,N));const B=[vn,yn],G=[];function X(N,P){return N[0]&&N[0].proxcryptor&&N[3]&&N[4]?0:1}a=X(o),c=G[a]=B[a](o);const oe=[Dn,wn],v=[];function W(N,P){return N[1]?0:1}return f=W(o),p=v[f]=oe[f](o),{c(){e=E("div"),l.c(),t=O(),r=E("div"),s=E("select");for(let N=0;N<L.length;N+=1)L[N].c();i=O(),c.c(),u=O(),p.c(),this.h()},l(N){e=S(N,"DIV",{class:!0});var P=R(e);l.l(P),t=U(P),r=S(P,"DIV",{});var F=R(r);s=S(F,"SELECT",{class:!0});var j=R(s);for(let J=0;J<L.length;J+=1)L[J].l(j);j.forEach(_),F.forEach(_),i=U(P),c.l(P),u=U(P),p.l(P),P.forEach(_),this.h()},h(){V(s,"class","form-control"),o[2]===void 0&&ye(()=>o[9].call(s)),V(e,"class","")},m(N,P){m(N,e,P),k[n].m(e,null),C(e,t),C(e,r),C(r,s);for(let F=0;F<L.length;F+=1)L[F].m(s,null);Be(s,o[2]),C(e,i),G[a].m(e,null),C(e,u),v[f].m(e,null),b=!0,d||(h=Z(s,"change",o[9]),d=!0)},p(N,[P]){let F=n;if(n=D(N),n===F?k[n].p(N,P):(M(),A(k[F],1,1,()=>{k[F]=null}),Y(),l=k[n],l?l.p(N,P):(l=k[n]=y[n](N),l.c()),w(l,1),l.m(e,t)),P&0){K=Object.entries(Re);let $;for($=0;$<K.length;$+=1){const be=dt(N,K,$);L[$]?L[$].p(be,P):(L[$]=pt(be),L[$].c(),L[$].m(s,null))}for(;$<L.length;$+=1)L[$].d(1);L.length=K.length}P&4&&Be(s,N[2]);let j=a;a=X(N),a===j?G[a].p(N,P):(M(),A(G[j],1,1,()=>{G[j]=null}),Y(),c=G[a],c?c.p(N,P):(c=G[a]=B[a](N),c.c()),w(c,1),c.m(e,u));let J=f;f=W(N),f===J?v[f].p(N,P):(M(),A(v[J],1,1,()=>{v[J]=null}),Y(),p=v[f],p?p.p(N,P):(p=v[f]=oe[f](N),p.c()),w(p,1),p.m(e,null))},i(N){b||(w(l),w(c),w(p),b=!0)},o(N){A(l),A(c),A(p),b=!1},d(N){N&&_(e),k[n].d(),De(L,N),G[a].d(),v[f].d(),d=!1,h()}}}let In="https://peerpiper.github.io/iframe-wallet-engine/";function Tn(o,e,n){let{wallet:l=null}=e,{rootCID:t=null}=e,r=Re.Contacts,s,i,a,c,u,f=Date.now(),p;de(async()=>{l||D(),s||K();async function D(){n(6,{Web3WalletMenu:u}=await ge(()=>import("./index-58a8f259.js"),["chunks/index-58a8f259.js","assets/index-ccfb2056.css","chunks/vendor-029b5eca.js"]),u)}async function K(){const B=(await ge(()=>import("./ipfs-core-7ce8034c.js"),[])).default;n(4,i=B.CID),n(3,s=await B.create({})),console.log(`Loaded in ${(Date.now()-f)/1e3}s`,{ipfsNode:s}),a=(await s.id()).id,console.info("NodeId",a)}return()=>s.stop()});function b(D){l=D,n(0,l)}function d(){r=Dt(this),n(2,r)}function h(D){p=D,n(7,p)}function y(D){t=D,n(1,t)}function k(D){c=D,n(5,c)}return o.$$set=D=>{"wallet"in D&&n(0,l=D.wallet),"rootCID"in D&&n(1,t=D.rootCID)},[l,t,r,s,i,c,u,p,b,d,h,y,k]}class An extends x{constructor(e){super();ee(this,e,Tn,Cn,te,{wallet:0,rootCID:1})}}function En(o){let e,n,l,t,r;return t=new An({}),{c(){e=E("script"),n=I("global = globalThis; // for solana web3 repo"),l=O(),q(t.$$.fragment)},l(s){const i=Ve('[data-svelte="svelte-1yyo2jl"]',document.head);e=S(i,"SCRIPT",{});var a=R(e);n=T(a,"global = globalThis; // for solana web3 repo"),a.forEach(_),i.forEach(_),l=U(s),le(t.$$.fragment,s)},m(s,i){C(document.head,e),C(e,n),m(s,l,i),z(t,s,i),r=!0},p:g,i(s){r||(w(t.$$.fragment,s),r=!0)},o(s){A(t.$$.fragment,s),r=!1},d(s){_(e),s&&_(l),Q(t,s)}}}function Sn(o){return de(async()=>{}),[]}class Kn extends x{constructor(e){super();ee(this,e,Sn,En,te,{})}}export{Kn as R,Ln as h};
